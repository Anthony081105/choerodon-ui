import { Children, isValidElement } from 'react';
export function flatArray(data = [], childrenName = 'children') {
    const result = [];
    const loop = (array) => {
        array.forEach(item => {
            if (item[childrenName]) {
                const newItem = { ...item };
                delete newItem[childrenName];
                result.push(newItem);
                if (item[childrenName].length > 0) {
                    loop(item[childrenName]);
                }
            }
            else {
                result.push(item);
            }
        });
    };
    loop(data);
    return result;
}
export function treeMap(tree, mapper, childrenName = 'children') {
    return tree.map((node, index) => {
        const extra = {};
        if (node[childrenName]) {
            extra[childrenName] = treeMap(node[childrenName], mapper, childrenName);
        }
        return {
            ...mapper(node, index),
            ...extra,
        };
    });
}
export function flatFilter(tree, callback) {
    return tree.reduce((acc, node) => {
        if (callback(node)) {
            acc.push(node);
        }
        if (node.children) {
            const children = flatFilter(node.children, callback);
            acc.push(...children);
        }
        return acc;
    }, []);
}
export function normalizeColumns(elements) {
    const columns = [];
    Children.forEach(elements, element => {
        if (!isValidElement(element)) {
            return;
        }
        const column = {
            ...element.props,
        };
        if (element.key) {
            column.key = element.key;
        }
        if (element.type && element.type.__ANT_TABLE_COLUMN_GROUP) {
            column.children = normalizeColumns(column.children);
        }
        columns.push(column);
    });
    return columns;
}
export function getLeafColumns(columns) {
    return flatFilter(columns, c => !c.children);
}
export function getColumnKey(column, index) {
    return column.key || column.dataIndex || index;
}
export function findColumnByFilterValue(record, columns, inputValue) {
    return columns.find(col => {
        const key = getColumnKey(col);
        if (key) {
            let value = record[key];
            if (value && typeof value !== 'object') {
                value = value.toString();
                if (value.toLowerCase().indexOf(inputValue.toLowerCase()) !== -1) {
                    return true;
                }
            }
        }
        return false;
    });
}
export function filterByInputValue(dataSource, columns, inputValue, cb) {
    dataSource.forEach(data => {
        const column = findColumnByFilterValue(data, columns, inputValue);
        if (column) {
            cb(data, column);
        }
    });
}
export function removeHiddenColumns(columns) {
    return columns.filter(c => {
        if (c.hidden) {
            return false;
        }
        if (c.children) {
            const children = removeHiddenColumns(c.children);
            if (children.length) {
                c.children = children;
            }
            else {
                return false;
            }
        }
        return true;
    });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvdGFibGUvdXRpbC50c3giLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxjQUFjLEVBQWlCLE1BQU0sT0FBTyxDQUFDO0FBR2hFLE1BQU0sVUFBVSxTQUFTLENBQUMsT0FBYyxFQUFFLEVBQUUsWUFBWSxHQUFHLFVBQVU7SUFDbkUsTUFBTSxNQUFNLEdBQVUsRUFBRSxDQUFDO0lBQ3pCLE1BQU0sSUFBSSxHQUFHLENBQUMsS0FBWSxFQUFFLEVBQUU7UUFDNUIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNuQixJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsRUFBRTtnQkFDdEIsTUFBTSxPQUFPLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxDQUFDO2dCQUM1QixPQUFPLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDckIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtvQkFDakMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO2lCQUMxQjthQUNGO2lCQUFNO2dCQUNMLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbkI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNYLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUNyQixJQUFZLEVBQ1osTUFBMEMsRUFDMUMsWUFBWSxHQUFHLFVBQVU7SUFFekIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBUyxFQUFFLEtBQUssRUFBRSxFQUFFO1FBQ25DLE1BQU0sS0FBSyxHQUFRLEVBQUUsQ0FBQztRQUN0QixJ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LE9BQU8sSUFBSSxDQUFDO2lCQUNiO2FBQ0Y7U0FDRjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUNoQyxVQUFlLEVBQ2YsT0FBeUIsRUFDekIsVUFBa0IsRUFDbEIsRUFBK0M7SUFFL0MsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUN4QixNQUFNLE1BQU0sR0FBRyx1QkFBdUIsQ0FBSSxJQUFJLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3JFLElBQUksTUFBTSxFQUFFO1lBQ1YsRUFBRSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztTQUNsQjtJQUNILENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELE1BQU0sVUFBVSxtQkFBbUIsQ0FBSSxPQUF5QjtJQUM5RCxPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDeEIsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFO1lBQ1osT0FBTyxLQUFLLENBQUM7U0FDZDtRQUNELElBQUksQ0FBQyxDQUFDLFFBQVEsRUFBRTtZQUNkLE1BQU0sUUFBUSxHQUFHLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRCxJQUFJLFFBQVEsQ0FBQyxNQUFNLEVBQUU7Z0JBQ25CLENBQUMsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO2FBQ3ZCO2lCQUFNO2dCQUNMLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7U0FDRjtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL3RhYmxlL3V0aWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoaWxkcmVuLCBpc1ZhbGlkRWxlbWVudCwgUmVhY3RDaGlsZHJlbiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IENvbHVtblByb3BzIH0gZnJvbSAnLi9pbnRlcmZhY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gZmxhdEFycmF5KGRhdGE6IGFueVtdID0gW10sIGNoaWxkcmVuTmFtZSA9ICdjaGlsZHJlbicpIHtcbiAgY29uc3QgcmVzdWx0OiBhbnlbXSA9IFtdO1xuICBjb25zdCBsb29wID0gKGFycmF5OiBhbnlbXSkgPT4ge1xuICAgIGFycmF5LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpZiAoaXRlbVtjaGlsZHJlbk5hbWVdKSB7XG4gICAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7IC4uLml0ZW0gfTtcbiAgICAgICAgZGVsZXRlIG5ld0l0ZW1bY2hpbGRyZW5OYW1lXTtcbiAgICAgICAgcmVzdWx0LnB1c2gobmV3SXRlbSk7XG4gICAgICAgIGlmIChpdGVtW2NoaWxkcmVuTmFtZV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxvb3AoaXRlbVtjaGlsZHJlbk5hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG4gIGxvb3AoZGF0YSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmVlTWFwPE5vZGU+KFxuICB0cmVlOiBOb2RlW10sXG4gIG1hcHBlcjogKG5vZGU6IE5vZGUsIGluZGV4OiBudW1iZXIpID0+IGFueSxcbiAgY2hpbGRyZW5OYW1lID0gJ2NoaWxkcmVuJyxcbikge1xuICByZXR1cm4gdHJlZS5tYXAoKG5vZGU6IGFueSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBleHRyYTogYW55ID0ge307XG4gICAgaWYgKG5vZGVbY2hpbGRyZW5OYW1lXSkge1xuICAgICAgZXh0cmFbY2hpbGRyZW5OYW1lXSA9IHRyZWVNYXAobm9kZVtjaGlsZHJlbk5hbWVdLCBtYXBwZXIsIGNoaWxkcmVuTmFtZSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAuLi5tYXBwZXIobm9kZSBhcyBOb2RlLCBpbmRleCksXG4gICAgICAuLi5leHRyYSxcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZsYXRGaWx0ZXI8VD4oXG4gIHRyZWU6IENvbHVtblByb3BzPFQ+W10sXG4gIGNhbGxiYWNrOiAobm9kZTogQ29sdW1uUHJvcHM8VD4pID0+IGFueSxcbik6IENvbHVtblByb3BzPFQ+W10ge1xuICByZXR1cm4gdHJlZS5yZWR1Y2UoXG4gICAgKGFjYywgbm9kZSkgPT4ge1xuICAgICAgaWYgKGNhbGxiYWNrKG5vZGUpKSB7XG4gICAgICAgIGFjYy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBmbGF0RmlsdGVyKG5vZGUuY2hpbGRyZW4sIGNhbGxiYWNrKTtcbiAgICAgICAgYWNjLnB1c2goLi4uY2hpbGRyZW4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LFxuICAgIFtdIGFzIENvbHVtblByb3BzPFQ+W10sXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVDb2x1bW5zKGVsZW1lbnRzOiBSZWFjdENoaWxkcmVuKSB7XG4gIGNvbnN0IGNvbHVtbnM6IGFueVtdID0gW107XG4gIENoaWxkcmVuLmZvckVhY2goZWxlbWVudHMsIGVsZW1lbnQgPT4ge1xuICAgIGlmICghaXNWYWxpZEVsZW1lbnQoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29sdW1uOiBhbnkgPSB7XG4gICAgICAuLi4oZWxlbWVudC5wcm9wcyBhcyBPYmplY3QpLFxuICAgIH07XG4gICAgaWYgKGVsZW1lbnQua2V5KSB7XG4gICAgICBjb2x1bW4ua2V5ID0gZWxlbWVudC5rZXk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LnR5cGUgJiYgKGVsZW1lbnQudHlwZSBhcyBhbnkpLl9fQU5UX1RBQkxFX0NPTFVNTl9HUk9VUCkge1xuICAgICAgY29sdW1uLmNoaWxkcmVuID0gbm9ybWFsaXplQ29sdW1ucyhjb2x1bW4uY2hpbGRyZW4pO1xuICAgIH1cbiAgICBjb2x1bW5zLnB1c2goY29sdW1uKTtcbiAgfSk7XG4gIHJldHVybiBjb2x1bW5zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVhZkNvbHVtbnM8VD4oY29sdW1uczogQ29sdW1uUHJvcHM8VD5bXSkge1xuICByZXR1cm4gZmxhdEZpbHRlcihjb2x1bW5zLCBjID0+ICFjLmNoaWxkcmVuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbHVtbktleTxUPihjb2x1bW46IENvbHVtblByb3BzPFQ+LCBpbmRleD86IG51bWJlcikge1xuICByZXR1cm4gY29sdW1uLmtleSB8fCBjb2x1bW4uZGF0YUluZGV4IHx8IGluZGV4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZENvbHVtbkJ5RmlsdGVyVmFsdWU8VD4oXG4gIHJlY29yZDogVCxcbiAgY29sdW1uczogQ29sdW1uUHJvcHM8VD5bXSxcbiAgaW5wdXRWYWx1ZTogc3RyaW5nLFxuKTogQ29sdW1uUHJvcHM8VD4gfCB1bmRlZmluZWQge1xuICByZXR1cm4gY29sdW1ucy5maW5kKGNvbCA9PiB7XG4gICAgY29uc3Qga2V5ID0gZ2V0Q29sdW1uS2V5KGNvbCk7XG4gICAgaWYgKGtleSkge1xuICAgICAgbGV0IHZhbHVlID0gKHJlY29yZCBhcyBhbnkpW2tleV07XG4gICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh2YWx1ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaW5wdXRWYWx1ZS50b0xvd2VyQ2FzZSgpKSAhPT0gLTEpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyQnlJbnB1dFZhbHVlPFQ+KFxuICBkYXRhU291cmNlOiBUW10sXG4gIGNvbHVtbnM6IENvbHVtblByb3BzPFQ+W10sXG4gIGlucHV0VmFsdWU6IHN0cmluZyxcbiAgY2I6IChyZWNvcmQ6IFQsIGNvbHVtbjogQ29sdW1uUHJvcHM8VD4pID0+IHZvaWQsXG4pIHtcbiAgZGF0YVNvdXJjZS5mb3JFYWNoKGRhdGEgPT4ge1xuICAgIGNvbnN0IGNvbHVtbiA9IGZpbmRDb2x1bW5CeUZpbHRlclZhbHVlPFQ+KGRhdGEsIGNvbHVtbnMsIGlucHV0VmFsdWUpO1xuICAgIGlmIChjb2x1bW4pIHtcbiAgICAgIGNiKGRhdGEsIGNvbHVtbik7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhpZGRlbkNvbHVtbnM8VD4oY29sdW1uczogQ29sdW1uUHJvcHM8VD5bXSkge1xuICByZXR1cm4gY29sdW1ucy5maWx0ZXIoYyA9PiB7XG4gICAgaWYgKGMuaGlkZGVuKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjLmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IHJlbW92ZUhpZGRlbkNvbHVtbnMoYy5jaGlsZHJlbik7XG4gICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgIGMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufVxuIl0sInZlcnNpb24iOjN9