import React, { Component } from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';
import Icon from '../icon';
import { Circle } from '../rc-components/progress';
import Loading from './Loading';
import { getPrefixCls } from '../configure';
export default class Progress extends Component {
    constructor() {
        super(...arguments);
        this.renderPointer = () => {
            const props = this.props;
            const { prefixCls: customizePrefixCls, 
            // strokeColor,
            percent = 0, status, successPercent, } = props;
            const prefixCls = getPrefixCls('progress', customizePrefixCls);
            const progressStatus = parseInt(successPercent ? successPercent.toString() : percent.toString(), 10) >= 100 &&
                !('status' in props)
                ? "success" /* success */
                : status || "normal" /* normal */;
            return (React.createElement("svg", { xmlns: "http://www.w3.org/2000/svg", width: "38", height: "32", viewBox: "0 0 38 32" },
                React.createElement("path", { 
                    // style={{
                    //   fill: strokeColor ? strokeColor : '',
                    // }}
                    className: `${prefixCls}-status-pointer-${progressStatus}`, fill: "#6887E8", d: "M103.371587,49.724578 C103.681687,50.1292204 103.634794,50.6951896 103.280961,51.0440945 L103.186137,51.1265795 L78.8502947,69.7769214 C79.5504585,70.8623565 79.9567807,72.1551739 79.9567807,73.5428929 C79.9567807,77.3850168 76.8421239,80.4996736 73,80.4996736 C69.1578761,80.4996736 66.0432193,77.3850168 66.0432193,73.5428929 C66.0432193,69.700769 69.1578761,66.5861122 73,66.5861122 C74.7317808,66.5861122 76.3157678,67.218893 77.5333601,68.265854 L101.969586,49.5391281 C102.407948,49.2031866 103.035646,49.2862154 103.371587,49.724578 Z M73,68.5861122 C70.2624456,68.5861122 68.0432193,70.8053385 68.0432193,73.5428929 C68.0432193,76.2804473 70.2624456,78.4996736 73,78.4996736 C75.7375544,78.4996736 77.9567807,76.2804473 77.9567807,73.5428929 C77.9567807,70.8053385 75.7375544,68.5861122 73,68.5861122 Z", transform: "translate(-66 -49)" })));
        };
        /**
         * 计算指针角度
         */
        this.getPointerDeg = () => {
            const { percent = 0, gapDegree = 0, } = this.props;
            // 缺口角度
            const gapDeg = gapDegree || 75;
            // percent 角度
            const percentDeg = (360 - gapDeg) * (percent / 100);
            // 初始位置 0 -> 126 + 缺口角度/2 + percent 角度 + diffDeg
            let diffDeg = 0;
            if (percent <= 75 && percent > 50) {
                diffDeg = -3;
            }
            else if (percent > 75) {
                diffDeg = -5;
            }
            else if (percent < 50) {
                diffDeg = 5;
            }
            const deg = 128 + gapDeg / 2 + percentDeg + diffDeg;
            return { transform: `rotate(${deg}deg)` };
        };
    }
    render() {
        const props = this.props;
        const { prefixCls: customizePrefixCls, className, percent = 0, status, format, trailColor, size, successPercent, type, strokeWidth, strokeColor, width, showInfo, gapDegree = 0, gapPosition, showPointer, ...restProps } = props;
        const prefixCls = getPrefixCls('progress', customizePrefixCls);
        const progressStatus = parseInt(successPercent ? successPercent.toString() : percent.toString(), 10) >= 100 &&
            !('status' in props)
            ? "success" /* success */
            : status || "normal" /* normal */;
        let progressInfo;
        let progressCenter;
        let progress;
        const textFormatter = format || (percentNumber => `${percentNumber}%`);
        if (showInfo) {
            let text;
            const circleType = type === "circle" /* circle */ || type === "dashboard" /* dashboard */;
            if (progressStatus === "exception" /* exception */) {
                text = format ? textFormatter(percent) : React.createElement(Icon, { type: circleType ? 'close' : 'cancel' });
            }
            else if (progressStatus === "success" /* success */) {
                text = format ? (textFormatter(percent)) : (React.createElement(Icon, { type: circleType ? 'check' : 'check_circle' }));
            }
            else {
                text = textFormatter(percent);
            }
            progressInfo = React.createElement("span", { className: `${prefixCls}-text` }, text);
            if (showPointer) {
                progressCenter = (React.createElement("div", { className: `${prefixCls}-pointer`, style: this.getPointerDeg() }, this.renderPointer()));
                progressInfo = React.createElement("span", { className: `${prefixCls}-text-bottom` }, text);
            }
        }
        if (type === "line" /* line */) {
            const percentStyle = {
                width: `${percent}%`,
                height: strokeWidth || (size === "small" /* small */ ? 6 : 8),
                background: strokeColor,
            };
            const successPercentStyle = {
                width: `${successPercent}%`,
                height: strokeWidth || (size === "small" /* small */ ? 6 : 8),
            };
            const successSegment = successPercent !== undefined ? (React.createElement("div", { className: `${prefixCls}-success-bg`, style: successPercentStyle })) : null;
            progress = (React.createElement("div", null,
                React.createElement("div", { className: `${prefixCls}-outer` },
                    React.createElement("div", { className: `${prefixCls}-inner` },
                        React.createElement("div", { className: `${prefixCls}-bg`, style: percentStyle }),
                        successSegment)),
                progressInfo));
        }
        else if (type === "circle" /* circle */ || type === "dashboard" /* dashboard */) {
            const circleSize = width || 120;
            const circleStyle = {
                width: circleSize,
                height: circleSize,
                fontSize: circleSize * 0.15 + 6,
            };
            const circleWidth = strokeWidth || 6;
            const gapPos = gapPosition ||
                (type === "dashboard" /* dashboard */ && "bottom" /* bottom */) ||
                "top" /* top */;
            const gapDeg = gapDegree || (type === "dashboard" /* dashboard */ && 75);
            progress = (React.createElement("div", { className: `${prefixCls}-inner`, style: circleStyle },
                React.createElement(Circle, { percent: percent, strokeWidth: circleWidth, trailWidth: circleWidth, trailColor: trailColor, strokeColor: strokeColor, prefixCls: prefixCls, gapDegree: gapDeg, gapPosition: gapPos }),
                progressCenter,
                progressInfo));
        }
        else if (type === "loading" /* loading */) {
            progress = (React.createElement("div", { className: `${prefixCls}-inner` },
                React.createElement(Loading, null)));
        }
        const classString = classNames(prefixCls, {
            [`${prefixCls}-${(type === "dashboard" /* dashboard */ && "circle" /* circle */) || type}`]: true,
            [`${prefixCls}-status-${progressStatus}`]: true,
            [`${prefixCls}-show-info`]: showInfo,
            [`${prefixCls}-${size}`]: size,
        }, className);
        return (React.createElement("div", Object.assign({}, restProps, { className: classString }), progress));
    }
}
Progress.displayName = 'Progress';
Progress.defaultProps = {
    type: "line" /* line */,
    percent: 0,
    showInfo: true,
    showPointer: false,
    trailColor: '#f3f3f3',
    size: "default" /* default */,
};
Progress.propTypes = {
    status: PropTypes.oneOf([
        "normal" /* normal */,
        "exception" /* exception */,
        "active" /* active */,
        "success" /* success */,
    ]),
    type: PropTypes.oneOf([
        "line" /* line */,
        "circle" /* circle */,
        "dashboard" /* dashboard */,
        "loading" /* loading */,
    ]),
    showInfo: PropTypes.bool,
    showPointer: PropTypes.bool,
    percent: PropTypes.number,
    width: PropTypes.number,
    strokeWidth: PropTypes.number,
    strokeColor: PropTypes.string,
    trailColor: PropTypes.string,
    format: PropTypes.func,
    gapDegree: PropTypes.number,
    size: PropTypes.oneOf(["default" /* default */, "small" /* small */, "large" /* large */]),
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvcHJvZ3Jlc3MvcHJvZ3Jlc3MudHN4IiwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFpQixNQUFNLE9BQU8sQ0FBQztBQUN4RCxPQUFPLFNBQVMsTUFBTSxZQUFZLENBQUM7QUFDbkMsT0FBTyxVQUFVLE1BQU0sWUFBWSxDQUFDO0FBQ3BDLE9BQU8sSUFBSSxNQUFNLFNBQVMsQ0FBQztBQUMzQixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDbkQsT0FBTyxPQUFPLE1BQU0sV0FBVyxDQUFDO0FBR2hDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFzQjVDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sUUFBUyxTQUFRLFNBQTRCO0lBQWxFOztRQTJDRSxrQkFBYSxHQUFHLEdBQUcsRUFBRTtZQUNuQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3pCLE1BQU0sRUFDSixTQUFTLEVBQUUsa0JBQWtCO1lBQzdCLGVBQWU7WUFDZixPQUFPLEdBQUcsQ0FBQyxFQUNYLE1BQU0sRUFDTixjQUFjLEdBQ2YsR0FBRyxLQUFLLENBQUM7WUFDVixNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsVUFBVSxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFDL0QsTUFBTSxjQUFjLEdBQ2xCLFFBQVEsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxJQUFJLEdBQUc7Z0JBQ3BGLENBQUMsQ0FBQyxRQUFRLElBQUksS0FBSyxDQUFDO2dCQUNsQixDQUFDO2dCQUNELENBQUMsQ0FBQyxNQUFNLHlCQUF5QixDQUFDO1lBQ3RDLE9BQU8sQ0FDTCw2QkFBSyxLQUFLLEVBQUMsNEJBQTRCLEVBQUMsS0FBSyxF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SSx5QkFBYztDQUNuQixDQUFDO0FBRUssa0JBQVMsR0FBRztJQUNqQixNQUFNLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQzs7Ozs7S0FLdkIsQ0FBQztJQUNGLElBQUksRUFBRSxTQUFTLENBQUMsS0FBSyxDQUFDOzs7OztLQUtyQixDQUFDO0lBQ0YsUUFBUSxFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3hCLFdBQVcsRUFBRSxTQUFTLENBQUMsSUFBSTtJQUMzQixPQUFPLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDekIsS0FBSyxFQUFFLFNBQVMsQ0FBQyxNQUFNO0lBQ3ZCLFdBQVcsRUFBRSxTQUFTLENBQUMsTUFBTTtJQUM3QixXQUFXLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDN0IsVUFBVSxFQUFFLFNBQVMsQ0FBQyxNQUFNO0lBQzVCLE1BQU0sRUFBRSxTQUFTLENBQUMsSUFBSTtJQUN0QixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDM0IsSUFBSSxFQUFFLFNBQVMsQ0FBQyxLQUFLLENBQUMsbUVBQXNDLENBQUM7Q0FDOUQsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaHVpaHVhd2svRG9jdW1lbnRzL29wdC9jaG9lcm9kb24tdWkvY29tcG9uZW50cy9wcm9ncmVzcy9wcm9ncmVzcy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCwgQ1NTUHJvcGVydGllcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBJY29uIGZyb20gJy4uL2ljb24nO1xuaW1wb3J0IHsgQ2lyY2xlIH0gZnJvbSAnLi4vcmMtY29tcG9uZW50cy9wcm9ncmVzcyc7XG5pbXBvcnQgTG9hZGluZyBmcm9tICcuL0xvYWRpbmcnO1xuaW1wb3J0IHsgU2l6ZSB9IGZyb20gJy4uL191dGlsL2VudW0nO1xuaW1wb3J0IHsgUHJvZ3Jlc3NQb3NpdGlvbiwgUHJvZ3Jlc3NTdGF0dXMsIFByb2dyZXNzVHlwZSB9IGZyb20gJy4vZW51bSc7XG5pbXBvcnQgeyBnZXRQcmVmaXhDbHMgfSBmcm9tICcuLi9jb25maWd1cmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb2dyZXNzUHJvcHMge1xuICBwcmVmaXhDbHM/OiBzdHJpbmc7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgdHlwZT86IFByb2dyZXNzVHlwZTtcbiAgcGVyY2VudD86IG51bWJlcjtcbiAgc3VjY2Vzc1BlcmNlbnQ/OiBudW1iZXI7XG4gIGZvcm1hdD86IChwZXJjZW50OiBudW1iZXIpID0+IFJlYWN0LlJlYWN0Tm9kZTtcbiAgc3RhdHVzPzogUHJvZ3Jlc3NTdGF0dXM7XG4gIHNob3dJbmZvPzogYm9vbGVhbjtcbiAgc2hvd1BvaW50ZXI/OiBib29sZWFuO1xuICBzdHJva2VXaWR0aD86IG51bWJlcjtcbiAgdHJhaWxDb2xvcj86IHN0cmluZztcbiAgc3Ryb2tlQ29sb3I/OiBzdHJpbmc7XG4gIHdpZHRoPzogbnVtYmVyO1xuICBzdHlsZT86IENTU1Byb3BlcnRpZXM7XG4gIGdhcERlZ3JlZT86IG51bWJlcjtcbiAgZ2FwUG9zaXRpb24/OiBQcm9ncmVzc1Bvc2l0aW9uO1xuICBzaXplPzogU2l6ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZ3Jlc3MgZXh0ZW5kcyBDb21wb25lbnQ8UHJvZ3Jlc3NQcm9wcywge30+IHtcbiAgc3RhdGljIGRpc3BsYXlOYW1lID0gJ1Byb2dyZXNzJztcblxuICBzdGF0aWMgTGluZTogYW55O1xuXG4gIHN0YXRpYyBDaXJjbGU6IGFueTtcblxuICBzdGF0aWMgTG9hZGluZzogYW55O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgdHlwZTogUHJvZ3Jlc3NUeXBlLmxpbmUsXG4gICAgcGVyY2VudDogMCxcbiAgICBzaG93SW5mbzogdHJ1ZSxcbiAgICBzaG93UG9pbnRlcjogZmFsc2UsXG4gICAgdHJhaWxDb2xvcjogJyNmM2YzZjMnLFxuICAgIHNpemU6IFNpemUuZGVmYXVsdCxcbiAgfTtcblxuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIHN0YXR1czogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAgIFByb2dyZXNzU3RhdHVzLm5vcm1hbCxcbiAgICAgIFByb2dyZXNzU3RhdHVzLmV4Y2VwdGlvbixcbiAgICAgIFByb2dyZXNzU3RhdHVzLmFjdGl2ZSxcbiAgICAgIFByb2dyZXNzU3RhdHVzLnN1Y2Nlc3MsXG4gICAgXSksXG4gICAgdHlwZTogUHJvcFR5cGVzLm9uZU9mKFtcbiAgICAgIFByb2dyZXNzVHlwZS5saW5lLFxuICAgICAgUHJvZ3Jlc3NUeXBlLmNpcmNsZSxcbiAgICAgIFByb2dyZXNzVHlwZS5kYXNoYm9hcmQsXG4gICAgICBQcm9ncmVzc1R5cGUubG9hZGluZyxcbiAgICBdKSxcbiAgICBzaG93SW5mbzogUHJvcFR5cGVzLmJvb2wsXG4gICAgc2hvd1BvaW50ZXI6IFByb3BUeXBlcy5ib29sLFxuICAgIHBlcmNlbnQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgd2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgc3Ryb2tlV2lkdGg6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgc3Ryb2tlQ29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdHJhaWxDb2xvcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBmb3JtYXQ6IFByb3BUeXBlcy5mdW5jLFxuICAgIGdhcERlZ3JlZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBzaXplOiBQcm9wVHlwZXMub25lT2YoW1NpemUuZGVmYXVsdCwgU2l6ZS5zbWFsbCwgU2l6ZS5sYXJnZV0pLFxuICB9O1xuXG4gIHJlbmRlclBvaW50ZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtcbiAgICAgIHByZWZpeENsczogY3VzdG9taXplUHJlZml4Q2xzLFxuICAgICAgLy8gc3Ryb2tlQ29sb3IsXG4gICAgICBwZXJjZW50ID0gMCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIHN1Y2Nlc3NQZXJjZW50LFxuICAgIH0gPSBwcm9wcztcbiAgICBjb25zdCBwcmVmaXhDbHMgPSBnZXRQcmVmaXhDbHMoJ3Byb2dyZXNzJywgY3VzdG9taXplUHJlZml4Q2xzKTtcbiAgICBjb25zdCBwcm9ncmVzc1N0YXR1cyA9XG4gICAgICBwYXJzZUludChzdWNjZXNzUGVyY2VudCA/IHN1Y2Nlc3NQZXJjZW50LnRvU3RyaW5nKCkgOiBwZXJjZW50LnRvU3RyaW5nKCksIDEwKSA+PSAxMDAgJiZcbiAgICAgICEoJ3N0YXR1cycgaW4gcHJvcHMpXG4gICAgICAgID8gUHJvZ3Jlc3NTdGF0dXMuc3VjY2Vzc1xuICAgICAgICA6IHN0YXR1cyB8fCBQcm9ncmVzc1N0YXR1cy5ub3JtYWw7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMzhcIiBoZWlnaHQ9XCIzMlwiIHZpZXdCb3g9XCIwIDAgMzggMzJcIj5cbiAgICAgICAgPHBhdGhcbiAgICAgICAgICAvLyBzdHlsZT17e1xuICAgICAgICAgIC8vICAgZmlsbDogc3Ryb2tlQ29sb3IgPyBzdHJva2VDb2xvciA6ICcnLFxuICAgICAgICAgIC8vIH19XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXN0YXR1cy1wb2ludGVyLSR7cHJvZ3Jlc3NTdGF0dXN9YH1cbiAgICAgICAgICBmaWxsPVwiIzY4ODdFOFwiIGQ9XCJNMTAzLjM3MTU4Nyw0OS43MjQ1NzggQzEwMy42ODE2ODcsNTAuMTI5MjIwNCAxMDMuNjM0Nzk0LDUwLjY5NTE4OTYgMTAzLjI4MDk2MSw1MS4wNDQwOTQ1IEwxMDMuMTg2MTM3LDUxLjEyNjU3OTUgTDc4Ljg1MDI5NDcsNjkuNzc2OTIxNCBDNzkuNTUwNDU4NSw3MC44NjIzNTY1IDc5Ljk1Njc4MDcsNzIuMTU1MTczOSA3OS45NTY3ODA3LDczLjU0Mjg5MjkgQzc5Ljk1Njc4MDcsNzcuMzg1MDE2OCA3Ni44NDIxMjM5LDgwLjQ5OTY3MzYgNzMsODAuNDk5NjczNiBDNjkuMTU3ODc2MSw4MC40OTk2NzM2IDY2LjA0MzIxOTMsNzcuMzg1MDE2OCA2Ni4wNDMyMTkzLDczLjU0Mjg5MjkgQzY2LjA0MzIxOTMsNjkuNzAwNzY5IDY5LjE1Nzg3NjEsNjYuNTg2MTEyMiA3Myw2Ni41ODYxMTIyIEM3NC43MzE3ODA4LDY2LjU4NjExMjIgNzYuMzE1NzY3OCw2Ny4yMTg4OTMgNzcuNTMzMzYwMSw2OC4yNjU4NTQgTDEwMS45Njk1ODYsNDkuNTM5MTI4MSBDMTAyLjQwNzk0OCw0OS4yMDMxODY2IDEwMy4wMzU2NDYsNDkuMjg2MjE1NCAxMDMuMzcxNTg3LDQ5LjcyNDU3OCBaIE03Myw2OC41ODYxMTIyIEM3MC4yNjI0NDU2LDY4LjU4NjExMjIgNjguMDQzMjE5Myw3MC44MDUzMzg1IDY4LjA0MzIxOTMsNzMuNTQyODkyOSBDNjguMDQzMjE5Myw3Ni4yODA0NDczIDcwLjI2MjQ0NTYsNzguNDk5NjczNiA3Myw3OC40OTk2NzM2IEM3NS43Mzc1NTQ0LDc4LjQ5OTY3MzYgNzcuOTU2NzgwNyw3Ni4yODA0NDczIDc3Ljk1Njc4MDcsNzMuNTQyODkyOSBDNzcuOTU2NzgwNyw3MC44MDUzMzg1IDc1LjczNzU1NDQsNjguNTg2MTEyMiA3Myw2OC41ODYxMTIyIFpcIlxuICAgICAgICAgIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtNjYgLTQ5KVwiXG4gICAgICAgIC8+XG4gICAgICA8L3N2Zz5cbiAgICApO1xuICB9O1xuXG4gIC8qKlxuICAgKiDorqHnrpfmjIfpkojop5LluqZcbiAgICovXG4gIGdldFBvaW50ZXJEZWcgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgcGVyY2VudCA9IDAsXG4gICAgICBnYXBEZWdyZWUgPSAwLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIC8vIOe8uuWPo+inkuW6plxuICAgIGNvbnN0IGdhcERlZyA9IGdhcERlZ3JlZSB8fCA3NTtcbiAgICAvLyBwZXJjZW50IOinkuW6plxuICAgIGNvbnN0IHBlcmNlbnREZWcgPSAoMzYwIC0gZ2FwRGVnKSAqIChwZXJjZW50IC8gMTAwKTtcbiAgICAvLyDliJ3lp4vkvY3nva4gMCAtPiAxMjYgKyDnvLrlj6Pop5LluqYvMiArIHBlcmNlbnQg6KeS5bqmICsgZGlmZkRlZ1xuICAgIGxldCBkaWZmRGVnID0gMDtcbiAgICBpZiAocGVyY2VudCA8PSA3NSAmJiBwZXJjZW50ID4gNTApIHtcbiAgICAgIGRpZmZEZWcgPSAtMztcbiAgICB9IGVsc2UgaWYgKHBlcmNlbnQgPiA3NSkge1xuICAgICAgZGlmZkRlZyA9IC01O1xuICAgIH0gZWxzZSBpZiAocGVyY2VudCA8IDUwKSB7XG4gICAgICBkaWZmRGVnID0gNTtcbiAgICB9XG4gICAgY29uc3QgZGVnID0gMTI4ICsgZ2FwRGVnIC8gMiArIHBlcmNlbnREZWcgKyBkaWZmRGVnO1xuICAgIHJldHVybiB7IHRyYW5zZm9ybTogYHJvdGF0ZSgke2RlZ31kZWcpYCB9O1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qge1xuICAgICAgcHJlZml4Q2xzOiBjdXN0b21pemVQcmVmaXhDbHMsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBwZXJjZW50ID0gMCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGZvcm1hdCxcbiAgICAgIHRyYWlsQ29sb3IsXG4gICAgICBzaXplLFxuICAgICAgc3VjY2Vzc1BlcmNlbnQsXG4gICAgICB0eXBlLFxuICAgICAgc3Ryb2tlV2lkdGgsXG4gICAgICBzdHJva2VDb2xvcixcbiAgICAgIHdpZHRoLFxuICAgICAgc2hvd0luZm8sXG4gICAgICBnYXBEZWdyZWUgPSAwLFxuICAgICAgZ2FwUG9zaXRpb24sXG4gICAgICBzaG93UG9pbnRlcixcbiAgICAgIC4uLnJlc3RQcm9wc1xuICAgIH0gPSBwcm9wcztcbiAgICBjb25zdCBwcmVmaXhDbHMgPSBnZXRQcmVmaXhDbHMoJ3Byb2dyZXNzJywgY3VzdG9taXplUHJlZml4Q2xzKTtcbiAgICBjb25zdCBwcm9ncmVzc1N0YXR1cyA9XG4gICAgICBwYXJzZUludChzdWNjZXNzUGVyY2VudCA/IHN1Y2Nlc3NQZXJjZW50LnRvU3RyaW5nKCkgOiBwZXJjZW50LnRvU3RyaW5nKCksIDEwKSA+PSAxMDAgJiZcbiAgICAgICEoJ3N0YXR1cycgaW4gcHJvcHMpXG4gICAgICAgID8gUHJvZ3Jlc3NTdGF0dXMuc3VjY2Vzc1xuICAgICAgICA6IHN0YXR1cyB8fCBQcm9ncmVzc1N0YXR1cy5ub3JtYWw7XG4gICAgbGV0IHByb2dyZXNzSW5mbztcbiAgICBsZXQgcHJvZ3Jlc3NDZW50ZXI7XG4gICAgbGV0IHByb2dyZXNzO1xuICAgIGNvbnN0IHRleHRGb3JtYXR0ZXIgPSBmb3JtYXQgfHwgKHBlcmNlbnROdW1iZXIgPT4gYCR7cGVyY2VudE51bWJlcn0lYCk7XG5cbiAgICBpZiAoc2hvd0luZm8pIHtcbiAgICAgIGxldCB0ZXh0O1xuICAgICAgY29uc3QgY2lyY2xlVHlwZSA9IHR5cGUgPT09IFByb2dyZXNzVHlwZS5jaXJjbGUgfHwgdHlwZSA9PT0gUHJvZ3Jlc3NUeXBlLmRhc2hib2FyZDtcbiAgICAgIGlmIChwcm9ncmVzc1N0YXR1cyA9PT0gUHJvZ3Jlc3NTdGF0dXMuZXhjZXB0aW9uKSB7XG4gICAgICAgIHRleHQgPSBmb3JtYXQgPyB0ZXh0Rm9ybWF0dGVyKHBlcmNlbnQpIDogPEljb24gdHlwZT17Y2lyY2xlVHlwZSA/ICdjbG9zZScgOiAnY2FuY2VsJ30gLz47XG4gICAgICB9IGVsc2UgaWYgKHByb2dyZXNzU3RhdHVzID09PSBQcm9ncmVzc1N0YXR1cy5zdWNjZXNzKSB7XG4gICAgICAgIHRleHQgPSBmb3JtYXQgPyAoXG4gICAgICAgICAgdGV4dEZvcm1hdHRlcihwZXJjZW50KVxuICAgICAgICApIDogKFxuICAgICAgICAgIDxJY29uIHR5cGU9e2NpcmNsZVR5cGUgPyAnY2hlY2snIDogJ2NoZWNrX2NpcmNsZSd9IC8+XG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gdGV4dEZvcm1hdHRlcihwZXJjZW50KTtcbiAgICAgIH1cbiAgICAgIHByb2dyZXNzSW5mbyA9IDxzcGFuIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS10ZXh0YH0+e3RleHR9PC9zcGFuPjtcbiAgICAgIGlmIChzaG93UG9pbnRlcikge1xuICAgICAgICBwcm9ncmVzc0NlbnRlciA9IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1wb2ludGVyYH0gc3R5bGU9e3RoaXMuZ2V0UG9pbnRlckRlZygpfT5cbiAgICAgICAgICAgIHt0aGlzLnJlbmRlclBvaW50ZXIoKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgICAgcHJvZ3Jlc3NJbmZvID0gPHNwYW4gY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXRleHQtYm90dG9tYH0+e3RleHR9PC9zcGFuPjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gUHJvZ3Jlc3NUeXBlLmxpbmUpIHtcbiAgICAgIGNvbnN0IHBlcmNlbnRTdHlsZSA9IHtcbiAgICAgICAgd2lkdGg6IGAke3BlcmNlbnR9JWAsXG4gICAgICAgIGhlaWdodDogc3Ryb2tlV2lkdGggfHwgKHNpemUgPT09IFNpemUuc21hbGwgPyA2IDogOCksXG4gICAgICAgIGJhY2tncm91bmQ6IHN0cm9rZUNvbG9yLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHN1Y2Nlc3NQZXJjZW50U3R5bGUgPSB7XG4gICAgICAgIHdpZHRoOiBgJHtzdWNjZXNzUGVyY2VudH0lYCxcbiAgICAgICAgaGVpZ2h0OiBzdHJva2VXaWR0aCB8fCAoc2l6ZSA9PT0gU2l6ZS5zbWFsbCA/IDYgOiA4KSxcbiAgICAgIH07XG4gICAgICBjb25zdCBzdWNjZXNzU2VnbWVudCA9XG4gICAgICAgIHN1Y2Nlc3NQZXJjZW50ICE9PSB1bmRlZmluZWQgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc3VjY2Vzcy1iZ2B9IHN0eWxlPXtzdWNjZXNzUGVyY2VudFN0eWxlfSAvPlxuICAgICAgICApIDogbnVsbDtcbiAgICAgIHByb2dyZXNzID0gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LW91dGVyYH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1pbm5lcmB9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1iZ2B9IHN0eWxlPXtwZXJjZW50U3R5bGV9IC8+XG4gICAgICAgICAgICAgIHtzdWNjZXNzU2VnbWVudH1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtwcm9ncmVzc0luZm99XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFByb2dyZXNzVHlwZS5jaXJjbGUgfHwgdHlwZSA9PT0gUHJvZ3Jlc3NUeXBlLmRhc2hib2FyZCkge1xuICAgICAgY29uc3QgY2lyY2xlU2l6ZSA9IHdpZHRoIHx8IDEyMDtcbiAgICAgIGNvbnN0IGNpcmNsZVN0eWxlID0ge1xuICAgICAgICB3aWR0aDogY2lyY2xlU2l6ZSxcbiAgICAgICAgaGVpZ2h0OiBjaXJjbGVTaXplLFxuICAgICAgICBmb250U2l6ZTogY2lyY2xlU2l6ZSAqIDAuMTUgKyA2LFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGNpcmNsZVdpZHRoID0gc3Ryb2tlV2lkdGggfHwgNjtcbiAgICAgIGNvbnN0IGdhcFBvcyA9XG4gICAgICAgIGdhcFBvc2l0aW9uIHx8XG4gICAgICAgICh0eXBlID09PSBQcm9ncmVzc1R5cGUuZGFzaGJvYXJkICYmIFByb2dyZXNzUG9zaXRpb24uYm90dG9tKSB8fFxuICAgICAgICBQcm9ncmVzc1Bvc2l0aW9uLnRvcDtcbiAgICAgIGNvbnN0IGdhcERlZyA9IGdhcERlZ3JlZSB8fCAodHlwZSA9PT0gUHJvZ3Jlc3NUeXBlLmRhc2hib2FyZCAmJiA3NSk7XG4gICAgICBwcm9ncmVzcyA9IChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30taW5uZXJgfSBzdHlsZT17Y2lyY2xlU3R5bGV9PlxuICAgICAgICAgIDxDaXJjbGVcbiAgICAgICAgICAgIHBlcmNlbnQ9e3BlcmNlbnR9XG4gICAgICAgICAgICBzdHJva2VXaWR0aD17Y2lyY2xlV2lkdGh9XG4gICAgICAgICAgICB0cmFpbFdpZHRoPXtjaXJjbGVXaWR0aH1cbiAgICAgICAgICAgIHRyYWlsQ29sb3I9e3RyYWlsQ29sb3J9XG4gICAgICAgICAgICBzdHJva2VDb2xvcj17c3Ryb2tlQ29sb3J9XG4gICAgICAgICAgICBwcmVmaXhDbHM9e3ByZWZpeENsc31cbiAgICAgICAgICAgIGdhcERlZ3JlZT17Z2FwRGVnfVxuICAgICAgICAgICAgZ2FwUG9zaXRpb249e2dhcFBvc31cbiAgICAgICAgICAvPlxuICAgICAgICAgIHtwcm9ncmVzc0NlbnRlcn1cbiAgICAgICAgICB7cHJvZ3Jlc3NJbmZvfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBQcm9ncmVzc1R5cGUubG9hZGluZykge1xuICAgICAgcHJvZ3Jlc3MgPSAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWlubmVyYH0+XG4gICAgICAgICAgPExvYWRpbmcgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGNsYXNzU3RyaW5nID0gY2xhc3NOYW1lcyhcbiAgICAgIHByZWZpeENscyxcbiAgICAgIHtcbiAgICAgICAgW2Ake3ByZWZpeENsc30tJHsodHlwZSA9PT0gUHJvZ3Jlc3NUeXBlLmRhc2hib2FyZCAmJiBQcm9ncmVzc1R5cGUuY2lyY2xlKSB8fCB0eXBlfWBdOiB0cnVlLFxuICAgICAgICBbYCR7cHJlZml4Q2xzfS1zdGF0dXMtJHtwcm9ncmVzc1N0YXR1c31gXTogdHJ1ZSxcbiAgICAgICAgW2Ake3ByZWZpeENsc30tc2hvdy1pbmZvYF06IHNob3dJbmZvLFxuICAgICAgICBbYCR7cHJlZml4Q2xzfS0ke3NpemV9YF06IHNpemUsXG4gICAgICB9LFxuICAgICAgY2xhc3NOYW1lLFxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiB7Li4ucmVzdFByb3BzfSBjbGFzc05hbWU9e2NsYXNzU3RyaW5nfT5cbiAgICAgICAge3Byb2dyZXNzfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9