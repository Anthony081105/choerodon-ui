import React from 'react';
import ReactDOM from 'react-dom';
import classNames from 'classnames';
import Icon from '../icon';
import Dialog from './Modal';
import ActionButton from './ActionButton';
import { getConfirmLocale } from './locale';
import { getPrefixCls } from '../configure';
const IS_REACT_16 = !!ReactDOM.createPortal;
const ConfirmDialog = (props) => {
    const { prefixCls: customizePrefixCls, onCancel, onOk, close, zIndex, width, style, type, className, afterClose, visible, keyboard, okText, cancelText, okCancel = true, iconType, okType, maskClosable = false, title, content, } = props;
    const propOkType = okType || 'primary';
    const prefixCls = getPrefixCls('confirm', customizePrefixCls);
    const propWidth = width || 416;
    const propStyle = style || {};
    const runtimeLocale = getConfirmLocale();
    const propOkText = okText || (okCancel ? runtimeLocale.okText : runtimeLocale.justOkText);
    const propCancelText = cancelText || runtimeLocale.cancelText;
    const classString = classNames(prefixCls, `${prefixCls}-${type}`, className);
    const actionButtonProps = {
        okProps: {
            text: propOkText,
            type: propOkType,
            actionFn: onOk,
            closeModal: close,
        },
    };
    if (okCancel) {
        actionButtonProps.cancelProps = {
            text: propCancelText,
            actionFn: onCancel,
            closeModal: close,
        };
    }
    function handleCancel() {
        close({ triggerCancel: true });
    }
    return (React.createElement(Dialog, { className: classString, onCancel: handleCancel, visible: visible, title: "", transitionName: "zoom", footer: "", maskTransitionName: "fade", maskClosable: maskClosable, style: propStyle, width: propWidth, zIndex: zIndex, afterClose: afterClose, keyboard: keyboard },
        React.createElement("div", { className: `${prefixCls}-body-wrapper` },
            React.createElement("div", { className: `${prefixCls}-body` },
                iconType ? React.createElement(Icon, { type: iconType }) : null,
                React.createElement("span", { className: `${prefixCls}-title` }, title),
                React.createElement("div", { className: `${prefixCls}-content` }, content)),
            React.createElement("div", { className: `${prefixCls}-btns` },
                React.createElement(ActionButton, Object.assign({}, actionButtonProps))))));
};
export default function confirm(config) {
    const div = document.createElement('div');
    document.body.appendChild(div);
    function destroy(...args) {
        const unmountResult = ReactDOM.unmountComponentAtNode(div);
        if (unmountResult && div.parentNode) {
            div.parentNode.removeChild(div);
        }
        const triggerCancel = args && args.length && args.some(param => param && param.triggerCancel);
        if (config.onCancel && triggerCancel) {
            config.onCancel(...args);
        }
    }
    function render(props) {
        ReactDOM.render(React.createElement(ConfirmDialog, Object.assign({}, props)), div);
    }
    function close(...args) {
        if (IS_REACT_16) {
            render({ ...config, close, visible: false, afterClose: destroy.bind(this, ...args) });
        }
        else {
            destroy(...args);
        }
    }
    render({ ...config, visible: true, close });
    return {
        destroy: close,
    };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvbW9kYWwvY29uZmlybS50c3giLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQzFCLE9BQU8sUUFBUSxNQUFNLFdBQVcsQ0FBQztBQUNqQyxPQUFPLFVBQVUsTUFBTSxZQUFZLENBQUM7QUFDcEMsT0FBTyxJQUFJLE1BQU0sU0FBUyxDQUFDO0FBQzNCLE9BQU8sTUFBMEIsTUFBTSxTQUFTLENBQUM7QUFDakQsT0FBTyxZQUFZLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sVUFBVSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFPNUMsTUFBTSxXQUFXLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUM7QUFFNUMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxLQUF5QixFQUFFLEVBQUU7SUFDbEQsTUFBTSxFQUNKLFNBQVMsRUFBRSxrQkFBa0IsRUFDN0IsUUFBUSxFQUNSLElBQUksRUFDSixLQUFLLEVBQ0wsTUFBTSxFQUNOLEtBQUssRUFDTCxLQUFLLEVBQ0wsSUFBSSxFQUNKLFNBQVMsRUFDVCxVQUFVLEVBQ1YsT0FBTyxFQUNQLFFBQVEsRUFDUixNQUFNLEVBQ04sVUFBVSxFQUNWLFFBQVEsR0FBRyxJQUFJLEVBQ2YsUUFBUSxFQUNSLE1BQU0sRUFDTixZQUFZLEdBQUcsS0FBSyxFQUNwQixLQUFLLEVBQ0wsT0FBTyxHQUNSLEdBQUcsS0FBSyxDQUFDO0lBQ1YsTUFBTSxVQUFVLEdBQUcsTUFBTSxJQUFJLFNBQVMsQ0FBQztJQUN2QyxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsU0FBUyxFQUFFLGtCQUFrQixDQUFDLENBQUM7SUFDOUQsTUFBTSxTQUFTLEdBQUcsS0FBSyxJQUFJLEdBQUcsQ0FBQztJQUMvQixNQUFNLFNBQVMsR0FBRyxLQUFLLElBQUksRUFBRSxD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YUFBYSxFQUFFO1lBQ3BDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztTQUMxQjtJQUNILENBQUM7SUFFRCxTQUFTLE1BQU0sQ0FBQyxLQUFVO1FBQ3hCLFFBQVEsQ0FBQyxNQUFNLENBQUMsb0JBQUMsYUFBYSxvQkFBSyxLQUFLLEVBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsU0FBUyxLQUFLLENBQUMsR0FBRyxJQUFXO1FBQzNCLElBQUksV0FBVyxFQUFFO1lBQ2YsTUFBTSxDQUFDLEVBQUUsR0FBRyxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQ3ZGO2FBQU07WUFDTCxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztTQUNsQjtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsRUFBRSxHQUFHLE1BQU0sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7SUFFNUMsT0FBTztRQUNMLE9BQU8sRUFBRSxLQUFLO0tBQ2YsQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvbW9kYWwvY29uZmlybS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgSWNvbiBmcm9tICcuLi9pY29uJztcbmltcG9ydCBEaWFsb2csIHsgTW9kYWxGdW5jUHJvcHMgfSBmcm9tICcuL01vZGFsJztcbmltcG9ydCBBY3Rpb25CdXR0b24gZnJvbSAnLi9BY3Rpb25CdXR0b24nO1xuaW1wb3J0IHsgZ2V0Q29uZmlybUxvY2FsZSB9IGZyb20gJy4vbG9jYWxlJztcbmltcG9ydCB7IGdldFByZWZpeENscyB9IGZyb20gJy4uL2NvbmZpZ3VyZSc7XG5cbmludGVyZmFjZSBDb25maXJtRGlhbG9nUHJvcHMgZXh0ZW5kcyBNb2RhbEZ1bmNQcm9wcyB7XG4gIGFmdGVyQ2xvc2U/OiAoKSA9PiB2b2lkO1xuICBjbG9zZTogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkO1xufVxuXG5jb25zdCBJU19SRUFDVF8xNiA9ICEhUmVhY3RET00uY3JlYXRlUG9ydGFsO1xuXG5jb25zdCBDb25maXJtRGlhbG9nID0gKHByb3BzOiBDb25maXJtRGlhbG9nUHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIHByZWZpeENsczogY3VzdG9taXplUHJlZml4Q2xzLFxuICAgIG9uQ2FuY2VsLFxuICAgIG9uT2ssXG4gICAgY2xvc2UsXG4gICAgekluZGV4LFxuICAgIHdpZHRoLFxuICAgIHN0eWxlLFxuICAgIHR5cGUsXG4gICAgY2xhc3NOYW1lLFxuICAgIGFmdGVyQ2xvc2UsXG4gICAgdmlzaWJsZSxcbiAgICBrZXlib2FyZCxcbiAgICBva1RleHQsXG4gICAgY2FuY2VsVGV4dCxcbiAgICBva0NhbmNlbCA9IHRydWUsXG4gICAgaWNvblR5cGUsXG4gICAgb2tUeXBlLFxuICAgIG1hc2tDbG9zYWJsZSA9IGZhbHNlLFxuICAgIHRpdGxlLFxuICAgIGNvbnRlbnQsXG4gIH0gPSBwcm9wcztcbiAgY29uc3QgcHJvcE9rVHlwZSA9IG9rVHlwZSB8fCAncHJpbWFyeSc7XG4gIGNvbnN0IHByZWZpeENscyA9IGdldFByZWZpeENscygnY29uZmlybScsIGN1c3RvbWl6ZVByZWZpeENscyk7XG4gIGNvbnN0IHByb3BXaWR0aCA9IHdpZHRoIHx8IDQxNjtcbiAgY29uc3QgcHJvcFN0eWxlID0gc3R5bGUgfHwge307XG4gIGNvbnN0IHJ1bnRpbWVMb2NhbGUgPSBnZXRDb25maXJtTG9jYWxlKCk7XG4gIGNvbnN0IHByb3BPa1RleHQgPSBva1RleHQgfHwgKG9rQ2FuY2VsID8gcnVudGltZUxvY2FsZS5va1RleHQgOiBydW50aW1lTG9jYWxlLmp1c3RPa1RleHQpO1xuICBjb25zdCBwcm9wQ2FuY2VsVGV4dCA9IGNhbmNlbFRleHQgfHwgcnVudGltZUxvY2FsZS5jYW5jZWxUZXh0O1xuICBjb25zdCBjbGFzc1N0cmluZyA9IGNsYXNzTmFtZXMocHJlZml4Q2xzLCBgJHtwcmVmaXhDbHN9LSR7dHlwZX1gLCBjbGFzc05hbWUpO1xuICBjb25zdCBhY3Rpb25CdXR0b25Qcm9wczogYW55ID0ge1xuICAgIG9rUHJvcHM6IHtcbiAgICAgIHRleHQ6IHByb3BPa1RleHQsXG4gICAgICB0eXBlOiBwcm9wT2tUeXBlLFxuICAgICAgYWN0aW9uRm46IG9uT2ssXG4gICAgICBjbG9zZU1vZGFsOiBjbG9zZSxcbiAgICB9LFxuICB9O1xuICBpZiAob2tDYW5jZWwpIHtcbiAgICBhY3Rpb25CdXR0b25Qcm9wcy5jYW5jZWxQcm9wcyA9IHtcbiAgICAgIHRleHQ6IHByb3BDYW5jZWxUZXh0LFxuICAgICAgYWN0aW9uRm46IG9uQ2FuY2VsLFxuICAgICAgY2xvc2VNb2RhbDogY2xvc2UsXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHtcbiAgICBjbG9zZSh7IHRyaWdnZXJDYW5jZWw6IHRydWUgfSk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxEaWFsb2dcbiAgICAgIGNsYXNzTmFtZT17Y2xhc3NTdHJpbmd9XG4gICAgICBvbkNhbmNlbD17aGFuZGxlQ2FuY2VsfVxuICAgICAgdmlzaWJsZT17dmlzaWJsZX1cbiAgICAgIHRpdGxlPVwiXCJcbiAgICAgIHRyYW5zaXRpb25OYW1lPVwiem9vbVwiXG4gICAgICBmb290ZXI9XCJcIlxuICAgICAgbWFza1RyYW5zaXRpb25OYW1lPVwiZmFkZVwiXG4gICAgICBtYXNrQ2xvc2FibGU9e21hc2tDbG9zYWJsZX1cbiAgICAgIHN0eWxlPXtwcm9wU3R5bGV9XG4gICAgICB3aWR0aD17cHJvcFdpZHRofVxuICAgICAgekluZGV4PXt6SW5kZXh9XG4gICAgICBhZnRlckNsb3NlPXthZnRlckNsb3NlfVxuICAgICAga2V5Ym9hcmQ9e2tleWJvYXJkfVxuICAgID5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWJvZHktd3JhcHBlcmB9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1ib2R5YH0+XG4gICAgICAgICAge2ljb25UeXBlID8gPEljb24gdHlwZT17aWNvblR5cGUhfSAvPiA6IG51bGx9XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXRpdGxlYH0+e3RpdGxlfTwvc3Bhbj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1jb250ZW50YH0+e2NvbnRlbnR9PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1idG5zYH0+XG4gICAgICAgICAgPEFjdGlvbkJ1dHRvbiB7Li4uYWN0aW9uQnV0dG9uUHJvcHN9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9EaWFsb2c+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25maXJtKGNvbmZpZzogTW9kYWxGdW5jUHJvcHMpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcblxuICBmdW5jdGlvbiBkZXN0cm95KC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgY29uc3QgdW5tb3VudFJlc3VsdCA9IFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZGl2KTtcbiAgICBpZiAodW5tb3VudFJlc3VsdCAmJiBkaXYucGFyZW50Tm9kZSkge1xuICAgICAgZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICB9XG4gICAgY29uc3QgdHJpZ2dlckNhbmNlbCA9IGFyZ3MgJiYgYXJncy5sZW5ndGggJiYgYXJncy5zb21lKHBhcmFtID0+IHBhcmFtICYmIHBhcmFtLnRyaWdnZXJDYW5jZWwpO1xuICAgIGlmIChjb25maWcub25DYW5jZWwgJiYgdHJpZ2dlckNhbmNlbCkge1xuICAgICAgY29uZmlnLm9uQ2FuY2VsKC4uLmFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlcihwcm9wczogYW55KSB7XG4gICAgUmVhY3RET00ucmVuZGVyKDxDb25maXJtRGlhbG9nIHsuLi5wcm9wc30gLz4sIGRpdik7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZSguLi5hcmdzOiBhbnlbXSkge1xuICAgIGlmIChJU19SRUFDVF8xNikge1xuICAgICAgcmVuZGVyKHsgLi4uY29uZmlnLCBjbG9zZSwgdmlzaWJsZTogZmFsc2UsIGFmdGVyQ2xvc2U6IGRlc3Ryb3kuYmluZCh0aGlzLCAuLi5hcmdzKSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVzdHJveSguLi5hcmdzKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoeyAuLi5jb25maWcsIHZpc2libGU6IHRydWUsIGNsb3NlIH0pO1xuXG4gIHJldHVybiB7XG4gICAgZGVzdHJveTogY2xvc2UsXG4gIH07XG59XG4iXSwidmVyc2lvbiI6M30=