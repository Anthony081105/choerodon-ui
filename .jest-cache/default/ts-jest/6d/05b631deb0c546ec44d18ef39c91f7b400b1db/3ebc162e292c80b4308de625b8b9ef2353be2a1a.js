import { isArrayLike } from 'mobx';
import isEmpty from '../../_util/isEmpty';
import ValidationResult from '../ValidationResult';
import { $l } from '../../locale-context';
import formatReactTemplate from '../../formatter/formatReactTemplate';
function isEmptyArray(value) {
    return isEmpty(value) || (isArrayLike(value) && (value.length === 0 || value.every(item => isEmptyArray(item))));
}
export default function valueMissing(value, props) {
    const { required, label, multiple, range, defaultValidationMessages } = props;
    if (required &&
        (isEmptyArray(value) || (multiple && range && value.every(item => isEmptyArray(item))))) {
        const injectionOptions = { label };
        const key = label ? 'value_missing' : 'value_missing_no_label';
        const ruleName = label ? 'valueMissing' : 'valueMissingNoLabel';
        const { [ruleName]: validationMessage = $l('Validator', key) } = defaultValidationMessages;
        return new ValidationResult({
            validationMessage: formatReactTemplate(validationMessage, injectionOptions),
            injectionOptions,
            value,
            ruleName,
        });
    }
    return true;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMtcHJvL3ZhbGlkYXRvci9ydWxlcy92YWx1ZU1pc3NpbmcudHN4IiwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbkMsT0FBTyxPQUFPLE1BQU0scUJBQXFCLENBQUM7QUFDMUMsT0FBTyxnQkFBZ0IsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFMUMsT0FBTyxtQkFBbUIsTUFBTSxxQ0FBcUMsQ0FBQztBQUV0RSxTQUFTLFlBQVksQ0FBQyxLQUFVO0lBQzlCLE9BQU8sT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuSCxDQUFDO0FBRUQsTUFBTSxDQUFDLE9BQU8sVUFBVSxZQUFZLENBQUMsS0FBVSxFQUFFLEtBQXFCO0lBQ3BFLE1BQU0sRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUseUJBQXlCLEVBQUUsR0FBRyxLQUFLLENBQUM7SUFDOUUsSUFDRSxRQUFRO1FBQ1IsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQ3ZGO1FBQ0EsTUFBTSxnQkFBZ0IsR0FBRyxFQUFFLEtBQUssRUFBRSxDQUFDO1FBQ25DLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQztRQUMvRCxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUM7UUFDaEUsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsaUJBQWlCLEdBQUcsRUFBRSxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsRUFBRSxHQUFHLHlCQUF5QixDQUFDO1FBQzNGLE9BQU8sSUFBSSxnQkFBZ0IsQ0FBQztZQUMxQixpQkFBaUIsRUFBRSxtQkFBbUIsQ0FBQyxpQkFBaUIsRUFBRSxnQkFBZ0IsQ0FBQztZQUMzRSxnQkFBZ0I7WUFDaEIsS0FBSztZQUNMLFFBQVE7U0FDVCxDQUFDLENBQUM7S0FDSjtJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaHVpaHVhd2svRG9jdW1lbnRzL29wdC9jaG9lcm9kb24tdWkvY29tcG9uZW50cy1wcm8vdmFsaWRhdG9yL3J1bGVzL3ZhbHVlTWlzc2luZy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNBcnJheUxpa2UgfSBmcm9tICdtb2J4JztcbmltcG9ydCBpc0VtcHR5IGZyb20gJy4uLy4uL191dGlsL2lzRW1wdHknO1xuaW1wb3J0IFZhbGlkYXRpb25SZXN1bHQgZnJvbSAnLi4vVmFsaWRhdGlvblJlc3VsdCc7XG5pbXBvcnQgeyAkbCB9IGZyb20gJy4uLy4uL2xvY2FsZS1jb250ZXh0JztcbmltcG9ydCB7IG1ldGhvZFJldHVybiwgVmFsaWRhdG9yUHJvcHMgfSBmcm9tICcuJztcbmltcG9ydCBmb3JtYXRSZWFjdFRlbXBsYXRlIGZyb20gJy4uLy4uL2Zvcm1hdHRlci9mb3JtYXRSZWFjdFRlbXBsYXRlJztcblxuZnVuY3Rpb24gaXNFbXB0eUFycmF5KHZhbHVlOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzRW1wdHkodmFsdWUpIHx8IChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKHZhbHVlLmxlbmd0aCA9PT0gMCB8fCB2YWx1ZS5ldmVyeShpdGVtID0+IGlzRW1wdHlBcnJheShpdGVtKSkpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdmFsdWVNaXNzaW5nKHZhbHVlOiBhbnksIHByb3BzOiBWYWxpZGF0b3JQcm9wcyk6IG1ldGhvZFJldHVybiB7XG4gIGNvbnN0IHsgcmVxdWlyZWQsIGxhYmVsLCBtdWx0aXBsZSwgcmFuZ2UsIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXMgfSA9IHByb3BzO1xuICBpZiAoXG4gICAgcmVxdWlyZWQgJiZcbiAgICAoaXNFbXB0eUFycmF5KHZhbHVlKSB8fCAobXVsdGlwbGUgJiYgcmFuZ2UgJiYgdmFsdWUuZXZlcnkoaXRlbSA9PiBpc0VtcHR5QXJyYXkoaXRlbSkpKSlcbiAgKSB7XG4gICAgY29uc3QgaW5qZWN0aW9uT3B0aW9ucyA9IHsgbGFiZWwgfTtcbiAgICBjb25zdCBrZXkgPSBsYWJlbCA/ICd2YWx1ZV9taXNzaW5nJyA6ICd2YWx1ZV9taXNzaW5nX25vX2xhYmVsJztcbiAgICBjb25zdCBydWxlTmFtZSA9IGxhYmVsID8gJ3ZhbHVlTWlzc2luZycgOiAndmFsdWVNaXNzaW5nTm9MYWJlbCc7XG4gICAgY29uc3QgeyBbcnVsZU5hbWVdOiB2YWxpZGF0aW9uTWVzc2FnZSA9ICRsKCdWYWxpZGF0b3InLCBrZXkpIH0gPSBkZWZhdWx0VmFsaWRhdGlvbk1lc3NhZ2VzO1xuICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdCh7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZTogZm9ybWF0UmVhY3RUZW1wbGF0ZSh2YWxpZGF0aW9uTWVzc2FnZSwgaW5qZWN0aW9uT3B0aW9ucyksXG4gICAgICBpbmplY3Rpb25PcHRpb25zLFxuICAgICAgdmFsdWUsXG4gICAgICBydWxlTmFtZSxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbiJdLCJ2ZXJzaW9uIjozfQ==