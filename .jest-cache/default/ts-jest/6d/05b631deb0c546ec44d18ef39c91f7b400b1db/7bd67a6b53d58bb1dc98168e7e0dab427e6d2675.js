import { observable, runInAction, toJS } from 'mobx';
import isObject from 'lodash/isObject';
import { categories } from 'choerodon-ui-font';
import { $l } from 'choerodon-ui/pro/lib/locale-context';
import defaultFeedback from 'choerodon-ui/pro/lib/data-set/FeedBack';
import { defaultExcludeUseColonTag } from 'choerodon-ui/pro/lib/form/utils';
const defaultRenderEmpty = (componentName) => {
    switch (componentName) {
        case 'Table':
            return $l('Table', 'empty_data');
        case 'Select':
            return $l('Select', 'no_matching_results');
        default:
    }
};
const defaultButtonProps = { color: "primary" /* primary */, funcType: "flat" /* flat */ };
const defaultSpinProps = { size: "default" /* default */, wrapperClassName: '' };
const globalConfig = observable.map([
    ['prefixCls', 'c7n'],
    ['proPrefixCls', 'c7n-pro'],
    ['iconfontPrefix', 'icon'],
    ['ripple', true],
    ['collapseExpandIconPosition', 'left'],
    ['collapseTrigger', 'header'],
    ['lookupCache', { maxAge: 1000 * 60 * 10, max: 100 }],
    ['lookupUrl', code => `/common/code/${code}/`],
    ['lookupAxiosMethod', 'post'],
    // [
    //   'lookupBatchAxiosConfig',
    //   codes => ({
    //     url: '/common/batch',
    //     params: codes.reduce((obj, code) => {
    //       obj[code] = code;
    //       return obj;
    //     }, {}),
    //   }),
    // ],
    ['lovDefineUrl', code => `/sys/lov/lov_define?code=${code}`],
    ['lovQueryUrl', code => `/common/lov/dataset/${code}`],
    ['lovTriggerMode', "icon" /* icon */],
    ['lovTableProps', {}],
    ['lovModalProps', {}],
    ['dataKey', 'rows'],
    ['totalKey', 'total'],
    ['statusKey', '__status'],
    ['tlsKey', '__tls'],
    [
        'status',
        { ["add" /* add */]: 'add', ["update" /* update */]: 'update', ["delete" /* delete */]: 'delete' },
    ],
    ['labelLayout', "horizontal" /* horizontal */],
    ['queryBar', "normal" /* normal */],
    ['tableBorder', true],
    ['tableHighLightRow', true],
    ['tableSelectedHighLightRow', false],
    ['tableRowHeight', 30],
    ['tableDefaultRenderer', ''],
    ['tableColumnResizable', true],
    ['tableSpinProps', defaultSpinProps],
    ['tableButtonProps', defaultButtonProps],
    ['tableCommandProps', defaultButtonProps],
    ['tableAlwaysShowRowBox', false],
    ['tableUseMouseBatchChoose', false],
    ['tableEditorNextKeyEnterDown', true],
    ['modalSectionBorder', true],
    ['modalOkFirst', true],
    ['drawerOkFirst', undefined],
    ['buttonColor', "default" /* default */],
    ['buttonFuncType', "raised" /* raised */],
    ['feedback', defaultFeedback],
    ['renderEmpty', defaultRenderEmpty],
    ['icons', categories],
    [
        'formatter',
        {
            jsonDate: 'YYYY-MM-DD HH:mm:ss',
            date: 'YYYY-MM-DD',
            dateTime: 'YYYY-MM-DD HH:mm:ss',
            time: 'HH:mm:ss',
            year: 'YYYY',
            month: 'YYYY-MM',
            week: 'GGGG-Wo',
        },
    ],
    ['dropdownMatchSelectWidth', true],
    ['useColon', false],
    ['excludeUseColonTagList', defaultExcludeUseColonTag],
    ['textFieldAutoComplete', undefined],
    ['tableDragRow', false],
    ['tableDragColumn', false],
    ['numberFieldNonStrictStep', false],
    ['numberFieldFormatter', undefined],
    ['numberFieldFormatterOptions', undefined],
]);
export function getConfig(key) {
    // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
    // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
    return globalConfig.get(key);
}
export function getPrefixCls(suffixCls, customizePrefixCls) {
    if (customizePrefixCls) {
        return customizePrefixCls;
    }
    return `${getConfig('prefixCls')}-${suffixCls}`;
}
export function getProPrefixCls(suffixCls, customizePrefixCls) {
    if (customizePrefixCls) {
        return customizePrefixCls;
    }
    return `${getConfig('proPrefixCls')}-${suffixCls}`;
}
const mergeProps = ['transport', 'feedback', 'formatter'];
export default function configure(config) {
    runInAction(() => {
        Object.keys(config).forEach((key) => {
            const value = config[key];
            if (mergeProps.includes(key) && isObject(value)) {
                globalConfig.set(key, {
                    ...toJS(globalConfig.get(key)),
                    ...value,
                });
            }
            else {
                globalConfig.set(key, config[key]);
            }
        });
    });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvY29uZmlndXJlL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFpQixXQUFXLEVBQUUsSUFBSSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBR3BFLE9BQU8sUUFBUSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUcvQyxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFnQnpELE9BQU8sZUFBNkIsTUFBTSx3Q0FBd0MsQ0FBQztBQUtuRixPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQWtINUUsTUFBTSxrQkFBa0IsR0FBdUIsQ0FBQyxhQUFzQixFQUFhLEVBQUU7SUFDbkYsUUFBUSxhQUFhLEVBQUU7UUFDckIsS0FBSyxPQUFPO1lBQ1YsT0FBTyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ25DLEtBQUssUUFBUTtZQUNYLE9BQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO1FBQzdDLFFBQVE7S0FDVDtBQUNILENBQUMsQ0FBQztBQUVGLE1BQU0sa0JBQWtCLEdBQUcsRUFBRSxLQUFLLHlCQUFxQixFQUFFLFFBQVEsbUJBQWUsRUFBRSxDQUFDO0FBRW5GLE1BQU0sZ0JBQWdCLEdBQUcsRUFBRSxJQUFJLHlCQUFjLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxFQUFFLENBQUM7QUFFdEUsTUFBTSxZQUFZLEdBQWtELFVBQVUsQ0FBQyxHQUFHLENBR2hGO0lBQ0EsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDO0lBQ3BCLENBQUMsY0FBYyxFQUFFLFNBQVMsQ0FBQztJQUMzQixDQUFDLGdCQUFnQixFQUFFLE1BQU0sQ0FBQztJQUMxQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDaEIsQ0FBQyw0QkFBNEIs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LENBQUMsRUFBRTtnQkFDL0MsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUU7b0JBQ3BCLEdBQUcsSUFBSSxDQUFNLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ25DLEdBQUcsS0FBSztpQkFDVCxDQUFDLENBQUM7YUFDSjtpQkFBTTtnQkFDTCxZQUFZLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUNwQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL2NvbmZpZ3VyZS9pbmRleC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2JzZXJ2YWJsZSwgT2JzZXJ2YWJsZU1hcCwgcnVuSW5BY3Rpb24sIHRvSlMgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IEF4aW9zSW5zdGFuY2UsIEF4aW9zUHJvbWlzZSwgQXhpb3NSZXF1ZXN0Q29uZmlnIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJ2xvZGFzaC9pc09iamVjdCc7XG5pbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnY2hvZXJvZG9uLXVpLWZvbnQnO1xuaW1wb3J0IHsgTG92Q29uZmlnIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvbG92L0xvdic7XG5pbXBvcnQgeyBSZWNvcmRTdGF0dXMsIEV4cG9ydE1vZGUgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9kYXRhLXNldC9lbnVtJztcbmltcG9ydCB7ICRsIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvbG9jYWxlLWNvbnRleHQnO1xuaW1wb3J0IHtcbiAgZXhwYW5kSWNvblByb3BzLFxuICBUYWJsZVBhZ2luYXRpb25Db25maWcsXG4gIFRhYmxlUXVlcnlCYXJIb29rLFxuICBUYWJsZVByb3BzLFxufSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi90YWJsZS9UYWJsZSc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uTWVzc2FnZXMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi92YWxpZGF0b3IvVmFsaWRhdG9yJztcbmltcG9ydCB7IEJ1dHRvblByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvYnV0dG9uL0J1dHRvbic7XG5pbXBvcnQgeyBTcGluUHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvbGliL3NwaW4nO1xuaW1wb3J0IHsgUGFuZWxQcm9wcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9saWIvY29sbGFwc2UnO1xuaW1wb3J0IHsgU2l6ZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9saWIvX3V0aWwvZW51bSc7XG5pbXBvcnQgeyBUYWJsZVF1ZXJ5QmFyVHlwZSwgRHJhZ0NvbHVtbkFsaWduIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvdGFibGUvZW51bSc7XG5pbXBvcnQgeyBUcmlnZ2VyTW9kZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvdi9lbnVtJztcbmltcG9ydCB7IFRyYW5zcG9ydEhvb2tQcm9wcywgVHJhbnNwb3J0UHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9kYXRhLXNldC9UcmFuc3BvcnQnO1xuaW1wb3J0IERhdGFTZXQgZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvRGF0YVNldCc7XG5pbXBvcnQgZGVmYXVsdEZlZWRiYWNrLCB7IEZlZWRCYWNrIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvRmVlZEJhY2snO1xuaW1wb3J0IFJlY29yZCBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9kYXRhLXNldC9SZWNvcmQnO1xuaW1wb3J0IHsgQ2FjaGVPcHRpb25zIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvX3V0aWwvQ2FjaGUnO1xuaW1wb3J0IHsgTGFiZWxMYXlvdXQgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9mb3JtL2VudW0nO1xuaW1wb3J0IHsgQnV0dG9uQ29sb3IsIEZ1bmNUeXBlIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvYnV0dG9uL2VudW0nO1xuaW1wb3J0IHsgZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2Zvcm0vdXRpbHMnO1xuaW1wb3J0IHsgUmVuZGVyZXIgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9maWVsZC9Gb3JtRmllbGQnO1xuaW1wb3J0IHsgRm9ybWF0TnVtYmVyRnVuYywgRm9ybWF0TnVtYmVyRnVuY09wdGlvbnMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9udW1iZXItZmllbGQvTnVtYmVyRmllbGQnO1xuaW1wb3J0IHsgTW9kYWxQcm9wcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL21vZGFsL01vZGFsJztcblxuZXhwb3J0IHR5cGUgU3RhdHVzID0ge1xuICBbUmVjb3JkU3RhdHVzLmFkZF06IHN0cmluZztcbiAgW1JlY29yZFN0YXR1cy51cGRhdGVdOiBzdHJpbmc7XG4gIFtSZWNvcmRTdGF0dXMuZGVsZXRlXTogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgcmVuZGVyRW1wdHlIYW5kbGVyID0gKGNvbXBvbmVudE5hbWU/OiBzdHJpbmcpID0+IFJlYWN0Tm9kZTtcblxuZXhwb3J0IHR5cGUgRm9ybWF0dGVyID0ge1xuICBqc29uRGF0ZT86IHN0cmluZyB8IG51bGw7XG4gIGRhdGU/OiBzdHJpbmc7XG4gIGRhdGVUaW1lPzogc3RyaW5nO1xuICB0aW1lPzogc3RyaW5nO1xuICB5ZWFyPzogc3RyaW5nO1xuICBtb250aD86IHN0cmluZztcbiAgd2Vlaz86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZyA9IHtcbiAgcHJlZml4Q2xzPzogc3RyaW5nO1xuICBwcm9QcmVmaXhDbHM/OiBzdHJpbmc7XG4gIGljb25mb250UHJlZml4Pzogc3RyaW5nO1xuICByaXBwbGU/OiBib29sZWFuO1xuICBjb2xsYXBzZUV4cGFuZEljb25Qb3NpdGlvbj86IHN0cmluZztcbiAgY29sbGFwc2VFeHBhbmRJY29uPzogKHBhbmVsUHJvcHM6IFBhbmVsUHJvcHMpID0+IFJlYWN0Tm9kZSB8ICd0ZXh0JztcbiAgY29sbGFwc2VUcmlnZ2VyPzogc3RyaW5nO1xuICBsb29rdXBDYWNoZT86IENhY2hlT3B0aW9uczxzdHJpbmcsIEF4aW9zUHJvbWlzZT47XG4gIGxvb2t1cFVybD86IHN0cmluZyB8ICgoY29kZTogc3RyaW5nKSA9PiBzdHJpbmcpO1xuICBsb29rdXBBeGlvc01ldGhvZD86IHN0cmluZztcbiAgbG9va3VwQXhpb3NDb25maWc/OlxuICB8IEF4aW9zUmVxdWVzdENvbmZpZ1xuICB8ICgocHJvcHM6IHtcbiAgICBwYXJhbXM/OiBhbnk7XG4gICAgZGF0YVNldD86IERhdGFTZXQ7XG4gICAgcmVjb3JkPzogUmVjb3JkO1xuICAgIGxvb2t1cENvZGU/OiBzdHJpbmc7XG4gIH0pID0+IEF4aW9zUmVxdWVzdENvbmZpZyk7XG4gIGxvb2t1cEJhdGNoQXhpb3NDb25maWc/OiAoY29kZXM6IHN0cmluZ1tdKSA9PiBBeGlvc1JlcXVlc3RDb25maWc7XG4gIGxvdkRlZmluZVVybD86IHN0cmluZyB8ICgoY29kZTogc3RyaW5nKSA9PiBzdHJpbmcpO1xuICBsb3ZEZWZpbmVBeGlvc0NvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZyB8ICgoY29kZTogc3RyaW5nKSA9PiBBeGlvc1JlcXVlc3RDb25maWcpO1xuICBsb3ZRdWVyeVVybD86XG4gIHwgc3RyaW5nXG4gIHwgKChjb2RlOiBzdHJpbmcsIGxvdkNvbmZpZzogTG92Q29uZmlnIHwgdW5kZWZpbmVkLCBwcm9wczogVHJhbnNwb3J0SG9va1Byb3BzKSA9PiBzdHJpbmcpO1xuICBsb3ZRdWVyeUF4aW9zQ29uZmlnPzpcbiAgfCBBeGlvc1JlcXVlc3RDb25maWdcbiAgfCAoKFxuICAgIGNvZGU6IHN0cmluZyxcbiAgICBsb3ZDb25maWc6IExvdkNvbmZpZyB8IHVuZGVmaW5lZCxcbiAgICBwcm9wczogVHJhbnNwb3J0SG9va1Byb3BzLFxuICApID0+IEF4aW9zUmVxdWVzdENvbmZpZyk7XG4gIGxvdlRyaWdnZXJNb2RlPzogVHJpZ2dlck1vZGU7XG4gIGxvdk1vZGFsUHJvcHM/OiBNb2RhbFByb3BzO1xuICBheGlvcz86IEF4aW9zSW5zdGFuY2U7XG4gIGZlZWRiYWNrPzogRmVlZEJhY2s7XG4gIGRhdGFLZXk/OiBzdHJpbmc7XG4gIHRvdGFsS2V5Pzogc3RyaW5nO1xuICBzdGF0dXNLZXk/OiBzdHJpbmc7XG4gIHRsc0tleT86IHN0cmluZztcbiAgc3RhdHVzPzogU3RhdHVzO1xuICBleHBvcnRNb2RlPzogRXhwb3J0TW9kZTtcbiAgbGFiZWxMYXlvdXQ/OiBMYWJlbExheW91dDtcbiAgcXVlcnlCYXI/OiBUYWJsZVF1ZXJ5QmFyVHlwZSB8IFRhYmxlUXVlcnlCYXJIb29rO1xuICB0YWJsZUJvcmRlcj86IGJvb2xlYW47XG4gIHRhYmxlSGlnaExpZ2h0Um93PzogYm9vbGVhbjtcbiAgdGFibGVTZWxlY3RlZEhpZ2hMaWdodFJvdz86IGJvb2xlYW47XG4gIHRhYmxlUm93SGVpZ2h0PzogJ2F1dG8nIHwgbnVtYmVyO1xuICB0YWJsZUNvbHVtblJlc2l6YWJsZT86IGJvb2xlYW47XG4gIHRhYmxlRXhwYW5kSWNvbj86IChwcm9wczogZXhwYW5kSWNvblByb3BzKSA9PiBSZWFjdE5vZGU7XG4gIHRhYmxlU3BpblByb3BzPzogU3BpblByb3BzO1xuICB0YWJsZUJ1dHRvblByb3BzPzogQnV0dG9uUHJvcHM7XG4gIHRhYmxlQ29tbWFuZFByb3BzPzogQnV0dG9uUHJvcHM7XG4gIHRhYmxlRGVmYXVsdFJlbmRlcmVyPzogUmVuZGVyZXI7XG4gIHRhYmxlQWx3YXlzU2hvd1Jvd0JveD86IGJvb2xlYW47XG4gIHRhYmxlVXNlTW91c2VCYXRjaENob29zZT86IGJvb2xlYW47XG4gIHRhYmxlRWRpdG9yTmV4dEtleUVudGVyRG93bj86IGJvb2xlYW47XG4gIHBhZ2luYXRpb24/OiBUYWJsZVBhZ2luYXRpb25Db25maWcgfCBmYWxzZTtcbiAgbW9kYWxTZWN0aW9uQm9yZGVyPzogYm9vbGVhbjtcbiAgbW9kYWxPa0ZpcnN0PzogYm9vbGVhbjtcbiAgZHJhd2VyT2tGaXJzdD86IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIG1vZGFsQnV0dG9uUHJvcHM/OiBCdXR0b25Qcm9wcztcbiAgYnV0dG9uRnVuY1R5cGU/OiBGdW5jVHlwZTtcbiAgYnV0dG9uQ29sb3I/OiBCdXR0b25Db2xvcjtcbiAgcmVuZGVyRW1wdHk/OiByZW5kZXJFbXB0eUhhbmRsZXI7XG4gIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXM/OiBWYWxpZGF0aW9uTWVzc2FnZXM7XG4gIHRyYW5zcG9ydD86IFRyYW5zcG9ydFByb3BzO1xuICBpY29ucz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW107IH0gfCBzdHJpbmdbXTtcbiAgZ2VuZXJhdGVQYWdlUXVlcnk/OiAocGFnZVBhcmFtczoge1xuICAgIHBhZ2U/OiBudW1iZXI7XG4gICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgc29ydE5hbWU/OiBzdHJpbmc7XG4gICAgc29ydE9yZGVyPzogc3RyaW5nO1xuICB9KSA9PiBvYmplY3Q7XG4gIGZvcm1hdHRlcj86IEZvcm1hdHRlcjtcbiAgZHJvcGRvd25NYXRjaFNlbGVjdFdpZHRoPzogYm9vbGVhbjtcbiAgdXNlQ29sb24/OiBib29sZWFuO1xuICBleGNsdWRlVXNlQ29sb25UYWdMaXN0Pzogc3RyaW5nW107XG4gIGxvdlRhYmxlUHJvcHM/OiBUYWJsZVByb3BzO1xuICB0ZXh0RmllbGRBdXRvQ29tcGxldGU/OiAnb24nIHwgJ29mZic7XG4gIHJlc3VsdFN0YXR1c1JlbmRlcmVyPzogb2JqZWN0O1xuICB0YWJsZURyYWdDb2x1bW5BbGlnbj86IERyYWdDb2x1bW5BbGlnbjtcbiAgdGFibGVEcmFnQ29sdW1uPzogYm9vbGVhbjtcbiAgdGFibGVEcmFnUm93PzogYm9vbGVhbjtcbiAgbnVtYmVyRmllbGROb25TdHJpY3RTdGVwPzogYm9vbGVhbjtcbiAgbnVtYmVyRmllbGRGb3JtYXR0ZXI/OiBGb3JtYXROdW1iZXJGdW5jO1xuICBudW1iZXJGaWVsZEZvcm1hdHRlck9wdGlvbnM/OkZvcm1hdE51bWJlckZ1bmNPcHRpb25zO1xufTtcblxuZXhwb3J0IHR5cGUgQ29uZmlnS2V5cyA9IGtleW9mIENvbmZpZztcblxuY29uc3QgZGVmYXVsdFJlbmRlckVtcHR5OiByZW5kZXJFbXB0eUhhbmRsZXIgPSAoY29tcG9uZW50TmFtZT86IHN0cmluZyk6IFJlYWN0Tm9kZSA9PiB7XG4gIHN3aXRjaCAoY29tcG9uZW50TmFtZSkge1xuICAgIGNhc2UgJ1RhYmxlJzpcbiAgICAgIHJldHVybiAkbCgnVGFibGUnLCAnZW1wdHlfZGF0YScpO1xuICAgIGNhc2UgJ1NlbGVjdCc6XG4gICAgICByZXR1cm4gJGwoJ1NlbGVjdCcsICdub19tYXRjaGluZ19yZXN1bHRzJyk7XG4gICAgZGVmYXVsdDpcbiAgfVxufTtcblxuY29uc3QgZGVmYXVsdEJ1dHRvblByb3BzID0geyBjb2xvcjogQnV0dG9uQ29sb3IucHJpbWFyeSwgZnVuY1R5cGU6IEZ1bmNUeXBlLmZsYXQgfTtcblxuY29uc3QgZGVmYXVsdFNwaW5Qcm9wcyA9IHsgc2l6ZTogU2l6ZS5kZWZhdWx0LCB3cmFwcGVyQ2xhc3NOYW1lOiAnJyB9O1xuXG5jb25zdCBnbG9iYWxDb25maWc6IE9ic2VydmFibGVNYXA8Q29uZmlnS2V5cywgQ29uZmlnW0NvbmZpZ0tleXNdPiA9IG9ic2VydmFibGUubWFwPFxuICBDb25maWdLZXlzLFxuICBDb25maWdbQ29uZmlnS2V5c11cbj4oW1xuICBbJ3ByZWZpeENscycsICdjN24nXSxcbiAgWydwcm9QcmVmaXhDbHMnLCAnYzduLXBybyddLFxuICBbJ2ljb25mb250UHJlZml4JywgJ2ljb24nXSxcbiAgWydyaXBwbGUnLCB0cnVlXSxcbiAgWydjb2xsYXBzZUV4cGFuZEljb25Qb3NpdGlvbicsICdsZWZ0J10sXG4gIFsnY29sbGFwc2VUcmlnZ2VyJywgJ2hlYWRlciddLFxuICBbJ2xvb2t1cENhY2hlJywgeyBtYXhBZ2U6IDEwMDAgKiA2MCAqIDEwLCBtYXg6IDEwMCB9XSxcbiAgWydsb29rdXBVcmwnLCBjb2RlID0+IGAvY29tbW9uL2NvZGUvJHtjb2RlfS9gXSxcbiAgWydsb29rdXBBeGlvc01ldGhvZCcsICdwb3N0J10sXG4gIC8vIFtcbiAgLy8gICAnbG9va3VwQmF0Y2hBeGlvc0NvbmZpZycsXG4gIC8vICAgY29kZXMgPT4gKHtcbiAgLy8gICAgIHVybDogJy9jb21tb24vYmF0Y2gnLFxuICAvLyAgICAgcGFyYW1zOiBjb2Rlcy5yZWR1Y2UoKG9iaiwgY29kZSkgPT4ge1xuICAvLyAgICAgICBvYmpbY29kZV0gPSBjb2RlO1xuICAvLyAgICAgICByZXR1cm4gb2JqO1xuICAvLyAgICAgfSwge30pLFxuICAvLyAgIH0pLFxuICAvLyBdLFxuICBbJ2xvdkRlZmluZVVybCcsIGNvZGUgPT4gYC9zeXMvbG92L2xvdl9kZWZpbmU/Y29kZT0ke2NvZGV9YF0sXG4gIFsnbG92UXVlcnlVcmwnLCBjb2RlID0+IGAvY29tbW9uL2xvdi9kYXRhc2V0LyR7Y29kZX1gXSxcbiAgWydsb3ZUcmlnZ2VyTW9kZScsIFRyaWdnZXJNb2RlLmljb25dLFxuICBbJ2xvdlRhYmxlUHJvcHMnLCB7fV0sXG4gIFsnbG92TW9kYWxQcm9wcycsIHt9XSxcbiAgWydkYXRhS2V5JywgJ3Jvd3MnXSxcbiAgWyd0b3RhbEtleScsICd0b3RhbCddLFxuICBbJ3N0YXR1c0tleScsICdfX3N0YXR1cyddLFxuICBbJ3Rsc0tleScsICdfX3RscyddLFxuICBbXG4gICAgJ3N0YXR1cycsXG4gICAgeyBbUmVjb3JkU3RhdHVzLmFkZF06ICdhZGQnLCBbUmVjb3JkU3RhdHVzLnVwZGF0ZV06ICd1cGRhdGUnLCBbUmVjb3JkU3RhdHVzLmRlbGV0ZV06ICdkZWxldGUnIH0sXG4gIF0sXG4gIFsnbGFiZWxMYXlvdXQnLCBMYWJlbExheW91dC5ob3Jpem9udGFsXSxcbiAgWydxdWVyeUJhcicsIFRhYmxlUXVlcnlCYXJUeXBlLm5vcm1hbF0sXG4gIFsndGFibGVCb3JkZXInLCB0cnVlXSxcbiAgWyd0YWJsZUhpZ2hMaWdodFJvdycsIHRydWVdLFxuICBbJ3RhYmxlU2VsZWN0ZWRIaWdoTGlnaHRSb3cnLCBmYWxzZV0sXG4gIFsndGFibGVSb3dIZWlnaHQnLCAzMF0sXG4gIFsndGFibGVEZWZhdWx0UmVuZGVyZXInLCAnJ10sXG4gIFsndGFibGVDb2x1bW5SZXNpemFibGUnLCB0cnVlXSxcbiAgWyd0YWJsZVNwaW5Qcm9wcycsIGRlZmF1bHRTcGluUHJvcHNdLFxuICBbJ3RhYmxlQnV0dG9uUHJvcHMnLCBkZWZhdWx0QnV0dG9uUHJvcHNdLFxuICBbJ3RhYmxlQ29tbWFuZFByb3BzJywgZGVmYXVsdEJ1dHRvblByb3BzXSxcbiAgWyd0YWJsZUFsd2F5c1Nob3dSb3dCb3gnLCBmYWxzZV0sXG4gIFsndGFibGVVc2VNb3VzZUJhdGNoQ2hvb3NlJywgZmFsc2VdLFxuICBbJ3RhYmxlRWRpdG9yTmV4dEtleUVudGVyRG93bicsIHRydWVdLFxuICBbJ21vZGFsU2VjdGlvbkJvcmRlcicsIHRydWVdLFxuICBbJ21vZGFsT2tGaXJzdCcsIHRydWVdLFxuICBbJ2RyYXdlck9rRmlyc3QnLCB1bmRlZmluZWRdLFxuICBbJ2J1dHRvbkNvbG9yJywgQnV0dG9uQ29sb3IuZGVmYXVsdF0sXG4gIFsnYnV0dG9uRnVuY1R5cGUnLCBGdW5jVHlwZS5yYWlzZWRdLFxuICBbJ2ZlZWRiYWNrJywgZGVmYXVsdEZlZWRiYWNrXSxcbiAgWydyZW5kZXJFbXB0eScsIGRlZmF1bHRSZW5kZXJFbXB0eV0sXG4gIFsnaWNvbnMnLCBjYXRlZ29yaWVzXSxcbiAgW1xuICAgICdmb3JtYXR0ZXInLFxuICAgIHtcbiAgICAgIGpzb25EYXRlOiAnWVlZWS1NTS1ERCBISDptbTpzcycsXG4gICAgICBkYXRlOiAnWVlZWS1NTS1ERCcsXG4gICAgICBkYXRlVGltZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgdGltZTogJ0hIOm1tOnNzJyxcbiAgICAgIHllYXI6ICdZWVlZJyxcbiAgICAgIG1vbnRoOiAnWVlZWS1NTScsXG4gICAgICB3ZWVrOiAnR0dHRy1XbycsXG4gICAgfSxcbiAgXSxcbiAgWydkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGgnLCB0cnVlXSxcbiAgWyd1c2VDb2xvbicsIGZhbHNlXSxcbiAgWydleGNsdWRlVXNlQ29sb25UYWdMaXN0JywgZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZ10sXG4gIFsndGV4dEZpZWxkQXV0b0NvbXBsZXRlJywgdW5kZWZpbmVkXSxcbiAgWyd0YWJsZURyYWdSb3cnLCBmYWxzZV0sXG4gIFsndGFibGVEcmFnQ29sdW1uJywgZmFsc2VdLFxuICBbJ251bWJlckZpZWxkTm9uU3RyaWN0U3RlcCcsIGZhbHNlXSxcbiAgWydudW1iZXJGaWVsZEZvcm1hdHRlcicsIHVuZGVmaW5lZF0sXG4gIFsnbnVtYmVyRmllbGRGb3JtYXR0ZXJPcHRpb25zJyx1bmRlZmluZWRdLFxuXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWcoa2V5OiBDb25maWdLZXlzKTogYW55IHtcbiAgLy8gRklYTUU6IG9ic2VydmFibGUubWFw5oqK5p6E5bu6bWFw5pe25Lyg5YWl55qEa2V557G75Z6L5ZKMdmFsdWXnsbvlnovliIbliKvlgZrkuoZ1bmlvbu+8jFxuICAvLyDkuKLlpLHkuobkuIDkuIDlr7nlupTnmoTmmKDlsITlhbPns7vvvIzlr7zoh7Tlh73mlbDosIPnlKjogIXml6Dms5Xkvb/nlKh1bmlvbuWQjueahOi/lOWbnuWAvOexu+Wei++8jOWboOatpOmcgOimgeaMh+WumuacrOWHveaVsOi/lOWbnuWAvOS4umFueVxuICByZXR1cm4gZ2xvYmFsQ29uZmlnLmdldChrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJlZml4Q2xzKHN1ZmZpeENsczogc3RyaW5nLCBjdXN0b21pemVQcmVmaXhDbHM/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgcmV0dXJuIGN1c3RvbWl6ZVByZWZpeENscztcbiAgfVxuICByZXR1cm4gYCR7Z2V0Q29uZmlnKCdwcmVmaXhDbHMnKX0tJHtzdWZmaXhDbHN9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb1ByZWZpeENscyhzdWZmaXhDbHM6IHN0cmluZywgY3VzdG9taXplUHJlZml4Q2xzPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgIHJldHVybiBjdXN0b21pemVQcmVmaXhDbHM7XG4gIH1cbiAgcmV0dXJuIGAke2dldENvbmZpZygncHJvUHJlZml4Q2xzJyl9LSR7c3VmZml4Q2xzfWA7XG59XG5cbmNvbnN0IG1lcmdlUHJvcHMgPSBbJ3RyYW5zcG9ydCcsICdmZWVkYmFjaycsICdmb3JtYXR0ZXInXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlndXJlKGNvbmZpZzogQ29uZmlnKSB7XG4gIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleTogQ29uZmlnS2V5cykgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcbiAgICAgIGlmIChtZXJnZVByb3BzLmluY2x1ZGVzKGtleSkgJiYgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGdsb2JhbENvbmZpZy5zZXQoa2V5LCB7XG4gICAgICAgICAgLi4udG9KUzxhbnk+KGdsb2JhbENvbmZpZy5nZXQoa2V5KSksXG4gICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2xvYmFsQ29uZmlnLnNldChrZXksIGNvbmZpZ1trZXldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG4iXSwidmVyc2lvbiI6M30=