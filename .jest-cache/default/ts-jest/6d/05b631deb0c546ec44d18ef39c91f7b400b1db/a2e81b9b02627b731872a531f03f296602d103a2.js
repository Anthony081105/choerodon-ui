import React, { Children, cloneElement, Component } from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';
import warning from '../_util/warning';
import BreadcrumbItem from './BreadcrumbItem';
import { getPrefixCls } from '../configure';
function getBreadcrumbName(route, params) {
    if (!route.breadcrumbName) {
        return null;
    }
    const paramsKeys = Object.keys(params).join('|');
    const name = route.breadcrumbName.replace(new RegExp(`:(${paramsKeys})`, 'g'), (replacement, key) => params[key] || replacement);
    return name;
}
function defaultItemRender(route, params, routes, paths) {
    const isLastItem = routes.indexOf(route) === routes.length - 1;
    const name = getBreadcrumbName(route, params);
    return isLastItem ? React.createElement("span", null, name) : React.createElement("a", { href: `#/${paths.join('/')}` }, name);
}
export default class Breadcrumb extends Component {
    componentDidMount() {
        const props = this.props;
        warning(!('linkRender' in props || 'nameRender' in props), '`linkRender` and `nameRender` are removed, please use `itemRender` instead');
    }
    render() {
        let crumbs;
        const { separator, prefixCls, style, className, routes, params = {}, children, itemRender = defaultItemRender, } = this.props;
        if (routes && routes.length > 0) {
            const paths = [];
            crumbs = routes.map(route => {
                route.path = route.path || '';
                let path = route.path.replace(/^\//, '');
                Object.keys(params).forEach(key => {
                    path = path.replace(`:${key}`, params[key]);
                });
                if (path) {
                    paths.push(path);
                }
                return (React.createElement(BreadcrumbItem, { separator: separator, key: route.breadcrumbName || path }, itemRender(route, params, routes, paths)));
            });
        }
        else if (children) {
            crumbs = Children.map(children, (element, index) => {
                if (!element) {
                    return element;
                }
                warning(element.type && element.type.__ANT_BREADCRUMB_ITEM, "Breadcrumb only accepts Breadcrumb.Item as it's children");
                return cloneElement(element, {
                    separator,
                    key: index,
                });
            });
        }
        return (React.createElement("div", { className: classNames(className, getPrefixCls('breadcrumb', prefixCls)), style: style }, crumbs));
    }
}
Breadcrumb.displayName = 'Breadcrumb';
Breadcrumb.defaultProps = {
    separator: '/',
};
Breadcrumb.propTypes = {
    prefixCls: PropTypes.string,
    separator: PropTypes.node,
    routes: PropTypes.array,
    params: PropTypes.object,
    itemRender: PropTypes.func,
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvYnJlYWRjcnVtYi9CcmVhZGNydW1iLnRzeCIsIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUE0QixNQUFNLE9BQU8sQ0FBQztBQUMzRixPQUFPLFNBQVMsTUFBTSxZQUFZLENBQUM7QUFDbkMsT0FBTyxVQUFVLE1BQU0sWUFBWSxDQUFDO0FBQ3BDLE9BQU8sT0FBTyxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZDLE9BQU8sY0FBYyxNQUFNLGtCQUFrQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFpQjVDLFNBQVMsaUJBQWlCLENBQUMsS0FBWSxFQUFFLE1BQVc7SUFDbEQsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUU7UUFDekIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUNELE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUN2QyxJQUFJLE1BQU0sQ0FBQyxLQUFLLFVBQVUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxFQUNuQyxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxXQUFXLENBQ2pELENBQUM7SUFDRixPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFFRCxTQUFTLGlCQUFpQixDQUFDLEtBQVksRUFBRSxNQUFXLEVBQUUsTUFBZSxFQUFFLEtBQWU7SUFDcEYsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUMvRCxNQUFNLElBQUksR0FBRyxpQkFB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ZixDQUFDO0FBRUssb0JBQVMsR0FBRztJQUNqQixTQUFTLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDM0IsU0FBUyxFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3pCLE1BQU0sRUFBRSxTQUFTLENBQUMsS0FBSztJQUN2QixNQUFNLEVBQUUsU0FBUyxDQUFDLE1BQU07SUFDeEIsVUFBVSxFQUFFLFNBQVMsQ0FBQyxJQUFJO0NBQzNCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvYnJlYWRjcnVtYi9CcmVhZGNydW1iLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ2hpbGRyZW4sIGNsb25lRWxlbWVudCwgQ29tcG9uZW50LCBDU1NQcm9wZXJ0aWVzLCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgd2FybmluZyBmcm9tICcuLi9fdXRpbC93YXJuaW5nJztcbmltcG9ydCBCcmVhZGNydW1iSXRlbSBmcm9tICcuL0JyZWFkY3J1bWJJdGVtJztcbmltcG9ydCB7IGdldFByZWZpeENscyB9IGZyb20gJy4uL2NvbmZpZ3VyZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm91dGUge1xuICBwYXRoOiBzdHJpbmc7XG4gIGJyZWFkY3J1bWJOYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQnJlYWRjcnVtYlByb3BzIHtcbiAgcHJlZml4Q2xzPzogc3RyaW5nO1xuICByb3V0ZXM/OiBSb3V0ZVtdO1xuICBwYXJhbXM/OiBhbnk7XG4gIHNlcGFyYXRvcj86IFJlYWN0Tm9kZTtcbiAgaXRlbVJlbmRlcj86IChyb3V0ZTogYW55LCBwYXJhbXM6IGFueSwgcm91dGVzOiBBcnJheTxhbnk+LCBwYXRoczogQXJyYXk8c3RyaW5nPikgPT4gUmVhY3ROb2RlO1xuICBzdHlsZT86IENTU1Byb3BlcnRpZXM7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbn1cblxuZnVuY3Rpb24gZ2V0QnJlYWRjcnVtYk5hbWUocm91dGU6IFJvdXRlLCBwYXJhbXM6IGFueSkge1xuICBpZiAoIXJvdXRlLmJyZWFkY3J1bWJOYW1lKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgcGFyYW1zS2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtcykuam9pbignfCcpO1xuICBjb25zdCBuYW1lID0gcm91dGUuYnJlYWRjcnVtYk5hbWUucmVwbGFjZShcbiAgICBuZXcgUmVnRXhwKGA6KCR7cGFyYW1zS2V5c30pYCwgJ2cnKSxcbiAgICAocmVwbGFjZW1lbnQsIGtleSkgPT4gcGFyYW1zW2tleV0gfHwgcmVwbGFjZW1lbnQsXG4gICk7XG4gIHJldHVybiBuYW1lO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0SXRlbVJlbmRlcihyb3V0ZTogUm91dGUsIHBhcmFtczogYW55LCByb3V0ZXM6IFJvdXRlW10sIHBhdGhzOiBzdHJpbmdbXSkge1xuICBjb25zdCBpc0xhc3RJdGVtID0gcm91dGVzLmluZGV4T2Yocm91dGUpID09PSByb3V0ZXMubGVuZ3RoIC0gMTtcbiAgY29uc3QgbmFtZSA9IGdldEJyZWFkY3J1bWJOYW1lKHJvdXRlLCBwYXJhbXMpO1xuICByZXR1cm4gaXNMYXN0SXRlbSA/IDxzcGFuPntuYW1lfTwvc3Bhbj4gOiA8YSBocmVmPXtgIy8ke3BhdGhzLmpvaW4oJy8nKX1gfT57bmFtZX08L2E+O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCcmVhZGNydW1iIGV4dGVuZHMgQ29tcG9uZW50PEJyZWFkY3J1bWJQcm9wcywgYW55PiB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdCcmVhZGNydW1iJztcblxuICBzdGF0aWMgSXRlbTogYW55O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgc2VwYXJhdG9yOiAnLycsXG4gIH07XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBwcmVmaXhDbHM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgc2VwYXJhdG9yOiBQcm9wVHlwZXMubm9kZSxcbiAgICByb3V0ZXM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBwYXJhbXM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgaXRlbVJlbmRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIH07XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHdhcm5pbmcoXG4gICAgICAhKCdsaW5rUmVuZGVyJyBpbiBwcm9wcyB8fCAnbmFtZVJlbmRlcicgaW4gcHJvcHMpLFxuICAgICAgJ2BsaW5rUmVuZGVyYCBhbmQgYG5hbWVSZW5kZXJgIGFyZSByZW1vdmVkLCBwbGVhc2UgdXNlIGBpdGVtUmVuZGVyYCBpbnN0ZWFkJyxcbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGxldCBjcnVtYnM7XG4gICAgY29uc3Qge1xuICAgICAgc2VwYXJhdG9yLFxuICAgICAgcHJlZml4Q2xzLFxuICAgICAgc3R5bGUsXG4gICAgICBjbGFzc05hbWUsXG4gICAgICByb3V0ZXMsXG4gICAgICBwYXJhbXMgPSB7fSxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgaXRlbVJlbmRlciA9IGRlZmF1bHRJdGVtUmVuZGVyLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChyb3V0ZXMgJiYgcm91dGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHBhdGhzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY3J1bWJzID0gcm91dGVzLm1hcChyb3V0ZSA9PiB7XG4gICAgICAgIHJvdXRlLnBhdGggPSByb3V0ZS5wYXRoIHx8ICcnO1xuICAgICAgICBsZXQgcGF0aDogc3RyaW5nID0gcm91dGUucGF0aC5yZXBsYWNlKC9eXFwvLywgJycpO1xuICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKGA6JHtrZXl9YCwgcGFyYW1zW2tleV0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgICBwYXRocy5wdXNoKHBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPEJyZWFkY3J1bWJJdGVtIHNlcGFyYXRvcj17c2VwYXJhdG9yfSBrZXk9e3JvdXRlLmJyZWFkY3J1bWJOYW1lIHx8IHBhdGh9PlxuICAgICAgICAgICAge2l0ZW1SZW5kZXIocm91dGUsIHBhcmFtcywgcm91dGVzLCBwYXRocyl9XG4gICAgICAgICAgPC9CcmVhZGNydW1iSXRlbT5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoY2hpbGRyZW4pIHtcbiAgICAgIGNydW1icyA9IENoaWxkcmVuLm1hcChjaGlsZHJlbiwgKGVsZW1lbnQ6IGFueSwgaW5kZXgpID0+IHtcbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgd2FybmluZyhcbiAgICAgICAgICBlbGVtZW50LnR5cGUgJiYgZWxlbWVudC50eXBlLl9fQU5UX0JSRUFEQ1JVTUJfSVRFTSxcbiAgICAgICAgICBcIkJyZWFkY3J1bWIgb25seSBhY2NlcHRzIEJyZWFkY3J1bWIuSXRlbSBhcyBpdCdzIGNoaWxkcmVuXCIsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBjbG9uZUVsZW1lbnQoZWxlbWVudCwge1xuICAgICAgICAgIHNlcGFyYXRvcixcbiAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoY2xhc3NOYW1lLCBnZXRQcmVmaXhDbHMoJ2JyZWFkY3J1bWInLCBwcmVmaXhDbHMpKX0gc3R5bGU9e3N0eWxlfT5cbiAgICAgICAge2NydW1ic31cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==