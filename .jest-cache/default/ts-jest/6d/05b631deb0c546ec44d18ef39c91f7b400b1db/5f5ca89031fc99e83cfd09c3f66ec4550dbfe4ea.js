import isEmpty from '../../_util/isEmpty';
import ValidationResult from '../ValidationResult';
import { $l } from '../../locale-context';
import { toRangeValue } from '../../field/utils';
const isBadInput = (value, range) => {
    if (range) {
        return toRangeValue(value, range).some(item => !isEmpty(item) && isNaN(item));
    }
    return !isEmpty(value) && isNaN(value);
};
export default function badInput(value, props) {
    const { type, defaultValidationMessages, range } = props;
    if (type === "number" /* number */ && isBadInput(value, range)) {
        const ruleName = 'badInput';
        const { [ruleName]: validationMessage = $l('Validator', 'bad_input'), } = defaultValidationMessages;
        return new ValidationResult({
            validationMessage,
            value,
            ruleName,
        });
    }
    return true;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMtcHJvL3ZhbGlkYXRvci9ydWxlcy9iYWRJbnB1dC50c3giLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxPQUFPLE1BQU0scUJBQXFCLENBQUM7QUFDMUMsT0FBTyxnQkFBZ0IsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFMUMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBR2pELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFO0lBQ2xDLElBQUksS0FBSyxFQUFFO1FBQ1QsT0FBTyxZQUFZLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0tBQy9FO0lBQ0QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE9BQU8sVUFBVSxRQUFRLENBQUMsS0FBVSxFQUFFLEtBQXFCO0lBQ2hFLE1BQU0sRUFBRSxJQUFJLEVBQUUseUJBQXlCLEVBQUUsS0FBSyxFQUFFLEdBQUcsS0FBSyxDQUFDO0lBQ3pELElBQUksSUFBSSwwQkFBcUIsSUFBSSxVQUFVLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxFQUFFO1FBQ3pELE1BQU0sUUFBUSxHQUFHLFVBQVUsQ0FBQztRQUM1QixNQUFNLEVBQ0osQ0FBQyxRQUFRLENBQUMsRUFBRSxpQkFBaUIsR0FBRyxFQUFFLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxHQUM3RCxHQUFHLHlCQUF5QixDQUFDO1FBQzlCLE9BQU8sSUFBSSxnQkFBZ0IsQ0FBQztZQUMxQixpQkFBaUI7WUFDakIsS0FBSztZQUNMLFFBQVE7U0FDVCxDQUFDLENBQUM7S0FDSjtJQUNELE9BQU8sSUFBSSxDQUFDO0FBQ2QsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaHVpaHVhd2svRG9jdW1lbnRzL29wdC9jaG9lcm9kb24tdWkvY29tcG9uZW50cy1wcm8vdmFsaWRhdG9yL3J1bGVzL2JhZElucHV0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaXNFbXB0eSBmcm9tICcuLi8uLi9fdXRpbC9pc0VtcHR5JztcbmltcG9ydCBWYWxpZGF0aW9uUmVzdWx0IGZyb20gJy4uL1ZhbGlkYXRpb25SZXN1bHQnO1xuaW1wb3J0IHsgJGwgfSBmcm9tICcuLi8uLi9sb2NhbGUtY29udGV4dCc7XG5pbXBvcnQgeyBGaWVsZFR5cGUgfSBmcm9tICcuLi8uLi9kYXRhLXNldC9lbnVtJztcbmltcG9ydCB7IHRvUmFuZ2VWYWx1ZSB9IGZyb20gJy4uLy4uL2ZpZWxkL3V0aWxzJztcbmltcG9ydCB7IG1ldGhvZFJldHVybiwgVmFsaWRhdG9yUHJvcHMgfSBmcm9tICcuJztcblxuY29uc3QgaXNCYWRJbnB1dCA9ICh2YWx1ZSwgcmFuZ2UpID0+IHtcbiAgaWYgKHJhbmdlKSB7XG4gICAgcmV0dXJuIHRvUmFuZ2VWYWx1ZSh2YWx1ZSwgcmFuZ2UpLnNvbWUoaXRlbSA9PiAhaXNFbXB0eShpdGVtKSAmJiBpc05hTihpdGVtKSk7XG4gIH1cbiAgcmV0dXJuICFpc0VtcHR5KHZhbHVlKSAmJiBpc05hTih2YWx1ZSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBiYWRJbnB1dCh2YWx1ZTogYW55LCBwcm9wczogVmFsaWRhdG9yUHJvcHMpOiBtZXRob2RSZXR1cm4ge1xuICBjb25zdCB7IHR5cGUsIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXMsIHJhbmdlIH0gPSBwcm9wcztcbiAgaWYgKHR5cGUgPT09IEZpZWxkVHlwZS5udW1iZXIgJiYgaXNCYWRJbnB1dCh2YWx1ZSwgcmFuZ2UpKSB7XG4gICAgY29uc3QgcnVsZU5hbWUgPSAnYmFkSW5wdXQnO1xuICAgIGNvbnN0IHtcbiAgICAgIFtydWxlTmFtZV06IHZhbGlkYXRpb25NZXNzYWdlID0gJGwoJ1ZhbGlkYXRvcicsICdiYWRfaW5wdXQnKSxcbiAgICB9ID0gZGVmYXVsdFZhbGlkYXRpb25NZXNzYWdlcztcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoe1xuICAgICAgdmFsaWRhdGlvbk1lc3NhZ2UsXG4gICAgICB2YWx1ZSxcbiAgICAgIHJ1bGVOYW1lLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuIl0sInZlcnNpb24iOjN9