import React, { Component, } from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';
import LocaleReceiver from '../locale-provider/LocaleReceiver';
import defaultLocale from '../locale-provider/default';
import RcSelect, { OptGroup, Option } from '../rc-components/select';
import { getPrefixCls } from '../configure';
// => It is needless to export the declaration of below two inner components.
// export { Option, OptGroup };
export default class Select extends Component {
    constructor() {
        super(...arguments);
        this.saveSelect = (node) => {
            this.rcSelect = node;
        };
        this.renderSelect = (locale) => {
            const { prefixCls: customizePrefixCls, className = '', size, mode, ...restProps } = this.props;
            const prefixCls = getPrefixCls('select', customizePrefixCls);
            const cls = classNames({
                [`${prefixCls}-lg`]: size === "large" /* large */,
                [`${prefixCls}-sm`]: size === "small" /* small */,
            }, className);
            let { optionLabelProp } = this.props;
            const isCombobox = mode === "combobox" /* combobox */;
            if (isCombobox) {
                // children 带 dom 结构时，无法填入输入框
                optionLabelProp = optionLabelProp || 'value';
            }
            const modeConfig = {
                multiple: mode === "multiple" /* multiple */,
                tags: mode === "tags" /* tags */,
                combobox: isCombobox,
            };
            return (React.createElement(RcSelect, Object.assign({}, restProps, modeConfig, { prefixCls: prefixCls, className: cls, optionLabelProp: optionLabelProp || 'children', filterPlaceholder: locale.filterPlaceholder, notFoundContent: this.getNotFoundContent(locale), ref: this.saveSelect })));
        };
    }
    focus() {
        this.rcSelect.focus();
    }
    blur() {
        this.rcSelect.blur();
    }
    getNotFoundContent(locale) {
        const { notFoundContent, mode } = this.props;
        const isCombobox = mode === "combobox" /* combobox */;
        if (isCombobox) {
            // AutoComplete don't have notFoundContent defaultly
            return notFoundContent === undefined ? null : notFoundContent;
        }
        return notFoundContent === undefined ? locale.notFoundContent : notFoundContent;
    }
    render() {
        return (React.createElement(LocaleReceiver, { componentName: "Select", defaultLocale: defaultLocale.Select }, this.renderSelect));
    }
}
Select.displayName = 'Select';
Select.Option = Option;
Select.OptGroup = OptGroup;
Select.defaultProps = {
    blurChange: true,
    showSearch: false,
    transitionName: 'slide-up',
    choiceTransitionName: 'zoom',
    filter: false,
    showCheckAll: true,
    choiceRemove: true,
    border: true,
};
Select.propTypes = {
    prefixCls: PropTypes.string,
    className: PropTypes.string,
    size: PropTypes.oneOf(["default" /* default */, "large" /* large */, "small" /* small */]),
    combobox: PropTypes.bool,
    notFoundContent: PropTypes.any,
    showSearch: PropTypes.bool,
    optionLabelProp: PropTypes.string,
    transitionName: PropTypes.string,
    choiceTransitionName: PropTypes.string,
    showNotFindInputItem: PropTypes.bool,
    showNotFindSelectedItem: PropTypes.bool,
    filter: PropTypes.bool,
    showCheckAll: PropTypes.bool,
    footer: PropTypes.oneOfType([PropTypes.node, PropTypes.string]),
    choiceRender: PropTypes.func,
    loading: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),
    filterValue: PropTypes.string,
    onFilterChange: PropTypes.func,
    choiceRemove: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),
    onChoiceRemove: PropTypes.func,
    onClear: PropTypes.func,
    border: PropTypes.bool,
    blurChange: PropTypes.bool,
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvc2VsZWN0L2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxFQUVaLFNBQVMsR0FNVixNQUFNLE9BQU8sQ0FBQztBQUNmLE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQztBQUNuQyxPQUFPLFVBQVUsTUFBTSxZQUFZLENBQUM7QUFFcEMsT0FBTyxjQUFjLE1BQU0sbUNBQW1DLENBQUM7QUFDL0QsT0FBTyxhQUFhLE1BQU0sNEJBQTRCLENBQUM7QUFDdkQsT0FBTyxRQUFRLEVBQUUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFckUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGNBQWMsQ0FBQztBQXdGNUMsNkVBQTZFO0FBQzdFLCtCQUErQjtBQUUvQixNQUFNLENBQUMsT0FBTyxPQUFPLE1BQU8sU0FBUSxTQUEwQjtJQUE5RDs7UUFzREUsZUFBVSxHQUFHLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7UUFDdkIsQ0FBQyxDQUFDO1FBWUYsaUJBQVksR0FBRyxDQUFDLE1BQW9CLEVBQUUsRUFBRTtZQUN0QyxNQUFNLEVBQUUsU0FBUyxFQUFFLGtCQUFrQixFQUFFLFNBQVMsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDL0YsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLFFBQVEsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1lBQzdELE1BQU0sR0FBRyxHQUFHLFVBQVUsQ0FDcEI7Z0JBQ0UsQ0FBQyxHQUFHLFNBQVMsS0FBSyxDQUFDLEVBQUUsSUFBSSx3QkFBZTtnQkFDeEMsQ0FBQyxHQUFHLFNBQVMsS0FBSyxDQUFDLEVBQUUsSUFBSSx3QkFBZTthQUN6QyxFQUNELFNBQVMsQ0FDVixD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TSxFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3RCLFlBQVksRUFBRSxTQUFTLENBQUMsSUFBSTtJQUM1QixNQUFNLEVBQUUsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9ELFlBQVksRUFBRSxTQUFTLENBQUMsSUFBSTtJQUM1QixPQUFPLEVBQUUsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hFLFdBQVcsRUFBRSxTQUFTLENBQUMsTUFBTTtJQUM3QixjQUFjLEVBQUUsU0FBUyxDQUFDLElBQUk7SUFDOUIsWUFBWSxFQUFFLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNuRSxjQUFjLEVBQUUsU0FBUyxDQUFDLElBQUk7SUFDOUIsT0FBTyxFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3ZCLE1BQU0sRUFBRSxTQUFTLENBQUMsSUFBSTtJQUN0QixVQUFVLEVBQUUsU0FBUyxDQUFDLElBQUk7Q0FDM0IsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaHVpaHVhd2svRG9jdW1lbnRzL29wdC9jaG9lcm9kb24tdWkvY29tcG9uZW50cy9zZWxlY3QvaW5kZXgudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge1xuICBDbGFzc2ljQ29tcG9uZW50Q2xhc3MsXG4gIENvbXBvbmVudCxcbiAgQ1NTUHJvcGVydGllcyxcbiAgS2V5Ym9hcmRFdmVudCxcbiAgTW91c2VFdmVudCxcbiAgUmVhY3RFbGVtZW50LFxuICBSZWFjdE5vZGUsXG59IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IFNpemUgfSBmcm9tICcuLi9fdXRpbC9lbnVtJztcbmltcG9ydCBMb2NhbGVSZWNlaXZlciBmcm9tICcuLi9sb2NhbGUtcHJvdmlkZXIvTG9jYWxlUmVjZWl2ZXInO1xuaW1wb3J0IGRlZmF1bHRMb2NhbGUgZnJvbSAnLi4vbG9jYWxlLXByb3ZpZGVyL2RlZmF1bHQnO1xuaW1wb3J0IFJjU2VsZWN0LCB7IE9wdEdyb3VwLCBPcHRpb24gfSBmcm9tICcuLi9yYy1jb21wb25lbnRzL3NlbGVjdCc7XG5pbXBvcnQgeyBTZWxlY3RNb2RlIH0gZnJvbSAnLi9lbnVtJztcbmltcG9ydCB7IGdldFByZWZpeENscyB9IGZyb20gJy4uL2NvbmZpZ3VyZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWJzdHJhY3RTZWxlY3RQcm9wcyB7XG4gIHByZWZpeENscz86IHN0cmluZztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBzaXplPzogU2l6ZTtcbiAgbm90Rm91bmRDb250ZW50PzogUmVhY3ROb2RlIHwgbnVsbDtcbiAgdHJhbnNpdGlvbk5hbWU/OiBzdHJpbmc7XG4gIGNob2ljZVRyYW5zaXRpb25OYW1lPzogc3RyaW5nO1xuICBzaG93U2VhcmNoPzogYm9vbGVhbjtcbiAgYWxsb3dDbGVhcj86IGJvb2xlYW47XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgc3R5bGU/OiBDU1NQcm9wZXJ0aWVzO1xuICB0YWJJbmRleD86IG51bWJlcjtcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIGRlZmF1bHRBY3RpdmVGaXJzdE9wdGlvbj86IGJvb2xlYW47XG4gIGRyb3Bkb3duQ2xhc3NOYW1lPzogc3RyaW5nO1xuICBkcm9wZG93blN0eWxlPzogQ1NTUHJvcGVydGllcztcbiAgZHJvcGRvd25NZW51U3R5bGU/OiBDU1NQcm9wZXJ0aWVzO1xuICBvbkRyb3Bkb3duTW91c2VEb3duPzogKGU6IE1vdXNlRXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgb25TZWFyY2g/OiAodmFsdWU6IHN0cmluZykgPT4gYW55O1xuICBmaWx0ZXJPcHRpb24/OiBib29sZWFuIHwgKChpbnB1dFZhbHVlOiBzdHJpbmcsIG9wdGlvbjogUmVhY3RFbGVtZW50PE9wdGlvblByb3BzPikgPT4gYW55KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMYWJlbGVkVmFsdWUge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IFJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IHR5cGUgU2VsZWN0VmFsdWUgPSBzdHJpbmcgfCBhbnlbXSB8IExhYmVsZWRWYWx1ZSB8IExhYmVsZWRWYWx1ZVtdO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlbGVjdFByb3BzIGV4dGVuZHMgQWJzdHJhY3RTZWxlY3RQcm9wcyB7XG4gIGJsdXJDaGFuZ2U/OiBib29sZWFuO1xuICB2YWx1ZT86IFNlbGVjdFZhbHVlO1xuICBkZWZhdWx0VmFsdWU/OiBTZWxlY3RWYWx1ZTtcbiAgbW9kZT86IFNlbGVjdE1vZGU7XG4gIG9wdGlvbkxhYmVsUHJvcD86IHN0cmluZztcbiAgb25JbnB1dD86ICh2YWx1ZTogU2VsZWN0VmFsdWUpID0+IHZvaWQ7XG4gIG9uQ2hhbmdlPzogKHZhbHVlOiBTZWxlY3RWYWx1ZSwgb3B0aW9uOiBSZWFjdEVsZW1lbnQ8YW55PiB8IFJlYWN0RWxlbWVudDxhbnk+W10pID0+IHZvaWQ7XG4gIG9uU2VsZWN0PzogKHZhbHVlOiBTZWxlY3RWYWx1ZSwgb3B0aW9uOiBSZWFjdEVsZW1lbnQ8YW55PikgPT4gYW55O1xuICBvbkRlc2VsZWN0PzogKHZhbHVlOiBTZWxlY3RWYWx1ZSkgPT4gYW55O1xuICBvbkJsdXI/OiAoKSA9PiBhbnk7XG4gIG9uRm9jdXM/OiAoKSA9PiBhbnk7XG4gIG9uUG9wdXBTY3JvbGw/OiAoKSA9PiBhbnk7XG4gIG9uSW5wdXRLZXlEb3duPzogKGU6IEtleWJvYXJkRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHZvaWQ7XG4gIG9uQ2hvaWNlSXRlbUNsaWNrPzogKHZhbHVlOiBTZWxlY3RWYWx1ZSwgb3B0aW9uOiBSZWFjdEVsZW1lbnQ8YW55PikgPT4gdm9pZDtcbiAgb25DbGVhcj86ICgpID0+IGFueTtcbiAgbWF4VGFnQ291bnQ/OiBudW1iZXI7XG4gIG1heFRhZ1BsYWNlaG9sZGVyPzogUmVhY3ROb2RlIHwgKChvbWl0dGVkVmFsdWVzOiBTZWxlY3RWYWx1ZVtdKSA9PiBSZWFjdE5vZGUpO1xuICBkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGg/OiBib29sZWFuO1xuICBvcHRpb25GaWx0ZXJQcm9wPzogc3RyaW5nO1xuICBsYWJlbEluVmFsdWU/OiBib29sZWFuO1xuICBnZXRQb3B1cENvbnRhaW5lcj86ICh0cmlnZ2VyTm9kZTogRWxlbWVudCkgPT4gSFRNTEVsZW1lbnQ7XG4gIHRva2VuU2VwYXJhdG9ycz86IHN0cmluZ1tdO1xuICBnZXRJbnB1dEVsZW1lbnQ/OiAoKSA9PiBSZWFjdEVsZW1lbnQ8YW55PjtcbiAgYXV0b0ZvY3VzPzogYm9vbGVhbjtcbiAgc2hvd05vdEZpbmRJbnB1dEl0ZW0/OiBib29sZWFuO1xuICBzaG93Tm90RmluZFNlbGVjdGVkSXRlbT86IGJvb2xlYW47XG4gIGdldFJvb3REb21Ob2RlPzogKCkgPT4gSFRNTEVsZW1lbnQ7XG4gIHNob3dDaGVja0FsbD86IGJvb2xlYW47XG4gIGZpbHRlcj86IGJvb2xlYW47XG4gIGZvb3Rlcj86IFJlYWN0Tm9kZSB8IHN0cmluZztcbiAgY2hvaWNlUmVuZGVyPzogKGxhYmVsOiBSZWFjdEVsZW1lbnQ8YW55PiwgdmFsdWU6IFNlbGVjdFZhbHVlKSA9PiBhbnk7XG4gIGxvYWRpbmc/OiBib29sZWFuIHwgb2JqZWN0O1xuICBvbkZpbHRlckNoYW5nZT86ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICBjaG9pY2VSZW1vdmU/OiBib29sZWFuO1xuICBmaWx0ZXJWYWx1ZT86IHN0cmluZztcbiAgYm9yZGVyPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRpb25Qcm9wcyB7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgdmFsdWU/OiBhbnk7XG4gIHRpdGxlPzogc3RyaW5nO1xuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBzdHlsZT86IG9iamVjdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPcHRHcm91cFByb3BzIHtcbiAgbGFiZWw/OiBSZWFjdE5vZGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VsZWN0TG9jYWxlIHtcbiAgbm90Rm91bmRDb250ZW50Pzogc3RyaW5nO1xuICBmaWx0ZXJQbGFjZWhvbGRlcj86IHN0cmluZztcbn1cblxuLy8gPT4gSXQgaXMgbmVlZGxlc3MgdG8gZXhwb3J0IHRoZSBkZWNsYXJhdGlvbiBvZiBiZWxvdyB0d28gaW5uZXIgY29tcG9uZW50cy5cbi8vIGV4cG9ydCB7IE9wdGlvbiwgT3B0R3JvdXAgfTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0IGV4dGVuZHMgQ29tcG9uZW50PFNlbGVjdFByb3BzLCB7fT4ge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnU2VsZWN0JztcblxuICBzdGF0aWMgT3B0aW9uID0gT3B0aW9uIGFzIENsYXNzaWNDb21wb25lbnRDbGFzczxPcHRpb25Qcm9wcz47XG5cbiAgc3RhdGljIE9wdEdyb3VwID0gT3B0R3JvdXAgYXMgQ2xhc3NpY0NvbXBvbmVudENsYXNzPE9wdEdyb3VwUHJvcHM+O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgYmx1ckNoYW5nZTogdHJ1ZSxcbiAgICBzaG93U2VhcmNoOiBmYWxzZSxcbiAgICB0cmFuc2l0aW9uTmFtZTogJ3NsaWRlLXVwJyxcbiAgICBjaG9pY2VUcmFuc2l0aW9uTmFtZTogJ3pvb20nLFxuICAgIGZpbHRlcjogZmFsc2UsXG4gICAgc2hvd0NoZWNrQWxsOiB0cnVlLFxuICAgIGNob2ljZVJlbW92ZTogdHJ1ZSxcbiAgICBib3JkZXI6IHRydWUsXG4gIH07XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBwcmVmaXhDbHM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHNpemU6IFByb3BUeXBlcy5vbmVPZihbU2l6ZS5kZWZhdWx0LCBTaXplLmxhcmdlLCBTaXplLnNtYWxsXSksXG4gICAgY29tYm9ib3g6IFByb3BUeXBlcy5ib29sLFxuICAgIG5vdEZvdW5kQ29udGVudDogUHJvcFR5cGVzLmFueSxcbiAgICBzaG93U2VhcmNoOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvcHRpb25MYWJlbFByb3A6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgdHJhbnNpdGlvbk5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2hvaWNlVHJhbnNpdGlvbk5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgc2hvd05vdEZpbmRJbnB1dEl0ZW06IFByb3BUeXBlcy5ib29sLFxuICAgIHNob3dOb3RGaW5kU2VsZWN0ZWRJdGVtOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBmaWx0ZXI6IFByb3BUeXBlcy5ib29sLFxuICAgIHNob3dDaGVja0FsbDogUHJvcFR5cGVzLmJvb2wsXG4gICAgZm9vdGVyOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMubm9kZSwgUHJvcFR5cGVzLnN0cmluZ10pLFxuICAgIGNob2ljZVJlbmRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgbG9hZGluZzogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmJvb2wsIFByb3BUeXBlcy5vYmplY3RdKSxcbiAgICBmaWx0ZXJWYWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBvbkZpbHRlckNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgY2hvaWNlUmVtb3ZlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuYm9vbCwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICBvbkNob2ljZVJlbW92ZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25DbGVhcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgYm9yZGVyOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBibHVyQ2hhbmdlOiBQcm9wVHlwZXMuYm9vbCxcbiAgfTtcblxuICBwcml2YXRlIHJjU2VsZWN0OiBhbnk7XG5cbiAgZm9jdXMoKSB7XG4gICAgdGhpcy5yY1NlbGVjdC5mb2N1cygpO1xuICB9XG5cbiAgYmx1cigpIHtcbiAgICB0aGlzLnJjU2VsZWN0LmJsdXIoKTtcbiAgfVxuXG4gIHNhdmVTZWxlY3QgPSAobm9kZTogYW55KSA9PiB7XG4gICAgdGhpcy5yY1NlbGVjdCA9IG5vZGU7XG4gIH07XG5cbiAgZ2V0Tm90Rm91bmRDb250ZW50KGxvY2FsZTogU2VsZWN0TG9jYWxlKSB7XG4gICAgY29uc3QgeyBub3RGb3VuZENvbnRlbnQsIG1vZGUgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXNDb21ib2JveCA9IG1vZGUgPT09IFNlbGVjdE1vZGUuY29tYm9ib3g7XG4gICAgaWYgKGlzQ29tYm9ib3gpIHtcbiAgICAgIC8vIEF1dG9Db21wbGV0ZSBkb24ndCBoYXZlIG5vdEZvdW5kQ29udGVudCBkZWZhdWx0bHlcbiAgICAgIHJldHVybiBub3RGb3VuZENvbnRlbnQgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBub3RGb3VuZENvbnRlbnQ7XG4gICAgfVxuICAgIHJldHVybiBub3RGb3VuZENvbnRlbnQgPT09IHVuZGVmaW5lZCA/IGxvY2FsZS5ub3RGb3VuZENvbnRlbnQgOiBub3RGb3VuZENvbnRlbnQ7XG4gIH1cblxuICByZW5kZXJTZWxlY3QgPSAobG9jYWxlOiBTZWxlY3RMb2NhbGUpID0+IHtcbiAgICBjb25zdCB7IHByZWZpeENsczogY3VzdG9taXplUHJlZml4Q2xzLCBjbGFzc05hbWUgPSAnJywgc2l6ZSwgbW9kZSwgLi4ucmVzdFByb3BzIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHByZWZpeENscyA9IGdldFByZWZpeENscygnc2VsZWN0JywgY3VzdG9taXplUHJlZml4Q2xzKTtcbiAgICBjb25zdCBjbHMgPSBjbGFzc05hbWVzKFxuICAgICAge1xuICAgICAgICBbYCR7cHJlZml4Q2xzfS1sZ2BdOiBzaXplID09PSBTaXplLmxhcmdlLFxuICAgICAgICBbYCR7cHJlZml4Q2xzfS1zbWBdOiBzaXplID09PSBTaXplLnNtYWxsLFxuICAgICAgfSxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICApO1xuXG4gICAgbGV0IHsgb3B0aW9uTGFiZWxQcm9wIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGlzQ29tYm9ib3ggPSBtb2RlID09PSBTZWxlY3RNb2RlLmNvbWJvYm94O1xuICAgIGlmIChpc0NvbWJvYm94KSB7XG4gICAgICAvLyBjaGlsZHJlbiDluKYgZG9tIOe7k+aehOaXtu+8jOaXoOazleWhq+WFpei+k+WFpeahhlxuICAgICAgb3B0aW9uTGFiZWxQcm9wID0gb3B0aW9uTGFiZWxQcm9wIHx8ICd2YWx1ZSc7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZUNvbmZpZyA9IHtcbiAgICAgIG11bHRpcGxlOiBtb2RlID09PSBTZWxlY3RNb2RlLm11bHRpcGxlLFxuICAgICAgdGFnczogbW9kZSA9PT0gU2VsZWN0TW9kZS50YWdzLFxuICAgICAgY29tYm9ib3g6IGlzQ29tYm9ib3gsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8UmNTZWxlY3RcbiAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgey4uLm1vZGVDb25maWd9XG4gICAgICAgIHByZWZpeENscz17cHJlZml4Q2xzfVxuICAgICAgICBjbGFzc05hbWU9e2Nsc31cbiAgICAgICAgb3B0aW9uTGFiZWxQcm9wPXtvcHRpb25MYWJlbFByb3AgfHwgJ2NoaWxkcmVuJ31cbiAgICAgICAgZmlsdGVyUGxhY2Vob2xkZXI9e2xvY2FsZS5maWx0ZXJQbGFjZWhvbGRlcn1cbiAgICAgICAgbm90Rm91bmRDb250ZW50PXt0aGlzLmdldE5vdEZvdW5kQ29udGVudChsb2NhbGUpfVxuICAgICAgICByZWY9e3RoaXMuc2F2ZVNlbGVjdH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxMb2NhbGVSZWNlaXZlciBjb21wb25lbnROYW1lPVwiU2VsZWN0XCIgZGVmYXVsdExvY2FsZT17ZGVmYXVsdExvY2FsZS5TZWxlY3R9PlxuICAgICAgICB7dGhpcy5yZW5kZXJTZWxlY3R9XG4gICAgICA8L0xvY2FsZVJlY2VpdmVyPlxuICAgICk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==