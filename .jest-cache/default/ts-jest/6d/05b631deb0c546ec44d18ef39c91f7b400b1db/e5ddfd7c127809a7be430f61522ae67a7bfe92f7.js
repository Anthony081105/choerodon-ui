import React, { cloneElement, Component, } from 'react';
import classNames from 'classnames';
import DirectoryTree from './DirectoryTree';
import animation from '../_util/openAnimation';
import RcTree, { TreeNode } from '../rc-components/tree';
import Icon from '../icon';
import Progress from '../progress';
import { getPrefixCls } from '../configure';
export { TreeNode };
export default class Tree extends Component {
    constructor() {
        super(...arguments);
        this.renderSwitcherIcon = ({ isLeaf, loading }) => {
            const { showLine, switcherIcon } = this.props;
            const prefixCls = this.getPrefixCls();
            if (loading) {
                return (React.createElement(Progress, { type: "loading" /* loading */, className: `${prefixCls}-switcher-loading-icon`, size: "small" /* small */ }));
            }
            const switcherCls = `${prefixCls}-switcher-icon`;
            if (showLine) {
                if (isLeaf) {
                    return React.createElement(Icon, { type: "note", className: `${prefixCls}-switcher-line-icon` });
                }
                return React.createElement(Icon, { type: "arrow_drop_down", className: switcherCls });
            }
            if (isLeaf) {
                return null;
            }
            if (switcherIcon) {
                const switcherOriginCls = switcherIcon.props.className || '';
                return cloneElement(switcherIcon, {
                    className: [switcherOriginCls, switcherCls],
                });
            }
            return React.createElement(Icon, { type: "arrow_drop_down", className: switcherCls });
        };
        this.setTreeRef = (node) => {
            this.tree = node;
        };
    }
    getPrefixCls() {
        const { prefixCls } = this.props;
        return getPrefixCls('tree', prefixCls);
    }
    render() {
        const props = this.props;
        const { className, showIcon, children } = props;
        const { checkable } = props;
        const prefixCls = this.getPrefixCls();
        return (React.createElement(RcTree, Object.assign({ itemHeight: 20, ref: this.setTreeRef }, props, { className: classNames(!showIcon && `${prefixCls}-icon-hide`, className), checkable: checkable ? React.createElement("span", { className: `${prefixCls}-checkbox-inner` }) : 0, switcherIcon: this.renderSwitcherIcon, prefixCls: prefixCls }), children));
    }
}
Tree.displayName = 'Tree';
Tree.TreeNode = TreeNode;
Tree.DirectoryTree = DirectoryTree;
Tree.defaultProps = {
    checkable: false,
    showIcon: false,
    openAnimation: animation,
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvdHJlZS9pbmRleC50c3giLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLEVBQUUsRUFDWixZQUFZLEVBQ1osU0FBUyxHQU1WLE1BQU0sT0FBTyxDQUFDO0FBQ2YsT0FBTyxVQUFVLE1BQU0sWUFBWSxDQUFDO0FBQ3BDLE9BQU8sYUFBYSxNQUFNLGlCQUFpQixDQUFDO0FBQzVDLE9BQU8sU0FBUyxNQUFNLHdCQUF3QixDQUFDO0FBQy9DLE9BQU8sTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUE0QixNQUFNLHVCQUF1QixDQUFDO0FBRW5GLE9BQU8sSUFBSSxNQUFNLFNBQVMsQ0FBQztBQUMzQixPQUFPLFFBQVEsTUFBTSxhQUFhLENBQUM7QUFHbkMsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUc1QyxPQUFPLEVBQUUsUUFBUSxFQUFFLENBQUM7QUF1SXBCLE1BQU0sQ0FBQyxPQUFPLE9BQU8sSUFBSyxTQUFRLFNBQXlCO0lBQTNEOztRQWFFLHVCQUFrQixHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFvQixFQUFFLEVBQUU7WUFDN0QsTUFBTSxFQUFFLFFBQVEsRUFBRSxZQUFZLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQzlDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN0QyxJQUFJLE9BQU8sRUFBRTtnQkFDWCxPQUFPLENBQ0wsb0JBQUMsUUFBUSxJQUNQLElBQUksMkJBQ0osU0FBUyxFQUFFLEdBQUcsU0FBUyx3QkFBd0IsRUFDL0MsSUFBSSx3QkFDSixDQUNILENBQUM7YUFDSDtZQUNELE1BQU0sV0FBVyxHQUFHLEdBQUcsU0FBUyxnQkFBZ0IsQ0FBQztZQUNqRCxJQUFJLFFBQVEsRUFBRTtnQkFDWixJQUFJLE1BQU0sRUFBRTtvQkFDVixPQUFPLG9CQUFDLElBQUksSUFBQyxJQUFJLEVBQUMsTUFBTSxFQUFDLFNBQVMsRUFBRSxHQUFHLFNBQVMscUJBQXFCLEdBQUksQ0FBQztpQkFDM0U7Z0JBQ0QsT0FBTyxvQkFBQyxJQUFJLElBQUMsSUFBSSxFQUFDLGlCQUFpQixFQUFDLFNBQVMsRUFBRSxXQUFXLEdBQUksQ0FBQzthQUNoRTtZQUNELElBQUksTUFBTSxFQUFFO2dCQUNWLE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFDRCxJQUFJLFlBQVksRUFBRTtnQkFDaEIsTUFBTSxpQkFBaUIsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLFNBQVMsSUFBSSxFQUFFLENBQUM7Z0JBQzdELE9BQU8sWUFBWSxDQUFDLFlBQVksRUFBRTtvQkFDaEMsU0FBUyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsV0FBVyxDQUFDO2lCQUM1QyxDQUFDLENBQUM7YUFDSjtZQUNELE9BQU8sb0JBQUMsSUFBSSxJQUFDLElBQUksRUFBQyxpQkFBaUIsRUFBQyxTQUFTLEVBQUUsV0FBVyxHQUFJLENBQUM7UUFDakUsQ0FBQyxDQUFDO1FBSUEsZUFBVSxHQUFHLENBQUMsSUFBUyxFQUFFLEVBQUU7WUFDekIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbkIsQ0FBQyxDQUFDO0lBMEJOLENBQUM7SUF4QkMsWUFBWTtRQUNWLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2pDLE9BQU8sWUFBWSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRUQsTUFBTTtRQUNKLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDekIsTUFBTSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLEdBQUcsS0FBSyxDQUFDO1FBQ2hELE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxLQUFLLENBQUM7UUFDNUIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3RDLE9BQU8sQ0FDTCxvQkFBQyxNQUFNLGtCQUNMLFVBQVUsRUFBRSxFQUFFLEVBQ2QsR0FBRyxFQUFFLElBQUksQ0FBQyxVQUFVLElBQ2hCLEtBQUssSUFDVCxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUMsUUFBUSxJQUFJLEdBQUcsU0FBUyxZQUFZLEVBQUUsU0FBUyxDQUFDLEVBQ3ZFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQyxDQUFDLDhCQUFNLFNBQVMsRUFBRSxHQUFHLFNBQVMsaUJBQWlCLEdBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUM3RSxZQUFZLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUNyQyxTQUFTLEVBQUUsU0FBUyxLQUVuQixRQUFRLENBQ0YsQ0FDVixDQUFDO0lBQ0osQ0FBQzs7QUF4RU0sZ0JBQVcsR0FBRyxNQUFNLENBQUM7QUFFckIsYUFBUSxHQUFHLFFBQVEsQ0FBQztBQUVwQixrQkFBYSxHQUFHLGFBQWEsQ0FBQztBQUU5QixpQkFBWSxHQUFHO0lBQ3BCLFNBQVMsRUFBRSxLQUFLO0lBQ2hCLFFBQVEsRUFBRSxLQUFLO0lBQ2YsYUFBYSxFQUFFLFNBQVM7Q0FDekIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaHVpaHVhd2svRG9jdW1lbnRzL29wdC9jaG9lcm9kb24tdWkvY29tcG9uZW50cy90cmVlL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtcbiAgY2xvbmVFbGVtZW50LFxuICBDb21wb25lbnQsXG4gIENTU1Byb3BlcnRpZXMsXG4gIFJlYWN0RWxlbWVudCxcbiAgUmVhY3ROb2RlLFxuICBNb3VzZUV2ZW50LFxuICBEcmFnRXZlbnQsXG59IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IERpcmVjdG9yeVRyZWUgZnJvbSAnLi9EaXJlY3RvcnlUcmVlJztcbmltcG9ydCBhbmltYXRpb24gZnJvbSAnLi4vX3V0aWwvb3BlbkFuaW1hdGlvbic7XG5pbXBvcnQgUmNUcmVlLCB7IFRyZWVOb2RlLCBUcmVlUHJvcHMgYXMgUmNUcmVlUHJvcHMgfSBmcm9tICcuLi9yYy1jb21wb25lbnRzL3RyZWUnO1xuaW1wb3J0IHtUcmVlTm9kZVByb3BzfSBmcm9tICcuLi9yYy1jb21wb25lbnRzL3RyZWUvVHJlZU5vZGUnXG5pbXBvcnQgSWNvbiBmcm9tICcuLi9pY29uJztcbmltcG9ydCBQcm9ncmVzcyBmcm9tICcuLi9wcm9ncmVzcyc7XG5pbXBvcnQgeyBQcm9ncmVzc1R5cGUgfSBmcm9tICcuLi9wcm9ncmVzcy9lbnVtJztcbmltcG9ydCB7IFNpemUgfSBmcm9tICcuLi9fdXRpbC9lbnVtJztcbmltcG9ydCB7IGdldFByZWZpeENscyB9IGZyb20gJy4uL2NvbmZpZ3VyZSc7XG5pbXBvcnQgeyBFdmVudERhdGFOb2RlLCBEYXRhTm9kZSB9IGZyb20gJy4uL3JjLWNvbXBvbmVudHMvdHJlZS9pbnRlcmZhY2UnO1xuXG5leHBvcnQgeyBUcmVlTm9kZSB9O1xuXG5leHBvcnQge0V2ZW50RGF0YU5vZGUsRGF0YU5vZGUsVHJlZU5vZGVQcm9wc31cblxuZXhwb3J0IHsgRXhwYW5kQWN0aW9uIGFzIERpcmVjdG9yeVRyZWVFeHBhbmRBY3Rpb24sIERpcmVjdG9yeVRyZWVQcm9wcyB9IGZyb20gJy4vRGlyZWN0b3J5VHJlZSc7XG5cblxuXG5leHBvcnQgaW50ZXJmYWNlIEM3bmRUcmVlTm9kZUF0dHJpYnV0ZSB7XG4gIGV2ZW50S2V5OiBzdHJpbmc7XG4gIHByZWZpeENsczogc3RyaW5nO1xuICBjbGFzc05hbWU6IHN0cmluZztcbiAgZXhwYW5kZWQ6IGJvb2xlYW47XG4gIHNlbGVjdGVkOiBib29sZWFuO1xuICBjaGVja2VkOiBib29sZWFuO1xuICBoYWxmQ2hlY2tlZDogYm9vbGVhbjtcbiAgY2hpbGRyZW46IFJlYWN0Tm9kZTtcbiAgdGl0bGU6IFJlYWN0Tm9kZTtcbiAgcG9zOiBzdHJpbmc7XG4gIGRyYWdPdmVyOiBib29sZWFuO1xuICBkcmFnT3ZlckdhcFRvcDogYm9vbGVhbjtcbiAgZHJhZ092ZXJHYXBCb3R0b206IGJvb2xlYW47XG4gIGlzTGVhZjogYm9vbGVhbjtcbiAgc2VsZWN0YWJsZTogYm9vbGVhbjtcbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIGRpc2FibGVDaGVja2JveDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDN25UcmVlTm9kZVByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBjaGVja2FibGU/OiBib29sZWFuO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIGRpc2FibGVDaGVja2JveD86IGJvb2xlYW47XG4gIHRpdGxlPzogc3RyaW5nIHwgUmVhY3ROb2RlO1xuICBrZXk/OiBzdHJpbmc7XG4gIGV2ZW50S2V5Pzogc3RyaW5nO1xuICBpc0xlYWY/OiBib29sZWFuO1xuICBjaGVja2VkPzogYm9vbGVhbjtcbiAgZXhwYW5kZWQ/OiBib29sZWFuO1xuICBsb2FkaW5nPzogYm9vbGVhbjtcbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xuICBzZWxlY3RhYmxlPzogYm9vbGVhbjtcbiAgaWNvbj86ICgodHJlZU5vZGU6IEM3bmRUcmVlTm9kZUF0dHJpYnV0ZSkgPT4gUmVhY3ROb2RlKSB8IFJlYWN0Tm9kZTtcbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIFtjdXN0b21Qcm9wOiBzdHJpbmddOiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQzduVHJlZU5vZGUgZXh0ZW5kcyBDb21wb25lbnQ8QzduVHJlZU5vZGVQcm9wcywge30+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQzduVHJlZU5vZGVCYXNlRXZlbnQge1xuICBub2RlOiBDN25UcmVlTm9kZTtcbiAgbmF0aXZlRXZlbnQ6IE1vdXNlRXZlbnQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQzduVHJlZU5vZGVDaGVja2VkRXZlbnQgZXh0ZW5kcyBDN25UcmVlTm9kZUJhc2VFdmVudCB7XG4gIGV2ZW50OiAnY2hlY2snO1xuICBjaGVja2VkPzogYm9vbGVhbjtcbiAgY2hlY2tlZE5vZGVzPzogQzduVHJlZU5vZGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDN25UcmVlTm9kZVNlbGVjdGVkRXZlbnQgZXh0ZW5kcyBDN25UcmVlTm9kZUJhc2VFdmVudCB7XG4gIGV2ZW50OiAnc2VsZWN0JztcbiAgc2VsZWN0ZWQ/OiBib29sZWFuO1xuICBzZWxlY3RlZE5vZGVzPzogRGF0YU5vZGVbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDN25UcmVlTm9kZUV4cGFuZGVkRXZlbnQgZXh0ZW5kcyBDN25UcmVlTm9kZUJhc2VFdmVudCB7XG4gIGV4cGFuZGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDN25UcmVlTm9kZU1vdXNlRXZlbnQge1xuICBub2RlOiBDN25UcmVlTm9kZTtcbiAgZXZlbnQ6IERyYWdFdmVudDxIVE1MRWxlbWVudD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQzduVHJlZU5vZGVEcmFnRW50ZXJFdmVudCBleHRlbmRzIEM3blRyZWVOb2RlTW91c2VFdmVudCB7XG4gIGV4cGFuZGVkS2V5czogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQzduVHJlZU5vZGVEcm9wRXZlbnQge1xuICBub2RlOiBDN25UcmVlTm9kZTtcbiAgZHJhZ05vZGU6IEM3blRyZWVOb2RlO1xuICBkcmFnTm9kZXNLZXlzOiBzdHJpbmdbXTtcbiAgZHJvcFBvc2l0aW9uOiBudW1iZXI7XG4gIGRyb3BUb0dhcD86IGJvb2xlYW47XG4gIGV2ZW50OiBNb3VzZUV2ZW50PEhUTUxFbGVtZW50Pjtcbn1cblxuLy8gW0xlZ2FjeV0gQ29tcGF0aWJsZSBmb3IgdjNcbmV4cG9ydCB0eXBlIFRyZWVOb2RlTm9ybWFsID0gRGF0YU5vZGU7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJlZVByb3BzIGV4dGVuZHMgT21pdDxSY1RyZWVQcm9wcywgJ3ByZWZpeENscyc+IHtcbiAgc2hvd0xpbmU/OiBib29sZWFuO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIC8qKiDmmK/lkKbmlK/mjIHlpJrpgIkgKi9cbiAgbXVsdGlwbGU/OiBib29sZWFuO1xuICAvKiog5piv5ZCm6Ieq5Yqo5bGV5byA54i26IqC54K5ICovXG4gIGF1dG9FeHBhbmRQYXJlbnQ/OiBib29sZWFuO1xuICAvKiogY2hlY2thYmxl54q25oCB5LiL6IqC54K56YCJ5oup5a6M5YWo5Y+X5o6n77yI54i25a2Q6IqC54K56YCJ5Lit54q25oCB5LiN5YaN5YWz6IGU77yJICovXG4gIGNoZWNrU3RyaWN0bHk/OiBib29sZWFuO1xuICAvKiog5piv5ZCm5pSv5oyB6YCJ5LitICovXG4gIGNoZWNrYWJsZT86IGJvb2xlYW47XG4gIC8qKiDmmK/lkKbnpoHnlKjmoJEgKi9cbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAvKiog6buY6K6k5bGV5byA5omA5pyJ5qCR6IqC54K5ICovXG4gIGRlZmF1bHRFeHBhbmRBbGw/OiBib29sZWFuO1xuICAvKiog6buY6K6k5bGV5byA5a+55bqU5qCR6IqC54K5ICovXG4gIGRlZmF1bHRFeHBhbmRQYXJlbnQ/OiBib29sZWFuO1xuICAvKiog6buY6K6k5bGV5byA5oyH5a6a55qE5qCR6IqC54K5ICovXG4gIGRlZmF1bHRFeHBhbmRlZEtleXM/OiBzdHJpbmdbXTtcbiAgLyoqIO+8iOWPl+aOp++8ieWxleW8gOaMh+WumueahOagkeiKgueCuSAqL1xuICBleHBhbmRlZEtleXM/OiBzdHJpbmdbXTtcbiAgLyoqIO+8iOWPl+aOp++8iemAieS4reWkjemAieahhueahOagkeiKgueCuSAqL1xuICBjaGVja2VkS2V5cz86IHN0cmluZ1tdIHwgeyBjaGVja2VkOiBzdHJpbmdbXTsgaGFsZkNoZWNrZWQ6IHN0cmluZ1tdIH07XG4gIC8qKiDpu5jorqTpgInkuK3lpI3pgInmoYbnmoTmoJHoioLngrkgKi9cbiAgZGVmYXVsdENoZWNrZWRLZXlzPzogc3RyaW5nW107XG4gIC8qKiDvvIjlj5fmjqfvvInorr7nva7pgInkuK3nmoTmoJHoioLngrkgKi9cbiAgc2VsZWN0ZWRLZXlzPzogc3RyaW5nW107XG4gIC8qKiDpu5jorqTpgInkuK3nmoTmoJHoioLngrkgKi9cbiAgZGVmYXVsdFNlbGVjdGVkS2V5cz86IHN0cmluZ1tdO1xuICBzZWxlY3RhYmxlPzogYm9vbGVhbjtcbiAgLyoqIOeCueWHu+agkeiKgueCueinpuWPkSAqL1xuICBmaWx0ZXJDN25UcmVlTm9kZT86IChub2RlOiBDN25UcmVlTm9kZSkgPT4gYm9vbGVhbjtcbiAgbG9hZGVkS2V5cz86IHN0cmluZ1tdO1xuICAvKiog6K6+572u6IqC54K55Y+v5ouW5ou977yISUU+OO+8iSAqL1xuICBkcmFnZ2FibGU/OiBib29sZWFuO1xuICBzdHlsZT86IENTU1Byb3BlcnRpZXM7XG4gIHNob3dJY29uPzogYm9vbGVhbjtcbiAgaWNvbj86ICgobm9kZVByb3BzOiBDN25kVHJlZU5vZGVBdHRyaWJ1dGUpID0+UmVhY3ROb2RlKSB8IFJlYWN0Tm9kZTtcbiAgc3dpdGNoZXJJY29uPzogUmVhY3RFbGVtZW50PGFueT47XG4gIHByZWZpeENscz86IHN0cmluZztcbiAgY2hpbGRyZW4/OiBSZWFjdE5vZGU7XG4gIGJsb2NrTm9kZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyZWUgZXh0ZW5kcyBDb21wb25lbnQ8VHJlZVByb3BzLCBhbnk+IHtcbiAgc3RhdGljIGRpc3BsYXlOYW1lID0gJ1RyZWUnO1xuXG4gIHN0YXRpYyBUcmVlTm9kZSA9IFRyZWVOb2RlO1xuXG4gIHN0YXRpYyBEaXJlY3RvcnlUcmVlID0gRGlyZWN0b3J5VHJlZTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGNoZWNrYWJsZTogZmFsc2UsXG4gICAgc2hvd0ljb246IGZhbHNlLFxuICAgIG9wZW5BbmltYXRpb246IGFuaW1hdGlvbixcbiAgfTtcblxuICByZW5kZXJTd2l0Y2hlckljb24gPSAoeyBpc0xlYWYsIGxvYWRpbmcgfTogQzduVHJlZU5vZGVQcm9wcykgPT4ge1xuICAgIGNvbnN0IHsgc2hvd0xpbmUsIHN3aXRjaGVySWNvbiB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBwcmVmaXhDbHMgPSB0aGlzLmdldFByZWZpeENscygpO1xuICAgIGlmIChsb2FkaW5nKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UHJvZ3Jlc3NcbiAgICAgICAgICB0eXBlPXtQcm9ncmVzc1R5cGUubG9hZGluZ31cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc3dpdGNoZXItbG9hZGluZy1pY29uYH1cbiAgICAgICAgICBzaXplPXtTaXplLnNtYWxsfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3Qgc3dpdGNoZXJDbHMgPSBgJHtwcmVmaXhDbHN9LXN3aXRjaGVyLWljb25gO1xuICAgIGlmIChzaG93TGluZSkge1xuICAgICAgaWYgKGlzTGVhZikge1xuICAgICAgICByZXR1cm4gPEljb24gdHlwZT1cIm5vdGVcIiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc3dpdGNoZXItbGluZS1pY29uYH0gLz47XG4gICAgICB9XG4gICAgICByZXR1cm4gPEljb24gdHlwZT1cImFycm93X2Ryb3BfZG93blwiIGNsYXNzTmFtZT17c3dpdGNoZXJDbHN9IC8+O1xuICAgIH1cbiAgICBpZiAoaXNMZWFmKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHN3aXRjaGVySWNvbikge1xuICAgICAgY29uc3Qgc3dpdGNoZXJPcmlnaW5DbHMgPSBzd2l0Y2hlckljb24ucHJvcHMuY2xhc3NOYW1lIHx8ICcnO1xuICAgICAgcmV0dXJuIGNsb25lRWxlbWVudChzd2l0Y2hlckljb24sIHtcbiAgICAgICAgY2xhc3NOYW1lOiBbc3dpdGNoZXJPcmlnaW5DbHMsIHN3aXRjaGVyQ2xzXSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gPEljb24gdHlwZT1cImFycm93X2Ryb3BfZG93blwiIGNsYXNzTmFtZT17c3dpdGNoZXJDbHN9IC8+O1xuICB9O1xuXG4gICAgdHJlZTogYW55O1xuXG4gICAgc2V0VHJlZVJlZiA9IChub2RlOiBhbnkpID0+IHtcbiAgICAgIHRoaXMudHJlZSA9IG5vZGU7XG4gICAgfTtcblxuICBnZXRQcmVmaXhDbHMoKSB7XG4gICAgY29uc3QgeyBwcmVmaXhDbHMgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIGdldFByZWZpeENscygndHJlZScsIHByZWZpeENscyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lLCBzaG93SWNvbiwgY2hpbGRyZW4gfSA9IHByb3BzO1xuICAgIGNvbnN0IHsgY2hlY2thYmxlIH0gPSBwcm9wcztcbiAgICBjb25zdCBwcmVmaXhDbHMgPSB0aGlzLmdldFByZWZpeENscygpO1xuICAgIHJldHVybiAoXG4gICAgICA8UmNUcmVlXG4gICAgICAgIGl0ZW1IZWlnaHQ9ezIwfVxuICAgICAgICByZWY9e3RoaXMuc2V0VHJlZVJlZn1cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZXMoIXNob3dJY29uICYmIGAke3ByZWZpeENsc30taWNvbi1oaWRlYCwgY2xhc3NOYW1lKX1cbiAgICAgICAgY2hlY2thYmxlPXtjaGVja2FibGUgPyA8c3BhbiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tY2hlY2tib3gtaW5uZXJgfSAvPiA6IDAgfVxuICAgICAgICBzd2l0Y2hlckljb249e3RoaXMucmVuZGVyU3dpdGNoZXJJY29ufVxuICAgICAgICBwcmVmaXhDbHM9e3ByZWZpeENsc31cbiAgICAgID5cbiAgICAgICAge2NoaWxkcmVufVxuICAgICAgPC9SY1RyZWU+XG4gICAgKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9