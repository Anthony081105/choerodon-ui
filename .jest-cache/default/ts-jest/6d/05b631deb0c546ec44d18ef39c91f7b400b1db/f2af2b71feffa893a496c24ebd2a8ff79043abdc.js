import React, { Component } from 'react';
import Tooltip from '../tooltip';
import Icon from '../icon';
import Button from '../button';
import LocaleReceiver from '../locale-provider/LocaleReceiver';
import defaultLocale from '../locale-provider/default';
import { getPrefixCls } from '../configure';
export default class Popconfirm extends Component {
    constructor(props) {
        super(props);
        this.onConfirm = e => {
            this.setVisible(false);
            const { onConfirm } = this.props;
            if (onConfirm) {
                onConfirm.call(this, e);
            }
        };
        this.onCancel = e => {
            this.setVisible(false);
            const { onCancel } = this.props;
            if (onCancel) {
                onCancel.call(this, e);
            }
        };
        this.onVisibleChange = (visible) => {
            this.setVisible(visible);
        };
        this.saveTooltip = (node) => {
            this.tooltip = node;
        };
        this.renderOverlay = (popconfirmLocale) => {
            const { title, cancelText, okText, okType } = this.props;
            const prefixCls = this.getPrefixCls();
            return (React.createElement("div", null,
                React.createElement("div", { className: `${prefixCls}-inner-content` },
                    React.createElement("div", { className: `${prefixCls}-message` },
                        React.createElement(Icon, { type: "warning" }),
                        React.createElement("div", { className: `${prefixCls}-message-title` }, title)),
                    React.createElement("div", { className: `${prefixCls}-buttons` },
                        React.createElement(Button, { onClick: this.onCancel, size: "small" /* small */ }, cancelText || popconfirmLocale.cancelText),
                        React.createElement(Button, { onClick: this.onConfirm, type: okType, size: "small" /* small */ }, okText || popconfirmLocale.okText)))));
        };
        this.state = {
            visible: props.visible,
        };
    }
    componentWillReceiveProps(nextProps) {
        if ('visible' in nextProps) {
            this.setState({ visible: nextProps.visible });
        }
    }
    getPopupDomNode() {
        return this.tooltip.getPopupDomNode();
    }
    setVisible(visible) {
        const props = this.props;
        if (!('visible' in props)) {
            this.setState({ visible });
        }
        const { onVisibleChange } = props;
        if (onVisibleChange) {
            onVisibleChange(visible);
        }
    }
    getPrefixCls() {
        const { prefixCls } = this.props;
        return getPrefixCls('popover', prefixCls);
    }
    render() {
        const { placement, ...restProps } = this.props;
        const { visible } = this.state;
        const overlay = (React.createElement(LocaleReceiver, { componentName: "Popconfirm", defaultLocale: defaultLocale.Popconfirm }, this.renderOverlay));
        return (React.createElement(Tooltip, Object.assign({}, restProps, { prefixCls: this.getPrefixCls(), placement: placement, onVisibleChange: this.onVisibleChange, visible: visible, overlay: overlay, ref: this.saveTooltip })));
    }
}
Popconfirm.displayName = 'Popconfirm';
Popconfirm.defaultProps = {
    transitionName: 'zoom-big',
    placement: 'top',
    trigger: 'click',
    okType: 'primary',
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvcG9wY29uZmlybS9pbmRleC50c3giLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQWdDLE1BQU0sT0FBTyxDQUFDO0FBQ3ZFLE9BQU8sT0FBaUMsTUFBTSxZQUFZLENBQUM7QUFDM0QsT0FBTyxJQUFJLE1BQU0sU0FBUyxDQUFDO0FBQzNCLE9BQU8sTUFBTSxNQUFNLFdBQVcsQ0FBQztBQUUvQixPQUFPLGNBQWMsTUFBTSxtQ0FBbUMsQ0FBQztBQUMvRCxPQUFPLGFBQWEsTUFBTSw0QkFBNEIsQ0FBQztBQUV2RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBb0I1QyxNQUFNLENBQUMsT0FBTyxPQUFPLFVBQVcsU0FBUSxTQUEyQztJQVlqRixZQUFZLEtBQXNCO1FBQ2hDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztRQWlCZixjQUFTLEdBQXlDLENBQUMsQ0FBQyxFQUFFO1lBQ3BELElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFdkIsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDakMsSUFBSSxTQUFTLEVBQUU7Z0JBQ2IsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDekI7UUFDSCxDQUFDLENBQUM7UUFFRixhQUFRLEdBQXlDLENBQUMsQ0FBQyxFQUFFO1lBQ25ELElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7WUFFdkIsTUFBTSxFQUFFLFFBQVEsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDaEMsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDeEI7UUFDSCxDQUFDLENBQUM7UUFFRixvQkFBZSxHQUFHLENBQUMsT0FBZ0IsRUFBRSxFQUFFO1lBQ3JDLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsQ0FBQyxDQUFDO1FBY0YsZ0JBQVcsR0FBRyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQzFCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLENBQUMsQ0FBQztRQUVGLGtCQUFhLEdBQUcsQ0FBQyxnQkFBa0MsRUFBRSxFQUFFO1lBQ3JELE1BQU0sRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3pELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN0QyxPQUFPLENBQ0w7Z0JBQ0UsNkJBQUssU0FBUyxFQUFFLEdBQUcsU0FBUyxnQkFBZ0I7b0JBQzFDLDZCQUFLLFNBQVMsRUFBRSxHQUFHLFNBQVMsVUFBVTt3QkFDcEMsb0JBQUMsSUFBSSxJQUFDLElBQUksRUFBQyxTQUFTLEdBQUc7d0JBQ3ZCLDZCQUFLLFNBQVMsRUFBRSxHQUFHLFNBQVMsZ0JBQWdCLElBQUcsS0FBSyxDQUFPLENBQ3ZEO29CQUNOLDZCQUFLLFNBQVMsRUFBRSxHQUFHLFNBQVMsVUFBVTt3QkFDcEMsb0JBQUMsTUFBTSxJQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUkseUJBQ2pDLFVBQVUsSUFBSSxnQkFBZ0IsQ0FBQyxVQUFVLENBQ25DO3dCQUNULG9CQUFDLE1BQU0sSUFBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUkseUJBQ2hELE1BQU0sSUFBSSxnQkFBZ0IsQ0FBQyxNQUFNLENBQzNCLENBQ0wsQ0FDRixDQUNGLENBQ1AsQ0FBQztRQUNKLENBQUMsQ0FBQztRQTFFQSxJQUFJLENBQUMsS0FBSyxHQUFHO1lBQ1gsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1NBQ3ZCLENBQUM7SUFDSixDQUFDO0lBRUQseUJBQXlCLENBQUMsU0FBMEI7UUFDbEQsSUFBSSxTQUFTLElBQUksU0FBUyxFQUFFO1lBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxPQUFPLEVBQUUsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7U0FDL0M7SUFDSCxDQUFDO0lBRUQsZUFBZTtRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN4QyxDQUFDO0lBd0JELFVBQVUsQ0FBQyxPQUFnQjtRQUN6QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUMsRUFBRTtZQUN6QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztTQUM1QjtRQUVELE1BQU0sRUFBRSxlQUFlLEVBQUUsR0FBRyxLQUFLLENBQUM7UUFDbEMsSUFBSSxlQUFlLEVBQUU7WUFDbkIsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzFCO0lBQ0gsQ0FBQztJQTZCRCxZQUFZO1FBQ1YsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDakMsT0FBTyxZQUFZLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFRCxNQUFNO1FBQ0osTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDL0MsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDL0IsTUFBTSxPQUFPLEdBQUcsQ0FDZCxvQkFBQyxjQUFjLElBQUMsYUFBYSxFQUFDLFlBQVksRUFBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLFVBQVUsSUFDL0UsSUFBSSxDQUFDLGFBQWEsQ0FDSixDQUNsQixDQUFDO1FBRUYsT0FBTyxDQUNMLG9CQUFDLE9BQU8sb0JBQ0YsU0FBUyxJQUNiLFNBQVMsRUFBRSxJQUFJLENBQUMsWUFBWSxFQUFFLEVBQzlCLFNBQVMsRUFBRSxTQUFTLEVBQ3BCLGVBQWUsRUFBRSxJQUFJLENBQUMsZUFBZSxFQUNyQyxPQUFPLEVBQUUsT0FBTyxFQUNoQixPQUFPLEVBQUUsT0FBTyxFQUNoQixHQUFHLEVBQUUsSUFBSSxDQUFDLFdBQVcsSUFDckIsQ0FDSCxDQUFDO0lBQ0osQ0FBQzs7QUFuSE0sc0JBQVcsR0FBRyxZQUFZLENBQUM7QUFFM0IsdUJBQVksR0FBRztJQUNwQixjQUFjLEVBQUUsVUFBVTtJQUMxQixTQUFTLEVBQUUsS0FBSztJQUNoQixPQUFPLEVBQUUsT0FBTztJQUNoQixNQUFNLEVBQUUsU0FBUztDQUNsQixDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL3BvcGNvbmZpcm0vaW5kZXgudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQsIFJlYWN0Tm9kZSwgTW91c2VFdmVudEhhbmRsZXIgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgVG9vbHRpcCwgeyBBYnN0cmFjdFRvb2x0aXBQcm9wcyB9IGZyb20gJy4uL3Rvb2x0aXAnO1xuaW1wb3J0IEljb24gZnJvbSAnLi4vaWNvbic7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2J1dHRvbic7XG5pbXBvcnQgeyBCdXR0b25UeXBlIH0gZnJvbSAnLi4vYnV0dG9uL0J1dHRvbic7XG5pbXBvcnQgTG9jYWxlUmVjZWl2ZXIgZnJvbSAnLi4vbG9jYWxlLXByb3ZpZGVyL0xvY2FsZVJlY2VpdmVyJztcbmltcG9ydCBkZWZhdWx0TG9jYWxlIGZyb20gJy4uL2xvY2FsZS1wcm92aWRlci9kZWZhdWx0JztcbmltcG9ydCB7IFNpemUgfSBmcm9tICcuLi9fdXRpbC9lbnVtJztcbmltcG9ydCB7IGdldFByZWZpeENscyB9IGZyb20gJy4uL2NvbmZpZ3VyZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUG9wY29uZmlybVByb3BzIGV4dGVuZHMgQWJzdHJhY3RUb29sdGlwUHJvcHMge1xuICB0aXRsZTogUmVhY3ROb2RlO1xuICBvbkNvbmZpcm0/OiBNb3VzZUV2ZW50SGFuZGxlcjxhbnk+O1xuICBvbkNhbmNlbD86IE1vdXNlRXZlbnRIYW5kbGVyPGFueT47XG4gIG9rVGV4dD86IFJlYWN0Tm9kZTtcbiAgb2tUeXBlPzogQnV0dG9uVHlwZTtcbiAgY2FuY2VsVGV4dD86IFJlYWN0Tm9kZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3Bjb25maXJtU3RhdGUge1xuICB2aXNpYmxlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQb3Bjb25maXJtTG9jYWxlIHtcbiAgb2tUZXh0OiBzdHJpbmc7XG4gIGNhbmNlbFRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wY29uZmlybSBleHRlbmRzIENvbXBvbmVudDxQb3Bjb25maXJtUHJvcHMsIFBvcGNvbmZpcm1TdGF0ZT4ge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnUG9wY29uZmlybSc7XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICB0cmFuc2l0aW9uTmFtZTogJ3pvb20tYmlnJyxcbiAgICBwbGFjZW1lbnQ6ICd0b3AnLFxuICAgIHRyaWdnZXI6ICdjbGljaycsXG4gICAgb2tUeXBlOiAncHJpbWFyeScsXG4gIH07XG5cbiAgcHJpdmF0ZSB0b29sdGlwOiBhbnk7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFBvcGNvbmZpcm1Qcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2aXNpYmxlOiBwcm9wcy52aXNpYmxlLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogUG9wY29uZmlybVByb3BzKSB7XG4gICAgaWYgKCd2aXNpYmxlJyBpbiBuZXh0UHJvcHMpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyB2aXNpYmxlOiBuZXh0UHJvcHMudmlzaWJsZSB9KTtcbiAgICB9XG4gIH1cblxuICBnZXRQb3B1cERvbU5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9vbHRpcC5nZXRQb3B1cERvbU5vZGUoKTtcbiAgfVxuXG4gIG9uQ29uZmlybTogTW91c2VFdmVudEhhbmRsZXI8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0gZSA9PiB7XG4gICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgIGNvbnN0IHsgb25Db25maXJtIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChvbkNvbmZpcm0pIHtcbiAgICAgIG9uQ29uZmlybS5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcblxuICBvbkNhbmNlbDogTW91c2VFdmVudEhhbmRsZXI8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0gZSA9PiB7XG4gICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgIGNvbnN0IHsgb25DYW5jZWwgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKG9uQ2FuY2VsKSB7XG4gICAgICBvbkNhbmNlbC5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcblxuICBvblZpc2libGVDaGFuZ2UgPSAodmlzaWJsZTogYm9vbGVhbikgPT4ge1xuICAgIHRoaXMuc2V0VmlzaWJsZSh2aXNpYmxlKTtcbiAgfTtcblxuICBzZXRWaXNpYmxlKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKCEoJ3Zpc2libGUnIGluIHByb3BzKSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IHZpc2libGUgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBvblZpc2libGVDaGFuZ2UgfSA9IHByb3BzO1xuICAgIGlmIChvblZpc2libGVDaGFuZ2UpIHtcbiAgICAgIG9uVmlzaWJsZUNoYW5nZSh2aXNpYmxlKTtcbiAgICB9XG4gIH1cblxuICBzYXZlVG9vbHRpcCA9IChub2RlOiBhbnkpID0+IHtcbiAgICB0aGlzLnRvb2x0aXAgPSBub2RlO1xuICB9O1xuXG4gIHJlbmRlck92ZXJsYXkgPSAocG9wY29uZmlybUxvY2FsZTogUG9wY29uZmlybUxvY2FsZSkgPT4ge1xuICAgIGNvbnN0IHsgdGl0bGUsIGNhbmNlbFRleHQsIG9rVGV4dCwgb2tUeXBlIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHByZWZpeENscyA9IHRoaXMuZ2V0UHJlZml4Q2xzKCk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWlubmVyLWNvbnRlbnRgfT5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1tZXNzYWdlYH0+XG4gICAgICAgICAgICA8SWNvbiB0eXBlPVwid2FybmluZ1wiIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1tZXNzYWdlLXRpdGxlYH0+e3RpdGxlfTwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWJ1dHRvbnNgfT5cbiAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17dGhpcy5vbkNhbmNlbH0gc2l6ZT17U2l6ZS5zbWFsbH0+XG4gICAgICAgICAgICAgIHtjYW5jZWxUZXh0IHx8IHBvcGNvbmZpcm1Mb2NhbGUuY2FuY2VsVGV4dH1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPEJ1dHRvbiBvbkNsaWNrPXt0aGlzLm9uQ29uZmlybX0gdHlwZT17b2tUeXBlfSBzaXplPXtTaXplLnNtYWxsfT5cbiAgICAgICAgICAgICAge29rVGV4dCB8fCBwb3Bjb25maXJtTG9jYWxlLm9rVGV4dH1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH07XG5cbiAgZ2V0UHJlZml4Q2xzKCkge1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiBnZXRQcmVmaXhDbHMoJ3BvcG92ZXInLCBwcmVmaXhDbHMpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgcGxhY2VtZW50LCAuLi5yZXN0UHJvcHMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB2aXNpYmxlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IG92ZXJsYXkgPSAoXG4gICAgICA8TG9jYWxlUmVjZWl2ZXIgY29tcG9uZW50TmFtZT1cIlBvcGNvbmZpcm1cIiBkZWZhdWx0TG9jYWxlPXtkZWZhdWx0TG9jYWxlLlBvcGNvbmZpcm19PlxuICAgICAgICB7dGhpcy5yZW5kZXJPdmVybGF5fVxuICAgICAgPC9Mb2NhbGVSZWNlaXZlcj5cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxUb29sdGlwXG4gICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICAgIHByZWZpeENscz17dGhpcy5nZXRQcmVmaXhDbHMoKX1cbiAgICAgICAgcGxhY2VtZW50PXtwbGFjZW1lbnR9XG4gICAgICAgIG9uVmlzaWJsZUNoYW5nZT17dGhpcy5vblZpc2libGVDaGFuZ2V9XG4gICAgICAgIHZpc2libGU9e3Zpc2libGV9XG4gICAgICAgIG92ZXJsYXk9e292ZXJsYXl9XG4gICAgICAgIHJlZj17dGhpcy5zYXZlVG9vbHRpcH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9