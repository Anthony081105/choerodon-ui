import React from 'react';
import moment from 'moment';
import classNames from 'classnames';
import DaysView from './DaysView';
import { $l } from '../locale-context';
import { stopEvent } from '../_util/EventManager';
export default class WeeksView extends DaysView {
    handleKeyDownLeft(e) {
        stopEvent(e);
        if (e.altKey) {
            this.changeViewMode("month" /* month */);
        }
        else {
            this.changeSelectedDate(this.getCloneDate().subtract(1, 'M'));
        }
    }
    handleKeyDownRight(e) {
        stopEvent(e);
        if (!e.altKey) {
            this.changeSelectedDate(this.getCloneDate().add(1, 'M'));
        }
    }
    renderPanelBody() {
        const { prefixCls, props: { date, renderer = this.renderCell }, } = this;
        const selected = date.clone();
        const firstDay = this.getFirstDay(date);
        const lastDay = firstDay.clone().add(42, 'd');
        const rows = [];
        let cells = [];
        while (firstDay.isBefore(lastDay)) {
            const currentDate = firstDay.clone();
            const className = classNames(`${prefixCls}-cell`, {
                [`${prefixCls}-selected`]: firstDay.isSame(selected, 'w'),
            });
            const text = String(currentDate.date());
            const dayProps = {
                key: firstDay.format('M_D'),
                className,
                children: this.renderInner(text),
            };
            if (cells.length === 0) {
                const weekProps = {
                    key: firstDay.format('Wo'),
                    className: `${className} ${prefixCls}-week-cell`,
                };
                cells.push(this.getWeekCell(weekProps, firstDay.week()));
            }
            cells.push(renderer(dayProps, text, currentDate, selected));
            if (cells.length === 8) {
                rows.push(React.createElement("tr", { onClick: this.handleCellClick.bind(this, currentDate), key: firstDay.format('M_D') }, cells));
                cells = [];
            }
            firstDay.add(1, 'd');
        }
        return rows;
    }
    choose(date) {
        super.choose(date.startOf('W'));
    }
    getPanelClass() {
        return `${this.prefixCls}-week-panel`;
    }
    renderFooter() {
        const { prefixCls } = this;
        return (React.createElement("div", { className: `${prefixCls}-footer` },
            React.createElement("a", { onClick: this.choose.bind(this, moment()) }, $l('DatePicker', 'this_week'))));
    }
    getWeekCell(props, text) {
        const { prefixCls } = this;
        return (React.createElement("td", Object.assign({}, props),
            React.createElement("div", { className: `${prefixCls}-cell-inner` },
                "W",
                text)));
    }
    getDaysOfWeek() {
        return [React.createElement("th", { key: "null" }, "\u00A0"), ...super.getDaysOfWeek()];
    }
}
WeeksView.displayName = 'WeeksView';
WeeksView.type = "week" /* week */;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMtcHJvL2RhdGUtcGlja2VyL1dlZWtzVmlldy50c3giLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFvQixNQUFNLE9BQU8sQ0FBQztBQUN6QyxPQUFPLE1BQWtCLE1BQU0sUUFBUSxDQUFDO0FBQ3hDLE9BQU8sVUFBVSxNQUFNLFlBQVksQ0FBQztBQUVwQyxPQUFPLFFBQVEsTUFBTSxZQUFZLENBQUM7QUFHbEMsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVsRCxNQUFNLENBQUMsT0FBTyxPQUFPLFNBQVUsU0FBUSxRQUFRO0lBSzdDLGlCQUFpQixDQUFDLENBQUM7UUFDakIsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2IsSUFBSSxDQUFDLENBQUMsTUFBTSxFQUFFO1lBQ1osSUFBSSxDQUFDLGNBQWMscUJBQWdCLENBQUM7U0FDckM7YUFBTTtZQUNMLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQy9EO0lBQ0gsQ0FBQztJQUVELGtCQUFrQixDQUFDLENBQUM7UUFDbEIsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2IsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUU7WUFDYixJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUMxRDtJQUNILENBQUM7SUFFRCxlQUFlO1FBQ2IsTUFBTSxFQUNKLFNBQVMsRUFDVCxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxHQUFHLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FDNUMsR0FBRyxJQUFJLENBQUM7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R0FBRyxJQUFJLENBQUM7UUFDM0IsT0FBTyxDQUNMLDRDQUFRLEtBQUs7WUFDWCw2QkFBSyxTQUFTLEVBQUUsR0FBRyxTQUFTLGFBQWE7O2dCQUFJLElBQUksQ0FBTyxDQUNyRCxDQUNOLENBQUM7SUFDSixDQUFDO0lBRUQsYUFBYTtRQUNYLE9BQU8sQ0FBQyw0QkFBSSxHQUFHLEVBQUMsTUFBTSxhQUFZLEVBQUUsR0FBRyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztJQUNoRSxDQUFDOztBQWxHTSxxQkFBVyxHQUFHLFdBQVcsQ0FBQztBQUUxQixjQUFJLHFCQUFrQiIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvaHVpaHVhd2svRG9jdW1lbnRzL29wdC9jaG9lcm9kb24tdWkvY29tcG9uZW50cy1wcm8vZGF0ZS1waWNrZXIvV2Vla3NWaWV3LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IG1vbWVudCwgeyBNb21lbnQgfSBmcm9tICdtb21lbnQnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgeyBEYXRlUGlja2VyS2V5Ym9hcmRFdmVudCB9IGZyb20gJy4vRGF0ZVBpY2tlcic7XG5pbXBvcnQgRGF5c1ZpZXcgZnJvbSAnLi9EYXlzVmlldyc7XG5pbXBvcnQgeyBWaWV3TW9kZSB9IGZyb20gJy4vZW51bSc7XG5pbXBvcnQgeyBGaWVsZFR5cGUgfSBmcm9tICcuLi9kYXRhLXNldC9lbnVtJztcbmltcG9ydCB7ICRsIH0gZnJvbSAnLi4vbG9jYWxlLWNvbnRleHQnO1xuaW1wb3J0IHsgc3RvcEV2ZW50IH0gZnJvbSAnLi4vX3V0aWwvRXZlbnRNYW5hZ2VyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2Vla3NWaWV3IGV4dGVuZHMgRGF5c1ZpZXcgaW1wbGVtZW50cyBEYXRlUGlja2VyS2V5Ym9hcmRFdmVudCB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdXZWVrc1ZpZXcnO1xuXG4gIHN0YXRpYyB0eXBlID0gRmllbGRUeXBlLndlZWs7XG5cbiAgaGFuZGxlS2V5RG93bkxlZnQoZSkge1xuICAgIHN0b3BFdmVudChlKTtcbiAgICBpZiAoZS5hbHRLZXkpIHtcbiAgICAgIHRoaXMuY2hhbmdlVmlld01vZGUoVmlld01vZGUubW9udGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNoYW5nZVNlbGVjdGVkRGF0ZSh0aGlzLmdldENsb25lRGF0ZSgpLnN1YnRyYWN0KDEsICdNJykpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUtleURvd25SaWdodChlKSB7XG4gICAgc3RvcEV2ZW50KGUpO1xuICAgIGlmICghZS5hbHRLZXkpIHtcbiAgICAgIHRoaXMuY2hhbmdlU2VsZWN0ZWREYXRlKHRoaXMuZ2V0Q2xvbmVEYXRlKCkuYWRkKDEsICdNJykpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlclBhbmVsQm9keSgpOiBSZWFjdE5vZGUge1xuICAgIGNvbnN0IHtcbiAgICAgIHByZWZpeENscyxcbiAgICAgIHByb3BzOiB7IGRhdGUsIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJDZWxsIH0sXG4gICAgfSA9IHRoaXM7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSBkYXRlLmNsb25lKCk7XG4gICAgY29uc3QgZmlyc3REYXkgPSB0aGlzLmdldEZpcnN0RGF5KGRhdGUpO1xuICAgIGNvbnN0IGxhc3REYXkgPSBmaXJzdERheS5jbG9uZSgpLmFkZCg0MiwgJ2QnKTtcbiAgICBjb25zdCByb3dzOiBSZWFjdE5vZGVbXSA9IFtdO1xuICAgIGxldCBjZWxsczogUmVhY3ROb2RlW10gPSBbXTtcblxuICAgIHdoaWxlIChmaXJzdERheS5pc0JlZm9yZShsYXN0RGF5KSkge1xuICAgICAgY29uc3QgY3VycmVudERhdGUgPSBmaXJzdERheS5jbG9uZSgpO1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gY2xhc3NOYW1lcyhgJHtwcmVmaXhDbHN9LWNlbGxgLCB7XG4gICAgICAgIFtgJHtwcmVmaXhDbHN9LXNlbGVjdGVkYF06IGZpcnN0RGF5LmlzU2FtZShzZWxlY3RlZCwgJ3cnKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0ZXh0ID0gU3RyaW5nKGN1cnJlbnREYXRlLmRhdGUoKSk7XG5cbiAgICAgIGNvbnN0IGRheVByb3BzOiBhbnkgPSB7XG4gICAgICAgIGtleTogZmlyc3REYXkuZm9ybWF0KCdNX0QnKSxcbiAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICBjaGlsZHJlbjogdGhpcy5yZW5kZXJJbm5lcih0ZXh0KSxcbiAgICAgIH07XG5cbiAgICAgIGlmIChjZWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3Qgd2Vla1Byb3BzOiBhbnkgPSB7XG4gICAgICAgICAga2V5OiBmaXJzdERheS5mb3JtYXQoJ1dvJyksXG4gICAgICAgICAgY2xhc3NOYW1lOiBgJHtjbGFzc05hbWV9ICR7cHJlZml4Q2xzfS13ZWVrLWNlbGxgLFxuICAgICAgICB9O1xuICAgICAgICBjZWxscy5wdXNoKHRoaXMuZ2V0V2Vla0NlbGwod2Vla1Byb3BzLCBmaXJzdERheS53ZWVrKCkpKTtcbiAgICAgIH1cblxuICAgICAgY2VsbHMucHVzaChyZW5kZXJlcihkYXlQcm9wcywgdGV4dCwgY3VycmVudERhdGUsIHNlbGVjdGVkKSk7XG5cbiAgICAgIGlmIChjZWxscy5sZW5ndGggPT09IDgpIHtcbiAgICAgICAgcm93cy5wdXNoKFxuICAgICAgICAgIDx0ciBvbkNsaWNrPXt0aGlzLmhhbmRsZUNlbGxDbGljay5iaW5kKHRoaXMsIGN1cnJlbnREYXRlKX0ga2V5PXtmaXJzdERheS5mb3JtYXQoJ01fRCcpfT5cbiAgICAgICAgICAgIHtjZWxsc31cbiAgICAgICAgICA8L3RyPixcbiAgICAgICAgKTtcbiAgICAgICAgY2VsbHMgPSBbXTtcbiAgICAgIH1cblxuICAgICAgZmlyc3REYXkuYWRkKDEsICdkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICBjaG9vc2UoZGF0ZTogTW9tZW50KSB7XG4gICAgc3VwZXIuY2hvb3NlKGRhdGUuc3RhcnRPZignVycpKTtcbiAgfVxuXG4gIGdldFBhbmVsQ2xhc3MoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5wcmVmaXhDbHN9LXdlZWstcGFuZWxgO1xuICB9XG5cbiAgcmVuZGVyRm9vdGVyKCk6IFJlYWN0Tm9kZSB7XG4gICAgY29uc3QgeyBwcmVmaXhDbHMgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWZvb3RlcmB9PlxuICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLmNob29zZS5iaW5kKHRoaXMsIG1vbWVudCgpKX0+eyRsKCdEYXRlUGlja2VyJywgJ3RoaXNfd2VlaycpfTwvYT5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBnZXRXZWVrQ2VsbChwcm9wczogb2JqZWN0LCB0ZXh0OiBzdHJpbmcpIHtcbiAgICBjb25zdCB7IHByZWZpeENscyB9ID0gdGhpcztcbiAgICByZXR1cm4gKFxuICAgICAgPHRkIHsuLi5wcm9wc30+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWNlbGwtaW5uZXJgfT5Xe3RleHR9PC9kaXY+XG4gICAgICA8L3RkPlxuICAgICk7XG4gIH1cblxuICBnZXREYXlzT2ZXZWVrKCk6IFJlYWN0Tm9kZVtdIHtcbiAgICByZXR1cm4gWzx0aCBrZXk9XCJudWxsXCI+Jm5ic3A7PC90aD4sIC4uLnN1cGVyLmdldERheXNPZldlZWsoKV07XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==