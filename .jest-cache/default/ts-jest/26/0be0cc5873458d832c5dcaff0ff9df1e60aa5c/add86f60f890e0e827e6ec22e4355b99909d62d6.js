import React, { Component, } from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';
import omit from 'lodash/omit';
import warning from '../_util/warning';
import FormItem from './FormItem';
import { FIELD_DATA_PROP, FIELD_META_PROP } from './constants';
import { createFormField } from '../rc-components/form';
import createDOMForm from '../rc-components/form/createDOMForm';
import PureRenderMixin from '../rc-components/util/PureRenderMixin';
import { getPrefixCls } from '../configure';
export default class Form extends Component {
    constructor(props) {
        super(props);
        warning(!props.form, 'It is unnecessary to pass `form` to `Form`');
    }
    shouldComponentUpdate(...args) {
        return PureRenderMixin.shouldComponentUpdate.apply(this, args);
    }
    getChildContext() {
        const { layout } = this.props;
        return {
            vertical: layout === 'vertical',
        };
    }
    render() {
        const { prefixCls: customizePrefixCls, hideRequiredMark, className = '', layout } = this.props;
        const prefixCls = getPrefixCls('form', customizePrefixCls);
        const formClassName = classNames(prefixCls, {
            [`${prefixCls}-${layout}`]: layout,
            [`${prefixCls}-hide-required-mark`]: hideRequiredMark,
        }, className);
        const formProps = omit(this.props, [
            'prefixCls',
            'className',
            'layout',
            'form',
            'hideRequiredMark',
        ]);
        return React.createElement("form", Object.assign({}, formProps, { className: formClassName }));
    }
}
Form.displayName = 'Form';
Form.defaultProps = {
    layout: "horizontal" /* horizontal */,
    hideRequiredMark: false,
    onSubmit(e) {
        e.preventDefault();
    },
};
Form.propTypes = {
    prefixCls: PropTypes.string,
    layout: PropTypes.oneOf(["horizontal" /* horizontal */, "inline" /* inline */, "vertical" /* vertical */]),
    children: PropTypes.any,
    onSubmit: PropTypes.func,
    hideRequiredMark: PropTypes.bool,
};
Form.childContextTypes = {
    vertical: PropTypes.bool,
};
Form.Item = FormItem;
Form.createFormField = createFormField;
Form.create = function (options = {}) {
    return createDOMForm({
        fieldNameProp: 'id',
        ...options,
        fieldMetaProp: FIELD_META_PROP,
        fieldDataProp: FIELD_DATA_PROP,
    });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvZm9ybS9Gb3JtLnRzeCIsIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxFQUNaLFNBQVMsR0FPVixNQUFNLE9BQU8sQ0FBQztBQUNmLE9BQU8sU0FBUyxNQUFNLFlBQVksQ0FBQztBQUNuQyxPQUFPLFVBQVUsTUFBTSxZQUFZLENBQUM7QUFDcEMsT0FBTyxJQUFJLE1BQU0sYUFBYSxDQUFDO0FBQy9CLE9BQU8sT0FBTyxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZDLE9BQU8sUUFBUSxNQUFNLFlBQVksQ0FBQztBQUNsQyxPQUFPLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUMvRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDeEQsT0FBTyxhQUFhLE1BQU0scUNBQXFDLENBQUM7QUFDaEUsT0FBTyxlQUFlLE1BQU0sdUNBQXVDLENBQUM7QUFFcEUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGNBQWMsQ0FBQztBQXFINUMsTUFBTSxDQUFDLE9BQU8sT0FBTyxJQUFLLFNBQVEsU0FBeUI7SUFzQ3pELFlBQVksS0FBZ0I7UUFDMUIsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRWIsT0FBTyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSw0Q0FBNEMsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxHQUFHLElBQVc7UUFDbEMsT0FBTyxlQUFlLENBQUMscUJBQXFCLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQsZUFBZTtRQUNiLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzlCLE9BQU87WUFDTCxRQUFRLEVBQUUsTUFBTSxLQUFLLFVBQVU7U0FDaEMsQ0FBQztJQUNKLENBQUM7SUFFRCxNQUFNO1FBQ0osTUFBTSxFQUFFLFNBQVMsRUFBRSxrQkFBa0IsRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLEdBQUcsRUFBRSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDL0YsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUFDLE1BQU0sRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1FBQzNELE1BQU0sYUFBYSxHQUFHLFVBQVUsQ0FDOUIsU0FBUyxFQUNUO1lBQ0UsQ0FBQyxHQUFHLFNBQVMsSUFBSSxNQUFNLEVBQUUsQ0FBQyxFQUFFLE1BQU07WUFDbEMsQ0FBQyxHQUFHLFNBQVMscUJBQXFCLENBQUMsRUFBRSxnQkFBZ0I7U0FDdEQsRUFDRCxTQUFTLENBQ1YsQ0FBQztRQUVGLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2pDLFdBQVc7WUFDWCxXQUFXO1lBQ1gsUUFBUTtZQUNSLE1BQU07WUFDTixrQkFBa0I7U0FDbkIsQ0FBQyxDQUFDO1FBRUgsT0FBTyw4Q0FBVSxTQUFTLElBQUUsU0FBUyxFQUFFLGFBQWEsSUFBSSxDQUFDO0lBQzNELENBQUM7O0FBM0VNLGdCQUFXLEdBQUcsTUFBTSxDQUFDO0FBRXJCLGlCQUFZLEdBQUc7SUFDcEIsTUFBTSwrQkFBdUI7SUFDN0IsZ0JBQWdCLEVBQUUsS0FBSztJQUN2QixRQUFRLENBQUMsQ0FBNkI7UUFDcEMsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3JCLENBQUM7Q0FDRixDQUFDO0FBRUssY0FBUyxHQUFHO0lBQ2pCLFNBQVMsRUFBRSxTQUFTLENBQUMsTUFBTTtJQUMzQixNQUFNLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxpRkFBK0QsQ0FBQztJQUN4RixRQUFRLEVBQUUsU0FBUyxDQUFDLEdBQUc7SUFDdkIsUUFBUSxFQUFFLFNBQVMsQ0FBQyxJQUFJO0lBQ3hCLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxJQUFJO0NBQ2pDLENBQUM7QUFFSyxzQkFBaUIsR0FBRztJQUN6QixRQUFRLEVBQUUsU0FBUyxDQUFDLElBQUk7Q0FDekIsQ0FBQztBQUVLLFNBQUksR0FBRyxRQUFRLENBQUM7QUFFaEIsb0JBQWUsR0FBRyxlQUFlLENBQUM7QUFFbEMsV0FBTSxHQUFHLFVBQ2QsVUFBdUMsRUFBRTtJQUV6QyxPQUFPLGFBQWEsQ0FBQztRQUNuQixhQUFhLEVBQUUsSUFBSTtRQUNuQixHQUFHLE9BQU87UUFDVixhQUFhLEVBQUUsZUFBZTtRQUM5QixhQUFhLEVBQUUsZUFBZTtLQUMvQixDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2h1aWh1YXdrL0RvY3VtZW50cy9vcHQvY2hvZXJvZG9uLXVpL2NvbXBvbmVudHMvZm9ybS9Gb3JtLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRDbGFzcyxcbiAgQ1NTUHJvcGVydGllcyxcbiAgRm9ybUV2ZW50LFxuICBGb3JtRXZlbnRIYW5kbGVyLFxuICBSZWFjdE5vZGUsXG4gIFNGQyxcbn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG9taXQgZnJvbSAnbG9kYXNoL29taXQnO1xuaW1wb3J0IHdhcm5pbmcgZnJvbSAnLi4vX3V0aWwvd2FybmluZyc7XG5pbXBvcnQgRm9ybUl0ZW0gZnJvbSAnLi9Gb3JtSXRlbSc7XG5pbXBvcnQgeyBGSUVMRF9EQVRBX1BST1AsIEZJRUxEX01FVEFfUFJPUCB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGNyZWF0ZUZvcm1GaWVsZCB9IGZyb20gJy4uL3JjLWNvbXBvbmVudHMvZm9ybSc7XG5pbXBvcnQgY3JlYXRlRE9NRm9ybSBmcm9tICcuLi9yYy1jb21wb25lbnRzL2Zvcm0vY3JlYXRlRE9NRm9ybSc7XG5pbXBvcnQgUHVyZVJlbmRlck1peGluIGZyb20gJy4uL3JjLWNvbXBvbmVudHMvdXRpbC9QdXJlUmVuZGVyTWl4aW4nO1xuaW1wb3J0IHsgRm9ybUxheW91dCB9IGZyb20gJy4vZW51bSc7XG5pbXBvcnQgeyBnZXRQcmVmaXhDbHMgfSBmcm9tICcuLi9jb25maWd1cmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1DcmVhdGVPcHRpb248VD4ge1xuICBvbkZpZWxkc0NoYW5nZT86IChwcm9wczogVCwgZmllbGRzOiBBcnJheTxhbnk+KSA9PiB2b2lkO1xuICBvblZhbHVlc0NoYW5nZT86IChwcm9wczogVCwgdmFsdWVzOiBhbnkpID0+IHZvaWQ7XG4gIG1hcFByb3BzVG9GaWVsZHM/OiAocHJvcHM6IFQpID0+IHZvaWQ7XG4gIHdpdGhSZWY/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1Qcm9wcyB7XG4gIGxheW91dD86IEZvcm1MYXlvdXQ7XG4gIGZvcm0/OiBXcmFwcGVkRm9ybVV0aWxzO1xuICBvblN1Ym1pdD86IEZvcm1FdmVudEhhbmRsZXI8YW55PjtcbiAgc3R5bGU/OiBDU1NQcm9wZXJ0aWVzO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gIHByZWZpeENscz86IHN0cmluZztcbiAgaGlkZVJlcXVpcmVkTWFyaz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIFZhbGlkYXRpb25SdWxlID0ge1xuICAvKiogdmFsaWRhdGlvbiBlcnJvciBtZXNzYWdlICovXG4gIG1lc3NhZ2U/OiBzdHJpbmc7XG4gIC8qKiBidWlsdC1pbiB2YWxpZGF0aW9uIHR5cGUsIGF2YWlsYWJsZSBvcHRpb25zOiBodHRwczovL2dpdGh1Yi5jb20veWltaW5naGUvYXN5bmMtdmFsaWRhdG9yI3R5cGUgKi9cbiAgdHlwZT86IHN0cmluZztcbiAgLyoqIGluZGljYXRlcyB3aGV0aGVyIGZpZWxkIGlzIHJlcXVpcmVkICovXG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgLyoqIHRyZWF0IHJlcXVpcmVkIGZpZWxkcyB0aGF0IG9ubHkgY29udGFpbiB3aGl0ZXNwYWNlIGFzIGVycm9ycyAqL1xuICB3aGl0ZXNwYWNlPzogYm9vbGVhbjtcbiAgLyoqIHZhbGlkYXRlIHRoZSBleGFjdCBsZW5ndGggb2YgYSBmaWVsZCAqL1xuICBsZW4/OiBudW1iZXI7XG4gIC8qKiB2YWxpZGF0ZSB0aGUgbWluIGxlbmd0aCBvZiBhIGZpZWxkICovXG4gIG1pbj86IG51bWJlcjtcbiAgLyoqIHZhbGlkYXRlIHRoZSBtYXggbGVuZ3RoIG9mIGEgZmllbGQgKi9cbiAgbWF4PzogbnVtYmVyO1xuICAvKiogdmFsaWRhdGUgdGhlIHZhbHVlIGZyb20gYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyAqL1xuICBlbnVtPzogc3RyaW5nIHwgc3RyaW5nW107XG4gIC8qKiB2YWxpZGF0ZSBmcm9tIGEgcmVndWxhciBleHByZXNzaW9uICovXG4gIHBhdHRlcm4/OiBSZWdFeHA7XG4gIC8qKiB0cmFuc2Zvcm0gYSB2YWx1ZSBiZWZvcmUgdmFsaWRhdGlvbiAqL1xuICB0cmFuc2Zvcm0/OiAodmFsdWU6IGFueSkgPT4gYW55O1xuICAvKiogY3VzdG9tIHZhbGlkYXRlIGZ1bmN0aW9uIChOb3RlOiBjYWxsYmFjayBtdXN0IGJlIGNhbGxlZCkgKi9cbiAgdmFsaWRhdG9yPzogKHJ1bGU6IGFueSwgdmFsdWU6IGFueSwgY2FsbGJhY2s6IGFueSwgc291cmNlPzogYW55LCBvcHRpb25zPzogYW55KSA9PiBhbnk7XG59O1xuXG5leHBvcnQgdHlwZSBWYWxpZGF0ZUNhbGxiYWNrID0gKGVycm9yczogYW55LCB2YWx1ZXM6IGFueSwgbW9kaWZ5PzogYm9vbGVhbikgPT4gdm9pZDtcblxuZXhwb3J0IHR5cGUgR2V0RmllbGREZWNvcmF0b3JPcHRpb25zID0ge1xuICAvKiog5a2Q6IqC54K555qE5YC855qE5bGe5oCn77yM5aaCIENoZWNrYm94IOeahOaYryAnY2hlY2tlZCcgKi9cbiAgdmFsdWVQcm9wTmFtZT86IHN0cmluZztcbiAgLyoqIOWtkOiKgueCueeahOWIneWni+WAvO+8jOexu+Wei+OAgeWPr+mAieWAvOWdh+eUseWtkOiKgueCueWGs+WumiAqL1xuICBpbml0aWFsVmFsdWU/OiBhbnk7XG4gIC8qKiDmlLbpm4blrZDoioLngrnnmoTlgLznmoTml7bmnLogKi9cbiAgdHJpZ2dlcj86IHN0cmluZztcbiAgLyoqIOWPr+S7peaKiiBvbkNoYW5nZSDnmoTlj4LmlbDovazljJbkuLrmjqfku7bnmoTlgLzvvIzkvovlpoIgRGF0ZVBpY2tlciDlj6/orr7kuLrvvJooZGF0ZSwgZGF0ZVN0cmluZykgPT4gZGF0ZVN0cmluZyAqL1xuICBnZXRWYWx1ZUZyb21FdmVudD86ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55O1xuICAvKiog5qCh6aqM5a2Q6IqC54K55YC855qE5pe25py6ICovXG4gIHZhbGlkYXRlVHJpZ2dlcj86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKiog5qCh6aqM6KeE5YiZ77yM5Y+C6KeBIFthc3luYy12YWxpZGF0b3JdKGh0dHBzOi8vZ2l0aHViLmNvbS95aW1pbmdoZS9hc3luYy12YWxpZGF0b3IpICovXG4gIHJ1bGVzPzogVmFsaWRhdGlvblJ1bGVbXTtcbiAgLyoqIOaYr+WQpuWSjOWFtuS7luaOp+S7tuS6kuaWpe+8jOeJueWIq+eUqOS6jiBSYWRpbyDljZXpgInmjqfku7YgKi9cbiAgZXhjbHVzaXZlPzogYm9vbGVhbjtcbiAgLyoqIE5vcm1hbGl6ZSB2YWx1ZSB0byBmb3JtIGNvbXBvbmVudCAqL1xuICBub3JtYWxpemU/OiAodmFsdWU6IGFueSwgcHJldlZhbHVlOiBhbnksIGFsbFZhbHVlczogYW55KSA9PiBhbnk7XG4gIC8qKiBXaGV0aGVyIHN0b3AgdmFsaWRhdGUgb24gZmlyc3QgcnVsZSBvZiBlcnJvciBmb3IgdGhpcyBmaWVsZC4gICovXG4gIHZhbGlkYXRlRmlyc3Q/OiBib29sZWFuO1xufTtcblxuLy8gZnVuY3Rpb24gY3JlYXRlXG5leHBvcnQgdHlwZSBXcmFwcGVkRm9ybVV0aWxzID0ge1xuICAvKiog6I635Y+W5LiA57uE6L6T5YWl5o6n5Lu255qE5YC877yM5aaC5LiN5Lyg5YWl5Y+C5pWw77yM5YiZ6I635Y+W5YWo6YOo57uE5Lu255qE5YC8ICovXG4gIGdldEZpZWxkc1ZhbHVlKGZpZWxkTmFtZXM/OiBBcnJheTxzdHJpbmc+KTogT2JqZWN0O1xuICAvKiog6I635Y+W5LiA5Liq6L6T5YWl5o6n5Lu255qE5YC8ICovXG4gIGdldEZpZWxkVmFsdWUoZmllbGROYW1lOiBzdHJpbmcpOiBhbnk7XG4gIC8qKiDorr7nva7kuIDnu4TovpPlhaXmjqfku7bnmoTlgLwgKi9cbiAgc2V0RmllbGRzVmFsdWUob2JqOiBPYmplY3QpOiB2b2lkO1xuICAvKiog6K6+572u5LiA57uE6L6T5YWl5o6n5Lu255qE5YC8ICovXG4gIHNldEZpZWxkcyhvYmo6IE9iamVjdCk6IHZvaWQ7XG4gIC8qKiDmoKHpqozlubbojrflj5bkuIDnu4TovpPlhaXln5/nmoTlgLzkuI4gRXJyb3IgKi9cbiAgdmFsaWRhdGVGaWVsZHMoZmllbGROYW1lczogQXJyYXk8c3RyaW5nPiwgb3B0aW9uczogT2JqZWN0LCBjYWxsYmFjazogVmFsaWRhdGVDYWxsYmFjayk6IHZvaWQ7XG4gIHZhbGlkYXRlRmllbGRzKGZpZWxkTmFtZXM6IEFycmF5PHN0cmluZz4sIGNhbGxiYWNrOiBWYWxpZGF0ZUNhbGxiYWNrKTogdm9pZDtcbiAgdmFsaWRhdGVGaWVsZHMob3B0aW9uczogT2JqZWN0LCBjYWxsYmFjazogVmFsaWRhdGVDYWxsYmFjayk6IHZvaWQ7XG4gIHZhbGlkYXRlRmllbGRzKGNhbGxiYWNrOiBWYWxpZGF0ZUNhbGxiYWNrKTogdm9pZDtcbiAgdmFsaWRhdGVGaWVsZHMoKTogdm9pZDtcbiAgLyoqIOS4jiBgdmFsaWRhdGVGaWVsZHNgIOebuOS8vO+8jOS9huagoemqjOWujOWQju+8jOWmguaenOagoemqjOS4jemAmui/h+eahOiPnOWNleWfn+S4jeWcqOWPr+ingeiMg+WbtOWGhe+8jOWImeiHquWKqOa7muWKqOi/m+WPr+ingeiMg+WbtCAqL1xuICB2YWxpZGF0ZUZpZWxkc0FuZFNjcm9sbChcbiAgICBmaWVsZE5hbWVzPzogQXJyYXk8c3RyaW5nPixcbiAgICBvcHRpb25zPzogT2JqZWN0LFxuICAgIGNhbGxiYWNrPzogVmFsaWRhdGVDYWxsYmFjayxcbiAgKTogdm9pZDtcbiAgdmFsaWRhdGVGaWVsZHNBbmRTY3JvbGwoZmllbGROYW1lcz86IEFycmF5PHN0cmluZz4sIGNhbGxiYWNrPzogVmFsaWRhdGVDYWxsYmFjayk6IHZvaWQ7XG4gIHZhbGlkYXRlRmllbGRzQW5kU2Nyb2xsKG9wdGlvbnM/OiBPYmplY3QsIGNhbGxiYWNrPzogVmFsaWRhdGVDYWxsYmFjayk6IHZvaWQ7XG4gIHZhbGlkYXRlRmllbGRzQW5kU2Nyb2xsKGNhbGxiYWNrPzogVmFsaWRhdGVDYWxsYmFjayk6IHZvaWQ7XG4gIHZhbGlkYXRlRmllbGRzQW5kU2Nyb2xsKCk6IHZvaWQ7XG4gIC8qKiDojrflj5bmn5DkuKrovpPlhaXmjqfku7bnmoQgRXJyb3IgKi9cbiAgZ2V0RmllbGRFcnJvcihuYW1lOiBzdHJpbmcpOiBPYmplY3RbXTtcbiAgZ2V0RmllbGRzRXJyb3IobmFtZXM/OiBBcnJheTxzdHJpbmc+KTogT2JqZWN0O1xuICAvKiog5Yik5pat5LiA5Liq6L6T5YWl5o6n5Lu25piv5ZCm5Zyo5qCh6aqM54q25oCBICovXG4gIGlzRmllbGRWYWxpZGF0aW5nKG5hbWU6IHN0cmluZyk6IGJvb2xlYW47XG4gIGlzRmllbGRUb3VjaGVkKG5hbWU6IHN0cmluZyk6IGJvb2xlYW47XG4gIGlzRmllbGRzVG91Y2hlZChuYW1lcz86IEFycmF5PHN0cmluZz4pOiBib29sZWFuO1xuICAvKiog6YeN572u5LiA57uE6L6T5YWl5o6n5Lu255qE5YC85LiO54q25oCB77yM5aaC5LiN5Lyg5YWl5Y+C5pWw77yM5YiZ6YeN572u5omA5pyJ57uE5Lu2ICovXG4gIHJlc2V0RmllbGRzKG5hbWVzPzogQXJyYXk8c3RyaW5nPik6IHZvaWQ7XG4gIGlzTW9kaWZpZWRGaWVsZHMobmFtZXM/OiBBcnJheTxzdHJpbmc+KTogYm9vbGVhbjtcbiAgaXNNb2RpZmllZEZpZWxkKG5hbWU6IHN0cmluZyk6IGJvb2xlYW47XG4gIGdldEZpZWxkRGVjb3JhdG9yKGlkOiBzdHJpbmcsIG9wdGlvbnM/OiBHZXRGaWVsZERlY29yYXRvck9wdGlvbnMpOiAobm9kZTogUmVhY3ROb2RlKSA9PiBSZWFjdE5vZGU7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZvcm1Db21wb25lbnRQcm9wcyB7XG4gIGZvcm06IFdyYXBwZWRGb3JtVXRpbHM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50RGVjb3JhdG9yIHtcbiAgPFAgZXh0ZW5kcyBGb3JtQ29tcG9uZW50UHJvcHM+KGNvbXBvbmVudDogQ29tcG9uZW50Q2xhc3M8UD4gfCBTRkM8UD4pOiBDb21wb25lbnRDbGFzczxcbiAgICBPbWl0PFAsIGtleW9mIEZvcm1Db21wb25lbnRQcm9wcz5cbiAgPjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybSBleHRlbmRzIENvbXBvbmVudDxGb3JtUHJvcHMsIGFueT4ge1xuICBzdGF0aWMgZGlzcGxheU5hbWUgPSAnRm9ybSc7XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBsYXlvdXQ6IEZvcm1MYXlvdXQuaG9yaXpvbnRhbCxcbiAgICBoaWRlUmVxdWlyZWRNYXJrOiBmYWxzZSxcbiAgICBvblN1Ym1pdChlOiBGb3JtRXZlbnQ8SFRNTEZvcm1FbGVtZW50Pikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG4gIH07XG5cbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBwcmVmaXhDbHM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbGF5b3V0OiBQcm9wVHlwZXMub25lT2YoW0Zvcm1MYXlvdXQuaG9yaXpvbnRhbCwgRm9ybUxheW91dC5pbmxpbmUsIEZvcm1MYXlvdXQudmVydGljYWxdKSxcbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLmFueSxcbiAgICBvblN1Ym1pdDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgaGlkZVJlcXVpcmVkTWFyazogUHJvcFR5cGVzLmJvb2wsXG4gIH07XG5cbiAgc3RhdGljIGNoaWxkQ29udGV4dFR5cGVzID0ge1xuICAgIHZlcnRpY2FsOiBQcm9wVHlwZXMuYm9vbCxcbiAgfTtcblxuICBzdGF0aWMgSXRlbSA9IEZvcm1JdGVtO1xuXG4gIHN0YXRpYyBjcmVhdGVGb3JtRmllbGQgPSBjcmVhdGVGb3JtRmllbGQ7XG5cbiAgc3RhdGljIGNyZWF0ZSA9IGZ1bmN0aW9uPFRPd25Qcm9wcz4oXG4gICAgb3B0aW9uczogRm9ybUNyZWF0ZU9wdGlvbjxUT3duUHJvcHM+ID0ge30sXG4gICk6IENvbXBvbmVudERlY29yYXRvciB7XG4gICAgcmV0dXJuIGNyZWF0ZURPTUZvcm0oe1xuICAgICAgZmllbGROYW1lUHJvcDogJ2lkJyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBmaWVsZE1ldGFQcm9wOiBGSUVMRF9NRVRBX1BST1AsXG4gICAgICBmaWVsZERhdGFQcm9wOiBGSUVMRF9EQVRBX1BST1AsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IEZvcm1Qcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIHdhcm5pbmcoIXByb3BzLmZvcm0sICdJdCBpcyB1bm5lY2Vzc2FyeSB0byBwYXNzIGBmb3JtYCB0byBgRm9ybWAnKTtcbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZSguLi5hcmdzOiBhbnlbXSkge1xuICAgIHJldHVybiBQdXJlUmVuZGVyTWl4aW4uc2hvdWxkQ29tcG9uZW50VXBkYXRlLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIGNvbnN0IHsgbGF5b3V0IH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiB7XG4gICAgICB2ZXJ0aWNhbDogbGF5b3V0ID09PSAndmVydGljYWwnLFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBwcmVmaXhDbHM6IGN1c3RvbWl6ZVByZWZpeENscywgaGlkZVJlcXVpcmVkTWFyaywgY2xhc3NOYW1lID0gJycsIGxheW91dCB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBwcmVmaXhDbHMgPSBnZXRQcmVmaXhDbHMoJ2Zvcm0nLCBjdXN0b21pemVQcmVmaXhDbHMpO1xuICAgIGNvbnN0IGZvcm1DbGFzc05hbWUgPSBjbGFzc05hbWVzKFxuICAgICAgcHJlZml4Q2xzLFxuICAgICAge1xuICAgICAgICBbYCR7cHJlZml4Q2xzfS0ke2xheW91dH1gXTogbGF5b3V0LFxuICAgICAgICBbYCR7cHJlZml4Q2xzfS1oaWRlLXJlcXVpcmVkLW1hcmtgXTogaGlkZVJlcXVpcmVkTWFyayxcbiAgICAgIH0sXG4gICAgICBjbGFzc05hbWUsXG4gICAgKTtcblxuICAgIGNvbnN0IGZvcm1Qcm9wcyA9IG9taXQodGhpcy5wcm9wcywgW1xuICAgICAgJ3ByZWZpeENscycsXG4gICAgICAnY2xhc3NOYW1lJyxcbiAgICAgICdsYXlvdXQnLFxuICAgICAgJ2Zvcm0nLFxuICAgICAgJ2hpZGVSZXF1aXJlZE1hcmsnLFxuICAgIF0pO1xuXG4gICAgcmV0dXJuIDxmb3JtIHsuLi5mb3JtUHJvcHN9IGNsYXNzTmFtZT17Zm9ybUNsYXNzTmFtZX0gLz47XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==