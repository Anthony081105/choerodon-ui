b00b27a98f52378fc37accba384bdef4
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useNormal = useNormal;
exports.useAll = useAll;
exports.useSelected = useSelected;
exports.useCascade = useCascade;
exports.useDirty = useDirty;
exports.append = append;
exports.getOrderFields = getOrderFields;
exports.processToJSON = processToJSON;
exports.processValue = processValue;
exports.childrenInfoForDelete = childrenInfoForDelete;
exports.sortTree = sortTree;
exports.sliceTree = sliceTree;
exports.checkParentByInsert = checkParentByInsert;
exports.checkFieldType = checkFieldType;
exports.doExport = doExport;
exports.findBindFields = findBindFields;
exports.findBindField = findBindField;
exports.getFieldSorter = getFieldSorter;
exports.generateRecordJSONData = generateRecordJSONData;
exports.prepareSubmitData = prepareSubmitData;
exports.axiosConfigAdapter = axiosConfigAdapter;
exports.findRootParent = findRootParent;
exports.prepareForSubmit = prepareForSubmit;
exports.generateResponseData = generateResponseData;
exports.getRecordValue = getRecordValue;
exports.processIntlField = processIntlField;
exports.findBindFieldBy = findBindFieldBy;
exports.processFieldValue = processFieldValue;
exports.getLimit = getLimit;
exports.adapterDataToJSON = adapterDataToJSON;
exports.generateData = generateData;
exports.generateJSONData = generateJSONData;
exports.isDirtyRecord = isDirtyRecord;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _querystringify = _interopRequireDefault(require("querystringify"));

var _moment = _interopRequireWildcard(require("moment"));

var _mobx = require("mobx");

var _isBoolean = _interopRequireDefault(require("lodash/isBoolean"));

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _isString = _interopRequireDefault(require("lodash/isString"));

var _isArray = _interopRequireDefault(require("lodash/isArray"));

var _isNumber = _interopRequireDefault(require("lodash/isNumber"));

var _warning = _interopRequireDefault(require("choerodon-ui/lib/_util/warning"));

var _configure = require("choerodon-ui/lib/configure");

var _isNil = _interopRequireDefault(require("lodash/isNil"));

var _isEmpty = _interopRequireDefault(require("../_util/isEmpty"));

var ObjectChainValue = _interopRequireWildcard(require("../_util/ObjectChainValue"));

var _localeContext = _interopRequireWildcard(require("../locale-context"));

var _formatString = _interopRequireDefault(require("../formatter/formatString"));

var _formatNumber = _interopRequireDefault(require("../formatter/formatNumber"));

var _formatCurrency = _interopRequireDefault(require("../formatter/formatCurrency"));

var _utils = require("../number-field/utils");

function useNormal(dataToJSON) {
  return ["normal"
  /* normal */
  , "normal-self"
  /* 'normal-self' */
  ].includes(dataToJSON);
}

function useAll(dataToJSON) {
  return ["all"
  /* all */
  , "all-self"
  /* 'all-self' */
  ].includes(dataToJSON);
}

function useSelected(dataToJSON) {
  return ["selected"
  /* selected */
  , "selected-self"
  /* 'selected-self' */
  ].includes(dataToJSON);
}

function useCascade(dataToJSON) {
  return ["dirty"
  /* dirty */
  , "selected"
  /* selected */
  , "all"
  /* all */
  , "normal"
  /* normal */
  ].includes(dataToJSON);
}

function useDirty(dataToJSON) {
  return ["dirty"
  /* dirty */
  , "dirty-self"
  /* 'dirty-self' */
  ].includes(dataToJSON);
}

function append(url, suffix) {
  if (suffix) {
    return url + _querystringify["default"].stringify(suffix, url.indexOf('?') === -1);
  }

  return url;
}

function getOrderFields(fields) {
  return (0, _toConsumableArray2["default"])(fields.values()).filter(function (_ref) {
    var order = _ref.order;
    return order;
  });
}

function processToJSON(value) {
  if ((0, _moment.isDate)(value)) {
    value = (0, _moment["default"])(value);
  }

  if ((0, _moment.isMoment)(value)) {
    var _getConfig = (0, _configure.getConfig)('formatter'),
        jsonDate = _getConfig.jsonDate;

    value = jsonDate ? value.format(jsonDate) : +value;
  }

  return value;
}

function processOne(value, field) {
  var checkRange = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

  if (!(0, _isEmpty["default"])(value)) {
    var range = field.get('range');

    if (range && checkRange) {
      if ((0, _mobx.isArrayLike)(range)) {
        if ((0, _isObject["default"])(value)) {
          var _range = (0, _slicedToArray2["default"])(range, 2),
              start = _range[0],
              end = _range[1];

          value[start] = processOne(value[start], field, false);
          value[end] = processOne(value[end], field, false);
        }
      } else if ((0, _mobx.isArrayLike)(value)) {
        value[0] = processOne(value[0], field, false);
        value[1] = processOne(value[1], field, false);
      }
    } else if (value instanceof Date) {
      value = (0, _moment["default"])(value);
    } else if (!(0, _isObject["default"])(value)) {
      value = (0, _formatString["default"])(value, {
        trim: field.get('trim'),
        format: field.get('format')
      });

      switch (field.type) {
        case "boolean"
        /* boolean */
        :
          {
            var trueValue = field.get("trueValue"
            /* trueValue */
            );
            var falseValue = field.get("falseValue"
            /* falseValue */
            );

            if (value !== trueValue) {
              value = falseValue;
            }

            break;
          }

        case "number"
        /* number */
        :
        case "currency"
        /* currency */
        :
          if (!isNaN(value)) {
            value = Number(value);
          } else {
            value = undefined;
          }

          break;

        case "string"
        /* string */
        :
        case "intl"
        /* intl */
        :
        case "email"
        /* email */
        :
        case "url"
        /* url */
        :
          value = String(value);
          break;

        case "date"
        /* date */
        :
        case "dateTime"
        /* dateTime */
        :
        case "time"
        /* time */
        :
        case "week"
        /* week */
        :
        case "month"
        /* month */
        :
        case "year"
        /* year */
        :
          {
            var _getConfig2 = (0, _configure.getConfig)('formatter'),
                jsonDate = _getConfig2.jsonDate;

            value = jsonDate ? (0, _moment["default"])(value, jsonDate) : (0, _moment["default"])(value);
            break;
          }

        default:
      }
    }
  }

  return value;
}

function processValue(value, field) {
  if (field) {
    var multiple = field.get('multiple');
    var range = field.get('range');

    if (multiple) {
      if ((0, _isEmpty["default"])(value)) {
        value = [];
      } else if (!(0, _isArray["default"])(value)) {
        if ((0, _isString["default"])(multiple) && (0, _isString["default"])(value)) {
          value = value.split(multiple);
        } else {
          value = [value];
        }
      }
    }

    if ((0, _isArray["default"])(value) && (multiple || !range)) {
      return value.map(function (item) {
        return processOne(item, field);
      });
    }

    return processOne(value, field);
  }

  return value;
}

function childrenInfoForDelete(json, children) {
  return Object.keys(children).reduce(function (data, name) {
    var child = children[name];

    if (child) {
      data[name] = [childrenInfoForDelete({}, child.children)];
    }

    return data;
  }, json);
}

function sortTree(children, orderField) {
  if (orderField && children.length > 0) {
    var name = orderField.name,
        order = orderField.order;
    var m = Number.MIN_SAFE_INTEGER;
    children.sort(function (record1, record2) {
      var a = record1.get(name) || m;
      var b = record2.get(name) || m;

      if ((0, _isString["default"])(a) || (0, _isString["default"])(b)) {
        return order === "asc"
        /* asc */
        ? String(a).localeCompare(String(b)) : String(b).localeCompare(String(a));
      }

      return order === "asc"
      /* asc */
      ? a - b : b - a;
    });
  }

  return children;
} // 递归生成树获取树形结构数据


function availableTree(idField, parentField, parentId, allData) {
  var result = [];
  allData.forEach(function (element) {
    if (element[parentField] === parentId) {
      var childresult = availableTree(idField, parentField, element[idField], allData);
      result = result.concat(element).concat(childresult);
    }
  });
  return result;
} // 获取单个页面能够展示的数据


function sliceTree(idField, parentField, allData, pageSize) {
  var availableTreeData = [];

  if (allData.length) {
    var parentLength = 0;
    allData.forEach(function (item) {
      if (item) {
        if ((0, _isNil["default"])(item[parentField]) && !(0, _isNil["default"])(idField) && parentLength < pageSize) {
          parentLength++;
          var childresult = availableTree(idField, parentField, item[idField], allData);
          availableTreeData = availableTreeData.concat(item).concat(childresult);
        }
      }
    });
  }

  return availableTreeData;
}

function checkParentByInsert(_ref2) {
  var parent = _ref2.parent;

  if (parent && !parent.current) {
    throw new Error((0, _localeContext.$l)('DataSet', 'cannot_add_record_when_head_no_current'));
  }
}

function getValueType(value) {
  return (0, _isBoolean["default"])(value) ? "boolean"
  /* boolean */
  : (0, _isNumber["default"])(value) ? "number"
  /* number */
  : (0, _isString["default"])(value) ? "string"
  /* string */
  : (0, _moment.isMoment)(value) ? "date"
  /* date */
  : (0, _isObject["default"])(value) ? "object"
  /* object */
  : "auto"
  /* auto */
  ;
}

function getBaseType(type) {
  switch (type) {
    case "number"
    /* number */
    :
    case "currency"
    /* currency */
    :
      return "number"
      /* number */
      ;

    case "dateTime"
    /* dateTime */
    :
    case "time"
    /* time */
    :
    case "week"
    /* week */
    :
    case "month"
    /* month */
    :
    case "year"
    /* year */
    :
      return "date"
      /* date */
      ;

    case "intl"
    /* intl */
    :
    case "url"
    /* url */
    :
    case "email"
    /* email */
    :
      return "string"
      /* string */
      ;

    default:
      return type;
  }
}

function checkFieldType(value, field) {
  if (process.env.NODE_ENV !== 'production') {
    if (!(0, _isEmpty["default"])(value)) {
      if ((0, _mobx.isArrayLike)(value)) {
        return value.every(function (item) {
          return checkFieldType(item, field);
        });
      }

      var fieldType = getBaseType(field.type);
      var valueType = field.type === "boolean"
      /* boolean */
      && [field.get("trueValue"
      /* trueValue */
      ), field.get("falseValue"
      /* falseValue */
      )].includes(value) ? "boolean"
      /* boolean */
      : getValueType(value);

      if (fieldType !== "auto"
      /* auto */
      && fieldType !== "reactNode"
      /* reactNode */
      && fieldType !== valueType) {
        (0, _warning["default"])(false, "Value type error: The value<".concat(value, ">'s type is ").concat(valueType, ", but the field<").concat(field.name, ">'s type is ").concat(fieldType, "."));
        return false;
      }
    }
  }

  return true;
}

var iframe;

function doExport(url, data) {
  var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'post';

  if (!iframe) {
    iframe = document.createElement('iframe');
    iframe.id = '_export_window';
    iframe.name = '_export_window';
    iframe.style.cssText = 'position:absolute;left:-10000px;top:-10000px;width:1px;height:1px;display:none';
    document.body.appendChild(iframe);
  }

  var form = document.createElement('form');
  form.target = '_export_window';
  form.method = method;
  form.action = url;
  var s = document.createElement('input');
  s.id = '_request_data';
  s.type = 'hidden';
  s.name = '_request_data';
  s.value = JSON.stringify(data);
  form.appendChild(s);
  document.body.appendChild(form);
  form.submit();
  document.body.removeChild(form);
}

function findBindFields(myField, fields, excludeSelf) {
  var name = myField.name;
  return (0, _toConsumableArray2["default"])(fields.values()).filter(function (field) {
    if (field !== myField) {
      var bind = field.get('bind');
      return (0, _isString["default"])(bind) && bind.startsWith("".concat(name, "."));
    }

    return !excludeSelf;
  });
}

function findBindField(myField, fields, callback) {
  var name = (0, _isString["default"])(myField) ? myField : myField.name;
  return (0, _toConsumableArray2["default"])(fields.values()).find(function (field) {
    if (field.name !== name) {
      var bind = field.get('bind');
      return (0, _isString["default"])(bind) && bind.startsWith("".concat(name, ".")) && (!callback || callback(field));
    }

    return false;
  });
}

function numberSorter(a, b) {
  return a - b;
}

function stringSorter(a, b) {
  return String(a || '').localeCompare(String(b || ''));
}

function getFieldSorter(field) {
  var name = field.name;

  switch (field.type) {
    case "number"
    /* number */
    :
    case "currency"
    /* currency */
    :
    case "date"
    /* date */
    :
    case "dateTime"
    /* dateTime */
    :
    case "week"
    /* week */
    :
    case "month"
    /* month */
    :
    case "year"
    /* year */
    :
    case "time"
    /* time */
    :
      return field.order === "asc"
      /* asc */
      ? function (a, b) {
        return numberSorter(a.get(name), b.get(name));
      } : function (a, b) {
        return numberSorter(b.get(name), a.get(name));
      };

    default:
      return field.order === "asc"
      /* asc */
      ? function (a, b) {
        return stringSorter(a.get(name), b.get(name));
      } : function (a, b) {
        return stringSorter(b.get(name), a.get(name));
      };
  }
}

function generateRecordJSONData(array, record, dataToJSON) {
  var normal = useNormal(dataToJSON);
  var json = normal ? record.status !== "delete"
  /* delete */
  && record.toData() : record.toJSONData();

  if (json && (normal || useAll(dataToJSON) || !useDirty(dataToJSON) || json.__dirty)) {
    delete json.__dirty;
    array.push(json);
  }
}

function prepareSubmitData(records, dataToJSON) {
  var created = [];
  var updated = [];
  var destroyed = [];

  function storeWith(status) {
    switch (status) {
      case "add"
      /* add */
      :
        return created;

      case "delete"
      /* delete */
      :
        return destroyed;

      default:
        return updated;
    }
  }

  records.forEach(function (record) {
    return generateRecordJSONData(storeWith(record.status), record, dataToJSON);
  });
  return [created, updated, destroyed];
}

function defaultAxiosConfigAdapter(config) {
  return config;
}

function generateConfig(config, dataSet, data, params, options) {
  if ((0, _isString["default"])(config)) {
    return {
      url: config
    };
  }

  if (typeof config === 'function') {
    return config((0, _objectSpread2["default"])({}, options, {
      data: data,
      dataSet: dataSet,
      params: params
    }));
  }

  return config;
}

function axiosConfigAdapter(type, dataSet, data, params, options) {
  var newConfig = {
    data: data,
    params: params,
    method: 'post'
  };

  var _ref3 = (0, _configure.getConfig)('transport') || {},
      globalConfig = _ref3[type],
      _ref3$adapter = _ref3.adapter,
      globalAdapter = _ref3$adapter === void 0 ? defaultAxiosConfigAdapter : _ref3$adapter;

  var _dataSet$transport = dataSet.transport,
      config = _dataSet$transport[type],
      adapter = _dataSet$transport.adapter;

  if (globalConfig) {
    (0, _extends2["default"])(newConfig, generateConfig(globalConfig, dataSet, data, params, options));
  }

  if (config) {
    (0, _extends2["default"])(newConfig, generateConfig(config, dataSet, data, params, options));
  }

  if (newConfig.data && newConfig.method && newConfig.method.toLowerCase() === 'get') {
    newConfig.params = (0, _objectSpread2["default"])({}, newConfig.params, {}, newConfig.data);
  }

  return (adapter || globalAdapter)(newConfig, type) || newConfig;
} // 查询顶层父亲节点


function findRootParent(children) {
  if (children.parent) {
    return findRootParent(children.parent);
  }

  return children;
}

function prepareForSubmit(type, data, configs, dataSet) {
  if (data.length) {
    var newConfig = axiosConfigAdapter(type, dataSet, data);

    if (newConfig.url) {
      configs.push(newConfig);
    } else {
      return data;
    }
  }

  return [];
}

function generateResponseData(item, dataKey) {
  if (item) {
    if ((0, _isArray["default"])(item)) {
      return item;
    }

    if ((0, _isObject["default"])(item)) {
      if (dataKey) {
        var result = ObjectChainValue.get(item, dataKey);

        if (result === undefined) {
          return [item];
        }

        if ((0, _isArray["default"])(result)) {
          return result;
        }

        if ((0, _isObject["default"])(result)) {
          return [result];
        }
      } else {
        return [item];
      }
    }
  }

  return [];
}

function getRecordValue(data, cb, fieldName) {
  if (fieldName) {
    var field = this.getField(fieldName);

    if (field) {
      var bind = field.get('bind');

      if (bind) {
        fieldName = bind;
      }
    }

    var dataSet = this.dataSet;

    if (dataSet) {
      var checkField = dataSet.props.checkField;

      if (checkField && checkField === fieldName) {
        var trueValue = field ? field.get("trueValue"
        /* trueValue */
        ) : true;
        var falseValue = field ? field.get("falseValue"
        /* falseValue */
        ) : false;
        var children = this.children;

        if (children) {
          return children.every(function (child) {
            return cb(child, checkField) === trueValue;
          }) ? trueValue : falseValue;
        }
      }
    }

    return ObjectChainValue.get(data, fieldName);
  }
}

function tlsBind(props, name, lang, tlsKey) {
  var tls = props.record.get(tlsKey) || {};

  if (name in tls) {
    return "".concat(tlsKey, ".").concat(name, ".").concat(lang);
  }
}

function processIntlField(name, fieldProps, callback, dataSet) {
  var tlsKey = (0, _configure.getConfig)('tlsKey');
  var supports = _localeContext["default"].supports;
  var languages = Object.keys(supports);
  var type = fieldProps.type,
      dynamicProps = fieldProps.dynamicProps;

  if (type === "intl"
  /* intl */
  ) {
      languages.forEach(function (language) {
        return callback("".concat(tlsKey, ".").concat(name, ".").concat(language), {
          type: "string"
          /* string */
          ,
          label: "".concat(supports[language])
        });
      });

      var _ref4 = dataSet || {},
          _ref4$lang = _ref4.lang,
          lang = _ref4$lang === void 0 ? _localeContext["default"].locale.lang : _ref4$lang;

      var newDynamicProps = typeof dynamicProps === 'function' ? function (props) {
        return (0, _objectSpread2["default"])({}, dynamicProps(props), {
          bind: tlsBind(props, name, lang, tlsKey)
        });
      } : (0, _objectSpread2["default"])({}, dynamicProps, {
        bind: function bind(props) {
          return tlsBind(props, name, lang, tlsKey);
        }
      });
      return callback(name, (0, _objectSpread2["default"])({}, fieldProps, {
        dynamicProps: newDynamicProps
      }));
    }

  return callback(name, fieldProps);
}

function findBindFieldBy(myField, fields, prop) {
  var value = myField.get(prop);
  var myName = myField.name;
  return (0, _toConsumableArray2["default"])(fields.values()).find(function (field) {
    var bind = field.get('bind');
    return bind && bind === "".concat(myName, ".").concat(value);
  });
}

function processFieldValue(value, field, lang, showValueIfNotFound) {
  var type = field.type;

  if (type === "number"
  /* number */
  ) {
      var precision = (0, _utils.getPrecision)(value || 0);
      var options = {
        minimumFractionDigits: precision,
        maximumFractionDigits: precision
      };
      return (0, _formatNumber["default"])(value, lang, options);
    }

  if (type === "currency"
  /* currency */
  ) {
      return (0, _formatCurrency["default"])(value, lang, {
        currency: field.get('currency')
      });
    }

  return field.getText(value, showValueIfNotFound);
}

function getLimit(limit, record) {
  if ((0, _isString["default"])(limit) && record.getField(limit)) {
    return record.get(limit);
  }

  return limit;
}

function adapterDataToJSON(isSelected, noCascade) {
  if (isSelected) {
    if (noCascade) {
      return "selected-self"
      /* 'selected-self' */
      ;
    }

    return "selected"
    /* selected */
    ;
  }

  if (noCascade) {
    return "dirty-self"
    /* 'dirty-self' */
    ;
  }

  return undefined;
}

function generateData(ds) {
  var dirty = ds.destroyed.length > 0;
  var data = ds.data.map(function (record) {
    var d = record.toData();

    if (d.__dirty) {
      dirty = true;
    }

    delete d.__dirty;
    return d;
  });
  return {
    dirty: dirty,
    data: data
  };
}

function generateJSONData(ds, isSelect) {
  var dataToJSON = ds.dataToJSON;
  var data = [];
  (isSelect || useSelected(dataToJSON) ? ds.selected : ds.records).forEach(function (record) {
    return generateRecordJSONData(data, record, dataToJSON);
  });
  return {
    dirty: data.length > 0,
    data: data
  };
}

function isDirtyRecord(record) {
  return record.status !== "sync"
  /* sync */
  || record.dirty;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzLXByby9kYXRhLXNldC91dGlscy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBS0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBRU0sU0FBVSxTQUFWLENBQW9CLFVBQXBCLEVBQTBDO0FBQzlDLFNBQU8sQ0FBQTtBQUFBO0FBQUEsSUFBQTtBQUFBO0FBQUEsSUFBK0MsUUFBL0MsQ0FBd0QsVUFBeEQsQ0FBUDtBQUNEOztBQUVLLFNBQVUsTUFBVixDQUFpQixVQUFqQixFQUF1QztBQUMzQyxTQUFPLENBQUE7QUFBQTtBQUFBLElBQUE7QUFBQTtBQUFBLElBQXlDLFFBQXpDLENBQWtELFVBQWxELENBQVA7QUFDRDs7QUFFSyxTQUFVLFdBQVYsQ0FBc0IsVUFBdEIsRUFBNEM7QUFDaEQsU0FBTyxDQUFBO0FBQUE7QUFBQSxJQUFBO0FBQUE7QUFBQSxJQUFtRCxRQUFuRCxDQUE0RCxVQUE1RCxDQUFQO0FBQ0Q7O0FBRUssU0FBVSxVQUFWLENBQXFCLFVBQXJCLEVBQTJDO0FBQy9DLFNBQU8sQ0FBQTtBQUFBO0FBQUEsSUFBQTtBQUFBO0FBQUEsSUFBQTtBQUFBO0FBQUEsSUFBQTtBQUFBO0FBQUEsSUFBMkUsUUFBM0UsQ0FDTCxVQURLLENBQVA7QUFHRDs7QUFFSyxTQUFVLFFBQVYsQ0FBbUIsVUFBbkIsRUFBeUM7QUFDN0MsU0FBTyxDQUFBO0FBQUE7QUFBQSxJQUFBO0FBQUE7QUFBQSxJQUE2QyxRQUE3QyxDQUFzRCxVQUF0RCxDQUFQO0FBQ0Q7O0FBRUssU0FBVSxNQUFWLENBQWlCLEdBQWpCLEVBQThCLE1BQTlCLEVB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LFFBQVEsSUFBSSxXQUFXLENBQUMsVUFBRCxDQUF2QixHQUFzQyxFQUFFLENBQUMsUUFBekMsR0FBb0QsRUFBRSxDQUFDLE9BQXhELEVBQWlFLE9BQWpFLENBQXlFLFVBQUEsTUFBTTtBQUFBLFdBQzdFLHNCQUFzQixDQUFDLElBQUQsRUFBTyxNQUFQLEVBQWUsVUFBZixDQUR1RDtBQUFBLEdBQS9FO0FBR0EsU0FBTztBQUNMLElBQUEsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFMLEdBQWMsQ0FEaEI7QUFFTCxJQUFBLElBQUksRUFBSjtBQUZLLEdBQVA7QUFJRDs7QUFFSyxTQUFVLGFBQVYsQ0FBd0IsTUFBeEIsRUFBOEI7QUFDbEMsU0FBTyxNQUFNLENBQUMsTUFBUCxLQUFhO0FBQUE7QUFBYixLQUF1QyxNQUFNLENBQUMsS0FBckQ7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBxdWVyeVN0cmluZyBmcm9tICdxdWVyeXN0cmluZ2lmeSc7XG5pbXBvcnQgbW9tZW50LCB7IGlzRGF0ZSwgaXNNb21lbnQgfSBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgaXNBcnJheUxpa2UgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCBpc0Jvb2xlYW4gZnJvbSAnbG9kYXNoL2lzQm9vbGVhbic7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnbG9kYXNoL2lzT2JqZWN0JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICdsb2Rhc2gvaXNTdHJpbmcnO1xuaW1wb3J0IGlzQXJyYXkgZnJvbSAnbG9kYXNoL2lzQXJyYXknO1xuaW1wb3J0IGlzTnVtYmVyIGZyb20gJ2xvZGFzaC9pc051bWJlcic7XG5pbXBvcnQgd2FybmluZyBmcm9tICdjaG9lcm9kb24tdWkvbGliL191dGlsL3dhcm5pbmcnO1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnY2hvZXJvZG9uLXVpL2xpYi9jb25maWd1cmUnO1xuaW1wb3J0IGlzTmlsIGZyb20gJ2xvZGFzaC9pc05pbCc7XG5pbXBvcnQgRmllbGQsIHsgRHluYW1pY1Byb3BzQXJndW1lbnRzLCBGaWVsZFByb3BzLCBGaWVsZHMgfSBmcm9tICcuL0ZpZWxkJztcbmltcG9ydCB7IEJvb2xlYW5WYWx1ZSwgRGF0YVRvSlNPTiwgRmllbGRUeXBlLCBSZWNvcmRTdGF0dXMsIFNvcnRPcmRlciB9IGZyb20gJy4vZW51bSc7XG5pbXBvcnQgRGF0YVNldCBmcm9tICcuL0RhdGFTZXQnO1xuaW1wb3J0IFJlY29yZCBmcm9tICcuL1JlY29yZCc7XG5pbXBvcnQgaXNFbXB0eSBmcm9tICcuLi9fdXRpbC9pc0VtcHR5JztcbmltcG9ydCAqIGFzIE9iamVjdENoYWluVmFsdWUgZnJvbSAnLi4vX3V0aWwvT2JqZWN0Q2hhaW5WYWx1ZSc7XG5pbXBvcnQgbG9jYWxlQ29udGV4dCwgeyAkbCB9IGZyb20gJy4uL2xvY2FsZS1jb250ZXh0JztcbmltcG9ydCB7IFN1Ym1pdFR5cGVzLCBUcmFuc3BvcnRUeXBlLCBUcmFuc3BvcnRUeXBlcyB9IGZyb20gJy4vVHJhbnNwb3J0JztcbmltcG9ydCBmb3JtYXRTdHJpbmcgZnJvbSAnLi4vZm9ybWF0dGVyL2Zvcm1hdFN0cmluZyc7XG5pbXBvcnQgeyBMYW5nIH0gZnJvbSAnLi4vbG9jYWxlLWNvbnRleHQvZW51bSc7XG5pbXBvcnQgZm9ybWF0TnVtYmVyIGZyb20gJy4uL2Zvcm1hdHRlci9mb3JtYXROdW1iZXInO1xuaW1wb3J0IGZvcm1hdEN1cnJlbmN5IGZyb20gJy4uL2Zvcm1hdHRlci9mb3JtYXRDdXJyZW5jeSc7XG5pbXBvcnQgeyBnZXRQcmVjaXNpb24gfSBmcm9tICcuLi9udW1iZXItZmllbGQvdXRpbHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlTm9ybWFsKGRhdGFUb0pTT046IERhdGFUb0pTT04pOiBib29sZWFuIHtcbiAgcmV0dXJuIFtEYXRhVG9KU09OLm5vcm1hbCwgRGF0YVRvSlNPTlsnbm9ybWFsLXNlbGYnXV0uaW5jbHVkZXMoZGF0YVRvSlNPTik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBbGwoZGF0YVRvSlNPTjogRGF0YVRvSlNPTik6IGJvb2xlYW4ge1xuICByZXR1cm4gW0RhdGFUb0pTT04uYWxsLCBEYXRhVG9KU09OWydhbGwtc2VsZiddXS5pbmNsdWRlcyhkYXRhVG9KU09OKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZVNlbGVjdGVkKGRhdGFUb0pTT046IERhdGFUb0pTT04pOiBib29sZWFuIHtcbiAgcmV0dXJuIFtEYXRhVG9KU09OLnNlbGVjdGVkLCBEYXRhVG9KU09OWydzZWxlY3RlZC1zZWxmJ11dLmluY2x1ZGVzKGRhdGFUb0pTT04pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQ2FzY2FkZShkYXRhVG9KU09OOiBEYXRhVG9KU09OKTogYm9vbGVhbiB7XG4gIHJldHVybiBbRGF0YVRvSlNPTi5kaXJ0eSwgRGF0YVRvSlNPTi5zZWxlY3RlZCwgRGF0YVRvSlNPTi5hbGwsIERhdGFUb0pTT04ubm9ybWFsXS5pbmNsdWRlcyhcbiAgICBkYXRhVG9KU09OLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlRGlydHkoZGF0YVRvSlNPTjogRGF0YVRvSlNPTik6IGJvb2xlYW4ge1xuICByZXR1cm4gW0RhdGFUb0pTT04uZGlydHksIERhdGFUb0pTT05bJ2RpcnR5LXNlbGYnXV0uaW5jbHVkZXMoZGF0YVRvSlNPTik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmQodXJsOiBzdHJpbmcsIHN1ZmZpeD86IG9iamVjdCkge1xuICBpZiAoc3VmZml4KSB7XG4gICAgcmV0dXJuIHVybCArIHF1ZXJ5U3RyaW5nLnN0cmluZ2lmeShzdWZmaXgsIHVybC5pbmRleE9mKCc/JykgPT09IC0xKTtcbiAgfVxuICByZXR1cm4gdXJsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JkZXJGaWVsZHMoZmllbGRzOiBGaWVsZHMpOiBGaWVsZFtdIHtcbiAgcmV0dXJuIFsuLi5maWVsZHMudmFsdWVzKCldLmZpbHRlcigoeyBvcmRlciB9KSA9PiBvcmRlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzVG9KU09OKHZhbHVlKSB7XG4gIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgdmFsdWUgPSBtb21lbnQodmFsdWUpO1xuICB9XG4gIGlmIChpc01vbWVudCh2YWx1ZSkpIHtcbiAgICBjb25zdCB7IGpzb25EYXRlIH0gPSBnZXRDb25maWcoJ2Zvcm1hdHRlcicpO1xuICAgIHZhbHVlID0ganNvbkRhdGUgPyB2YWx1ZS5mb3JtYXQoanNvbkRhdGUpIDogK3ZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc09uZSh2YWx1ZTogYW55LCBmaWVsZDogRmllbGQsIGNoZWNrUmFuZ2U6IGJvb2xlYW4gPSB0cnVlKSB7XG4gIGlmICghaXNFbXB0eSh2YWx1ZSkpIHtcbiAgICBjb25zdCByYW5nZSA9IGZpZWxkLmdldCgncmFuZ2UnKTtcbiAgICBpZiAocmFuZ2UgJiYgY2hlY2tSYW5nZSkge1xuICAgICAgaWYgKGlzQXJyYXlMaWtlKHJhbmdlKSkge1xuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gcmFuZ2U7XG4gICAgICAgICAgdmFsdWVbc3RhcnRdID0gcHJvY2Vzc09uZSh2YWx1ZVtzdGFydF0sIGZpZWxkLCBmYWxzZSk7XG4gICAgICAgICAgdmFsdWVbZW5kXSA9IHByb2Nlc3NPbmUodmFsdWVbZW5kXSwgZmllbGQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWVbMF0gPSBwcm9jZXNzT25lKHZhbHVlWzBdLCBmaWVsZCwgZmFsc2UpO1xuICAgICAgICB2YWx1ZVsxXSA9IHByb2Nlc3NPbmUodmFsdWVbMV0sIGZpZWxkLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHZhbHVlID0gbW9tZW50KHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKCFpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlID0gZm9ybWF0U3RyaW5nKHZhbHVlLCB7XG4gICAgICAgIHRyaW06IGZpZWxkLmdldCgndHJpbScpLFxuICAgICAgICBmb3JtYXQ6IGZpZWxkLmdldCgnZm9ybWF0JyksXG4gICAgICB9KTtcbiAgICAgIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgICAgICBjYXNlIEZpZWxkVHlwZS5ib29sZWFuOiB7XG4gICAgICAgICAgY29uc3QgdHJ1ZVZhbHVlID0gZmllbGQuZ2V0KEJvb2xlYW5WYWx1ZS50cnVlVmFsdWUpO1xuICAgICAgICAgIGNvbnN0IGZhbHNlVmFsdWUgPSBmaWVsZC5nZXQoQm9vbGVhblZhbHVlLmZhbHNlVmFsdWUpO1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdHJ1ZVZhbHVlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGZhbHNlVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgRmllbGRUeXBlLm51bWJlcjpcbiAgICAgICAgY2FzZSBGaWVsZFR5cGUuY3VycmVuY3k6XG4gICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEZpZWxkVHlwZS5zdHJpbmc6XG4gICAgICAgIGNhc2UgRmllbGRUeXBlLmludGw6XG4gICAgICAgIGNhc2UgRmllbGRUeXBlLmVtYWlsOlxuICAgICAgICBjYXNlIEZpZWxkVHlwZS51cmw6XG4gICAgICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlOlxuICAgICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZTpcbiAgICAgICAgY2FzZSBGaWVsZFR5cGUudGltZTpcbiAgICAgICAgY2FzZSBGaWVsZFR5cGUud2VlazpcbiAgICAgICAgY2FzZSBGaWVsZFR5cGUubW9udGg6XG4gICAgICAgIGNhc2UgRmllbGRUeXBlLnllYXI6IHtcbiAgICAgICAgICBjb25zdCB7IGpzb25EYXRlIH0gPSBnZXRDb25maWcoJ2Zvcm1hdHRlcicpO1xuICAgICAgICAgIHZhbHVlID0ganNvbkRhdGUgPyBtb21lbnQodmFsdWUsIGpzb25EYXRlKSA6IG1vbWVudCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc1ZhbHVlKHZhbHVlOiBhbnksIGZpZWxkPzogRmllbGQpOiBhbnkge1xuICBpZiAoZmllbGQpIHtcbiAgICBjb25zdCBtdWx0aXBsZSA9IGZpZWxkLmdldCgnbXVsdGlwbGUnKTtcbiAgICBjb25zdCByYW5nZSA9IGZpZWxkLmdldCgncmFuZ2UnKTtcbiAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgIGlmIChpc0VtcHR5KHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IFtdO1xuICAgICAgfSBlbHNlIGlmICghaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKGlzU3RyaW5nKG11bHRpcGxlKSAmJiBpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNwbGl0KG11bHRpcGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZSA9IFt2YWx1ZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpICYmIChtdWx0aXBsZSB8fCAhcmFuZ2UpKSB7XG4gICAgICByZXR1cm4gdmFsdWUubWFwKGl0ZW0gPT4gcHJvY2Vzc09uZShpdGVtLCBmaWVsZCkpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzc09uZSh2YWx1ZSwgZmllbGQpO1xuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkcmVuSW5mb0ZvckRlbGV0ZShqc29uOiB7fSwgY2hpbGRyZW46IHsgW2tleTogc3RyaW5nXTogRGF0YVNldCB9KToge30ge1xuICByZXR1cm4gT2JqZWN0LmtleXMoY2hpbGRyZW4pLnJlZHVjZSgoZGF0YSwgbmFtZSkgPT4ge1xuICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5bbmFtZV07XG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBkYXRhW25hbWVdID0gW2NoaWxkcmVuSW5mb0ZvckRlbGV0ZSh7fSwgY2hpbGQuY2hpbGRyZW4pXTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH0sIGpzb24pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc29ydFRyZWUoY2hpbGRyZW46IFJlY29yZFtdLCBvcmRlckZpZWxkOiBGaWVsZCk6IFJlY29yZFtdIHtcbiAgaWYgKG9yZGVyRmllbGQgJiYgY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHsgbmFtZSwgb3JkZXIgfSA9IG9yZGVyRmllbGQ7XG4gICAgY29uc3QgbSA9IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xuICAgIGNoaWxkcmVuLnNvcnQoKHJlY29yZDEsIHJlY29yZDIpID0+IHtcbiAgICAgIGNvbnN0IGEgPSByZWNvcmQxLmdldChuYW1lKSB8fCBtO1xuICAgICAgY29uc3QgYiA9IHJlY29yZDIuZ2V0KG5hbWUpIHx8IG07XG4gICAgICBpZiAoaXNTdHJpbmcoYSkgfHwgaXNTdHJpbmcoYikpIHtcbiAgICAgICAgcmV0dXJuIG9yZGVyID09PSBTb3J0T3JkZXIuYXNjXG4gICAgICAgICAgPyBTdHJpbmcoYSkubG9jYWxlQ29tcGFyZShTdHJpbmcoYikpXG4gICAgICAgICAgOiBTdHJpbmcoYikubG9jYWxlQ29tcGFyZShTdHJpbmcoYSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9yZGVyID09PSBTb3J0T3JkZXIuYXNjID8gYSAtIGIgOiBiIC0gYTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gY2hpbGRyZW47XG59XG5cbi8vIOmAkuW9kueUn+aIkOagkeiOt+WPluagkeW9oue7k+aehOaVsOaNrlxuZnVuY3Rpb24gYXZhaWxhYmxlVHJlZShpZEZpZWxkLHBhcmVudEZpZWxkLHBhcmVudElkLGFsbERhdGEpe1xuICBsZXQgcmVzdWx0ID0gW11cbiAgYWxsRGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgIGlmKGVsZW1lbnRbcGFyZW50RmllbGRdID09PSBwYXJlbnRJZCl7XG4gICAgICBjb25zdCBjaGlsZHJlc3VsdCA9IGF2YWlsYWJsZVRyZWUoaWRGaWVsZCxwYXJlbnRGaWVsZCxlbGVtZW50W2lkRmllbGRdLGFsbERhdGEpO1xuICAgICAgcmVzdWx0PSByZXN1bHQuY29uY2F0KGVsZW1lbnQpLmNvbmNhdChjaGlsZHJlc3VsdClcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8vIOiOt+WPluWNleS4qumhtemdouiDveWkn+WxleekuueahOaVsOaNrlxuZXhwb3J0IGZ1bmN0aW9uIHNsaWNlVHJlZShpZEZpZWxkLHBhcmVudEZpZWxkLGFsbERhdGEscGFnZVNpemUpe1xuICBsZXQgYXZhaWxhYmxlVHJlZURhdGE9IFtdXG4gIGlmKGFsbERhdGEubGVuZ3RoKSB7XG4gICBsZXQgcGFyZW50TGVuZ3RoID0gMFxuICAgYWxsRGF0YS5mb3JFYWNoKCggaXRlbSApID0+IHtcbiAgICAgIGlmKGl0ZW0pe1xuICAgICAgICBpZihpc05pbChpdGVtW3BhcmVudEZpZWxkXSkgJiYgIWlzTmlsKGlkRmllbGQpICYmIHBhcmVudExlbmd0aCA8IHBhZ2VTaXplKXtcbiAgICAgICAgICBwYXJlbnRMZW5ndGgrK1xuICAgICAgICAgIGNvbnN0IGNoaWxkcmVzdWx0ID0gYXZhaWxhYmxlVHJlZShpZEZpZWxkLHBhcmVudEZpZWxkLGl0ZW1baWRGaWVsZF0sYWxsRGF0YSlcbiAgICAgICAgICBhdmFpbGFibGVUcmVlRGF0YT0gYXZhaWxhYmxlVHJlZURhdGEuY29uY2F0KGl0ZW0pLmNvbmNhdChjaGlsZHJlc3VsdClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIGF2YWlsYWJsZVRyZWVEYXRhXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1BhcmVudEJ5SW5zZXJ0KHsgcGFyZW50IH06IERhdGFTZXQpIHtcbiAgaWYgKHBhcmVudCAmJiAhcGFyZW50LmN1cnJlbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJGwoJ0RhdGFTZXQnLCAnY2Fubm90X2FkZF9yZWNvcmRfd2hlbl9oZWFkX25vX2N1cnJlbnQnKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWVUeXBlKHZhbHVlOiBhbnkpOiBGaWVsZFR5cGUge1xuICByZXR1cm4gaXNCb29sZWFuKHZhbHVlKVxuICAgID8gRmllbGRUeXBlLmJvb2xlYW5cbiAgICA6IGlzTnVtYmVyKHZhbHVlKVxuICAgID8gRmllbGRUeXBlLm51bWJlclxuICAgIDogaXNTdHJpbmcodmFsdWUpXG4gICAgPyBGaWVsZFR5cGUuc3RyaW5nXG4gICAgOiBpc01vbWVudCh2YWx1ZSlcbiAgICA/IEZpZWxkVHlwZS5kYXRlXG4gICAgOiBpc09iamVjdCh2YWx1ZSlcbiAgICA/IEZpZWxkVHlwZS5vYmplY3RcbiAgICA6IEZpZWxkVHlwZS5hdXRvO1xufVxuXG5mdW5jdGlvbiBnZXRCYXNlVHlwZSh0eXBlOiBGaWVsZFR5cGUpOiBGaWVsZFR5cGUge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlIEZpZWxkVHlwZS5udW1iZXI6XG4gICAgY2FzZSBGaWVsZFR5cGUuY3VycmVuY3k6XG4gICAgICByZXR1cm4gRmllbGRUeXBlLm51bWJlcjtcbiAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZTpcbiAgICBjYXNlIEZpZWxkVHlwZS50aW1lOlxuICAgIGNhc2UgRmllbGRUeXBlLndlZWs6XG4gICAgY2FzZSBGaWVsZFR5cGUubW9udGg6XG4gICAgY2FzZSBGaWVsZFR5cGUueWVhcjpcbiAgICAgIHJldHVybiBGaWVsZFR5cGUuZGF0ZTtcbiAgICBjYXNlIEZpZWxkVHlwZS5pbnRsOlxuICAgIGNhc2UgRmllbGRUeXBlLnVybDpcbiAgICBjYXNlIEZpZWxkVHlwZS5lbWFpbDpcbiAgICAgIHJldHVybiBGaWVsZFR5cGUuc3RyaW5nO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdHlwZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tGaWVsZFR5cGUodmFsdWU6IGFueSwgZmllbGQ6IEZpZWxkKTogYm9vbGVhbiB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKCFpc0VtcHR5KHZhbHVlKSkge1xuICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUuZXZlcnkoaXRlbSA9PiBjaGVja0ZpZWxkVHlwZShpdGVtLCBmaWVsZCkpO1xuICAgICAgfVxuICAgICAgY29uc3QgZmllbGRUeXBlID0gZ2V0QmFzZVR5cGUoZmllbGQudHlwZSk7XG4gICAgICBjb25zdCB2YWx1ZVR5cGUgPVxuICAgICAgICBmaWVsZC50eXBlID09PSBGaWVsZFR5cGUuYm9vbGVhbiAmJlxuICAgICAgICBbZmllbGQuZ2V0KEJvb2xlYW5WYWx1ZS50cnVlVmFsdWUpLCBmaWVsZC5nZXQoQm9vbGVhblZhbHVlLmZhbHNlVmFsdWUpXS5pbmNsdWRlcyh2YWx1ZSlcbiAgICAgICAgICA/IEZpZWxkVHlwZS5ib29sZWFuXG4gICAgICAgICAgOiBnZXRWYWx1ZVR5cGUodmFsdWUpO1xuICAgICAgaWYgKFxuICAgICAgICBmaWVsZFR5cGUgIT09IEZpZWxkVHlwZS5hdXRvICYmXG4gICAgICAgIGZpZWxkVHlwZSAhPT0gRmllbGRUeXBlLnJlYWN0Tm9kZSAmJlxuICAgICAgICBmaWVsZFR5cGUgIT09IHZhbHVlVHlwZVxuICAgICAgKSB7XG4gICAgICAgIHdhcm5pbmcoXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgYFZhbHVlIHR5cGUgZXJyb3I6IFRoZSB2YWx1ZTwke3ZhbHVlfT4ncyB0eXBlIGlzICR7dmFsdWVUeXBlfSwgYnV0IHRoZSBmaWVsZDwke2ZpZWxkLm5hbWV9PidzIHR5cGUgaXMgJHtmaWVsZFR5cGV9LmAsXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmxldCBpZnJhbWU7XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0V4cG9ydCh1cmwsIGRhdGEsIG1ldGhvZCA9ICdwb3N0Jykge1xuICBpZiAoIWlmcmFtZSkge1xuICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5pZCA9ICdfZXhwb3J0X3dpbmRvdyc7XG4gICAgaWZyYW1lLm5hbWUgPSAnX2V4cG9ydF93aW5kb3cnO1xuICAgIGlmcmFtZS5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICdwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMDAwMHB4O3RvcDotMTAwMDBweDt3aWR0aDoxcHg7aGVpZ2h0OjFweDtkaXNwbGF5Om5vbmUnO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgfVxuXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGZvcm0udGFyZ2V0ID0gJ19leHBvcnRfd2luZG93JztcbiAgZm9ybS5tZXRob2QgPSBtZXRob2Q7XG4gIGZvcm0uYWN0aW9uID0gdXJsO1xuICBjb25zdCBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgcy5pZCA9ICdfcmVxdWVzdF9kYXRhJztcbiAgcy50eXBlID0gJ2hpZGRlbic7XG4gIHMubmFtZSA9ICdfcmVxdWVzdF9kYXRhJztcbiAgcy52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICBmb3JtLmFwcGVuZENoaWxkKHMpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZvcm0pO1xuICBmb3JtLnN1Ym1pdCgpO1xuICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGZvcm0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEJpbmRGaWVsZHMobXlGaWVsZDogRmllbGQsIGZpZWxkczogRmllbGRzLCBleGNsdWRlU2VsZj86IGJvb2xlYW4pOiBGaWVsZFtdIHtcbiAgY29uc3QgeyBuYW1lIH0gPSBteUZpZWxkO1xuICByZXR1cm4gWy4uLmZpZWxkcy52YWx1ZXMoKV0uZmlsdGVyKGZpZWxkID0+IHtcbiAgICBpZiAoZmllbGQgIT09IG15RmllbGQpIHtcbiAgICAgIGNvbnN0IGJpbmQgPSBmaWVsZC5nZXQoJ2JpbmQnKTtcbiAgICAgIHJldHVybiBpc1N0cmluZyhiaW5kKSAmJiBiaW5kLnN0YXJ0c1dpdGgoYCR7bmFtZX0uYCk7XG4gICAgfVxuICAgIHJldHVybiAhZXhjbHVkZVNlbGY7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEJpbmRGaWVsZChcbiAgbXlGaWVsZDogRmllbGQgfCBzdHJpbmcsXG4gIGZpZWxkczogRmllbGRzLFxuICBjYWxsYmFjaz86IChmaWVsZDogRmllbGQpID0+IGJvb2xlYW4sXG4pOiBGaWVsZCB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IG5hbWUgPSBpc1N0cmluZyhteUZpZWxkKSA/IG15RmllbGQgOiBteUZpZWxkLm5hbWU7XG4gIHJldHVybiBbLi4uZmllbGRzLnZhbHVlcygpXS5maW5kKGZpZWxkID0+IHtcbiAgICBpZiAoZmllbGQubmFtZSAhPT0gbmFtZSkge1xuICAgICAgY29uc3QgYmluZCA9IGZpZWxkLmdldCgnYmluZCcpO1xuICAgICAgcmV0dXJuIGlzU3RyaW5nKGJpbmQpICYmIGJpbmQuc3RhcnRzV2l0aChgJHtuYW1lfS5gKSAmJiAoIWNhbGxiYWNrIHx8IGNhbGxiYWNrKGZpZWxkKSk7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG51bWJlclNvcnRlcihhLCBiKSB7XG4gIHJldHVybiBhIC0gYjtcbn1cblxuZnVuY3Rpb24gc3RyaW5nU29ydGVyKGEsIGIpIHtcbiAgcmV0dXJuIFN0cmluZyhhIHx8ICcnKS5sb2NhbGVDb21wYXJlKFN0cmluZyhiIHx8ICcnKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWVsZFNvcnRlcihmaWVsZDogRmllbGQpIHtcbiAgY29uc3QgeyBuYW1lIH0gPSBmaWVsZDtcblxuICBzd2l0Y2ggKGZpZWxkLnR5cGUpIHtcbiAgICBjYXNlIEZpZWxkVHlwZS5udW1iZXI6XG4gICAgY2FzZSBGaWVsZFR5cGUuY3VycmVuY3k6XG4gICAgY2FzZSBGaWVsZFR5cGUuZGF0ZTpcbiAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZTpcbiAgICBjYXNlIEZpZWxkVHlwZS53ZWVrOlxuICAgIGNhc2UgRmllbGRUeXBlLm1vbnRoOlxuICAgIGNhc2UgRmllbGRUeXBlLnllYXI6XG4gICAgY2FzZSBGaWVsZFR5cGUudGltZTpcbiAgICAgIHJldHVybiBmaWVsZC5vcmRlciA9PT0gU29ydE9yZGVyLmFzY1xuICAgICAgICA/IChhLCBiKSA9PiBudW1iZXJTb3J0ZXIoYS5nZXQobmFtZSksIGIuZ2V0KG5hbWUpKVxuICAgICAgICA6IChhLCBiKSA9PiBudW1iZXJTb3J0ZXIoYi5nZXQobmFtZSksIGEuZ2V0KG5hbWUpKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZpZWxkLm9yZGVyID09PSBTb3J0T3JkZXIuYXNjXG4gICAgICAgID8gKGEsIGIpID0+IHN0cmluZ1NvcnRlcihhLmdldChuYW1lKSwgYi5nZXQobmFtZSkpXG4gICAgICAgIDogKGEsIGIpID0+IHN0cmluZ1NvcnRlcihiLmdldChuYW1lKSwgYS5nZXQobmFtZSkpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJlY29yZEpTT05EYXRhKGFycmF5OiBvYmplY3RbXSwgcmVjb3JkOiBSZWNvcmQsIGRhdGFUb0pTT046IERhdGFUb0pTT04pIHtcbiAgY29uc3Qgbm9ybWFsID0gdXNlTm9ybWFsKGRhdGFUb0pTT04pO1xuICBjb25zdCBqc29uID0gbm9ybWFsXG4gICAgPyByZWNvcmQuc3RhdHVzICE9PSBSZWNvcmRTdGF0dXMuZGVsZXRlICYmIHJlY29yZC50b0RhdGEoKVxuICAgIDogcmVjb3JkLnRvSlNPTkRhdGEoKTtcbiAgaWYgKGpzb24gJiYgKG5vcm1hbCB8fCB1c2VBbGwoZGF0YVRvSlNPTikgfHwgIXVzZURpcnR5KGRhdGFUb0pTT04pIHx8IGpzb24uX19kaXJ0eSkpIHtcbiAgICBkZWxldGUganNvbi5fX2RpcnR5O1xuICAgIGFycmF5LnB1c2goanNvbik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXBhcmVTdWJtaXREYXRhKFxuICByZWNvcmRzOiBSZWNvcmRbXSxcbiAgZGF0YVRvSlNPTjogRGF0YVRvSlNPTixcbik6IFtvYmplY3RbXSwgb2JqZWN0W10sIG9iamVjdFtdXSB7XG4gIGNvbnN0IGNyZWF0ZWQ6IG9iamVjdFtdID0gW107XG4gIGNvbnN0IHVwZGF0ZWQ6IG9iamVjdFtdID0gW107XG4gIGNvbnN0IGRlc3Ryb3llZDogb2JqZWN0W10gPSBbXTtcblxuICBmdW5jdGlvbiBzdG9yZVdpdGgoc3RhdHVzKSB7XG4gICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgIGNhc2UgUmVjb3JkU3RhdHVzLmFkZDpcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWQ7XG4gICAgICBjYXNlIFJlY29yZFN0YXR1cy5kZWxldGU6XG4gICAgICAgIHJldHVybiBkZXN0cm95ZWQ7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICB9XG4gIH1cblxuICByZWNvcmRzLmZvckVhY2gocmVjb3JkID0+IGdlbmVyYXRlUmVjb3JkSlNPTkRhdGEoc3RvcmVXaXRoKHJlY29yZC5zdGF0dXMpLCByZWNvcmQsIGRhdGFUb0pTT04pKTtcbiAgcmV0dXJuIFtjcmVhdGVkLCB1cGRhdGVkLCBkZXN0cm95ZWRdO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0QXhpb3NDb25maWdBZGFwdGVyKGNvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnKTogQXhpb3NSZXF1ZXN0Q29uZmlnIHtcbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDb25maWcoXG4gIGNvbmZpZzogVHJhbnNwb3J0VHlwZSxcbiAgZGF0YVNldDogRGF0YVNldCxcbiAgZGF0YT86IGFueSxcbiAgcGFyYW1zPzogYW55LFxuICBvcHRpb25zPzogb2JqZWN0LFxuKTogQXhpb3NSZXF1ZXN0Q29uZmlnIHtcbiAgaWYgKGlzU3RyaW5nKGNvbmZpZykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXJsOiBjb25maWcsXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjb25maWcoeyAuLi5vcHRpb25zLCBkYXRhLCBkYXRhU2V0LCBwYXJhbXMgfSk7XG4gIH1cbiAgcmV0dXJuIGNvbmZpZztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF4aW9zQ29uZmlnQWRhcHRlcihcbiAgdHlwZTogVHJhbnNwb3J0VHlwZXMsXG4gIGRhdGFTZXQ6IERhdGFTZXQsXG4gIGRhdGE/OiBhbnksXG4gIHBhcmFtcz86IGFueSxcbiAgb3B0aW9ucz86IG9iamVjdCxcbik6IEF4aW9zUmVxdWVzdENvbmZpZyB7XG4gIGNvbnN0IG5ld0NvbmZpZzogQXhpb3NSZXF1ZXN0Q29uZmlnID0ge1xuICAgIGRhdGEsXG4gICAgcGFyYW1zLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9O1xuXG4gIGNvbnN0IHsgW3R5cGVdOiBnbG9iYWxDb25maWcsIGFkYXB0ZXI6IGdsb2JhbEFkYXB0ZXIgPSBkZWZhdWx0QXhpb3NDb25maWdBZGFwdGVyIH0gPVxuICAgIGdldENvbmZpZygndHJhbnNwb3J0JykgfHwge307XG4gIGNvbnN0IHsgW3R5cGVdOiBjb25maWcsIGFkYXB0ZXIgfSA9IGRhdGFTZXQudHJhbnNwb3J0O1xuICBpZiAoZ2xvYmFsQ29uZmlnKSB7XG4gICAgT2JqZWN0LmFzc2lnbihuZXdDb25maWcsIGdlbmVyYXRlQ29uZmlnKGdsb2JhbENvbmZpZywgZGF0YVNldCwgZGF0YSwgcGFyYW1zLCBvcHRpb25zKSk7XG4gIH1cbiAgaWYgKGNvbmZpZykge1xuICAgIE9iamVjdC5hc3NpZ24obmV3Q29uZmlnLCBnZW5lcmF0ZUNvbmZpZyhjb25maWcsIGRhdGFTZXQsIGRhdGEsIHBhcmFtcywgb3B0aW9ucykpO1xuICB9XG4gIGlmIChuZXdDb25maWcuZGF0YSAmJiBuZXdDb25maWcubWV0aG9kICYmIG5ld0NvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKSA9PT0gJ2dldCcpIHtcbiAgICBuZXdDb25maWcucGFyYW1zID0ge1xuICAgICAgLi4ubmV3Q29uZmlnLnBhcmFtcyxcbiAgICAgIC4uLm5ld0NvbmZpZy5kYXRhLFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIChhZGFwdGVyIHx8IGdsb2JhbEFkYXB0ZXIpKG5ld0NvbmZpZywgdHlwZSkgfHwgbmV3Q29uZmlnO1xufVxuXG4vLyDmn6Xor6LpobblsYLniLbkurLoioLngrlcbmV4cG9ydCBmdW5jdGlvbiBmaW5kUm9vdFBhcmVudChjaGlsZHJlbjpSZWNvcmQpe1xuICBpZihjaGlsZHJlbi5wYXJlbnQpe1xuICAgIHJldHVybiBmaW5kUm9vdFBhcmVudChjaGlsZHJlbi5wYXJlbnQpXG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlRm9yU3VibWl0KFxuICB0eXBlOiBTdWJtaXRUeXBlcyxcbiAgZGF0YTogb2JqZWN0W10sXG4gIGNvbmZpZ3M6IEF4aW9zUmVxdWVzdENvbmZpZ1tdLFxuICBkYXRhU2V0OiBEYXRhU2V0LFxuKTogb2JqZWN0W10ge1xuICBpZiAoZGF0YS5sZW5ndGgpIHtcbiAgICBjb25zdCBuZXdDb25maWcgPSBheGlvc0NvbmZpZ0FkYXB0ZXIodHlwZSwgZGF0YVNldCwgZGF0YSk7XG4gICAgaWYgKG5ld0NvbmZpZy51cmwpIHtcbiAgICAgIGNvbmZpZ3MucHVzaChuZXdDb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZXNwb25zZURhdGEoaXRlbTogYW55LCBkYXRhS2V5Pzogc3RyaW5nKTogb2JqZWN0W10ge1xuICBpZiAoaXRlbSkge1xuICAgIGlmIChpc0FycmF5KGl0ZW0pKSB7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gICAgaWYgKGlzT2JqZWN0KGl0ZW0pKSB7XG4gICAgICBpZiAoZGF0YUtleSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBPYmplY3RDaGFpblZhbHVlLmdldChpdGVtLCBkYXRhS2V5KTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIFtpdGVtXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShyZXN1bHQpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNPYmplY3QocmVzdWx0KSkge1xuICAgICAgICAgIHJldHVybiBbcmVzdWx0XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtpdGVtXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjb3JkVmFsdWUoXG4gIGRhdGE6IGFueSxcbiAgY2I6IChyZWNvcmQ6IFJlY29yZCwgZmllbGROYW1lOiBzdHJpbmcpID0+IGJvb2xlYW4sXG4gIGZpZWxkTmFtZT86IHN0cmluZyxcbikge1xuICBpZiAoZmllbGROYW1lKSB7XG4gICAgY29uc3QgZmllbGQgPSB0aGlzLmdldEZpZWxkKGZpZWxkTmFtZSk7XG4gICAgaWYgKGZpZWxkKSB7XG4gICAgICBjb25zdCBiaW5kID0gZmllbGQuZ2V0KCdiaW5kJyk7XG4gICAgICBpZiAoYmluZCkge1xuICAgICAgICBmaWVsZE5hbWUgPSBiaW5kO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB7IGRhdGFTZXQgfSA9IHRoaXM7XG4gICAgaWYgKGRhdGFTZXQpIHtcbiAgICAgIGNvbnN0IHsgY2hlY2tGaWVsZCB9ID0gZGF0YVNldC5wcm9wcztcbiAgICAgIGlmIChjaGVja0ZpZWxkICYmIGNoZWNrRmllbGQgPT09IGZpZWxkTmFtZSkge1xuICAgICAgICBjb25zdCB0cnVlVmFsdWUgPSBmaWVsZCA/IGZpZWxkLmdldChCb29sZWFuVmFsdWUudHJ1ZVZhbHVlKSA6IHRydWU7XG4gICAgICAgIGNvbnN0IGZhbHNlVmFsdWUgPSBmaWVsZCA/IGZpZWxkLmdldChCb29sZWFuVmFsdWUuZmFsc2VWYWx1ZSkgOiBmYWxzZTtcbiAgICAgICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gdGhpcztcbiAgICAgICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgICAgcmV0dXJuIGNoaWxkcmVuLmV2ZXJ5KGNoaWxkID0+IGNiKGNoaWxkLCBjaGVja0ZpZWxkKSA9PT0gdHJ1ZVZhbHVlKVxuICAgICAgICAgICAgPyB0cnVlVmFsdWVcbiAgICAgICAgICAgIDogZmFsc2VWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0Q2hhaW5WYWx1ZS5nZXQoZGF0YSwgZmllbGROYW1lIGFzIHN0cmluZyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGxzQmluZChcbiAgcHJvcHM6IER5bmFtaWNQcm9wc0FyZ3VtZW50cyxcbiAgbmFtZTogc3RyaW5nLFxuICBsYW5nOiBMYW5nLFxuICB0bHNLZXk6IHN0cmluZyxcbik6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHRscyA9IHByb3BzLnJlY29yZC5nZXQodGxzS2V5KSB8fCB7fTtcbiAgaWYgKG5hbWUgaW4gdGxzKSB7XG4gICAgcmV0dXJuIGAke3Rsc0tleX0uJHtuYW1lfS4ke2xhbmd9YDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc0ludGxGaWVsZChcbiAgbmFtZTogc3RyaW5nLFxuICBmaWVsZFByb3BzOiBGaWVsZFByb3BzLFxuICBjYWxsYmFjazogKG5hbWU6IHN0cmluZywgcHJvcHM6IEZpZWxkUHJvcHMpID0+IEZpZWxkLFxuICBkYXRhU2V0PzogRGF0YVNldCxcbik6IEZpZWxkIHtcbiAgY29uc3QgdGxzS2V5ID0gZ2V0Q29uZmlnKCd0bHNLZXknKTtcbiAgY29uc3QgeyBzdXBwb3J0cyB9ID0gbG9jYWxlQ29udGV4dDtcbiAgY29uc3QgbGFuZ3VhZ2VzID0gT2JqZWN0LmtleXMoc3VwcG9ydHMpO1xuICBjb25zdCB7IHR5cGUsIGR5bmFtaWNQcm9wcyB9ID0gZmllbGRQcm9wcztcbiAgaWYgKHR5cGUgPT09IEZpZWxkVHlwZS5pbnRsKSB7XG4gICAgbGFuZ3VhZ2VzLmZvckVhY2gobGFuZ3VhZ2UgPT5cbiAgICAgIGNhbGxiYWNrKGAke3Rsc0tleX0uJHtuYW1lfS4ke2xhbmd1YWdlfWAsIHtcbiAgICAgICAgdHlwZTogRmllbGRUeXBlLnN0cmluZyxcbiAgICAgICAgbGFiZWw6IGAke3N1cHBvcnRzW2xhbmd1YWdlXX1gLFxuICAgICAgfSksXG4gICAgKTtcbiAgICBjb25zdCB7IGxhbmcgPSBsb2NhbGVDb250ZXh0LmxvY2FsZS5sYW5nIH0gPSBkYXRhU2V0IHx8IHt9O1xuICAgIGNvbnN0IG5ld0R5bmFtaWNQcm9wcyA9XG4gICAgICB0eXBlb2YgZHluYW1pY1Byb3BzID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gcHJvcHMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4uZHluYW1pY1Byb3BzKHByb3BzKSxcbiAgICAgICAgICAgICAgYmluZDogdGxzQmluZChwcm9wcywgbmFtZSwgbGFuZywgdGxzS2V5KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmR5bmFtaWNQcm9wcyxcbiAgICAgICAgICAgIGJpbmQ6IHByb3BzID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRsc0JpbmQocHJvcHMsIG5hbWUsIGxhbmcsIHRsc0tleSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgcmV0dXJuIGNhbGxiYWNrKG5hbWUsIHtcbiAgICAgIC4uLmZpZWxkUHJvcHMsXG4gICAgICBkeW5hbWljUHJvcHM6IG5ld0R5bmFtaWNQcm9wcyxcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gY2FsbGJhY2sobmFtZSwgZmllbGRQcm9wcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5kQmluZEZpZWxkQnkobXlGaWVsZDogRmllbGQsIGZpZWxkczogRmllbGRzLCBwcm9wOiBzdHJpbmcpOiBGaWVsZCB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHZhbHVlID0gbXlGaWVsZC5nZXQocHJvcCk7XG4gIGNvbnN0IG15TmFtZSA9IG15RmllbGQubmFtZTtcbiAgcmV0dXJuIFsuLi5maWVsZHMudmFsdWVzKCldLmZpbmQoZmllbGQgPT4ge1xuICAgIGNvbnN0IGJpbmQgPSBmaWVsZC5nZXQoJ2JpbmQnKTtcbiAgICByZXR1cm4gYmluZCAmJiBiaW5kID09PSBgJHtteU5hbWV9LiR7dmFsdWV9YDtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzRmllbGRWYWx1ZSh2YWx1ZSwgZmllbGQ6IEZpZWxkLCBsYW5nOiBMYW5nLCBzaG93VmFsdWVJZk5vdEZvdW5kPzogYm9vbGVhbikge1xuICBjb25zdCB7IHR5cGUgfSA9IGZpZWxkO1xuICBpZiAodHlwZSA9PT0gRmllbGRUeXBlLm51bWJlcikge1xuICAgIGNvbnN0IHByZWNpc2lvbiA9IGdldFByZWNpc2lvbih2YWx1ZSB8fCAwKTtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBwcmVjaXNpb24sXG4gICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IHByZWNpc2lvbixcbiAgICB9O1xuICAgIHJldHVybiBmb3JtYXROdW1iZXIodmFsdWUsIGxhbmcsIG9wdGlvbnMpO1xuICB9XG4gIGlmICh0eXBlID09PSBGaWVsZFR5cGUuY3VycmVuY3kpIHtcbiAgICByZXR1cm4gZm9ybWF0Q3VycmVuY3kodmFsdWUsIGxhbmcsIHtcbiAgICAgIGN1cnJlbmN5OiBmaWVsZC5nZXQoJ2N1cnJlbmN5JyksXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZpZWxkLmdldFRleHQodmFsdWUsIHNob3dWYWx1ZUlmTm90Rm91bmQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGltaXQobGltaXQ6IGFueSwgcmVjb3JkOiBSZWNvcmQpIHtcbiAgaWYgKGlzU3RyaW5nKGxpbWl0KSAmJiByZWNvcmQuZ2V0RmllbGQobGltaXQpKSB7XG4gICAgcmV0dXJuIHJlY29yZC5nZXQobGltaXQpO1xuICB9XG4gIHJldHVybiBsaW1pdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkYXB0ZXJEYXRhVG9KU09OKFxuICBpc1NlbGVjdGVkPzogYm9vbGVhbixcbiAgbm9DYXNjYWRlPzogYm9vbGVhbixcbik6IERhdGFUb0pTT04gfCB1bmRlZmluZWQge1xuICBpZiAoaXNTZWxlY3RlZCkge1xuICAgIGlmIChub0Nhc2NhZGUpIHtcbiAgICAgIHJldHVybiBEYXRhVG9KU09OWydzZWxlY3RlZC1zZWxmJ107XG4gICAgfVxuICAgIHJldHVybiBEYXRhVG9KU09OLnNlbGVjdGVkO1xuICB9XG4gIGlmIChub0Nhc2NhZGUpIHtcbiAgICByZXR1cm4gRGF0YVRvSlNPTlsnZGlydHktc2VsZiddO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZURhdGEoZHM6IERhdGFTZXQpOiB7IGRpcnR5OiBib29sZWFuOyBkYXRhOiBvYmplY3RbXSB9IHtcbiAgbGV0IGRpcnR5ID0gZHMuZGVzdHJveWVkLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGRhdGE6IG9iamVjdFtdID0gZHMuZGF0YS5tYXAocmVjb3JkID0+IHtcbiAgICBjb25zdCBkID0gcmVjb3JkLnRvRGF0YSgpO1xuICAgIGlmIChkLl9fZGlydHkpIHtcbiAgICAgIGRpcnR5ID0gdHJ1ZTtcbiAgICB9XG4gICAgZGVsZXRlIGQuX19kaXJ0eTtcbiAgICByZXR1cm4gZDtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgZGlydHksXG4gICAgZGF0YSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSlNPTkRhdGEoXG4gIGRzOiBEYXRhU2V0LFxuICBpc1NlbGVjdD86IGJvb2xlYW4sXG4pOiB7IGRpcnR5OiBib29sZWFuOyBkYXRhOiBvYmplY3RbXSB9IHtcbiAgY29uc3QgeyBkYXRhVG9KU09OIH0gPSBkcztcbiAgY29uc3QgZGF0YTogb2JqZWN0W10gPSBbXTtcbiAgKGlzU2VsZWN0IHx8IHVzZVNlbGVjdGVkKGRhdGFUb0pTT04pID8gZHMuc2VsZWN0ZWQgOiBkcy5yZWNvcmRzKS5mb3JFYWNoKHJlY29yZCA9PlxuICAgIGdlbmVyYXRlUmVjb3JkSlNPTkRhdGEoZGF0YSwgcmVjb3JkLCBkYXRhVG9KU09OKSxcbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBkaXJ0eTogZGF0YS5sZW5ndGggPiAwLFxuICAgIGRhdGEsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RpcnR5UmVjb3JkKHJlY29yZCkge1xuICByZXR1cm4gcmVjb3JkLnN0YXR1cyAhPT0gUmVjb3JkU3RhdHVzLnN5bmMgfHwgcmVjb3JkLmRpcnR5O1xufVxuIl19