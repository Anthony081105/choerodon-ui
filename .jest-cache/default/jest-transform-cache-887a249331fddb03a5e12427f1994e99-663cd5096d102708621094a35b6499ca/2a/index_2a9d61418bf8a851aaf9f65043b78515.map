{"version":3,"sources":["trigger/index.jsx"],"names":["window","ALL_HANDLERS","IS_REACT_16","createPortal","Trigger","Component","children","PropTypes","action","showAction","hideAction","getPopupClassNameFromAlign","onPopupVisibleChange","afterPopupVisibleChange","popup","popupStyle","prefixCls","popupClassName","popupPlacement","builtinPlacements","popupTransitionName","popupAnimation","mouseEnterDelay","mouseLeaveDelay","zIndex","focusDelay","blurDelay","getPopupContainer","getDocument","getRootDomNode","forceRender","destroyPopupOnHide","mask","maskClosable","onPopupAlign","popupAlign","popupVisible","defaultPopupVisible","maskTransitionName","maskAnimation","stretch","string","noop","props","_","prevState","state","triggerAfterPopupVisibleChange","currentDocument","e","Date","preTime","Math","event","nextVisible","target","root","popupNode","className","align","mouseProps","getPopupClassFromAlign","savePopup","popupContainer","document","mountNode","visible","delayS","delay","setTimeout","clearTimeout","childPros","type","childCallback","callback","child","Children","newChildProps","key","trigger","getContainer","renderComponent","portal","handlePortalUpdate"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,IAAA,KAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,aAAA,CAAA,CAAA;;AACA,IAAA,SAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,sBAAA,CAAA,CAAA;;AACA,IAAA,iBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,8BAAA,CAAA,CAAA;;AACA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,SAAA,CAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,SAAA,CAAA;;AACA,IAAA,gBAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,yBAAA,CAAA,CAAA;;AACA,IAAA,OAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;;AAEA,SAAA,iBAAA,GAA6B;AAC3B,SAAA,EAAA;AACD;;AAED,SAAA,cAAA,GAA0B;AACxB,SAAOA,MAAM,CAAb,QAAA;AACD;;AAED,IAAMC,YAAY,GAAG,CAAA,SAAA,EAAA,aAAA,EAAA,cAAA,EAAA,cAAA,EAAA,cAAA,EAAA,SAAA,EAAA,QAAA,EAArB,eAAqB,CAArB;AAGA,IAAMC,WAAW,GAAG,CAAC,CAACC,SAAAA,CAAtB,YAAA;;IAEqBC,O;;;;;AAsEnB,WAAA,OAAA,CAAA,MAAA,EAAmB;AAAA,QAAA,KAAA;;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,IAAA,EAAA,OAAA;AACjB,IAAA,KAAA,GAAA,CAAA,GAAA,2BAAA,CAAA,SAAA,CAAA,EAAA,IAAA,EAAA,CAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,OAAA,EAAA,IAAA,CAAA,IAAA,EAAA,MAAA,CAAA,CAAA;AADiB,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,cAAA,EA2FJ,UAAA,CAAA,EAAO;AACpB,MAAA,KAAA,CAAA,UAAA,CAAA,cAAA,EAAA,CAAA;;AACA,MAAA,KAAA,CAAA,oBAAA,CAAA,IAAA,EAAgC,KAAA,CAAA,KAAA,CAAhC,eAAA;AA7FiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,cAAA,EAgGJ,UAAA,CAAA,EAAO;AACpB,MAAA,KAAA,CAAA,UAAA,CAAA,cAAA,EAAA,CAAA;;AACA,MAAA,KAAA,CAAA,oBAAA,CAAA,KAAA,EAAiC,KAAA,CAAA,KAAA,CAAjC,eAAA;AAlGiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,mBAAA,EAqGC,YAAM;AACxB,MAAA,KAAA,CAAA,eAAA;AAtGiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,mBAAA,EAyGC,UAAA,CAAA,EAAO;AACzB;AACA;AACA,UAAI6C,CAAC,CAADA,aAAAA,IAAmB,CAACA,CAAC,CAADA,aAAAA,CAApBA,UAAAA,IACF,KAAA,CADEA,UAAAA,IAEF,KAAA,CAAA,UAAA,CAFEA,eAAAA,IAGF,CAAA,GAAA,SAAA,CAAA,SAAA,CAAA,EAAS,KAAA,CAAA,UAAA,CAAT,eAAS,EAAT,EAA4CA,CAAC,CAH/C,aAGE,CAHF,EAGgE;AAC9D;AACD;;AACD,MAAA,KAAA,CAAA,oBAAA,CAAA,KAAA,EAAiC,KAAA,CAAA,KAAA,CAAjC,eAAA;AAlHiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,SAAA,EAqHT,UAAA,CAAA,EAAO;AACf,MAAA,KAAA,CAAA,UAAA,CAAA,SAAA,EADe,CACf,EADe,CAEf;;;AACA,MAAA,KAAA,CAAA,eAAA;;AACA,UAAI,KAAA,CAAJ,aAAI,EAAJ,EAA0B;AACxB,QAAA,KAAA,CAAA,SAAA,GAAiBC,IAAI,CAArB,GAAiBA,EAAjB;;AACA,QAAA,KAAA,CAAA,oBAAA,CAAA,IAAA,EAAgC,KAAA,CAAA,KAAA,CAAhC,UAAA;AACD;AA5HgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA,EA+HL,UAAA,CAAA,EAAO;AACnB,MAAA,KAAA,CAAA,UAAA,CAAA,aAAA,EAAA,CAAA;;AACA,MAAA,KAAA,CAAA,YAAA,GAAoBA,IAAI,CAAxB,GAAoBA,EAApB;AAjIiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,cAAA,EAoIJ,UAAA,CAAA,EAAO;AACpB,MAAA,KAAA,CAAA,UAAA,CAAA,cAAA,EAAA,CAAA;;AACA,MAAA,KAAA,CAAA,YAAA,GAAoBA,IAAI,CAAxB,GAAoBA,EAApB;AAtIiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,QAAA,EAyIV,UAAA,CAAA,EAAO;AACd,MAAA,KAAA,CAAA,UAAA,CAAA,QAAA,EAAA,CAAA;;AACA,MAAA,KAAA,CAAA,eAAA;;AACA,UAAI,KAAA,CAAJ,YAAI,EAAJ,EAAyB;AACvB,QAAA,KAAA,CAAA,oBAAA,CAAA,KAAA,EAAiC,KAAA,CAAA,KAAA,CAAjC,SAAA;AACD;AA9IgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,eAAA,EAiJH,UAAA,CAAA,EAAO;AACrBD,MAAAA,CAAC,CAADA,cAAAA;;AACA,MAAA,KAAA,CAAA,UAAA,CAAA,eAAA,EAAA,CAAA;;AACA,MAAA,KAAA,CAAA,eAAA,CAAA,IAAA;AApJiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,oBAAA,EAuJE,YAAM;AACzB,UAAI,KAAA,CAAJ,mBAAI,EAAJ,EAAgC;AAC9B,QAAA,KAAA,CAAA,KAAA;AACD;AA1JgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,SAAA,EA6JT,UAAA,KAAA,EAAW;AACnB,MAAA,KAAA,CAAA,UAAA,CAAA,SAAA,EADmB,KACnB,EADmB,CAEnB;;;AACA,UAAI,KAAA,CAAJ,SAAA,EAAoB;AAClB,YAAA,OAAA;;AACA,YAAI,KAAA,CAAA,YAAA,IAAqB,KAAA,CAAzB,YAAA,EAA4C;AAC1CE,UAAAA,OAAO,GAAGC,IAAI,CAAJA,GAAAA,CAAS,KAAA,CAATA,YAAAA,EAA4B,KAAA,CAAtCD,YAAUC,CAAVD;AADF,SAAA,MAEO,IAAI,KAAA,CAAJ,YAAA,EAAuB;AAC5BA,UAAAA,OAAO,GAAG,KAAA,CAAVA,YAAAA;AADK,SAAA,MAEA,IAAI,KAAA,CAAJ,YAAA,EAAuB;AAC5BA,UAAAA,OAAO,GAAG,KAAA,CAAVA,YAAAA;AACD;;AACD,YAAIC,IAAI,CAAJA,GAAAA,CAASD,OAAO,GAAG,KAAA,CAAnBC,SAAAA,IAAJ,EAAA,EAA6C;AAC3C;AACD;;AACD,QAAA,KAAA,CAAA,SAAA,GAAA,CAAA;AACD;;AACD,MAAA,KAAA,CAAA,YAAA,GAAA,CAAA;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,CAAA;AACAC,MAAAA,KAAK,CAALA,cAAAA;AACA,UAAMC,WAAW,GAAG,CAAC,KAAA,CAAA,KAAA,CAArB,YAAA;;AACA,UAAI,KAAA,CAAA,aAAA,MAAwB,CAAxB,WAAA,IAAwCA,WAAW,IAAI,KAAA,CAA3D,aAA2D,EAA3D,EAAiF;AAC/E,QAAA,KAAA,CAAA,eAAA,CAAqB,CAAC,KAAA,CAAA,KAAA,CAAtB,YAAA;AACD;AApLgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,iBAAA,EAuLD,UAAA,KAAA,EAAW;AAC3B,UAAI,KAAA,CAAA,KAAA,CAAA,IAAA,IAAmB,CAAC,KAAA,CAAA,KAAA,CAAxB,YAAA,EAAiD;AAC/C;AACD;;AACD,UAAMC,MAAM,GAAGF,KAAK,CAApB,MAAA;AACA,UAAMG,IAAI,GAAG,CAAA,GAAA,SAAA,CAAA,WAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAb,KAAa,CAAA,CAAb;;AACA,UAAMC,SAAS,GAAG,KAAA,CAAlB,eAAkB,EAAlB;;AACA,UAAI,CAAC,CAAA,GAAA,SAAA,CAAA,SAAA,CAAA,EAAA,IAAA,EAAD,MAAC,CAAD,IAA2B,CAAC,CAAA,GAAA,SAAA,CAAA,SAAA,CAAA,EAAA,SAAA,EAAhC,MAAgC,CAAhC,EAA6D;AAC3D,QAAA,KAAA,CAAA,KAAA;AACD;AAhMgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,gBAAA,EA2MF,YAAM;AAAA,UACb5B,cADa,GACM,KAAA,CADN,KACM,CADN,cAAA;;AAErB,UAAA,cAAA,EAAoB;AAClB,eAAOA,cAAP,EAAA;AADF,OAAA,MAEO;AACL,eAAO,CAAA,GAAA,SAAA,CAAA,WAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAP,KAAO,CAAA,CAAP;AACD;AAjNgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,wBAAA,EAoNM,UAAA,KAAA,EAAW;AAClC,UAAM6B,SAAS,GAAf,EAAA;AACA,UAAMf,KAAK,GAAG,KAAA,CAAd,KAAA;AAFkC,UAG1BzB,cAH0B,GAGuByB,KAHvB,CAAA,cAAA;AAAA,UAGVxB,iBAHU,GAGuBwB,KAHvB,CAAA,iBAAA;AAAA,UAGS3B,SAHT,GAGuB2B,KAHvB,CAAA,SAAA;;AAIlC,UAAIzB,cAAc,IAAlB,iBAAA,EAAyC;AACvCwC,QAAAA,SAAS,CAATA,IAAAA,CAAe,CAAA,GAAA,MAAA,CAAA,0BAAA,EAAA,iBAAA,EAAA,SAAA,EAAfA,KAAe,CAAfA;AACD;;AACD,UAAIf,KAAK,CAAT,0BAAA,EAAsC;AACpCe,QAAAA,SAAS,CAATA,IAAAA,CAAef,KAAK,CAALA,0BAAAA,CAAfe,KAAef,CAAfe;AACD;;AACD,aAAOA,SAAS,CAATA,IAAAA,CAAP,GAAOA,CAAP;AA9NiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,cAAA,EA0OJ,YAAM;AAAA,UAAA,WAAA,GAKf,KAAA,CALe,KAAA;AAAA,UAEjB1C,SAFiB,GAAA,WAAA,CAAA,SAAA;AAAA,UAENe,kBAFM,GAAA,WAAA,CAAA,kBAAA;AAAA,UAEcd,cAFd,GAAA,WAAA,CAAA,cAAA;AAAA,UAE8BT,MAF9B,GAAA,WAAA,CAAA,MAAA;AAAA,UAGjB0B,YAHiB,GAAA,WAAA,CAAA,YAAA;AAAA,UAGHb,cAHG,GAAA,WAAA,CAAA,cAAA;AAAA,UAGaD,mBAHb,GAAA,WAAA,CAAA,mBAAA;AAAA,UAGkCL,UAHlC,GAAA,WAAA,CAAA,UAAA;AAAA,UAIjBiB,IAJiB,GAAA,WAAA,CAAA,IAAA;AAAA,UAIXO,aAJW,GAAA,WAAA,CAAA,aAAA;AAAA,UAIID,kBAJJ,GAAA,WAAA,CAAA,kBAAA;AAAA,UAIwBd,MAJxB,GAAA,WAAA,CAAA,MAAA;AAAA,UAIgCV,KAJhC,GAAA,WAAA,CAAA,KAAA;AAAA,UAIuC0B,OAJvC,GAAA,WAAA,CAAA,OAAA;;AAAA,UAAA,qBAAA,GAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA;AAAA,UAMXM,KANW,GAAA,qBAAA,CAAA,KAAA;;AAQnB,UAAMa,KAAK,GAAG,KAAA,CAAd,aAAc,EAAd;;AAEA,UAAMC,UAAU,GAAhB,EAAA;;AACA,UAAI,KAAA,CAAJ,kBAAI,EAAJ,EAA+B;AAC7BA,QAAAA,UAAU,CAAVA,YAAAA,GAA0B,KAAA,CAA1BA,iBAAAA;AACD;;AACD,UAAI,KAAA,CAAJ,kBAAI,EAAJ,EAA+B;AAC7BA,QAAAA,UAAU,CAAVA,YAAAA,GAA0B,KAAA,CAA1BA,iBAAAA;AACD;;AAED,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,MAAA,CAAD,SAAC,CAAD,EAAA,CAAA,GAAA,SAAA,CAAA,SAAA,CAAA,EAAA;AACE,QAAA,SAAS,EADX,SAAA;AAEE,QAAA,kBAAkB,EAFpB,kBAAA;AAGE,QAAA,OAAO,EAAEd,KAAK,CAHhB,YAAA;AAIE,QAAA,SAAS,EAJX,cAAA;AAKE,QAAA,MAAM,EALR,MAAA;AAME,QAAA,KAAK,EANP,KAAA;AAOE,QAAA,OAAO,EAPT,YAAA;AAQE,QAAA,SAAS,EARX,cAAA;AASE,QAAA,qBAAqB,EAAE,KAAA,CAAKe;AAT9B,OAAA,EAAA,UAAA,EAAA;AAWE,QAAA,OAAO,EAXT,OAAA;AAYE,QAAA,cAAc,EAAE,KAAA,CAZlB,cAAA;AAaE,QAAA,KAAK,EAbP,UAAA;AAcE,QAAA,IAAI,EAdN,IAAA;AAeE,QAAA,MAAM,EAfR,MAAA;AAgBE,QAAA,cAAc,EAhBhB,mBAAA;AAiBE,QAAA,aAAa,EAjBf,aAAA;AAkBE,QAAA,kBAAkB,EAlBpB,kBAAA;AAmBE,QAAA,GAAG,EAAE,KAAA,CAAKC;AAnBZ,OAAA,CAAA,EAqBG,OAAA,KAAA,KAAA,UAAA,GAA8BhD,KAA9B,EAAA,GAtBL,KACE,CADF;AA5PiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,cAAA,EAuRJ,YAAM;AAAA,UAAA,sBAAA,GAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA;AAAA,UACX6B,KADW,GAAA,sBAAA,CAAA,KAAA;;AAEnB,UAAMoB,cAAc,GAAGC,QAAQ,CAARA,aAAAA,CAFJ,KAEIA,CAAvB,CAFmB,CAGnB;AACA;;AACAD,MAAAA,cAAc,CAAdA,KAAAA,CAAAA,QAAAA,GAAAA,UAAAA;AACAA,MAAAA,cAAc,CAAdA,KAAAA,CAAAA,GAAAA,GAAAA,GAAAA;AACAA,MAAAA,cAAc,CAAdA,KAAAA,CAAAA,IAAAA,GAAAA,GAAAA;AACAA,MAAAA,cAAc,CAAdA,KAAAA,CAAAA,KAAAA,GAAAA,MAAAA;AACA,UAAME,SAAS,GAAGtB,KAAK,CAALA,iBAAAA,GAA0BA,KAAK,CAALA,iBAAAA,CAAwB,CAAA,GAAA,SAAA,CAAA,WAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAlDA,KAAkD,CAAA,CAAxBA,CAA1BA,GAAuEA,KAAK,CAALA,WAAAA,GAAzF,IAAA;AACAsB,MAAAA,SAAS,CAATA,WAAAA,CAAAA,cAAAA;AACA,aAAA,cAAA;AAlSiB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,oBAAA,EAiTE,YAAM;AACzB,UAAI,KAAA,CAAA,gBAAA,KAA0B,KAAA,CAAA,KAAA,CAA9B,YAAA,EAAuD;AACrD,QAAA,KAAA,CAAA,KAAA,CAAA,uBAAA,CAAmC,KAAA,CAAA,KAAA,CAAnC,YAAA;AACD;AApTgB,KAAA;AAAA,KAAA,GAAA,gBAAA,CAAA,SAAA,CAAA,EAAA,CAAA,GAAA,uBAAA,CAAA,SAAA,CAAA,EAAA,KAAA,CAAA,EAAA,WAAA,EAkaP,UAAA,IAAA,EAAU;AACpB,MAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AAnaiB,KAAA;AAGjB,QAAA,YAAA;;AACA,QAAI,kBAAJ,MAAA,EAA6B;AAC3B7B,MAAAA,YAAY,GAAG,CAAC,CAACO,MAAK,CAAtBP,YAAAA;AADF,KAAA,MAEO;AACLA,MAAAA,YAAY,GAAG,CAAC,CAACO,MAAK,CAAtBP,mBAAAA;AACD;;AAED,IAAA,KAAA,CAAA,gBAAA,GAAA,YAAA;AAEA,IAAA,KAAA,CAAA,KAAA,GAAa;AACXA,MAAAA,YAAY,EAAZA;AADW,KAAb;AAZiB,WAAA,KAAA;AAelB;;;;yCAEoB;AAAA,UAAA,MAAA,GAAA,IAAA;;AACnBnC,MAAAA,YAAY,CAAZA,OAAAA,CAAqB,UAAA,CAAA,EAAO;AAC1B,QAAA,MAAI,CAAA,OAAA,MAAA,CAAJ,CAAI,CAAA,CAAJ,GAAmB,UAAA,CAAA,EAAO;AACxB,UAAA,MAAI,CAAJ,UAAA,CAAA,CAAA,EAAA,CAAA;AADF,SAAA;AADFA,OAAAA;AAKD;;;wCAEmB;AAClB,WAAA,kBAAA,CAAA,EAAA,EAA4B;AAC1BmC,QAAAA,YAAY,EAAE,KAAA,KAAA,CAAWA;AADC,OAA5B;AAGD;;;oDAE2C;AAAA,UAAhBA,YAAgB,GAAA,IAAA,CAAhBA,YAAgB;;AAC1C,UAAIA,YAAY,KAAhB,SAAA,EAAgC;AAC9B,aAAA,QAAA,CAAc;AACZA,UAAAA,YAAY,EAAZA;AADY,SAAd;AAGD;AACF;;;uCAEkBQ,C,EAAGC,S,EAAW;AAC/B,UAAMF,KAAK,GAAG,KAAd,KAAA;AACA,UAAMG,KAAK,GAAG,KAAd,KAAA;;AACA,UAAMC,8BAA8B,GAAG,SAAjCA,8BAAiC,GAAM;AAC3C,YAAIF,SAAS,CAATA,YAAAA,KAA2BC,KAAK,CAApC,YAAA,EAAmD;AACjDH,UAAAA,KAAK,CAALA,uBAAAA,CAA8BG,KAAK,CAAnCH,YAAAA;AACD;AAHH,OAAA;;AAKA,UAAI,CAAJ,WAAA,EAAkB;AAChB,aAAA,eAAA,CAAA,IAAA,EAAA,8BAAA;AACD;;AAED,WAAA,gBAAA,GAAwBE,SAAS,CAZF,YAY/B,CAZ+B,CAc/B;AACA;AACA;;AACA,UAAIC,KAAK,CAAT,YAAA,EAAwB;AACtB,YAAA,eAAA;;AACA,YAAI,CAAC,KAAD,mBAAA,KAA8B,KAAA,aAAA,MAAwB,KAA1D,mBAA0D,EAAtD,CAAJ,EAAuF;AACrFE,UAAAA,eAAe,GAAGL,KAAK,CAAvBK,WAAkBL,EAAlBK;AACA,eAAA,mBAAA,GAA2B,CAAA,GAAA,iBAAA,CAAA,SAAA,CAAA,EAAA,eAAA,EAAA,WAAA,EACZ,KADf,eAA2B,CAA3B;AAJoB,SAAA,CAOtB;;;AACA,YAAI,CAAC,KAAL,mBAAA,EAA+B;AAC7BA,UAAAA,eAAe,GAAGA,eAAe,IAAIL,KAAK,CAA1CK,WAAqCL,EAArCK;AACA,eAAA,mBAAA,GAA2B,CAAA,GAAA,iBAAA,CAAA,SAAA,CAAA,EAAA,eAAA,EAAA,YAAA,EACX,KADhB,eAA2B,CAA3B;AAVoB,SAAA,CAatB;;;AACA,YAAI,CAAC,KAAD,0BAAA,IAAoC,KAAxC,mBAAwC,EAAxC,EAAoE;AAClEA,UAAAA,eAAe,GAAGA,eAAe,IAAIL,KAAK,CAA1CK,WAAqCL,EAArCK;AACA,eAAA,0BAAA,GAAkC,CAAA,GAAA,iBAAA,CAAA,SAAA,CAAA,EAAA,eAAA,EAAA,QAAA,EACtB,KADZ,kBAAkC,CAAlC;AAhBoB,SAAA,CAmBtB;;;AACA,YAAI,CAAC,KAAD,0BAAA,IAAoC,KAAxC,mBAAwC,EAAxC,EAAoE;AAClE,eAAA,0BAAA,GAAkC,CAAA,GAAA,iBAAA,CAAA,SAAA,CAAA,EAAA,MAAA,EAAA,MAAA,EACxB,KADV,kBAAkC,CAAlC;AAED;;AACD;AACD;;AAED,WAAA,mBAAA;AACD;;;2CAEsB;AACrB,WAAA,eAAA;AACA,WAAA,mBAAA;AACD;;;sCA0GiB;AAChB;AACA,UAAI,KAAA,UAAA,IAAmB,KAAA,UAAA,CAAvB,eAAA,EAAwD;AACtD,eAAO,KAAA,UAAA,CAAP,eAAO,EAAP;AACD;;AACD,aAAA,IAAA;AACD;;;oCAwBe;AACd,UAAML,KAAK,GAAG,KAAd,KAAA;AADc,UAENzB,cAFM,GAE4CyB,KAF5C,CAAA,cAAA;AAAA,UAEUR,UAFV,GAE4CQ,KAF5C,CAAA,UAAA;AAAA,UAEsBxB,iBAFtB,GAE4CwB,KAF5C,CAAA,iBAAA;;AAGd,UAAIzB,cAAc,IAAlB,iBAAA,EAAyC;AACvC,eAAO,CAAA,GAAA,MAAA,CAAA,qBAAA,EAAA,iBAAA,EAAA,cAAA,EAAP,UAAO,CAAP;AACD;;AACD,aAAA,UAAA;AACD;;;oCA6DekB,Y,EAAc;AAC5B,WAAA,eAAA;;AACA,UAAI,KAAA,KAAA,CAAA,YAAA,KAAJ,YAAA,EAA8C;AAC5C,YAAI,EAAE,kBAAkB,KAAxB,KAAI,CAAJ,EAAqC;AACnC,eAAA,QAAA,CAAc;AACZA,YAAAA,YAAY,EAAZA;AADY,WAAd;AAGD;;AACD,aAAA,KAAA,CAAA,oBAAA,CAAA,YAAA;AACD;AACF;;;yCAQoB8B,O,EAASC,M,EAAQ;AAAA,UAAA,MAAA,GAAA,IAAA;;AACpC,UAAMC,KAAK,GAAGD,MAAM,GAApB,IAAA;AACA,WAAA,eAAA;;AACA,UAAA,KAAA,EAAW;AACT,aAAA,UAAA,GAAkBE,UAAU,CAAC,YAAM;AACjC,UAAA,MAAI,CAAJ,eAAA,CAAA,OAAA;;AACA,UAAA,MAAI,CAAJ,eAAA;AAF0B,SAAA,EAA5B,KAA4B,CAA5B;AADF,OAAA,MAKO;AACL,aAAA,eAAA,CAAA,OAAA;AACD;AACF;;;sCAEiB;AAChB,UAAI,KAAJ,UAAA,EAAqB;AACnBC,QAAAA,YAAY,CAAC,KAAbA,UAAY,CAAZA;AACA,aAAA,UAAA,GAAA,IAAA;AACD;AACF;;;0CAEqB;AACpB,UAAI,KAAJ,mBAAA,EAA8B;AAC5B,aAAA,mBAAA,CAAA,MAAA;AACA,aAAA,mBAAA,GAAA,IAAA;AACD;;AAED,UAAI,KAAJ,0BAAA,EAAqC;AACnC,aAAA,0BAAA,CAAA,MAAA;AACA,aAAA,0BAAA,GAAA,IAAA;AACD;;AAED,UAAI,KAAJ,0BAAA,EAAqC;AACnC,aAAA,0BAAA,CAAA,MAAA;AACA,aAAA,0BAAA,GAAA,IAAA;AACD;;AAED,UAAI,KAAJ,mBAAA,EAA8B;AAC5B,aAAA,mBAAA,CAAA,MAAA;AACA,aAAA,mBAAA,GAAA,IAAA;AACD;AACF;;;oCAEejB,K,EAAO;AACrB,UAAMkB,SAAS,GAAG,KAAA,KAAA,CAAA,QAAA,CAAlB,KAAA;AACA,UAAM5B,KAAK,GAAG,KAAd,KAAA;;AACA,UAAI4B,SAAS,CAATA,KAAS,CAATA,IAAoB5B,KAAK,CAA7B,KAA6B,CAA7B,EAAsC;AACpC,eAAO,KAAA,OAAA,MAAA,CAAP,KAAO,CAAA,CAAP;AACD;;AACD,aAAO4B,SAAS,CAATA,KAAS,CAATA,IAAoB5B,KAAK,CAAhC,KAAgC,CAAhC;AACD;;;oCAEe;AAAA,UAAA,YAAA,GACiB,KADjB,KAAA;AAAA,UACNnC,MADM,GAAA,YAAA,CAAA,MAAA;AAAA,UACEC,UADF,GAAA,YAAA,CAAA,UAAA;AAEd,aAAOD,MAAM,CAANA,OAAAA,CAAAA,OAAAA,MAA4B,CAA5BA,CAAAA,IAAkCC,UAAU,CAAVA,OAAAA,CAAAA,OAAAA,MAAgC,CAAzE,CAAA;AACD;;;0CAEqB;AAAA,UAAA,YAAA,GACW,KADX,KAAA;AAAA,UACZD,MADY,GAAA,YAAA,CAAA,MAAA;AAAA,UACJC,UADI,GAAA,YAAA,CAAA,UAAA;AAEpB,aAAOD,MAAM,CAANA,OAAAA,CAAAA,aAAAA,MAAkC,CAAlCA,CAAAA,IAAwCC,UAAU,CAAVA,OAAAA,CAAAA,aAAAA,MAAsC,CAArF,CAAA;AACD;;;oCAEe;AAAA,UAAA,YAAA,GACiB,KADjB,KAAA;AAAA,UACND,MADM,GAAA,YAAA,CAAA,MAAA;AAAA,UACEE,UADF,GAAA,YAAA,CAAA,UAAA;AAEd,aAAOF,MAAM,CAANA,OAAAA,CAAAA,OAAAA,MAA4B,CAA5BA,CAAAA,IAAkCE,UAAU,CAAVA,OAAAA,CAAAA,OAAAA,MAAgC,CAAzE,CAAA;AACD;;;yCAEoB;AAAA,UAAA,YAAA,GACY,KADZ,KAAA;AAAA,UACXF,MADW,GAAA,YAAA,CAAA,MAAA;AAAA,UACHC,UADG,GAAA,YAAA,CAAA,UAAA;AAEnB,aAAOD,MAAM,CAANA,OAAAA,CAAAA,OAAAA,MAA4B,CAA5BA,CAAAA,IAAkCC,UAAU,CAAVA,OAAAA,CAAAA,YAAAA,MAAqC,CAA9E,CAAA;AACD;;;yCAEoB;AAAA,UAAA,YAAA,GACY,KADZ,KAAA;AAAA,UACXD,MADW,GAAA,YAAA,CAAA,MAAA;AAAA,UACHE,UADG,GAAA,YAAA,CAAA,UAAA;AAEnB,aAAOF,MAAM,CAANA,OAAAA,CAAAA,OAAAA,MAA4B,CAA5BA,CAAAA,IAAkCE,UAAU,CAAVA,OAAAA,CAAAA,YAAAA,MAAqC,CAA9E,CAAA;AACD;;;oCAEe;AAAA,UAAA,YAAA,GACiB,KADjB,KAAA;AAAA,UACNF,MADM,GAAA,YAAA,CAAA,MAAA;AAAA,UACEC,UADF,GAAA,YAAA,CAAA,UAAA;AAEd,aAAOD,MAAM,CAANA,OAAAA,CAAAA,OAAAA,MAA4B,CAA5BA,CAAAA,IAAkCC,UAAU,CAAVA,OAAAA,CAAAA,OAAAA,MAAgC,CAAzE,CAAA;AACD;;;mCAEc;AAAA,UAAA,YAAA,GACkB,KADlB,KAAA;AAAA,UACLD,MADK,GAAA,YAAA,CAAA,MAAA;AAAA,UACGE,UADH,GAAA,YAAA,CAAA,UAAA;AAEb,aAAOF,MAAM,CAANA,OAAAA,CAAAA,OAAAA,MAA4B,CAA5BA,CAAAA,IAAkCE,UAAU,CAAVA,OAAAA,CAAAA,MAAAA,MAA+B,CAAxE,CAAA;AACD;;;sCAEiB;AAChB,UAAI,KAAA,KAAA,CAAA,YAAA,IAA2B,KAA3B,UAAA,IAA8C,KAAA,UAAA,CAAlD,aAAA,EAAiF;AAC/E,aAAA,UAAA,CAAA,aAAA,CAAA,UAAA;AACD;AACF;;;+BAEU8D,I,EAAMvB,C,EAAG;AAClB,UAAMwB,aAAa,GAAG,KAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAtB,IAAsB,CAAtB;;AACA,UAAA,aAAA,EAAmB;AACjBA,QAAAA,aAAa,CAAbA,CAAa,CAAbA;AACD;;AACD,UAAMC,QAAQ,GAAG,KAAA,KAAA,CAAjB,IAAiB,CAAjB;;AACA,UAAA,QAAA,EAAc;AACZA,QAAAA,QAAQ,CAARA,CAAQ,CAARA;AACD;AACF;;;4BAEO;AACN,WAAA,eAAA,CAAA,KAAA;AACD;;;6BAMQ;AAAA,UAAA,MAAA,GAAA,IAAA;;AAAA,UACCtC,YADD,GACkB,KADlB,KACkB,CADlB,YAAA;AAEP,UAAMO,KAAK,GAAG,KAAd,KAAA;AACA,UAAMrC,QAAQ,GAAGqC,KAAK,CAAtB,QAAA;;AACA,UAAMgC,KAAK,GAAGC,MAAAA,CAAAA,QAAAA,CAAAA,IAAAA,CAAd,QAAcA,CAAd;;AACA,UAAMC,aAAa,GAAG;AAAEC,QAAAA,GAAG,EAAE;AAAP,OAAtB;;AAEA,UAAI,KAAJ,mBAAI,EAAJ,EAAgC;AAC9BD,QAAAA,aAAa,CAAbA,aAAAA,GAA8B,KAA9BA,aAAAA;AADF,OAAA,MAEO;AACLA,QAAAA,aAAa,CAAbA,aAAAA,GAA8B,KAAA,eAAA,CAA9BA,eAA8B,CAA9BA;AACD;;AAED,UAAI,KAAA,aAAA,MAAwB,KAA5B,aAA4B,EAA5B,EAAkD;AAChDA,QAAAA,aAAa,CAAbA,OAAAA,GAAwB,KAAxBA,OAAAA;AACAA,QAAAA,aAAa,CAAbA,WAAAA,GAA4B,KAA5BA,WAAAA;AACAA,QAAAA,aAAa,CAAbA,YAAAA,GAA6B,KAA7BA,YAAAA;AAHF,OAAA,MAIO;AACLA,QAAAA,aAAa,CAAbA,OAAAA,GAAwB,KAAA,eAAA,CAAxBA,SAAwB,CAAxBA;AACAA,QAAAA,aAAa,CAAbA,WAAAA,GAA4B,KAAA,eAAA,CAA5BA,aAA4B,CAA5BA;AACAA,QAAAA,aAAa,CAAbA,YAAAA,GAA6B,KAAA,eAAA,CAA7BA,cAA6B,CAA7BA;AACD;;AACD,UAAI,KAAJ,kBAAI,EAAJ,EAA+B;AAC7BA,QAAAA,aAAa,CAAbA,YAAAA,GAA6B,KAA7BA,YAAAA;AADF,OAAA,MAEO;AACLA,QAAAA,aAAa,CAAbA,YAAAA,GAA6B,KAAA,eAAA,CAA7BA,cAA6B,CAA7BA;AACD;;AACD,UAAI,KAAJ,kBAAI,EAAJ,EAA+B;AAC7BA,QAAAA,aAAa,CAAbA,YAAAA,GAA6B,KAA7BA,YAAAA;AADF,OAAA,MAEO;AACLA,QAAAA,aAAa,CAAbA,YAAAA,GAA6B,KAAA,eAAA,CAA7BA,cAA6B,CAA7BA;AACD;;AACD,UAAI,KAAA,aAAA,MAAwB,KAA5B,YAA4B,EAA5B,EAAiD;AAC/CA,QAAAA,aAAa,CAAbA,OAAAA,GAAwB,KAAxBA,OAAAA;AACAA,QAAAA,aAAa,CAAbA,MAAAA,GAAuB,KAAvBA,MAAAA;AAFF,OAAA,MAGO;AACLA,QAAAA,aAAa,CAAbA,OAAAA,GAAwB,KAAA,eAAA,CAAxBA,SAAwB,CAAxBA;AACAA,QAAAA,aAAa,CAAbA,MAAAA,GAAuB,KAAA,eAAA,CAAvBA,QAAuB,CAAvBA;AACD;;AAED,UAAME,OAAO,GAAG,CAAA,GAAA,MAAA,CAAA,YAAA,EAAA,KAAA,EAAhB,aAAgB,CAAhB;;AAEA,UAAI,CAAJ,WAAA,EAAkB;AAChB,eACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,gBAAA,CAAD,SAAC,CAAD,EAAA;AACE,UAAA,MAAM,EADR,IAAA;AAEE,UAAA,OAAO,EAFT,YAAA;AAGE,UAAA,SAAS,EAHX,KAAA;AAIE,UAAA,WAAW,EAAEpC,KAAK,CAJpB,WAAA;AAKE,UAAA,YAAY,EAAE,KALhB,YAAA;AAME,UAAA,YAAY,EAAE,KAAKqC;AANrB,SAAA,EAQG,UAAA,KAAA,EAAyB;AAAA,cAAtBC,eAAsB,GAAA,KAAA,CAAtBA,eAAsB;AACxB,UAAA,MAAI,CAAJ,eAAA,GAAA,eAAA;AACA,iBAAA,OAAA;AAXN,SACE,CADF;AAeD;;AAED,UA5DO,MA4DP,CA5DO,CA6DP;;AACA,UAAI7C,YAAY,IAAI,KAAhBA,UAAAA,IAAmCO,KAAK,CAA5C,WAAA,EAA0D;AACxDuC,QAAAA,MAAM,GACJ,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,OAAA,CAAD,SAAC,CAAD,EAAA;AACE,UAAA,GAAG,EADL,QAAA;AAEE,UAAA,YAAY,EAAE,KAFhB,YAAA;AAGE,UAAA,SAAS,EAAE,KAAKC;AAHlB,SAAA,EAKG,KANLD,YAMK,EALH,CADFA;AASD;;AAED,aAAO,CAAA,OAAA,EAAP,MAAO,CAAP;AAID;;;EA1jBkC7E,MAAAA,CAAAA,S;;;iCAAhBD,O,eACA;AACjBE,EAAAA,QAAQ,EAAEC,UAAAA,CAAAA,SAAAA,CAAAA,CADO,GAAA;AAEjBC,EAAAA,MAAM,EAAED,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,SAAAA,CAAoB,CAACA,UAAAA,CAAAA,SAAAA,CAAAA,CAAD,MAAA,EAAmBA,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,OAAAA,CAAkBA,UAAAA,CAAAA,SAAAA,CAAAA,CAFhD,MAE8BA,CAAnB,CAApBA,CAFS;AAGjBE,EAAAA,UAAU,EAAEF,UAAAA,CAAAA,SAAAA,CAAAA,CAHK,GAAA;AAIjBG,EAAAA,UAAU,EAAEH,UAAAA,CAAAA,SAAAA,CAAAA,CAJK,GAAA;AAKjBI,EAAAA,0BAA0B,EAAEJ,UAAAA,CAAAA,SAAAA,CAAAA,CALX,GAAA;AAMjBK,EAAAA,oBAAoB,EAAEL,UAAAA,CAAAA,SAAAA,CAAAA,CANL,IAAA;AAOjBM,EAAAA,uBAAuB,EAAEN,UAAAA,CAAAA,SAAAA,CAAAA,CAPR,IAAA;AAQjBO,EAAAA,KAAK,EAAEP,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,SAAAA,CAAoB,CACzBA,UAAAA,CAAAA,SAAAA,CAAAA,CADyB,IAAA,EAEzBA,UAAAA,CAAAA,SAAAA,CAAAA,CAFKA,IAAoB,CAApBA,EARU,UAAA;AAYjBQ,EAAAA,UAAU,EAAER,UAAAA,CAAAA,SAAAA,CAAAA,CAZK,MAAA;AAajBS,EAAAA,SAAS,EAAET,UAAAA,CAAAA,SAAAA,CAAAA,CAbM,MAAA;AAcjBU,EAAAA,cAAc,EAAEV,UAAAA,CAAAA,SAAAA,CAAAA,CAdC,MAAA;AAejBW,EAAAA,cAAc,EAAEX,UAAAA,CAAAA,SAAAA,CAAAA,CAfC,MAAA;AAgBjBY,EAAAA,iBAAiB,EAAEZ,UAAAA,CAAAA,SAAAA,CAAAA,CAhBF,MAAA;AAiBjBa,EAAAA,mBAAmB,EAAEb,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,SAAAA,CAAoB,CACvCA,UAAAA,CAAAA,SAAAA,CAAAA,CADuC,MAAA,EAEvCA,UAAAA,CAAAA,SAAAA,CAAAA,CAnBe,MAiBwB,CAApBA,CAjBJ;AAqBjBc,EAAAA,cAAc,EAAEd,UAAAA,CAAAA,SAAAA,CAAAA,CArBC,GAAA;AAsBjBe,EAAAA,eAAe,EAAEf,UAAAA,CAAAA,SAAAA,CAAAA,CAtBA,MAAA;AAuBjBgB,EAAAA,eAAe,EAAEhB,UAAAA,CAAAA,SAAAA,CAAAA,CAvBA,MAAA;AAwBjBiB,EAAAA,MAAM,EAAEjB,UAAAA,CAAAA,SAAAA,CAAAA,CAxBS,MAAA;AAyBjBkB,EAAAA,UAAU,EAAElB,UAAAA,CAAAA,SAAAA,CAAAA,CAzBK,MAAA;AA0BjBmB,EAAAA,SAAS,EAAEnB,UAAAA,CAAAA,SAAAA,CAAAA,CA1BM,MAAA;AA2BjBoB,EAAAA,iBAAiB,EAAEpB,UAAAA,CAAAA,SAAAA,CAAAA,CA3BF,IAAA;AA4BjBqB,EAAAA,WAAW,EAAErB,UAAAA,CAAAA,SAAAA,CAAAA,CA5BI,IAAA;AA6BjBsB,EAAAA,cAAc,EAAEtB,UAAAA,CAAAA,SAAAA,CAAAA,CA7BC,IAAA;AA8BjBuB,EAAAA,WAAW,EAAEvB,UAAAA,CAAAA,SAAAA,CAAAA,CA9BI,IAAA;AA+BjBwB,EAAAA,kBAAkB,EAAExB,UAAAA,CAAAA,SAAAA,CAAAA,CA/BH,IAAA;AAgCjByB,EAAAA,IAAI,EAAEzB,UAAAA,CAAAA,SAAAA,CAAAA,CAhCW,IAAA;AAiCjB0B,EAAAA,YAAY,EAAE1B,UAAAA,CAAAA,SAAAA,CAAAA,CAjCG,IAAA;AAkCjB2B,EAAAA,YAAY,EAAE3B,UAAAA,CAAAA,SAAAA,CAAAA,CAlCG,IAAA;AAmCjB4B,EAAAA,UAAU,EAAE5B,UAAAA,CAAAA,SAAAA,CAAAA,CAnCK,MAAA;AAoCjB6B,EAAAA,YAAY,EAAE7B,UAAAA,CAAAA,SAAAA,CAAAA,CApCG,IAAA;AAqCjB8B,EAAAA,mBAAmB,EAAE9B,UAAAA,CAAAA,SAAAA,CAAAA,CArCJ,IAAA;AAsCjB+B,EAAAA,kBAAkB,EAAE/B,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,SAAAA,CAAoB,CACtCA,UAAAA,CAAAA,SAAAA,CAAAA,CADsC,MAAA,EAEtCA,UAAAA,CAAAA,SAAAA,CAAAA,CAxCe,MAsCuB,CAApBA,CAtCH;AA0CjBgC,EAAAA,aAAa,EAAEhC,UAAAA,CAAAA,SAAAA,CAAAA,CA1CE,MAAA;AA2CjBiC,EAAAA,OAAO,EAAEjC,UAAAA,CAAAA,SAAAA,CAAAA,CAAUkC;AA3CF,C;iCADArC,O,kBA+CG;AACpBY,EAAAA,SAAS,EADW,kBAAA;AAEpBL,EAAAA,0BAA0B,EAFN,iBAAA;AAGpBiB,EAAAA,WAAW,EAHS,cAAA;AAIpBhB,EAAAA,oBAAoB,EAAE8B,KAAAA,CAJF,SAIEA,CAJF;AAKpB7B,EAAAA,uBAAuB,EAAE6B,KAAAA,CALL,SAKKA,CALL;AAMpBR,EAAAA,YAAY,EAAEQ,KAAAA,CANM,SAMNA,CANM;AAOpBzB,EAAAA,cAAc,EAPM,EAAA;AAQpBK,EAAAA,eAAe,EARK,CAAA;AASpBC,EAAAA,eAAe,EATK,GAAA;AAUpBE,EAAAA,UAAU,EAVU,CAAA;AAWpBC,EAAAA,SAAS,EAXW,IAAA;AAYpBX,EAAAA,UAAU,EAZU,EAAA;AAapBgB,EAAAA,kBAAkB,EAbE,KAAA;AAcpBI,EAAAA,UAAU,EAdU,EAAA;AAepBE,EAAAA,mBAAmB,EAfC,KAAA;AAgBpBL,EAAAA,IAAI,EAhBgB,KAAA;AAiBpBC,EAAAA,YAAY,EAjBQ,IAAA;AAkBpBzB,EAAAA,MAAM,EAlBc,EAAA;AAmBpBC,EAAAA,UAAU,EAnBU,EAAA;AAoBpBC,EAAAA,UAAU,EAAE;AApBQ,C","sourcesContent":["import React, { Children, cloneElement, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal, findDOMNode } from 'react-dom';\nimport noop from 'lodash/noop';\nimport contains from '../util/Dom/contains';\nimport addEventListener from '../../_util/addEventListener';\nimport Popup from './Popup';\nimport { getAlignFromPlacement, getPopupClassNameFromAlign } from './utils';\nimport ContainerRender from '../util/ContainerRender';\nimport Portal from '../util/Portal';\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nconst ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter',\n  'onMouseLeave', 'onFocus', 'onBlur', 'onContextMenu'];\n\nconst IS_REACT_16 = !!createPortal;\n\nexport default class Trigger extends Component {\n  static propTypes = {\n    children: PropTypes.any,\n    action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    showAction: PropTypes.any,\n    hideAction: PropTypes.any,\n    getPopupClassNameFromAlign: PropTypes.any,\n    onPopupVisibleChange: PropTypes.func,\n    afterPopupVisibleChange: PropTypes.func,\n    popup: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]).isRequired,\n    popupStyle: PropTypes.object,\n    prefixCls: PropTypes.string,\n    popupClassName: PropTypes.string,\n    popupPlacement: PropTypes.string,\n    builtinPlacements: PropTypes.object,\n    popupTransitionName: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.object,\n    ]),\n    popupAnimation: PropTypes.any,\n    mouseEnterDelay: PropTypes.number,\n    mouseLeaveDelay: PropTypes.number,\n    zIndex: PropTypes.number,\n    focusDelay: PropTypes.number,\n    blurDelay: PropTypes.number,\n    getPopupContainer: PropTypes.func,\n    getDocument: PropTypes.func,\n    getRootDomNode: PropTypes.func,\n    forceRender: PropTypes.bool,\n    destroyPopupOnHide: PropTypes.bool,\n    mask: PropTypes.bool,\n    maskClosable: PropTypes.bool,\n    onPopupAlign: PropTypes.func,\n    popupAlign: PropTypes.object,\n    popupVisible: PropTypes.bool,\n    defaultPopupVisible: PropTypes.bool,\n    maskTransitionName: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.object,\n    ]),\n    maskAnimation: PropTypes.string,\n    stretch: PropTypes.string,\n  };\n\n  static defaultProps = {\n    prefixCls: 'rc-trigger-popup',\n    getPopupClassNameFromAlign: returnEmptyString,\n    getDocument: returnDocument,\n    onPopupVisibleChange: noop,\n    afterPopupVisibleChange: noop,\n    onPopupAlign: noop,\n    popupClassName: '',\n    mouseEnterDelay: 0,\n    mouseLeaveDelay: 0.1,\n    focusDelay: 0,\n    blurDelay: 0.15,\n    popupStyle: {},\n    destroyPopupOnHide: false,\n    popupAlign: {},\n    defaultPopupVisible: false,\n    mask: false,\n    maskClosable: true,\n    action: [],\n    showAction: [],\n    hideAction: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    let popupVisible;\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n\n    this.prevPopupVisible = popupVisible;\n\n    this.state = {\n      popupVisible,\n    };\n  }\n\n  componentWillMount() {\n    ALL_HANDLERS.forEach((h) => {\n      this[`fire${h}`] = (e) => {\n        this.fireEvents(h, e);\n      };\n    });\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible,\n    });\n  }\n\n  componentWillReceiveProps({ popupVisible }) {\n    if (popupVisible !== undefined) {\n      this.setState({\n        popupVisible,\n      });\n    }\n  }\n\n  componentDidUpdate(_, prevState) {\n    const props = this.props;\n    const state = this.state;\n    const triggerAfterPopupVisibleChange = () => {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    };\n    if (!IS_REACT_16) {\n      this.renderComponent(null, triggerAfterPopupVisibleChange);\n    }\n\n    this.prevPopupVisible = prevState.popupVisible;\n\n    // We must listen to `mousedown` or `touchstart`, edge case:\n    // https://github.com/react-component/calendar/issues/250\n    // https://github.com/react-component/trigger/issues/50\n    if (state.popupVisible) {\n      let currentDocument;\n      if (!this.clickOutsideHandler && (this.isClickToHide() || this.isContextMenuToShow())) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument,\n          'mousedown', this.onDocumentClick);\n      }\n      // always hide on mobile\n      if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument,\n          'touchstart', this.onDocumentClick);\n      }\n      // close popup when trigger type contains 'onContextMenu' and document is scrolling.\n      if (!this.contextMenuOutsideHandler1 && this.isContextMenuToShow()) {\n        currentDocument = currentDocument || props.getDocument();\n        this.contextMenuOutsideHandler1 = addEventListener(currentDocument,\n          'scroll', this.onContextMenuClose);\n      }\n      // close popup when trigger type contains 'onContextMenu' and window is blur.\n      if (!this.contextMenuOutsideHandler2 && this.isContextMenuToShow()) {\n        this.contextMenuOutsideHandler2 = addEventListener(window,\n          'blur', this.onContextMenuClose);\n      }\n      return;\n    }\n\n    this.clearOutsideHandler();\n  }\n\n  componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n  }\n\n  onMouseEnter = (e) => {\n    this.fireEvents('onMouseEnter', e);\n    this.delaySetPopupVisible(true, this.props.mouseEnterDelay);\n  };\n\n  onMouseLeave = (e) => {\n    this.fireEvents('onMouseLeave', e);\n    this.delaySetPopupVisible(false, this.props.mouseLeaveDelay);\n  };\n\n  onPopupMouseEnter = () => {\n    this.clearDelayTimer();\n  };\n\n  onPopupMouseLeave = (e) => {\n    // https://github.com/react-component/trigger/pull/13\n    // react bug?\n    if (e.relatedTarget && !e.relatedTarget.setTimeout &&\n      this._component &&\n      this._component.getPopupDomNode &&\n      contains(this._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n    this.delaySetPopupVisible(false, this.props.mouseLeaveDelay);\n  };\n\n  onFocus = (e) => {\n    this.fireEvents('onFocus', e);\n    // incase focusin and focusout\n    this.clearDelayTimer();\n    if (this.isFocusToShow()) {\n      this.focusTime = Date.now();\n      this.delaySetPopupVisible(true, this.props.focusDelay);\n    }\n  };\n\n  onMouseDown = (e) => {\n    this.fireEvents('onMouseDown', e);\n    this.preClickTime = Date.now();\n  };\n\n  onTouchStart = (e) => {\n    this.fireEvents('onTouchStart', e);\n    this.preTouchTime = Date.now();\n  };\n\n  onBlur = (e) => {\n    this.fireEvents('onBlur', e);\n    this.clearDelayTimer();\n    if (this.isBlurToHide()) {\n      this.delaySetPopupVisible(false, this.props.blurDelay);\n    }\n  };\n\n  onContextMenu = (e) => {\n    e.preventDefault();\n    this.fireEvents('onContextMenu', e);\n    this.setPopupVisible(true);\n  };\n\n  onContextMenuClose = () => {\n    if (this.isContextMenuToShow()) {\n      this.close();\n    }\n  };\n\n  onClick = (event) => {\n    this.fireEvents('onClick', event);\n    // focus will trigger click\n    if (this.focusTime) {\n      let preTime;\n      if (this.preClickTime && this.preTouchTime) {\n        preTime = Math.min(this.preClickTime, this.preTouchTime);\n      } else if (this.preClickTime) {\n        preTime = this.preClickTime;\n      } else if (this.preTouchTime) {\n        preTime = this.preTouchTime;\n      }\n      if (Math.abs(preTime - this.focusTime) < 20) {\n        return;\n      }\n      this.focusTime = 0;\n    }\n    this.preClickTime = 0;\n    this.preTouchTime = 0;\n    event.preventDefault();\n    const nextVisible = !this.state.popupVisible;\n    if (this.isClickToHide() && !nextVisible || nextVisible && this.isClickToShow()) {\n      this.setPopupVisible(!this.state.popupVisible);\n    }\n  };\n\n  onDocumentClick = (event) => {\n    if (this.props.mask && !this.props.maskClosable) {\n      return;\n    }\n    const target = event.target;\n    const root = findDOMNode(this);\n    const popupNode = this.getPopupDomNode();\n    if (!contains(root, target) && !contains(popupNode, target)) {\n      this.close();\n    }\n  };\n\n  getPopupDomNode() {\n    // for test\n    if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n    return null;\n  }\n\n  getRootDomNode = () => {\n    const { getRootDomNode } = this.props;\n    if (getRootDomNode) {\n      return getRootDomNode();\n    } else {\n      return findDOMNode(this);\n    }\n  };\n\n  getPopupClassFromAlign = (align) => {\n    const className = [];\n    const props = this.props;\n    const { popupPlacement, builtinPlacements, prefixCls } = props;\n    if (popupPlacement && builtinPlacements) {\n      className.push(getPopupClassNameFromAlign(builtinPlacements, prefixCls, align));\n    }\n    if (props.getPopupClassNameFromAlign) {\n      className.push(props.getPopupClassNameFromAlign(align));\n    }\n    return className.join(' ');\n  };\n\n  getPopupAlign() {\n    const props = this.props;\n    const { popupPlacement, popupAlign, builtinPlacements } = props;\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n    return popupAlign;\n  }\n\n  getComponent = () => {\n    const {\n      prefixCls, destroyPopupOnHide, popupClassName, action,\n      onPopupAlign, popupAnimation, popupTransitionName, popupStyle,\n      mask, maskAnimation, maskTransitionName, zIndex, popup, stretch,\n    } = this.props;\n    const { state } = this;\n\n    const align = this.getPopupAlign();\n\n    const mouseProps = {};\n    if (this.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = this.onPopupMouseEnter;\n    }\n    if (this.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = this.onPopupMouseLeave;\n    }\n\n    return (\n      <Popup\n        prefixCls={prefixCls}\n        destroyPopupOnHide={destroyPopupOnHide}\n        visible={state.popupVisible}\n        className={popupClassName}\n        action={action}\n        align={align}\n        onAlign={onPopupAlign}\n        animation={popupAnimation}\n        getClassNameFromAlign={this.getPopupClassFromAlign}\n        {...mouseProps}\n        stretch={stretch}\n        getRootDomNode={this.getRootDomNode}\n        style={popupStyle}\n        mask={mask}\n        zIndex={zIndex}\n        transitionName={popupTransitionName}\n        maskAnimation={maskAnimation}\n        maskTransitionName={maskTransitionName}\n        ref={this.savePopup}\n      >\n        {typeof popup === 'function' ? popup() : popup}\n      </Popup>\n    );\n  };\n\n  getContainer = () => {\n    const { props } = this;\n    const popupContainer = document.createElement('div');\n    // Make sure default popup container will never cause scrollbar appearing\n    // https://github.com/react-component/trigger/issues/41\n    popupContainer.style.position = 'absolute';\n    popupContainer.style.top = '0';\n    popupContainer.style.left = '0';\n    popupContainer.style.width = '100%';\n    const mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(this)) : props.getDocument().body;\n    mountNode.appendChild(popupContainer);\n    return popupContainer;\n  };\n\n  setPopupVisible(popupVisible) {\n    this.clearDelayTimer();\n    if (this.state.popupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({\n          popupVisible,\n        });\n      }\n      this.props.onPopupVisibleChange(popupVisible);\n    }\n  }\n\n  handlePortalUpdate = () => {\n    if (this.prevPopupVisible !== this.state.popupVisible) {\n      this.props.afterPopupVisibleChange(this.state.popupVisible);\n    }\n  };\n\n  delaySetPopupVisible(visible, delayS) {\n    const delay = delayS * 1000;\n    this.clearDelayTimer();\n    if (delay) {\n      this.delayTimer = setTimeout(() => {\n        this.setPopupVisible(visible);\n        this.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible);\n    }\n  }\n\n  clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  }\n\n  clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.contextMenuOutsideHandler1) {\n      this.contextMenuOutsideHandler1.remove();\n      this.contextMenuOutsideHandler1 = null;\n    }\n\n    if (this.contextMenuOutsideHandler2) {\n      this.contextMenuOutsideHandler2.remove();\n      this.contextMenuOutsideHandler2 = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  }\n\n  createTwoChains(event) {\n    const childPros = this.props.children.props;\n    const props = this.props;\n    if (childPros[event] && props[event]) {\n      return this[`fire${event}`];\n    }\n    return childPros[event] || props[event];\n  }\n\n  isClickToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  }\n\n  isContextMenuToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('contextMenu') !== -1 || showAction.indexOf('contextMenu') !== -1;\n  }\n\n  isClickToHide() {\n    const { action, hideAction } = this.props;\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  }\n\n  isMouseEnterToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  }\n\n  isMouseLeaveToHide() {\n    const { action, hideAction } = this.props;\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  }\n\n  isFocusToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  }\n\n  isBlurToHide() {\n    const { action, hideAction } = this.props;\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  }\n\n  forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  }\n\n  fireEvents(type, e) {\n    const childCallback = this.props.children.props[type];\n    if (childCallback) {\n      childCallback(e);\n    }\n    const callback = this.props[type];\n    if (callback) {\n      callback(e);\n    }\n  }\n\n  close() {\n    this.setPopupVisible(false);\n  }\n\n  savePopup = (node) => {\n    this._component = node;\n  };\n\n  render() {\n    const { popupVisible } = this.state;\n    const props = this.props;\n    const children = props.children;\n    const child = Children.only(children);\n    const newChildProps = { key: 'trigger' };\n\n    if (this.isContextMenuToShow()) {\n      newChildProps.onContextMenu = this.onContextMenu;\n    } else {\n      newChildProps.onContextMenu = this.createTwoChains('onContextMenu');\n    }\n\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    const trigger = cloneElement(child, newChildProps);\n\n    if (!IS_REACT_16) {\n      return (\n        <ContainerRender\n          parent={this}\n          visible={popupVisible}\n          autoMount={false}\n          forceRender={props.forceRender}\n          getComponent={this.getComponent}\n          getContainer={this.getContainer}\n        >\n          {({ renderComponent }) => {\n            this.renderComponent = renderComponent;\n            return trigger;\n          }}\n        </ContainerRender>\n      );\n    }\n\n    let portal;\n    // prevent unmounting after it's rendered\n    if (popupVisible || this._component || props.forceRender) {\n      portal = (\n        <Portal\n          key=\"portal\"\n          getContainer={this.getContainer}\n          didUpdate={this.handlePortalUpdate}\n        >\n          {this.getComponent()}\n        </Portal>\n      );\n    }\n\n    return [\n      trigger,\n      portal,\n    ];\n  }\n}\n"]}