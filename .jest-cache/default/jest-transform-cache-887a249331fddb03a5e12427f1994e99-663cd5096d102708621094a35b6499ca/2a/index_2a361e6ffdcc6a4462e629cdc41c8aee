4664547c542a7ce7ee47aae9766c6be0
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("choerodon-ui/pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("choerodon-ui/pro/lib/data-set/FeedBack"));

var _utils = require("choerodon-ui/pro/lib/form/utils");

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};
var defaultSpinProps = {
  size: "default"
  /* default */
  ,
  wrapperClassName: ''
};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['collapseExpandIconPosition', 'left'], ['collapseTrigger', 'header'], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['lovTriggerMode', "icon"
/* icon */
], ['lovTableProps', {}], ['lovModalProps', {}], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableSelectedHighLightRow', false], ['tableRowHeight', 30], ['tableDefaultRenderer', ''], ['tableColumnResizable', true], ['tableSpinProps', defaultSpinProps], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['tableAlwaysShowRowBox', false], ['tableUseMouseBatchChoose', false], ['tableEditorNextKeyEnterDown', true], ['modalSectionBorder', true], ['modalOkFirst', true], ['drawerOkFirst', undefined], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}], ['dropdownMatchSelectWidth', true], ['useColon', false], ['excludeUseColonTagList', _utils.defaultExcludeUseColonTag], ['textFieldAutoComplete', undefined], ['tableDragRow', false], ['tableDragColumn', false], ['numberFieldNonStrictStep', false], ['numberFieldFormatter', undefined], ['numberFieldFormatterOptions', undefined]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL2NvbmZpZ3VyZS9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUdBOztBQUNBOztBQUdBOztBQWdCQTs7QUFLQTs7OztBQWtIQSxJQUFNLGtCQUFrQixHQUF1QixTQUF6QyxrQkFBeUMsQ0FBQyxhQUFELEVBQXNDO0FBQ25GLFVBQVEsYUFBUjtBQUNFLFNBQUssT0FBTDtBQUNFLGFBQU8sdUJBQUcsT0FBSCxFQUFZLFlBQVosQ0FBUDs7QUFDRixTQUFLLFFBQUw7QUFDRSxhQUFPLHVCQUFHLFFBQUgsRUFBYSxxQkFBYixDQUFQOztBQUNGO0FBTEY7QUFPRCxDQVJEOztBQVVBLElBQU0sa0JBQWtCLEdBQUc7QUFBRSxFQUFBLEtBQUssRUFBQTtBQUFBO0FBQVA7QUFBOEIsRUFBQSxRQUFRLEVBQUE7QUFBQTs7QUFBdEMsQ0FBM0I7QUFFQSxJQUFNLGdCQUFnQixHQUFHO0FBQUUsRUFBQSxJQUFJLEVBQUE7QUFBQTtBQUFOO0FBQXNCLEVBQUEsZ0JBQWdCLEVBQUU7QUFBeEMsQ0FBekI7O0FBRUEsSUFBTSxZQUFZLEdBQWtELGlCQUFXLEdBQVgsQ0FHbEUsQ0FDQSxDQUFDLFdBQUQsRUFBYyxLQUFkLENBREEsRUFFQSxDQUFDLGNBQUQsRUFBaUIsU0FBakIsQ0FGQSxFQUdBLENBQUMsZ0JBQUQsRUFBbUIsTUFBbkIsQ0FIQSxFQUlBLENBQUMsUUFBRCxFQUFXLElBQVgsQ0FKQSxFQUtBLENBQUMsNEJBQUQsRUFBK0IsTUFBL0IsQ0FMQSxFQU1BLENBQUMsaUJBQUQsRUFBb0IsUUFBcEIsQ0FOQSxFQU9BLENBQUMsYUFBRCxFQUFnQjtBQUFFLEVBQUEsTUFBTSxFQUFFLE9BQU8sRUFBUCxHQUFZLEVBQXRCO0FBQTBCLEVBQUEsR0FBRyxFQUFFO0FBQS9CLENBQWhCLENBUEEsRUFRQSxDQUFDLFdBQUQsRUFB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UUFBQSxZQUFZLENBQUMsR0FBYixDQUFpQixHQUFqQixFQUFzQixNQUFNLENBQUMsR0FBRCxDQUE1QjtBQUNEO0FBQ0YsS0FWRDtBQVdELEdBWkQ7QUFhRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9ic2VydmFibGUsIE9ic2VydmFibGVNYXAsIHJ1bkluQWN0aW9uLCB0b0pTIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBBeGlvc0luc3RhbmNlLCBBeGlvc1Byb21pc2UsIEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpc09iamVjdCBmcm9tICdsb2Rhc2gvaXNPYmplY3QnO1xuaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS1mb250JztcbmltcG9ydCB7IExvdkNvbmZpZyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvdi9Mb3YnO1xuaW1wb3J0IHsgUmVjb3JkU3RhdHVzLCBFeHBvcnRNb2RlIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvZW51bSc7XG5pbXBvcnQgeyAkbCB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvY2FsZS1jb250ZXh0JztcbmltcG9ydCB7XG4gIGV4cGFuZEljb25Qcm9wcyxcbiAgVGFibGVQYWdpbmF0aW9uQ29uZmlnLFxuICBUYWJsZVF1ZXJ5QmFySG9vayxcbiAgVGFibGVQcm9wcyxcbn0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvdGFibGUvVGFibGUnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbk1lc3NhZ2VzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvdmFsaWRhdG9yL1ZhbGlkYXRvcic7XG5pbXBvcnQgeyBCdXR0b25Qcm9wcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2J1dHRvbi9CdXR0b24nO1xuaW1wb3J0IHsgU3BpblByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL2xpYi9zcGluJztcbmltcG9ydCB7IFBhbmVsUHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvbGliL2NvbGxhcHNlJztcbmltcG9ydCB7IFNpemUgfSBmcm9tICdjaG9lcm9kb24tdWkvbGliL191dGlsL2VudW0nO1xuaW1wb3J0IHsgVGFibGVRdWVyeUJhclR5cGUsIERyYWdDb2x1bW5BbGlnbiB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL3RhYmxlL2VudW0nO1xuaW1wb3J0IHsgVHJpZ2dlck1vZGUgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9sb3YvZW51bSc7XG5pbXBvcnQgeyBUcmFuc3BvcnRIb29rUHJvcHMsIFRyYW5zcG9ydFByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvVHJhbnNwb3J0JztcbmltcG9ydCBEYXRhU2V0IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0RhdGFTZXQnO1xuaW1wb3J0IGRlZmF1bHRGZWVkYmFjaywgeyBGZWVkQmFjayB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0ZlZWRCYWNrJztcbmltcG9ydCBSZWNvcmQgZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvUmVjb3JkJztcbmltcG9ydCB7IENhY2hlT3B0aW9ucyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL191dGlsL0NhY2hlJztcbmltcG9ydCB7IExhYmVsTGF5b3V0IH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZm9ybS9lbnVtJztcbmltcG9ydCB7IEJ1dHRvbkNvbG9yLCBGdW5jVHlwZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2J1dHRvbi9lbnVtJztcbmltcG9ydCB7IGRlZmF1bHRFeGNsdWRlVXNlQ29sb25UYWcgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9mb3JtL3V0aWxzJztcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZmllbGQvRm9ybUZpZWxkJztcbmltcG9ydCB7IEZvcm1hdE51bWJlckZ1bmMsIEZvcm1hdE51bWJlckZ1bmNPcHRpb25zIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvbnVtYmVyLWZpZWxkL051bWJlckZpZWxkJztcbmltcG9ydCB7IE1vZGFsUHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9tb2RhbC9Nb2RhbCc7XG5cbmV4cG9ydCB0eXBlIFN0YXR1cyA9IHtcbiAgW1JlY29yZFN0YXR1cy5hZGRdOiBzdHJpbmc7XG4gIFtSZWNvcmRTdGF0dXMudXBkYXRlXTogc3RyaW5nO1xuICBbUmVjb3JkU3RhdHVzLmRlbGV0ZV06IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIHJlbmRlckVtcHR5SGFuZGxlciA9IChjb21wb25lbnROYW1lPzogc3RyaW5nKSA9PiBSZWFjdE5vZGU7XG5cbmV4cG9ydCB0eXBlIEZvcm1hdHRlciA9IHtcbiAganNvbkRhdGU/OiBzdHJpbmcgfCBudWxsO1xuICBkYXRlPzogc3RyaW5nO1xuICBkYXRlVGltZT86IHN0cmluZztcbiAgdGltZT86IHN0cmluZztcbiAgeWVhcj86IHN0cmluZztcbiAgbW9udGg/OiBzdHJpbmc7XG4gIHdlZWs/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgdHlwZSBDb25maWcgPSB7XG4gIHByZWZpeENscz86IHN0cmluZztcbiAgcHJvUHJlZml4Q2xzPzogc3RyaW5nO1xuICBpY29uZm9udFByZWZpeD86IHN0cmluZztcbiAgcmlwcGxlPzogYm9vbGVhbjtcbiAgY29sbGFwc2VFeHBhbmRJY29uUG9zaXRpb24/OiBzdHJpbmc7XG4gIGNvbGxhcHNlRXhwYW5kSWNvbj86IChwYW5lbFByb3BzOiBQYW5lbFByb3BzKSA9PiBSZWFjdE5vZGUgfCAndGV4dCc7XG4gIGNvbGxhcHNlVHJpZ2dlcj86IHN0cmluZztcbiAgbG9va3VwQ2FjaGU/OiBDYWNoZU9wdGlvbnM8c3RyaW5nLCBBeGlvc1Byb21pc2U+O1xuICBsb29rdXBVcmw/OiBzdHJpbmcgfCAoKGNvZGU6IHN0cmluZykgPT4gc3RyaW5nKTtcbiAgbG9va3VwQXhpb3NNZXRob2Q/OiBzdHJpbmc7XG4gIGxvb2t1cEF4aW9zQ29uZmlnPzpcbiAgfCBBeGlvc1JlcXVlc3RDb25maWdcbiAgfCAoKHByb3BzOiB7XG4gICAgcGFyYW1zPzogYW55O1xuICAgIGRhdGFTZXQ/OiBEYXRhU2V0O1xuICAgIHJlY29yZD86IFJlY29yZDtcbiAgICBsb29rdXBDb2RlPzogc3RyaW5nO1xuICB9KSA9PiBBeGlvc1JlcXVlc3RDb25maWcpO1xuICBsb29rdXBCYXRjaEF4aW9zQ29uZmlnPzogKGNvZGVzOiBzdHJpbmdbXSkgPT4gQXhpb3NSZXF1ZXN0Q29uZmlnO1xuICBsb3ZEZWZpbmVVcmw/OiBzdHJpbmcgfCAoKGNvZGU6IHN0cmluZykgPT4gc3RyaW5nKTtcbiAgbG92RGVmaW5lQXhpb3NDb25maWc/OiBBeGlvc1JlcXVlc3RDb25maWcgfCAoKGNvZGU6IHN0cmluZykgPT4gQXhpb3NSZXF1ZXN0Q29uZmlnKTtcbiAgbG92UXVlcnlVcmw/OlxuICB8IHN0cmluZ1xuICB8ICgoY29kZTogc3RyaW5nLCBsb3ZDb25maWc6IExvdkNvbmZpZyB8IHVuZGVmaW5lZCwgcHJvcHM6IFRyYW5zcG9ydEhvb2tQcm9wcykgPT4gc3RyaW5nKTtcbiAgbG92UXVlcnlBeGlvc0NvbmZpZz86XG4gIHwgQXhpb3NSZXF1ZXN0Q29uZmlnXG4gIHwgKChcbiAgICBjb2RlOiBzdHJpbmcsXG4gICAgbG92Q29uZmlnOiBMb3ZDb25maWcgfCB1bmRlZmluZWQsXG4gICAgcHJvcHM6IFRyYW5zcG9ydEhvb2tQcm9wcyxcbiAgKSA9PiBBeGlvc1JlcXVlc3RDb25maWcpO1xuICBsb3ZUcmlnZ2VyTW9kZT86IFRyaWdnZXJNb2RlO1xuICBsb3ZNb2RhbFByb3BzPzogTW9kYWxQcm9wcztcbiAgYXhpb3M/OiBBeGlvc0luc3RhbmNlO1xuICBmZWVkYmFjaz86IEZlZWRCYWNrO1xuICBkYXRhS2V5Pzogc3RyaW5nO1xuICB0b3RhbEtleT86IHN0cmluZztcbiAgc3RhdHVzS2V5Pzogc3RyaW5nO1xuICB0bHNLZXk/OiBzdHJpbmc7XG4gIHN0YXR1cz86IFN0YXR1cztcbiAgZXhwb3J0TW9kZT86IEV4cG9ydE1vZGU7XG4gIGxhYmVsTGF5b3V0PzogTGFiZWxMYXlvdXQ7XG4gIHF1ZXJ5QmFyPzogVGFibGVRdWVyeUJhclR5cGUgfCBUYWJsZVF1ZXJ5QmFySG9vaztcbiAgdGFibGVCb3JkZXI/OiBib29sZWFuO1xuICB0YWJsZUhpZ2hMaWdodFJvdz86IGJvb2xlYW47XG4gIHRhYmxlU2VsZWN0ZWRIaWdoTGlnaHRSb3c/OiBib29sZWFuO1xuICB0YWJsZVJvd0hlaWdodD86ICdhdXRvJyB8IG51bWJlcjtcbiAgdGFibGVDb2x1bW5SZXNpemFibGU/OiBib29sZWFuO1xuICB0YWJsZUV4cGFuZEljb24/OiAocHJvcHM6IGV4cGFuZEljb25Qcm9wcykgPT4gUmVhY3ROb2RlO1xuICB0YWJsZVNwaW5Qcm9wcz86IFNwaW5Qcm9wcztcbiAgdGFibGVCdXR0b25Qcm9wcz86IEJ1dHRvblByb3BzO1xuICB0YWJsZUNvbW1hbmRQcm9wcz86IEJ1dHRvblByb3BzO1xuICB0YWJsZURlZmF1bHRSZW5kZXJlcj86IFJlbmRlcmVyO1xuICB0YWJsZUFsd2F5c1Nob3dSb3dCb3g/OiBib29sZWFuO1xuICB0YWJsZVVzZU1vdXNlQmF0Y2hDaG9vc2U/OiBib29sZWFuO1xuICB0YWJsZUVkaXRvck5leHRLZXlFbnRlckRvd24/OiBib29sZWFuO1xuICBwYWdpbmF0aW9uPzogVGFibGVQYWdpbmF0aW9uQ29uZmlnIHwgZmFsc2U7XG4gIG1vZGFsU2VjdGlvbkJvcmRlcj86IGJvb2xlYW47XG4gIG1vZGFsT2tGaXJzdD86IGJvb2xlYW47XG4gIGRyYXdlck9rRmlyc3Q/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICBtb2RhbEJ1dHRvblByb3BzPzogQnV0dG9uUHJvcHM7XG4gIGJ1dHRvbkZ1bmNUeXBlPzogRnVuY1R5cGU7XG4gIGJ1dHRvbkNvbG9yPzogQnV0dG9uQ29sb3I7XG4gIHJlbmRlckVtcHR5PzogcmVuZGVyRW1wdHlIYW5kbGVyO1xuICBkZWZhdWx0VmFsaWRhdGlvbk1lc3NhZ2VzPzogVmFsaWRhdGlvbk1lc3NhZ2VzO1xuICB0cmFuc3BvcnQ/OiBUcmFuc3BvcnRQcm9wcztcbiAgaWNvbnM/OiB7IFtrZXk6IHN0cmluZ106IHN0cmluZ1tdOyB9IHwgc3RyaW5nW107XG4gIGdlbmVyYXRlUGFnZVF1ZXJ5PzogKHBhZ2VQYXJhbXM6IHtcbiAgICBwYWdlPzogbnVtYmVyO1xuICAgIHBhZ2VTaXplPzogbnVtYmVyO1xuICAgIHNvcnROYW1lPzogc3RyaW5nO1xuICAgIHNvcnRPcmRlcj86IHN0cmluZztcbiAgfSkgPT4gb2JqZWN0O1xuICBmb3JtYXR0ZXI/OiBGb3JtYXR0ZXI7XG4gIGRyb3Bkb3duTWF0Y2hTZWxlY3RXaWR0aD86IGJvb2xlYW47XG4gIHVzZUNvbG9uPzogYm9vbGVhbjtcbiAgZXhjbHVkZVVzZUNvbG9uVGFnTGlzdD86IHN0cmluZ1tdO1xuICBsb3ZUYWJsZVByb3BzPzogVGFibGVQcm9wcztcbiAgdGV4dEZpZWxkQXV0b0NvbXBsZXRlPzogJ29uJyB8ICdvZmYnO1xuICByZXN1bHRTdGF0dXNSZW5kZXJlcj86IG9iamVjdDtcbiAgdGFibGVEcmFnQ29sdW1uQWxpZ24/OiBEcmFnQ29sdW1uQWxpZ247XG4gIHRhYmxlRHJhZ0NvbHVtbj86IGJvb2xlYW47XG4gIHRhYmxlRHJhZ1Jvdz86IGJvb2xlYW47XG4gIG51bWJlckZpZWxkTm9uU3RyaWN0U3RlcD86IGJvb2xlYW47XG4gIG51bWJlckZpZWxkRm9ybWF0dGVyPzogRm9ybWF0TnVtYmVyRnVuYztcbiAgbnVtYmVyRmllbGRGb3JtYXR0ZXJPcHRpb25zPzpGb3JtYXROdW1iZXJGdW5jT3B0aW9ucztcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZ0tleXMgPSBrZXlvZiBDb25maWc7XG5cbmNvbnN0IGRlZmF1bHRSZW5kZXJFbXB0eTogcmVuZGVyRW1wdHlIYW5kbGVyID0gKGNvbXBvbmVudE5hbWU/OiBzdHJpbmcpOiBSZWFjdE5vZGUgPT4ge1xuICBzd2l0Y2ggKGNvbXBvbmVudE5hbWUpIHtcbiAgICBjYXNlICdUYWJsZSc6XG4gICAgICByZXR1cm4gJGwoJ1RhYmxlJywgJ2VtcHR5X2RhdGEnKTtcbiAgICBjYXNlICdTZWxlY3QnOlxuICAgICAgcmV0dXJuICRsKCdTZWxlY3QnLCAnbm9fbWF0Y2hpbmdfcmVzdWx0cycpO1xuICAgIGRlZmF1bHQ6XG4gIH1cbn07XG5cbmNvbnN0IGRlZmF1bHRCdXR0b25Qcm9wcyA9IHsgY29sb3I6IEJ1dHRvbkNvbG9yLnByaW1hcnksIGZ1bmNUeXBlOiBGdW5jVHlwZS5mbGF0IH07XG5cbmNvbnN0IGRlZmF1bHRTcGluUHJvcHMgPSB7IHNpemU6IFNpemUuZGVmYXVsdCwgd3JhcHBlckNsYXNzTmFtZTogJycgfTtcblxuY29uc3QgZ2xvYmFsQ29uZmlnOiBPYnNlcnZhYmxlTWFwPENvbmZpZ0tleXMsIENvbmZpZ1tDb25maWdLZXlzXT4gPSBvYnNlcnZhYmxlLm1hcDxcbiAgQ29uZmlnS2V5cyxcbiAgQ29uZmlnW0NvbmZpZ0tleXNdXG4+KFtcbiAgWydwcmVmaXhDbHMnLCAnYzduJ10sXG4gIFsncHJvUHJlZml4Q2xzJywgJ2M3bi1wcm8nXSxcbiAgWydpY29uZm9udFByZWZpeCcsICdpY29uJ10sXG4gIFsncmlwcGxlJywgdHJ1ZV0sXG4gIFsnY29sbGFwc2VFeHBhbmRJY29uUG9zaXRpb24nLCAnbGVmdCddLFxuICBbJ2NvbGxhcHNlVHJpZ2dlcicsICdoZWFkZXInXSxcbiAgWydsb29rdXBDYWNoZScsIHsgbWF4QWdlOiAxMDAwICogNjAgKiAxMCwgbWF4OiAxMDAgfV0sXG4gIFsnbG9va3VwVXJsJywgY29kZSA9PiBgL2NvbW1vbi9jb2RlLyR7Y29kZX0vYF0sXG4gIFsnbG9va3VwQXhpb3NNZXRob2QnLCAncG9zdCddLFxuICAvLyBbXG4gIC8vICAgJ2xvb2t1cEJhdGNoQXhpb3NDb25maWcnLFxuICAvLyAgIGNvZGVzID0+ICh7XG4gIC8vICAgICB1cmw6ICcvY29tbW9uL2JhdGNoJyxcbiAgLy8gICAgIHBhcmFtczogY29kZXMucmVkdWNlKChvYmosIGNvZGUpID0+IHtcbiAgLy8gICAgICAgb2JqW2NvZGVdID0gY29kZTtcbiAgLy8gICAgICAgcmV0dXJuIG9iajtcbiAgLy8gICAgIH0sIHt9KSxcbiAgLy8gICB9KSxcbiAgLy8gXSxcbiAgWydsb3ZEZWZpbmVVcmwnLCBjb2RlID0+IGAvc3lzL2xvdi9sb3ZfZGVmaW5lP2NvZGU9JHtjb2RlfWBdLFxuICBbJ2xvdlF1ZXJ5VXJsJywgY29kZSA9PiBgL2NvbW1vbi9sb3YvZGF0YXNldC8ke2NvZGV9YF0sXG4gIFsnbG92VHJpZ2dlck1vZGUnLCBUcmlnZ2VyTW9kZS5pY29uXSxcbiAgWydsb3ZUYWJsZVByb3BzJywge31dLFxuICBbJ2xvdk1vZGFsUHJvcHMnLCB7fV0sXG4gIFsnZGF0YUtleScsICdyb3dzJ10sXG4gIFsndG90YWxLZXknLCAndG90YWwnXSxcbiAgWydzdGF0dXNLZXknLCAnX19zdGF0dXMnXSxcbiAgWyd0bHNLZXknLCAnX190bHMnXSxcbiAgW1xuICAgICdzdGF0dXMnLFxuICAgIHsgW1JlY29yZFN0YXR1cy5hZGRdOiAnYWRkJywgW1JlY29yZFN0YXR1cy51cGRhdGVdOiAndXBkYXRlJywgW1JlY29yZFN0YXR1cy5kZWxldGVdOiAnZGVsZXRlJyB9LFxuICBdLFxuICBbJ2xhYmVsTGF5b3V0JywgTGFiZWxMYXlvdXQuaG9yaXpvbnRhbF0sXG4gIFsncXVlcnlCYXInLCBUYWJsZVF1ZXJ5QmFyVHlwZS5ub3JtYWxdLFxuICBbJ3RhYmxlQm9yZGVyJywgdHJ1ZV0sXG4gIFsndGFibGVIaWdoTGlnaHRSb3cnLCB0cnVlXSxcbiAgWyd0YWJsZVNlbGVjdGVkSGlnaExpZ2h0Um93JywgZmFsc2VdLFxuICBbJ3RhYmxlUm93SGVpZ2h0JywgMzBdLFxuICBbJ3RhYmxlRGVmYXVsdFJlbmRlcmVyJywgJyddLFxuICBbJ3RhYmxlQ29sdW1uUmVzaXphYmxlJywgdHJ1ZV0sXG4gIFsndGFibGVTcGluUHJvcHMnLCBkZWZhdWx0U3BpblByb3BzXSxcbiAgWyd0YWJsZUJ1dHRvblByb3BzJywgZGVmYXVsdEJ1dHRvblByb3BzXSxcbiAgWyd0YWJsZUNvbW1hbmRQcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gIFsndGFibGVBbHdheXNTaG93Um93Qm94JywgZmFsc2VdLFxuICBbJ3RhYmxlVXNlTW91c2VCYXRjaENob29zZScsIGZhbHNlXSxcbiAgWyd0YWJsZUVkaXRvck5leHRLZXlFbnRlckRvd24nLCB0cnVlXSxcbiAgWydtb2RhbFNlY3Rpb25Cb3JkZXInLCB0cnVlXSxcbiAgWydtb2RhbE9rRmlyc3QnLCB0cnVlXSxcbiAgWydkcmF3ZXJPa0ZpcnN0JywgdW5kZWZpbmVkXSxcbiAgWydidXR0b25Db2xvcicsIEJ1dHRvbkNvbG9yLmRlZmF1bHRdLFxuICBbJ2J1dHRvbkZ1bmNUeXBlJywgRnVuY1R5cGUucmFpc2VkXSxcbiAgWydmZWVkYmFjaycsIGRlZmF1bHRGZWVkYmFja10sXG4gIFsncmVuZGVyRW1wdHknLCBkZWZhdWx0UmVuZGVyRW1wdHldLFxuICBbJ2ljb25zJywgY2F0ZWdvcmllc10sXG4gIFtcbiAgICAnZm9ybWF0dGVyJyxcbiAgICB7XG4gICAgICBqc29uRGF0ZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgZGF0ZTogJ1lZWVktTU0tREQnLFxuICAgICAgZGF0ZVRpbWU6ICdZWVlZLU1NLUREIEhIOm1tOnNzJyxcbiAgICAgIHRpbWU6ICdISDptbTpzcycsXG4gICAgICB5ZWFyOiAnWVlZWScsXG4gICAgICBtb250aDogJ1lZWVktTU0nLFxuICAgICAgd2VlazogJ0dHR0ctV28nLFxuICAgIH0sXG4gIF0sXG4gIFsnZHJvcGRvd25NYXRjaFNlbGVjdFdpZHRoJywgdHJ1ZV0sXG4gIFsndXNlQ29sb24nLCBmYWxzZV0sXG4gIFsnZXhjbHVkZVVzZUNvbG9uVGFnTGlzdCcsIGRlZmF1bHRFeGNsdWRlVXNlQ29sb25UYWddLFxuICBbJ3RleHRGaWVsZEF1dG9Db21wbGV0ZScsIHVuZGVmaW5lZF0sXG4gIFsndGFibGVEcmFnUm93JywgZmFsc2VdLFxuICBbJ3RhYmxlRHJhZ0NvbHVtbicsIGZhbHNlXSxcbiAgWydudW1iZXJGaWVsZE5vblN0cmljdFN0ZXAnLCBmYWxzZV0sXG4gIFsnbnVtYmVyRmllbGRGb3JtYXR0ZXInLCB1bmRlZmluZWRdLFxuICBbJ251bWJlckZpZWxkRm9ybWF0dGVyT3B0aW9ucycsdW5kZWZpbmVkXSxcbl0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKGtleTogQ29uZmlnS2V5cyk6IGFueSB7XG4gIC8vIEZJWE1FOiBvYnNlcnZhYmxlLm1hcOaKiuaehOW7um1hcOaXtuS8oOWFpeeahGtleeexu+Wei+WSjHZhbHVl57G75Z6L5YiG5Yir5YGa5LqGdW5pb27vvIxcbiAgLy8g5Lii5aSx5LqG5LiA5LiA5a+55bqU55qE5pig5bCE5YWz57O777yM5a+86Ie05Ye95pWw6LCD55So6ICF5peg5rOV5L2/55SodW5pb27lkI7nmoTov5Tlm57lgLznsbvlnovvvIzlm6DmraTpnIDopoHmjIflrprmnKzlh73mlbDov5Tlm57lgLzkuLphbnlcbiAgcmV0dXJuIGdsb2JhbENvbmZpZy5nZXQoa2V5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZWZpeENscyhzdWZmaXhDbHM6IHN0cmluZywgY3VzdG9taXplUHJlZml4Q2xzPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgIHJldHVybiBjdXN0b21pemVQcmVmaXhDbHM7XG4gIH1cbiAgcmV0dXJuIGAke2dldENvbmZpZygncHJlZml4Q2xzJyl9LSR7c3VmZml4Q2xzfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9QcmVmaXhDbHMoc3VmZml4Q2xzOiBzdHJpbmcsIGN1c3RvbWl6ZVByZWZpeENscz86IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICByZXR1cm4gY3VzdG9taXplUHJlZml4Q2xzO1xuICB9XG4gIHJldHVybiBgJHtnZXRDb25maWcoJ3Byb1ByZWZpeENscycpfS0ke3N1ZmZpeENsc31gO1xufVxuXG5jb25zdCBtZXJnZVByb3BzID0gWyd0cmFuc3BvcnQnLCAnZmVlZGJhY2snLCAnZm9ybWF0dGVyJ107XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWc6IENvbmZpZykge1xuICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXk6IENvbmZpZ0tleXMpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG4gICAgICBpZiAobWVyZ2VQcm9wcy5pbmNsdWRlcyhrZXkpICYmIGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBnbG9iYWxDb25maWcuc2V0KGtleSwge1xuICAgICAgICAgIC4uLnRvSlM8YW55PihnbG9iYWxDb25maWcuZ2V0KGtleSkpLFxuICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdsb2JhbENvbmZpZy5zZXQoa2V5LCBjb25maWdba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuIl19