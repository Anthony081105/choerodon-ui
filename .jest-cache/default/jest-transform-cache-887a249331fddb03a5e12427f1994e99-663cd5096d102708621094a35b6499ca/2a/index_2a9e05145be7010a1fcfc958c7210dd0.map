{"version":3,"sources":["index.jsx"],"names":["returnEmptyString","returnDocument","window","document","ALL_HANDLERS","IS_REACT_16","createPortal","Trigger","props","e","fireEvents","delaySetPopupVisible","mouseEnterDelay","mouseLeaveDelay","clearDelayTimer","relatedTarget","setTimeout","_component","getPopupDomNode","isFocusToShow","focusTime","Date","now","focusDelay","preClickTime","preTouchTime","isBlurToHide","blurDelay","preventDefault","setPopupVisible","isContextMenuToShow","close","event","preTime","Math","min","abs","nextVisible","state","popupVisible","isClickToHide","isClickToShow","mask","maskClosable","target","root","popupNode","getRootDomNode","align","className","popupPlacement","builtinPlacements","prefixCls","push","getPopupClassNameFromAlign","join","destroyPopupOnHide","popupClassName","action","onPopupAlign","popupAnimation","popupTransitionName","popupStyle","maskAnimation","maskTransitionName","zIndex","popup","stretch","getPopupAlign","mouseProps","isMouseEnterToShow","onMouseEnter","onPopupMouseEnter","isMouseLeaveToHide","onMouseLeave","onPopupMouseLeave","getPopupClassFromAlign","savePopup","popupContainer","createElement","style","position","top","left","width","mountNode","getPopupContainer","getDocument","body","appendChild","prevPopupVisible","afterPopupVisibleChange","node","defaultPopupVisible","forEach","h","componentDidUpdate","undefined","setState","_","prevState","triggerAfterPopupVisibleChange","renderComponent","currentDocument","clickOutsideHandler","onDocumentClick","touchOutsideHandler","contextMenuOutsideHandler1","onContextMenuClose","contextMenuOutsideHandler2","clearOutsideHandler","popupAlign","onPopupVisibleChange","visible","delayS","delay","delayTimer","clearTimeout","remove","childPros","children","showAction","indexOf","hideAction","alignInstance","forceAlign","type","childCallback","callback","child","Children","only","newChildProps","key","onContextMenu","createTwoChains","onClick","onMouseDown","onTouchStart","onFocus","onBlur","trigger","forceRender","getComponent","getContainer","portal","handlePortalUpdate","Component","PropTypes","any","oneOfType","string","arrayOf","func","isRequired","object","number","bool","noop"],"mappings":"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","sourcesContent":["import React, { Children, cloneElement, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal, findDOMNode } from 'react-dom';\nimport noop from 'lodash/noop';\nimport contains from '../util/Dom/contains';\nimport addEventListener from '../../_util/addEventListener';\nimport Popup from './Popup';\nimport { getAlignFromPlacement, getPopupClassNameFromAlign } from './utils';\nimport ContainerRender from '../util/ContainerRender';\nimport Portal from '../util/Portal';\n\nfunction returnEmptyString() {\n  return '';\n}\n\nfunction returnDocument() {\n  return window.document;\n}\n\nconst ALL_HANDLERS = ['onClick', 'onMouseDown', 'onTouchStart', 'onMouseEnter',\n  'onMouseLeave', 'onFocus', 'onBlur', 'onContextMenu'];\n\nconst IS_REACT_16 = !!createPortal;\n\nexport default class Trigger extends Component {\n  static propTypes = {\n    children: PropTypes.any,\n    action: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n    showAction: PropTypes.any,\n    hideAction: PropTypes.any,\n    getPopupClassNameFromAlign: PropTypes.any,\n    onPopupVisibleChange: PropTypes.func,\n    afterPopupVisibleChange: PropTypes.func,\n    popup: PropTypes.oneOfType([\n      PropTypes.node,\n      PropTypes.func,\n    ]).isRequired,\n    popupStyle: PropTypes.object,\n    prefixCls: PropTypes.string,\n    popupClassName: PropTypes.string,\n    popupPlacement: PropTypes.string,\n    builtinPlacements: PropTypes.object,\n    popupTransitionName: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.object,\n    ]),\n    popupAnimation: PropTypes.any,\n    mouseEnterDelay: PropTypes.number,\n    mouseLeaveDelay: PropTypes.number,\n    zIndex: PropTypes.number,\n    focusDelay: PropTypes.number,\n    blurDelay: PropTypes.number,\n    getPopupContainer: PropTypes.func,\n    getDocument: PropTypes.func,\n    getRootDomNode: PropTypes.func,\n    forceRender: PropTypes.bool,\n    destroyPopupOnHide: PropTypes.bool,\n    mask: PropTypes.bool,\n    maskClosable: PropTypes.bool,\n    onPopupAlign: PropTypes.func,\n    popupAlign: PropTypes.object,\n    popupVisible: PropTypes.bool,\n    defaultPopupVisible: PropTypes.bool,\n    maskTransitionName: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.object,\n    ]),\n    maskAnimation: PropTypes.string,\n    stretch: PropTypes.string,\n  };\n\n  static defaultProps = {\n    prefixCls: 'rc-trigger-popup',\n    getPopupClassNameFromAlign: returnEmptyString,\n    getDocument: returnDocument,\n    onPopupVisibleChange: noop,\n    afterPopupVisibleChange: noop,\n    onPopupAlign: noop,\n    popupClassName: '',\n    mouseEnterDelay: 0,\n    mouseLeaveDelay: 0.1,\n    focusDelay: 0,\n    blurDelay: 0.15,\n    popupStyle: {},\n    destroyPopupOnHide: false,\n    popupAlign: {},\n    defaultPopupVisible: false,\n    mask: false,\n    maskClosable: true,\n    action: [],\n    showAction: [],\n    hideAction: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    let popupVisible;\n    if ('popupVisible' in props) {\n      popupVisible = !!props.popupVisible;\n    } else {\n      popupVisible = !!props.defaultPopupVisible;\n    }\n\n    this.prevPopupVisible = popupVisible;\n\n    this.state = {\n      popupVisible,\n    };\n  }\n\n  componentWillMount() {\n    ALL_HANDLERS.forEach((h) => {\n      this[`fire${h}`] = (e) => {\n        this.fireEvents(h, e);\n      };\n    });\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate({}, {\n      popupVisible: this.state.popupVisible,\n    });\n  }\n\n  componentWillReceiveProps({ popupVisible }) {\n    if (popupVisible !== undefined) {\n      this.setState({\n        popupVisible,\n      });\n    }\n  }\n\n  componentDidUpdate(_, prevState) {\n    const props = this.props;\n    const state = this.state;\n    const triggerAfterPopupVisibleChange = () => {\n      if (prevState.popupVisible !== state.popupVisible) {\n        props.afterPopupVisibleChange(state.popupVisible);\n      }\n    };\n    if (!IS_REACT_16) {\n      this.renderComponent(null, triggerAfterPopupVisibleChange);\n    }\n\n    this.prevPopupVisible = prevState.popupVisible;\n\n    // We must listen to `mousedown` or `touchstart`, edge case:\n    // https://github.com/react-component/calendar/issues/250\n    // https://github.com/react-component/trigger/issues/50\n    if (state.popupVisible) {\n      let currentDocument;\n      if (!this.clickOutsideHandler && (this.isClickToHide() || this.isContextMenuToShow())) {\n        currentDocument = props.getDocument();\n        this.clickOutsideHandler = addEventListener(currentDocument,\n          'mousedown', this.onDocumentClick);\n      }\n      // always hide on mobile\n      if (!this.touchOutsideHandler) {\n        currentDocument = currentDocument || props.getDocument();\n        this.touchOutsideHandler = addEventListener(currentDocument,\n          'touchstart', this.onDocumentClick);\n      }\n      // close popup when trigger type contains 'onContextMenu' and document is scrolling.\n      if (!this.contextMenuOutsideHandler1 && this.isContextMenuToShow()) {\n        currentDocument = currentDocument || props.getDocument();\n        this.contextMenuOutsideHandler1 = addEventListener(currentDocument,\n          'scroll', this.onContextMenuClose);\n      }\n      // close popup when trigger type contains 'onContextMenu' and window is blur.\n      if (!this.contextMenuOutsideHandler2 && this.isContextMenuToShow()) {\n        this.contextMenuOutsideHandler2 = addEventListener(window,\n          'blur', this.onContextMenuClose);\n      }\n      return;\n    }\n\n    this.clearOutsideHandler();\n  }\n\n  componentWillUnmount() {\n    this.clearDelayTimer();\n    this.clearOutsideHandler();\n  }\n\n  onMouseEnter = (e) => {\n    this.fireEvents('onMouseEnter', e);\n    this.delaySetPopupVisible(true, this.props.mouseEnterDelay);\n  };\n\n  onMouseLeave = (e) => {\n    this.fireEvents('onMouseLeave', e);\n    this.delaySetPopupVisible(false, this.props.mouseLeaveDelay);\n  };\n\n  onPopupMouseEnter = () => {\n    this.clearDelayTimer();\n  };\n\n  onPopupMouseLeave = (e) => {\n    // https://github.com/react-component/trigger/pull/13\n    // react bug?\n    if (e.relatedTarget && !e.relatedTarget.setTimeout &&\n      this._component &&\n      this._component.getPopupDomNode &&\n      contains(this._component.getPopupDomNode(), e.relatedTarget)) {\n      return;\n    }\n    this.delaySetPopupVisible(false, this.props.mouseLeaveDelay);\n  };\n\n  onFocus = (e) => {\n    this.fireEvents('onFocus', e);\n    // incase focusin and focusout\n    this.clearDelayTimer();\n    if (this.isFocusToShow()) {\n      this.focusTime = Date.now();\n      this.delaySetPopupVisible(true, this.props.focusDelay);\n    }\n  };\n\n  onMouseDown = (e) => {\n    this.fireEvents('onMouseDown', e);\n    this.preClickTime = Date.now();\n  };\n\n  onTouchStart = (e) => {\n    this.fireEvents('onTouchStart', e);\n    this.preTouchTime = Date.now();\n  };\n\n  onBlur = (e) => {\n    this.fireEvents('onBlur', e);\n    this.clearDelayTimer();\n    if (this.isBlurToHide()) {\n      this.delaySetPopupVisible(false, this.props.blurDelay);\n    }\n  };\n\n  onContextMenu = (e) => {\n    e.preventDefault();\n    this.fireEvents('onContextMenu', e);\n    this.setPopupVisible(true);\n  };\n\n  onContextMenuClose = () => {\n    if (this.isContextMenuToShow()) {\n      this.close();\n    }\n  };\n\n  onClick = (event) => {\n    this.fireEvents('onClick', event);\n    // focus will trigger click\n    if (this.focusTime) {\n      let preTime;\n      if (this.preClickTime && this.preTouchTime) {\n        preTime = Math.min(this.preClickTime, this.preTouchTime);\n      } else if (this.preClickTime) {\n        preTime = this.preClickTime;\n      } else if (this.preTouchTime) {\n        preTime = this.preTouchTime;\n      }\n      if (Math.abs(preTime - this.focusTime) < 20) {\n        return;\n      }\n      this.focusTime = 0;\n    }\n    this.preClickTime = 0;\n    this.preTouchTime = 0;\n    event.preventDefault();\n    const nextVisible = !this.state.popupVisible;\n    if (this.isClickToHide() && !nextVisible || nextVisible && this.isClickToShow()) {\n      this.setPopupVisible(!this.state.popupVisible);\n    }\n  };\n\n  onDocumentClick = (event) => {\n    if (this.props.mask && !this.props.maskClosable) {\n      return;\n    }\n    const target = event.target;\n    const root = findDOMNode(this);\n    const popupNode = this.getPopupDomNode();\n    if (!contains(root, target) && !contains(popupNode, target)) {\n      this.close();\n    }\n  };\n\n  getPopupDomNode() {\n    // for test\n    if (this._component && this._component.getPopupDomNode) {\n      return this._component.getPopupDomNode();\n    }\n    return null;\n  }\n\n  getRootDomNode = () => {\n    const { getRootDomNode } = this.props;\n    if (getRootDomNode) {\n      return getRootDomNode();\n    } else {\n      return findDOMNode(this);\n    }\n  };\n\n  getPopupClassFromAlign = (align) => {\n    const className = [];\n    const props = this.props;\n    const { popupPlacement, builtinPlacements, prefixCls } = props;\n    if (popupPlacement && builtinPlacements) {\n      className.push(getPopupClassNameFromAlign(builtinPlacements, prefixCls, align));\n    }\n    if (props.getPopupClassNameFromAlign) {\n      className.push(props.getPopupClassNameFromAlign(align));\n    }\n    return className.join(' ');\n  };\n\n  getPopupAlign() {\n    const props = this.props;\n    const { popupPlacement, popupAlign, builtinPlacements } = props;\n    if (popupPlacement && builtinPlacements) {\n      return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);\n    }\n    return popupAlign;\n  }\n\n  getComponent = () => {\n    const {\n      prefixCls, destroyPopupOnHide, popupClassName, action,\n      onPopupAlign, popupAnimation, popupTransitionName, popupStyle,\n      mask, maskAnimation, maskTransitionName, zIndex, popup, stretch,\n    } = this.props;\n    const { state } = this;\n\n    const align = this.getPopupAlign();\n\n    const mouseProps = {};\n    if (this.isMouseEnterToShow()) {\n      mouseProps.onMouseEnter = this.onPopupMouseEnter;\n    }\n    if (this.isMouseLeaveToHide()) {\n      mouseProps.onMouseLeave = this.onPopupMouseLeave;\n    }\n\n    return (\n      <Popup\n        prefixCls={prefixCls}\n        destroyPopupOnHide={destroyPopupOnHide}\n        visible={state.popupVisible}\n        className={popupClassName}\n        action={action}\n        align={align}\n        onAlign={onPopupAlign}\n        animation={popupAnimation}\n        getClassNameFromAlign={this.getPopupClassFromAlign}\n        {...mouseProps}\n        stretch={stretch}\n        getRootDomNode={this.getRootDomNode}\n        style={popupStyle}\n        mask={mask}\n        zIndex={zIndex}\n        transitionName={popupTransitionName}\n        maskAnimation={maskAnimation}\n        maskTransitionName={maskTransitionName}\n        ref={this.savePopup}\n      >\n        {typeof popup === 'function' ? popup() : popup}\n      </Popup>\n    );\n  };\n\n  getContainer = () => {\n    const { props } = this;\n    const popupContainer = document.createElement('div');\n    // Make sure default popup container will never cause scrollbar appearing\n    // https://github.com/react-component/trigger/issues/41\n    popupContainer.style.position = 'absolute';\n    popupContainer.style.top = '0';\n    popupContainer.style.left = '0';\n    popupContainer.style.width = '100%';\n    const mountNode = props.getPopupContainer ? props.getPopupContainer(findDOMNode(this)) : props.getDocument().body;\n    mountNode.appendChild(popupContainer);\n    return popupContainer;\n  };\n\n  setPopupVisible(popupVisible) {\n    this.clearDelayTimer();\n    if (this.state.popupVisible !== popupVisible) {\n      if (!('popupVisible' in this.props)) {\n        this.setState({\n          popupVisible,\n        });\n      }\n      this.props.onPopupVisibleChange(popupVisible);\n    }\n  }\n\n  handlePortalUpdate = () => {\n    if (this.prevPopupVisible !== this.state.popupVisible) {\n      this.props.afterPopupVisibleChange(this.state.popupVisible);\n    }\n  };\n\n  delaySetPopupVisible(visible, delayS) {\n    const delay = delayS * 1000;\n    this.clearDelayTimer();\n    if (delay) {\n      this.delayTimer = setTimeout(() => {\n        this.setPopupVisible(visible);\n        this.clearDelayTimer();\n      }, delay);\n    } else {\n      this.setPopupVisible(visible);\n    }\n  }\n\n  clearDelayTimer() {\n    if (this.delayTimer) {\n      clearTimeout(this.delayTimer);\n      this.delayTimer = null;\n    }\n  }\n\n  clearOutsideHandler() {\n    if (this.clickOutsideHandler) {\n      this.clickOutsideHandler.remove();\n      this.clickOutsideHandler = null;\n    }\n\n    if (this.contextMenuOutsideHandler1) {\n      this.contextMenuOutsideHandler1.remove();\n      this.contextMenuOutsideHandler1 = null;\n    }\n\n    if (this.contextMenuOutsideHandler2) {\n      this.contextMenuOutsideHandler2.remove();\n      this.contextMenuOutsideHandler2 = null;\n    }\n\n    if (this.touchOutsideHandler) {\n      this.touchOutsideHandler.remove();\n      this.touchOutsideHandler = null;\n    }\n  }\n\n  createTwoChains(event) {\n    const childPros = this.props.children.props;\n    const props = this.props;\n    if (childPros[event] && props[event]) {\n      return this[`fire${event}`];\n    }\n    return childPros[event] || props[event];\n  }\n\n  isClickToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('click') !== -1 || showAction.indexOf('click') !== -1;\n  }\n\n  isContextMenuToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('contextMenu') !== -1 || showAction.indexOf('contextMenu') !== -1;\n  }\n\n  isClickToHide() {\n    const { action, hideAction } = this.props;\n    return action.indexOf('click') !== -1 || hideAction.indexOf('click') !== -1;\n  }\n\n  isMouseEnterToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('hover') !== -1 || showAction.indexOf('mouseEnter') !== -1;\n  }\n\n  isMouseLeaveToHide() {\n    const { action, hideAction } = this.props;\n    return action.indexOf('hover') !== -1 || hideAction.indexOf('mouseLeave') !== -1;\n  }\n\n  isFocusToShow() {\n    const { action, showAction } = this.props;\n    return action.indexOf('focus') !== -1 || showAction.indexOf('focus') !== -1;\n  }\n\n  isBlurToHide() {\n    const { action, hideAction } = this.props;\n    return action.indexOf('focus') !== -1 || hideAction.indexOf('blur') !== -1;\n  }\n\n  forcePopupAlign() {\n    if (this.state.popupVisible && this._component && this._component.alignInstance) {\n      this._component.alignInstance.forceAlign();\n    }\n  }\n\n  fireEvents(type, e) {\n    const childCallback = this.props.children.props[type];\n    if (childCallback) {\n      childCallback(e);\n    }\n    const callback = this.props[type];\n    if (callback) {\n      callback(e);\n    }\n  }\n\n  close() {\n    this.setPopupVisible(false);\n  }\n\n  savePopup = (node) => {\n    this._component = node;\n  };\n\n  render() {\n    const { popupVisible } = this.state;\n    const props = this.props;\n    const children = props.children;\n    const child = Children.only(children);\n    const newChildProps = { key: 'trigger' };\n\n    if (this.isContextMenuToShow()) {\n      newChildProps.onContextMenu = this.onContextMenu;\n    } else {\n      newChildProps.onContextMenu = this.createTwoChains('onContextMenu');\n    }\n\n    if (this.isClickToHide() || this.isClickToShow()) {\n      newChildProps.onClick = this.onClick;\n      newChildProps.onMouseDown = this.onMouseDown;\n      newChildProps.onTouchStart = this.onTouchStart;\n    } else {\n      newChildProps.onClick = this.createTwoChains('onClick');\n      newChildProps.onMouseDown = this.createTwoChains('onMouseDown');\n      newChildProps.onTouchStart = this.createTwoChains('onTouchStart');\n    }\n    if (this.isMouseEnterToShow()) {\n      newChildProps.onMouseEnter = this.onMouseEnter;\n    } else {\n      newChildProps.onMouseEnter = this.createTwoChains('onMouseEnter');\n    }\n    if (this.isMouseLeaveToHide()) {\n      newChildProps.onMouseLeave = this.onMouseLeave;\n    } else {\n      newChildProps.onMouseLeave = this.createTwoChains('onMouseLeave');\n    }\n    if (this.isFocusToShow() || this.isBlurToHide()) {\n      newChildProps.onFocus = this.onFocus;\n      newChildProps.onBlur = this.onBlur;\n    } else {\n      newChildProps.onFocus = this.createTwoChains('onFocus');\n      newChildProps.onBlur = this.createTwoChains('onBlur');\n    }\n\n    const trigger = cloneElement(child, newChildProps);\n\n    if (!IS_REACT_16) {\n      return (\n        <ContainerRender\n          parent={this}\n          visible={popupVisible}\n          autoMount={false}\n          forceRender={props.forceRender}\n          getComponent={this.getComponent}\n          getContainer={this.getContainer}\n        >\n          {({ renderComponent }) => {\n            this.renderComponent = renderComponent;\n            return trigger;\n          }}\n        </ContainerRender>\n      );\n    }\n\n    let portal;\n    // prevent unmounting after it's rendered\n    if (popupVisible || this._component || props.forceRender) {\n      portal = (\n        <Portal\n          key=\"portal\"\n          getContainer={this.getContainer}\n          didUpdate={this.handlePortalUpdate}\n        >\n          {this.getComponent()}\n        </Portal>\n      );\n    }\n\n    return [\n      trigger,\n      portal,\n    ];\n  }\n}\n"]}