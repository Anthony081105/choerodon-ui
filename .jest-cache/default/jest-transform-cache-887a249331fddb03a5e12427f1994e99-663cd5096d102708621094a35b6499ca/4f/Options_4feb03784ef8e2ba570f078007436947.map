{"version":3,"sources":["Options.jsx"],"names":["BUILT_IN_PLACEMENTS","bottomLeft","points","offset","overflow","adjustX","adjustY","topLeft","bottomRight","Options","props","value","locale","items_per_page","changeSize","Number","e","setState","goInputText","target","val","state","isNaN","current","keyCode","KEYCODE","ENTER","type","quickGo","prefixCls","rootPrefixCls","goButton","buildOptionText","Select","selectComponentClass","changeSelect","goInput","gotoButton","label","Option","pageSize","pageSizeOptions","options","map","opt","i","selectPrefixCls","toString","triggerNode","parentNode","go","jump_to_confirm","jump_to","handleChange","page","changeSizeLabel","label_items_per_page","Component","PropTypes","func","number","arrayOf","string","object"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,mBAAmB,GAAG;AAC1BC,EAAAA,UAAU,EAAE;AACVC,IAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP,CADE;AAEVC,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFE;AAGVC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE,CADD;AAERC,MAAAA,OAAO,EAAE;AAFD;AAHA,GADc;AAS1BC,EAAAA,OAAO,EAAE;AACPL,IAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP,CADD;AAEPC,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAC,CAAL,CAFD;AAGPC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE,CADD;AAERC,MAAAA,OAAO,EAAE;AAFD;AAHH,GATiB;AAiB1BE,EAAAA,WAAW,EAAE;AACXN,IAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP,CADG;AAEXC,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFG;AAGXC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,OAAO,EAAE,CADD;AAERC,MAAAA,OAAO,EAAE;AAFD;AAHC;AAjBa,CAA5B;;IA2BqBG,O;;;;;;;AAgBnB,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA;AACjB,8BAAMA,KAAN;AADiB,wGASD,UAACC,KAAD,EAAW;AAC3B,uBAAUA,KAAV,cAAmB,MAAKD,KAAL,CAAWE,MAAX,CAAkBC,cAArC;AACD,KAXkB;AAAA,mGAaN,UAACF,KAAD,EAAW;AACtB,YAAKD,KAAL,CAAWI,UAAX,CAAsBC,MAAM,CAACJ,KAAD,CAA5B;AACD,KAfkB;AAAA,qGAiBJ,UAACK,CAAD,EAAO;AACpB,YAAKC,QAAL,CAAc;AACZC,QAAAA,WAAW,EAAEF,CAAC,CAACG,MAAF,CAASR;AADV,OAAd;AAGD,KArBkB;AAAA,2FAuBd,UAACK,CAAD,EAAO;AACV,UAAII,GAAG,GAAG,MAAKC,KAAL,CAAWH,WAArB;;AACA,UAAIE,GAAG,KAAK,EAAZ,EAAgB;AACd;AACD;;AACDA,MAAAA,GAAG,GAAGL,MAAM,CAACK,GAAD,CAAZ;;AACA,UAAIE,KAAK,CAACF,GAAD,CAAT,EAAgB;AACdA,QAAAA,GAAG,GAAG,MAAKC,KAAL,CAAWE,OAAjB;AACD;;AACD,UAAIP,CAAC,CAACQ,OAAF,KAAcC,oBAAQC,KAAtB,IAA+BV,CAAC,CAACW,IAAF,KAAW,OAA9C,EAAuD;AACrD,cAAKV,QAAL,CAAc;AACZC,UAAAA,WAAW,EAAE,EADD;AAEZK,UAAAA,OAAO,EAAE,MAAKb,KAAL,CAAWkB,OAAX,CAAmBR,GAAnB;AAFG,SAAd;AAID;AACF,KAtCkB;AAGjB,UAAKC,KAAL,GAAa;AACXE,MAAAA,OAAO,EAAEb,KAAK,CAACa,OADJ;AAEXL,MAAAA,WAAW,EAAE;AAFF,KAAb;AAHiB;AAOlB;;;;6BAiCQ;AACP,UAAMR,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMW,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMT,MAAM,GAAGF,KAAK,CAACE,MAArB;AACA,UAAMiB,SAAS,aAAMnB,KAAK,CAACoB,aAAZ,aAAf;AACA,UAAMhB,UAAU,GAAGJ,KAAK,CAACI,UAAzB;AACA,UAAMc,OAAO,GAAGlB,KAAK,CAACkB,OAAtB;AACA,UAAMG,QAAQ,GAAGrB,KAAK,CAACqB,QAAvB;AACA,UAAMC,eAAe,GAAGtB,KAAK,CAACsB,eAAN,IAAyB,KAAKA,eAAtD;AACA,UAAMC,MAAM,GAAGvB,KAAK,CAACwB,oBAArB;AACA,UAAIC,YAAY,GAAG,IAAnB;AACA,UAAIC,OAAO,GAAG,IAAd;AACA,UAAIC,UAAU,GAAG,IAAjB;AACA,UAAIC,KAAK,GAAG,IAAZ;;AAEA,UAAI,EAAExB,UAAU,IAAIc,OAAhB,CAAJ,EAA8B;AAC5B,eAAO,IAAP;AACD;;AAED,UAAId,UAAU,IAAImB,MAAlB,EAA0B;AACxB,YAAMM,MAAM,GAAGN,MAAM,CAACM,MAAtB;AACA,YAAMC,QAAQ,GAAG9B,KAAK,CAAC8B,QAAN,IAAkB9B,KAAK,CAAC+B,eAAN,CAAsB,CAAtB,CAAnC;AACA,YAAMC,OAAO,GAAGhC,KAAK,CAAC+B,eAAN,CAAsBE,GAAtB,CAA0B,UAACC,GAAD,EAAMC,CAAN;AAAA,iBACxC,gCAAC,MAAD;AAAQ,YAAA,GAAG,EAAEA,CAAb;AAAgB,YAAA,KAAK,EAAED;AAAvB,aAA6BZ,eAAe,CAACY,GAAD,CAA5C,CADwC;AAAA,SAA1B,CAAhB;AAIAT,QAAAA,YAAY,GACV,gCAAC,MAAD;AACE,UAAA,SAAS,EAAEzB,KAAK,CAACoC,eADnB;AAEE,UAAA,UAAU,EAAE,KAFd;AAGE,UAAA,SAAS,YAAKjB,SAAL,kBAHX;AAIE,UAAA,eAAe,EAAC,UAJlB;AAKE,UAAA,wBAAwB,EAAE,KAL5B;AAME,UAAA,KAAK,EAAEW,QAAQ,CAACO,QAAT,EANT;AAOE,UAAA,QAAQ,EAAE,KAAKjC,UAPjB;AAQE,UAAA,iBAAiB,EAAEd,mBARrB;AASE,UAAA,iBAAiB,EAAE,2BAAAgD,WAAW;AAAA,mBAAIA,WAAW,CAACC,UAAhB;AAAA,WAThC;AAUE,UAAA,MAAM,EAAE;AAVV,WAYGP,OAZH,CADF;AAgBD;;AAED,UAAId,OAAJ,EAAa;AACX,YAAIG,QAAJ,EAAc;AACZ,cAAI,OAAOA,QAAP,KAAoB,SAAxB,EAAmC;AACjCM,YAAAA,UAAU,GACR;AACE,cAAA,IAAI,EAAC,QADP;AAEE,cAAA,OAAO,EAAE,KAAKa,EAFhB;AAGE,cAAA,OAAO,EAAE,KAAKA;AAHhB,eAKGtC,MAAM,CAACuC,eALV,CADF;AASD,WAVD,MAUO;AACLd,YAAAA,UAAU,GACR;AACE,cAAA,OAAO,EAAE,KAAKa,EADhB;AAEE,cAAA,OAAO,EAAE,KAAKA;AAFhB,eAGEnB,QAHF,CADF;AAMD;AACF;;AACDK,QAAAA,OAAO,GACL;AAAK,UAAA,SAAS,YAAKP,SAAL;AAAd,WACGjB,MAAM,CAACwC,OADV,EAEE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,KAAK,EAAE/B,KAAK,CAACH,WAFf;AAGE,UAAA,QAAQ,EAAE,KAAKmC,YAHjB;AAIE,UAAA,OAAO,EAAE,KAAKH;AAJhB,UAFF,EAQGtC,MAAM,CAAC0C,IARV,EASGjB,UATH,CADF;AAaD;;AAED,UAAI3B,KAAK,CAAC6C,eAAV,EAA2B;AACzBjB,QAAAA,KAAK,GACH;AAAM,UAAA,SAAS,YAAKT,SAAL;AAAf,WACCjB,MAAM,CAAC4C,oBADR,CADF;AAKD;;AAED,aACE;AAAI,QAAA,SAAS,YAAK3B,SAAL;AAAb,SACGS,KADH,EAEGH,YAFH,EAGGC,OAHH,CADF;AAOD;;;EAvJkCqB,gB;;;iCAAhBhD,O,eACA;AACjBK,EAAAA,UAAU,EAAE4C,sBAAUC,IADL;AAEjB/B,EAAAA,OAAO,EAAE8B,sBAAUC,IAFF;AAGjBzB,EAAAA,oBAAoB,EAAEwB,sBAAUC,IAHf;AAIjBpC,EAAAA,OAAO,EAAEmC,sBAAUE,MAJF;AAKjBnB,EAAAA,eAAe,EAAEiB,sBAAUG,OAAV,CAAkBH,sBAAUI,MAA5B,CALA;AAMjBtB,EAAAA,QAAQ,EAAEkB,sBAAUE,MANH;AAOjB5B,EAAAA,eAAe,EAAE0B,sBAAUC,IAPV;AAQjB/C,EAAAA,MAAM,EAAE8C,sBAAUK;AARD,C;iCADAtD,O,kBAYG;AACpBgC,EAAAA,eAAe,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AADG,C","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport KEYCODE from './KeyCode';\n\nconst BUILT_IN_PLACEMENTS = {\n  bottomLeft: {\n    points: ['tl', 'tl'],\n    offset: [0, 0],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n  topLeft: {\n    points: ['bl', 'tl'],\n    offset: [0, -4],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n  bottomRight: {\n    points: ['tr', 'br'],\n    offset: [0, 4],\n    overflow: {\n      adjustX: 0,\n      adjustY: 1,\n    },\n  },\n};\n\nexport default class Options extends Component {\n  static propTypes = {\n    changeSize: PropTypes.func,\n    quickGo: PropTypes.func,\n    selectComponentClass: PropTypes.func,\n    current: PropTypes.number,\n    pageSizeOptions: PropTypes.arrayOf(PropTypes.string),\n    pageSize: PropTypes.number,\n    buildOptionText: PropTypes.func,\n    locale: PropTypes.object,\n  };\n\n  static defaultProps = {\n    pageSizeOptions: ['10', '20', '30', '40'],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      current: props.current,\n      goInputText: '',\n    };\n  }\n\n  buildOptionText = (value) => {\n    return `${value} ${this.props.locale.items_per_page}`;\n  };\n\n  changeSize = (value) => {\n    this.props.changeSize(Number(value));\n  };\n\n  handleChange = (e) => {\n    this.setState({\n      goInputText: e.target.value,\n    });\n  };\n\n  go = (e) => {\n    let val = this.state.goInputText;\n    if (val === '') {\n      return;\n    }\n    val = Number(val);\n    if (isNaN(val)) {\n      val = this.state.current;\n    }\n    if (e.keyCode === KEYCODE.ENTER || e.type === 'click') {\n      this.setState({\n        goInputText: '',\n        current: this.props.quickGo(val),\n      });\n    }\n  };\n\n  render() {\n    const props = this.props;\n    const state = this.state;\n    const locale = props.locale;\n    const prefixCls = `${props.rootPrefixCls}-options`;\n    const changeSize = props.changeSize;\n    const quickGo = props.quickGo;\n    const goButton = props.goButton;\n    const buildOptionText = props.buildOptionText || this.buildOptionText;\n    const Select = props.selectComponentClass;\n    let changeSelect = null;\n    let goInput = null;\n    let gotoButton = null;\n    let label = null;\n\n    if (!(changeSize || quickGo)) {\n      return null;\n    }\n\n    if (changeSize && Select) {\n      const Option = Select.Option;\n      const pageSize = props.pageSize || props.pageSizeOptions[0];\n      const options = props.pageSizeOptions.map((opt, i) => (\n        <Option key={i} value={opt}>{buildOptionText(opt)}</Option>\n      ));\n\n      changeSelect = (\n        <Select\n          prefixCls={props.selectPrefixCls}\n          showSearch={false}\n          className={`${prefixCls}-size-changer`}\n          optionLabelProp=\"children\"\n          dropdownMatchSelectWidth={false}\n          value={pageSize.toString()}\n          onChange={this.changeSize}\n          builtinPlacements={BUILT_IN_PLACEMENTS}\n          getPopupContainer={triggerNode => triggerNode.parentNode}\n          border={false}\n        >\n          {options}\n        </Select>\n      );\n    }\n\n    if (quickGo) {\n      if (goButton) {\n        if (typeof goButton === 'boolean') {\n          gotoButton = (\n            <button\n              type=\"button\"\n              onClick={this.go}\n              onKeyUp={this.go}\n            >\n              {locale.jump_to_confirm}\n            </button>\n          );\n        } else {\n          gotoButton = (\n            <span\n              onClick={this.go}\n              onKeyUp={this.go}\n            >{goButton}</span>\n          );\n        }\n      }\n      goInput = (\n        <div className={`${prefixCls}-quick-jumper`}>\n          {locale.jump_to}\n          <input\n            type=\"text\"\n            value={state.goInputText}\n            onChange={this.handleChange}\n            onKeyUp={this.go}\n          />\n          {locale.page}\n          {gotoButton}\n        </div>\n      );\n    }\n\n    if (props.changeSizeLabel) {\n      label = (\n        <span className={`${prefixCls}-label`}>\n        {locale.label_items_per_page}\n        </span>\n      );\n    }\n\n    return (\n      <li className={`${prefixCls}`}>\n        {label}\n        {changeSelect}\n        {goInput}\n      </li>\n    );\n  }\n}\n"]}