97468507d0e7a5801b6686f0745f40b2
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _classnames = _interopRequireDefault(require("classnames"));

function _createSuper(Derived) {
  function isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;

    try {
      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
      return true;
    } catch (e) {
      return false;
    }
  }

  return function () {
    var Super = (0, _getPrototypeOf2["default"])(Derived),
        result;

    if (isNativeReflectConstruct()) {
      var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return (0, _possibleConstructorReturn2["default"])(this, result);
  };
}

var ROW = 4;
var COL = 3;

function goYear(direction) {
  var next = this.state.value.clone();
  next.add(direction, 'years');
  this.setState({
    value: next
  });
}

function chooseDecade(year, event) {
  var next = this.state.value.clone();
  next.year(year);
  next.month(this.state.value.month());
  this.props.onSelect(next);
  event.preventDefault();
}

var DecadePanel =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(DecadePanel, _Component);

  var _super = _createSuper(DecadePanel);

  function DecadePanel(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, DecadePanel);
    _this = _super.call(this, props);
    _this.state = {
      value: props.value || props.defaultValue
    }; // bind methods

    _this.prefixCls = "".concat(props.rootPrefixCls, "-decade-panel");
    _this.nextCentury = goYear.bind((0, _assertThisInitialized2["default"])(_this), 100);
    _this.previousCentury = goYear.bind((0, _assertThisInitialized2["default"])(_this), -100);
    return _this;
  }

  (0, _createClass2["default"])(DecadePanel, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var value = this.state.value;
      var locale = this.props.locale;
      var currentYear = value.year();
      var startYear = parseInt(currentYear / 100, 10) * 100;
      var preYear = startYear - 10;
      var endYear = startYear + 99;
      var decades = [];
      var index = 0;
      var prefixCls = this.prefixCls;

      for (var rowIndex = 0; rowIndex < ROW; rowIndex++) {
        decades[rowIndex] = [];

        for (var colIndex = 0; colIndex < COL; colIndex++) {
          var startDecade = preYear + index * 10;
          var endDecade = preYear + index * 10 + 9;
          decades[rowIndex][colIndex] = {
            startDecade: startDecade,
            endDecade: endDecade
          };
          index++;
        }
      }

      var decadesEls = decades.map(function (row, decadeIndex) {
        var tds = row.map(function (decadeData) {
          var _classNameMap;

          var dStartDecade = decadeData.startDecade;
          var dEndDecade = decadeData.endDecade;
          var isLast = dStartDecade < startYear;
          var isNext = dEndDecade > endYear;
          var classNameMap = (_classNameMap = {}, (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-cell"), 1), (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-selected-cell"), dStartDecade <= currentYear && currentYear <= dEndDecade), (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-last-century-cell"), isLast), (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-next-century-cell"), isNext), _classNameMap);
          var content = "".concat(dStartDecade, "-").concat(dEndDecade);
          var clickHandler;

          if (isLast) {
            clickHandler = _this2.previousCentury;
          } else if (isNext) {
            clickHandler = _this2.nextCentury;
          } else {
            clickHandler = chooseDecade.bind(_this2, dStartDecade);
          }

          return _react["default"].createElement("td", {
            key: dStartDecade,
            onClick: clickHandler,
            role: "gridcell",
            className: (0, _classnames["default"])(classNameMap)
          }, _react["default"].createElement("a", {
            className: "".concat(prefixCls, "-decade")
          }, content));
        });
        return _react["default"].createElement("tr", {
          key: decadeIndex,
          role: "row"
        }, tds);
      });
      return _react["default"].createElement("div", {
        className: this.prefixCls
      }, _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-header")
      }, _react["default"].createElement("a", {
        className: "".concat(prefixCls, "-prev-century-btn"),
        role: "button",
        onClick: this.previousCentury,
        title: locale.previousCentury
      }), _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-century")
      }, startYear, "-", endYear), _react["default"].createElement("a", {
        className: "".concat(prefixCls, "-next-century-btn"),
        role: "button",
        onClick: this.nextCentury,
        title: locale.nextCentury
      })), _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-body")
      }, _react["default"].createElement("table", {
        className: "".concat(prefixCls, "-table"),
        cellSpacing: "0",
        role: "grid"
      }, _react["default"].createElement("tbody", {
        className: "".concat(prefixCls, "-tbody")
      }, decadesEls))));
    }
  }]);
  return DecadePanel;
}(_react.Component);

exports["default"] = DecadePanel;
(0, _defineProperty2["default"])(DecadePanel, "propTypes", {
  locale: _propTypes["default"].object,
  value: _propTypes["default"].object,
  defaultValue: _propTypes["default"].object,
  rootPrefixCls: _propTypes["default"].string
});
(0, _defineProperty2["default"])(DecadePanel, "defaultProps", {
  onSelect: function onSelect() {}
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRlY2FkZVBhbmVsLmpzeCJdLCJuYW1lcyI6WyJST1ciLCJDT0wiLCJnb1llYXIiLCJkaXJlY3Rpb24iLCJuZXh0Iiwic3RhdGUiLCJ2YWx1ZSIsImNsb25lIiwiYWRkIiwic2V0U3RhdGUiLCJjaG9vc2VEZWNhZGUiLCJ5ZWFyIiwiZXZlbnQiLCJtb250aCIsInByb3BzIiwib25TZWxlY3QiLCJwcmV2ZW50RGVmYXVsdCIsIkRlY2FkZVBhbmVsIiwiZGVmYXVsdFZhbHVlIiwicHJlZml4Q2xzIiwicm9vdFByZWZpeENscyIsIm5leHRDZW50dXJ5IiwiYmluZCIsInByZXZpb3VzQ2VudHVyeSIsImxvY2FsZSIsImN1cnJlbnRZZWFyIiwic3RhcnRZZWFyIiwicGFyc2VJbnQiLCJwcmVZZWFyIiwiZW5kWWVhciIsImRlY2FkZXMiLCJpbmRleCIsInJvd0luZGV4IiwiY29sSW5kZXgiLCJzdGFydERlY2FkZSIsImVuZERlY2FkZSIsImRlY2FkZXNFbHMiLCJtYXAiLCJyb3ciLCJkZWNhZGVJbmRleCIsInRkcyIsImRlY2FkZURhdGEiLCJkU3RhcnREZWNhZGUiLCJkRW5kRGVjYWRlIiwiaXNMYXN0IiwiaXNOZXh0IiwiY2xhc3NOYW1lTWFwIiwiY29udGVudCIsImNsaWNrSGFuZGxlciIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsIm9iamVjdCIsInN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsSUFBTUEsR0FBRyxHQUFHLENBQVo7QUFDQSxJQUFNQyxHQUFHLEdBQUcsQ0FBWjs7QUFFQSxTQUFTQyxNQUFULENBQWdCQyxTQUFoQixFQUEyQjtBQUN6QixNQUFNQyxJQUFJLEdBQUcsS0FBS0MsS0FBTCxDQUFXQyxLQUFYLENBQWlCQyxLQUFqQixFQUFiO0FBQ0FILEVBQUFBLElBQUksQ0FBQ0ksR0FBTCxDQUFTTCxTQUFULEVBQW9C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QUNFO0FBQ0UsUUFBQSxTQUFTLFlBQUtBLFNBQUwsc0JBRFg7QUFFRSxRQUFBLElBQUksRUFBQyxRQUZQO0FBR0UsUUFBQSxPQUFPLEVBQUUsS0FBS0ksZUFIaEI7QUFJRSxRQUFBLEtBQUssRUFBRUMsTUFBTSxDQUFDRDtBQUpoQixRQURGLEVBUUU7QUFBSyxRQUFBLFNBQVMsWUFBS0osU0FBTDtBQUFkLFNBQ0dPLFNBREgsT0FDZUcsT0FEZixDQVJGLEVBV0U7QUFDRSxRQUFBLFNBQVMsWUFBS1YsU0FBTCxzQkFEWDtBQUVFLFFBQUEsSUFBSSxFQUFDLFFBRlA7QUFHRSxRQUFBLE9BQU8sRUFBRSxLQUFLRSxXQUhoQjtBQUlFLFFBQUEsS0FBSyxFQUFFRyxNQUFNLENBQUNIO0FBSmhCLFFBWEYsQ0FERixFQW1CRTtBQUFLLFFBQUEsU0FBUyxZQUFLRixTQUFMO0FBQWQsU0FDRTtBQUFPLFFBQUEsU0FBUyxZQUFLQSxTQUFMLFdBQWhCO0FBQXdDLFFBQUEsV0FBVyxFQUFDLEdBQXBEO0FBQXdELFFBQUEsSUFBSSxFQUFDO0FBQTdELFNBQ0U7QUFBTyxRQUFBLFNBQVMsWUFBS0EsU0FBTDtBQUFoQixTQUNDaUIsVUFERCxDQURGLENBREYsQ0FuQkYsQ0FERjtBQTRCRDs7O0VBbEhzQ2EsZ0I7OztpQ0FBcEJoQyxXLGVBQ0E7QUFDakJPLEVBQUFBLE1BQU0sRUFBRTBCLHNCQUFVQyxNQUREO0FBRWpCN0MsRUFBQUEsS0FBSyxFQUFFNEMsc0JBQVVDLE1BRkE7QUFHakJqQyxFQUFBQSxZQUFZLEVBQUVnQyxzQkFBVUMsTUFIUDtBQUlqQi9CLEVBQUFBLGFBQWEsRUFBRThCLHNCQUFVRTtBQUpSLEM7aUNBREFuQyxXLGtCQVFHO0FBQ3BCRixFQUFBQSxRQURvQixzQkFDVCxDQUNWO0FBRm1CLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5jb25zdCBST1cgPSA0O1xuY29uc3QgQ09MID0gMztcblxuZnVuY3Rpb24gZ29ZZWFyKGRpcmVjdGlvbikge1xuICBjb25zdCBuZXh0ID0gdGhpcy5zdGF0ZS52YWx1ZS5jbG9uZSgpO1xuICBuZXh0LmFkZChkaXJlY3Rpb24sICd5ZWFycycpO1xuICB0aGlzLnNldFN0YXRlKHtcbiAgICB2YWx1ZTogbmV4dCxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNob29zZURlY2FkZSh5ZWFyLCBldmVudCkge1xuICBjb25zdCBuZXh0ID0gdGhpcy5zdGF0ZS52YWx1ZS5jbG9uZSgpO1xuICBuZXh0LnllYXIoeWVhcik7XG4gIG5leHQubW9udGgodGhpcy5zdGF0ZS52YWx1ZS5tb250aCgpKTtcbiAgdGhpcy5wcm9wcy5vblNlbGVjdChuZXh0KTtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVjYWRlUGFuZWwgZXh0ZW5kcyBDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGxvY2FsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBkZWZhdWx0VmFsdWU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgcm9vdFByZWZpeENsczogUHJvcFR5cGVzLnN0cmluZyxcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIG9uU2VsZWN0KCkge1xuICAgIH0sXG4gIH07XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHZhbHVlOiBwcm9wcy52YWx1ZSB8fCBwcm9wcy5kZWZhdWx0VmFsdWUsXG4gICAgfTtcblxuICAgIC8vIGJpbmQgbWV0aG9kc1xuICAgIHRoaXMucHJlZml4Q2xzID0gYCR7cHJvcHMucm9vdFByZWZpeENsc30tZGVjYWRlLXBhbmVsYDtcbiAgICB0aGlzLm5leHRDZW50dXJ5ID0gZ29ZZWFyLmJpbmQodGhpcywgMTAwKTtcbiAgICB0aGlzLnByZXZpb3VzQ2VudHVyeSA9IGdvWWVhci5iaW5kKHRoaXMsIC0xMDApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZTtcbiAgICBjb25zdCBsb2NhbGUgPSB0aGlzLnByb3BzLmxvY2FsZTtcbiAgICBjb25zdCBjdXJyZW50WWVhciA9IHZhbHVlLnllYXIoKTtcbiAgICBjb25zdCBzdGFydFllYXIgPSBwYXJzZUludChjdXJyZW50WWVhciAvIDEwMCwgMTApICogMTAwO1xuICAgIGNvbnN0IHByZVllYXIgPSBzdGFydFllYXIgLSAxMDtcbiAgICBjb25zdCBlbmRZZWFyID0gc3RhcnRZZWFyICsgOTk7XG4gICAgY29uc3QgZGVjYWRlcyA9IFtdO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgY29uc3QgcHJlZml4Q2xzID0gdGhpcy5wcmVmaXhDbHM7XG5cbiAgICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgUk9XOyByb3dJbmRleCsrKSB7XG4gICAgICBkZWNhZGVzW3Jvd0luZGV4XSA9IFtdO1xuICAgICAgZm9yIChsZXQgY29sSW5kZXggPSAwOyBjb2xJbmRleCA8IENPTDsgY29sSW5kZXgrKykge1xuICAgICAgICBjb25zdCBzdGFydERlY2FkZSA9IHByZVllYXIgKyBpbmRleCAqIDEwO1xuICAgICAgICBjb25zdCBlbmREZWNhZGUgPSBwcmVZZWFyICsgaW5kZXggKiAxMCArIDk7XG4gICAgICAgIGRlY2FkZXNbcm93SW5kZXhdW2NvbEluZGV4XSA9IHtcbiAgICAgICAgICBzdGFydERlY2FkZSxcbiAgICAgICAgICBlbmREZWNhZGUsXG4gICAgICAgIH07XG4gICAgICAgIGluZGV4Kys7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVjYWRlc0VscyA9IGRlY2FkZXMubWFwKChyb3csIGRlY2FkZUluZGV4KSA9PiB7XG4gICAgICBjb25zdCB0ZHMgPSByb3cubWFwKGRlY2FkZURhdGEgPT4ge1xuICAgICAgICBjb25zdCBkU3RhcnREZWNhZGUgPSBkZWNhZGVEYXRhLnN0YXJ0RGVjYWRlO1xuICAgICAgICBjb25zdCBkRW5kRGVjYWRlID0gZGVjYWRlRGF0YS5lbmREZWNhZGU7XG4gICAgICAgIGNvbnN0IGlzTGFzdCA9IGRTdGFydERlY2FkZSA8IHN0YXJ0WWVhcjtcbiAgICAgICAgY29uc3QgaXNOZXh0ID0gZEVuZERlY2FkZSA+IGVuZFllYXI7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZU1hcCA9IHtcbiAgICAgICAgICBbYCR7cHJlZml4Q2xzfS1jZWxsYF06IDEsXG4gICAgICAgICAgW2Ake3ByZWZpeENsc30tc2VsZWN0ZWQtY2VsbGBdOiBkU3RhcnREZWNhZGUgPD0gY3VycmVudFllYXIgJiYgY3VycmVudFllYXIgPD0gZEVuZERlY2FkZSxcbiAgICAgICAgICBbYCR7cHJlZml4Q2xzfS1sYXN0LWNlbnR1cnktY2VsbGBdOiBpc0xhc3QsXG4gICAgICAgICAgW2Ake3ByZWZpeENsc30tbmV4dC1jZW50dXJ5LWNlbGxgXTogaXNOZXh0LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYCR7ZFN0YXJ0RGVjYWRlfS0ke2RFbmREZWNhZGV9YDtcbiAgICAgICAgbGV0IGNsaWNrSGFuZGxlcjtcbiAgICAgICAgaWYgKGlzTGFzdCkge1xuICAgICAgICAgIGNsaWNrSGFuZGxlciA9IHRoaXMucHJldmlvdXNDZW50dXJ5O1xuICAgICAgICB9IGVsc2UgaWYgKGlzTmV4dCkge1xuICAgICAgICAgIGNsaWNrSGFuZGxlciA9IHRoaXMubmV4dENlbnR1cnk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2xpY2tIYW5kbGVyID0gY2hvb3NlRGVjYWRlLmJpbmQodGhpcywgZFN0YXJ0RGVjYWRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDx0ZFxuICAgICAgICAgIGtleT17ZFN0YXJ0RGVjYWRlfVxuICAgICAgICAgIG9uQ2xpY2s9e2NsaWNrSGFuZGxlcn1cbiAgICAgICAgICByb2xlPVwiZ3JpZGNlbGxcIlxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhjbGFzc05hbWVNYXApfVxuICAgICAgICA+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1kZWNhZGVgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjb250ZW50fVxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC90ZD4pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gKDx0ciBrZXk9e2RlY2FkZUluZGV4fSByb2xlPVwicm93XCI+e3Rkc308L3RyPik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e3RoaXMucHJlZml4Q2xzfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30taGVhZGVyYH0+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1wcmV2LWNlbnR1cnktYnRuYH1cbiAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5wcmV2aW91c0NlbnR1cnl9XG4gICAgICAgICAgICB0aXRsZT17bG9jYWxlLnByZXZpb3VzQ2VudHVyeX1cbiAgICAgICAgICAvPlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tY2VudHVyeWB9PlxuICAgICAgICAgICAge3N0YXJ0WWVhcn0te2VuZFllYXJ9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1uZXh0LWNlbnR1cnktYnRuYH1cbiAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgb25DbGljaz17dGhpcy5uZXh0Q2VudHVyeX1cbiAgICAgICAgICAgIHRpdGxlPXtsb2NhbGUubmV4dENlbnR1cnl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWJvZHlgfT5cbiAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXRhYmxlYH0gY2VsbFNwYWNpbmc9XCIwXCIgcm9sZT1cImdyaWRcIj5cbiAgICAgICAgICAgIDx0Ym9keSBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tdGJvZHlgfT5cbiAgICAgICAgICAgIHtkZWNhZGVzRWxzfVxuICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICA8L3RhYmxlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2Pik7XG4gIH1cbn1cbiJdfQ==