6a22a23500e472fa6b867393b6a1f0ca
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _debounce = _interopRequireDefault(require("lodash/debounce"));

var _isEqual = _interopRequireDefault(require("lodash/isEqual"));

var _merge = _interopRequireDefault(require("lodash/merge"));

var _miniStore = require("mini-store");

var _componentClasses = _interopRequireDefault(require("component-classes"));

var _warning = _interopRequireDefault(require("../../_util/warning"));

var _addEventListener = _interopRequireDefault(require("../../_util/addEventListener"));

var _ColumnManager = _interopRequireDefault(require("./ColumnManager"));

var _HeadTable = _interopRequireDefault(require("./HeadTable"));

var _BodyTable = _interopRequireDefault(require("./BodyTable"));

var _FootTable = _interopRequireDefault(require("./FootTable"));

var _ExpandableTable = _interopRequireDefault(require("./ExpandableTable"));

var Table =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Table, _Component);

  function Table(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, Table);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(Table).call(this, props));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getRowKey", function (record, index) {
      var rowKey = _this.props.rowKey;
      var key = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];
      (0, _warning["default"])(key !== undefined, 'Each record in table should have a unique `key` prop,' + 'or set `rowKey` to an unique primary key.');
      return key === undefined ? index : key;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleWindowResize", function () {
      _this.syncFixedTableRowHeight();

      _this.setScrollPositionClassName();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "syncFixedTableRowHeight", function () {
      var tableRect = _this.tableNode.getBoundingClientRect(); // If tableNode's height less than 0, suppose it is hidden and don't recalculate rowHeight.


      if (tableRect.height !== undefined && tableRect.height <= 0) {
        return;
      }

      var prefixCls = _this.props.prefixCls;
      var headRows = _this.headTable ? _this.headTable.querySelectorAll('thead') : _this.bodyTable.querySelectorAll('thead');
      var footRows = _this.footTable ? _this.footTable.querySelectorAll('tfoot') : _this.bodyTable.querySelectorAll('tfoot');
      var bodyRows = _this.bodyTable.querySelectorAll(".".concat(prefixCls, "-row")) || [];
      var fixedColumnsHeadRowsHeight = [].map.call(headRows, function (row) {
        return row.getBoundingClientRect().height || 'auto';
      });
      var fixedColumnsFootRowsHeight = [].map.call(footRows, function (row) {
        return row.getBoundingClientRect().height || 'auto';
      });
      var fixedColumnsBodyRowsHeight = [].map.call(bodyRows, function (row) {
        return row.getBoundingClientRect().height || 'auto';
      });

      var state = _this.store.getState();

      if ((0, _isEqual["default"])(state.fixedColumnsHeadRowsHeight, fixedColumnsHeadRowsHeight) && (0, _isEqual["default"])(state.fixedColumnsFootRowsHeight, fixedColumnsFootRowsHeight) && (0, _isEqual["default"])(state.fixedColumnsBodyRowsHeight, fixedColumnsBodyRowsHeight)) {
        return;
      }

      _this.store.setState({
        fixedColumnsHeadRowsHeight: fixedColumnsHeadRowsHeight,
        fixedColumnsFootRowsHeight: fixedColumnsFootRowsHeight,
        fixedColumnsBodyRowsHeight: fixedColumnsBodyRowsHeight
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleBodyScrollLeft", function (e) {
      if (e.currentTarget !== e.target) {
        return;
      }

      var target = e.target;
      var _this$props$scroll = _this.props.scroll,
          scroll = _this$props$scroll === void 0 ? {} : _this$props$scroll;

      var _assertThisInitialize = (0, _assertThisInitialized2["default"])(_this),
          headTable = _assertThisInitialize.headTable,
          bodyTable = _assertThisInitialize.bodyTable,
          footTable = _assertThisInitialize.footTable;

      if (target.scrollLeft !== _this.lastScrollLeft && scroll.x) {
        if (target === bodyTable) {
          if (headTable) headTable.scrollLeft = target.scrollLeft;
          if (footTable) footTable.scrollLeft = target.scrollLeft;
        } else if (target === headTable) {
          if (bodyTable) bodyTable.scrollLeft = target.scrollLeft;
          if (footTable) footTable.scrollLeft = target.scrollLeft;
        } else if (target === footTable) {
          if (bodyTable) bodyTable.scrollLeft = target.scrollLeft;
          if (headTable) headTable.scrollLeft = target.scrollLeft;
        }

        _this.setScrollPositionClassName();
      } // Remember last scrollLeft for scroll direction detecting.


      _this.lastScrollLeft = target.scrollLeft;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleBodyScrollTop", function (e) {
      var target = e.target;
      var _this$props$scroll2 = _this.props.scroll,
          scroll = _this$props$scroll2 === void 0 ? {} : _this$props$scroll2;

      var _assertThisInitialize2 = (0, _assertThisInitialized2["default"])(_this),
          headTable = _assertThisInitialize2.headTable,
          bodyTable = _assertThisInitialize2.bodyTable,
          fixedColumnsBodyLeft = _assertThisInitialize2.fixedColumnsBodyLeft,
          fixedColumnsBodyRight = _assertThisInitialize2.fixedColumnsBodyRight;

      if (target.scrollTop !== _this.lastScrollTop && scroll.y && target !== headTable) {
        var scrollTop = target.scrollTop;

        if (fixedColumnsBodyLeft && target !== fixedColumnsBodyLeft) {
          fixedColumnsBodyLeft.scrollTop = scrollTop;
        }

        if (fixedColumnsBodyRight && target !== fixedColumnsBodyRight) {
          fixedColumnsBodyRight.scrollTop = scrollTop;
        }

        if (bodyTable && target !== bodyTable) {
          bodyTable.scrollTop = scrollTop;
        }
      } // Remember last scrollTop for scroll direction detecting.


      _this.lastScrollTop = target.scrollTop;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleBodyScroll", function (e) {
      _this.handleBodyScrollLeft(e);

      _this.handleBodyScrollTop(e);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "saveRef", function (name) {
      return function (node) {
        _this[name] = node;
      };
    });
    ['onRowClick', 'onRowDoubleClick', 'onRowContextMenu', 'onRowMouseEnter', 'onRowMouseLeave'].forEach(function (name) {
      (0, _warning["default"])(props[name] === undefined, "".concat(name, " is deprecated, please use onRow instead."));
    });
    (0, _warning["default"])(props.getBodyWrapper === undefined, 'getBodyWrapper is deprecated, please use custom components instead.');
    _this.columnManager = new _ColumnManager["default"](props.columns, props.children);
    _this.store = (0, _miniStore.create)({
      currentHoverKey: null,
      fixedColumnsHeadRowsHeight: [],
      fixedColumnsFootRowsHeight: [],
      fixedColumnsBodyRowsHeight: []
    });

    _this.setScrollPosition('left');

    _this.debouncedWindowResize = (0, _debounce["default"])(_this.handleWindowResize, 150);
    return _this;
  }

  (0, _createClass2["default"])(Table, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        table: {
          props: this.props,
          columnManager: this.columnManager,
          saveRef: this.saveRef,
          components: (0, _merge["default"])({
            table: 'table',
            header: {
              wrapper: 'thead',
              row: 'tr',
              cell: 'th'
            },
            body: {
              wrapper: 'tbody',
              row: 'tr',
              cell: 'td'
            },
            footer: {
              wrapper: 'tfoot',
              row: 'tr',
              cell: 'td'
            }
          }, this.props.components)
        }
      };
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this.columnManager.isAnyColumnsFixed()) {
        this.handleWindowResize();
        this.resizeEvent = (0, _addEventListener["default"])(window, 'resize', this.debouncedWindowResize);
      }
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (nextProps.columns && nextProps.columns !== this.props.columns) {
        this.columnManager.reset(nextProps.columns);
      } else if (nextProps.children !== this.props.children) {
        this.columnManager.reset(null, nextProps.children);
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.columnManager.isAnyColumnsFixed()) {
        this.handleWindowResize();

        if (!this.resizeEvent) {
          this.resizeEvent = (0, _addEventListener["default"])(window, 'resize', this.debouncedWindowResize);
        }
      } // when table changes to empty, reset scrollLeft


      if (prevProps.data.length > 0 && this.props.data.length === 0 && this.hasScrollX()) {
        this.resetScrollX();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.resizeEvent) {
        this.resizeEvent.remove();
      }

      if (this.debouncedWindowResize) {
        this.debouncedWindowResize.cancel();
      }
    }
  }, {
    key: "setScrollPosition",
    value: function setScrollPosition(position) {
      this.scrollPosition = position;

      if (this.tableNode) {
        var prefixCls = this.props.prefixCls;

        if (position === 'both') {
          (0, _componentClasses["default"])(this.tableNode).remove(new RegExp("^".concat(prefixCls, "-scroll-position-.+$"))).add("".concat(prefixCls, "-scroll-position-left")).add("".concat(prefixCls, "-scroll-position-right"));
        } else {
          (0, _componentClasses["default"])(this.tableNode).remove(new RegExp("^".concat(prefixCls, "-scroll-position-.+$"))).add("".concat(prefixCls, "-scroll-position-").concat(position));
        }
      }
    }
  }, {
    key: "setScrollPositionClassName",
    value: function setScrollPositionClassName() {
      var node = this.bodyTable;
      var scrollToLeft = node.scrollLeft === 0;
      var scrollToRight = node.scrollLeft + 1 >= node.children[0].getBoundingClientRect().width - node.getBoundingClientRect().width;

      if (scrollToLeft && scrollToRight) {
        this.setScrollPosition('both');
      } else if (scrollToLeft) {
        this.setScrollPosition('left');
      } else if (scrollToRight) {
        this.setScrollPosition('right');
      } else if (this.scrollPosition !== 'middle') {
        this.setScrollPosition('middle');
      }
    }
  }, {
    key: "resetScrollX",
    value: function resetScrollX() {
      if (this.headTable) {
        this.headTable.scrollLeft = 0;
      }

      if (this.bodyTable) {
        this.bodyTable.scrollLeft = 0;
      }

      if (this.footTable) {
        this.footTable.scrollLeft = 0;
      }
    }
  }, {
    key: "hasScrollX",
    value: function hasScrollX() {
      var _this$props$scroll3 = this.props.scroll,
          scroll = _this$props$scroll3 === void 0 ? {} : _this$props$scroll3;
      return 'x' in scroll;
    }
  }, {
    key: "renderMainTable",
    value: function renderMainTable() {
      var _this$props = this.props,
          scroll = _this$props.scroll,
          prefixCls = _this$props.prefixCls;
      var isAnyColumnsFixed = this.columnManager.isAnyColumnsFixed();
      var scrollable = isAnyColumnsFixed || scroll.x || scroll.y;
      var table = [this.renderTable({
        columns: this.columnManager.groupedColumns(),
        isAnyColumnsFixed: isAnyColumnsFixed
      }), this.renderEmptyText(), this.renderFooter()];
      return scrollable ? _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-scroll")
      }, table) : table;
    }
  }, {
    key: "renderLeftFixedTable",
    value: function renderLeftFixedTable() {
      var prefixCls = this.props.prefixCls;
      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-fixed-left")
      }, this.renderTable({
        columns: this.columnManager.leftColumns(),
        fixed: 'left'
      }));
    }
  }, {
    key: "renderRightFixedTable",
    value: function renderRightFixedTable() {
      var prefixCls = this.props.prefixCls;
      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-fixed-right")
      }, this.renderTable({
        columns: this.columnManager.rightColumns(),
        fixed: 'right'
      }));
    }
  }, {
    key: "renderTable",
    value: function renderTable(options) {
      var columns = options.columns,
          fixed = options.fixed,
          isAnyColumnsFixed = options.isAnyColumnsFixed;
      var _this$props2 = this.props,
          prefixCls = _this$props2.prefixCls,
          _this$props2$scroll = _this$props2.scroll,
          scroll = _this$props2$scroll === void 0 ? {} : _this$props2$scroll;
      var tableClassName = scroll.x || fixed ? "".concat(prefixCls, "-fixed") : '';

      var headTable = _react["default"].createElement(_HeadTable["default"], {
        key: "head",
        columns: columns,
        fixed: fixed,
        tableClassName: tableClassName,
        handleBodyScrollLeft: this.handleBodyScrollLeft,
        expander: this.expander
      });

      var bodyTable = _react["default"].createElement(_BodyTable["default"], {
        key: "body",
        columns: columns,
        fixed: fixed,
        tableClassName: tableClassName,
        getRowKey: this.getRowKey,
        handleBodyScroll: this.handleBodyScroll,
        expander: this.expander,
        isAnyColumnsFixed: isAnyColumnsFixed
      });

      var footTable = _react["default"].createElement(_FootTable["default"], {
        key: "foot",
        columns: columns,
        fixed: fixed,
        tableClassName: tableClassName,
        handleBodyScrollLeft: this.handleBodyScrollLeft,
        expander: this.expander
      });

      return [headTable, bodyTable, footTable];
    }
  }, {
    key: "renderTitle",
    value: function renderTitle() {
      var _this$props3 = this.props,
          title = _this$props3.title,
          prefixCls = _this$props3.prefixCls;
      return title ? _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-title"),
        key: "title"
      }, title(this.props.data)) : null;
    }
  }, {
    key: "renderFooter",
    value: function renderFooter() {
      var _this$props4 = this.props,
          footer = _this$props4.footer,
          prefixCls = _this$props4.prefixCls;
      return footer ? _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-footer"),
        key: "footer"
      }, footer(this.props.data)) : null;
    }
  }, {
    key: "renderEmptyText",
    value: function renderEmptyText() {
      var _this$props5 = this.props,
          emptyText = _this$props5.emptyText,
          prefixCls = _this$props5.prefixCls,
          data = _this$props5.data;

      if (data.length) {
        return null;
      }

      var emptyClassName = "".concat(prefixCls, "-placeholder");
      return _react["default"].createElement("div", {
        className: emptyClassName,
        key: "emptyText"
      }, typeof emptyText === 'function' ? emptyText() : emptyText);
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var props = this.props;
      var prefixCls = props.prefixCls;
      var className = props.prefixCls;

      if (props.className) {
        className += " ".concat(props.className);
      }

      if (props.useFixedHeader || props.scroll && props.scroll.y) {
        className += " ".concat(prefixCls, "-fixed-header");
      }

      if (this.scrollPosition === 'both') {
        className += " ".concat(prefixCls, "-scroll-position-left ").concat(prefixCls, "-scroll-position-right");
      } else {
        className += " ".concat(prefixCls, "-scroll-position-").concat(this.scrollPosition);
      }

      var hasLeftFixed = this.columnManager.isAnyColumnsLeftFixed();
      var hasRightFixed = this.columnManager.isAnyColumnsRightFixed();
      return _react["default"].createElement(_miniStore.Provider, {
        store: this.store
      }, _react["default"].createElement(_ExpandableTable["default"], (0, _extends2["default"])({}, props, {
        columnManager: this.columnManager,
        getRowKey: this.getRowKey
      }), function (expander) {
        _this2.expander = expander;
        return _react["default"].createElement("div", {
          ref: _this2.saveRef('tableNode'),
          className: className,
          style: props.style,
          id: props.id
        }, _this2.renderTitle(), _react["default"].createElement("div", {
          className: "".concat(prefixCls, "-content")
        }, _this2.renderMainTable(), hasLeftFixed && _this2.renderLeftFixedTable(), hasRightFixed && _this2.renderRightFixedTable()));
      }));
    }
  }]);
  return Table;
}(_react.Component);

exports["default"] = Table;
(0, _defineProperty2["default"])(Table, "propTypes", (0, _objectSpread2["default"])({
  data: _propTypes["default"].array,
  useFixedHeader: _propTypes["default"].bool,
  columns: _propTypes["default"].array,
  prefixCls: _propTypes["default"].string,
  bodyStyle: _propTypes["default"].object,
  style: _propTypes["default"].object,
  rowKey: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]),
  rowClassName: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]),
  onRow: _propTypes["default"].func,
  onHeaderRow: _propTypes["default"].func,
  onRowClick: _propTypes["default"].func,
  onRowDoubleClick: _propTypes["default"].func,
  onRowContextMenu: _propTypes["default"].func,
  onRowMouseEnter: _propTypes["default"].func,
  onRowMouseLeave: _propTypes["default"].func,
  showHeader: _propTypes["default"].bool,
  title: _propTypes["default"].func,
  id: _propTypes["default"].string,
  footer: _propTypes["default"].func,
  emptyText: _propTypes["default"].oneOfType([_propTypes["default"].node, _propTypes["default"].func]),
  scroll: _propTypes["default"].object,
  rowRef: _propTypes["default"].func,
  getBodyWrapper: _propTypes["default"].func,
  children: _propTypes["default"].node,
  components: _propTypes["default"].shape({
    table: _propTypes["default"].any,
    header: _propTypes["default"].shape({
      wrapper: _propTypes["default"].any,
      row: _propTypes["default"].any,
      cell: _propTypes["default"].any
    }),
    body: _propTypes["default"].shape({
      wrapper: _propTypes["default"].any,
      row: _propTypes["default"].any,
      cell: _propTypes["default"].any
    }),
    footer: _propTypes["default"].shape({
      wrapper: _propTypes["default"].any,
      row: _propTypes["default"].any,
      cell: _propTypes["default"].any
    })
  })
}, _ExpandableTable["default"].PropTypes));
(0, _defineProperty2["default"])(Table, "childContextTypes", {
  table: _propTypes["default"].any,
  components: _propTypes["default"].any
});
(0, _defineProperty2["default"])(Table, "defaultProps", {
  data: [],
  useFixedHeader: false,
  rowKey: 'key',
  rowClassName: function rowClassName() {
    return '';
  },
  onRow: function onRow() {},
  onHeaderRow: function onHeaderRow() {},
  prefixCls: 'rc-table',
  bodyStyle: {},
  style: {},
  showHeader: true,
  scroll: {},
  rowRef: function rowRef() {
    return null;
  },
  emptyText: function emptyText() {
    return 'No Data';
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYmxlLmpzeCJdLCJuYW1lcyI6WyJUYWJsZSIsInByb3BzIiwicmVjb3JkIiwiaW5kZXgiLCJyb3dLZXkiLCJrZXkiLCJ1bmRlZmluZWQiLCJzeW5jRml4ZWRUYWJsZVJvd0hlaWdodCIsInNldFNjcm9sbFBvc2l0aW9uQ2xhc3NOYW1lIiwidGFibGVSZWN0IiwidGFibGVOb2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0IiwicHJlZml4Q2xzIiwiaGVhZFJvd3MiLCJoZWFkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYm9keVRhYmxlIiwiZm9vdFJvd3MiLCJmb290VGFibGUiLCJib2R5Um93cyIsImZpeGVkQ29sdW1uc0hlYWRSb3dzSGVpZ2h0IiwibWFwIiwiY2FsbCIsInJvdyIsImZpeGVkQ29sdW1uc0Zvb3RSb3dzSGVpZ2h0IiwiZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQiLCJzdGF0ZSIsInN0b3JlIiwiZ2V0U3RhdGUiLCJzZXRTdGF0ZSIsImUiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0Iiwic2Nyb2xsIiwic2Nyb2xsTGVmdCIsImxhc3RTY3JvbGxMZWZ0IiwieCIsImZpeGVkQ29sdW1uc0JvZHlMZWZ0IiwiZml4ZWRDb2x1bW5zQm9keVJpZ2h0Iiwic2Nyb2xsVG9wIiwibGFzdFNjcm9sbFRvcCIsInkiLCJoYW5kbGVCb2R5U2Nyb2xsTGVmdCIsImhhbmRsZUJvZHlTY3JvbGxUb3AiLCJuYW1lIiwibm9kZSIsImZvckVhY2giLCJnZXRCb2R5V3JhcHBlciIsImNvbHVtbk1hbmFnZXIiLCJDb2x1bW5NYW5hZ2VyIiwiY29sdW1ucyIsImNoaWxkcmVuIiwiY3VycmVudEhvdmVyS2V5Iiwic2V0U2Nyb2xsUG9zaXRpb24iLCJkZWJvdW5jZWRXaW5kb3dSZXNpemUiLCJoYW5kbGVXaW5kb3dSZXNpemUiLCJ0YWJsZSIsInNhdmVSZWYiLCJjb21wb25lbnRzIiwiaGVhZGVyIiwid3JhcHBlciIsImNlbGwiLCJib2R5IiwiZm9vdGVyIiwiaXNBbnlDb2x1bW5zRml4ZWQiLCJyZXNpemVFdmVudCIsIndpbmRvdyIsIm5leHRQcm9wcyIsInJlc2V0IiwicHJldlByb3BzIiwiZGF0YSIsImxlbmd0aCIsImhhc1Njcm9sbFgiLCJyZXNldFNjcm9sbFgiLCJyZW1vdmUiLCJjYW5jZWwiLCJwb3NpdGlvbiIsInNjcm9sbFBvc2l0aW9uIiwiUmVnRXhwIiwiYWRkIiwic2Nyb2xsVG9MZWZ0Iiwic2Nyb2xsVG9SaWdodCIsIndpZHRoIiwic2Nyb2xsYWJsZSIsInJlbmRlclRhYmxlIiwiZ3JvdXBlZENvbHVtbnMiLCJyZW5kZXJFbXB0eVRleHQiLCJyZW5kZXJGb290ZXIiLCJsZWZ0Q29sdW1ucyIsImZpeGVkIiwicmlnaHRDb2x1bW5zIiwib3B0aW9ucyIsInRhYmxlQ2xhc3NOYW1lIiwiZXhwYW5kZXIiLCJnZXRSb3dLZXkiLCJoYW5kbGVCb2R5U2Nyb2xsIiwidGl0bGUiLCJlbXB0eVRleHQiLCJlbXB0eUNsYXNzTmFtZSIsImNsYXNzTmFtZSIsInVzZUZpeGVkSGVhZGVyIiwiaGFzTGVmdEZpeGVkIiwiaXNBbnlDb2x1bW5zTGVmdEZpeGVkIiwiaGFzUmlnaHRGaXhlZCIsImlzQW55Q29sdW1uc1JpZ2h0Rml4ZWQiLCJzdHlsZSIsImlkIiwicmVuZGVyVGl0bGUiLCJyZW5kZXJNYWluVGFibGUiLCJyZW5kZXJMZWZ0Rml4ZWRUYWJsZSIsInJlbmRlclJpZ2h0Rml4ZWRUYWJsZSIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsImFycmF5IiwiYm9vbCIsInN0cmluZyIsImJvZHlTdHlsZSIsIm9iamVjdCIsIm9uZU9mVHlwZSIsImZ1bmMiLCJyb3dDbGFzc05hbWUiLCJvblJvdyIsIm9uSGVhZGVyUm93Iiwib25Sb3dDbGljayIsIm9uUm93RG91YmxlQ2xpY2siLCJvblJvd0NvbnRleHRNZW51Iiwib25Sb3dNb3VzZUVudGVyIiwib25Sb3dNb3VzZUxlYXZlIiwic2hvd0hlYWRlciIsInJvd1JlZiIsInNoYXBlIiwiYW55IiwiRXhw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QUEsTUFBTSxFQUFFO0FBQUEsV0FBTSxJQUFOO0FBQUEsR0FkWTtBQWVwQmhDLEVBQUFBLFNBQVMsRUFBRTtBQUFBLFdBQU0sU0FBTjtBQUFBO0FBZlMsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC9kZWJvdW5jZSc7XG5pbXBvcnQgaXNFcXVhbCBmcm9tICdsb2Rhc2gvaXNFcXVhbCc7XG5pbXBvcnQgbWVyZ2UgZnJvbSAnbG9kYXNoL21lcmdlJztcbmltcG9ydCB7IGNyZWF0ZSwgUHJvdmlkZXIgfSBmcm9tICdtaW5pLXN0b3JlJztcbmltcG9ydCBjbGFzc2VzIGZyb20gJ2NvbXBvbmVudC1jbGFzc2VzJztcbmltcG9ydCB3YXJuaW5nIGZyb20gJy4uLy4uL191dGlsL3dhcm5pbmcnO1xuaW1wb3J0IGFkZEV2ZW50TGlzdGVuZXIgZnJvbSAnLi4vLi4vX3V0aWwvYWRkRXZlbnRMaXN0ZW5lcic7XG5pbXBvcnQgQ29sdW1uTWFuYWdlciBmcm9tICcuL0NvbHVtbk1hbmFnZXInO1xuaW1wb3J0IEhlYWRUYWJsZSBmcm9tICcuL0hlYWRUYWJsZSc7XG5pbXBvcnQgQm9keVRhYmxlIGZyb20gJy4vQm9keVRhYmxlJztcbmltcG9ydCBGb290VGFibGUgZnJvbSAnLi9Gb290VGFibGUnO1xuaW1wb3J0IEV4cGFuZGFibGVUYWJsZSBmcm9tICcuL0V4cGFuZGFibGVUYWJsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhYmxlIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBkYXRhOiBQcm9wVHlwZXMuYXJyYXksXG4gICAgdXNlRml4ZWRIZWFkZXI6IFByb3BUeXBlcy5ib29sLFxuICAgIGNvbHVtbnM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBwcmVmaXhDbHM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgYm9keVN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHJvd0tleTogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLnN0cmluZywgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICByb3dDbGFzc05hbWU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgb25Sb3c6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uSGVhZGVyUm93OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblJvd0NsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblJvd0RvdWJsZUNsaWNrOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblJvd0NvbnRleHRNZW51OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblJvd01vdXNlRW50ZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIG9uUm93TW91c2VMZWF2ZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgc2hvd0hlYWRlcjogUHJvcFR5cGVzLmJvb2wsXG4gICAgdGl0bGU6IFByb3BUeXBlcy5mdW5jLFxuICAgIGlkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGZvb3RlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZW1wdHlUZXh0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMubm9kZSwgUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICBzY3JvbGw6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgcm93UmVmOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBnZXRCb2R5V3JhcHBlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxuICAgIGNvbXBvbmVudHM6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICB0YWJsZTogUHJvcFR5cGVzLmFueSxcbiAgICAgIGhlYWRlcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgd3JhcHBlcjogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgcm93OiBQcm9wVHlwZXMuYW55LFxuICAgICAgICBjZWxsOiBQcm9wVHlwZXMuYW55LFxuICAgICAgfSksXG4gICAgICBib2R5OiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgICB3cmFwcGVyOiBQcm9wVHlwZXMuYW55LFxuICAgICAgICByb3c6IFByb3BUeXBlcy5hbnksXG4gICAgICAgIGNlbGw6IFByb3BUeXBlcy5hbnksXG4gICAgICB9KSxcbiAgICAgIGZvb3RlcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgd3JhcHBlcjogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgcm93OiBQcm9wVHlwZXMuYW55LFxuICAgICAgICBjZWxsOiBQcm9wVHlwZXMuYW55LFxuICAgICAgfSksXG4gICAgfSksXG4gICAgLi4uRXhwYW5kYWJsZVRhYmxlLlByb3BUeXBlcyxcbiAgfTtcblxuICBzdGF0aWMgY2hpbGRDb250ZXh0VHlwZXMgPSB7XG4gICAgdGFibGU6IFByb3BUeXBlcy5hbnksXG4gICAgY29tcG9uZW50czogUHJvcFR5cGVzLmFueSxcbiAgfTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGRhdGE6IFtdLFxuICAgIHVzZUZpeGVkSGVhZGVyOiBmYWxzZSxcbiAgICByb3dLZXk6ICdrZXknLFxuICAgIHJvd0NsYXNzTmFtZTogKCkgPT4gJycsXG4gICAgb25Sb3coKSB7XG4gICAgfSxcbiAgICBvbkhlYWRlclJvdygpIHtcbiAgICB9LFxuICAgIHByZWZpeENsczogJ3JjLXRhYmxlJyxcbiAgICBib2R5U3R5bGU6IHt9LFxuICAgIHN0eWxlOiB7fSxcbiAgICBzaG93SGVhZGVyOiB0cnVlLFxuICAgIHNjcm9sbDoge30sXG4gICAgcm93UmVmOiAoKSA9PiBudWxsLFxuICAgIGVtcHR5VGV4dDogKCkgPT4gJ05vIERhdGEnLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgW1xuICAgICAgJ29uUm93Q2xpY2snLFxuICAgICAgJ29uUm93RG91YmxlQ2xpY2snLFxuICAgICAgJ29uUm93Q29udGV4dE1lbnUnLFxuICAgICAgJ29uUm93TW91c2VFbnRlcicsXG4gICAgICAnb25Sb3dNb3VzZUxlYXZlJyxcbiAgICBdLmZvckVhY2gobmFtZSA9PiB7XG4gICAgICB3YXJuaW5nKFxuICAgICAgICBwcm9wc1tuYW1lXSA9PT0gdW5kZWZpbmVkLFxuICAgICAgICBgJHtuYW1lfSBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIG9uUm93IGluc3RlYWQuYCxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB3YXJuaW5nKFxuICAgICAgcHJvcHMuZ2V0Qm9keVdyYXBwZXIgPT09IHVuZGVmaW5lZCxcbiAgICAgICdnZXRCb2R5V3JhcHBlciBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIGN1c3RvbSBjb21wb25lbnRzIGluc3RlYWQuJyxcbiAgICApO1xuXG4gICAgdGhpcy5jb2x1bW5NYW5hZ2VyID0gbmV3IENvbHVtbk1hbmFnZXIocHJvcHMuY29sdW1ucywgcHJvcHMuY2hpbGRyZW4pO1xuXG4gICAgdGhpcy5zdG9yZSA9IGNyZWF0ZSh7XG4gICAgICBjdXJyZW50SG92ZXJLZXk6IG51bGwsXG4gICAgICBmaXhlZENvbHVtbnNIZWFkUm93c0hlaWdodDogW10sXG4gICAgICBmaXhlZENvbHVtbnNGb290Um93c0hlaWdodDogW10sXG4gICAgICBmaXhlZENvbHVtbnNCb2R5Um93c0hlaWdodDogW10sXG4gICAgfSk7XG5cbiAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKCdsZWZ0Jyk7XG5cbiAgICB0aGlzLmRlYm91bmNlZFdpbmRvd1Jlc2l6ZSA9IGRlYm91bmNlKHRoaXMuaGFuZGxlV2luZG93UmVzaXplLCAxNTApO1xuICB9XG5cbiAgZ2V0Q2hpbGRDb250ZXh0KCkge1xuICAgIHJldHVybiB7XG4gICAgICB0YWJsZToge1xuICAgICAgICBwcm9wczogdGhpcy5wcm9wcyxcbiAgICAgICAgY29sdW1uTWFuYWdlcjogdGhpcy5jb2x1bW5NYW5hZ2VyLFxuICAgICAgICBzYXZlUmVmOiB0aGlzLnNhdmVSZWYsXG4gICAgICAgIGNvbXBvbmVudHM6IG1lcmdlKHtcbiAgICAgICAgICB0YWJsZTogJ3RhYmxlJyxcbiAgICAgICAgICBoZWFkZXI6IHtcbiAgICAgICAgICAgIHdyYXBwZXI6ICd0aGVhZCcsXG4gICAgICAgICAgICByb3c6ICd0cicsXG4gICAgICAgICAgICBjZWxsOiAndGgnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keToge1xuICAgICAgICAgICAgd3JhcHBlcjogJ3Rib2R5JyxcbiAgICAgICAgICAgIHJvdzogJ3RyJyxcbiAgICAgICAgICAgIGNlbGw6ICd0ZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb290ZXI6IHtcbiAgICAgICAgICAgIHdyYXBwZXI6ICd0Zm9vdCcsXG4gICAgICAgICAgICByb3c6ICd0cicsXG4gICAgICAgICAgICBjZWxsOiAndGQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sIHRoaXMucHJvcHMuY29tcG9uZW50cyksXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAodGhpcy5jb2x1bW5NYW5hZ2VyLmlzQW55Q29sdW1uc0ZpeGVkKCkpIHtcbiAgICAgIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKCk7XG4gICAgICB0aGlzLnJlc2l6ZUV2ZW50ID0gYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgd2luZG93LCAncmVzaXplJywgdGhpcy5kZWJvdW5jZWRXaW5kb3dSZXNpemUsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG4gICAgaWYgKG5leHRQcm9wcy5jb2x1bW5zICYmIG5leHRQcm9wcy5jb2x1bW5zICE9PSB0aGlzLnByb3BzLmNvbHVtbnMpIHtcbiAgICAgIHRoaXMuY29sdW1uTWFuYWdlci5yZXNldChuZXh0UHJvcHMuY29sdW1ucyk7XG4gICAgfSBlbHNlIGlmIChuZXh0UHJvcHMuY2hpbGRyZW4gIT09IHRoaXMucHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuY29sdW1uTWFuYWdlci5yZXNldChudWxsLCBuZXh0UHJvcHMuY2hpbGRyZW4pO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5jb2x1bW5NYW5hZ2VyLmlzQW55Q29sdW1uc0ZpeGVkKCkpIHtcbiAgICAgIHRoaXMuaGFuZGxlV2luZG93UmVzaXplKCk7XG4gICAgICBpZiAoIXRoaXMucmVzaXplRXZlbnQpIHtcbiAgICAgICAgdGhpcy5yZXNpemVFdmVudCA9IGFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgd2luZG93LCAncmVzaXplJywgdGhpcy5kZWJvdW5jZWRXaW5kb3dSZXNpemUsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHdoZW4gdGFibGUgY2hhbmdlcyB0byBlbXB0eSwgcmVzZXQgc2Nyb2xsTGVmdFxuICAgIGlmIChwcmV2UHJvcHMuZGF0YS5sZW5ndGggPiAwICYmIHRoaXMucHJvcHMuZGF0YS5sZW5ndGggPT09IDAgJiYgdGhpcy5oYXNTY3JvbGxYKCkpIHtcbiAgICAgIHRoaXMucmVzZXRTY3JvbGxYKCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMucmVzaXplRXZlbnQpIHtcbiAgICAgIHRoaXMucmVzaXplRXZlbnQucmVtb3ZlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmRlYm91bmNlZFdpbmRvd1Jlc2l6ZSkge1xuICAgICAgdGhpcy5kZWJvdW5jZWRXaW5kb3dSZXNpemUuY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Um93S2V5ID0gKHJlY29yZCwgaW5kZXgpID0+IHtcbiAgICBjb25zdCByb3dLZXkgPSB0aGlzLnByb3BzLnJvd0tleTtcbiAgICBjb25zdCBrZXkgPSAodHlwZW9mIHJvd0tleSA9PT0gJ2Z1bmN0aW9uJykgPyByb3dLZXkocmVjb3JkLCBpbmRleCkgOiByZWNvcmRbcm93S2V5XTtcbiAgICB3YXJuaW5nKFxuICAgICAga2V5ICE9PSB1bmRlZmluZWQsXG4gICAgICAnRWFjaCByZWNvcmQgaW4gdGFibGUgc2hvdWxkIGhhdmUgYSB1bmlxdWUgYGtleWAgcHJvcCwnICtcbiAgICAgICdvciBzZXQgYHJvd0tleWAgdG8gYW4gdW5pcXVlIHByaW1hcnkga2V5LicsXG4gICAgKTtcbiAgICByZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgPyBpbmRleCA6IGtleTtcbiAgfTtcblxuICBzZXRTY3JvbGxQb3NpdGlvbihwb3NpdGlvbikge1xuICAgIHRoaXMuc2Nyb2xsUG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICBpZiAodGhpcy50YWJsZU5vZGUpIHtcbiAgICAgIGNvbnN0IHsgcHJlZml4Q2xzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgaWYgKHBvc2l0aW9uID09PSAnYm90aCcpIHtcbiAgICAgICAgY2xhc3Nlcyh0aGlzLnRhYmxlTm9kZSlcbiAgICAgICAgICAucmVtb3ZlKG5ldyBSZWdFeHAoYF4ke3ByZWZpeENsc30tc2Nyb2xsLXBvc2l0aW9uLS4rJGApKVxuICAgICAgICAgIC5hZGQoYCR7cHJlZml4Q2xzfS1zY3JvbGwtcG9zaXRpb24tbGVmdGApXG4gICAgICAgICAgLmFkZChgJHtwcmVmaXhDbHN9LXNjcm9sbC1wb3NpdGlvbi1yaWdodGApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xhc3Nlcyh0aGlzLnRhYmxlTm9kZSlcbiAgICAgICAgICAucmVtb3ZlKG5ldyBSZWdFeHAoYF4ke3ByZWZpeENsc30tc2Nyb2xsLXBvc2l0aW9uLS4rJGApKVxuICAgICAgICAgIC5hZGQoYCR7cHJlZml4Q2xzfS1zY3JvbGwtcG9zaXRpb24tJHtwb3NpdGlvbn1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzZXRTY3JvbGxQb3NpdGlvbkNsYXNzTmFtZSgpIHtcbiAgICBjb25zdCBub2RlID0gdGhpcy5ib2R5VGFibGU7XG4gICAgY29uc3Qgc2Nyb2xsVG9MZWZ0ID0gbm9kZS5zY3JvbGxMZWZ0ID09PSAwO1xuICAgIGNvbnN0IHNjcm9sbFRvUmlnaHQgPSBub2RlLnNjcm9sbExlZnQgKyAxID49XG4gICAgICBub2RlLmNoaWxkcmVuWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC1cbiAgICAgIG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgaWYgKHNjcm9sbFRvTGVmdCAmJiBzY3JvbGxUb1JpZ2h0KSB7XG4gICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKCdib3RoJyk7XG4gICAgfSBlbHNlIGlmIChzY3JvbGxUb0xlZnQpIHtcbiAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb24oJ2xlZnQnKTtcbiAgICB9IGVsc2UgaWYgKHNjcm9sbFRvUmlnaHQpIHtcbiAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb24oJ3JpZ2h0Jyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbFBvc2l0aW9uICE9PSAnbWlkZGxlJykge1xuICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbignbWlkZGxlJyk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlV2luZG93UmVzaXplID0gKCkgPT4ge1xuICAgIHRoaXMuc3luY0ZpeGVkVGFibGVSb3dIZWlnaHQoKTtcbiAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uQ2xhc3NOYW1lKCk7XG4gIH07XG5cbiAgc3luY0ZpeGVkVGFibGVSb3dIZWlnaHQgPSAoKSA9PiB7XG4gICAgY29uc3QgdGFibGVSZWN0ID0gdGhpcy50YWJsZU5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gSWYgdGFibGVOb2RlJ3MgaGVpZ2h0IGxlc3MgdGhhbiAwLCBzdXBwb3NlIGl0IGlzIGhpZGRlbiBhbmQgZG9uJ3QgcmVjYWxjdWxhdGUgcm93SGVpZ2h0LlxuICAgIGlmICh0YWJsZVJlY3QuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgdGFibGVSZWN0LmhlaWdodCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgcHJlZml4Q2xzIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGhlYWRSb3dzID0gdGhpcy5oZWFkVGFibGUgPyB0aGlzLmhlYWRUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0aGVhZCcpIDogdGhpcy5ib2R5VGFibGUucXVlcnlTZWxlY3RvckFsbCgndGhlYWQnKTtcbiAgICBjb25zdCBmb290Um93cyA9IHRoaXMuZm9vdFRhYmxlID8gdGhpcy5mb290VGFibGUucXVlcnlTZWxlY3RvckFsbCgndGZvb3QnKSA6IHRoaXMuYm9keVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rmb290Jyk7XG4gICAgY29uc3QgYm9keVJvd3MgPSB0aGlzLmJvZHlUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKGAuJHtwcmVmaXhDbHN9LXJvd2ApIHx8IFtdO1xuICAgIGNvbnN0IGZpeGVkQ29sdW1uc0hlYWRSb3dzSGVpZ2h0ID0gW10ubWFwLmNhbGwoXG4gICAgICBoZWFkUm93cywgcm93ID0+IHJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgfHwgJ2F1dG8nLFxuICAgICk7XG4gICAgY29uc3QgZml4ZWRDb2x1bW5zRm9vdFJvd3NIZWlnaHQgPSBbXS5tYXAuY2FsbChcbiAgICAgIGZvb3RSb3dzLCByb3cgPT4gcm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCB8fCAnYXV0bycsXG4gICAgKTtcbiAgICBjb25zdCBmaXhlZENvbHVtbnNCb2R5Um93c0hlaWdodCA9IFtdLm1hcC5jYWxsKFxuICAgICAgYm9keVJvd3MsIHJvdyA9PiByb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IHx8ICdhdXRvJyxcbiAgICApO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGlmIChpc0VxdWFsKHN0YXRlLmZpeGVkQ29sdW1uc0hlYWRSb3dzSGVpZ2h0LCBmaXhlZENvbHVtbnNIZWFkUm93c0hlaWdodCkgJiZcbiAgICAgIGlzRXF1YWwoc3RhdGUuZml4ZWRDb2x1bW5zRm9vdFJvd3NIZWlnaHQsIGZpeGVkQ29sdW1uc0Zvb3RSb3dzSGVpZ2h0KSAmJlxuICAgICAgaXNFcXVhbChzdGF0ZS5maXhlZENvbHVtbnNCb2R5Um93c0hlaWdodCwgZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5zdG9yZS5zZXRTdGF0ZSh7XG4gICAgICBmaXhlZENvbHVtbnNIZWFkUm93c0hlaWdodCxcbiAgICAgIGZpeGVkQ29sdW1uc0Zvb3RSb3dzSGVpZ2h0LFxuICAgICAgZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQsXG4gICAgfSk7XG4gIH07XG5cbiAgcmVzZXRTY3JvbGxYKCkge1xuICAgIGlmICh0aGlzLmhlYWRUYWJsZSkge1xuICAgICAgdGhpcy5oZWFkVGFibGUuc2Nyb2xsTGVmdCA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvZHlUYWJsZSkge1xuICAgICAgdGhpcy5ib2R5VGFibGUuc2Nyb2xsTGVmdCA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLmZvb3RUYWJsZSkge1xuICAgICAgdGhpcy5mb290VGFibGUuc2Nyb2xsTGVmdCA9IDA7XG4gICAgfVxuICB9XG5cbiAgaGFzU2Nyb2xsWCgpIHtcbiAgICBjb25zdCB7IHNjcm9sbCA9IHt9IH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiAneCcgaW4gc2Nyb2xsO1xuICB9XG5cbiAgaGFuZGxlQm9keVNjcm9sbExlZnQgPSAoZSkgPT4ge1xuICAgIGlmIChlLmN1cnJlbnRUYXJnZXQgIT09IGUudGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IHsgc2Nyb2xsID0ge30gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBoZWFkVGFibGUsIGJvZHlUYWJsZSwgZm9vdFRhYmxlIH0gPSB0aGlzO1xuICAgIGlmICh0YXJnZXQuc2Nyb2xsTGVmdCAhPT0gdGhpcy5sYXN0U2Nyb2xsTGVmdCAmJiBzY3JvbGwueCkge1xuICAgICAgaWYgKHRhcmdldCA9PT0gYm9keVRhYmxlKSB7XG4gICAgICAgIGlmIChoZWFkVGFibGUpIGhlYWRUYWJsZS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgIGlmIChmb290VGFibGUpIGZvb3RUYWJsZS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gaGVhZFRhYmxlKSB7XG4gICAgICAgIGlmIChib2R5VGFibGUpIGJvZHlUYWJsZS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgIGlmIChmb290VGFibGUpIGZvb3RUYWJsZS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICB9IGVsc2UgaWYgKHRhcmdldCA9PT0gZm9vdFRhYmxlKSB7XG4gICAgICAgIGlmIChib2R5VGFibGUpIGJvZHlUYWJsZS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICAgIGlmIChoZWFkVGFibGUpIGhlYWRUYWJsZS5zY3JvbGxMZWZ0ID0gdGFyZ2V0LnNjcm9sbExlZnQ7XG4gICAgICB9XG4gICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uQ2xhc3NOYW1lKCk7XG4gICAgfVxuICAgIC8vIFJlbWVtYmVyIGxhc3Qgc2Nyb2xsTGVmdCBmb3Igc2Nyb2xsIGRpcmVjdGlvbiBkZXRlY3RpbmcuXG4gICAgdGhpcy5sYXN0U2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICB9O1xuXG4gIGhhbmRsZUJvZHlTY3JvbGxUb3AgPSAoZSkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IHsgc2Nyb2xsID0ge30gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBoZWFkVGFibGUsIGJvZHlUYWJsZSwgZml4ZWRDb2x1bW5zQm9keUxlZnQsIGZpeGVkQ29sdW1uc0JvZHlSaWdodCB9ID0gdGhpcztcbiAgICBpZiAodGFyZ2V0LnNjcm9sbFRvcCAhPT0gdGhpcy5sYXN0U2Nyb2xsVG9wICYmIHNjcm9sbC55ICYmIHRhcmdldCAhPT0gaGVhZFRhYmxlKSB7XG4gICAgICBjb25zdCBzY3JvbGxUb3AgPSB0YXJnZXQuc2Nyb2xsVG9wO1xuICAgICAgaWYgKGZpeGVkQ29sdW1uc0JvZHlMZWZ0ICYmIHRhcmdldCAhPT0gZml4ZWRDb2x1bW5zQm9keUxlZnQpIHtcbiAgICAgICAgZml4ZWRDb2x1bW5zQm9keUxlZnQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgfVxuICAgICAgaWYgKGZpeGVkQ29sdW1uc0JvZHlSaWdodCAmJiB0YXJnZXQgIT09IGZpeGVkQ29sdW1uc0JvZHlSaWdodCkge1xuICAgICAgICBmaXhlZENvbHVtbnNCb2R5UmlnaHQuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgfVxuICAgICAgaWYgKGJvZHlUYWJsZSAmJiB0YXJnZXQgIT09IGJvZHlUYWJsZSkge1xuICAgICAgICBib2R5VGFibGUuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBSZW1lbWJlciBsYXN0IHNjcm9sbFRvcCBmb3Igc2Nyb2xsIGRpcmVjdGlvbiBkZXRlY3RpbmcuXG4gICAgdGhpcy5sYXN0U2Nyb2xsVG9wID0gdGFyZ2V0LnNjcm9sbFRvcDtcbiAgfTtcblxuICBoYW5kbGVCb2R5U2Nyb2xsID0gKGUpID0+IHtcbiAgICB0aGlzLmhhbmRsZUJvZHlTY3JvbGxMZWZ0KGUpO1xuICAgIHRoaXMuaGFuZGxlQm9keVNjcm9sbFRvcChlKTtcbiAgfTtcblxuICBzYXZlUmVmID0gKG5hbWUpID0+IChub2RlKSA9PiB7XG4gICAgdGhpc1tuYW1lXSA9IG5vZGU7XG4gIH07XG5cbiAgcmVuZGVyTWFpblRhYmxlKCkge1xuICAgIGNvbnN0IHsgc2Nyb2xsLCBwcmVmaXhDbHMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXNBbnlDb2x1bW5zRml4ZWQgPSB0aGlzLmNvbHVtbk1hbmFnZXIuaXNBbnlDb2x1bW5zRml4ZWQoKTtcbiAgICBjb25zdCBzY3JvbGxhYmxlID0gaXNBbnlDb2x1bW5zRml4ZWQgfHwgc2Nyb2xsLnggfHwgc2Nyb2xsLnk7XG5cbiAgICBjb25zdCB0YWJsZSA9IFtcbiAgICAgIHRoaXMucmVuZGVyVGFibGUoe1xuICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbk1hbmFnZXIuZ3JvdXBlZENvbHVtbnMoKSxcbiAgICAgICAgaXNBbnlDb2x1bW5zRml4ZWQsXG4gICAgICB9KSxcbiAgICAgIHRoaXMucmVuZGVyRW1wdHlUZXh0KCksXG4gICAgICB0aGlzLnJlbmRlckZvb3RlcigpLFxuICAgIF07XG5cbiAgICByZXR1cm4gc2Nyb2xsYWJsZSA/IChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNjcm9sbGB9Pnt0YWJsZX08L2Rpdj5cbiAgICApIDogdGFibGU7XG4gIH1cblxuICByZW5kZXJMZWZ0Rml4ZWRUYWJsZSgpIHtcbiAgICBjb25zdCB7IHByZWZpeENscyB9ID0gdGhpcy5wcm9wcztcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1maXhlZC1sZWZ0YH0+XG4gICAgICAgIHt0aGlzLnJlbmRlclRhYmxlKHtcbiAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbk1hbmFnZXIubGVmdENvbHVtbnMoKSxcbiAgICAgICAgICBmaXhlZDogJ2xlZnQnLFxuICAgICAgICB9KX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXJSaWdodEZpeGVkVGFibGUoKSB7XG4gICAgY29uc3QgeyBwcmVmaXhDbHMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tZml4ZWQtcmlnaHRgfT5cbiAgICAgICAge3RoaXMucmVuZGVyVGFibGUoe1xuICAgICAgICAgIGNvbHVtbnM6IHRoaXMuY29sdW1uTWFuYWdlci5yaWdodENvbHVtbnMoKSxcbiAgICAgICAgICBmaXhlZDogJ3JpZ2h0JyxcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyVGFibGUob3B0aW9ucykge1xuICAgIGNvbnN0IHsgY29sdW1ucywgZml4ZWQsIGlzQW55Q29sdW1uc0ZpeGVkIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzLCBzY3JvbGwgPSB7fSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB0YWJsZUNsYXNzTmFtZSA9IChzY3JvbGwueCB8fCBmaXhlZCkgPyBgJHtwcmVmaXhDbHN9LWZpeGVkYCA6ICcnO1xuXG4gICAgY29uc3QgaGVhZFRhYmxlID0gKFxuICAgICAgPEhlYWRUYWJsZVxuICAgICAgICBrZXk9XCJoZWFkXCJcbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgZml4ZWQ9e2ZpeGVkfVxuICAgICAgICB0YWJsZUNsYXNzTmFtZT17dGFibGVDbGFzc05hbWV9XG4gICAgICAgIGhhbmRsZUJvZHlTY3JvbGxMZWZ0PXt0aGlzLmhhbmRsZUJvZHlTY3JvbGxMZWZ0fVxuICAgICAgICBleHBhbmRlcj17dGhpcy5leHBhbmRlcn1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIGNvbnN0IGJvZHlUYWJsZSA9IChcbiAgICAgIDxCb2R5VGFibGVcbiAgICAgICAga2V5PVwiYm9keVwiXG4gICAgICAgIGNvbHVtbnM9e2NvbHVtbnN9XG4gICAgICAgIGZpeGVkPXtmaXhlZH1cbiAgICAgICAgdGFibGVDbGFzc05hbWU9e3RhYmxlQ2xhc3NOYW1lfVxuICAgICAgICBnZXRSb3dLZXk9e3RoaXMuZ2V0Um93S2V5fVxuICAgICAgICBoYW5kbGVCb2R5U2Nyb2xsPXt0aGlzLmhhbmRsZUJvZHlTY3JvbGx9XG4gICAgICAgIGV4cGFuZGVyPXt0aGlzLmV4cGFuZGVyfVxuICAgICAgICBpc0FueUNvbHVtbnNGaXhlZD17aXNBbnlDb2x1bW5zRml4ZWR9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBmb290VGFibGUgPSAoXG4gICAgICA8Rm9vdFRhYmxlXG4gICAgICAgIGtleT1cImZvb3RcIlxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBmaXhlZD17Zml4ZWR9XG4gICAgICAgIHRhYmxlQ2xhc3NOYW1lPXt0YWJsZUNsYXNzTmFtZX1cbiAgICAgICAgaGFuZGxlQm9keVNjcm9sbExlZnQ9e3RoaXMuaGFuZGxlQm9keVNjcm9sbExlZnR9XG4gICAgICAgIGV4cGFuZGVyPXt0aGlzLmV4cGFuZGVyfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgcmV0dXJuIFtoZWFkVGFibGUsIGJvZHlUYWJsZSwgZm9vdFRhYmxlXTtcbiAgfVxuXG4gIHJlbmRlclRpdGxlKCkge1xuICAgIGNvbnN0IHsgdGl0bGUsIHByZWZpeENscyB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gdGl0bGUgPyAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS10aXRsZWB9IGtleT1cInRpdGxlXCI+XG4gICAgICAgIHt0aXRsZSh0aGlzLnByb3BzLmRhdGEpfVxuICAgICAgPC9kaXY+XG4gICAgKSA6IG51bGw7XG4gIH1cblxuICByZW5kZXJGb290ZXIoKSB7XG4gICAgY29uc3QgeyBmb290ZXIsIHByZWZpeENscyB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gZm9vdGVyID8gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tZm9vdGVyYH0ga2V5PVwiZm9vdGVyXCI+XG4gICAgICAgIHtmb290ZXIodGhpcy5wcm9wcy5kYXRhKX1cbiAgICAgIDwvZGl2PlxuICAgICkgOiBudWxsO1xuICB9XG5cbiAgcmVuZGVyRW1wdHlUZXh0KCkge1xuICAgIGNvbnN0IHsgZW1wdHlUZXh0LCBwcmVmaXhDbHMsIGRhdGEgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZW1wdHlDbGFzc05hbWUgPSBgJHtwcmVmaXhDbHN9LXBsYWNlaG9sZGVyYDtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2VtcHR5Q2xhc3NOYW1lfSBrZXk9XCJlbXB0eVRleHRcIj5cbiAgICAgICAgeyh0eXBlb2YgZW1wdHlUZXh0ID09PSAnZnVuY3Rpb24nKSA/IGVtcHR5VGV4dCgpIDogZW1wdHlUZXh0fVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzO1xuXG4gICAgbGV0IGNsYXNzTmFtZSA9IHByb3BzLnByZWZpeENscztcbiAgICBpZiAocHJvcHMuY2xhc3NOYW1lKSB7XG4gICAgICBjbGFzc05hbWUgKz0gYCAke3Byb3BzLmNsYXNzTmFtZX1gO1xuICAgIH1cbiAgICBpZiAocHJvcHMudXNlRml4ZWRIZWFkZXIgfHwgKHByb3BzLnNjcm9sbCAmJiBwcm9wcy5zY3JvbGwueSkpIHtcbiAgICAgIGNsYXNzTmFtZSArPSBgICR7cHJlZml4Q2xzfS1maXhlZC1oZWFkZXJgO1xuICAgIH1cbiAgICBpZiAodGhpcy5zY3JvbGxQb3NpdGlvbiA9PT0gJ2JvdGgnKSB7XG4gICAgICBjbGFzc05hbWUgKz0gYCAke3ByZWZpeENsc30tc2Nyb2xsLXBvc2l0aW9uLWxlZnQgJHtwcmVmaXhDbHN9LXNjcm9sbC1wb3NpdGlvbi1yaWdodGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsYXNzTmFtZSArPSBgICR7cHJlZml4Q2xzfS1zY3JvbGwtcG9zaXRpb24tJHt0aGlzLnNjcm9sbFBvc2l0aW9ufWA7XG4gICAgfVxuICAgIGNvbnN0IGhhc0xlZnRGaXhlZCA9IHRoaXMuY29sdW1uTWFuYWdlci5pc0FueUNvbHVtbnNMZWZ0Rml4ZWQoKTtcbiAgICBjb25zdCBoYXNSaWdodEZpeGVkID0gdGhpcy5jb2x1bW5NYW5hZ2VyLmlzQW55Q29sdW1uc1JpZ2h0Rml4ZWQoKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8UHJvdmlkZXIgc3RvcmU9e3RoaXMuc3RvcmV9PlxuICAgICAgICA8RXhwYW5kYWJsZVRhYmxlXG4gICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgIGNvbHVtbk1hbmFnZXI9e3RoaXMuY29sdW1uTWFuYWdlcn1cbiAgICAgICAgICBnZXRSb3dLZXk9e3RoaXMuZ2V0Um93S2V5fVxuICAgICAgICA+XG4gICAgICAgICAgeyhleHBhbmRlcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5leHBhbmRlciA9IGV4cGFuZGVyO1xuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHJlZj17dGhpcy5zYXZlUmVmKCd0YWJsZU5vZGUnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICBzdHlsZT17cHJvcHMuc3R5bGV9XG4gICAgICAgICAgICAgICAgaWQ9e3Byb3BzLmlkfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyVGl0bGUoKX1cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1jb250ZW50YH0+XG4gICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJNYWluVGFibGUoKX1cbiAgICAgICAgICAgICAgICAgIHtoYXNMZWZ0Rml4ZWQgJiYgdGhpcy5yZW5kZXJMZWZ0Rml4ZWRUYWJsZSgpfVxuICAgICAgICAgICAgICAgICAge2hhc1JpZ2h0Rml4ZWQgJiYgdGhpcy5yZW5kZXJSaWdodEZpeGVkVGFibGUoKX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH19XG4gICAgICAgIDwvRXhwYW5kYWJsZVRhYmxlPlxuICAgICAgPC9Qcm92aWRlcj5cbiAgICApO1xuICB9XG59XG4iXX0=