c2d77b1aa7b16a763a2d946eab109566
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _jsdom = _interopRequireDefault(require("jsdom"));

var _enzyme = require("enzyme");

var _JSFormatter = _interopRequireDefault(require("choerodon-ui/pro/lib/code-area/formatters/JSFormatter"));

var _ = _interopRequireDefault(require(".."));

var _dataSet = _interopRequireDefault(require("../../data-set"));

var _JSONFormatter = _interopRequireDefault(require("../formatters/JSONFormatter"));

require("choerodon-ui/pro/lib/code-area/lint/json");

// eslint-disable-next-line import/no-named-as-default
if (typeof window !== 'undefined') {
  // eslint-disable-next-line global-require
  require('codemirror/mode/javascript/javascript');
}

describe('CodeArea-pro', function () {
  beforeEach(function () {
    jest.useFakeTimers();
    var JSDOM = _jsdom["default"].JSDOM;
    var doc = new JSDOM('<!doctype html><html><body></body></html>');
    global.document = doc;
    global.window = doc.defaultView;

    global.document.body.createTextRange = function () {
      return {
        setEnd: function setEnd() {},
        setStart: function setStart() {},
        getBoundingClientRect: function getBoundingClientRect() {
          return {
            right: 0
          };
        },
        getClientRects: function getClientRects() {
          return {
            length: 0,
            left: 0,
            right: 0
          };
        }
      };
    };
  });
  afterEach(function () {
    jest.useRealTimers();
  });
  it('the codeArea json formatter and lint test', function () {
    var options = {
      mode: {
        name: 'javascript',
        json: true
      }
    };
    var jsonText = "{\n      \"compilerOptions\": {\n        \"strictNullChecks\": true,\n        \"moduleResolution\": \"node\",\n        \"allowSyntheticDefaultImports\": true,\n        \"experimentalDecorators\": true,\n        \"jsx\": \"preserve\",\n        \"noUnusedParameters\": true,\n        \"noUnusedLocals\": true,\n        \"declaration\": true,\n        \"target\": \"es6\",\n        \"lib\": [\n          \"dom\",\n          \"dom.iterable\",\n          \"es7\",\n          \"es2017.object\"\n        ]\n      },\n      \"exclude\": [\n        \"node_modules\",\n        \"lib\",\n        \"es\"\n      ]\n    }\n    ";
    var jsonStyle = {
      height: 500
    };
    var ds = new _dataSet["default"]({
      autoCreate: true,
      fields: [{
        name: 'content',
        type: 'string',
        defaultValue: jsonText,
        required: true
      }]
    });
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      dataSet: ds,
      name: "content",
      style: jsonStyle,
      formatter: _JSONFormatter["default"],
      options: options,
      formatHotKey: "Home",
      unFormatHotKey: "End"
    }));
    wrapper.find('CodeArea').simulate('focus');
    wrapper.find('CodeArea').simulate('keydown', {
      key: 'Home'
    });
    wrapper.find('CodeArea').simulate('keydown', {
      key: 'End'
    });
    expect(wrapper).toMatchSnapshot();
  });
  it('the codeArea javascript formatter and lint test', function () {
    var options = {
      mode: 'javascript'
    };
    var jsText = "function getOptions() {\n      var options = {\n        \"compilerOptions\": {\n          \"strictNullChecks\": true,\n          \"moduleResolution\": \"node\",\n          \"allowSyntheticDefaultImports\": true,\n          \"experimentalDecorators\": true,\n          \"jsx\": \"preserve\",\n          \"noUnusedParameters\": true,\n          \"noUnusedLocals\": true,\n          \"declaration\": true,\n          \"target\": \"es6\",\n          \"lib\": [\n            \"dom\",\n            \"dom.iterable\",\n            \"es7\",\n            \"es2017.object\"\n          ]\n        },\n        \"exclude\": [\n          \"node_modules\",\n          \"lib\",\n          \"es\"\n        ]\n      };\n\n      return options;\n    }\n    ";
    var jsStyle = {
      height: 500
    };
    var ds = new _dataSet["default"]({
      autoCreate: true,
      fields: [{
        name: 'content',
        type: 'string',
        defaultValue: jsText,
        required: true
      }]
    });
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      dataSet: ds,
      name: "content",
      style: jsStyle,
      formatter: _JSFormatter["default"],
      options: options
    }));
    wrapper.find('CodeArea').simulate('focus');
    wrapper.find('CodeArea').simulate('keydown', {
      key: 'Home'
    });
    wrapper.find('CodeArea').simulate('keydown', {
      key: 'End'
    });
    expect(wrapper).toMatchSnapshot();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRlc3QuanMiXSwibmFtZXMiOlsid2luZG93IiwicmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImplc3QiLCJ1c2VGYWtlVGltZXJzIiwiSlNET00iLCJqc2RvbSIsImRvYyIsImdsb2JhbCIsImRvY3VtZW50IiwiZGVmYXVsdFZpZXciLCJib2R5IiwiY3JlYXRlVGV4dFJhbmdlIiwic2V0RW5kIiwic2V0U3RhcnQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJyaWdodCIsImdldENsaWVudFJlY3RzIiwibGVuZ3RoIiwibGVmdCIsImFmdGVyRWFjaCIsInVzZVJlYWxUaW1lcnMiLCJpdCIsIm9wdGlvbnMiLCJtb2RlIiwibmFtZSIsImpzb24iLCJqc29uVGV4dCIsImpzb25TdHlsZSIsImhlaWdodCIsImRzIiwiRGF0YVNldCIsImF1dG9DcmVhdGUiLCJmaWVsZHMiLCJ0eXBlIiwiZGVmYXVsdFZhbHVlIiwicmVxdWlyZWQiLCJ3cmFwcGVyIiwiSlNPTkZvcm1hdHRlciIsImZpbmQiLCJzaW11bGF0ZSIsImtleSIsImV4cGVjdCIsInRvTWF0Y2hTbmFwc2hvdCIsImpzVGV4dCIsImpzU3R5bGUiLCJKU0Zvcm1hdHRlciJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUhBO0FBS0EsSUFBSSxPQUFPQSxNQUFQLEtBQWtCLFdBQXRCLEVBQW1DO0FBQ2pDO0FBQ0FDLEVBQUFBLE9BQU8sQ0FBQyx1Q0FBRCxDQUFQO0FBQ0Q7O0FBRURDLFFBQVEsQ0FBQyxjQUFELEVBQWlCLFlBQU07QUFDN0JDLEVBQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2ZDLElBQUFBLElBQUksQ0FBQ0MsYUFBTDtBQURlLFFBRVBDLEtBRk8sR0FFR0MsaUJBRkgsQ0FFUEQsS0FGTztBQUdmLFFBQU1FLEdBQUcsR0FBRyxJQUFJRixLQUFKLENBQVUsMkNBQVYsQ0FBWjtBQUNBRyxJQUFBQSxN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QUFFLElBRFM7QUFFckJDLE1BQUFBLE1BQU0sRUFBRSxDQUFDO0FBQUVSLFFBQUFBLElBQUksRUFBRSxTQUFSO0FBQW1CUyxRQUFBQSxJQUFJLEVBQUUsUUFBekI7QUFBbUNDLFFBQUFBLFlBQVksRUFBRVMsTUFBakQ7QUFBeURSLFFBQUFBLFFBQVEsRUFBRTtBQUFuRSxPQUFEO0FBRmEsS0FBWixDQUFYO0FBS0EsUUFBTUMsT0FBTyxHQUFHLG1CQUNkLGdDQUFDLFlBQUQ7QUFDRSxNQUFBLE9BQU8sRUFBRVAsRUFEWDtBQUVFLE1BQUEsSUFBSSxFQUFDLFNBRlA7QUFHRSxNQUFBLEtBQUssRUFBRWUsT0FIVDtBQUlFLE1BQUEsU0FBUyxFQUFFQyx1QkFKYjtBQUtFLE1BQUEsT0FBTyxFQUFFdkI7QUFMWCxNQURjLENBQWhCO0FBU0FjLElBQUFBLE9BQU8sQ0FBQ0UsSUFBUixDQUFhLFVBQWIsRUFBeUJDLFFBQXpCLENBQWtDLE9BQWxDO0FBQ0FILElBQUFBLE9BQU8sQ0FBQ0UsSUFBUixDQUFhLFVBQWIsRUFBeUJDLFFBQXpCLENBQWtDLFNBQWxDLEVBQTZDO0FBQUVDLE1BQUFBLEdBQUcsRUFBRTtBQUFQLEtBQTdDO0FBQ0FKLElBQUFBLE9BQU8sQ0FBQ0UsSUFBUixDQUFhLFVBQWIsRUFBeUJDLFFBQXpCLENBQWtDLFNBQWxDLEVBQTZDO0FBQUVDLE1BQUFBLEdBQUcsRUFBRTtBQUFQLEtBQTdDO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0wsT0FBRCxDQUFOLENBQWdCTSxlQUFoQjtBQUNELEdBckRDLENBQUY7QUFzREQsQ0FwSU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQganNkb20gZnJvbSAnanNkb20nO1xuaW1wb3J0IHsgbW91bnQgfSBmcm9tICdlbnp5bWUnO1xuaW1wb3J0IEpTRm9ybWF0dGVyIGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2NvZGUtYXJlYS9mb3JtYXR0ZXJzL0pTRm9ybWF0dGVyJztcbmltcG9ydCBDb2RlQXJlYSBmcm9tICcuLic7XG5pbXBvcnQgRGF0YVNldCBmcm9tICcuLi8uLi9kYXRhLXNldCc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW5hbWVkLWFzLWRlZmF1bHRcbmltcG9ydCBKU09ORm9ybWF0dGVyIGZyb20gJy4uL2Zvcm1hdHRlcnMvSlNPTkZvcm1hdHRlcic7XG5cbmltcG9ydCAnY2hvZXJvZG9uLXVpL3Byby9saWIvY29kZS1hcmVhL2xpbnQvanNvbic7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2xvYmFsLXJlcXVpcmVcbiAgcmVxdWlyZSgnY29kZW1pcnJvci9tb2RlL2phdmFzY3JpcHQvamF2YXNjcmlwdCcpO1xufVxuXG5kZXNjcmliZSgnQ29kZUFyZWEtcHJvJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LnVzZUZha2VUaW1lcnMoKTtcbiAgICBjb25zdCB7IEpTRE9NIH0gPSBqc2RvbTtcbiAgICBjb25zdCBkb2MgPSBuZXcgSlNET00oJzwhZG9jdHlwZSBodG1sPjxodG1sPjxib2R5PjwvYm9keT48L2h0bWw+Jyk7XG4gICAgZ2xvYmFsLmRvY3VtZW50ID0gZG9jO1xuICAgIGdsb2JhbC53aW5kb3cgPSBkb2MuZGVmYXVsdFZpZXc7XG4gICAgZ2xvYmFsLmRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzZXRFbmQ6ICgpID0+IHt9LFxuICAgICAgICBzZXRTdGFydDogKCkgPT4ge30sXG4gICAgICAgIGdldEJvdW5kaW5nQ2xpZW50UmVjdDogKCkgPT4gKHsgcmlnaHQ6IDAgfSksXG4gICAgICAgIGdldENsaWVudFJlY3RzOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxlbmd0aDogMCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9O1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICB9KTtcblxuICBpdCgndGhlIGNvZGVBcmVhIGpzb24gZm9ybWF0dGVyIGFuZCBsaW50IHRlc3QnLCAoKSA9PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgbW9kZTogeyBuYW1lOiAnamF2YXNjcmlwdCcsIGpzb246IHRydWUgfSB9O1xuICAgIGNvbnN0IGpzb25UZXh0ID0gYHtcbiAgICAgIFwiY29tcGlsZXJPcHRpb25zXCI6IHtcbiAgICAgICAgXCJzdHJpY3ROdWxsQ2hlY2tzXCI6IHRydWUsXG4gICAgICAgIFwibW9kdWxlUmVzb2x1dGlvblwiOiBcIm5vZGVcIixcbiAgICAgICAgXCJhbGxvd1N5bnRoZXRpY0RlZmF1bHRJbXBvcnRzXCI6IHRydWUsXG4gICAgICAgIFwiZXhwZXJpbWVudGFsRGVjb3JhdG9yc1wiOiB0cnVlLFxuICAgICAgICBcImpzeFwiOiBcInByZXNlcnZlXCIsXG4gICAgICAgIFwibm9VbnVzZWRQYXJhbWV0ZXJzXCI6IHRydWUsXG4gICAgICAgIFwibm9VbnVzZWRMb2NhbHNcIjogdHJ1ZSxcbiAgICAgICAgXCJkZWNsYXJhdGlvblwiOiB0cnVlLFxuICAgICAgICBcInRhcmdldFwiOiBcImVzNlwiLFxuICAgICAgICBcImxpYlwiOiBbXG4gICAgICAgICAgXCJkb21cIixcbiAgICAgICAgICBcImRvbS5pdGVyYWJsZVwiLFxuICAgICAgICAgIFwiZXM3XCIsXG4gICAgICAgICAgXCJlczIwMTcub2JqZWN0XCJcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIFwiZXhjbHVkZVwiOiBbXG4gICAgICAgIFwibm9kZV9tb2R1bGVzXCIsXG4gICAgICAgIFwibGliXCIsXG4gICAgICAgIFwiZXNcIlxuICAgICAgXVxuICAgIH1cbiAgICBgO1xuXG4gICAgY29uc3QganNvblN0eWxlID0geyBoZWlnaHQ6IDUwMCB9O1xuXG4gICAgY29uc3QgZHMgPSBuZXcgRGF0YVNldCh7XG4gICAgICBhdXRvQ3JlYXRlOiB0cnVlLFxuICAgICAgZmllbGRzOiBbeyBuYW1lOiAnY29udGVudCcsIHR5cGU6ICdzdHJpbmcnLCBkZWZhdWx0VmFsdWU6IGpzb25UZXh0LCByZXF1aXJlZDogdHJ1ZSB9XSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxDb2RlQXJlYVxuICAgICAgICBkYXRhU2V0PXtkc31cbiAgICAgICAgbmFtZT1cImNvbnRlbnRcIlxuICAgICAgICBzdHlsZT17anNvblN0eWxlfVxuICAgICAgICBmb3JtYXR0ZXI9e0pTT05Gb3JtYXR0ZXJ9XG4gICAgICAgIG9wdGlvbnM9e29wdGlvbnN9XG4gICAgICAgIGZvcm1hdEhvdEtleT1cIkhvbWVcIlxuICAgICAgICB1bkZvcm1hdEhvdEtleT1cIkVuZFwiXG4gICAgICAvPixcbiAgICApO1xuICAgIHdyYXBwZXIuZmluZCgnQ29kZUFyZWEnKS5zaW11bGF0ZSgnZm9jdXMnKTtcbiAgICB3cmFwcGVyLmZpbmQoJ0NvZGVBcmVhJykuc2ltdWxhdGUoJ2tleWRvd24nLCB7IGtleTogJ0hvbWUnIH0pO1xuICAgIHdyYXBwZXIuZmluZCgnQ29kZUFyZWEnKS5zaW11bGF0ZSgna2V5ZG93bicsIHsga2V5OiAnRW5kJyB9KTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuICBpdCgndGhlIGNvZGVBcmVhIGphdmFzY3JpcHQgZm9ybWF0dGVyIGFuZCBsaW50IHRlc3QnLCAoKSA9PiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHsgbW9kZTogJ2phdmFzY3JpcHQnIH07XG5cbiAgICBjb25zdCBqc1RleHQgPSBgZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBcImNvbXBpbGVyT3B0aW9uc1wiOiB7XG4gICAgICAgICAgXCJzdHJpY3ROdWxsQ2hlY2tzXCI6IHRydWUsXG4gICAgICAgICAgXCJtb2R1bGVSZXNvbHV0aW9uXCI6IFwibm9kZVwiLFxuICAgICAgICAgIFwiYWxsb3dTeW50aGV0aWNEZWZhdWx0SW1wb3J0c1wiOiB0cnVlLFxuICAgICAgICAgIFwiZXhwZXJpbWVudGFsRGVjb3JhdG9yc1wiOiB0cnVlLFxuICAgICAgICAgIFwianN4XCI6IFwicHJlc2VydmVcIixcbiAgICAgICAgICBcIm5vVW51c2VkUGFyYW1ldGVyc1wiOiB0cnVlLFxuICAgICAgICAgIFwibm9VbnVzZWRMb2NhbHNcIjogdHJ1ZSxcbiAgICAgICAgICBcImRlY2xhcmF0aW9uXCI6IHRydWUsXG4gICAgICAgICAgXCJ0YXJnZXRcIjogXCJlczZcIixcbiAgICAgICAgICBcImxpYlwiOiBbXG4gICAgICAgICAgICBcImRvbVwiLFxuICAgICAgICAgICAgXCJkb20uaXRlcmFibGVcIixcbiAgICAgICAgICAgIFwiZXM3XCIsXG4gICAgICAgICAgICBcImVzMjAxNy5vYmplY3RcIlxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgXCJleGNsdWRlXCI6IFtcbiAgICAgICAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgICAgICAgIFwibGliXCIsXG4gICAgICAgICAgXCJlc1wiXG4gICAgICAgIF1cbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBvcHRpb25zO1xuICAgIH1cbiAgICBgO1xuXG4gICAgY29uc3QganNTdHlsZSA9IHsgaGVpZ2h0OiA1MDAgfTtcblxuICAgIGNvbnN0IGRzID0gbmV3IERhdGFTZXQoe1xuICAgICAgYXV0b0NyZWF0ZTogdHJ1ZSxcbiAgICAgIGZpZWxkczogW3sgbmFtZTogJ2NvbnRlbnQnLCB0eXBlOiAnc3RyaW5nJywgZGVmYXVsdFZhbHVlOiBqc1RleHQsIHJlcXVpcmVkOiB0cnVlIH1dLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPENvZGVBcmVhXG4gICAgICAgIGRhdGFTZXQ9e2RzfVxuICAgICAgICBuYW1lPVwiY29udGVudFwiXG4gICAgICAgIHN0eWxlPXtqc1N0eWxlfVxuICAgICAgICBmb3JtYXR0ZXI9e0pTRm9ybWF0dGVyfVxuICAgICAgICBvcHRpb25zPXtvcHRpb25zfVxuICAgICAgLz4sXG4gICAgKTtcbiAgICB3cmFwcGVyLmZpbmQoJ0NvZGVBcmVhJykuc2ltdWxhdGUoJ2ZvY3VzJyk7XG4gICAgd3JhcHBlci5maW5kKCdDb2RlQXJlYScpLnNpbXVsYXRlKCdrZXlkb3duJywgeyBrZXk6ICdIb21lJyB9KTtcbiAgICB3cmFwcGVyLmZpbmQoJ0NvZGVBcmVhJykuc2ltdWxhdGUoJ2tleWRvd24nLCB7IGtleTogJ0VuZCcgfSk7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcbn0pO1xuIl19