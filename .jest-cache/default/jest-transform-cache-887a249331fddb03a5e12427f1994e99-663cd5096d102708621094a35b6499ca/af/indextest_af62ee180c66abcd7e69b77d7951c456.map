{"version":3,"sources":["index.test.js"],"names":["Option","Select","describe","beforeEach","jest","useFakeTimers","afterEach","useRealTimers","it","handleDataSetChange","fn","lessTreeMock","expand","functionCode","icon","id","ischecked","score","shortcutId","text","url","symbol","parentId","optionDs","DataSet","data","autoQuery","selection","parentField","idField","fields","name","type","ds","autoCreate","textField","defaultValue","valueField","label","options","events","update","wrapper","runAllTimers","expect","find","at","prop","toBe","user","simulate","length"],"mappings":";;;;AAAA;;AACA;;AACA;;AACA;;IAEQA,M,GAAWC,Y,CAAXD,M;AAERE,QAAQ,CAAC,QAAD,EAAW,YAAM;AACvBC,EAAAA,UAAU,CAAC,YAAM;AACfC,IAAAA,IAAI,CAACC,aAAL;AACD,GAFS,CAAV;AAIAC,EAAAA,SAAS,CAAC,YAAM;AACdF,IAAAA,IAAI,CAACG,aAAL;AACD,GAFQ,CAAT;AAIAC,EAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAM;AACnC,QAAMC,mBAAmB,GAAGL,IAAI,CAACM,EAAL,EAA5B;AACA,QAAMC,YAAY,GAAI,CACpB;AACEC,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,gBAFhB;AAGEC,MAAAA,IAAI,EAAE,aAHR;AAIEC,MAAAA,EAAE,EAAE,CAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,aARR;AASEC,MAAAA,GAAG,EAAE,sBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KADoB,EAcpB;AACEV,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,SAFhB;AAGEC,MAAAA,IAAI,EAAE,YAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,kBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KAdoB,EA2BpB;AACEV,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,eAFhB;AAGEC,MAAAA,IAAI,EAAE,UAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,aARR;AASEC,MAAAA,GAAG,EAAE,qBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KA3BoB,EAwCpB;AACEV,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,eAFhB;AAGEC,MAAAA,IAAI,EAAE,WAHR;AAIEC,MAAAA,EAAE,EAAE,CAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,aARR;AASEC,MAAAA,GAAG,EAAE,qBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KAxCoB,EAqDpB;AACEV,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,gBAFhB;AAGEC,MAAAA,IAAI,EAAE,eAHR;AAIEC,MAAAA,EAAE,EAAE,CAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,aARR;AASEC,MAAAA,GAAG,EAAE,sBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KArDoB,EAkEpB;AACEV,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,aAFhB;AAGEC,MAAAA,IAAI,EAAE,mBAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,kBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KAlEoB,EA+EpB;AACEV,MAAAA,MAAM,EAAE,KADV;AAEEC,MAAAA,YAAY,EAAE,aAFhB;AAGEC,MAAAA,IAAI,EAAE,YAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,kBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KA/EoB,EA4FpB;AACEV,MAAAA,MAAM,EAAE,IADV;AAEEC,MAAAA,YAAY,EAAE,aAFhB;AAGEC,MAAAA,IAAI,EAAE,YAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,kBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KA5FoB,EAyGpB;AACEV,MAAAA,MAAM,EAAE,IADV;AAEEC,MAAAA,YAAY,EAAE,IAFhB;AAGEC,MAAAA,IAAI,EAAE,aAHR;AAIEC,MAAAA,EAAE,EAAE,CAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,IATP;AAUEC,MAAAA,MAAM,EAAE;AAVV,KAzGoB,EAqHpB;AACET,MAAAA,MAAM,EAAE,IADV;AAEEC,MAAAA,YAAY,EAAE,iBAFhB;AAGEC,MAAAA,IAAI,EAAE,YAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,iBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KArHoB,EAkIpB;AACEV,MAAAA,MAAM,EAAE,IADV;AAEEC,MAAAA,YAAY,EAAE,mBAFhB;AAGEC,MAAAA,IAAI,EAAE,YAHR;AAIEC,MAAAA,EAAE,EAAE,EAJN;AAKEC,MAAAA,SAAS,EAAE,IALb;AAMEC,MAAAA,KAAK,EAAE,EANT;AAOEC,MAAAA,UAAU,EAAE,IAPd;AAQEC,MAAAA,IAAI,EAAE,MARR;AASEC,MAAAA,GAAG,EAAE,kBATP;AAUEC,MAAAA,MAAM,EAAE,GAVV;AAWEC,MAAAA,QAAQ,EAAE;AAXZ,KAlIoB,CAAtB;AAgJA,QAAMC,QAAQ,GAAG,IAAIC,mBAAJ,CAAY;AAC3BC,MAAAA,IAAI,EAACd,YADsB;AAE3Be,MAAAA,SAAS,EAAE,IAFgB;AAG3BC,MAAAA,SAAS,EAAE,SAHgB;AAI3BC,MAAAA,WAAW,EAAE,UAJc;AAK3BC,MAAAA,OAAO,EAAE,IALkB;AAM3BC,MAAAA,MAAM,EAAE,CACN;AAAEC,QAAAA,IAAI,EAAE,IAAR;AAAcC,QAAAA,IAAI,EAAE;AAApB,OADM,EAEN;AAAED,QAAAA,IAAI,EAAE,QAAR;AAAkBC,QAAAA,IAAI,EAAE;AAAxB,OAFM,EAGN;AAAED,QAAAA,IAAI,EAAE,UAAR;AAAoBC,QAAAA,IAAI,EAAE;AAA1B,OAHM;AANmB,KAAZ,CAAjB;AAaA,QAAMC,EAAE,GAAG,IAAIT,mBAAJ,CAAY;AACrBU,MAAAA,UAAU,EAAC,IADU;AAErBJ,MAAAA,MAAM,EAAE,CACN;AACEC,QAAAA,IAAI,EAAE,IADR;AAEEC,QAAAA,IAAI,EAAE,QAFR;AAGEG,QAAAA,SAAS,EAAE,MAHb;AAIEC,QAAAA,YAAY,EAAC,CAAC,GAAD,EAAM,GAAN,CAJf;AAKEC,QAAAA,UAAU,EAAE,IALd;AAMEC,QAAAA,KAAK,EAAE,IANT;AAOEC,QAAAA,OAAO,EAAEhB;AAPX,OADM,CAFa;AAarBiB,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAEhC;AADF;AAba,KAAZ,CAAX;AAiBA,QAAMiC,OAAO,GAAG,mBACd,gCAAC,YAAD;AAAQ,MAAA,OAAO,EAAET,EAAjB;AAAqB,MAAA,IAAI,EAAC;AAA1B,OACE,gCAAC,MAAD;AAAQ,MAAA,KAAK,EAAC;AAAd,cADF,EAEE,gCAAC,MAAD;AAAQ,MAAA,KAAK,EAAC;AAAd,cAFF,EAGE,gCAAC,MAAD;AAAQ,MAAA,KAAK,EAAC;AAAd,YAHF,CADc,CAAhB;AAOA7B,IAAAA,IAAI,CAACuC,YAAL;AACAC,IAAAA,MAAM,CACJF,OAAO,CACJG,IADH,CACQ,OADR,EAEGC,EAFH,CAEM,CAFN,EAGGC,IAHH,CAGQ,OAHR,CADI,CAAN,CAKEC,IALF,CAKO,EALP;AAMD,GA9LC,CAAF;AA+LAxC,EAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAM;AACrD,QAAMC,mBAAmB,GAAGL,IAAI,CAACM,EAAL,EAA5B;AACA,QAAMe,IAAI,GAAG,CACX;AACEwB,MAAAA,IAAI,EAAE;AADR,KADW,CAAb;AAKA,QAAMhB,EAAE,GAAG,IAAIT,mBAAJ,CAAY;AACrBC,MAAAA,IAAI,EAAJA,IADqB;AAErBK,MAAAA,MAAM,EAAE,CAAC;AAAEC,QAAAA,IAAI,EAAE,MAAR;AAAgBC,QAAAA,IAAI,EAAE,QAAtB;AAAgCG,QAAAA,SAAS,EAAE,MAA3C;AAAmDG,QAAAA,KAAK,EAAE;AAA1D,OAAD,CAFa;AAGrBE,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAEhC;AADF;AAHa,KAAZ,CAAX;AAOA,QAAMiC,OAAO,GAAG,mBACd,gCAAC,YAAD;AAAQ,MAAA,OAAO,EAAET,EAAjB;AAAqB,MAAA,IAAI,EAAC;AAA1B,OACE,gCAAC,MAAD;AAAQ,MAAA,KAAK,EAAC;AAAd,cADF,EAEE,gCAAC,MAAD;AAAQ,MAAA,KAAK,EAAC;AAAd,cAFF,EAGE,gCAAC,MAAD;AAAQ,MAAA,KAAK,EAAC;AAAd,YAHF,CADc,CAAhB;AAOAS,IAAAA,OAAO,CAACG,IAAR,CAAa,iBAAb,EAAgCK,QAAhC,CAAyC,OAAzC;AACA9C,IAAAA,IAAI,CAACuC,YAAL;AACAC,IAAAA,MAAM,CAACF,OAAO,CAACG,IAAR,CAAa,UAAb,EAAyBM,MAA1B,CAAN,CAAwCH,IAAxC,CAA6C,CAA7C;AACD,GAxBC,CAAF;AAyBD,CAjOO,CAAR","sourcesContent":["import React from 'react';\nimport { mount } from 'enzyme';\nimport Select from '..';\nimport DataSet from '../../data-set';\n\nconst { Option } = Select;\n\ndescribe('Select', () => {\n  beforeEach(() => {\n    jest.useFakeTimers();\n  });\n\n  afterEach(() => {\n    jest.useRealTimers();\n  });\n\n  it('dataset set Select value', () => {\n    const handleDataSetChange = jest.fn();\n    const lessTreeMock =  [\n      {\n        expand: false,\n        functionCode: 'EMPLOYEE_REACT',\n        icon: 'record_test',\n        id: 7,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '员工管理(react)',\n        url: 'hap-core/hr/employee',\n        symbol: '1',\n        parentId: 2,\n      },\n      {\n        expand: false,\n        functionCode: 'HR_UNIT',\n        icon: 'fa fa-cube',\n        id: 73,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '组织管理',\n        url: 'hr/org_unit.html',\n        symbol: '0',\n        parentId: 2,\n      },\n      {\n        expand: false,\n        functionCode: 'COMPANY_REACT',\n        icon: 'mail_set',\n        id: 12,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '公司管理(react)',\n        url: 'hap-core/hr/company',\n        symbol: '1',\n        parentId: 2,\n      },\n      {\n        expand: false,\n        functionCode: 'ORGUNIT_REACT',\n        icon: 'authority',\n        id: 5,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '组织管理(react)',\n        url: 'hap-core/hr/orgunit',\n        symbol: '1',\n        parentId: 2,\n      },\n      {\n        expand: false,\n        functionCode: 'POSITION_REACT',\n        icon: 'agile_subtask',\n        id: 6,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '岗位管理(react)',\n        url: 'hap-core/hr/position',\n        symbol: '1',\n        parentId: 2,\n      },\n      {\n        expand: false,\n        functionCode: 'HR_POSITION',\n        icon: 'fa fa-user-secret',\n        id: 75,\n        ischecked: true,\n        score: 20,\n        shortcutId: null,\n        text: '岗位管理',\n        url: 'hr/position.html',\n        symbol: '0',\n        parentId: 2,\n      },\n      {\n        expand: false,\n        functionCode: 'HR_EMPLOYEE',\n        icon: 'fa fa-user',\n        id: 74,\n        ischecked: true,\n        score: 30,\n        shortcutId: null,\n        text: '员工管理',\n        url: 'hr/employee.html',\n        symbol: '0',\n        parentId: 2,\n      },\n      {\n        expand: true,\n        functionCode: 'FND_COMPANY',\n        icon: 'fa fa-cube',\n        id: 76,\n        ischecked: null,\n        score: 40,\n        shortcutId: null,\n        text: '公司管理',\n        url: 'fnd/company.html',\n        symbol: '0',\n        parentId: 2,\n      },\n      {\n        expand: true,\n        functionCode: 'HR',\n        icon: 'fa fa-cubes',\n        id: 2,\n        ischecked: null,\n        score: 10,\n        shortcutId: null,\n        text: '组织架构',\n        url: null,\n        symbol: '0',\n      },\n      {\n        expand: true,\n        functionCode: 'SYS_REPORT_LIST',\n        icon: 'fa fa-user',\n        id: 25,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '报表定义',\n        url: 'rpt/report.html',\n        symbol: '0',\n        parentId: 24,\n      },\n      {\n        expand: true,\n        functionCode: 'SYS_REPORT_DESIGN',\n        icon: 'fa fa-user',\n        id: 26,\n        ischecked: true,\n        score: 10,\n        shortcutId: null,\n        text: '报表设计',\n        url: 'ureport/designer',\n        symbol: '0',\n        parentId: 24,\n      },\n    ]\n    const optionDs = new DataSet({\n      data:lessTreeMock,\n      autoQuery: true,\n      selection: 'mutiple',\n      parentField: 'parentId',\n      idField: 'id',\n      fields: [\n        { name: 'id', type: 'string' },\n        { name: 'expand', type: 'boolean' },\n        { name: 'parentId', type: 'string' },\n      ],\n    });\n  \n    const ds = new DataSet({\n      autoCreate:true,\n      fields: [\n        {\n          name: 'id',\n          type: 'string',\n          textField: 'text',\n          defaultValue:[\"2\", \"7\"],\n          valueField: 'id',\n          label: '部门',\n          options: optionDs,\n        },\n      ],\n      events: {\n        update: handleDataSetChange,\n      },\n    });\n    const wrapper = mount(\n      <Select dataSet={ds} name=\"user\">\n        <Option value=\"jack\">Jack</Option>\n        <Option value=\"lucy\">Lucy</Option>\n        <Option value=\"wu\">Wu</Option>\n      </Select>,\n    );\n    jest.runAllTimers();\n    expect(\n      wrapper\n        .find('input')\n        .at(0)\n        .prop('value'),\n    ).toBe('');\n  });\n  it('dataset set value render right number item', () => {\n    const handleDataSetChange = jest.fn();\n    const data = [\n      {\n        user: 'wu',\n      },\n    ];\n    const ds = new DataSet({\n      data,\n      fields: [{ name: 'user', type: 'string', textField: 'text', label: '用户' }],\n      events: {\n        update: handleDataSetChange,\n      },\n    });\n    const wrapper = mount(\n      <Select dataSet={ds} name=\"user\">\n        <Option value=\"jack\">Jack</Option>\n        <Option value=\"lucy\">Lucy</Option>\n        <Option value=\"wu\">Wu</Option>\n      </Select>,\n    );\n    wrapper.find('.c7n-pro-select').simulate('click');\n    jest.runAllTimers();\n    expect(wrapper.find('MenuItem').length).toBe(3);\n  });\n});\n"]}