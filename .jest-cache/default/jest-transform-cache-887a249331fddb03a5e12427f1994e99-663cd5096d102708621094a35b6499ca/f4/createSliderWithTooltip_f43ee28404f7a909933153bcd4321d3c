56fd8cc012799e700f1475b3e2354b91
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = createSliderWithTooltip;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _objectSpread3 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _tooltip = _interopRequireDefault(require("../tooltip"));

var _Handle = _interopRequireDefault(require("./Handle"));

function createSliderWithTooltip(Component) {
  var _class, _temp;

  return _temp = _class =
  /*#__PURE__*/
  function (_Component) {
    (0, _inherits2["default"])(ComponentWrapper, _Component);

    function ComponentWrapper(props) {
      var _this;

      (0, _classCallCheck2["default"])(this, ComponentWrapper);
      _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(ComponentWrapper).call(this, props));
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleTooltipVisibleChange", function (index, visible) {
        _this.setState(function (prevState) {
          return {
            visibles: (0, _objectSpread3["default"])({}, prevState.visibles, (0, _defineProperty2["default"])({}, index, visible))
          };
        });
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleWithTooltip", function (_ref) {
        var value = _ref.value,
            dragging = _ref.dragging,
            index = _ref.index,
            disabled = _ref.disabled,
            restProps = (0, _objectWithoutProperties2["default"])(_ref, ["value", "dragging", "index", "disabled"]);
        var _this$props = _this.props,
            tipFormatter = _this$props.tipFormatter,
            tipProps = _this$props.tipProps,
            handleStyle = _this$props.handleStyle;
        var _tipProps$prefixCls = tipProps.prefixCls,
            prefixCls = _tipProps$prefixCls === void 0 ? 'rc-slider-tooltip' : _tipProps$prefixCls,
            _tipProps$overlay = tipProps.overlay,
            overlay = _tipProps$overlay === void 0 ? tipFormatter(value) : _tipProps$overlay,
            _tipProps$placement = tipProps.placement,
            placement = _tipProps$placement === void 0 ? 'top' : _tipProps$placement,
            _tipProps$visible = tipProps.visible,
            visible = _tipProps$visible === void 0 ? visible || false : _tipProps$visible,
            restTooltipProps = (0, _objectWithoutProperties2["default"])(tipProps, ["prefixCls", "overlay", "placement", "visible"]);
        var handleStyleWithIndex;

        if (Array.isArray(handleStyle)) {
          handleStyleWithIndex = handleStyle[index] || handleStyle[0];
        } else {
          handleStyleWithIndex = handleStyle;
        }

        return _react["default"].createElement(_tooltip["default"], (0, _extends2["default"])({}, restTooltipProps, {
          prefixCls: prefixCls,
          overlay: overlay,
          placement: placement,
          visible: !disabled && (_this.state.visibles[index] || dragging) || visible,
          key: index
        }), _react["default"].createElement(_Handle["default"], (0, _extends2["default"])({}, restProps, {
          style: (0, _objectSpread3["default"])({}, handleStyleWithIndex),
          value: value,
          onMouseEnter: function onMouseEnter() {
            return _this.handleTooltipVisibleChange(index, true);
          },
          onMouseLeave: function onMouseLeave() {
            return _this.handleTooltipVisibleChange(index, false);
          }
        })));
      });
      _this.state = {
        visibles: {}
      };
      return _this;
    }

    (0, _createClass2["default"])(ComponentWrapper, [{
      key: "render",
      value: function render() {
        return _react["default"].createElement(Component, (0, _extends2["default"])({}, this.props, {
          handle: this.handleWithTooltip
        }));
      }
    }]);
    return ComponentWrapper;
  }(Component), (0, _defineProperty2["default"])(_class, "propTypes", {
    tipFormatter: _propTypes["default"].func,
    handleStyle: _propTypes["default"].oneOfType([_propTypes["default"].object, _propTypes["default"].arrayOf(_propTypes["default"].object)]),
    tipProps: _propTypes["default"].object
  }), (0, _defineProperty2["default"])(_class, "defaultProps", {
    tipFormatter: function tipFormatter(value) {
      return value;
    },
    handleStyle: [{}],
    tipProps: {}
  }), _temp;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZVNsaWRlcldpdGhUb29sdGlwLmpzeCJdLCJuYW1lcyI6WyJjcmVhdGVTbGlkZXJXaXRoVG9vbHRpcCIsIkNvbXBvbmVudCIsInByb3BzIiwiaW5kZXgiLCJ2aXNpYmxlIiwic2V0U3RhdGUiLCJwcmV2U3RhdGUiLCJ2aXNpYmxlcyIsInZhbHVlIiwiZHJhZ2dpbmciLCJkaXNhYmxlZCIsInJlc3RQcm9wcyIsInRpcEZvcm1hdHRlciIsInRpcFByb3BzIiwiaGFuZGxlU3R5bGUiLCJwcmVmaXhDbHMiLCJvdmVybGF5IiwicGxhY2VtZW50IiwicmVzdFRvb2x0aXBQcm9wcyIsImhhbmRsZVN0eWxlV2l0aEluZGV4IiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhdGUiLCJoYW5kbGVUb29sdGlwVmlzaWJsZUNoYW5nZSIsImhhbmRsZVdpdGhUb29sdGlwIiwiUHJvcFR5cGVzIiwiZnVuYyIsIm9uZU9mVHlwZSIsIm9iamVjdCIsImFycmF5T2YiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRWUsU0FBU0EsdUJBQVQsQ0FBaUNDLFNBQWpDLEVBQTRDO0FBQUE7O0FBQ3pEO0FBQUE7QUFBQTtBQUFBOztBQWNFLDhCQUFZQyxLQUFaLEVBQW1CO0FBQUE7O0FBQUE7QUFDakIsOEhBQU1BLEtBQU47QUFEaUIscUhBS1UsVUFBQ0MsS0FBRCxFQUFRQyxPQUFSLEVBQW9CO0FBQy9DLGNBQUtDLFFBQUwsQ0FBYyxVQUFBQyxTQUFTLEVBQUk7QUFDekIsaUJBQU87QUFDTEMsWUFBQUEsUUFBUSxxQ0FDSEQsU0FBUyxDQUFDQyxRQURQLHVDQUVMSixLQUZLLEVBRUdDLE9BRkg7QUFESCxXQUFQO0FBTUQsU0FQRDtBQVFELE9BZGtCO0FBQUEsNEdBZUMsZ0JBQXdEO0FBQUEsWUFBckRJLEtBQXFELFFBQXJEQSxLQUFxRDtBQUFBLFlBQTlDQyxRQUE4QyxRQUE5Q0EsUUFBOEM7QUFBQSxZQUFw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dCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFRvb2x0aXAgZnJvbSAnLi4vdG9vbHRpcCc7XG5pbXBvcnQgSGFuZGxlIGZyb20gJy4vSGFuZGxlJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU2xpZGVyV2l0aFRvb2x0aXAoQ29tcG9uZW50KSB7XG4gIHJldHVybiBjbGFzcyBDb21wb25lbnRXcmFwcGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgICAgdGlwRm9ybWF0dGVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAgIGhhbmRsZVN0eWxlOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMub2JqZWN0LCBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMub2JqZWN0KV0pLFxuICAgICAgdGlwUHJvcHM6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgfTtcbiAgICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgdGlwRm9ybWF0dGVyKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVTdHlsZTogW3t9XSxcbiAgICAgIHRpcFByb3BzOiB7fSxcbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgIHRoaXMuc3RhdGUgPSB7IHZpc2libGVzOiB7fSB9O1xuICAgIH1cblxuICAgIGhhbmRsZVRvb2x0aXBWaXNpYmxlQ2hhbmdlID0gKGluZGV4LCB2aXNpYmxlKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHByZXZTdGF0ZSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmlzaWJsZXM6IHtcbiAgICAgICAgICAgIC4uLnByZXZTdGF0ZS52aXNpYmxlcyxcbiAgICAgICAgICAgIFtpbmRleF06IHZpc2libGUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgaGFuZGxlV2l0aFRvb2x0aXAgPSAoeyB2YWx1ZSwgZHJhZ2dpbmcsIGluZGV4LCBkaXNhYmxlZCwgLi4ucmVzdFByb3BzIH0pID0+IHtcbiAgICAgIGNvbnN0IHsgdGlwRm9ybWF0dGVyLCB0aXBQcm9wcywgaGFuZGxlU3R5bGUgfSA9IHRoaXMucHJvcHM7XG5cbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcHJlZml4Q2xzID0gJ3JjLXNsaWRlci10b29sdGlwJyxcbiAgICAgICAgb3ZlcmxheSA9IHRpcEZvcm1hdHRlcih2YWx1ZSksXG4gICAgICAgIHBsYWNlbWVudCA9ICd0b3AnLFxuICAgICAgICB2aXNpYmxlID0gdmlzaWJsZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucmVzdFRvb2x0aXBQcm9wc1xuICAgICAgfSA9IHRpcFByb3BzO1xuXG4gICAgICBsZXQgaGFuZGxlU3R5bGVXaXRoSW5kZXg7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShoYW5kbGVTdHlsZSkpIHtcbiAgICAgICAgaGFuZGxlU3R5bGVXaXRoSW5kZXggPSBoYW5kbGVTdHlsZVtpbmRleF0gfHwgaGFuZGxlU3R5bGVbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVTdHlsZVdpdGhJbmRleCA9IGhhbmRsZVN0eWxlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8VG9vbHRpcFxuICAgICAgICAgIHsuLi5yZXN0VG9vbHRpcFByb3BzfVxuICAgICAgICAgIHByZWZpeENscz17cHJlZml4Q2xzfVxuICAgICAgICAgIG92ZXJsYXk9e292ZXJsYXl9XG4gICAgICAgICAgcGxhY2VtZW50PXtwbGFjZW1lbnR9XG4gICAgICAgICAgdmlzaWJsZT17KCFkaXNhYmxlZCAmJiAodGhpcy5zdGF0ZS52aXNpYmxlc1tpbmRleF0gfHwgZHJhZ2dpbmcpKSB8fCB2aXNpYmxlfVxuICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgID5cbiAgICAgICAgICA8SGFuZGxlXG4gICAgICAgICAgICB7Li4ucmVzdFByb3BzfVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgLi4uaGFuZGxlU3R5bGVXaXRoSW5kZXgsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgb25Nb3VzZUVudGVyPXsoKSA9PiB0aGlzLmhhbmRsZVRvb2x0aXBWaXNpYmxlQ2hhbmdlKGluZGV4LCB0cnVlKX1cbiAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gdGhpcy5oYW5kbGVUb29sdGlwVmlzaWJsZUNoYW5nZShpbmRleCwgZmFsc2UpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvVG9vbHRpcD5cbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgIHJldHVybiA8Q29tcG9uZW50IHsuLi50aGlzLnByb3BzfSBoYW5kbGU9e3RoaXMuaGFuZGxlV2l0aFRvb2x0aXB9IC8+O1xuICAgIH1cbiAgfTtcbn1cbiJdfQ==