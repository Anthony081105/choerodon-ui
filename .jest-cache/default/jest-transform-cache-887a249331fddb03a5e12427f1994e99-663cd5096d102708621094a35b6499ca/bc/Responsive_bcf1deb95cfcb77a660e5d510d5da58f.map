{"version":3,"sources":["responsive/Responsive.js"],"names":["window","matchMediaPolifill","enquire","require","responsiveMap","Breakpoint","responsiveArray","Object","Responsive","PureComponent","breakpoints","props","disabled","items","isObject","onChange","nextProps","match","prevState","unmatch","destroy","value","i","breakpoint","children"],"mappings":"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","sourcesContent":["import { PureComponent } from 'react';\nimport isObject from 'lodash/isObject';\nimport { isArrayLike } from 'mobx';\nimport { matchMediaPolifill } from '../_util/mediaQueryListPolyfill';\nimport { Breakpoint } from './enum';\nlet enquire;\nif (typeof window !== 'undefined') {\n    window.matchMedia = window.matchMedia || matchMediaPolifill;\n    // eslint-disable-next-line global-require\n    enquire = require('enquire.js');\n}\nconst responsiveMap = {\n    [Breakpoint.xxl]: '(min-width: 1600px)',\n    [Breakpoint.xl]: '(min-width: 1200px)',\n    [Breakpoint.lg]: '(min-width: 992px)',\n    [Breakpoint.md]: '(min-width: 768px)',\n    [Breakpoint.sm]: '(min-width: 576px)',\n    [Breakpoint.xs]: '(max-width: 575px)',\n};\nconst responsiveArray = Object.keys(responsiveMap);\nexport default class Responsive extends PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = { breakpoints: {} };\n    }\n    isDisabled(props) {\n        const { disabled, items } = props;\n        if (!disabled && items) {\n            return !items.some(isObject);\n        }\n        return true;\n    }\n    componentDidMount() {\n        if (!this.isDisabled(this.props)) {\n            this.register();\n        }\n    }\n    componentDidUpdate() {\n        const { onChange } = this.props;\n        if (onChange) {\n            onChange(this.getValues());\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        if (this.isDisabled(this.props) && !this.isDisabled(nextProps)) {\n            this.register();\n        }\n        if (!this.isDisabled(this.props) && this.isDisabled(nextProps)) {\n            this.unregister();\n        }\n    }\n    componentWillUnmount() {\n        if (!this.isDisabled(this.props)) {\n            this.unregister();\n        }\n    }\n    register() {\n        if (enquire) {\n            responsiveArray.map((breakpoint) => enquire.register(responsiveMap[breakpoint], {\n                match: () => {\n                    this.setState(prevState => ({\n                        breakpoints: {\n                            ...prevState.breakpoints,\n                            [breakpoint]: true,\n                        },\n                    }));\n                },\n                unmatch: () => {\n                    this.setState(prevState => ({\n                        breakpoints: {\n                            ...prevState.breakpoints,\n                            [breakpoint]: false,\n                        },\n                    }));\n                },\n                // Keep a empty destory to avoid triggering unmatch when unregister\n                destroy() { },\n            }));\n        }\n    }\n    unregister() {\n        Object.keys(responsiveMap).map((breakpoint) => enquire.unregister(responsiveMap[breakpoint]));\n    }\n    processValue(value) {\n        const { breakpoints } = this.state;\n        if (isArrayLike(value)) {\n            return value.map(this.processValue, this);\n        }\n        if (isObject(value)) {\n            for (let i = 0; i < responsiveArray.length; i++) {\n                const breakpoint = responsiveArray[i];\n                if (breakpoints[breakpoint] && value[breakpoint] !== undefined) {\n                    return value[breakpoint];\n                }\n            }\n            return undefined;\n        }\n        return value;\n    }\n    getValues() {\n        const { items } = this.props;\n        if (items) {\n            return items.map(this.processValue, this);\n        }\n        return [];\n    }\n    render() {\n        const { children } = this.props;\n        if (typeof children === 'function') {\n            return children(this.getValues());\n        }\n        return children;\n    }\n}\nResponsive.displayName = 'Responsive';\n"]}