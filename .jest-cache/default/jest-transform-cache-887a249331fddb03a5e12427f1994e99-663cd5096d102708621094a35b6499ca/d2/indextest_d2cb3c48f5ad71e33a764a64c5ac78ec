ad85984dfbf014f99f48092565832181
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _ = _interopRequireDefault(require(".."));

var _mountTest = _interopRequireDefault(require("../../../tests/shared/mountTest"));

var _focusTest = _interopRequireDefault(require("../../../tests/shared/focusTest"));

var _triggerPopTest = _interopRequireDefault(require("../../../tests/shared/triggerPopTest"));

var _ColorPicker = _interopRequireDefault(require("./ColorPicker"));

(0, _mountTest["default"])(_["default"]);
(0, _focusTest["default"])(_["default"]);
(0, _triggerPopTest["default"])(_["default"]);
describe('color-picker-pro', function () {
  beforeEach(function () {
    jest.useFakeTimers();
  });
  afterEach(function () {
    jest.useRealTimers();
  });
  it('renders ColorPicker correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    expect(wrapper).toMatchSnapshot();
  });
  it('ColorPicker has the defaultProps clearButton', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    expect(wrapper.props().clearButton).toEqual(false);
    expect(wrapper.props().triggerHiddenDelay).toEqual(50);
    expect(wrapper.props().triggerShowDelay).toEqual(150);
  });
  it('should has the defaultValue', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      defaultValue: "#f1c7f2"
    }));
    expect(wrapper.find('input').at(0).prop('value')).toBe('#f1c7f2');
  });
  it('the color will be controlled by the value', function () {
    var handleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      value: "#f1c7f2",
      onChange: handleChange
    }));
    expect(wrapper.find('input').at(0).prop('value')).toBe('#f1c7f2');
    wrapper.setProps({
      value: '#00ff00'
    });
    wrapper.update();
    expect(wrapper.find('input').at(0).prop('value')).toBe('#00ff00');
  });
  it('can not click or input when the readOnly true and default false', function () {
    var handleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      onChange: handleChange
    }));
    expect(wrapper.prop('readOnly')).toBe(false);
    wrapper.setProps({
      readOnly: true
    });
    wrapper.update();
    expect(wrapper.prop('readOnly')).toBe(true);
    wrapper.find('input').simulate('change');
    jest.runAllTimers();
    wrapper.update();
    expect(handleChange).not.toHaveBeenCalled();
  });
  it('should trigger dataset default value correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    expect(wrapper.find('.c7n-pro-color-picker-popup').at(0).prop('hidden')).toEqual(true);
    wrapper.find('input').simulate('click');
    jest.runAllTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-color-picker-popup').at(0).prop('hidden')).toEqual(false);
  });
  it('footer-slider click event render correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    wrapper.find('input').simulate('click');
    jest.runAllTimers();
    wrapper.find('.hue').simulate('click');
    jest.runAllTimers();
    expect(wrapper).toMatchSnapshot();
  });
  it('the change event trigger when the body popup clicked', function () {
    var handleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      onChange: handleChange
    }));
    wrapper.find('input').simulate('click');
    jest.runAllTimers();
    wrapper.find('.c7n-pro-color-picker-popup-body-gradient').simulate('click');
    jest.runAllTimers();
    expect(handleChange).toHaveBeenCalled();
  });
  it('the panel body click event render correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    wrapper.find('input').simulate('click');
    jest.runAllTimers();
    wrapper.find('.c7n-pro-color-picker-popup-body-selector').simulate('mousedown');
    expect(wrapper).toMatchSnapshot();
  });
  it('the sliderPointer of footer click event render correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    wrapper.find('input').simulate('click');
    jest.runAllTimers();
    wrapper.find('.c7n-pro-color-picker-popup-footer-slider-pointer').at(0).simulate('mousedown');
    jest.runAllTimers();
    wrapper.instance().setColor('#ff00ee');
    jest.runAllTimers();
    expect(wrapper).toMatchSnapshot();
  });
  it('should renders dataset default value correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_ColorPicker["default"], null));
    expect(wrapper.find('ColorPicker').props().name).toEqual('color');
    expect(wrapper.find('input').prop('value')).toBe('#00ff12');
    expect(wrapper).toMatchSnapshot();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRlc3QuanMiXSwibmFtZXMiOlsiQ29sb3JQaWNrZXIiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJqZXN0IiwidXNlRmFrZVRpbWVycyIsImFmdGVyRWFjaCIsInVzZVJlYWxUaW1lcnMiLCJpdCIsIndyYXBwZXIiLCJleHBlY3QiLCJ0b01hdGNoU25hcHNob3QiLCJwcm9wcyIsImNsZWFyQnV0dG9uIiwidG9FcXVhbCIsInRyaWdnZXJIaWRkZW5EZWxheSIsInRyaWdnZXJTaG93RGVsYXkiLCJmaW5kIiwiYXQiLCJwcm9wIiwidG9CZSIsImhhbmRsZUNoYW5nZSIsImZuIiwic2V0UHJvcHMiLCJ2YWx1ZSIsInVwZGF0ZSIsInJlYWRPbmx5Iiwic2ltdWxhdGUiLCJydW5BbGxUaW1lcnMiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiaW5zdGFuY2UiLCJzZXRDb2xvciIsIm5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQSwyQkFBVUEsWUFBVjtBQUNBLDJCQUFVQSxZQUFWO0FBQ0EsZ0NBQVlBLFlBQVo7QUFFQUMsUUFBUSxDQUFDLGtCQUFELEVBQXFCLFlBQU07QUFDakNDLEVBQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2ZDLElBQUFBLElBQUksQ0FBQ0MsYUFBTDtBQUNELEdBRlMsQ0FBVjtBQUlBQyxFQUFBQSxTQUFTLENBQUMsWUFBTTtBQUNkRixJQUFBQSxJQUFJLENBQUNHLGFBQUw7QUFDRCxHQUZRLENBQVQ7QUFJQUMsRUFBQUEsRUFBRSxDQUFDLCtCQUFELEVBQWtDLFlBQU07QUFDeEMsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLFlBQUQsT0FBTixDQUFoQjtBQUNBQyxJQUFBQSxNQUFNLENBQUNELE9BQUQsQ0FBTixDQUFnQkUsZUFBaEI7QUFDRCxHQUhDLENBQUY7QUFLQUgsRUFBQUEsRUFBRSxDQUFDLDhDQUFELEVBQWlELFlBQU07QUFDdkQsUUFB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LENBQTRCLFNBQTVCO0FBQ0E1QixJQUFBQSxJQUFJLENBQUN3QixZQUFMO0FBQ0FsQixJQUFBQSxNQUFNLENBQUNELE9BQUQsQ0FBTixDQUFnQkUsZUFBaEI7QUFDRCxHQVpDLENBQUY7QUFjQUgsRUFBQUEsRUFBRSxDQUFDLGdEQUFELEVBQW1ELFlBQU07QUFDekQsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLHVCQUFELE9BQU4sQ0FBaEI7QUFDQUMsSUFBQUEsTUFBTSxDQUFDRCxPQUFPLENBQUNRLElBQVIsQ0FBYSxhQUFiLEVBQTRCTCxLQUE1QixHQUFvQ3FCLElBQXJDLENBQU4sQ0FBaURuQixPQUFqRCxDQUF5RCxPQUF6RDtBQUNBSixJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ1EsSUFBUixDQUFhLE9BQWIsRUFBc0JFLElBQXRCLENBQTJCLE9BQTNCLENBQUQsQ0FBTixDQUE0Q0MsSUFBNUMsQ0FBaUQsU0FBakQ7QUFDQVYsSUFBQUEsTUFBTSxDQUFDRCxPQUFELENBQU4sQ0FBZ0JFLGVBQWhCO0FBQ0QsR0FMQyxDQUFGO0FBTUQsQ0FqSU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtb3VudCB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgQ29sb3JQaWNrZXIgZnJvbSAnLi4nO1xuaW1wb3J0IG1vdW50VGVzdCBmcm9tICcuLi8uLi8uLi90ZXN0cy9zaGFyZWQvbW91bnRUZXN0JztcbmltcG9ydCBmb2N1c1Rlc3QgZnJvbSAnLi4vLi4vLi4vdGVzdHMvc2hhcmVkL2ZvY3VzVGVzdCc7XG5pbXBvcnQgdHJpZ2dlclRlc3QgZnJvbSAnLi4vLi4vLi4vdGVzdHMvc2hhcmVkL3RyaWdnZXJQb3BUZXN0JztcbmltcG9ydCBDb2xvclBpY2tlclRlc3QgZnJvbSAnLi9Db2xvclBpY2tlcic7XG5cbm1vdW50VGVzdChDb2xvclBpY2tlcik7XG5mb2N1c1Rlc3QoQ29sb3JQaWNrZXIpO1xudHJpZ2dlclRlc3QoQ29sb3JQaWNrZXIpO1xuXG5kZXNjcmliZSgnY29sb3ItcGlja2VyLXBybycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC51c2VSZWFsVGltZXJzKCk7XG4gIH0pO1xuXG4gIGl0KCdyZW5kZXJzIENvbG9yUGlja2VyIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPENvbG9yUGlja2VyIC8+KTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KCdDb2xvclBpY2tlciBoYXMgdGhlIGRlZmF1bHRQcm9wcyBjbGVhckJ1dHRvbicsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPENvbG9yUGlja2VyIC8+KTtcbiAgICBleHBlY3Qod3JhcHBlci5wcm9wcygpLmNsZWFyQnV0dG9uKS50b0VxdWFsKGZhbHNlKTtcbiAgICBleHBlY3Qod3JhcHBlci5wcm9wcygpLnRyaWdnZXJIaWRkZW5EZWxheSkudG9FcXVhbCg1MCk7XG4gICAgZXhwZWN0KHdyYXBwZXIucHJvcHMoKS50cmlnZ2VyU2hvd0RlbGF5KS50b0VxdWFsKDE1MCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFzIHRoZSBkZWZhdWx0VmFsdWUnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxDb2xvclBpY2tlciBkZWZhdWx0VmFsdWU9XCIjZjFjN2YyXCIgLz4pO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCd2YWx1ZScpLFxuICAgICkudG9CZSgnI2YxYzdmMicpO1xuICB9KTtcblxuICBpdCgndGhlIGNvbG9yIHdpbGwgYmUgY29udHJvbGxlZCBieSB0aGUgdmFsdWUnLCAoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gamVzdC5mbigpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q29sb3JQaWNrZXIgdmFsdWU9XCIjZjFjN2YyXCIgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0gLz4pO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCd2YWx1ZScpLFxuICAgICkudG9CZSgnI2YxYzdmMicpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyB2YWx1ZTogJyMwMGZmMDAnIH0pO1xuICAgIHdyYXBwZXIudXBkYXRlKCk7XG4gICAgZXhwZWN0KFxuICAgICAgd3JhcHBlclxuICAgICAgICAuZmluZCgnaW5wdXQnKVxuICAgICAgICAuYXQoMClcbiAgICAgICAgLnByb3AoJ3ZhbHVlJyksXG4gICAgKS50b0JlKCcjMDBmZjAwJyk7XG4gIH0pO1xuXG4gIGl0KCdjYW4gbm90IGNsaWNrIG9yIGlucHV0IHdoZW4gdGhlIHJlYWRPbmx5IHRydWUgYW5kIGRlZmF1bHQgZmFsc2UnLCAoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gamVzdC5mbigpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q29sb3JQaWNrZXIgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0gLz4pO1xuICAgIGV4cGVjdCh3cmFwcGVyLnByb3AoJ3JlYWRPbmx5JykpLnRvQmUoZmFsc2UpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyByZWFkT25seTogdHJ1ZSB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLnByb3AoJ3JlYWRPbmx5JykpLnRvQmUodHJ1ZSk7XG5cbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0Jykuc2ltdWxhdGUoJ2NoYW5nZScpO1xuICAgIGplc3QucnVuQWxsVGltZXJzKCk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICBleHBlY3QoaGFuZGxlQ2hhbmdlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCB0cmlnZ2VyIGRhdGFzZXQgZGVmYXVsdCB2YWx1ZSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxDb2xvclBpY2tlciAvPik7XG4gICAgZXhwZWN0KFxuICAgICAgd3JhcHBlclxuICAgICAgICAuZmluZCgnLmM3bi1wcm8tY29sb3ItcGlja2VyLXBvcHVwJylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCdoaWRkZW4nKSxcbiAgICApLnRvRXF1YWwodHJ1ZSk7XG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGplc3QucnVuQWxsVGltZXJzKCk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICBleHBlY3QoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCcuYzduLXByby1jb2xvci1waWNrZXItcG9wdXAnKVxuICAgICAgICAuYXQoMClcbiAgICAgICAgLnByb3AoJ2hpZGRlbicpLFxuICAgICkudG9FcXVhbChmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdmb290ZXItc2xpZGVyIGNsaWNrIGV2ZW50IHJlbmRlciBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxDb2xvclBpY2tlciAvPik7XG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGplc3QucnVuQWxsVGltZXJzKCk7XG4gICAgd3JhcHBlci5maW5kKCcuaHVlJykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KCd0aGUgY2hhbmdlIGV2ZW50IHRyaWdnZXIgd2hlbiB0aGUgYm9keSBwb3B1cCBjbGlja2VkJywgKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPENvbG9yUGlja2VyIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IC8+KTtcbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0Jykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICB3cmFwcGVyLmZpbmQoJy5jN24tcHJvLWNvbG9yLXBpY2tlci1wb3B1cC1ib2R5LWdyYWRpZW50Jykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICBleHBlY3QoaGFuZGxlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCd0aGUgcGFuZWwgYm9keSBjbGljayBldmVudCByZW5kZXIgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q29sb3JQaWNrZXIgLz4pO1xuICAgIHdyYXBwZXIuZmluZCgnaW5wdXQnKS5zaW11bGF0ZSgnY2xpY2snKTtcbiAgICBqZXN0LnJ1bkFsbFRpbWVycygpO1xuICAgIHdyYXBwZXIuZmluZCgnLmM3bi1wcm8tY29sb3ItcGlja2VyLXBvcHVwLWJvZHktc2VsZWN0b3InKS5zaW11bGF0ZSgnbW91c2Vkb3duJyk7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgndGhlIHNsaWRlclBvaW50ZXIgb2YgZm9vdGVyIGNsaWNrIGV2ZW50IHJlbmRlciBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxDb2xvclBpY2tlciAvPik7XG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGplc3QucnVuQWxsVGltZXJzKCk7XG4gICAgd3JhcHBlclxuICAgICAgLmZpbmQoJy5jN24tcHJvLWNvbG9yLXBpY2tlci1wb3B1cC1mb290ZXItc2xpZGVyLXBvaW50ZXInKVxuICAgICAgLmF0KDApXG4gICAgICAuc2ltdWxhdGUoJ21vdXNlZG93bicpO1xuICAgIGplc3QucnVuQWxsVGltZXJzKCk7XG4gICAgd3JhcHBlci5pbnN0YW5jZSgpLnNldENvbG9yKCcjZmYwMGVlJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVycyBkYXRhc2V0IGRlZmF1bHQgdmFsdWUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q29sb3JQaWNrZXJUZXN0IC8+KTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdDb2xvclBpY2tlcicpLnByb3BzKCkubmFtZSkudG9FcXVhbCgnY29sb3InKTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdpbnB1dCcpLnByb3AoJ3ZhbHVlJykpLnRvQmUoJyMwMGZmMTInKTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xufSk7XG4iXX0=