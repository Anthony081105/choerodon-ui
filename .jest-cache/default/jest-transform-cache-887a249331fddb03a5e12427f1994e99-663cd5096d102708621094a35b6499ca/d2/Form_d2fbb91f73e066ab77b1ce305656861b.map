{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/form/Form.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, {\n  Children,\n  createElement,\n  FormEvent,\n  FormEventHandler,\n  isValidElement,\n  ReactElement,\n  ReactNode,\n} from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { observer } from 'mobx-react';\nimport { action as mobxAction, computed, isArrayLike, observable, runInAction } from 'mobx';\nimport omit from 'lodash/omit';\nimport isNumber from 'lodash/isNumber';\nimport isString from 'lodash/isString';\nimport noop from 'lodash/noop';\nimport defaultTo from 'lodash/defaultTo';\nimport { AxiosInstance } from 'axios';\nimport Responsive from 'choerodon-ui/lib/responsive/Responsive';\nimport { getConfig, getProPrefixCls } from 'choerodon-ui/lib/configure';\nimport { pxToRem } from 'choerodon-ui/lib/_util/UnitConvertor';\nimport axios from '../axios';\nimport autobind from '../_util/autobind';\nimport { FormField, FormFieldProps, getFieldsById } from '../field/FormField';\nimport FormContext from './FormContext';\nimport DataSetComponent, { DataSetComponentProps } from '../data-set/DataSetComponent';\nimport DataSet from '../data-set/DataSet';\nimport Record from '../data-set/Record';\nimport { LabelAlign, LabelLayout, ResponsiveKeys } from './enum';\nimport {\n  defaultColumns,\n  defaultLabelWidth,\n  FIELD_SUFFIX,\n  getProperty,\n  normalizeLabelWidth,\n} from './utils';\n\n/**\n * 表单name生成器\n */\nconst NameGen: IterableIterator<string> = (function*(start: number) {\n  while (true) {\n    start += 1;\n    yield `form-${start}`;\n  }\n})(0);\n\nexport type LabelWidth = number | number[];\n\nexport type LabelWidthType = LabelWidth | { [key in ResponsiveKeys]: LabelWidth };\nexport type LabelAlignType = LabelAlign | { [key in ResponsiveKeys]: LabelAlign };\nexport type LabelLayoutType = LabelLayout | { [key in ResponsiveKeys]: LabelLayout };\nexport type ColumnsType = number | { [key in ResponsiveKeys]: number };\n\nexport interface FormProps extends DataSetComponentProps {\n  /**\n   * 表单提交请求地址\n   */\n  action?: string;\n  /**\n   * 表单提交的HTTP Method\n   * 可选值：POST | GET\n   * @default POST\n   */\n  method?: string;\n  /**\n   * 表单提交的目标\n   * 当表单设置了设置target且没有dataSet时作浏览器默认提交，否则作Ajax提交\n   */\n  target?: string;\n  /**\n   * Ajax提交时的参数回调\n   */\n  processParams?: (e: FormEvent<any>) => any;\n  /**\n   * 内部控件的标签的宽度\n   */\n  labelWidth?: LabelWidthType;\n  /**\n   * 标签文字对齐方式\n   * 可选值： 'left' | 'center' | 'right'\n   * @default right;\n   */\n  labelAlign?: LabelAlignType;\n  /**\n   * 标签位置\n   * 可选值： 'horizontal' | 'vertical' | 'placeholder' | 'none'\n   */\n  labelLayout?: LabelLayoutType;\n  /**\n   * 表单列数\n   */\n  columns?: ColumnsType;\n  /**\n   * 表单头，若提供则同时显示表单头和表单头下方的分隔线\n   *\n   * @type {string} 暂定为string方便写样式\n   * @memberof FormProps\n   */\n  header?: string;\n  /**\n   * 对照record在DataSet中的index\n   * @default dataSet.currentIndex\n   */\n  dataIndex?: number;\n  /**\n   * 对照record\n   * 优先级高于dataSet和dataIndex\n   */\n  record?: Record;\n  /**\n   * 提交回调\n   */\n  onSubmit?: FormEventHandler<any>;\n  /**\n   * 重置回调\n   */\n  onReset?: FormEventHandler<any>;\n  /**\n   * 提交成功回调\n   */\n  onSuccess?: (resp: any) => void;\n  /**\n   * 提交失败回调\n   */\n  onError?: (error: Error) => void;\n  axios?: AxiosInstance;\n}\n\nconst labelWidthPropTypes = PropTypes.oneOfType([\n  PropTypes.number,\n  PropTypes.arrayOf(PropTypes.number),\n]);\nconst labelAlignPropTypes = PropTypes.oneOf([LabelAlign.left, LabelAlign.center, LabelAlign.right]);\nconst labelLayoutPropTypes = PropTypes.oneOf([\n  LabelLayout.horizontal,\n  LabelLayout.vertical,\n  LabelLayout.placeholder,\n  LabelLayout.float,\n]);\n\n@observer\nexport default class Form extends DataSetComponent<FormProps> {\n  static displayName = 'Form';\n\n  static propTypes = {\n    /**\n     * 表单提交请求地址\n     */\n    action: PropTypes.string,\n    /**\n     * 表单提交的HTTP Method\n     * 可选值：POST | GET\n     * @default POST\n     */\n    method: PropTypes.string,\n    /**\n     * 表单提交的目标\n     * 当表单设置了设置target且没有dataSet时作浏览器默认提交，否则作Ajax提交\n     */\n    target: PropTypes.string,\n    /**\n     * Ajax提交时的参数回调\n     */\n    processParams: PropTypes.func,\n    /**\n     * 内部控件的标签的宽度\n     */\n    labelWidth: PropTypes.oneOfType([\n      labelWidthPropTypes,\n      PropTypes.shape({\n        [ResponsiveKeys.xs]: labelWidthPropTypes,\n        [ResponsiveKeys.sm]: labelWidthPropTypes,\n        [ResponsiveKeys.md]: labelWidthPropTypes,\n        [ResponsiveKeys.lg]: labelWidthPropTypes,\n        [ResponsiveKeys.xl]: labelWidthPropTypes,\n        [ResponsiveKeys.xxl]: labelWidthPropTypes,\n      }),\n    ]),\n    /**\n     * 标签文字对齐方式\n     * 可选值： 'left' | 'center' | 'right'\n     */\n    labelAlign: PropTypes.oneOfType([\n      labelAlignPropTypes,\n      PropTypes.shape({\n        [ResponsiveKeys.xs]: labelAlignPropTypes,\n        [ResponsiveKeys.sm]: labelAlignPropTypes,\n        [ResponsiveKeys.md]: labelAlignPropTypes,\n        [ResponsiveKeys.lg]: labelAlignPropTypes,\n        [ResponsiveKeys.xl]: labelAlignPropTypes,\n        [ResponsiveKeys.xxl]: labelAlignPropTypes,\n      }),\n    ]),\n    /**\n     * 标签位置\n     * 可选值： 'horizontal' | 'vertical' | 'placeholder' | 'float' | 'none'\n     */\n    labelLayout: PropTypes.oneOfType([\n      labelLayoutPropTypes,\n      PropTypes.shape({\n        [ResponsiveKeys.xs]: labelLayoutPropTypes,\n        [ResponsiveKeys.sm]: labelLayoutPropTypes,\n        [ResponsiveKeys.md]: labelLayoutPropTypes,\n        [ResponsiveKeys.lg]: labelLayoutPropTypes,\n        [ResponsiveKeys.xl]: labelLayoutPropTypes,\n        [ResponsiveKeys.xxl]: labelLayoutPropTypes,\n      }),\n    ]),\n    /**\n     * 表单列数\n     */\n    columns: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.shape({\n        [ResponsiveKeys.xs]: PropTypes.number,\n        [ResponsiveKeys.sm]: PropTypes.number,\n        [ResponsiveKeys.md]: PropTypes.number,\n        [ResponsiveKeys.lg]: PropTypes.number,\n        [ResponsiveKeys.xl]: PropTypes.number,\n        [ResponsiveKeys.xxl]: PropTypes.number,\n      }),\n    ]),\n    /**\n     * 表单头\n     */\n    header: PropTypes.string,\n    /**\n     * 提交回调\n     */\n    onSubmit: PropTypes.func,\n    /**\n     * 重置回调\n     */\n    onReset: PropTypes.func,\n    /**\n     * 提交成功回调\n     */\n    onSuccess: PropTypes.func,\n    /**\n     * 提交失败回调\n     */\n    onError: PropTypes.func,\n    ...DataSetComponent.propTypes,\n  };\n\n  static defaultProps = {\n    suffixCls: 'form',\n    columns: defaultColumns,\n    labelWidth: defaultLabelWidth,\n  };\n\n  static contextType = FormContext;\n\n  fields: FormField<FormFieldProps>[] = [];\n\n  @observable responsiveItems: any[];\n\n  name = NameGen.next().value;\n\n  constructor(props, context) {\n    super(props, context);\n    runInAction(() => {\n      this.responsiveItems = [];\n    });\n  }\n\n  @computed\n  get axios(): AxiosInstance {\n    return this.observableProps.axios || getConfig('axios') || axios;\n  }\n\n  @computed\n  get dataSet(): DataSet | undefined {\n    const { record } = this;\n    if (record) {\n      return record.dataSet;\n    }\n    return this.observableProps.dataSet;\n  }\n\n  @computed\n  get record(): Record | undefined {\n    const { record, dataSet, dataIndex } = this.observableProps;\n    if (record) {\n      return record;\n    }\n    if (dataSet) {\n      if (isNumber(dataIndex)) {\n        return dataSet.get(dataIndex);\n      }\n      return dataSet.current;\n    }\n    return undefined;\n  }\n\n  @computed\n  get dataIndex(): number | undefined {\n    return this.observableProps.dataIndex;\n  }\n\n  @computed\n  get columns(): number {\n    const { columns } = this.observableProps;\n    if (isNumber(columns)) {\n      return columns;\n    }\n    if (columns) {\n      const responsiveColumns = this.responsiveItems[0];\n      if (responsiveColumns) {\n        return responsiveColumns;\n      }\n    }\n    return defaultColumns;\n  }\n\n  @computed\n  get labelWidth(): LabelWidth {\n    const { labelWidth } = this.observableProps;\n    if (isNumber(labelWidth) || isArrayLike(labelWidth)) {\n      return labelWidth;\n    }\n    if (labelWidth) {\n      const responsiveWidth = this.responsiveItems[1];\n      if (responsiveWidth !== undefined) {\n        return responsiveWidth;\n      }\n    }\n    return defaultLabelWidth;\n  }\n\n  @computed\n  get labelAlign(): LabelAlign {\n    const { labelAlign } = this.observableProps;\n    const defaultLabelAlign =\n      this.labelLayout === LabelLayout.vertical ? LabelAlign.left : LabelAlign.right;\n    if (isString(labelAlign)) {\n      return labelAlign as LabelAlign;\n    }\n    if (labelAlign) {\n      const responsiveAlign = this.responsiveItems[2];\n      if (responsiveAlign) {\n        return responsiveAlign;\n      }\n    }\n    return defaultLabelAlign;\n  }\n\n  @computed\n  get labelLayout(): LabelLayout {\n    const defaultLabelLayout = (getConfig('labelLayout') as LabelLayout) || LabelLayout.horizontal;\n    const { labelLayout } = this.observableProps;\n    if (isString(labelLayout)) {\n      return labelLayout as LabelLayout;\n    }\n    if (labelLayout) {\n      const responsiveLabelLayout = this.responsiveItems[3];\n      if (responsiveLabelLayout) {\n        return responsiveLabelLayout;\n      }\n    }\n    return defaultLabelLayout;\n  }\n\n  @computed\n  get pristine(): boolean {\n    return this.observableProps.pristine;\n  }\n\n  isDisabled() {\n    return super.isDisabled() || this.context.disabled;\n  }\n\n  getObservableProps(props, context) {\n    return {\n      dataSet: 'dataSet' in props ? props.dataSet : context.dataSet,\n      record: 'record' in props ? props.record : context.record,\n      dataIndex: defaultTo(props.dataIndex, context.dataIndex),\n      labelLayout: 'labelLayout' in props ? props.labelLayout : context.labelLayout,\n      labelAlign: 'labelAlign' in props ? props.labelAlign : context.labelAlign,\n      labelWidth: defaultTo(props.labelWidth, context.labelWidth),\n      pristine: 'pristine' in props ? props.pristine : context.pristine,\n      columns: props.columns,\n    };\n  }\n\n  getOtherProps() {\n    const otherProps = omit(super.getOtherProps(), [\n      'record',\n      'dataIndex',\n      'onSuccess',\n      'onError',\n      'processParams',\n      'labelWidth',\n      'labelAlign',\n      'labelLayout',\n      'columns',\n      'pristine',\n      'axios',\n    ]);\n    otherProps.onSubmit = this.handleSubmit;\n    otherProps.onReset = this.handleReset;\n    if (!otherProps.name) {\n      otherProps.name = this.name;\n    }\n    return otherProps;\n  }\n\n  getHeader(): ReactNode {\n    const {\n      props: { header },\n      prefixCls,\n    } = this;\n    if (header) {\n      return (\n        <div key=\"form-header\" className={`${prefixCls}-header`}>\n          {header}\n        </div>\n      );\n    }\n  }\n\n  getClassName(...props): string | undefined {\n    const { prefixCls, labelLayout } = this;\n    return super.getClassName({\n      ...props,\n      [`${prefixCls}-float-label`]: labelLayout === LabelLayout.float,\n    });\n  }\n\n  rasterizedChildren() {\n    const {\n      dataSet,\n      record,\n      columns,\n      labelLayout,\n      labelAlign,\n      props: { children },\n    } = this;\n    const prefixCls = getProPrefixCls(FIELD_SUFFIX);\n    const labelWidth = normalizeLabelWidth(this.labelWidth, columns);\n    const rows: ReactElement<any>[] = [];\n    let cols: ReactElement<any>[] = [];\n    let rowIndex = 0;\n    let colIndex = 0;\n    const matrix: (boolean | undefined)[][] = [[]];\n    let noLabel = true;\n    const childrenArray: ReactElement<any>[] = [];\n    Children.forEach(children, child => {\n      if (isValidElement(child)) {\n        if (\n          noLabel === true &&\n          labelLayout === LabelLayout.horizontal &&\n          getProperty(child.props, 'label', dataSet, record)\n        ) {\n          noLabel = false;\n        }\n        childrenArray.push(child);\n      }\n    });\n\n    function completeLine() {\n      if (cols.length) {\n        rows.push((<tr key={`row-${rowIndex}`}>{cols}</tr>));\n        cols = [];\n      }\n      rowIndex++;\n      colIndex = 0;\n      matrix[rowIndex] = matrix[rowIndex] || [];\n    }\n\n    for (let index = 0, len = childrenArray.length; index < len; ) {\n      const { props, key, type } = childrenArray[index];\n      const label = getProperty(props, 'label', dataSet, record);\n      const fieldLabelWidth = getProperty(props, 'labelWidth', dataSet, record);\n      const required = getProperty(props, 'required', dataSet, record);\n      const {\n        rowSpan = 1,\n        colSpan = 1,\n        newLine,\n        className,\n        placeholder,\n        ...otherProps\n      } = props as any;\n      let newColSpan = colSpan;\n      const currentRow = matrix[rowIndex];\n      if (newLine) {\n        if (colIndex !== 0) {\n          completeLine();\n          continue;\n        }\n      }\n      while (currentRow[colIndex]) {\n        colIndex++;\n      }\n      if (colIndex >= columns) {\n        completeLine();\n        continue;\n      }\n      if (newColSpan + colIndex > columns) {\n        newColSpan = columns - colIndex;\n      }\n      for (let i = colIndex, k = colIndex + newColSpan; i < k; i++) {\n        if (currentRow[i]) {\n          newColSpan = i - colIndex;\n          break;\n        }\n      }\n      for (let i = rowIndex; i < rowSpan + rowIndex; i++) {\n        for (let j = colIndex, k = newColSpan + colIndex; j < k; j++) {\n          if (!matrix[i]) {\n            matrix[i] = [];\n          }\n          matrix[i][j] = true;\n        }\n      }\n      const isOutput =\n        labelLayout === LabelLayout.horizontal && (type as any).displayName === 'Output';\n      const labelClassName = classNames(`${prefixCls}-label`, `${prefixCls}-label-${labelAlign}`, {\n        [`${prefixCls}-required`]: required,\n        [`${prefixCls}-label-vertical`]: labelLayout === LabelLayout.vertical,\n        [`${prefixCls}-label-output`]: isOutput,\n      });\n      const wrapperClassName = classNames(`${prefixCls}-wrapper`, {\n        [`${prefixCls}-output`]: isOutput,\n      });\n      if (!noLabel) {\n        if (!isNaN(fieldLabelWidth)) {\n          labelWidth[colIndex] = Math.max(labelWidth[colIndex], fieldLabelWidth);\n        }\n        cols.push(\n          <td\n            key={`row-${rowIndex}-col-${colIndex}-label`}\n            className={labelClassName}\n            rowSpan={rowSpan}\n          >\n            <label title={isString(label) ? label : ''}>\n              {label}\n            </label>\n          </td>,\n        );\n      }\n      const fieldElementProps: any = {\n        key,\n        className: classNames(prefixCls, className),\n        placeholder: label && labelLayout === LabelLayout.placeholder ? label : placeholder,\n        ...otherProps,\n      };\n      if (!isString(type)) {\n        fieldElementProps.rowIndex = rowIndex;\n        fieldElementProps.colIndex = colIndex;\n      }\n      cols.push(\n        <td\n          key={`row-${rowIndex}-col-${colIndex}-field`}\n          colSpan={noLabel ? newColSpan : newColSpan * 2 - 1}\n          rowSpan={rowSpan}\n        >\n          {labelLayout === LabelLayout.vertical && (\n            <label className={labelClassName}>{label}</label>\n          )}\n          <div className={wrapperClassName}>{createElement(type, fieldElementProps)}</div>\n        </td>,\n      );\n      if (index === len - 1) {\n        completeLine();\n      } else {\n        colIndex++;\n      }\n      index++;\n    }\n    cols = [];\n    if (!noLabel) {\n      for (let i = 0; i < columns; i++) {\n        cols.push(\n          <col key={`label-${i}`} style={{ width: pxToRem(labelWidth[i % columns]) }} />,\n          <col key={`wrapper-${i}`} />,\n        );\n      }\n    }\n    return [\n      this.getHeader(),\n      (<table key=\"form-body\">\n        {cols.length ? <colgroup>{cols}</colgroup> : undefined}\n        <tbody>{rows}</tbody>\n      </table>),\n    ];\n  }\n\n  render() {\n    const {\n      labelWidth,\n      labelAlign,\n      labelLayout,\n      pristine,\n      dataSet,\n      record,\n      dataIndex,\n      observableProps,\n    } = this;\n    const { formNode } = this.context;\n    const value = {\n      formNode: formNode || this,\n      dataSet,\n      dataIndex,\n      record,\n      labelWidth,\n      labelAlign,\n      labelLayout,\n      pristine,\n      disabled: this.isDisabled(),\n    };\n    let children: ReactNode = this.rasterizedChildren();\n    if (!formNode) {\n      children = (\n        <form {...this.getMergedProps()} noValidate>\n          {children}\n        </form>\n      );\n    }\n    return (\n      <Responsive\n        items={[\n          observableProps.columns,\n          observableProps.labelWidth,\n          observableProps.labelAlign,\n          observableProps.labelLayout,\n        ]}\n        onChange={this.handleResponsive}\n      >\n        <FormContext.Provider value={value}>{children}</FormContext.Provider>\n      </Responsive>\n    );\n  }\n\n  @autobind\n  @mobxAction\n  handleResponsive(items) {\n    this.responsiveItems = items;\n  }\n\n  @autobind\n  async handleSubmit(e) {\n    e.preventDefault();\n    e.persist();\n    if (await this.checkValidity()) {\n      const {\n        target,\n        action,\n        dataSet,\n        method,\n        processParams = noop,\n        onSuccess = noop,\n        onError = noop,\n        onSubmit = noop,\n      } = this.props;\n      onSubmit(e);\n      try {\n        if (dataSet) {\n          onSuccess(await dataSet.submit());\n        } else if (action) {\n          if (target && this.element) {\n            this.element.submit();\n          } else {\n            onSuccess(await this.axios[method || 'get'](action, processParams(e)));\n          }\n        }\n      } catch (error) {\n        onError(error);\n      }\n    }\n  }\n\n  @autobind\n  handleReset(e) {\n    const { onReset = noop } = this.props;\n    const { record } = this;\n    onReset(e);\n    if (!e.isDefaultPrevented()) {\n      if (record) {\n        record.reset();\n      } else {\n        this.getFields().forEach(field => field.reset());\n      }\n    }\n  }\n\n  checkValidity() {\n    const { dataSet } = this;\n    if (dataSet) {\n      if (!dataSet.length) {\n        dataSet.create();\n      }\n      return dataSet.validate();\n    }\n    return Promise.all(this.getFields().map(field => field.checkValidity())).then(results =>\n      results.every(result => result),\n    );\n  }\n\n  getFields(): FormField<FormFieldProps>[] {\n    const { id } = this.props;\n    if (id) {\n      return ([] as FormField<FormFieldProps>[]).concat(this.fields, getFieldsById(id));\n    }\n    return this.fields;\n  }\n\n  getField(name: string): FormField<FormFieldProps> | undefined {\n    return this.getFields().find(field => field.props.name === name);\n  }\n\n  addField(field: FormField<FormFieldProps>) {\n    this.fields.push(field);\n  }\n\n  removeField(field) {\n    const index = this.fields.indexOf(field);\n    if (index !== -1) {\n      this.fields.splice(index, 1);\n    }\n  }\n}\n"]}