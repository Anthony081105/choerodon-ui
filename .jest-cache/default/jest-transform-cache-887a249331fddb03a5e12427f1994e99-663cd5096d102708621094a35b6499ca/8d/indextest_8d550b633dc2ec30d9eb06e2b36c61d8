e4e0ec4b324986ec14bdc70c1a532ca5
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _ = _interopRequireDefault(require(".."));

var _numberData = _interopRequireDefault(require("./numberData"));

var _focusTest = _interopRequireDefault(require("../../../tests/shared/focusTest"));

var _mountTest = _interopRequireDefault(require("../../../tests/shared/mountTest"));

(0, _mountTest["default"])(_["default"]);
(0, _focusTest["default"])(_["default"]);
describe('NumberField-pro', function () {
  beforeEach(function () {
    jest.useFakeTimers();
  });
  afterEach(function () {
    jest.useRealTimers();
  });
  it('renders NumberField correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    expect(wrapper).toMatchSnapshot();
  });
  it('step renders correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    expect(wrapper.find('.c7n-pro-input-number-inner-button')).toHaveLength(0);
    wrapper.setProps({
      step: 1
    });
    wrapper.update();
    expect(wrapper.find('.c7n-pro-input-number-inner-button')).toHaveLength(1);
  });
  it('step should have different value', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 0.1,
      min: 0.1
    }));
    wrapper.setProps({
      step: 0.01
    });
    wrapper.update();
    wrapper.setProps({
      min: -1
    });
    wrapper.update();
    wrapper.setProps({
      step: 1.1
    });
    wrapper.update();
    wrapper.setProps({
      min: null
    });
    wrapper.update();
    expect(wrapper).toMatchSnapshot();
  });
  it('{step,min} null renders correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: null,
      min: null
    }));
    expect(wrapper).toMatchSnapshot();
    wrapper.setProps({
      step: 20
    });
    wrapper.update();
    wrapper.setProps({
      min: 20
    });
    wrapper.update();
    expect(wrapper).toMatchSnapshot();
  });
  it('step icon click renders correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      value: 18
    }));
    expect(wrapper.find('input').at(0).prop('value')).toBe('18');
    wrapper.setProps({
      value: '198'
    });
    wrapper.update();
    expect(wrapper.find('input').at(0).prop('value')).toBe('198');
    wrapper.setProps({
      value: '-1'
    });
    wrapper.update();
    expect(wrapper.find('input').at(0).prop('value')).toBe('-1');
    wrapper.setProps({
      value: '1'
    });
    wrapper.update();
    expect(wrapper.find('input').at(0).prop('value')).toBe('1');
    wrapper.setProps({
      value: '12'
    });
    wrapper.update();
    expect(wrapper.find('input').at(0).prop('value')).toBe('12');
    wrapper.setProps({
      value: null
    });
    wrapper.update();
    expect(wrapper.find('input').at(0).prop('value')).toBe('');
  });
  it('step multiple renders correctly', function () {
    var handleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      onChange: handleChange,
      step: 1,
      multiple: true,
      max: 10,
      min: 5
    }));
    expect(wrapper).toMatchSnapshot();
  });
  it('the range value should render correctly', function () {
    var handleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      range: ['start', 'end'],
      defaultValue: {
        start: 0,
        end: 4
      },
      placeholder: ['Range Start', 'Range End'],
      onChange: handleChange
    })); // expect(wrapper).toMatchSnapshot();

    expect(wrapper.find('.c7n-pro-input-number-range-start').at(0).prop('value')).toBe('0');
    expect(wrapper.find('.c7n-pro-input-number-range-end').at(0).prop('value')).toBe('4');
  });
  it('input should render readOnly correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], null));
    expect(wrapper.prop('readOnly')).toBe(false);
    wrapper.setProps({
      readOnly: true
    });
    wrapper.update();
    expect(wrapper.prop('readOnly')).toBe(true);
  });
  it('the input number should add when the {plus} icon clicked', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1,
      min: 0,
      max: 10
    }));
    wrapper.find('.c7n-pro-input-number-plus').at(0).simulate('mousedown');
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper).toMatchSnapshot();
  });
  it('the input number should reduce when the {minus} icon clicked', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1,
      min: -10,
      max: 0
    }));
    wrapper.find('.c7n-pro-input-number-minus').at(0).simulate('mousedown');
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper).toMatchSnapshot();
  });
  it('the input number should correctly add when the {plus} icon clicked and nonStrictStep', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 3,
      nonStrictStep: true,
      defaultValue: 5
    }));
    wrapper.find('.c7n-pro-input-number-plus').at(0).simulate('mousedown');
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('8');
  });
  it('the input number should correctly add when the {plus} icon clicked and no nonStrictStep', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 3,
      defaultValue: 5
    }));
    wrapper.find('.c7n-pro-input-number-plus').at(0).simulate('mousedown');
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('6');
  });
  it('the input number should show correctly when set formatter ', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1,
      defaultValue: 5000,
      formatter: function formatter(value) {
        return value;
      }
    }));
    var noFormatterWrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1,
      defaultValue: 5000
    }));
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('5000');
    expect(noFormatterWrapper.find('.c7n-pro-input-number').prop('value')).toBe('5,000');
  });
  it('the input number should show correctly when set formatterOptions ', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 0.1,
      defaultValue: 5000.3,
      formatterOptions: {
        options: {
          useGrouping: false
        }
      }
    }));
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('5000.3');
  });
  it('{min,step} should control the input value', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1.1,
      min: -0.3
    }));
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('');
    wrapper.find('.c7n-pro-input-number-minus').at(0).simulate('mousedown');
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('-0.3');
  });
  it('the restrictInput method render correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1.1,
      min: 0.3,
      max: 9
    }));
    wrapper.instance().restrictInput('8');
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-input-number').prop('value')).toBe('');
    wrapper.instance().step(true);
    jest.runOnlyPendingTimers();
    wrapper.update();
  });
  it('the keydown event should render keyCode { up, down } correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      step: 1
    }));
    wrapper.find('input').simulate('keydown', {
      keyCode: 38
    });
    jest.runOnlyPendingTimers();
    wrapper.find('input').simulate('keydown', {
      keyCode: 40
    });
    jest.runOnlyPendingTimers();
    wrapper.update();
    wrapper.find('input').simulate('keydown', {
      keyCode: 13
    });
    jest.runOnlyPendingTimers();
    wrapper.update();
    expect(wrapper).toMatchSnapshot();
  });
  it('the dataset value should render correctly', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_numberData["default"], null));
    expect(wrapper.find('NumberField').props().name).toEqual('age');
    expect(wrapper.find('input').props().value).toEqual('10,000,000');
    expect(wrapper).toMatchSnapshot();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRlc3QuanMiXSwibmFtZXMiOlsiTnVtYmVyRmllbGQiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJqZXN0IiwidXNlRmFrZVRpbWVycyIsImFmdGVyRWFjaCIsInVzZVJlYWxUaW1lcnMiLCJpdCIsIndyYXBwZXIiLCJleHBlY3QiLCJ0b01hdGNoU25hcHNob3QiLCJmaW5kIiwidG9IYXZlTGVuZ3RoIiwic2V0UHJvcHMiLCJzdGVwIiwidXBkYXRlIiwibWluIiwiYXQiLCJwcm9wIiwidG9CZSIsInZhbHVlIiwiaGFuZGxlQ2hhbmdlIiwiZm4iLCJzdGFydCIsImVuZCIsInJlYWRPbmx5Iiwic2ltdWxhdGUiLCJydW5Pbmx5UGVuZGluZ1RpbWVycyIsIm5vRm9ybWF0dGVyV3JhcHBlciIsIm9wdGlvbnMiLCJ1c2VHcm91cGluZyIsImluc3RhbmNlIiwicmVzdHJpY3RJbnB1dCIsImtleUNvZGUiLCJwcm9wcyIsIm5hbWUiLCJ0b0VxdWFsIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsMkJBQVVBLFlBQVY7QUFDQSwyQkFBVUEsWUFBVjtBQUVBQyxRQUFRLENBQUMsaUJBQUQsRUFBb0IsWUFBTTtBQUNoQ0MsRUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDZkMsSUFBQUEsSUFBSSxDQUFDQyxhQUFMO0FBQ0QsR0FGUyxDQUFWO0FBSUFDLEVBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2RGLElBQUFBLElBQUksQ0FBQ0csYUFBTDtBQUNELEdBRlEsQ0FBVDtBQUlBQyxFQUFBQSxFQUFFLENBQUMsK0JBQUQsRUFBa0MsWUFBTTtBQUN4QyxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsWUFBRCxPQUFOLENBQWhCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBRCxDQUFOLENBQWdCRSxlQUFoQjtBQUNELEdBSEMsQ0FBRjtBQUtBSCxFQUFBQSxFQUFFLENBQUMsd0JBQUQsRUFBMkIsWUFBTTtBQUNqQyxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsWUFBRCxPQUFOLENBQWhCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRyxJQUFSLENBQWEsb0NBQWIsQ0FBRCxDQUFOLENBQTJEQyxZQUEzRCxDQUF3RSxDQUF4RTtBQUNBSixJQUFBQSxPQUFPLENBQUNLLFFBQVIsQ0FBaUI7QUFBRUMsTUFBQUEsSUFBSSxFQUFFO0FBQVIsS0FBakI7QUFDQU4sSUFBQUEsT0FBTyxDQUFDTyxNQUFSO0FBQ0FOLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRyxJQUFSLENBQWEsb0NBQWIsQ0FBRCxDQUFOLENBQTJEQyxZQUEzRCxDQUF3RSxDQUF4RTtBQUNELEdBTkMsQ0FBRjtBQVFBTCxFQUFBQSxFQUFFLENBQUMsa0NBQUQsRUFBcUMsWUFBTTtBQUMzQyxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsWUFBRDtBQUFhLE1BQUEsSUFBSSxFQUFFLEdBQW5CO0FBQXdCLE1BQUEsR0FBRyxFQUFFO0FBQTdCLE1BQU4sQ0FBaEI7QUFDQUEsSUFBQUEsT0FBTyxDQUFDSyxRQUFSLENBQWlCO0FBQUVDLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQWpCO0FBQ0FOLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBUCxJQUFBQSxPQUFPLENBQUNLLFFBQVIsQ0FBaUI7QUFBRUcsTUFBQUEsR0FBRyxFQUFFLENBQUM7QUFBUixLQUFqQjtBQUNBUixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQVAsSUFBQUEsT0FBTyxDQUFDSyxRQUFSLENBQWlCO0FBQUVDLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQWpCO0FBQ0FOLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBUCxJQUFBQSxPQUFPLENBQUNLLFFBQVIsQ0FBaUI7QUFBRUcsTUFBQUEsR0FBRyxFQUFFO0FBQVAsS0FBakI7QUFDQVIsSUFBQUEsT0FBTyxDQUFDTyxNQUFSO0FBQ0FOLElBQUFBLE1BQU0sQ0FBQ0QsT0FBRCxDQUFOLENBQWdCRSxlQUFoQjtBQUNELEdBWEMsQ0FBRjtBQWFBSCxFQUFBQSxFQUFFLENBQUMsbUNBQUQsRUFBc0MsWUFBTTtBQUM1QyxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsWUFBRDtBQUFhLE1BQUEsSUFBSSxFQUFFLElBQW5CO0FBQXlCLE1BQUEsR0FBRyxFQUFFO0FBQTlCLE1BQU4sQ0FBaEI7QUFDQUMsSUFBQUEsTUFBTSxDQUFDRCxPQUFELENBQU4sQ0FBZ0JFLGVBQWhCO0FBQ0FGLElBQUFBLE9BQU8sQ0FBQ0ssUUFBUixDQUFpQjtBQUFFQyxNQUFBQSxJQUFJLEVBQUU7QUFBUixLQUFqQjtBQUNBTixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQVAsSUFBQUEsT0FBTyxDQUFDSyxRQUFSLENBQWlCO0FBQUVHLE1BQUFBLEdBQUcsRUFBRTtBQUFQLEtBQWpCO0FBQ0FSLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBTixJQUFBQSxNQUFNLENBQUNELE9BQUQsQ0FBTixDQUFnQkUsZUFBaEI7QUFDRCxHQVJDLENBQUY7QUFVQUgsRUFBQUEsRUFBRSxDQUFDLG1DQUFELEVBQXNDLFlBQU07QUFDNUMsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLFlBQUQ7QUFBYSxNQUFBLEtBQUssRUFBRTtBQUFwQixNQUFOLENBQWhCO0FBQ0FDLElBQUFBLE1BQU0sQ0FDSkQsT0FBTyxDQUNKRyxJQURILENBQ1EsT0FEUixFQUVHTSxFQUZILENBRU0sQ0FGTixFQUdHQyxJQUhILENBR1EsT0FIUixDQURJLENBQU4sQ0FLRUMsSUFMRixDQUtPLElBTFA7QUFNQVgsSUFBQUEsT0FBTyxDQUFDSyxRQUFSLENBQWlCO0FBQUVPLE1BQUFBLEtBQUssRUFBRTtBQUFULEtBQWpCO0FBQ0FaLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBTixJQUFBQSxNQUFNLENBQ0pELE9BQU8sQ0FDSkcsSUFESCxDQUNRLE9BRFIsRUFFR00sRUFGSCxDQUVNLENBRk4sRUFHR0MsSUFISCxDQUdRLE9BSFIsQ0FESSxDQUFOLENBS0VDLElBTEYsQ0FLTyxLQUxQO0FBTUFYLElBQUFBLE9BQU8sQ0FBQ0ssUUFBUixDQUFpQjtBQUFFTyxNQUFBQSxLQUFLLEVBQUU7QUFBVCxLQUFqQjtBQUNBWixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQU4sSUFBQUEsTUFBTSxDQUNKRCxPQUFPLENBQ0pHLElBREgsQ0FDUSxPQURSLEVBRUdNLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLElBSEgsQ0FHUSxPQUhSLENBREksQ0FBTixDQUtFQyxJQUxGLENBS08sSUFMUDtBQU1BWCxJQUFBQSxPQUFPLENBQUNLLFFBQVIsQ0FBaUI7QUFBRU8sTUFBQUEsS0FBSyxFQUFFO0FBQVQsS0FBakI7QUFDQVosSUFBQUEsT0FBTyxDQUFDTyxNQUFSO0FBQ0FOLElBQUFBLE1BQU0sQ0FDSkQsT0FBTyxDQUNKRyxJQURILENBQ1EsT0FEUixFQUVHTSxFQUZILENBRU0sQ0FGTixFQUdHQyxJQUhILENBR1EsT0FIUixDQURJLENBQU4sQ0FLRUMsSUFMRixDQUtPLEdBTFA7QUFNQVgsSUFBQUEsT0FBTyxDQUFDSyxRQUFSLENBQWlCO0FBQUVPLE1BQUFBLEtBQUssRUFBRTtBQUFULEtBQWpCO0FBQ0FaLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBTixJQUFBQSxNQUFNLENBQ0pELE9BQU8sQ0FDSkcsSUFESCxDQUNRLE9BRFIsRUFFR00sRUFGSCxDQUVNLENBRk4sRUFHR0MsSUFISCxDQUdRLE9BSFIsQ0FESSxDQUFOLENBS0VDLElBTEYsQ0FLTyxJQUxQO0FBTUFYLElBQUFBLE9BQU8sQ0FBQ0ssUUFBUixDQUFpQjtBQUFFTyxNQUFBQSxLQUFLLEVBQUU7QUFBVCxLQUFqQjtBQUNBWixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQU4sSUFBQUEsTUFBTSxDQUNKRCxPQUFPLENBQ0pHLElBREgsQ0FDUSxPQURSLEVBRUdNLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLElBSEgsQ0FHUSxPQUhSLENBREksQ0FBTixDQUtFQyxJQUxGLENBS08sRUFMUDtBQU1ELEdBaERDLENBQUY7QUFrREFaLEVBQUFBLEVBQUUsQ0FBQyxpQ0FBRCxFQUFvQyxZQUFNO0FBQzFDLFFBQU1jLFlBQVksR0FBR2xCLElBQUksQ0FBQ21CLEVBQUwsRUFBckI7QUFDQSxRQUFNZCxPQUFPLEdBQUcsbUJBQ2QsZ0NBQUMsWUFBRDtBQUFhLE1BQUEsUUFBUSxFQUFFYSxZQUF2QjtBQUFxQyxNQUFBLElBQUksRUFBRSxDQUEzQztBQUE4QyxNQUFBLFFBQVEsTUFBdEQ7QUFBdUQsTUFBQSxHQUFHLEVBQUUsRUFBNUQ7QUFBZ0UsTUFBQSxHQUFHLEVBQUU7QUFBckUsTUFEYyxDQUFoQjtBQUdBWixJQUFBQSxNQUFNLENBQUNELE9BQUQsQ0FBTixDQUFnQkUsZUFBaEI7QUFDRCxHQU5DLENBQUY7QUFRQUgsRUFBQUEsRUFBRSxDQUFDLHlDQUFELEVBQTRDLFlBQU07QUFDbEQsUUFBTWMsWUFBWSxHQUFHbEIsSUFBSSxDQUFDbUIsRUFBTCxFQUFyQjtBQUNBLFFBQU1kLE9BQU8sR0FBRyxtQkFDZCxnQ0FBQyxZQUFEO0FBQ0UsTUFBQSxLQUFLLEVBQUUsQ0FBQyxPQUFELEVBQVUsS0FBVixDQURUO0FBRUUsTUFBQSxZQUFZLEVBQUU7QUFBRWUsUUFBQUEsS0FBSyxFQUFFLENBQVQ7QUFBWUMsUUFBQUEsR0FBRyxFQUFFO0FBQWpCLE9BRmhCO0FBR0UsTUFBQSxXQUFXLEVBQUUsQ0FBQyxhQUFELEVBQWdCLFdBQWhCLENBSGY7QUFJRSxNQUFBLFFBQVEsRUFBRUg7QUFKWixNQURjLENBQWhCLENBRmtELENBVWxEOztBQUNBWixJQUFBQSxNQUFNLENBQ0pELE9BQU8sQ0FDSkcsSUFESCxDQUNRLG1DQURSLEVBRUdNLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLElBSEgsQ0FHUSxPQUhSLENBREksQ0FBTixDQUtFQyxJQUxGLENBS08sR0FMUDtBQU1BVixJQUFBQSxNQUFNLENBQ0pELE9BQU8sQ0FDSkcsSUFESCxDQUNRLGlDQURSLEVBRUdNLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLElBSEgsQ0FHUSxPQUhSLENBREksQ0FBTixDQUtFQyxJQUxGLENBS08sR0FMUDtBQU1ELEdBdkJDLENBQUY7QUF5QkFaLEVBQUFBLEVBQUUsQ0FBQyx3Q0FBRCxFQUEyQyxZQUFNO0FBQ2pELFFBQU1DLE9BQU8sR0FBRyxtQkFBTSxnQ0FBQyxZQUFELE9BQU4sQ0FBaEI7QUFDQUMsSUFBQUEsTUFBTSxDQUFDRCxPQUFPLENBQUNVLElBQVIsQ0FBYSxVQUFiLENBQUQsQ0FBTixDQUFpQ0MsSUFBakMsQ0FBc0MsS0FBdEM7QUFDQVgsSUFBQUEsT0FBTyxDQUFDSyxRQUFSLENBQWlCO0FBQUVZLE1BQUFBLFFBQVEsRUFBRTtBQUFaLEtBQWpCO0FBQ0FqQixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQU4sSUFBQUEsTUFBTSxDQUFDRCxPQUFPLENBQUNVLElBQVIsQ0FBYSxVQUFiLENBQUQsQ0FBTixDQUFpQ0MsSUFBakMsQ0FBc0MsSUFBdEM7QUFDRCxHQU5DLENBQUY7QUFRQVosRUFBQUEsRUFBRSxDQUFDLDBEQUFELEVBQTZELFlBQU07QUFDbkUsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLFlBQUQ7QUFBYSxNQUFBLElBQUksRUFBRSxDQUFuQjtBQUFzQixNQUFBLEdBQUcsRUFBRSxDQUEzQjtBQUE4QixNQUFBLEdBQUcsRUFBRTtBQUFuQyxNQUFOLENBQWhCO0FBQ0FBLElBQUFBLE9BQU8sQ0FDSkcsSUFESCxDQUNRLDRCQURSLEVBRUdNLEVBRkgsQ0FFTSxDQUZOLEVBR0dTLFFBSEgsQ0FHWSxXQUhaO0FBSUF2QixJQUFBQSxJQUFJLENBQUN3QixvQkFBTDtBQUNBbkIsSUFBQUEsT0FBTyxDQUFDTyxNQUFSO0FBQ0FOLElBQUFBLE1BQU0sQ0FBQ0QsT0FBRCxDQUFOLENBQWdCRSxlQUFoQjtBQUNELEdBVEMsQ0FBRjtBQVdBSCxFQUFBQSxFQUFFLENBQUMsOERBQUQsRUFBaUUsWUFBTTtBQUN2RSxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsWUFBRDtBQUFhLE1BQUEsSUFBSSxFQUFFLENBQW5CO0FBQXNCLE1BQUEsR0FBRyxFQUFFLENBQUMsRUFBNUI7QUFBZ0MsTUFBQSxHQUFHLEVBQUU7QUFBckMsTUFBTixDQUFoQjtBQUNBQSxJQUFBQSxPQUFPLENBQ0pHLElBREgsQ0FDUSw2QkFEUixFQUVHTSxFQUZILENBRU0sQ0FGTixFQUdHUyxRQUhILENBR1ksV0FIWjtBQUlBdkIsSUFBQUEsSUFBSSxDQUFDd0Isb0JBQUw7QUFDQW5CLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBTixJQUFBQSxNQUFNLENBQUNELE9BQUQsQ0FBTixDQUFnQkUsZUFBaEI7QUFDRCxHQVRDLENBQUY7QUFZQUgsRUFBQUEsRUFBRSxDQUFDLHNGQUFELEVBQXlGLFlBQU07QUFDL0YsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLFlBQUQ7QUFBYSxNQUFBLElBQUksRUFBRSxDQUFuQjtBQUFzQixNQUFBLGFBQWEsTUFBbkM7QUFBb0MsTUFBQSxZQUFZLEVBQUU7QUFBbEQsTUFBTixDQUFoQjtBQUNBQSxJQUFBQSxPQUFPLENBQ0pHLElBREgsQ0FDUSw0QkFEUixFQUVHTSxFQUZILENBRU0sQ0FGTixFQUdHUyxRQUhILENBR1ksV0FIWjtBQUlBdkIsSUFBQUEsSUFBSSxDQUFDd0Isb0JBQUw7QUFDQW5CLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBTixJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ0csSUFBUixDQUFhLHVCQUFiLEVBQXNDTyxJQUF0QyxDQUEyQyxPQUEzQyxDQUFELENBQU4sQ0FBNERDLElBQTVELENBQWlFLEdBQWpFO0FBQ0QsR0FUQyxDQUFGO0FBV0FaLEVBQUFBLEVBQUUsQ0FBQyx5RkFBRCxFQUE0RixZQUFNO0FBQ2xHLFFBQU1DLE9BQU8sR0FBRyxtQkFBTSxnQ0FBQyxZQUFEO0FBQWEsTUFBQSxJQUFJLEVBQUUsQ0FBbkI7QUFBc0IsTUFBQSxZQUFZLEVBQUU7QUFBcEMsTUFBTixDQUFoQjtBQUNBQSxJQUFBQSxPQUFPLENBQ0pHLElBREgsQ0FDUSw0QkFEUixFQUVHTSxFQUZILENBRU0sQ0FGTixFQUdHUyxRQUhILENBR1ksV0FIWjtBQUlBdkIsSUFBQUEsSUFBSSxDQUFDd0Isb0JBQUw7QUFDQW5CLElBQUFBLE9BQU8sQ0FBQ08sTUFBUjtBQUNBTixJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ0csSUFBUixDQUFhLHVCQUFiLEVBQXNDTyxJQUF0QyxDQUEyQyxPQUEzQyxDQUFELENBQU4sQ0FBNERDLElBQTVELENBQWlFLEdBQWpFO0FBQ0QsR0FUQyxDQUFGO0FBV0FaLEVBQUFBLEVBQUUsQ0FBQyw0REFBRCxFQUErRCxZQUFNO0FBQ3JFLFFBQU1DLE9BQU8sR0FBRyxtQkFBTSxnQ0FBQyxZQUFEO0FBQWEsTUFBQSxJQUFJLEVBQUUsQ0FBbkI7QUFBc0IsTUFBQSxZQUFZLEVBQUUsSUFBcEM7QUFBMEMsTUFBQSxTQUFTLEVBQUUsbUJBQUNZLEtBQUQ7QUFBQSxlQUFTQSxLQUFUO0FBQUE7QUFBckQsTUFBTixDQUFoQjtBQUNBLFFBQU1RLGtCQUFrQixHQUFHLG1CQUFNLGdDQUFDLFlBQUQ7QUFBYSxNQUFBLElBQUksRUFBRSxDQUFuQjtBQUFzQixNQUFBLFlBQVksRUFBRTtBQUFwQyxNQUFOLENBQTNCO0FBRUFuQixJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ0csSUFBUixDQUFhLHVCQUFiLEVBQXNDTyxJQUF0QyxDQUEyQyxPQUEzQyxDQUFELENBQU4sQ0FBNERDLElBQTVELENBQWlFLE1BQWpFO0FBQ0FWLElBQUFBLE1BQU0sQ0FBQ21CLGtCQUFrQixDQUFDakIsSUFBbkIsQ0FBd0IsdUJBQXhCLEVBQWlETyxJQUFqRCxDQUFzRCxPQUF0RCxDQUFELENBQU4sQ0FBdUVDLElBQXZFLENBQTRFLE9BQTVFO0FBRUQsR0FQQyxDQUFGO0FBU0FaLEVBQUFBLEVBQUUsQ0FBQyxtRUFBRCxFQUFzRSxZQUFNO0FBQzVFLFFBQU1DLE9BQU8sR0FBRyxtQkFBTSxnQ0FBQyxZQUFEO0FBQWEsTUFBQSxJQUFJLEVBQUUsR0FBbkI7QUFBd0IsTUFBQSxZQUFZLEVBQUUsTUFBdEM7QUFBOEMsTUFBQSxnQkFBZ0IsRUFBRTtBQUFDcUIsUUFBQUEsT0FBTyxFQUFDO0FBQUNDLFVBQUFBLFdBQVcsRUFBQztBQUFiO0FBQVQ7QUFBaEUsTUFBTixDQUFoQjtBQUNBckIsSUFBQUEsTUFBTSxDQUFDRCxPQUFPLENBQUNHLElBQVIsQ0FBYSx1QkFBYixFQUFzQ08sSUFBdEMsQ0FBMkMsT0FBM0MsQ0FBRCxDQUFOLENBQTREQyxJQUE1RCxDQUFpRSxRQUFqRTtBQUNELEdBSEMsQ0FBRjtBQU1BWixFQUFBQSxFQUFFLENBQUMsMkNBQUQsRUFBOEMsWUFBTTtBQUNwRCxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsWUFBRDtBQUFhLE1BQUEsSUFBSSxFQUFFLEdBQW5CO0FBQXdCLE1BQUEsR0FBRyxFQUFFLENBQUM7QUFBOUIsTUFBTixDQUFoQjtBQUNBQyxJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ0csSUFBUixDQUFhLHVCQUFiLEVBQXNDTyxJQUF0QyxDQUEyQyxPQUEzQyxDQUFELENBQU4sQ0FBNERDLElBQTVELENBQWlFLEVBQWpFO0FBQ0FYLElBQUFBLE9BQU8sQ0FDSkcsSUFESCxDQUNRLDZCQURSLEVBRUdNLEVBRkgsQ0FFTSxDQUZOLEVBR0dTLFFBSEgsQ0FHWSxXQUhaO0FBSUF2QixJQUFBQSxJQUFJLENBQUN3QixvQkFBTDtBQUNBbkIsSUFBQUEsT0FBTyxDQUFDTyxNQUFSO0FBQ0FOLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRyxJQUFSLENBQWEsdUJBQWIsRUFBc0NPLElBQXRDLENBQTJDLE9BQTNDLENBQUQsQ0FBTixDQUE0REMsSUFBNUQsQ0FBaUUsTUFBakU7QUFDRCxHQVZDLENBQUY7QUFXQVosRUFBQUEsRUFBRSxDQUFDLDJDQUFELEVBQThDLFlBQU07QUFDcEQsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLFlBQUQ7QUFBYSxNQUFBLElBQUksRUFBRSxHQUFuQjtBQUF3QixNQUFBLEdBQUcsRUFBRSxHQUE3QjtBQUFrQyxNQUFBLEdBQUcsRUFBRTtBQUF2QyxNQUFOLENBQWhCO0FBQ0FBLElBQUFBLE9BQU8sQ0FBQ3VCLFFBQVIsR0FBbUJDLGFBQW5CLENBQWlDLEdBQWpDO0FBQ0E3QixJQUFBQSxJQUFJLENBQUN3QixvQkFBTDtBQUNBbkIsSUFBQUEsT0FBTyxDQUFDTyxNQUFSO0FBQ0FOLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRyxJQUFSLENBQWEsdUJBQWIsRUFBc0NPLElBQXRDLENBQTJDLE9BQTNDLENBQUQsQ0FBTixDQUE0REMsSUFBNUQsQ0FBaUUsRUFBakU7QUFDQVgsSUFBQUEsT0FBTyxDQUFDdUIsUUFBUixHQUFtQmpCLElBQW5CLENBQXdCLElBQXhCO0FBQ0FYLElBQUFBLElBQUksQ0FBQ3dCLG9CQUFMO0FBQ0FuQixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDRCxHQVRDLENBQUY7QUFXQVIsRUFBQUEsRUFBRSxDQUFDLGdFQUFELEVBQW1FLFlBQU07QUFDekUsUUFBTUMsT0FBTyxHQUFHLG1CQUFNLGdDQUFDLFlBQUQ7QUFBYSxNQUFBLElBQUksRUFBRTtBQUFuQixNQUFOLENBQWhCO0FBQ0FBLElBQUFBLE9BQU8sQ0FBQ0csSUFBUixDQUFhLE9BQWIsRUFBc0JlLFFBQXRCLENBQStCLFNBQS9CLEVBQTBDO0FBQUVPLE1BQUFBLE9BQU8sRUFBRTtBQUFYLEtBQTFDO0FBQ0E5QixJQUFBQSxJQUFJLENBQUN3QixvQkFBTDtBQUNBbkIsSUFBQUEsT0FBTyxDQUFDRyxJQUFSLENBQWEsT0FBYixFQUFzQmUsUUFBdEIsQ0FBK0IsU0FBL0IsRUFBMEM7QUFBRU8sTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBMUM7QUFDQTlCLElBQUFBLElBQUksQ0FBQ3dCLG9CQUFMO0FBQ0FuQixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQVAsSUFBQUEsT0FBTyxDQUFDRyxJQUFSLENBQWEsT0FBYixFQUFzQmUsUUFBdEIsQ0FBK0IsU0FBL0IsRUFBMEM7QUFBRU8sTUFBQUEsT0FBTyxFQUFFO0FBQVgsS0FBMUM7QUFDQTlCLElBQUFBLElBQUksQ0FBQ3dCLG9CQUFMO0FBQ0FuQixJQUFBQSxPQUFPLENBQUNPLE1BQVI7QUFDQU4sSUFBQUEsTUFBTSxDQUFDRCxPQUFELENBQU4sQ0FBZ0JFLGVBQWhCO0FBQ0QsR0FYQyxDQUFGO0FBYUFILEVBQUFBLEVBQUUsQ0FBQywyQ0FBRCxFQUE4QyxZQUFNO0FBQ3BELFFBQU1DLE9BQU8sR0FBRyxtQkFBTSxnQ0FBQyxzQkFBRCxPQUFOLENBQWhCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRyxJQUFSLENBQWEsYUFBYixFQUE0QnVCLEtBQTVCLEdBQW9DQyxJQUFyQyxDQUFOLENBQWlEQyxPQUFqRCxDQUF5RCxLQUF6RDtBQUNBM0IsSUFBQUEsTUFBTSxDQUFDRCxPQUFPLENBQUNHLElBQVIsQ0FBYSxPQUFiLEVBQXNCdUIsS0FBdEIsR0FBOEJkLEtBQS9CLENBQU4sQ0FBNENnQixPQUE1QyxDQUFvRCxZQUFwRDtBQUNBM0IsSUFBQUEsTUFBTSxDQUFDRCxPQUFELENBQU4sQ0FBZ0JFLGVBQWhCO0FBQ0QsR0FMQyxDQUFGO0FBTUQsQ0E3T08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtb3VudCB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgTnVtYmVyRmllbGQgZnJvbSAnLi4nO1xuaW1wb3J0IE51bWJlckRhdGFUZXN0IGZyb20gJy4vbnVtYmVyRGF0YSc7XG5pbXBvcnQgZm9jdXNUZXN0IGZyb20gJy4uLy4uLy4uL3Rlc3RzL3NoYXJlZC9mb2N1c1Rlc3QnO1xuaW1wb3J0IG1vdW50VGVzdCBmcm9tICcuLi8uLi8uLi90ZXN0cy9zaGFyZWQvbW91bnRUZXN0JztcblxubW91bnRUZXN0KE51bWJlckZpZWxkKTtcbmZvY3VzVGVzdChOdW1iZXJGaWVsZCk7XG5cbmRlc2NyaWJlKCdOdW1iZXJGaWVsZC1wcm8nLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICB9KTtcblxuICBpdCgncmVuZGVycyBOdW1iZXJGaWVsZCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxOdW1iZXJGaWVsZCAvPik7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgnc3RlcCByZW5kZXJzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPE51bWJlckZpZWxkIC8+KTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXItaW5uZXItYnV0dG9uJykpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB3cmFwcGVyLnNldFByb3BzKHsgc3RlcDogMSB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLWlucHV0LW51bWJlci1pbm5lci1idXR0b24nKSkudG9IYXZlTGVuZ3RoKDEpO1xuICB9KTtcblxuICBpdCgnc3RlcCBzaG91bGQgaGF2ZSBkaWZmZXJlbnQgdmFsdWUnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxOdW1iZXJGaWVsZCBzdGVwPXswLjF9IG1pbj17MC4xfSAvPik7XG4gICAgd3JhcHBlci5zZXRQcm9wcyh7IHN0ZXA6IDAuMDEgfSk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICB3cmFwcGVyLnNldFByb3BzKHsgbWluOiAtMSB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyBzdGVwOiAxLjEgfSk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICB3cmFwcGVyLnNldFByb3BzKHsgbWluOiBudWxsIH0pO1xuICAgIHdyYXBwZXIudXBkYXRlKCk7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgne3N0ZXAsbWlufSBudWxsIHJlbmRlcnMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgc3RlcD17bnVsbH0gbWluPXtudWxsfSAvPik7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyBzdGVwOiAyMCB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyBtaW46IDIwIH0pO1xuICAgIHdyYXBwZXIudXBkYXRlKCk7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgnc3RlcCBpY29uIGNsaWNrIHJlbmRlcnMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgdmFsdWU9ezE4fSAvPik7XG4gICAgZXhwZWN0KFxuICAgICAgd3JhcHBlclxuICAgICAgICAuZmluZCgnaW5wdXQnKVxuICAgICAgICAuYXQoMClcbiAgICAgICAgLnByb3AoJ3ZhbHVlJyksXG4gICAgKS50b0JlKCcxOCcpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyB2YWx1ZTogJzE5OCcgfSk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICBleHBlY3QoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCdpbnB1dCcpXG4gICAgICAgIC5hdCgwKVxuICAgICAgICAucHJvcCgndmFsdWUnKSxcbiAgICApLnRvQmUoJzE5OCcpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyB2YWx1ZTogJy0xJyB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCd2YWx1ZScpLFxuICAgICkudG9CZSgnLTEnKTtcbiAgICB3cmFwcGVyLnNldFByb3BzKHsgdmFsdWU6ICcxJyB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCd2YWx1ZScpLFxuICAgICkudG9CZSgnMScpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyB2YWx1ZTogJzEyJyB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCd2YWx1ZScpLFxuICAgICkudG9CZSgnMTInKTtcbiAgICB3cmFwcGVyLnNldFByb3BzKHsgdmFsdWU6IG51bGwgfSk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICBleHBlY3QoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCdpbnB1dCcpXG4gICAgICAgIC5hdCgwKVxuICAgICAgICAucHJvcCgndmFsdWUnKSxcbiAgICApLnRvQmUoJycpO1xuICB9KTtcblxuICBpdCgnc3RlcCBtdWx0aXBsZSByZW5kZXJzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPE51bWJlckZpZWxkIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IHN0ZXA9ezF9IG11bHRpcGxlIG1heD17MTB9IG1pbj17NX0gLz4sXG4gICAgKTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KCd0aGUgcmFuZ2UgdmFsdWUgc2hvdWxkIHJlbmRlciBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gamVzdC5mbigpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxOdW1iZXJGaWVsZFxuICAgICAgICByYW5nZT17WydzdGFydCcsICdlbmQnXX1cbiAgICAgICAgZGVmYXVsdFZhbHVlPXt7IHN0YXJ0OiAwLCBlbmQ6IDQgfX1cbiAgICAgICAgcGxhY2Vob2xkZXI9e1snUmFuZ2UgU3RhcnQnLCAnUmFuZ2UgRW5kJ119XG4gICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAvPixcbiAgICApO1xuICAgIC8vIGV4cGVjdCh3cmFwcGVyKS50b01hdGNoU25hcHNob3QoKTtcbiAgICBleHBlY3QoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXItcmFuZ2Utc3RhcnQnKVxuICAgICAgICAuYXQoMClcbiAgICAgICAgLnByb3AoJ3ZhbHVlJyksXG4gICAgKS50b0JlKCcwJyk7XG4gICAgZXhwZWN0KFxuICAgICAgd3JhcHBlclxuICAgICAgICAuZmluZCgnLmM3bi1wcm8taW5wdXQtbnVtYmVyLXJhbmdlLWVuZCcpXG4gICAgICAgIC5hdCgwKVxuICAgICAgICAucHJvcCgndmFsdWUnKSxcbiAgICApLnRvQmUoJzQnKTtcbiAgfSk7XG5cbiAgaXQoJ2lucHV0IHNob3VsZCByZW5kZXIgcmVhZE9ubHkgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgLz4pO1xuICAgIGV4cGVjdCh3cmFwcGVyLnByb3AoJ3JlYWRPbmx5JykpLnRvQmUoZmFsc2UpO1xuICAgIHdyYXBwZXIuc2V0UHJvcHMoeyByZWFkT25seTogdHJ1ZSB9KTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLnByb3AoJ3JlYWRPbmx5JykpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIGl0KCd0aGUgaW5wdXQgbnVtYmVyIHNob3VsZCBhZGQgd2hlbiB0aGUge3BsdXN9IGljb24gY2xpY2tlZCcsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPE51bWJlckZpZWxkIHN0ZXA9ezF9IG1pbj17MH0gbWF4PXsxMH0gLz4pO1xuICAgIHdyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXItcGx1cycpXG4gICAgICAuYXQoMClcbiAgICAgIC5zaW11bGF0ZSgnbW91c2Vkb3duJyk7XG4gICAgamVzdC5ydW5Pbmx5UGVuZGluZ1RpbWVycygpO1xuICAgIHdyYXBwZXIudXBkYXRlKCk7XG4gICAgZXhwZWN0KHdyYXBwZXIpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgndGhlIGlucHV0IG51bWJlciBzaG91bGQgcmVkdWNlIHdoZW4gdGhlIHttaW51c30gaWNvbiBjbGlja2VkJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgc3RlcD17MX0gbWluPXstMTB9IG1heD17MH0gLz4pO1xuICAgIHdyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXItbWludXMnKVxuICAgICAgLmF0KDApXG4gICAgICAuc2ltdWxhdGUoJ21vdXNlZG93bicpO1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyKS50b01hdGNoU25hcHNob3QoKTtcbiAgfSk7XG5cblxuICBpdCgndGhlIGlucHV0IG51bWJlciBzaG91bGQgY29ycmVjdGx5IGFkZCB3aGVuIHRoZSB7cGx1c30gaWNvbiBjbGlja2VkIGFuZCBub25TdHJpY3RTdGVwJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgc3RlcD17M30gbm9uU3RyaWN0U3RlcCBkZWZhdWx0VmFsdWU9ezV9IC8+KTtcbiAgICB3cmFwcGVyXG4gICAgICAuZmluZCgnLmM3bi1wcm8taW5wdXQtbnVtYmVyLXBsdXMnKVxuICAgICAgLmF0KDApXG4gICAgICAuc2ltdWxhdGUoJ21vdXNlZG93bicpO1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLWlucHV0LW51bWJlcicpLnByb3AoJ3ZhbHVlJykpLnRvQmUoJzgnKTtcbiAgfSk7XG5cbiAgaXQoJ3RoZSBpbnB1dCBudW1iZXIgc2hvdWxkIGNvcnJlY3RseSBhZGQgd2hlbiB0aGUge3BsdXN9IGljb24gY2xpY2tlZCBhbmQgbm8gbm9uU3RyaWN0U3RlcCcsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPE51bWJlckZpZWxkIHN0ZXA9ezN9IGRlZmF1bHRWYWx1ZT17NX0gLz4pO1xuICAgIHdyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXItcGx1cycpXG4gICAgICAuYXQoMClcbiAgICAgIC5zaW11bGF0ZSgnbW91c2Vkb3duJyk7XG4gICAgamVzdC5ydW5Pbmx5UGVuZGluZ1RpbWVycygpO1xuICAgIHdyYXBwZXIudXBkYXRlKCk7XG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnLmM3bi1wcm8taW5wdXQtbnVtYmVyJykucHJvcCgndmFsdWUnKSkudG9CZSgnNicpO1xuICB9KTtcblxuICBpdCgndGhlIGlucHV0IG51bWJlciBzaG91bGQgc2hvdyBjb3JyZWN0bHkgd2hlbiBzZXQgZm9ybWF0dGVyICcsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPE51bWJlckZpZWxkIHN0ZXA9ezF9IGRlZmF1bHRWYWx1ZT17NTAwMH0gZm9ybWF0dGVyPXsodmFsdWUpPT52YWx1ZX0gLz4pO1xuICAgIGNvbnN0IG5vRm9ybWF0dGVyV3JhcHBlciA9IG1vdW50KDxOdW1iZXJGaWVsZCBzdGVwPXsxfSBkZWZhdWx0VmFsdWU9ezUwMDB9IC8+KTtcblxuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLWlucHV0LW51bWJlcicpLnByb3AoJ3ZhbHVlJykpLnRvQmUoJzUwMDAnKTtcbiAgICBleHBlY3Qobm9Gb3JtYXR0ZXJXcmFwcGVyLmZpbmQoJy5jN24tcHJvLWlucHV0LW51bWJlcicpLnByb3AoJ3ZhbHVlJykpLnRvQmUoJzUsMDAwJyk7XG5cbiAgfSk7XG5cbiAgaXQoJ3RoZSBpbnB1dCBudW1iZXIgc2hvdWxkIHNob3cgY29ycmVjdGx5IHdoZW4gc2V0IGZvcm1hdHRlck9wdGlvbnMgJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgc3RlcD17MC4xfSBkZWZhdWx0VmFsdWU9ezUwMDAuM30gZm9ybWF0dGVyT3B0aW9ucz17e29wdGlvbnM6e3VzZUdyb3VwaW5nOmZhbHNlfX19ICAvPik7XG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnLmM3bi1wcm8taW5wdXQtbnVtYmVyJykucHJvcCgndmFsdWUnKSkudG9CZSgnNTAwMC4zJyk7XG4gIH0pO1xuXG5cbiAgaXQoJ3ttaW4sc3RlcH0gc2hvdWxkIGNvbnRyb2wgdGhlIGlucHV0IHZhbHVlJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRmllbGQgc3RlcD17MS4xfSBtaW49ey0wLjN9IC8+KTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXInKS5wcm9wKCd2YWx1ZScpKS50b0JlKCcnKTtcbiAgICB3cmFwcGVyXG4gICAgICAuZmluZCgnLmM3bi1wcm8taW5wdXQtbnVtYmVyLW1pbnVzJylcbiAgICAgIC5hdCgwKVxuICAgICAgLnNpbXVsYXRlKCdtb3VzZWRvd24nKTtcbiAgICBqZXN0LnJ1bk9ubHlQZW5kaW5nVGltZXJzKCk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCcuYzduLXByby1pbnB1dC1udW1iZXInKS5wcm9wKCd2YWx1ZScpKS50b0JlKCctMC4zJyk7XG4gIH0pO1xuICBpdCgndGhlIHJlc3RyaWN0SW5wdXQgbWV0aG9kIHJlbmRlciBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxOdW1iZXJGaWVsZCBzdGVwPXsxLjF9IG1pbj17MC4zfSBtYXg9ezl9IC8+KTtcbiAgICB3cmFwcGVyLmluc3RhbmNlKCkucmVzdHJpY3RJbnB1dCgnOCcpO1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLWlucHV0LW51bWJlcicpLnByb3AoJ3ZhbHVlJykpLnRvQmUoJycpO1xuICAgIHdyYXBwZXIuaW5zdGFuY2UoKS5zdGVwKHRydWUpO1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICB9KTtcblxuICBpdCgndGhlIGtleWRvd24gZXZlbnQgc2hvdWxkIHJlbmRlciBrZXlDb2RlIHsgdXAsIGRvd24gfSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxOdW1iZXJGaWVsZCBzdGVwPXsxfSAvPik7XG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNpbXVsYXRlKCdrZXlkb3duJywgeyBrZXlDb2RlOiAzOCB9KTtcbiAgICBqZXN0LnJ1bk9ubHlQZW5kaW5nVGltZXJzKCk7XG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNpbXVsYXRlKCdrZXlkb3duJywgeyBrZXlDb2RlOiA0MCB9KTtcbiAgICBqZXN0LnJ1bk9ubHlQZW5kaW5nVGltZXJzKCk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0Jykuc2ltdWxhdGUoJ2tleWRvd24nLCB7IGtleUNvZGU6IDEzIH0pO1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyKS50b01hdGNoU25hcHNob3QoKTtcbiAgfSk7XG5cbiAgaXQoJ3RoZSBkYXRhc2V0IHZhbHVlIHNob3VsZCByZW5kZXIgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TnVtYmVyRGF0YVRlc3QgLz4pO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJ051bWJlckZpZWxkJykucHJvcHMoKS5uYW1lKS50b0VxdWFsKCdhZ2UnKTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdpbnB1dCcpLnByb3BzKCkudmFsdWUpLnRvRXF1YWwoJzEwLDAwMCwwMDAnKTtcbiAgICBleHBlY3Qod3JhcHBlcikudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xufSk7XG4iXX0=