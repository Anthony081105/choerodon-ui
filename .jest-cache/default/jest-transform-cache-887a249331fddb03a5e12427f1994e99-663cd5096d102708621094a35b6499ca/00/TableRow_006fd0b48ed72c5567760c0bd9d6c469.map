{"version":3,"sources":["TableRow.jsx"],"names":["TableRow","props","event","record","index","onRowClick","onRowDoubleClick","onRowContextMenu","onRowMouseEnter","onHover","rowKey","onRowMouseLeave","shouldRender","visible","saveRowRef","nextProps","rowRef","store","getState","expandedRowsHeight","height","getBoundingClientRect","setState","fixedColumnsBodyRowsHeight","slice","style","display","ReactDOM","findDOMNode","isAnyColumnsFixed","fixed","expandedRow","ancestorKeys","setExpanedRowHeight","length","setRowHeight","prefixCls","columns","onRow","indent","indentSize","hovered","components","hasExpandIcon","renderExpandIcon","renderExpandIconCell","BodyRow","body","row","BodyCell","cell","className","cells","i","column","onCellClick","undefined","push","key","dataIndex","rowClassName","trim","rowProps","customStyle","onMouseEnter","onMouseLeave","onContextMenu","Component","PropTypes","func","object","string","array","oneOfType","number","isRequired","bool","any","expandIconColumnIndex","expandRowByClick","getRowHeight","state","currentHoverKey","expandedRowKeys","every","k","indexOf"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'mini-store';\nimport TableCell from './TableCell';\nimport warning from '../../_util/warning';\n\nclass TableRow extends Component {\n  static propTypes = {\n    onRow: PropTypes.func,\n    onRowClick: PropTypes.func,\n    onRowDoubleClick: PropTypes.func,\n    onRowContextMenu: PropTypes.func,\n    onRowMouseEnter: PropTypes.func,\n    onRowMouseLeave: PropTypes.func,\n    record: PropTypes.object,\n    prefixCls: PropTypes.string,\n    onHover: PropTypes.func,\n    columns: PropTypes.array,\n    height: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n    ]),\n    index: PropTypes.number,\n    rowKey: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number,\n    ]).isRequired,\n    className: PropTypes.string,\n    indent: PropTypes.number,\n    indentSize: PropTypes.number,\n    hasExpandIcon: PropTypes.func.isRequired,\n    hovered: PropTypes.bool.isRequired,\n    visible: PropTypes.bool.isRequired,\n    store: PropTypes.object.isRequired,\n    fixed: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.bool,\n    ]),\n    renderExpandIcon: PropTypes.func,\n    renderExpandIconCell: PropTypes.func,\n    components: PropTypes.any,\n    expandedRow: PropTypes.bool,\n    isAnyColumnsFixed: PropTypes.bool,\n    ancestorKeys: PropTypes.array.isRequired,\n  }\n\n  static defaultProps = {\n    onRow() {},\n    expandIconColumnIndex: 0,\n    expandRowByClick: false,\n    onHover() {},\n    hasExpandIcon() {},\n    renderExpandIcon() {},\n    renderExpandIconCell() {},\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.shouldRender = props.visible;\n  }\n\n  componentDidMount() {\n    if (this.shouldRender) {\n      this.saveRowRef();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.visible || (!this.props.visible && nextProps.visible)) {\n      this.shouldRender = true;\n    }\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !!(this.props.visible || nextProps.visible);\n  }\n\n  componentDidUpdate() {\n    if (this.shouldRender && !this.rowRef) {\n      this.saveRowRef();\n    }\n  }\n\n  onRowClick = (event) => {\n    const { record, index, onRowClick } = this.props;\n    if (onRowClick) {\n      onRowClick(record, index, event);\n    }\n  }\n\n  onRowDoubleClick = (event) => {\n    const { record, index, onRowDoubleClick } = this.props;\n    if (onRowDoubleClick) {\n      onRowDoubleClick(record, index, event);\n    }\n  }\n\n  onContextMenu = (event) => {\n    const { record, index, onRowContextMenu } = this.props;\n    if (onRowContextMenu) {\n      onRowContextMenu(record, index, event);\n    }\n  }\n\n  onMouseEnter = (event) => {\n    const { record, index, onRowMouseEnter, onHover, rowKey } = this.props;\n    onHover(true, rowKey);\n    if (onRowMouseEnter) {\n      onRowMouseEnter(record, index, event);\n    }\n  }\n\n  onMouseLeave = (event) => {\n    const { record, index, onRowMouseLeave, onHover, rowKey } = this.props;\n    onHover(false, rowKey);\n    if (onRowMouseLeave) {\n      onRowMouseLeave(record, index, event);\n    }\n  }\n\n  setExpanedRowHeight() {\n    const { store, rowKey } = this.props;\n    let { expandedRowsHeight } = store.getState();\n    const height = this.rowRef.getBoundingClientRect().height;\n    expandedRowsHeight = {\n      ...expandedRowsHeight,\n      [rowKey]: height,\n    };\n    store.setState({ expandedRowsHeight });\n  }\n\n  setRowHeight() {\n    const { store, index } = this.props;\n    const fixedColumnsBodyRowsHeight = store.getState().fixedColumnsBodyRowsHeight.slice();\n    const height = this.rowRef.getBoundingClientRect().height;\n    fixedColumnsBodyRowsHeight[index] = height;\n    store.setState({ fixedColumnsBodyRowsHeight });\n  }\n\n  getStyle() {\n    const { height, visible } = this.props;\n\n    if (height && height !== this.style.height) {\n      this.style = { ...this.style, height };\n    }\n\n    if (!visible && !this.style.display) {\n      this.style = { ...this.style, display: 'none' };\n    }\n\n    return this.style;\n  }\n\n  saveRowRef() {\n    this.rowRef = ReactDOM.findDOMNode(this);\n\n    const { isAnyColumnsFixed, fixed, expandedRow, ancestorKeys } = this.props;\n\n    if (!isAnyColumnsFixed) {\n      return;\n    }\n\n    if (!fixed && expandedRow) {\n      this.setExpanedRowHeight();\n    }\n\n    if (!fixed && ancestorKeys.length >= 0) {\n      this.setRowHeight();\n    }\n  }\n\n  render() {\n    if (!this.shouldRender) {\n      return null;\n    }\n\n    const {\n      prefixCls,\n      columns,\n      record,\n      index,\n      onRow,\n      indent,\n      indentSize,\n      hovered,\n      height,\n      visible,\n      components,\n      hasExpandIcon,\n      renderExpandIcon,\n      renderExpandIconCell,\n    } = this.props;\n\n    const BodyRow = components.body.row;\n    const BodyCell = components.body.cell;\n\n    let { className } = this.props;\n\n    if (hovered) {\n      className += ` ${prefixCls}-hover`;\n    }\n\n    const cells = [];\n\n    renderExpandIconCell(cells);\n\n    for (let i = 0; i < columns.length; i++) {\n      const column = columns[i];\n\n      warning(\n        column.onCellClick === undefined,\n        'column[onCellClick] is deprecated, please use column[onCell] instead.',\n      );\n\n      cells.push(\n        <TableCell\n          prefixCls={prefixCls}\n          record={record}\n          indentSize={indentSize}\n          indent={indent}\n          index={index}\n          column={column}\n          key={column.key || column.dataIndex}\n          expandIcon={hasExpandIcon(i) && renderExpandIcon()}\n          component={BodyCell}\n        />\n      );\n    }\n\n    const rowClassName =\n      `${prefixCls} ${className} ${prefixCls}-level-${indent}`.trim();\n\n    const rowProps = onRow(record, index);\n    const customStyle = rowProps ? rowProps.style : {};\n    let style = { height };\n\n    if (!visible) {\n      style.display = 'none';\n    }\n\n    style = { ...style, ...customStyle };\n\n    return (\n      <BodyRow\n        onClick={this.onRowClick}\n        onDoubleClick={this.onRowDoubleClick}\n        onMouseEnter={this.onMouseEnter}\n        onMouseLeave={this.onMouseLeave}\n        onContextMenu={this.onContextMenu}\n        className={rowClassName}\n        {...rowProps}\n        style={style}\n      >\n        {cells}\n      </BodyRow>\n    );\n  }\n}\n\nfunction getRowHeight(state, props) {\n  const { expandedRowsHeight, fixedColumnsBodyRowsHeight } = state;\n  const { fixed, index, rowKey } = props;\n\n  if (!fixed) {\n    return null;\n  }\n\n  if (expandedRowsHeight[rowKey]) {\n    return expandedRowsHeight[rowKey];\n  }\n\n  if (fixedColumnsBodyRowsHeight[index]) {\n    return fixedColumnsBodyRowsHeight[index];\n  }\n\n  return null;\n}\n\nexport default connect((state, props) => {\n  const { currentHoverKey, expandedRowKeys } = state;\n  const { rowKey, ancestorKeys } = props;\n  const visible = ancestorKeys.length === 0 || ancestorKeys.every(k => ~expandedRowKeys.indexOf(k));\n\n  return ({\n    visible,\n    hovered: currentHoverKey === rowKey,\n    height: getRowHeight(state, props),\n  });\n})(TableRow);\n"]}