ca11447a36c404015f18a13123ba6ab3
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = createSliderWithTooltip;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _objectSpread3 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _tooltip = _interopRequireDefault(require("../tooltip"));

var _Handle = _interopRequireDefault(require("./Handle"));

function _createSuper(Derived) {
  function isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;

    try {
      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
      return true;
    } catch (e) {
      return false;
    }
  }

  return function () {
    var Super = (0, _getPrototypeOf2["default"])(Derived),
        result;

    if (isNativeReflectConstruct()) {
      var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return (0, _possibleConstructorReturn2["default"])(this, result);
  };
}

function createSliderWithTooltip(Component) {
  var _class, _temp;

  return _temp = _class =
  /*#__PURE__*/
  function (_Component) {
    (0, _inherits2["default"])(ComponentWrapper, _Component);

    var _super = _createSuper(ComponentWrapper);

    function ComponentWrapper(props) {
      var _this;

      (0, _classCallCheck2["default"])(this, ComponentWrapper);
      _this = _super.call(this, props);
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleTooltipVisibleChange", function (index, visible) {
        _this.setState(function (prevState) {
          return {
            visibles: (0, _objectSpread3["default"])({}, prevState.visibles, (0, _defineProperty2["default"])({}, index, visible))
          };
        });
      });
      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleWithTooltip", function (_ref) {
        var value = _ref.value,
            dragging = _ref.dragging,
            index = _ref.index,
            disabled = _ref.disabled,
            restProps = (0, _objectWithoutProperties2["default"])(_ref, ["value", "dragging", "index", "disabled"]);
        var _this$props = _this.props,
            tipFormatter = _this$props.tipFormatter,
            tipProps = _this$props.tipProps,
            handleStyle = _this$props.handleStyle;
        var _tipProps$prefixCls = tipProps.prefixCls,
            prefixCls = _tipProps$prefixCls === void 0 ? 'rc-slider-tooltip' : _tipProps$prefixCls,
            _tipProps$overlay = tipProps.overlay,
            overlay = _tipProps$overlay === void 0 ? tipFormatter(value) : _tipProps$overlay,
            _tipProps$placement = tipProps.placement,
            placement = _tipProps$placement === void 0 ? 'top' : _tipProps$placement,
            _tipProps$visible = tipProps.visible,
            visible = _tipProps$visible === void 0 ? visible || false : _tipProps$visible,
            restTooltipProps = (0, _objectWithoutProperties2["default"])(tipProps, ["prefixCls", "overlay", "placement", "visible"]);
        var handleStyleWithIndex;

        if (Array.isArray(handleStyle)) {
          handleStyleWithIndex = handleStyle[index] || handleStyle[0];
        } else {
          handleStyleWithIndex = handleStyle;
        }

        return _react["default"].createElement(_tooltip["default"], (0, _extends2["default"])({}, restTooltipProps, {
          prefixCls: prefixCls,
          overlay: overlay,
          placement: placement,
          visible: !disabled && (_this.state.visibles[index] || dragging) || visible,
          key: index
        }), _react["default"].createElement(_Handle["default"], (0, _extends2["default"])({}, restProps, {
          style: (0, _objectSpread3["default"])({}, handleStyleWithIndex),
          value: value,
          onMouseEnter: function onMouseEnter() {
            return _this.handleTooltipVisibleChange(index, true);
          },
          onMouseLeave: function onMouseLeave() {
            return _this.handleTooltipVisibleChange(index, false);
          }
        })));
      });
      _this.state = {
        visibles: {}
      };
      return _this;
    }

    (0, _createClass2["default"])(ComponentWrapper, [{
      key: "render",
      value: function render() {
        return _react["default"].createElement(Component, (0, _extends2["default"])({}, this.props, {
          handle: this.handleWithTooltip
        }));
      }
    }]);
    return ComponentWrapper;
  }(Component), (0, _defineProperty2["default"])(_class, "propTypes", {
    tipFormatter: _propTypes["default"].func,
    handleStyle: _propTypes["default"].oneOfType([_propTypes["default"].object, _propTypes["default"].arrayOf(_propTypes["default"].object)]),
    tipProps: _propTypes["default"].object
  }), (0, _defineProperty2["default"])(_class, "defaultProps", {
    tipFormatter: function tipFormatter(value) {
      return value;
    },
    handleStyle: [{}],
    tipProps: {}
  }), _temp;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZVNsaWRlcldpdGhUb29sdGlwLmpzeCJdLCJuYW1lcyI6WyJjcmVhdGVTbGlkZXJXaXRoVG9vbHRpcCIsIkNvbXBvbmVudCIsInByb3BzIiwiaW5kZXgiLCJ2aXNpYmxlIiwic2V0U3RhdGUiLCJwcmV2U3RhdGUiLCJ2aXNpYmxlcyIsInZhbHVlIiwiZHJhZ2dpbmciLCJkaXNhYmxlZCIsInJlc3RQcm9wcyIsInRpcEZvcm1hdHRlciIsInRpcFByb3BzIiwiaGFuZGxlU3R5bGUiLCJwcmVmaXhDbHMiLCJvdmVybGF5IiwicGxhY2VtZW50IiwicmVzdFRvb2x0aXBQcm9wcyIsImhhbmRsZVN0eWxlV2l0aEluZGV4IiwiQXJyYXkiLCJpc0FycmF5Iiwic3RhdGUiLCJoYW5kbGVUb29sdGlwVmlzaWJsZUNoYW5nZSIsImhhbmRsZVdpdGhUb29sdGlwIiwiUHJvcFR5cGVzIiwiZnVuYyIsIm9uZU9mVHlwZSIsIm9iamVjdCIsImFycmF5T2YiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFZSxTQUFTQSx1QkFBVCxDQUFpQ0MsU0FBakMsRUFBNEM7QUFBQTs7QUFDekQ7QUFBQTtBQUFBO0FBQUE7O0FBQUE7O0FBY0UsOEJBQVlDLEtBQVosRUFBbUI7QUFBQTs7QUFBQTtBQUNqQixnQ0FBTUEsS0FBTjtBQURpQixxSEFLVSxVQUFDQyxLQUFELEVBQVFDLE9BQVIsRUFBb0I7QUFDL0MsY0FBS0MsUUFBTCxDQUFjLFVBQUFDLFNBQVMsRUFBSTtBQUN6QixpQkFBTztBQUNMQyxZQUFBQSxRQUFRLHFDQUNIRCxTQUFTLENBQUNDLFFBRFAsdUNBRUxKLEtBRkssRUFFR0MsT0FGSDtBQURILFdBQVA7QUFNRCxTQVBEO0FBUUQsT0Fka0I7QUFBQSw0R0FlQyxnQkFBd0Q7QUFBQSxZQUFyREksS0FBcUQsUUFBckRBLEtBQXFEO0FBQUEs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TnhCO0FBeUVEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgVG9vbHRpcCBmcm9tICcuLi90b29sdGlwJztcbmltcG9ydCBIYW5kbGUgZnJvbSAnLi9IYW5kbGUnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVTbGlkZXJXaXRoVG9vbHRpcChDb21wb25lbnQpIHtcbiAgcmV0dXJuIGNsYXNzIENvbXBvbmVudFdyYXBwZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgICB0aXBGb3JtYXR0ZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgICAgaGFuZGxlU3R5bGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5vYmplY3QsIFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5vYmplY3QpXSksXG4gICAgICB0aXBQcm9wczogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB9O1xuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICB0aXBGb3JtYXR0ZXIodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVN0eWxlOiBbe31dLFxuICAgICAgdGlwUHJvcHM6IHt9LFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgdGhpcy5zdGF0ZSA9IHsgdmlzaWJsZXM6IHt9IH07XG4gICAgfVxuXG4gICAgaGFuZGxlVG9vbHRpcFZpc2libGVDaGFuZ2UgPSAoaW5kZXgsIHZpc2libGUpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUocHJldlN0YXRlID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2aXNpYmxlczoge1xuICAgICAgICAgICAgLi4ucHJldlN0YXRlLnZpc2libGVzLFxuICAgICAgICAgICAgW2luZGV4XTogdmlzaWJsZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBoYW5kbGVXaXRoVG9vbHRpcCA9ICh7IHZhbHVlLCBkcmFnZ2luZywgaW5kZXgsIGRpc2FibGVkLCAuLi5yZXN0UHJvcHMgfSkgPT4ge1xuICAgICAgY29uc3QgeyB0aXBGb3JtYXR0ZXIsIHRpcFByb3BzLCBoYW5kbGVTdHlsZSB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgY29uc3Qge1xuICAgICAgICBwcmVmaXhDbHMgPSAncmMtc2xpZGVyLXRvb2x0aXAnLFxuICAgICAgICBvdmVybGF5ID0gdGlwRm9ybWF0dGVyKHZhbHVlKSxcbiAgICAgICAgcGxhY2VtZW50ID0gJ3RvcCcsXG4gICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IGZhbHNlLFxuICAgICAgICAuLi5yZXN0VG9vbHRpcFByb3BzXG4gICAgICB9ID0gdGlwUHJvcHM7XG5cbiAgICAgIGxldCBoYW5kbGVTdHlsZVdpdGhJbmRleDtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGhhbmRsZVN0eWxlKSkge1xuICAgICAgICBoYW5kbGVTdHlsZVdpdGhJbmRleCA9IGhhbmRsZVN0eWxlW2luZGV4XSB8fCBoYW5kbGVTdHlsZVswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbmRsZVN0eWxlV2l0aEluZGV4ID0gaGFuZGxlU3R5bGU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgey4uLnJlc3RUb29sdGlwUHJvcHN9XG4gICAgICAgICAgcHJlZml4Q2xzPXtwcmVmaXhDbHN9XG4gICAgICAgICAgb3ZlcmxheT17b3ZlcmxheX1cbiAgICAgICAgICBwbGFjZW1lbnQ9e3BsYWNlbWVudH1cbiAgICAgICAgICB2aXNpYmxlPXsoIWRpc2FibGVkICYmICh0aGlzLnN0YXRlLnZpc2libGVzW2luZGV4XSB8fCBkcmFnZ2luZykpIHx8IHZpc2libGV9XG4gICAgICAgICAga2V5PXtpbmRleH1cbiAgICAgICAgPlxuICAgICAgICAgIDxIYW5kbGVcbiAgICAgICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAuLi5oYW5kbGVTdHlsZVdpdGhJbmRleCxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgICBvbk1vdXNlRW50ZXI9eygpID0+IHRoaXMuaGFuZGxlVG9vbHRpcFZpc2libGVDaGFuZ2UoaW5kZXgsIHRydWUpfVxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXsoKSA9PiB0aGlzLmhhbmRsZVRvb2x0aXBWaXNpYmxlQ2hhbmdlKGluZGV4LCBmYWxzZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmVuZGVyKCkge1xuICAgICAgcmV0dXJuIDxDb21wb25lbnQgey4uLnRoaXMucHJvcHN9IGhhbmRsZT17dGhpcy5oYW5kbGVXaXRoVG9vbHRpcH0gLz47XG4gICAgfVxuICB9O1xufVxuIl19