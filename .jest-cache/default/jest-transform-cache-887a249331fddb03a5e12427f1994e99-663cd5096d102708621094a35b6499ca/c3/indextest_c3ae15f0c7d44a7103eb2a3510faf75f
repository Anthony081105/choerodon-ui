77683d43ae97cfef033ed34213e4022c
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _ = _interopRequireDefault(require(".."));

var _dataSet = _interopRequireDefault(require("../../data-set"));

var Option = _["default"].Option;
describe('Select', function () {
  beforeEach(function () {
    jest.useFakeTimers();
  });
  afterEach(function () {
    jest.useRealTimers();
  });
  it('dataset set Select value', function () {
    var handleDataSetChange = jest.fn();
    var data = [{
      user: 'wu'
    }];
    var ds = new _dataSet["default"]({
      data: data,
      fields: [{
        name: 'user',
        type: 'string',
        textField: 'text',
        label: '用户'
      }],
      events: {
        update: handleDataSetChange
      }
    });
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      dataSet: ds,
      name: "user"
    }, _react["default"].createElement(Option, {
      value: "jack"
    }, "Jack"), _react["default"].createElement(Option, {
      value: "lucy"
    }, "Lucy"), _react["default"].createElement(Option, {
      value: "wu"
    }, "Wu")));
    jest.runAllTimers();
    expect(wrapper.find('input').at(0).prop('value')).toBe('wu');
  });
  it('dataset set value render right number item', function () {
    var handleDataSetChange = jest.fn();
    var data = [{
      user: 'wu'
    }];
    var ds = new _dataSet["default"]({
      data: data,
      fields: [{
        name: 'user',
        type: 'string',
        textField: 'text',
        label: '用户'
      }],
      events: {
        update: handleDataSetChange
      }
    });
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      dataSet: ds,
      name: "user"
    }, _react["default"].createElement(Option, {
      value: "jack"
    }, "Jack"), _react["default"].createElement(Option, {
      value: "lucy"
    }, "Lucy"), _react["default"].createElement(Option, {
      value: "wu"
    }, "Wu")));
    wrapper.find('.c7n-pro-select').simulate('click');
    jest.runAllTimers();
    expect(wrapper.find('MenuItem').length).toBe(3);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRlc3QuanMiXSwibmFtZXMiOlsiT3B0aW9uIiwiU2VsZWN0IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiamVzdCIsInVzZUZha2VUaW1lcnMiLCJhZnRlckVhY2giLCJ1c2VSZWFsVGltZXJzIiwiaXQiLCJoYW5kbGVEYXRhU2V0Q2hhbmdlIiwiZm4iLCJkYXRhIiwidXNlciIsImRzIiwiRGF0YVNldCIsImZpZWxkcyIsIm5hbWUiLCJ0eXBlIiwidGV4dEZpZWxkIiwibGFiZWwiLCJldmVudHMiLCJ1cGRhdGUiLCJ3cmFwcGVyIiwicnVuQWxsVGltZXJzIiwiZXhwZWN0IiwiZmluZCIsImF0IiwicHJvcCIsInRvQmUiLCJzaW11bGF0ZSIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztJQUVRQSxNLEdBQVdDLFksQ0FBWEQsTTtBQUVSRSxRQUFRLENBQUMsUUFBRCxFQUFXLFlBQU07QUFDdkJDLEVBQUFBLFVBQVUsQ0FBQyxZQUFNO0FBQ2ZDLElBQUFBLElBQUksQ0FBQ0MsYUFBTDtBQUNELEdBRlMsQ0FBVjtBQUlBQyxFQUFBQSxTQUFTLENBQUMsWUFBTTtBQUNkRixJQUFBQSxJQUFJLENBQUNHLGFBQUw7QUFDRCxHQUZRLENBQVQ7QUFJQUMsRUFBQUEsRUFBRSxDQUFDLDBCQUFELEVBQTZCLFlBQU07QUFDbkMsUUFBTUMsbUJBQW1CLEdBQUdMLElBQUksQ0FBQ00sRUFBTCxFQUE1QjtBQUNBLFFBQU1DLElBQUksR0FBRyxDQUNYO0FBQ0VDLE1BQUFBLElBQUksRUFBRTtBQURSLEtBRFcsQ0FBYjtBQUtBLFFBQU1DLEVBQUUsR0FBRyxJQUFJQyxtQkFBSixDQUFZO0FBQ3JCSCxNQUFBQSxJQUFJLEVBQUpBLElBRHFCO0FBRXJCSSxNQUFBQSxNQUFNLEVBQUUsQ0FBQztBQUFFQyxRQUFBQSxJQUFJLEVBQUUsTUFBUjtBQUFnQkMsUUFBQUEsSUFBSSxFQUFFLFFBQXRCO0FBQWdDQyxRQUFBQSxTQUFTLEVBQUUsTUFBM0M7QUFBbURDLFFBQUFBLEtBQUssRUFBRTtBQUExRCxPQUFELENBRmE7QUFHckJDLE1BQUFBLE1BQU0sRUFBRTtBQUNOQyxRQUFBQSxNQUFNLEVBQUVaO0FBREY7QUFIYSxLQUFaLENBQVg7QUFPQSxRQUFNYSxPQUFPLEdBQUcsbUJBQ2QsZ0NBQUMsWUFBRDtBQUFRLE1BQUEsT0FBTyxFQUFFVCxFQUFqQjtBQUFxQixNQUFBLElBQUksRUFBQztBQUExQixPQUNFLGdDQUFDLE1BQUQ7QUFBUSxNQUFBLEtBQUssRUFBQztBQUFkLGNBREYsRUFFRSxnQ0FBQyxNQUFEO0FBQVEsTUFBQSxLQUFLLEVBQUM7QUFBZCxjQUZGLEVBR0UsZ0NBQUMsTUFBRDtBQUFRLE1BQUEsS0FBSyxFQUFDO0FBQWQsWUFIRixDQURjLENBQWhCO0FBT0FULElBQUFBLElBQUksQ0FBQ21CLFlBQUw7QUFDQUMsSUFBQUEsTUFBTSxDQUNKRixPQUFPLENBQ0pHLElBREgsQ0FDUSxPQURSLEVBRUdDLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLElBSEgsQ0FHUSxPQUhSLENBREksQ0FBTixDQUtFQyxJQUxGLENBS08sSUFMUDtBQU1ELEdBNUJDLENBQUY7QUE2QkFwQixFQUFBQSxFQUFFLENBQUMsNENBQUQsRUFBK0MsWUFBTTtBQUNyRCxRQUFNQyxtQkFBbUIsR0FBR0wsSUFBSSxDQUFDTSxFQUFMLEVBQTVCO0FBQ0EsUUFBTUMsSUFBSSxHQUFHLENBQ1g7QUFDRUMsTUFBQUEsSUFBSSxFQUFFO0FBRFIsS0FEVyxDQUFiO0FBS0EsUUFBTUMsRUFBRSxHQUFHLElBQUlDLG1CQUFKLENBQVk7QUFDckJILE1BQUFBLElBQUksRUFBSkEsSUFEcUI7QUFFckJJLE1BQUFBLE1BQU0sRUFBRSxDQUFDO0FBQUVDLFFBQUFBLElBQUksRUFBRSxNQUFSO0FBQWdCQyxRQUFBQSxJQUFJLEVBQUUsUUFBdEI7QUFBZ0NDLFFBQUFBLFNBQVMsRUFBRSxNQUEzQztBQUFtREMsUUFBQUEsS0FBSyxFQUFFO0FBQTFELE9BQUQsQ0FGYTtBQUdyQkMsTUFBQUEsTUFBTSxFQUFFO0FBQ05DLFFBQUFBLE1BQU0sRUFBRVo7QUFERjtBQUhhLEtBQVosQ0FBWDtBQU9BLFFBQU1hLE9BQU8sR0FBRyxtQkFDZCxnQ0FBQyxZQUFEO0FBQVEsTUFBQSxPQUFPLEVBQUVULEVBQWpCO0FBQXFCLE1BQUEsSUFBSSxFQUFDO0FBQTFCLE9BQ0UsZ0NBQUMsTUFBRDtBQUFRLE1BQUEsS0FBSyxFQUFDO0FBQWQsY0FERixFQUVFLGdDQUFDLE1BQUQ7QUFBUSxNQUFBLEtBQUssRUFBQztBQUFkLGNBRkYsRUFHRSxnQ0FBQyxNQUFEO0FBQVEsTUFBQSxLQUFLLEVBQUM7QUFBZCxZQUhGLENBRGMsQ0FBaEI7QUFPQVMsSUFBQUEsT0FBTyxDQUFDRyxJQUFSLENBQWEsaUJBQWIsRUFBZ0NJLFFBQWhDLENBQXlDLE9BQXpDO0FBQ0F6QixJQUFBQSxJQUFJLENBQUNtQixZQUFMO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0YsT0FBTyxDQUFDRyxJQUFSLENBQWEsVUFBYixFQUF5QkssTUFBMUIsQ0FBTixDQUF3Q0YsSUFBeEMsQ0FBNkMsQ0FBN0M7QUFDRCxHQXhCQyxDQUFGO0FBeUJELENBL0RPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgbW91bnQgfSBmcm9tICdlbnp5bWUnO1xuaW1wb3J0IFNlbGVjdCBmcm9tICcuLic7XG5pbXBvcnQgRGF0YVNldCBmcm9tICcuLi8uLi9kYXRhLXNldCc7XG5cbmNvbnN0IHsgT3B0aW9uIH0gPSBTZWxlY3Q7XG5cbmRlc2NyaWJlKCdTZWxlY3QnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICB9KTtcblxuICBpdCgnZGF0YXNldCBzZXQgU2VsZWN0IHZhbHVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZURhdGFTZXRDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgY29uc3QgZGF0YSA9IFtcbiAgICAgIHtcbiAgICAgICAgdXNlcjogJ3d1JyxcbiAgICAgIH0sXG4gICAgXTtcbiAgICBjb25zdCBkcyA9IG5ldyBEYXRhU2V0KHtcbiAgICAgIGRhdGEsXG4gICAgICBmaWVsZHM6IFt7IG5hbWU6ICd1c2VyJywgdHlwZTogJ3N0cmluZycsIHRleHRGaWVsZDogJ3RleHQnLCBsYWJlbDogJ+eUqOaItycgfV0sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgdXBkYXRlOiBoYW5kbGVEYXRhU2V0Q2hhbmdlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoXG4gICAgICA8U2VsZWN0IGRhdGFTZXQ9e2RzfSBuYW1lPVwidXNlclwiPlxuICAgICAgICA8T3B0aW9uIHZhbHVlPVwiamFja1wiPkphY2s8L09wdGlvbj5cbiAgICAgICAgPE9wdGlvbiB2YWx1ZT1cImx1Y3lcIj5MdWN5PC9PcHRpb24+XG4gICAgICAgIDxPcHRpb24gdmFsdWU9XCJ3dVwiPld1PC9PcHRpb24+XG4gICAgICA8L1NlbGVjdD4sXG4gICAgKTtcbiAgICBqZXN0LnJ1bkFsbFRpbWVycygpO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2lucHV0JylcbiAgICAgICAgLmF0KDApXG4gICAgICAgIC5wcm9wKCd2YWx1ZScpLFxuICAgICkudG9CZSgnd3UnKTtcbiAgfSk7XG4gIGl0KCdkYXRhc2V0IHNldCB2YWx1ZSByZW5kZXIgcmlnaHQgbnVtYmVyIGl0ZW0nLCAoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlRGF0YVNldENoYW5nZSA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBkYXRhID0gW1xuICAgICAge1xuICAgICAgICB1c2VyOiAnd3UnLFxuICAgICAgfSxcbiAgICBdO1xuICAgIGNvbnN0IGRzID0gbmV3IERhdGFTZXQoe1xuICAgICAgZGF0YSxcbiAgICAgIGZpZWxkczogW3sgbmFtZTogJ3VzZXInLCB0eXBlOiAnc3RyaW5nJywgdGV4dEZpZWxkOiAndGV4dCcsIGxhYmVsOiAn55So5oi3JyB9XSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICB1cGRhdGU6IGhhbmRsZURhdGFTZXRDaGFuZ2UsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxTZWxlY3QgZGF0YVNldD17ZHN9IG5hbWU9XCJ1c2VyXCI+XG4gICAgICAgIDxPcHRpb24gdmFsdWU9XCJqYWNrXCI+SmFjazwvT3B0aW9uPlxuICAgICAgICA8T3B0aW9uIHZhbHVlPVwibHVjeVwiPkx1Y3k8L09wdGlvbj5cbiAgICAgICAgPE9wdGlvbiB2YWx1ZT1cInd1XCI+V3U8L09wdGlvbj5cbiAgICAgIDwvU2VsZWN0PixcbiAgICApO1xuICAgIHdyYXBwZXIuZmluZCgnLmM3bi1wcm8tc2VsZWN0Jykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCdNZW51SXRlbScpLmxlbmd0aCkudG9CZSgzKTtcbiAgfSk7XG59KTtcbiJdfQ==