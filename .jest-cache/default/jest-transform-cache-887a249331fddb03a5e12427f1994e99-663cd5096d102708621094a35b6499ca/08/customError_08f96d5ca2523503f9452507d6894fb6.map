{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/validator/rules/customError.tsx"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;SAG8B,W;;;;;;;+BAAf,iBACb,KADa,EAEb,KAFa;AAAA;AAAA;AAAA;AAAA;AAAA;AAIL,YAAA,eAJK,GAImC,KAJnC,CAIL,eAJK,EAIY,IAJZ,GAImC,KAJnC,CAIY,IAJZ,EAIkB,MAJlB,GAImC,KAJnC,CAIkB,MAJlB,EAI0B,IAJ1B,GAImC,KAJnC,CAI0B,IAJ1B;;AAAA,kBAKT,OAAO,eAAP,KAA2B,UALlB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMU,eAAe,CAAC,KAAD,EAAQ,IAAR,EAAc,MAAM,IAAI,IAAxB,CANzB;;AAAA;AAML,YAAA,MANK;;AAAA,kBAOP,0BAAS,MAAT,KAAoB,MAAM,KAAK,KAPxB;AAAA;AAAA;AAAA;;AAAA,6CAQF,IAAI,4BAAJ,CAAqB;AAC1B,cAAA,iBAAiB,EAAE,MAAM,IAAI,uBAAG,WAAH,EAAgB,SAAhB,CADH;AAE1B,cAAA,KAAK,EAAL,KAF0B;AAG1B,cAAA,QAAQ,EAAE;AAHgB,aAArB,CARE;;AAAA;AAAA,6CAeN,IAfM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import isString from 'lodash/isString';\nimport ValidationResult from '../ValidationResult';\nimport { $l } from '../../locale-context';\nimport { methodReturn, ValidatorProps } from '.';\n\nexport default async function customError(\n  value: any,\n  props: ValidatorProps,\n): Promise<methodReturn> {\n  const { customValidator, name, record, form } = props;\n  if (typeof customValidator === 'function') {\n    const result = await customValidator(value, name, record || form);\n    if (isString(result) || result === false) {\n      return new ValidationResult({\n        validationMessage: result || $l('Validator', 'unknown'),\n        value,\n        ruleName: 'customError',\n      });\n    }\n  }\n  return true;\n}\n"]}