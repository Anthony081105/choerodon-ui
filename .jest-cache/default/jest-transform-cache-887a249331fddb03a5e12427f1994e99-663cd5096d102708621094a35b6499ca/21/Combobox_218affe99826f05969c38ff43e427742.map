{"version":3,"sources":["Combobox.jsx"],"names":["formatOption","option","disabledOptions","value","disabled","indexOf","Combobox","type","itemValue","props","onChange","defaultOpenValue","use12Hours","clone","isAM","hour","minute","ampm","toUpperCase","second","range","onCurrentSelectPanelChange","prefixCls","hourOptions","disabledHours","showHour","hourOptionsAdj","hourAdj","concat","filter","h","map","onItemChange","onEnterSelectPanel","bind","minuteOptions","disabledMinutes","showMinute","secondOptions","disabledSeconds","showSecond","format","AMPMOptions","c","match","selected","getHourSelect","getMinuteSelect","getSecondSelect","getAMPMSelect","Component","PropTypes","string","object","func","bool","array"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Select from './Select';\n\nconst formatOption = (option, disabledOptions) => {\n  let value = `${option}`;\n  if (option < 10) {\n    value = `0${option}`;\n  }\n\n  let disabled = false;\n  if (disabledOptions && disabledOptions.indexOf(option) >= 0) {\n    disabled = true;\n  }\n\n  return {\n    value,\n    disabled,\n  };\n};\n\nclass Combobox extends Component {\n  static propTypes = {\n    format: PropTypes.string,\n    defaultOpenValue: PropTypes.object,\n    prefixCls: PropTypes.string,\n    value: PropTypes.object,\n    onChange: PropTypes.func,\n    showHour: PropTypes.bool,\n    showMinute: PropTypes.bool,\n    showSecond: PropTypes.bool,\n    hourOptions: PropTypes.array,\n    minuteOptions: PropTypes.array,\n    secondOptions: PropTypes.array,\n    disabledHours: PropTypes.func,\n    disabledMinutes: PropTypes.func,\n    disabledSeconds: PropTypes.func,\n    onCurrentSelectPanelChange: PropTypes.func,\n    use12Hours: PropTypes.bool,\n    isAM: PropTypes.bool,\n  };\n\n  onItemChange = (type, itemValue) => {\n    const { onChange, defaultOpenValue, use12Hours } = this.props;\n    const value = (this.props.value || defaultOpenValue).clone();\n\n    if (type === 'hour') {\n      if (use12Hours) {\n        if (this.props.isAM) {\n          value.hour(+itemValue % 12);\n        } else {\n          value.hour((+itemValue % 12) + 12);\n        }\n      } else {\n        value.hour(+itemValue);\n      }\n    } else if (type === 'minute') {\n      value.minute(+itemValue);\n    } else if (type === 'ampm') {\n      const ampm = itemValue.toUpperCase();\n      if (use12Hours) {\n        if (ampm === 'PM' && value.hour() < 12) {\n          value.hour((value.hour() % 12) + 12);\n        }\n\n        if (ampm === 'AM') {\n          if (value.hour() >= 12) {\n            value.hour(value.hour() - 12);\n          }\n        }\n      }\n    } else {\n      value.second(+itemValue);\n    }\n    onChange(value);\n  }\n\n  onEnterSelectPanel = (range) => {\n    this.props.onCurrentSelectPanelChange(range);\n  }\n\n  getHourSelect(hour) {\n    const { prefixCls, hourOptions, disabledHours, showHour, use12Hours } = this.props;\n    if (!showHour) {\n      return null;\n    }\n    const disabledOptions = disabledHours();\n    let hourOptionsAdj;\n    let hourAdj;\n    if (use12Hours) {\n      hourOptionsAdj = [12].concat(hourOptions.filter(h => h < 12 && h > 0));\n      hourAdj = (hour % 12) || 12;\n    } else {\n      hourOptionsAdj = hourOptions;\n      hourAdj = hour;\n    }\n\n    return (\n      <Select\n        prefixCls={prefixCls}\n        options={hourOptionsAdj.map(option => formatOption(option, disabledOptions))}\n        selectedIndex={hourOptionsAdj.indexOf(hourAdj)}\n        type=\"hour\"\n        onSelect={this.onItemChange}\n        onMouseEnter={this.onEnterSelectPanel.bind(this, 'hour')}\n      />\n    );\n  }\n\n  getMinuteSelect(minute) {\n    const { prefixCls, minuteOptions, disabledMinutes, defaultOpenValue, showMinute } = this.props;\n    if (!showMinute) {\n      return null;\n    }\n    const value = this.props.value || defaultOpenValue;\n    const disabledOptions = disabledMinutes(value.hour());\n\n    return (\n      <Select\n        prefixCls={prefixCls}\n        options={minuteOptions.map(option => formatOption(option, disabledOptions))}\n        selectedIndex={minuteOptions.indexOf(minute)}\n        type=\"minute\"\n        onSelect={this.onItemChange}\n        onMouseEnter={this.onEnterSelectPanel.bind(this, 'minute')}\n      />\n    );\n  }\n\n  getSecondSelect(second) {\n    const { prefixCls, secondOptions, disabledSeconds, showSecond, defaultOpenValue } = this.props;\n    if (!showSecond) {\n      return null;\n    }\n    const value = this.props.value || defaultOpenValue;\n    const disabledOptions = disabledSeconds(value.hour(), value.minute());\n\n    return (\n      <Select\n        prefixCls={prefixCls}\n        options={secondOptions.map(option => formatOption(option, disabledOptions))}\n        selectedIndex={secondOptions.indexOf(second)}\n        type=\"second\"\n        onSelect={this.onItemChange}\n        onMouseEnter={this.onEnterSelectPanel.bind(this, 'second')}\n      />\n    );\n  }\n\n  getAMPMSelect() {\n    const { prefixCls, use12Hours, format } = this.props;\n    if (!use12Hours) {\n      return null;\n    }\n\n    const AMPMOptions = ['am', 'pm'] // If format has A char, then we should uppercase AM/PM\n                          .map(c => format.match(/\\sA/) ? c.toUpperCase() : c)\n                          .map(c => ({ value: c }));\n\n    const selected = this.props.isAM ? 0 : 1;\n\n    return (\n      <Select\n        prefixCls={prefixCls}\n        options={AMPMOptions}\n        selectedIndex={selected}\n        type=\"ampm\"\n        onSelect={this.onItemChange}\n        onMouseEnter={this.onEnterSelectPanel.bind(this, 'ampm')}\n      />\n    );\n  }\n\n  render() {\n    const { prefixCls, defaultOpenValue } = this.props;\n    const value = this.props.value || defaultOpenValue;\n    return (\n      <div className={`${prefixCls}-combobox`}>\n        {this.getHourSelect(value.hour())}\n        {this.getMinuteSelect(value.minute())}\n        {this.getSecondSelect(value.second())}\n        {this.getAMPMSelect(value.hour())}\n      </div>\n    );\n  }\n}\n\nexport default Combobox;\n"]}