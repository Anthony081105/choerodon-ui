{"version":3,"sources":["DecadePanel.jsx"],"names":["ROW","COL","goYear","direction","next","state","value","clone","add","setState","chooseDecade","year","event","month","props","onSelect","preventDefault","DecadePanel","defaultValue","prefixCls","rootPrefixCls","nextCentury","bind","previousCentury","locale","currentYear","startYear","parseInt","preYear","endYear","decades","index","rowIndex","colIndex","startDecade","endDecade","decadesEls","map","row","decadeIndex","tds","decadeData","dStartDecade","dEndDecade","isLast","isNext","classNameMap","content","clickHandler","Component","PropTypes","object","string"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nconst ROW = 4;\nconst COL = 3;\n\nfunction goYear(direction) {\n  const next = this.state.value.clone();\n  next.add(direction, 'years');\n  this.setState({\n    value: next,\n  });\n}\n\nfunction chooseDecade(year, event) {\n  const next = this.state.value.clone();\n  next.year(year);\n  next.month(this.state.value.month());\n  this.props.onSelect(next);\n  event.preventDefault();\n}\n\nexport default class DecadePanel extends Component {\n  static propTypes = {\n    locale: PropTypes.object,\n    value: PropTypes.object,\n    defaultValue: PropTypes.object,\n    rootPrefixCls: PropTypes.string,\n  };\n\n  static defaultProps = {\n    onSelect() {\n    },\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value || props.defaultValue,\n    };\n\n    // bind methods\n    this.prefixCls = `${props.rootPrefixCls}-decade-panel`;\n    this.nextCentury = goYear.bind(this, 100);\n    this.previousCentury = goYear.bind(this, -100);\n  }\n\n  render() {\n    const value = this.state.value;\n    const locale = this.props.locale;\n    const currentYear = value.year();\n    const startYear = parseInt(currentYear / 100, 10) * 100;\n    const preYear = startYear - 10;\n    const endYear = startYear + 99;\n    const decades = [];\n    let index = 0;\n    const prefixCls = this.prefixCls;\n\n    for (let rowIndex = 0; rowIndex < ROW; rowIndex++) {\n      decades[rowIndex] = [];\n      for (let colIndex = 0; colIndex < COL; colIndex++) {\n        const startDecade = preYear + index * 10;\n        const endDecade = preYear + index * 10 + 9;\n        decades[rowIndex][colIndex] = {\n          startDecade,\n          endDecade,\n        };\n        index++;\n      }\n    }\n\n    const decadesEls = decades.map((row, decadeIndex) => {\n      const tds = row.map(decadeData => {\n        const dStartDecade = decadeData.startDecade;\n        const dEndDecade = decadeData.endDecade;\n        const isLast = dStartDecade < startYear;\n        const isNext = dEndDecade > endYear;\n        const classNameMap = {\n          [`${prefixCls}-cell`]: 1,\n          [`${prefixCls}-selected-cell`]: dStartDecade <= currentYear && currentYear <= dEndDecade,\n          [`${prefixCls}-last-century-cell`]: isLast,\n          [`${prefixCls}-next-century-cell`]: isNext,\n        };\n        const content = `${dStartDecade}-${dEndDecade}`;\n        let clickHandler;\n        if (isLast) {\n          clickHandler = this.previousCentury;\n        } else if (isNext) {\n          clickHandler = this.nextCentury;\n        } else {\n          clickHandler = chooseDecade.bind(this, dStartDecade);\n        }\n        return (<td\n          key={dStartDecade}\n          onClick={clickHandler}\n          role=\"gridcell\"\n          className={classnames(classNameMap)}\n        >\n          <a\n            className={`${prefixCls}-decade`}\n          >\n            {content}\n          </a>\n        </td>);\n      });\n      return (<tr key={decadeIndex} role=\"row\">{tds}</tr>);\n    });\n\n    return (\n      <div className={this.prefixCls}>\n        <div className={`${prefixCls}-header`}>\n          <a\n            className={`${prefixCls}-prev-century-btn`}\n            role=\"button\"\n            onClick={this.previousCentury}\n            title={locale.previousCentury}\n          />\n\n          <div className={`${prefixCls}-century`}>\n            {startYear}-{endYear}\n          </div>\n          <a\n            className={`${prefixCls}-next-century-btn`}\n            role=\"button\"\n            onClick={this.nextCentury}\n            title={locale.nextCentury}\n          />\n        </div>\n        <div className={`${prefixCls}-body`}>\n          <table className={`${prefixCls}-table`} cellSpacing=\"0\" role=\"grid\">\n            <tbody className={`${prefixCls}-tbody`}>\n            {decadesEls}\n            </tbody>\n          </table>\n        </div>\n      </div>);\n  }\n}\n"]}