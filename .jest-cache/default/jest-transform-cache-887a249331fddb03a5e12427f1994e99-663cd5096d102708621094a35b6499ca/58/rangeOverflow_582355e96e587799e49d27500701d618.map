{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/validator/rules/rangeOverflow.tsx"],"names":[],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA,IAAM,UAAU,GAAG,SAAb,UAAa,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,EAAsB;AACvC,MAAI,KAAJ,EAAW;AACT,WAAO,yBAAa,KAAb,EAAoB,KAApB,EAA2B,IAA3B,CAAgC,UAAA,IAAI;AAAA,aAAI,CAAC,yBAAQ,IAAR,CAAD,IAAkB,MAAM,CAAC,IAAD,CAAN,GAAe,MAAM,CAAC,GAAD,CAA3C;AAAA,KAApC,CAAP;AACD;;AACD,SAAO,CAAC,yBAAQ,KAAR,CAAD,IAAmB,MAAM,CAAC,KAAD,CAAN,GAAgB,MAAM,CAAC,GAAD,CAAhD;AACD,CALD;;AAOc,SAAU,aAAV,CAAwB,KAAxB,EAAoC,KAApC,EAAyD;AAAA,MAC7D,GAD6D,GACJ,KADI,CAC7D,GAD6D;AAAA,MACxD,KADwD,GACJ,KADI,CACxD,KADwD;AAAA,MACjD,MADiD,GACJ,KADI,CACjD,MADiD;AAAA,MACzC,yBADyC,GACJ,KADI,CACzC,yBADyC;AAAA,MACd,KADc,GACJ,KADI,CACd,KADc;;AAErE,MAAI,CAAC,uBAAM,GAAN,CAAD,IAAe,UAAU,CAAC,KAAD,EAAQ,GAAR,EAAa,KAAb,CAA7B,EAAkD;AAChD,QAAM,gBAAgB,GAAG;AAAE,MAAA,GAAG,EAAE,sBAAS,GAAT,IAAgB,GAAG,CAAC,MAAJ,CAAW,MAAX,CAAhB,GAAqC,GAA5C;AAAiD,MAAA,KAAK,EAAL;AAAjD,KAAzB;AACA,QAAM,QAAQ,GAAG,eAAjB;AAFgD,gCAK5C,yBAL4C,CAI7C,QAJ6C;AAAA,QAIlC,iBAJkC,sCAId,uBAAG,WAAH,EAAgB,gBAAhB,CAJc;AAMhD,WAAO,IAAI,4BAAJ,CAAqB;AAC1B,MAAA,iBAAiB,EAAE,qCAAoB,iBAApB,EAAuC,gBAAvC,CADO;AAE1B,MAAA,gBAAgB,EAAhB,gBAF0B;AAG1B,MAAA,KAAK,EAAL,KAH0B;AAI1B,MAAA,QAAQ,EAAR;AAJ0B,KAArB,CAAP;AAMD;;AACD,SAAO,IAAP;AACD","sourcesContent":["import { isMoment } from 'moment';\nimport isNil from 'lodash/isNil';\nimport isEmpty from '../../_util/isEmpty';\nimport ValidationResult from '../ValidationResult';\nimport { $l } from '../../locale-context';\nimport { methodReturn, ValidatorProps } from '.';\nimport formatReactTemplate from '../../formatter/formatReactTemplate';\nimport { toRangeValue } from '../../field/utils';\n\nconst isOverflow = (value, max, range) => {\n  if (range) {\n    return toRangeValue(value, range).some(item => !isEmpty(item) && Number(item) > Number(max));\n  }\n  return !isEmpty(value) && Number(value) > Number(max);\n};\n\nexport default function rangeOverflow(value: any, props: ValidatorProps): methodReturn {\n  const { max, label, format, defaultValidationMessages, range } = props;\n  if (!isNil(max) && isOverflow(value, max, range)) {\n    const injectionOptions = { max: isMoment(max) ? max.format(format) : max, label };\n    const ruleName = 'rangeOverflow';\n    const {\n      [ruleName]: validationMessage = $l('Validator', 'range_overflow'),\n    } = defaultValidationMessages;\n    return new ValidationResult({\n      validationMessage: formatReactTemplate(validationMessage, injectionOptions),\n      injectionOptions,\n      value,\n      ruleName,\n    });\n  }\n  return true;\n}\n"]}