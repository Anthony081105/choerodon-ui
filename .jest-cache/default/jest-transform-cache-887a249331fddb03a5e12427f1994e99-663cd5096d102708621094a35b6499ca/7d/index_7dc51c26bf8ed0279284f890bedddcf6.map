{"version":3,"sources":["index.jsx"],"names":["defaultParser","input","replace","SPEED","DELAY","MAX_SAFE_INTEGER","Number","Math","pow","InputNumber","props","e","keyCode","ratio","getRatio","up","stop","down","onKeyDown","args","onKeyUp","state","focused","inputting","parser","getValueFromEvent","setState","inputValue","onChange","toNumberWhenUserInput","onFocus","value","getCurrentValidValue","persist","setValue","onBlur","autoStepTimer","clearTimeout","recursive","pressingUpOrDown","step","node","prefixCls","disabled","readOnly","useTouch","upDisabledClass","downDisabledClass","isNaN","val","max","min","editable","upEvents","downEvents","onTouchStart","noop","onTouchEnd","onMouseDown","onMouseUp","onMouseLeave","isUpDisabled","isDownDisabled","upHandler","preventDefault","downHandler","defaultValue","toNumber","toPrecisionAsStep","autoFocus","componentDidUpdate","nextProps","getValidValue","start","selectionStart","end","selectionEnd","focusOnUpDown","selectionRange","setSelectionRange","undefined","focus","isNotCompleteNumber","metaKey","ctrlKey","shiftKey","target","trim","parseFloat","v","callback","newValue","changed","precision","valueString","toString","indexOf","parseInt","slice","length","currentValue","ratioPrecision","getPrecision","stepPrecision","currentValuePrecision","getMaxPrecision","blur","num","formatter","abs","toFixed","test","rat","precisionFactor","getPrecisionFactor","result","Infinity","type","outOfRange","setTimeout","classes","className","inputDisplayValue","inputDisplayValueFormat","formatWrapper","style","onMouseEnter","onMouseOver","onMouseOut","required","placeholder","onClick","tabIndex","maxLength","name","id","saveInput","pattern","renderSuffix","label","Component","PropTypes","oneOfType","number","string","bool","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport noop from 'lodash/noop';\nimport isNegativeZero from 'is-negative-zero';\nimport InputHandler from './InputHandler';\nimport Icon from '../../icon';\nimport Input from '../../input';\nimport { preventDefault } from '../../_util/EventManager';\n\nfunction defaultParser(input) {\n  return input.replace(/[^\\w\\.-]+/g, '');\n}\n\n/**\n * When click and hold on a button - the speed of auto changin the value.\n */\nconst SPEED = 200;\n\n/**\n * When click and hold on a button - the delay before auto changin the value.\n */\nconst DELAY = 600;\n\n/**\n * Max Safe Integer -- on IE this is not available, so manually set the number in that case.\n * The reason this is used, instead of Infinity is because numbers above the MSI are unstable\n */\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || Math.pow(2, 53) - 1;\n\nexport default class InputNumber extends Component {\n  static propTypes = {\n    value: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    defaultValue: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    focusOnUpDown: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    onChange: PropTypes.func,\n    onKeyDown: PropTypes.func,\n    onKeyUp: PropTypes.func,\n    prefixCls: PropTypes.string,\n    tabIndex: PropTypes.string,\n    disabled: PropTypes.bool,\n    onFocus: PropTypes.func,\n    onBlur: PropTypes.func,\n    readOnly: PropTypes.bool,\n    max: PropTypes.number,\n    min: PropTypes.number,\n    step: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string,\n    ]),\n    upHandler: PropTypes.node,\n    downHandler: PropTypes.node,\n    useTouch: PropTypes.bool,\n    formatter: PropTypes.func,\n    parser: PropTypes.func,\n    onMouseEnter: PropTypes.func,\n    onMouseLeave: PropTypes.func,\n    onMouseOver: PropTypes.func,\n    onMouseOut: PropTypes.func,\n    precision: PropTypes.number,\n    required: PropTypes.bool,\n    pattern: PropTypes.string,\n    label: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.node,\n    ]),\n  };\n\n  static defaultProps = {\n    focusOnUpDown: true,\n    useTouch: false,\n    prefixCls: 'rc-input-number',\n    min: -MAX_SAFE_INTEGER,\n    step: 1,\n    style: {},\n    onChange: noop,\n    onKeyDown: noop,\n    onFocus: noop,\n    onBlur: noop,\n    parser: defaultParser,\n    required: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    let value;\n    if ('value' in props) {\n      value = props.value;\n    } else {\n      value = props.defaultValue;\n    }\n    value = this.toNumber(value);\n\n    this.state = {\n      inputValue: this.toPrecisionAsStep(value),\n      value,\n      focused: props.autoFocus,\n    };\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if ('value' in nextProps) {\n      const value = this.state.focused\n        ? nextProps.value : this.getValidValue(nextProps.value, nextProps.min, nextProps.max);\n      this.setState({\n        value,\n        inputValue: this.inputting ? value : this.toPrecisionAsStep(value),\n      });\n    }\n  }\n\n  componentWillUpdate() {\n    try {\n      this.start = this.input.selectionStart;\n      this.end = this.input.selectionEnd;\n    } catch (e) {\n      // Fix error in Chrome:\n      // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n      // http://stackoverflow.com/q/21177489/3040605\n    }\n  }\n\n  componentDidUpdate() {\n    // pressingUpOrDown is true means that someone just click up or down button\n    if (!this.pressingUpOrDown) {\n      return;\n    }\n    if (this.props.focusOnUpDown && this.state.focused) {\n      const selectionRange = this.input.setSelectionRange;\n      if (selectionRange &&\n        typeof selectionRange === 'function' &&\n        this.start !== undefined &&\n        this.end !== undefined) {\n        this.input.setSelectionRange(this.start, this.end);\n      } else {\n        this.focus();\n      }\n      this.pressingUpOrDown = false;\n    }\n  }\n\n  componentWillUnmount() {\n    this.stop();\n  }\n\n  onKeyDown = (e, ...args) => {\n    if (e.keyCode === 38) {\n      const ratio = this.getRatio(e);\n      this.up(e, ratio);\n      this.stop();\n    } else if (e.keyCode === 40) {\n      const ratio = this.getRatio(e);\n      this.down(e, ratio);\n      this.stop();\n    }\n    const { onKeyDown } = this.props;\n    if (onKeyDown) {\n      onKeyDown(e, ...args);\n    }\n  };\n\n  onKeyUp = (e, ...args) => {\n    this.stop();\n    const { onKeyUp } = this.props;\n    if (onKeyUp) {\n      onKeyUp(e, ...args);\n    }\n  };\n\n  onChange = (e) => {\n    if (this.state.focused) {\n      this.inputting = true;\n    }\n    const input = this.props.parser(this.getValueFromEvent(e));\n    this.setState({ inputValue: input });\n    this.props.onChange(this.toNumberWhenUserInput(input)); // valid number or invalid string\n  };\n\n  onFocus = (...args) => {\n    this.setState({\n      focused: true,\n    });\n    this.props.onFocus(...args);\n  };\n\n  onBlur = (e, ...args) => {\n    this.inputting = false;\n    this.setState({\n      focused: false,\n    });\n    const value = this.getCurrentValidValue(this.state.inputValue);\n    e.persist();  // fix https://github.com/react-component/input-number/issues/51\n    this.setValue(value, () => {\n      this.props.onBlur(e, ...args);\n    });\n  };\n\n  getCurrentValidValue(value) {\n    let val = value;\n    if (val === '') {\n      val = '';\n    } else if (!this.isNotCompleteNumber(val)) {\n      val = this.getValidValue(val);\n    } else {\n      val = this.state.value;\n    }\n    return this.toNumber(val);\n  }\n\n  getRatio(e) {\n    let ratio = 1;\n    if (e.metaKey || e.ctrlKey) {\n      ratio = 0.1;\n    } else if (e.shiftKey) {\n      ratio = 10;\n    }\n    return ratio;\n  }\n\n  getValueFromEvent(e) {\n    // optimize for chinese input expierence\n    return e.target.value.trim().replace(/。/g, '.');\n  }\n\n  getValidValue(value, min = this.props.min, max = this.props.max) {\n    let val = parseFloat(value, 10);\n    if (isNaN(val)) {\n      return value;\n    }\n    if (val < min) {\n      val = min;\n    }\n    if (val > max) {\n      val = max;\n    }\n    return val;\n  }\n\n  setValue(v, callback) {\n    // trigger onChange\n    const newValue = this.isNotCompleteNumber(parseFloat(v, 10)) ? undefined : parseFloat(v, 10);\n    const changed = newValue !== this.state.value ||\n      `${newValue}` !== `${this.state.inputValue}`;\n    if (!('value' in this.props)) {\n      this.setState({\n        value: newValue,\n        inputValue: this.toPrecisionAsStep(v),\n      }, callback);\n    } else {\n      // always set input value same as value\n      this.setState({\n        inputValue: this.toPrecisionAsStep(this.state.value),\n      }, callback);\n    }\n    if (changed) {\n      this.props.onChange(newValue);\n    }\n  }\n\n  getPrecision(value) {\n    if ('precision' in this.props) {\n      return this.props.precision;\n    }\n    const valueString = value.toString();\n    if (valueString.indexOf('e-') >= 0) {\n      return parseInt(valueString.slice(valueString.indexOf('e-') + 2), 10);\n    }\n    let precision = 0;\n    if (valueString.indexOf('.') >= 0) {\n      precision = valueString.length - valueString.indexOf('.') - 1;\n    }\n    return precision;\n  }\n\n  // step={1.0} value={1.51}\n  // press +\n  // then value should be 2.51, rather than 2.5\n  // if this.props.precision is undefined\n  // https://github.com/react-component/input-number/issues/39\n  getMaxPrecision(currentValue, ratio = 1) {\n    if ('precision' in this.props) {\n      return this.props.precision;\n    }\n    const { step } = this.props;\n    const ratioPrecision = this.getPrecision(ratio);\n    const stepPrecision = this.getPrecision(step);\n    const currentValuePrecision = this.getPrecision(currentValue);\n    if (!currentValue) {\n      return ratioPrecision + stepPrecision;\n    }\n    return Math.max(currentValuePrecision, ratioPrecision + stepPrecision);\n  }\n\n  getPrecisionFactor(currentValue, ratio = 1) {\n    const precision = this.getMaxPrecision(currentValue, ratio);\n    return Math.pow(10, precision);\n  }\n\n  focus() {\n    this.input.focus();\n  }\n\n  blur() {\n    this.input.blur();\n  }\n\n  formatWrapper(num) {\n    // http://2ality.com/2012/03/signedzero.html\n    if (isNegativeZero(num)) {\n      return '-0';\n    }\n    if (this.props.formatter) {\n      return this.props.formatter(num);\n    }\n    return num;\n  }\n\n  toPrecisionAsStep(num) {\n    if (this.isNotCompleteNumber(num) || num === '') {\n      return num;\n    }\n    const precision = Math.abs(this.getMaxPrecision(num));\n    if (precision === 0) {\n      return num.toString();\n    }\n    if (!isNaN(precision)) {\n      return Number(num).toFixed(precision);\n    }\n    return num.toString();\n  }\n\n  // '1.' '1x' 'xx' '' => are not complete numbers\n  isNotCompleteNumber(num) {\n    return (\n      isNaN(num) ||\n      num === '' ||\n      num === null ||\n      (num && num.toString().indexOf('.') === num.toString().length - 1)\n    );\n  }\n\n  toNumber(num) {\n    if (this.isNotCompleteNumber(num)) {\n      return num;\n    }\n    if ('precision' in this.props) {\n      return Number(Number(num).toFixed(this.props.precision));\n    }\n    return Number(num);\n  }\n\n  // '1.0' '1.00'  => may be a inputing number\n  toNumberWhenUserInput(num) {\n    // num.length > 16 => prevent input large number will became Infinity\n    if ((/\\.\\d*0$/.test(num) || num.length > 16) && this.state.focused) {\n      return num;\n    }\n    return this.toNumber(num);\n  }\n\n  upStep(val, rat) {\n    const { step, min } = this.props;\n    const precisionFactor = this.getPrecisionFactor(val, rat);\n    const precision = Math.abs(this.getMaxPrecision(val, rat));\n    let result;\n    if (typeof val === 'number') {\n      result =\n        ((precisionFactor * val + precisionFactor * step * rat) /\n          precisionFactor).toFixed(precision);\n    } else {\n      result = min === -Infinity ? step : min;\n    }\n    return this.toNumber(result);\n  }\n\n  downStep(val, rat) {\n    const { step, min } = this.props;\n    const precisionFactor = this.getPrecisionFactor(val, rat);\n    const precision = Math.abs(this.getMaxPrecision(val, rat));\n    let result;\n    if (typeof val === 'number') {\n      result =\n        ((precisionFactor * val - precisionFactor * step * rat) /\n          precisionFactor).toFixed(precision);\n    } else {\n      result = min === -Infinity ? -step : min;\n    }\n    return this.toNumber(result);\n  }\n\n  step(type, e, ratio = 1, recursive) {\n    this.stop();\n    if (e) {\n      e.persist();\n      e.preventDefault();\n    }\n    const props = this.props;\n    if (props.disabled) {\n      return;\n    }\n    const value = this.getCurrentValidValue(this.state.inputValue) || 0;\n    if (this.isNotCompleteNumber(value)) {\n      return;\n    }\n    let val = this[`${type}Step`](value, ratio);\n    const outOfRange = val > props.max || val < props.min;\n    if (val > props.max) {\n      val = props.max;\n    } else if (val < props.min) {\n      val = props.min;\n    }\n    this.setValue(val);\n    this.setState({\n      focused: true,\n    });\n    if (outOfRange) {\n      return;\n    }\n    this.autoStepTimer = setTimeout(() => {\n      this[type](e, ratio, true);\n    }, recursive ? SPEED : DELAY);\n  }\n\n  stop = () => {\n    if (this.autoStepTimer) {\n      clearTimeout(this.autoStepTimer);\n    }\n  };\n\n  down = (e, ratio, recursive) => {\n    this.pressingUpOrDown = true;\n    this.step('down', e, ratio, recursive);\n  };\n\n  up = (e, ratio, recursive) => {\n    this.pressingUpOrDown = true;\n    this.step('up', e, ratio, recursive);\n  };\n\n  saveInput = (node) => {\n    this.input = node;\n  };\n\n  renderSuffix = () => {\n    const props = { ...this.props };\n    const { prefixCls, disabled, readOnly, useTouch } = props;\n    let upDisabledClass = '';\n    let downDisabledClass = '';\n    const { value } = this.state;\n    if (value || value === 0) {\n      if (!isNaN(value)) {\n        const val = Number(value);\n        if (val >= props.max) {\n          upDisabledClass = `${prefixCls}-handler-up-disabled`;\n        }\n        if (val <= props.min) {\n          downDisabledClass = `${prefixCls}-handler-down-disabled`;\n        }\n      } else {\n        upDisabledClass = `${prefixCls}-handler-up-disabled`;\n        downDisabledClass = `${prefixCls}-handler-down-disabled`;\n      }\n    }\n    const editable = !props.readOnly && !props.disabled;\n    let upEvents;\n    let downEvents;\n    if (useTouch) {\n      upEvents = {\n        onTouchStart: (editable && !upDisabledClass) ? this.up : noop,\n        onTouchEnd: this.stop,\n      };\n      downEvents = {\n        onTouchStart: (editable && !downDisabledClass) ? this.down : noop,\n        onTouchEnd: this.stop,\n      };\n    } else {\n      upEvents = {\n        onMouseDown: (editable && !upDisabledClass) ? this.up : noop,\n        onMouseUp: this.stop,\n        onMouseLeave: this.stop,\n      };\n      downEvents = {\n        onMouseDown: (editable && !downDisabledClass) ? this.down : noop,\n        onMouseUp: this.stop,\n        onMouseLeave: this.stop,\n      };\n    }\n    const isUpDisabled = !!upDisabledClass || disabled || readOnly;\n    const isDownDisabled = !!downDisabledClass || disabled || readOnly;\n    return (<div className={`${prefixCls}-handler-wrap`}>\n      <InputHandler\n        ref=\"up\"\n        disabled={isUpDisabled}\n        prefixCls={prefixCls}\n        unselectable=\"unselectable\"\n        {...upEvents}\n        role=\"button\"\n        aria-label=\"Increase Value\"\n        aria-disabled={!!isUpDisabled}\n        className={`${prefixCls}-handler ${prefixCls}-handler-up ${upDisabledClass}`}\n      >\n        {this.props.upHandler || <Icon\n          unselectable=\"unselectable\"\n          type=\"baseline-arrow_drop_up\"\n          className={`${prefixCls}-handler-up-inner`}\n          onClick={preventDefault}\n        />}\n      </InputHandler>\n      <InputHandler\n        ref=\"down\"\n        disabled={isDownDisabled}\n        prefixCls={prefixCls}\n        unselectable=\"unselectable\"\n        {...downEvents}\n        role=\"button\"\n        aria-label=\"Decrease Value\"\n        aria-disabled={!!isDownDisabled}\n        className={`${prefixCls}-handler ${prefixCls}-handler-down ${downDisabledClass}`}\n      >\n        {this.props.downHandler || <Icon\n          unselectable=\"unselectable\"\n          type=\"baseline-arrow_drop_down\"\n          className={`${prefixCls}-handler-down-inner`}\n          onClick={preventDefault}\n        />}\n      </InputHandler>\n    </div>);\n  };\n\n  render() {\n    const props = { ...this.props };\n    const { prefixCls, disabled, readOnly, useTouch } = props;\n    const classes = classNames({\n      [prefixCls]: true,\n      [props.className]: !!props.className,\n    });\n    const editable = !props.readOnly && !props.disabled;\n    // focus state, show input value\n    // unfocus state, show valid value\n    let inputDisplayValue;\n    if (this.state.focused) {\n      inputDisplayValue = this.state.inputValue;\n    } else {\n      inputDisplayValue = this.toPrecisionAsStep(this.state.value);\n    }\n\n    if (inputDisplayValue === undefined || inputDisplayValue === null) {\n      inputDisplayValue = '';\n    }\n    const inputDisplayValueFormat = this.formatWrapper(inputDisplayValue);\n    // ref for test\n    return (\n      <div\n        className={classes}\n        style={props.style}\n        onMouseEnter={props.onMouseEnter}\n        onMouseLeave={props.onMouseLeave}\n        onMouseOver={props.onMouseOver}\n        onMouseOut={props.onMouseOut}\n      >\n        <Input\n          required={props.required}\n          type={props.type}\n          placeholder={props.placeholder}\n          onClick={props.onClick}\n          tabIndex={props.tabIndex}\n          autoComplete=\"off\"\n          onFocus={this.onFocus}\n          onBlur={this.onBlur}\n          onKeyDown={editable ? this.onKeyDown : noop}\n          onKeyUp={editable ? this.onKeyUp : noop}\n          autoFocus={props.autoFocus}\n          maxLength={props.maxLength}\n          readOnly={props.readOnly}\n          disabled={props.disabled}\n          max={props.max}\n          min={props.min}\n          step={props.step}\n          name={props.name}\n          id={props.id}\n          onChange={this.onChange}\n          ref={this.saveInput}\n          value={inputDisplayValueFormat}\n          pattern={props.pattern}\n          suffix={this.renderSuffix()}\n          label={props.label}\n        />\n      </div>\n    );\n  }\n}\n"]}