988db6f56747916a416c3602265dd240
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _icon = _interopRequireDefault(require("../../icon"));

var _input = _interopRequireDefault(require("../../input"));

var _button = _interopRequireDefault(require("../../button"));

var _util = require("./util");

function _createSuper(Derived) {
  function isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;

    try {
      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
      return true;
    } catch (e) {
      return false;
    }
  }

  return function () {
    var Super = (0, _getPrototypeOf2["default"])(Derived),
        result;

    if (isNativeReflectConstruct()) {
      var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return (0, _possibleConstructorReturn2["default"])(this, result);
  };
}

var FilterInput =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(FilterInput, _Component);

  var _super = _createSuper(FilterInput);

  function FilterInput(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, FilterInput);
    _this = _super.call(this, props);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "componentWillReceiveProps", function (nextProps) {
      if ('filterValue' in nextProps) {
        var value = nextProps.filterValue;

        _this.setState({
          value: value
        });
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleChange", function (event, input) {
      var onChange = _this.props.onChange;
      onChange(event.target.value);

      _this.setState({
        value: event.target.value
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "clearInputValue", function () {
      var onChange = _this.props.onChange;
      onChange('');
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "focus", function () {
      _this.filterInputRef.focus();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "blur", function () {
      _this.filterInputRef.blur();
    });

    var _value = props.filterValue || '';

    _this.state = {
      value: _value
    };
    return _this;
  }

  (0, _createClass2["default"])(FilterInput, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          prefixCls = _this$props.prefixCls,
          placeholder = _this$props.placeholder;
      var value = this.state.value;

      var suffix = value && _react["default"].createElement(_button["default"], {
        size: "small",
        onClick: this.clearInputValue,
        shape: "circle",
        icon: "close"
      });

      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-filter")
      }, _react["default"].createElement("span", {
        className: "".concat(prefixCls, "-filter-input")
      }, _react["default"].createElement(_input["default"], {
        value: value,
        placeholder: placeholder,
        prefix: _react["default"].createElement(_icon["default"], {
          type: "search"
        }),
        suffix: suffix,
        onChange: this.handleChange,
        onKeyDown: this.props.onKeyDown,
        ref: (0, _util.saveRef)(this, 'filterInputRef')
      })));
    }
  }]);
  return FilterInput;
}(_react.Component);

(0, _defineProperty2["default"])(FilterInput, "propTypes", {
  prefixCls: _propTypes["default"].string,
  placeholder: _propTypes["default"].string,
  onChange: _propTypes["default"].func,
  onKeyDown: _propTypes["default"].func
});
var _default = FilterInput;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZpbHRlcklucHV0LmpzeCJdLCJuYW1lcyI6WyJGaWx0ZXJJbnB1dCIsInByb3BzIiwibmV4dFByb3BzIiwidmFsdWUiLCJmaWx0ZXJWYWx1ZSIsInNldFN0YXRlIiwiZXZlbnQiLCJpbnB1dCIsIm9uQ2hhbmdlIiwidGFyZ2V0IiwiZmlsdGVySW5wdXRSZWYiLCJmb2N1cyIsImJsdXIiLCJzdGF0ZSIsInByZWZpeENscyIsInBsYWNlaG9sZGVyIiwic3VmZml4IiwiY2xlYXJJbnB1dFZhbHVlIiwiaGFuZGxlQ2hhbmdlIiwib25LZXlEb3duIiwiQ29tcG9uZW50IiwiUHJvcFR5cGVzIiwic3RyaW5nIiwiZnVuYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBRU1BLFc7Ozs7Ozs7QUFRSix1QkFBWUMsS0FBWixFQUFtQjtBQUFBOztBQUFBO0FBQ2pCLDhCQUFNQSxLQUFOO0FBRGlCLGtIQVFTLFVBQUFDLFNBQVMsRUFBSTtBQUN2QyxVQUFJLGlCQUFpQkEsU0FBckIsRUFBZ0M7QUFDOUIsWUFBTUMsS0FBSyxHQUFHRCxTQUFTLENBQUNFLFdBQXhCOztBQUNBLGNBQUtDLFFBQUwsQ0FBYztBQUNaRixVQUFBQSxLQUFLLEVBQUxBO0FBRFksU0FBZDtBQUdEO0FBQ0YsS0Fma0I7QUFBQSxxR0FpQkosVUFBQ0csS0FBRCxFQUFPQyxLQUFQLEVBQWlCO0FBQUEsVUFDdEJDLFFBRHNCLEdBQ1QsTUFBS1AsS0FESSxDQUN0Qk8sUUFEc0I7QUFFOUJBLE1BQUFBLFFBQVEsQ0FBQ0YsS0FBSyxDQUFDRyxNQUFOLENBQWFOLEtBQWQsQ0FBUjs7QUFDQSxZQUFLRSxRQUFMLENBQWM7QUFDWkYsUUFBQUEsS0FBSyxFQUFFRyxLQUFLLENBQUNHLE1BQU4sQ0FBYU47QUFEUixPQUFkO0FBR0QsS0F2QmtCO0FBQUEsd0dBeUJELFlBQU07QUFBQSxVQUNkSyxRQURjLEdBQ0QsTUFBS1AsS0FESixDQUNkTyxRQURjO0FBRXRCQSxNQUFBQSxRQUFRLENBQUMsRUFBRCxDQUFSO0FBQ0QsS0E1QmtCO0FBQUEsOEZBOEJYLFlBQU07QUFDWixZQUFLRSxjQUFMLENBQW9CQyxLQUFwQjtBQUNELEtBaENrQjtBQUFBLDZGQWtDWixZQUFNO0FBQ1gsWUFBS0QsY0FBTCxDQUFvQkUsSUFBcEI7QUFDRCxLQXBDa0I7O0FBRWpCLFFBQU1ULE1BQUssR0FBR0YsS0FBSyxDQUFDRyxXQUFOLElBQXFCLEVBQW5DOztBQUNBLFVBQUtTLEtBQUwsR0FBYTtBQUNYVixNQUFBQSxLQUFLLEVBQUxBO0FBRFcsS0FBYjtBQUhpQjtBQU1sQjs7Ozs2QkFnQ1E7QUFBQSx3QkFDNEIsS0FBS0YsS0FEakM7QUFBQSxVQUNDYSxTQURELGVBQ0NBLFNBREQ7QUFBQSxVQUNZQyxXQURaLGVBQ1lBLFdBRFo7QUFBQSxVQUVDWixLQUZELEdBRVcsS0FBS1UsS0FGaEIsQ0FFQ1YsS0FGRDs7QUFHUCxVQUFNYSxNQUFNLEdBQUdiLEtBQUssSUFBSSxnQ0FBQyxrQkFBRDtBQUFRLFFBQUEsSUFBSSxFQUFDLE9BQWI7QUFBcUIsUUFBQSxPQUFPLEVBQUUsS0FBS2MsZUFBbkM7QUFBb0QsUUFBQSxLQUFLLEVBQUMsUUFBMUQ7QUFBbUUsUUFBQSxJQUFJLEVBQUM7QUFBeEUsUUFBeEI7O0FBQ0EsYUFDRTtBQUFLLFFBQUEsU0FBUyxZQUFLSCxTQUFMO0FBQWQsU0FDRTtBQUFNLFFBQUEsU0FBUyxZQUFLQSxTQUFMO0FBQWYsU0FDRSxnQ0FBQyxpQkFBRDtBQUNFLFFBQUEsS0FBSyxFQUFFWCxLQURUO0FBRUUsUUFBQSxXQUFXLEVBQUVZLFdBRmY7QUFHRSxRQUFBLE1BQU0sRUFBRSxnQ0FBQyxnQkFBRDtBQUFNLFVBQUEsSUFBSSxFQUFDO0FBQVgsVUFIVjtBQUlFLFFBQUEsTUFBTSxFQUFFQyxNQUpWO0FBS0UsUUFBQSxRQUFRLEVBQUUsS0FBS0UsWUFMakI7QUFNRSxRQUFBLFNBQVMsRUFBRSxLQUFLakIsS0FBTCxDQUFXa0IsU0FOeEI7QUFPRSxRQUFBLEdBQUcsRUFBRSxtQkFBUSxJQUFSLEVBQWMsZ0JBQWQ7QUFQUCxRQURGLENBREYsQ0FERjtBQWVEOzs7RUFqRXVCQyxnQjs7aUNBQXBCcEIsVyxlQUNlO0FBQ2pCYyxFQUFBQSxTQUFTLEVBQUVPLHNCQUFVQyxNQURKO0FBRWpCUCxFQUFBQSxXQUFXLEVBQUVNLHNCQUFVQyxNQUZOO0FBR2pCZCxFQUFBQSxRQUFRLEVBQUVhLHNCQUFVRSxJQUhIO0FBSWpCSixFQUFBQSxTQUFTLEVBQUVFLHNCQUFVRTtBQUpKLEM7ZUFtRU52QixXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5pbXBvcnQgSWNvbiBmcm9tICcuLi8uLi9pY29uJztcbmltcG9ydCBJbnB1dCBmcm9tICcuLi8uLi9pbnB1dCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uLy4uL2J1dHRvbic7XG5pbXBvcnQgeyBzYXZlUmVmIH0gZnJvbSAnLi91dGlsJztcblxuY2xhc3MgRmlsdGVySW5wdXQgZXh0ZW5kcyBDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIHByZWZpeENsczogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwbGFjZWhvbGRlcjogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25LZXlEb3duOiBQcm9wVHlwZXMuZnVuYyxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBjb25zdCB2YWx1ZSA9IHByb3BzLmZpbHRlclZhbHVlIHx8ICcnO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZSxcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzID0gbmV4dFByb3BzID0+IHtcbiAgICBpZiAoJ2ZpbHRlclZhbHVlJyBpbiBuZXh0UHJvcHMpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbmV4dFByb3BzLmZpbHRlclZhbHVlO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQ2hhbmdlID0gKGV2ZW50LGlucHV0KSA9PiB7XG4gICAgY29uc3QgeyBvbkNoYW5nZSB9ID0gdGhpcy5wcm9wcztcbiAgICBvbkNoYW5nZShldmVudC50YXJnZXQudmFsdWUpO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdmFsdWU6IGV2ZW50LnRhcmdldC52YWx1ZVxuICAgIH0pO1xuICB9XG5cbiAgY2xlYXJJbnB1dFZhbHVlID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgb25DaGFuZ2UoJycpO1xuICB9XG5cbiAgZm9jdXMgPSAoKSA9PiB7XG4gICAgdGhpcy5maWx0ZXJJbnB1dFJlZi5mb2N1cygpO1xuICB9XG5cbiAgYmx1ciA9ICgpID0+IHtcbiAgICB0aGlzLmZpbHRlcklucHV0UmVmLmJsdXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHByZWZpeENscywgcGxhY2Vob2xkZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyB2YWx1ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBzdWZmaXggPSB2YWx1ZSAmJiA8QnV0dG9uIHNpemU9J3NtYWxsJyBvbkNsaWNrPXt0aGlzLmNsZWFySW5wdXRWYWx1ZX0gc2hhcGU9XCJjaXJjbGVcIiBpY29uPVwiY2xvc2VcIiAvPjtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tZmlsdGVyYH0+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1maWx0ZXItaW5wdXRgfT5cbiAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn1cbiAgICAgICAgICAgIHByZWZpeD17PEljb24gdHlwZT1cInNlYXJjaFwiIC8+fVxuICAgICAgICAgICAgc3VmZml4PXtzdWZmaXh9XG4gICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICBvbktleURvd249e3RoaXMucHJvcHMub25LZXlEb3dufVxuICAgICAgICAgICAgcmVmPXtzYXZlUmVmKHRoaXMsICdmaWx0ZXJJbnB1dFJlZicpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVySW5wdXQ7XG4iXX0=