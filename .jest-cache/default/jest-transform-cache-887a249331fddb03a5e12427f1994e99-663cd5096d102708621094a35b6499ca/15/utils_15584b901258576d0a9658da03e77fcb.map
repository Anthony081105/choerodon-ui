{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/form/utils.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAKO,IAAM,iBAAiB,GAAW,GAAlC;;AAEA,IAAM,kBAAkB,GAAA;AAAA;AAAxB;;AAEA,IAAM,cAAc,GAAW,CAA/B;;AAEA,IAAM,YAAY,GAAG,OAArB;;;AAED,SAAU,mBAAV,CAA8B,UAA9B,EAA0C,OAA1C,EAAiD;AACrD,MAAI,0BAAS,UAAT,CAAJ,EAA0B;AACxB,WAAO,IAAI,KAAJ,CAAU,OAAV,EAAmB,IAAnB,CAAwB,UAAxB,CAAP;AACD;;AACD,MAAM,WAAW,GAAG,IAAI,KAAJ,CAAU,OAAV,EAAmB,IAAnB,CAAwB,iBAAxB,CAApB;AACA,EAAA,UAAU,CAAC,KAAX,CAAiB,CAAjB,EAAoB,OAApB,EAA6B,OAA7B,CAAqC,UAAC,KAAD,EAAQ,KAAR;AAAA,WAAmB,WAAW,CAAC,KAAD,CAAX,GAAqB,KAAxC;AAAA,GAArC;AACA,SAAO,WAAP;AACD;;AAEK,SAAU,WAAV,CAAsB,KAAtB,EAAkC,GAAlC,EAA+C,OAA/C,EAAkE,MAAlE,EAAiF;AACrF,MAAI,KAAK,CAAC,GAAD,CAAT,EAAgB;AACd,WAAO,KAAK,CAAC,GAAD,CAAZ;AACD;;AAHoF,MAI7E,IAJ6E,GAIpE,KAJoE,CAI7E,IAJ6E;AAMrF,MAAM,KAAK,GAAG,MAAM,GAAG,MAAM,CAAC,QAAP,CAAgB,IAAhB,CAAH,GAA2B,OAAO,IAAI,OAAO,CAAC,QAAR,CAAiB,IAAjB,CAA1D;;AAEA,MAAI,KAAJ,EAAW;AACT,QAAM,aAAa,GAAG,KAAK,CAAC,GAAN,CAAU,GAAV,CAAtB;;AACA,QAAI,aAAJ,EAAmB;AACjB,aAAO,aAAP;AACD;AACF;AACF;;AAEM,IAAM,yBAAyB,GAAa,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,CAA5C;;;AAEP,SAAS,oBAAT,CAA8B,IAA9B,EAA+C;AAC7C,MAAI,IAAI,CAAC,QAAT,EAAmB;AACjB,QAAI,KAAJ;AACA,wCAAK,IAAI,CAAC,QAAV,EAAsD,IAAtD,CAA2D,UAAA,KAAK,EAAG;AACjE,UAAI,KAAK,CAAC,QAAN,GAAiB,CAAC,CAAtB,EAAyB;AACvB,QAAA,KAAK,GAAG,KAAR;AACD,OAFD,MAEO;AACL,QAAA,KAAK,GAAG,oBAAoB,CAAC,KAAD,CAA5B;AACD;;AACD,aAAO,CAAC,CAAC,KAAT;AACD,KAPD;AAQA,WAAO,KAAP;AACD;AACF;;AAEK,SAAU,uBAAV,CAAkC,IAAlC,EAAmD;AACvD,MAAI,IAAI,CAAC,QAAT,EAAmB;AACjB,QAAI,KAAJ;AACA,wCAAK,IAAI,CAAC,QAAV,EAAsD,IAAtD,CAA2D,UAAA,KAAK,EAAG;AACjE,UAAI,KAAK,CAAC,SAAN,CAAgB,QAAhB,CAAyB,SAAzB,CAAJ,EAAyC;AACvC,QAAA,KAAK,GAAG,oBAAoB,CAAC,KAAD,CAA5B;AACD,OAFD,MAEO;AACL,QAAA,KAAK,GAAG,uBAAuB,CAAC,KAAD,CAA/B;AACD;;AACD,aAAO,CAAC,CAAC,KAAT;AACD,KAPD;AAQA,WAAO,KAAP;AACD;AACF","sourcesContent":["import isNumber from 'lodash/isNumber';\nimport DataSet from '../data-set/DataSet';\nimport Record from '../data-set/Record';\nimport { LabelLayout } from './enum';\n\nexport const defaultLabelWidth: number = 100;\n\nexport const defaultLabelLayout: LabelLayout = LabelLayout.horizontal;\n\nexport const defaultColumns: number = 1;\n\nexport const FIELD_SUFFIX = 'field';\n\nexport function normalizeLabelWidth(labelWidth, columns) {\n  if (isNumber(labelWidth)) {\n    return new Array(columns).fill(labelWidth);\n  }\n  const labelWidths = new Array(columns).fill(defaultLabelWidth);\n  labelWidth.slice(0, columns).forEach((width, index) => (labelWidths[index] = width));\n  return labelWidths;\n}\n\nexport function getProperty(props: any, key: string, dataSet?: DataSet, record?: Record): any {\n  if (props[key]) {\n    return props[key];\n  }\n  const { name } = props;\n\n  const field = record ? record.getField(name) : dataSet && dataSet.getField(name);\n\n  if (field) {\n    const fieldProperty = field.get(key);\n    if (fieldProperty) {\n      return fieldProperty;\n    }\n  }\n}\n\nexport const defaultExcludeUseColonTag: string[] = ['div', 'button', 'Button'];\n\nfunction findFocusableElement(node: HTMLElement): HTMLElement | undefined {\n  if (node.children) {\n    let found: HTMLElement | undefined;\n    [...(node.children as HTMLCollectionOf<HTMLElement>)].some(child => {\n      if (child.tabIndex > -1) {\n        found = child;\n      } else {\n        found = findFocusableElement(child);\n      }\n      return !!found;\n    });\n    return found;\n  }\n}\n\nexport function findFirstInvalidElement(node: HTMLElement): HTMLElement | undefined {\n  if (node.children) {\n    let found: HTMLElement | undefined;\n    [...(node.children as HTMLCollectionOf<HTMLElement>)].some(child => {\n      if (child.className.includes('invalid')) {\n        found = findFocusableElement(child);\n      } else {\n        found = findFirstInvalidElement(child);\n      }\n      return !!found;\n    });\n    return found;\n  }\n}\n"]}