{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/select/Select.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA,SAAS,eAAT,CAAyB,IAAzB,EAAqC,SAArC,EAAsD;AACpD,MAAM,KAAK,GAAG,IAAI,CAAC,QAAL,EAAd;AACA,MAAM,MAAM,GAAG,IAAI,CAAC,WAAL,EAAf;AACA,MAAM,KAAK,GAAG,KAAK,CAAC,QAAN,EAAd;AACA,EAAA,KAAK,CAAC,QAAN,CAAe;AACb,IAAA,SAAS,qCACJ,KAAK,CAAC,SADF,uCAEN,MAFM,EAEG,SAFH;AADI,GAAf;AAMD;;AAED,SAAS,oBAAT,OAAyD;AAAA,MAAzB,MAAyB,QAAzB,MAAyB;AAAA,MAAjB,IAAiB,QAAjB,IAAiB;AAAA,MAAX,SAAW,QAAX,SAAW;AACvD,SAAO,MAAM,CAAC,GAAP,CAAW,SAAX,EAAsB,OAAtB,CAA8B,IAA9B,MAAwC,CAAC,CAAhD;AACD;;AAED,IAAM,aAAa,GAAG,YAAtB;;AAEA,SAAS,eAAT,QAAmC;AAAA,MAAR,MAAQ,SAAR,MAAQ;AACjC,SAAO;AACL,IAAA,QAAQ,EAAE,MAAM,CAAC,GAAP,CAAW,aAAX;AADL,GAAP;AAGD;;AAEK,SAAU,UAAV,CAAqB,MAArB,EAAqC,IAArC,EAAsD,KAAtD,EAAgE;AACpE,wBAAe,KAAK,IAAI,MAAM,CAAC,EAA/B,cAAqC,CAAC,2BAAe,IAAf,IAAuB,IAAI,CAAC,GAA5B,GAAkC,IAAnC,KAA4C,MAAM,CAAC,EAAxF;AACD;;AAED,SAAS,cAAT,CAAwB,KAAxB,EAA+B,UAA/B,EAAyC;AACvC,MAAI,+BAAc,KAAd,CAAJ,EAA0B;AACxB,WAAO,gBAAgB,CAAC,GAAjB,CAAqB,KAArB,EAA4B,UAA5B,CAAP;AACD;;AACD,SAAO,KAAP;AACD;;IA+EY,M;;;;;AAAb,oBAAA;AAAA;;AAAA;;AA2DE,UAAA,YAAA,GAAwB,IAAI,mBAAJ,EAAxB;AA6oBA,UAAA,QAAA,GAAW,0BAAS,UAAA,KAAK;AAAA,aAAI,MAAK,YAAL,CAAkB,KAAlB,CAAJ;AAAA,KAAd,EAA4C,GAA5C,CAAX;AAxsBF;AAy2BC;;;;6BA/rBU,I,EAAI;AACX,WAAK,IAAL,GAAY,IAAZ;AACD;;;iCAES;AAAA;;AACR,WAAK,kBAAL,GAA0B,oBAAS;AAAA,eAAM,MAAI,CAAC,cAAX;AAAA,OAAT,EAAoC;AAAA,eAAM,MAAI,CAAC,mBAAL,EAAN;AAAA,OAApC,CAA1B;AACD;;;iCAES;AAAA;;AACR,WAAK,kBAAL,GAA0B,oBACxB;AAAA,eAAM,MAAI,CAAC,QAAL,EAAN;AAAA,OADwB,EAExB,UAAA,KAAK;AAAA,eAAI,MAAI,CAAC,mBAAL,CAAyB,KAAzB,CAAJ;AAAA,OAFmB,CAA1B;AAID;;;sCAEc;AACb,UAAI,KAAK,kBAAT,EAA6B;AAC3B,aAAK,kBAAL;AACA,aAAK,kBAAL,GAA0B,SAA1B;AACD;AACF;;;sCAEc;AACb,UAAI,KAAK,kBAAT,EAA6B;AAC3B,aAAK,kBAAL;AACA,aAAK,kBAAL,GAA0B,SAA1B;AACD;AACF;;;oCAEY;AACX,WAAK,eAAL;AACA,WAAK,eAAL;AACD;;;yCAEiB;AAChB;AADgB,wBAE6B,KAAK,KAFlC;AAAA,UAER,yBAFQ,eAER,yBAFQ;AAAA,UAEmB,KAFnB,eAEmB,KAFnB;;AAGhB,UAAI,yBAAJ,EAA+B;AAC7B,aAAK,UAAL;AACD;;AACD,UAAI,KAAJ,EAAW;AACT,aAAK,UAAL;AACA,aAAK,mBAAL,CAAyB,KAAK,QAAL,EAAzB;AACD;AACF;;;2CAEmB;AAClB;AACA,WAAK,QAAL,CAAc,MAAd;AACA,WAAK,aAAL;AACD;;;8CAEyB,S,EAAW,W,EAAW;AAC9C,8HAAgC,SAAhC,EAA2C,WAA3C;AAD8C,yBAED,KAAK,KAFJ;AAAA,UAEtC,yBAFsC,gBAEtC,yBAFsC;AAAA,UAEX,KAFW,gBAEX,KAFW;;AAG9C,UAAI,yBAAyB,IAAI,CAAC,SAAS,CAAC,yBAA5C,EAAuE;AACrE,aAAK,eAAL;AACD;;AACD,UAAI,CAAC,yBAAD,IAA8B,SAAS,CAAC,yBAA5C,EAAuE;AACrE,aAAK,UAAL;AACD;;AACD,UAAI,KAAK,IAAI,CAAC,SAAS,CAAC,KAAxB,EAA+B;AAC7B,aAAK,kBAAL;AACA,aAAK,eAAL;AACD;;AACD,UAAI,CAAC,KAAD,IAAU,SAAS,CAAC,KAAxB,EAA+B;AAC7B,aAAK,UAAL;;AACA,YAAI,WAAW,SAAf,EAA0B;AACxB,eAAK,mBAAL,CAAyB,SAAS,CAAC,KAAnC;AACD;AACF;AACF;;;yCAEiB;AAChB,WAAK,eAAL;AACD;;;oCAEY;AACX,UAAM,UAAU,GAAG,mIAA4B,CAC7C,YAD6C,EAE7C,eAF6C,EAG7C,OAH6C,EAI7C,UAJ6C,EAK7C,OAL6C,EAM7C,MAN6C,EAO7C,SAP6C,EAQ7C,eAR6C,EAS7C,0BAT6C,EAU7C,mBAV6C,EAW7C,2BAX6C,EAY7C,gBAZ6C,EAa7C,gBAb6C,EAc7C,iBAd6C,EAe7C,UAf6C,CAA5B,CAAnB;AAiBA,aAAO,UAAP;AACD;;;uCAEkB,K,EAAO,O,EAAO;AAC/B,iKAC8B,KAD9B,EACqC,OADrC;AAEE,QAAA,QAAQ,EAAE,KAAK,CAAC,QAFlB;AAGE,QAAA,OAAO,EAAE,KAAK,CAAC,OAHjB;AAIE,QAAA,KAAK,EAAE,KAAK,CAAC,KAJf;AAKE,QAAA,cAAc,EAAE,KAAK,CAAC,cALxB;AAME,QAAA,aAAa,EAAE,KAAK,CAAC;AANvB;AAQD;;;uCAEe;AACd,uBAAU,KAAK,SAAf;AACD;;;2CAEmB;AAAA,UACV,IADU,GACS,IADT,CACV,IADU;AAAA,UACJ,QADI,GACS,IADT,CACJ,QADI;;AAElB,UAAI,QAAJ,EAAc;AACZ;AACD;;AACD,aACE,kBAAA,aAAA,CAAA,OAAA,EAAA;AACE,QAAA,GAAG,EAAC,OADN;AAEE,QAAA,IAAI,EAAC,QAFP;AAGE,QAAA,KAAK,EAAE,KAAK,aAAL,CAAmB,KAAK,QAAL,EAAnB,KAAuC,EAHhD;AAIE,QAAA,IAAI,EAAE,IAJR;AAKE,QAAA,QAAQ,EAAE;AALZ,OAAA,CADF;AASD;;;yCAEiB;AAAA,UACR,eADQ,GACY,KAAK,KADjB,CACR,eADQ;;AAEhB,UAAI,eAAe,KAAK,SAAxB,EAAmC;AACjC,eAAO,eAAP;AACD;;AACD,aAAO,0BAAU,aAAV,EAAyB,QAAzB,CAAP;AACD;;;8BAG6B;AAAA;;AAAA,UAAtB,SAAsB,uEAAF,EAAE;AAAA,UAE1B,OAF0B,GAMxB,IANwB,CAE1B,OAF0B;AAAA,UAG1B,SAH0B,GAMxB,IANwB,CAG1B,SAH0B;AAAA,UAI1B,UAJ0B,GAMxB,IANwB,CAI1B,UAJ0B;AAAA,yBAMxB,IANwB,CAK1B,KAL0B;AAAA,UAKjB,iBALiB,gBAKjB,iBALiB;AAAA,UAKE,cALF,gBAKE,cALF;AAAA,UAKkB,QALlB,gBAKkB,QALlB;;AAO5B,UAAI,CAAC,OAAL,EAAc;AACZ,eAAO,IAAP;AACD;;AACD,UAAM,YAAY,GAAG,KAAK,UAAL,EAArB;AACA,UAAM,MAAM,GAAG,OAAO,CAAC,SAAR,EAAf;AACA,UAAM,SAAS,GAAwB,EAAvC;AACA,UAAM,YAAY,GAAU,EAA5B;AACA,WAAK,eAAL,CAAqB,OAArB,CAA6B,UAAA,MAAM,EAAG;AACpC,YAAI,aAAJ;AACA,QAAA,MAAM,CAAC,KAAP,CAAa,UAAA,KAAK,EAAG;AACnB,cAAM,KAAK,GAAG,MAAM,CAAC,GAAP,CAAW,KAAX,CAAd;;AACA,cAAI,KAAK,KAAK,SAAd,EAAyB;AACvB,gBAAI,CAAC,aAAL,EAAoB;AAClB,cAAA,aAAa,GAAG,SAAS,CAAC,IAAV,CAAe,UAAA,IAAI;AAAA,uBAAI,IAAI,CAAC,KAAL,CAAW,KAAX,KAAqB,KAAzB;AAAA,eAAnB,CAAhB;;AACA,kBAAI,CAAC,aAAL,EAAoB;AAClB,gBAAA,aAAa,GACX,kBAAA,aAAA,CAAC,eAAD,EAAU;AAAC,kBAAA,GAAG,kBAAW,KAAX,CAAJ;AAAwB,kBAAA,KAAK,EAAE;AAA/B,iBAAV,EACG,EADH,CADF;AAKA,gBAAA,SAAS,CAAC,IAAV,CAAe,aAAf;AACD;AACF,aAVD,MAUO;AAAA,kBACG,QADH,GACgB,aAAa,CAAC,KAD9B,CACG,QADH;AAEL,cAAA,aAAa,GAAG,QAAQ,CAAC,IAAT,CAAc,UAAA,IAAI;AAAA,uBAAI,IAAI,CAAC,KAAL,CAAW,KAAX,KAAqB,KAAzB;AAAA,eAAlB,CAAhB;;AACA,kBAAI,CAAC,aAAL,EAAoB;AAClB,gBAAA,aAAa,GACX,kBAAA,aAAA,CAAC,eAAD,EAAU;AAAC,kBAAA,GAAG,kBAAW,KAAX,CAAJ;AAAwB,kBAAA,KAAK,EAAE;AAA/B,iBAAV,EACG,EADH,CADF;AAKA,gBAAA,QAAQ,CAAC,IAAT,CAAc,aAAd;AACD;AACF;;AACD,mBAAO,IAAP;AACD;;AACD,iBAAO,KAAP;AACD,SA5BD;AA6BA,YAAM,KAAK,GAAG,MAAM,CAAC,GAAP,CAAW,UAAX,CAAd;AACA,YAAM,IAAI,GAAG,MAAM,CAAC,GAAP,CAAW,SAAX,CAAb;AACA,YAAM,WAAW,GAAG,QAAQ,CAAC;AAAE,UAAA,OAAO,EAAE,OAAX;AAAoB,UAAA,MAAM,EAAN;AAApB,SAAD,CAA5B;AACA,YAAM,cAAc,GAAG,YAAY,IAAK,WAAW,IAAI,WAAW,CAAC,QAAnE;AACA,YAAM,GAAG,GAAQ,UAAU,CAAC,MAAD,EAAS,IAAT,EAAe,KAAf,CAA3B;;AACA,YAAI,EAAE,kBAAkB,SAApB,KAAkC,MAAI,CAAC,UAAL,CAAgB,MAAhB,CAAtC,EAA+D;AAC7D,UAAA,YAAY,CAAC,IAAb,CAAkB,GAAlB;AACD;;AACD,YAAM,WAAW,GAAG,cAAc,GAC9B,cAAc,CAAC;AAAE,UAAA,OAAO,EAAE,MAAI,CAAC,OAAhB;AAAyB,UAAA,MAAM,EAAN,MAAzB;AAAiC,UAAA,IAAI,EAAJ,IAAjC;AAAuC,UAAA,KAAK,EAAL;AAAvC,SAAD,CADgB,GAE9B,IAFJ;;AAGA,YAAM,MAAM,GACV,kBAAA,aAAA,CAAC,UAAD,EAAK,0BAAA,EAAA,EAAK,WAAL,EAAgB;AAAE,UAAA,GAAG,EAAE,GAAP;AAAY,UAAA,KAAK,EAAE,MAAnB;AAA2B,UAAA,QAAQ,EAAE;AAArC,SAAhB,CAAL,EACG,WADH,CADF;;AAKA,YAAI,aAAJ,EAAmB;AAAA,cACT,QADS,GACI,aAAa,CAAC,KADlB,CACT,QADS;AAEjB,UAAA,QAAQ,CAAC,IAAT,CAAc,MAAd;AACD,SAHD,MAGO;AACL,UAAA,SAAS,CAAC,IAAV,CAAe,MAAf;AACD;AACF,OArDD;;AAsDA,UAAI,CAAC,SAAS,CAAC,MAAf,EAAuB;AACrB,QAAA,SAAS,CAAC,IAAV,CACE,kBAAA,aAAA,CAAC,UAAD,EAAK;AAAC,UAAA,GAAG,EAAC,SAAL;AAAe,UAAA,QAAQ,EAAA;AAAvB,SAAL,EACG,KAAK,OAAL,GAAe,GAAf,GAAqB,KAAK,kBAAL,EADxB,CADF;AAKD;;AACD,aACE,kBAAA,aAAA,CAAC,gBAAD,EAAK,0BAAA;AACH,QAAA,GAAG,EAAE,KAAK,QADP;AAEH,QAAA,QAAQ,EAAE,YAFP;AAGH,QAAA,kBAAkB,EAAA,IAHf;AAIH,QAAA,QAAQ,EAAE,KAAK,YAJZ;AAKH,QAAA,YAAY,EAAE,YALX;AAMH,QAAA,SAAS,EAAE,KAAK,gBAAL,EANR;AAOH,QAAA,OAAO,EAAE,KAAK,eAPX;AAQH,QAAA,KAAK,EAAE,iBARJ;AASH,QAAA,SAAS,EAAE;AATR,OAAA,EAUC,SAVD,CAAL,EAYG,SAZH,CADF;AAgBD;;;oCAEY;AAAA,UACH,OADG,GACgC,IADhC,CACH,OADG;AAAA,UACM,SADN,GACgC,IADhC,CACM,SADN;AAAA,UACiB,UADjB,GACgC,IADhC,CACiB,UADjB;AAEX,aAAO;AACL,QAAA,OAAO,EAAE,OADJ;AAEL,QAAA,SAAS,EAAT,SAFK;AAGL,QAAA,UAAU,EAAV;AAHK,OAAP;AAKD;;;sCAQc;AACb,UAAM,IAAI,GACR,kBAAA,aAAA,CAAC,gBAAD,EAAK;AAAC,QAAA,GAAG,EAAC,MAAL;AAAY,QAAA,QAAQ,EAAE,KAAK;AAA3B,OAAL,EACG,KAAK,OAAL,EADH,CADF;;AAKA,UAAI,KAAK,QAAT,EAAmB;AACjB,eAAO,CACL,kBAAA,aAAA,CAAA,KAAA,EAAA;AAAK,UAAA,GAAG,EAAC,WAAT;AAAqB,UAAA,SAAS,YAAK,KAAK,SAAV;AAA9B,SAAA,EACE,kBAAA,aAAA,CAAA,MAAA,EAAA;AAAM,UAAA,OAAO,EAAE,KAAK;AAApB,SAAA,EAAgC,uBAAG,QAAH,EAAa,YAAb,CAAhC,CADF,EAEE,kBAAA,aAAA,CAAA,MAAA,EAAA;AAAM,UAAA,OAAO,EAAE,KAAK;AAApB,SAAA,EAAkC,uBAAG,QAAH,EAAa,cAAb,CAAlC,CAFF,CADK,EAKL,IALK,CAAP;AAOD;;AAED,aAAO,IAAP;AACD;;;2CAGsB,M,EAAM;AAAA,kCACkD,KAAK,KADvD,CACnB,wBADmB;AAAA,UACnB,wBADmB,sCACQ,0BAAU,0BAAV,CADR;;AAE3B,UAAI,MAAJ,EAAY;AACV,YAAI,wBAAJ,EAA8B;AAC5B,iBAAO;AACL,YAAA,KAAK,EAAE,4BAAQ,MAAM,CAAC,qBAAP,GAA+B,KAAvC;AADF,WAAP;AAGD;;AACD,eAAO;AACL,UAAA,QAAQ,EAAE,4BAAQ,MAAM,CAAC,qBAAP,GAA+B,KAAvC;AADL,SAAP;AAGD;AACF;;;yCAEiB;AAChB,aAAO,0BAAP;AACD;;;kCAGa,C,EAAC;AAAA,UACL,IADK,GACI,IADJ,CACL,IADK;;AAEb,UAAI,CAAC,KAAK,UAAL,EAAD,IAAsB,CAAC,KAAK,UAAL,EAAvB,IAA4C,IAAhD,EAAsD;AACpD,YAAI,KAAK,KAAL,IAAc,IAAI,CAAC,SAAL,CAAe,CAAf,CAAlB,EAAqC;AACnC,uCAAU,CAAV;AACD,SAFD,MAEO;AACL,kBAAQ,CAAC,CAAC,OAAV;AACE,iBAAK,oBAAQ,KAAb;AACA,iBAAK,oBAAQ,IAAb;AACE,mBAAK,qBAAL,CAA2B,CAA3B,EAA8B,IAA9B,EAAoC,CAApC;AACA;;AACF,iBAAK,oBAAQ,IAAb;AACA,iBAAK,oBAAQ,EAAb;AACE,mBAAK,qBAAL,CAA2B,CAA3B,EAA8B,IAA9B,EAAoC,CAAC,CAArC;AACA;;AACF,iBAAK,oBAAQ,GAAb;AACA,iBAAK,oBAAQ,SAAb;AACE,mBAAK,sBAAL,CAA4B,CAA5B,EAA+B,IAA/B,EAAqC,CAArC;AACA;;AACF,iBAAK,oBAAQ,IAAb;AACA,iBAAK,oBAAQ,OAAb;AACE,mBAAK,sBAAL,CAA4B,CAA5B,EAA+B,IAA/B,EAAqC,CAAC,CAAtC;AACA;AACF;AACA;AACA;;AACA,iBAAK,oBAAQ,GAAb;AACE,mBAAK,gBAAL,CAAsB,CAAtB;AACA;;AACF,iBAAK,oBAAQ,KAAb;AACE,mBAAK,kBAAL,CAAwB,CAAxB;AACA;;AACF;AA1BF;AA4BD;AACF;;AACD,kHAAoB,CAApB;AACD;;;2CAEsB,C,EAAG,I,EAAY,S,EAAiB;AACrD,mCAAU,CAAV;AACA,UAAM,QAAQ,GAAG,IAAI,CAAC,oBAAL,EAAjB;AACA,UAAM,UAAU,GAAG,QAAQ,CAAC,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoB,QAAQ,CAAC,MAAT,GAAkB,CAAvC,CAA3B;;AACA,UAAI,UAAJ,EAAgB;AACd,YAAI,CAAC,KAAK,QAAN,IAAkB,KAAK,KAA3B,EAAkC;AAChC,UAAA,eAAe,CAAC,IAAD,EAAO,UAAU,CAAC,KAAX,CAAiB,QAAxB,CAAf;AACD;;AACD,YAAI,CAAC,KAAK,QAAN,IAAkB,CAAC,KAAK,KAA5B,EAAmC;AACjC,eAAK,MAAL,CAAY,UAAU,CAAC,KAAX,CAAiB,KAA7B;AACD;AACF;AACF;;;0CAEqB,C,EAAG,I,EAAY,S,EAAiB;AACpD,UAAI,CAAC,KAAK,QAAN,IAAkB,CAAC,KAAK,QAA5B,EAAsC;AACpC,YAAM,UAAU,GAAG,IAAI,CAAC,IAAL,CAAU,SAAV,CAAnB;;AACA,YAAI,UAAJ,EAAgB;AACd,UAAA,eAAe,CAAC,IAAD,EAAO,UAAU,CAAC,KAAX,CAAiB,QAAxB,CAAf;AACA,eAAK,MAAL,CAAY,UAAU,CAAC,KAAX,CAAiB,KAA7B;AACD;;AACD,QAAA,CAAC,CAAC,cAAF;AACD,OAPD,MAOO,IAAI,CAAC,KAAK,oBAAQ,IAAlB,EAAwB;AAC7B,aAAK,MAAL;AACA,QAAA,CAAC,CAAC,cAAF;AACD;AACF,K,CAED;AACA;;;;qCAEiB,C,EAAC;AAChB,UAAI,KAAK,KAAT,EAAgB;AACd,QAAA,CAAC,CAAC,cAAF;AACA,aAAK,QAAL;AACD;AACF;;;uCAEkB,C,EAAC;AAClB,UAAI,CAAC,KAAK,QAAV,EAAoB;AAClB,QAAA,CAAC,CAAC,cAAF;;AACA,YAAI,CAAC,KAAK,KAAV,EAAiB;AACf,eAAK,MAAL;AACD;AACF;AACF;;;+BAGU,C,EAAC;AACV,UAAI,CAAC,CAAC,CAAC,kBAAF,EAAL,EAA6B;AAC3B,iHAAiB,CAAjB;AACA,aAAK,WAAL;AACD;AACF;;;6BAEK;AAAA,UACI,eADJ,GACwB,IADxB,CACI,eADJ;;AAEJ,UAAI,eAAe,IAAI,eAAe,CAAC,MAAvC,EAA+C;AAC7C;AACD;AACF;;;oCAEe,K,EAAK;AAAA;;AACnB,UAAI,KAAJ,EAAW;AAAA,YACD,IADC,GACQ,KAAK,YADb,CACD,IADC;AAET,aAAK,OAAL,CAAa,KAAb,GAAqB,IAArB,CAA0B,YAAK;AAC7B,cAAM,MAAM,GAAG,MAAI,CAAC,mBAAL,CAAyB,KAAzB,EAAgC,IAAhC,CAAf;;AACA,cAAI,MAAJ,EAAY;AACV,YAAA,MAAI,CAAC,MAAL,CAAY,MAAZ;AACD;AACF,SALD;AAMD,OARD,MAQO,IAAI,CAAC,KAAK,QAAV,EAAoB;AACzB,aAAK,QAAL,CAAc,KAAK,UAAnB;AACD;AACF;;;wCAEmB,I,EAAM,I,EAAc;AAAA,UAC9B,SAD8B,GAChB,IADgB,CAC9B,SAD8B;AAEtC,UAAM,OAAO,GAAG,8CAAI,IAAJ,uCAAa,KAAK,eAAlB,GAAmC,MAAnC,CAA0C,UAAA,MAAM;AAAA,eAC9D,4BAAW,MAAM,CAAC,GAAP,CAAW,SAAX,CAAX,EAAkC,IAAlC,CAD8D;AAAA,OAAhD,CAAhB;;AAGA,UAAI,OAAO,CAAC,MAAR,GAAiB,CAArB,EAAwB;AAAA,YACd,UADc,GACY,IADZ,CACd,UADc;AAAA,YACF,SADE,GACY,IADZ,CACF,SADE;AAEtB,YAAM,KAAK,GAAG,KAAK,QAAL,EAAd;;AACA,YAAI,KAAJ,EAAW;AACT,cAAM,KAAK,GAAG,OAAO,CAAC,IAAR,CAAa,UAAA,MAAM;AAAA,mBAC/B,4BAAW,MAAM,CAAC,GAAP,CAAW,UAAX,CAAX,EAAmC,SAAS,GAAG,KAAH,GAAW,KAAK,CAAC,UAAD,CAA5D,CAD+B;AAAA,WAAnB,CAAd;;AAGA,cAAI,KAAJ,EAAW;AACT,mBAAO,KAAP;AACD;AACF;AACF;;AACD,aAAO,OAAO,CAAC,CAAD,CAAd;AACD;;;+BAEU,I,EAAI;AAAA,UACL,SADK,GACS,IADT,CACL,SADK;AAEb,aAAO,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,UAAA,MAAM;AAAA,eAAI,4BAAW,MAAM,CAAC,GAAP,CAAW,SAAX,CAAX,EAAkC,IAAlC,CAAJ;AAAA,OAAjC,CAAP;AACD;;;gCAEW,K,EAAK;AAAA,UACP,UADO,GACQ,IADR,CACP,UADO;AAEf,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,MAAb,MAAoB;AAAA;AAArC;AACA,MAAA,KAAK,GAAG,cAAc,CAAC,KAAD,EAAQ,UAAR,CAAtB;AACA,aAAO,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,UAAA,MAAM;AAAA,eACtC,QAAQ,GAAG,4BAAW,MAAM,CAAC,GAAP,CAAW,UAAX,CAAX,EAAmC,KAAnC,CAAH,GAA+C,wBAAO,MAAM,CAAC,GAAP,CAAW,UAAX,CAAP,EAA+B,KAA/B,CADjB;AAAA,OAAjC,CAAP;AAGD;;;+BAEU,M,EAAc;AAAA,UACf,UADe,GACA,IADA,CACf,UADe;AAEvB,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,MAAb,MAAoB;AAAA;AAArC;AACA,aAAO,KAAK,SAAL,GAAiB,IAAjB,CAAsB,UAAA,KAAK,EAAG;AACnC,YAAM,WAAW,GAAG,cAAc,CAAC,KAAD,EAAQ,UAAR,CAAlC;AACA,eAAO,QAAQ,GACX,4BAAW,MAAM,CAAC,GAAP,CAAW,UAAX,CAAX,EAAmC,WAAnC,CADW,GAEX,wBAAO,MAAM,CAAC,GAAP,CAAW,UAAX,CAAP,EAA+B,WAA/B,CAFJ;AAGD,OALM,CAAP;AAMD;;;wCAEmB,K,EAAuB,Q,EAAiC;AAAA;;AAAA,UAClE,kBADkE,GACpB,IADoB,CAClE,kBADkE;AAAA,UAC9C,SAD8C,GACpB,IADoB,CAC9C,SAD8C;AAAA,UACnC,UADmC,GACpB,IADoB,CACnC,UADmC;;AAE1E,UAAI,KAAJ,EAAW;AACT,YAAI,uBAAY,KAAZ,CAAJ,EAAwB;AACtB,UAAA,KAAK,CAAC,OAAN,CAAc,UAAA,CAAC;AAAA,mBAAI,CAAC,uBAAM,CAAN,CAAD,IAAa,MAAI,CAAC,mBAAL,CAAyB,CAAzB,CAAjB;AAAA,WAAf;AACD,SAFD,MAEO;AACL,cAAM,KAAK,GAAG,KAAK,UAAL,CAAgB,KAAhB,KAA0B,KAAK,WAAL,CAAiB,KAAjB,CAAxC;;AACA,cAAI,KAAJ,EAAW;AACT,gBAAM,IAAI,GAAG,KAAK,CAAC,GAAN,CAAU,SAAV,CAAb;;AACA,gBAAI,IAAI,KAAK,KAAT,IAAkB,QAAtB,EAAgC;AAC9B,cAAA,QAAQ,CAAC,IAAD,CAAR;AACD;;AACD,iBAAK,iBAAL;AACD,WAND,MAMO,IAAI,kBAAJ,EAAwB;AAC7B,YAAA,kBAAkB,CAAC,GAAnB,CAAuB,SAAvB,EAAkC,KAAlC;AACA,YAAA,kBAAkB,CAAC,GAAnB,CAAuB,UAAvB,EAAmC,KAAnC;AACD,WAHM,MAGA;AACL,iBAAK,iBAAL,CAAuB,KAAvB;AACD;AACF;AACF,OAlBD,MAkBO;AACL,aAAK,iBAAL;AACD;AACF;;;sCAEiB,K,EAAK;AAAA;;AAAA,UACb,SADa,GACmB,IADnB,CACb,SADa;AAAA,UACF,UADE,GACmB,IADnB,CACF,UADE;AAAA,UACU,IADV,GACmB,IADnB,CACU,IADV;AAErB,UAAM,MAAM,GAAG,KAAK,YAAL,CAAkB,MAAlB,sFAEV,SAFU,EAEE,KAFF,2DAGV,UAHU,EAGG,KAHH,2BAKb,CALa,CAAf;;AAOA,UAAI,IAAJ,EAAU;AACR,QAAA,eAAe,CAAC,IAAD,EAAO,UAAU,CAAC,MAAD,EAAS,KAAT,EAAgB,KAAhB,CAAjB,CAAf;AACD;AACF;;;yCAEiB;AAAA;;AAChB,WAAK,YAAL,CAAkB,OAAlB,CAA0B,UAAA,MAAM;AAAA,eAAI,MAAI,CAAC,iBAAL,CAAuB,MAAvB,CAAJ;AAAA,OAAhC;AACD;;;sCAEiB,M,EAAe;AAC/B,UAAI,CAAC,MAAL,EAAa;AACX,QAAA,MAAM,GAAG,KAAK,kBAAd;AACD;;AACD,UAAI,MAAM,IAAI,CAAC,KAAK,UAAL,CAAgB,MAAhB,CAAf,EAAwC;AACtC,aAAK,YAAL,CAAkB,MAAlB,CAAyB,MAAzB;AACD;AACF;;;+CAEuB,CAAK;;;gCAEjB,C,EAAC;AACX,UAAI,uBAAY,CAAZ,CAAJ,EAAoB;AAClB,eAAO,CAAC,CAAC,GAAF,CAAM,KAAK,WAAX,EAAwB,IAAxB,EAA8B,IAA9B,CAAmC,GAAnC,CAAP;AACD;;AACD,UAAM,QAAQ,GAAG,KAAK,OAAL,CAAa,MAAb,MAAoB;AAAA;AAArC;AACA,UAAM,KAAK,GAAG,cAAc,CAAC,CAAD,EAAI,KAAK,UAAT,CAA5B;AACA,aAAO,QAAQ,IAAI,CAAC,uBAAM,KAAN,CAAb,GAA4B,KAAK,CAAC,QAAN,EAA5B,GAA+C,KAAtD;AACD;;;0CAGqB,I,EAAM,O,EAAO,CAAI;;;2CAOtC;AAAA,UAFY,KAEZ,SAHC,IAGD,CAFG,KAEH,CAFY,KAEZ;;AACC,UAAI,KAAK,QAAL,IAAiB,KAAK,UAAL,CAAgB,KAAhB,CAArB,EAA6C;AAC3C,aAAK,QAAL,CAAc,KAAd;AACD,OAFD,MAEO;AACL,aAAK,MAAL,CAAY,KAAZ;AACD;AACF;;;uCAEkB,M,EAAc;AAC/B,WAAK,eAAL,CAAqB,KAAK,qBAAL,CAA2B,MAA3B,CAArB;AACD;;;yCAEoB,M,EAAc;AAAA,UACzB,UADyB,GACV,IADU,CACzB,UADyB;AAEjC,UAAM,QAAQ,GAAG,MAAM,CAAC,GAAP,CAAW,UAAX,CAAjB;AACA,WAAK,WAAL,CAAiB,QAAjB,EAA2B,CAAC,CAA5B;AACD;;;4BAGO,I,EAAa;AACnB,4GAAc,IAAd;;AACA,UAAI,KAAK,UAAL,IAAmB,0BAAS,KAAK,aAAd,CAAvB,EAAqD;AACnD,aAAK,QAAL,CAAc,IAAd;AACD;AACF;;;iCAIY,K,EAAK;AAAA,UACR,KADQ,GACiB,IADjB,CACR,KADQ;AAAA,UACD,aADC,GACiB,IADjB,CACD,aADC;;AAEhB,UAAI,KAAK,IAAI,0BAAS,aAAT,CAAb,EAAsC;AACpC,QAAA,KAAK,CAAC,UAAN,CAAiB,aAAjB,EAAgC,KAAK,KAAK,EAAV,GAAe,SAAf,GAA2B,KAA3D;AACD;AACF;;;iCAIY,C,EAAC;AAAA;;AAAA,UACJ,KADI,GACM,CAAC,CAAC,MADR,CACJ,KADI;AAEZ,WAAK,OAAL,CAAa,KAAb;;AACA,UAAI,KAAK,eAAL,CAAqB,KAAzB,EAAgC;AAC9B,aAAK,mBAAL,CAAyB,KAAzB,EAAgC,UAAA,IAAI;AAAA,iBAAI,MAAI,CAAC,OAAL,CAAa,IAAb,CAAJ;AAAA,SAApC;AACD;;AACD,UAAI,CAAC,KAAK,KAAV,EAAiB;AACf,aAAK,MAAL;AACD;AACF;;;0CAEqB,M,EAAc;AAAA,UAC1B,SAD0B,GACA,IADA,CAC1B,SAD0B;AAAA,UACf,UADe,GACA,IADA,CACf,UADe;AAElC,aAAO,SAAS,GAAG,MAAM,CAAC,GAAP,CAAW,UAAX,CAAH,GAA4B,MAAM,CAAC,MAAP,EAA5C;AACD;;;uCAEkB,K,EAAO,S,EAAS;AACjC,UAAI,CAAC,uBAAM,KAAN,CAAL,EAAmB;AACjB,YAAI,+BAAc,KAAd,CAAJ,EAA0B;AACxB,iBAAO,gBAAgB,CAAC,GAAjB,CAAqB,KAArB,EAA4B,SAA5B,CAAP;AACD;;AACD,YAAM,KAAK,GAAG,KAAK,WAAL,CAAiB,KAAjB,CAAd;;AACA,YAAI,KAAJ,EAAW;AACT,iBAAO,KAAK,CAAC,GAAN,CAAU,SAAV,CAAP;AACD;AACF;AACF;;;uCAEkB,K,EAAK;AAAA,UACd,KADc,GACkB,IADlB,CACd,KADc;AAAA,UACP,SADO,GACkB,IADlB,CACP,SADO;AAAA,UACI,SADJ,GACkB,IADlB,CACI,SADJ;;AAEtB,UAAI,SAAS,IAAI,KAAb,IAAsB,KAAK,CAAC,MAAhC,EAAwC;AACtC,0HAA0B,KAAK,CAAC,OAAN,CAAc,KAAd,CAA1B;AACD;;AACD,wHAA0B,KAAK,kBAAL,CAAwB,KAAxB,EAA+B,SAA/B,CAA1B;AACD;;;iCAEY,K,EAAU;AACrB,UAAM,IAAI,GAAG,KAAK,kBAAL,CAAwB,KAAxB,CAAb;;AACA,UAAI,yBAAQ,IAAR,CAAJ,EAAmB;AACjB,YAAI,+BAAc,KAAd,CAAJ,EAA0B;AACxB,iBAAO,gBAAgB,CAAC,GAAjB,CAAqB,KAArB,EAA4B,KAAK,UAAjC,KAAgD,EAAvD;AACD;;AACD,0HAA0B,KAA1B;AACD;;AACD,aAAO,IAAP;AACD;;;4BAGI;AACH,WAAK,OAAL,CAAa,SAAb;AACA;AACA,WAAK,kBAAL;AACD;;;kCAEU;AACT,WAAK,OAAL,CAAa,SAAb;AACA,WAAK,iBAAL;AACA,WAAK,eAAL;AACD;;;4BAGI;AACH;AACA,WAAK,WAAL;AACD;;;6BAEQ,M,EAAsB;AAC7B,UAAI,MAAJ,EAAY;AACV,aAAK,oBAAL,CAA0B,MAA1B;AACD;AACF;;;2BAEM,M,EAAsB;AAC3B,UAAI,CAAC,KAAK,QAAV,EAAoB;AAClB,aAAK,QAAL;AACD;;AACD,UAAI,MAAJ,EAAY;AACV,aAAK,kBAAL,CAAwB,MAAxB;AACD;AACF;;;gCAGQ;AACP,WAAK,QAAL,CAAc,KAAK,eAAL,CAAqB,GAArB,CAAyB,KAAK,qBAA9B,EAAqD,IAArD,CAAd;AACD;;;kCAGU;AACT,WAAK,KAAL;AACD;;;;;;oDAG6B,M;;;;;AAC5B,oBAAI,CAAC,MAAL,EAAa;AACX,uBAAK,eAAL;AACD;;AACD,sIAA8B,MAA9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,qBAAK,YAAL,CAAkB,SAAlB;AACM,gBAAA,M,GAAS,KAAK,SAAL,E;AACP,gBAAA,K,GAAU,I,CAAV,K;;qBACJ,K;;;;;;uBACI,KAAK,CAAC,KAAN,E;;;AAGN,gBAAA,e,GAEE,I,CAFF,e,EACmB,K,GACjB,I,CADF,e,CAAmB,K;AAErB,uCAAY,YAAK;AACf,sBAAM,SAAS,GAAG,MAAM,CAAC,MAAP,CAAc,UAAA,KAAK,EAAG;AACtC,wBAAM,MAAM,GAAG,MAAI,CAAC,WAAL,CAAiB,KAAjB,CAAf;;AACA,wBAAI,MAAJ,EAAY;AACV,6BAAO,IAAP;AACD;;AACD,wBAAI,KAAJ,EAAW;AACT,sBAAA,MAAI,CAAC,iBAAL,CAAuB,KAAvB;;AACA,6BAAO,IAAP;AACD;;AACD,2BAAO,KAAP;AACD,mBAViB,CAAlB;;AAWA,sBAAI,MAAI,CAAC,IAAL,IAAa,KAAjB,EAAwB;AACtB,oBAAA,MAAI,CAAC,mBAAL,CAAyB,MAAI,CAAC,IAA9B;AACD;;AACD,sBACE,KAAK,IACL,KAAK,CAAC,GAAN,CAAU,YAAV,CADA,IAEA,eAAe,CAAC,MAFhB,IAGA,CAAC,yBAAQ,SAAR,EAAmB,MAAnB,CAJH,EAKE;AACA,oBAAA,MAAI,CAAC,QAAL,CAAc,MAAI,CAAC,QAAL,GAAgB,SAAhB,GAA4B,SAAS,CAAC,CAAD,CAAnD;AACD;AACF,iBAvBD;;;;;;;;;;;;;;;;;;+BA0BS,I,EAAgB,I,EAAa;AAAA,UAEpC,SAFoC,GAOlC,IAPkC,CAEpC,SAFoC;AAAA,UAGpC,UAHoC,GAOlC,IAPkC,CAGpC,UAHoC;AAAA,UAIpC,UAJoC,GAOlC,IAPkC,CAIpC,UAJoC;AAAA,UAKpC,aALoC,GAOlC,IAPkC,CAKpC,aALoC;AAAA,UAM3B,aAN2B,GAOlC,IAPkC,CAMpC,KANoC,CAM3B,aAN2B;AAQtC,MAAA,IAAI,GAAG,aAAa,GAAG,IAAI,CAAC,MAAL,CAAY,aAAZ,CAAH,GAAiC,IAArD;;AACA,UAAI,UAAU,IAAI,IAAd,IAAsB,OAAO,aAAP,KAAyB,UAAnD,EAA+D;AAC7D,eAAO,IAAI,CAAC,MAAL,CAAY,UAAA,MAAM;AAAA,iBAAI,aAAa,CAAC;AAAE,YAAA,MAAM,EAAN,MAAF;AAAU,YAAA,IAAI,EAAJ,IAAV;AAAgB,YAAA,SAAS,EAAT,SAAhB;AAA2B,YAAA,UAAU,EAAV;AAA3B,WAAD,CAAjB;AAAA,SAAlB,CAAP;AACD;;AACD,aAAO,IAAP;AACD;;;wBAxyBgB;AAAA,kCACkC,KAAK,eADvC,CACP,aADO;AAAA,UACP,aADO,sCACS,oBADT;AAEf,aAAO,aAAP;AACD;;;wBAG4B;AAC3B,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,OAAb,CAAd;AACA,aAAO;AACL,QAAA,YAAY,EAAE,uBAAG,QAAH,EAAa,KAAK,GAAG,eAAH,GAAqB,wBAAvC,EAAiE;AAAE,UAAA,KAAK,EAAL;AAAF,SAAjE;AADT,OAAP;AAGD;;;wBAGY;AACX,aAAO,KAAK,OAAL,CAAa,WAAb,KAA6B,SAApC;AACD;;;wBAGa;AACZ,aAAO,KAAK,OAAL,CAAa,YAAb,KAA8B,OAArC;AACD;;;wBAEqB;AAAA;;AACpB,aAAO,KAAK,YAAL,CAAkB,MAAlB,CAAyB,UAAA,MAAM;AAAA,eAAI,CAAC,OAAI,CAAC,UAAL,CAAgB,MAAhB,CAAL;AAAA,OAA/B,EAA6D,CAA7D,CAAP;AACD;;;wBAEkB;AAAA,UACT,gBADS,GACkB,IADlB,CACT,gBADS;AAAA,UACS,IADT,GACkB,IADlB,CACS,IADT;AAEjB,aAAO,KAAK,UAAL,CAAgB,gBAAhB,EAAkC,IAAlC,CAAP;AACD;;;wBAGmB;AAClB,2DAAW,KAAK,YAAL,CAAkB,IAA7B,uCAAsC,KAAK,cAA3C;AACD;;;wBAGiB;AAAA,UACR,MADQ,GACkC,IADlC,CACR,MADQ;AAAA,UACA,KADA,GACkC,IADlC,CACA,KADA;AAAA,UACO,OADP,GACkC,IADlC,CACO,OADP;AAAA,UACgB,aADhB,GACkC,IADlC,CACgB,aADhB;AAAA,UAER,IAFQ,GAEC,OAFD,CAER,IAFQ;;AAGhB,UAAI,KAAK,IAAI,CAAC,0BAAS,aAAT,CAAd,EAAuC;AACrC,YAAM,UAAU,GAAG,KAAK,CAAC,GAAN,CAAU,YAAV,CAAnB;;AACA,YAAI,UAAJ,EAAgB;AACd,cAAI,MAAJ,EAAY;AACV,gBAAM,QAAQ,GAAG,MAAM,CAAC,IAAP,CAAY,UAAZ,CAAjB;AACA,mBAAO,IAAI,CAAC,MAAL,CAAY,UAAA,IAAI;AAAA,qBACrB,QAAQ,CAAC,KAAT,CAAe,UAAA,OAAO;AAAA,uBACpB,4BAAW,MAAM,CAAC,GAAP,CAAW,UAAU,CAAC,OAAD,CAArB,CAAX,EAA4C,IAAI,CAAC,GAAL,CAAS,OAAT,CAA5C,CADoB;AAAA,eAAtB,CADqB;AAAA,aAAhB,CAAP;AAKD;;AACD,iBAAO,EAAP;AACD;AACF;;AACD,aAAO,IAAP;AACD;;;wBAGW;AAAA,UACF,KADE,GACQ,KAAK,eADb,CACF,KADE;AAEV,aAAO,CAAC,KAAK,UAAL,EAAD,KAAuB,CAAC,CAAC,KAAK,UAAP,IAAqB,CAAC,CAAC,KAA9C,CAAP;AACD;;;wBAGa;AACZ,aAAO,CAAC,CAAC,KAAK,KAAL,CAAW,UAApB;AACD;;;wBAGW;AACV,aAAO,CAAC,CAAC,KAAK,OAAL,CAAa,UAAb,CAAT;AACD;;;wBAGe;AACd,aAAO,KAAK,QAAZ;AACD;;;wBAGU;AAAA,UAEP,KAFO,GAOL,IAPK,CAEP,KAFO;AAAA,UAGP,SAHO,GAOL,IAPK,CAGP,SAHO;AAAA,UAIP,UAJO,GAOL,IAPK,CAIP,UAJO;AAAA,UAKP,QALO,GAOL,IAPK,CAKP,QALO;AAAA,mCAOL,IAPK,CAMP,eANO;AAAA,UAMY,QANZ,0BAMY,QANZ;AAAA,UAMsB,OANtB,0BAMsB,OANtB;AAQT,aACE,OAAO,IACN,KAAK,IAAI,KAAK,CAAC,OADhB,IAEA,kCAAiB;AAAE,QAAA,SAAS,EAAT,SAAF;AAAa,QAAA,UAAU,EAAV,UAAb;AAAyB,QAAA,aAAa,EAAb,aAAzB;AAAwC,QAAA,QAAQ,EAAR,QAAxC;AAAkD,QAAA,QAAQ,EAAR;AAAlD,OAAjB,CAHF;AAKD;;;wBAGY;AACX,UAAM,IAAI,GAAG,KAAK,OAAL,CAAa,MAAb,CAAb;AACA,aAAO,KAAK,eAAL,CAAqB,cAArB,KAAwC,KAAxC,IAAiD,IAAI,KAAA;AAAA;AAA5D;AACD;;;wBAwPU;AAAA,UACD,KADC,GACkB,IADlB,CACD,KADC;AAAA,UACM,OADN,GACkB,IADlB,CACM,OADN;AAET,aAAO,OAAO,CAAC,MAAR,KAAc;AAAA;AAAd,SAA6C,CAAC,CAAC,KAAF,IAAW,KAAK,CAAC,OAAN,CAAc,MAAd,GAAuB,CAAtF;AACD;;;EA9ZgD,yB;;;AAC1C,MAAA,CAAA,WAAA,GAAc,QAAd;AAEA,MAAA,CAAA,SAAA;AACL;;;;AAIA,EAAA,KAAK,EAAE,sBAAU,IALZ;;AAML;;;;AAIA,EAAA,UAAU,EAAE,sBAAU,IAVjB;;AAWL;;;AAGA,EAAA,aAAa,EAAE,sBAAU,SAAV,CAAoB,CAAC,sBAAU,MAAX,EAAmB,sBAAU,IAA7B,CAApB,CAdV;;AAeL;;;;;AAKA,EAAA,cAAc,EAAE,sBAAU,IApBrB;;AAqBL;;;;;;;;;;AAUA,EAAA,cAAc,EAAE,sBAAU,IA/BrB;;AAgCL;;;AAGA,EAAA,eAAe,EAAE,sBAAU,IAnCtB;;AAoCL;;;AAGA,EAAA,QAAQ,EAAE,sBAAU;AAvCf,GAwCF,0BAAa,SAxCX;AA2CA,MAAA,CAAA,YAAA,sCACF,0BAAa,YADX;AAEL,EAAA,SAAS,EAAE,QAFN;AAGL,EAAA,KAAK,EAAE,KAHF;AAIL,EAAA,UAAU,EAAE,KAJP;AAKL,EAAA,yBAAyB,EAAE,IALtB;AAML,EAAA,QAAQ,EAAE;AANL;AASA,MAAA,CAAA,MAAA,GAAS,kBAAT;AAEA,MAAA,CAAA,QAAA,GAAW,oBAAX;AAOP,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,eAAA,EAGC,IAHD;AAMA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,2BAAA,EAKC,IALD;AAQA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,WAAA,EAEC,IAFD;AAKA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,YAAA,EAEC,IAFD;AAcA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,kBAAA,EAEC,IAFD;AAKA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,gBAAA,EAkBC,IAlBD;AAqBA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,UAAA,EAGC,IAHD;AAMA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,YAAA,EAEC,IAFD;AAKA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,UAAA,EAEC,IAFD;AAKA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,cAAA,EAEC,IAFD;AAKA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,SAAA,EAaC,IAbD;AAgBA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,WAAA,EAGC,IAHD;AAUA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,UAAA,EAEC,IAFD;AA0IA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,SAAA,EA2FC,IA3FD;AAuGA,uBAAA,CADC,cACD,CAAA,E,gBAAA,E,SAAA,EAGC,IAHD;AAyBA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,wBAAA,EAYC,IAZD;AAmBA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,eAAA,EAqCC,IArCD;AAuFA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,YAAA,EAKC,IALD;AAyIA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,uBAAA,EAAuC,IAAvC;AAGA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,iBAAA,EAUC,IAVD;AAuBA,uBAAA,CADC,YACD,CAAA,E,gBAAA,E,SAAA,EAKC,IALD;AAkBA,uBAAA,CAFC,oBAED,EADC,YACD,CAAA,E,gBAAA,E,cAAA,EASC,IATD;AAgDA,uBAAA,CADC,YACD,CAAA,E,gBAAA,E,OAAA,EAIC,IAJD;AAaA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,OAAA,EAGC,IAHD;AAqBA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,WAAA,EAEC,IAFD;AAKA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,aAAA,EAEC,IAFD;AAKA,uBAAA,CADC,oBACD,CAAA,E,gBAAA,E,yBAAA,EAKC,IALD;;AA6DF,IAAqB,cAArB;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,EAA4C,MAA5C,CAAA;;AACS,cAAA,CAAA,YAAA,GAAe,MAAM,CAAC,YAAtB;AAEA,cAAA,CAAA,MAAA,GAAS,kBAAT;AAEA,cAAA,CAAA,QAAA,GAAW,oBAAX;AALY,cAAc,GAAA,uBAAA,CADlC,mBACkC,CAAA,EAAd,cAAc,CAAd;eAAA,c","sourcesContent":["import React, { CSSProperties, isValidElement, Key, ReactElement, ReactNode } from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport debounce from 'lodash/debounce';\nimport isString from 'lodash/isString';\nimport isEqual from 'lodash/isEqual';\nimport isNil from 'lodash/isNil';\nimport noop from 'lodash/noop';\nimport isPlainObject from 'lodash/isPlainObject';\nimport { observer } from 'mobx-react';\nimport { action, computed, IReactionDisposer, isArrayLike, reaction, runInAction } from 'mobx';\nimport Menu, { Item, ItemGroup } from 'choerodon-ui/lib/rc-components/menu';\nimport KeyCode from 'choerodon-ui/lib/_util/KeyCode';\nimport { pxToRem } from 'choerodon-ui/lib/_util/UnitConvertor';\nimport { getConfig } from 'choerodon-ui/lib/configure';\nimport TriggerField, { TriggerFieldProps } from '../trigger-field/TriggerField';\nimport autobind from '../_util/autobind';\nimport { ValidationMessages } from '../validator/Validator';\nimport Option, { OptionProps } from '../option/Option';\nimport OptGroup from '../option/OptGroup';\nimport { DataSetStatus, FieldType } from '../data-set/enum';\nimport DataSet from '../data-set/DataSet';\nimport Record from '../data-set/Record';\nimport Spin from '../spin';\nimport { stopEvent } from '../_util/EventManager';\nimport normalizeOptions from '../option/normalizeOptions';\nimport { $l } from '../locale-context';\nimport * as ObjectChainValue from '../_util/ObjectChainValue';\nimport isEmpty from '../_util/isEmpty';\nimport isSame from '../_util/isSame';\nimport isSameLike from '../_util/isSameLike';\nimport { Renderer } from '../field/FormField';\n\nfunction updateActiveKey(menu: Menu, activeKey: string) {\n  const store = menu.getStore();\n  const menuId = menu.getEventKey();\n  const state = store.getState();\n  store.setState({\n    activeKey: {\n      ...state.activeKey,\n      [menuId]: activeKey,\n    },\n  });\n}\n\nfunction defaultSearchMatcher({ record, text, textField }) {\n  return record.get(textField).indexOf(text) !== -1;\n}\n\nconst disabledField = '__disabled';\n\nfunction defaultOnOption({ record }) {\n  return {\n    disabled: record.get(disabledField),\n  };\n}\n\nexport function getItemKey(record: Record, text: ReactNode, value: any) {\n  return `item-${value || record.id}-${(isValidElement(text) ? text.key : text) || record.id}`;\n}\n\nfunction getSimpleValue(value, valueField) {\n  if (isPlainObject(value)) {\n    return ObjectChainValue.get(value, valueField);\n  }\n  return value;\n}\n\nexport type onOptionProps = { dataSet: DataSet; record: Record };\n\nexport type SearchMatcher = string | ((props: SearchMatcherProps) => boolean);\n\nexport interface SearchMatcherProps {\n  record: Record;\n  text: string;\n  textField: string;\n  valueField: string;\n}\n\nexport interface SelectProps extends TriggerFieldProps {\n  /**\n   * 复合输入值\n   * @default false\n   */\n  combo?: boolean;\n  /**\n   * 可搜索\n   * @default false\n   */\n  searchable?: boolean;\n  /**\n   * 搜索匹配器。 当为字符串时，作为lookup的参数名来重新请求值列表。\n   */\n  searchMatcher?: SearchMatcher;\n  /**\n   * 选项过滤\n   * @param {Record} record\n   * @return {boolean}\n   */\n  optionsFilter?: (record: Record, index: number, records: Record[]) => boolean;\n  /**\n   * 当选项改变时，检查并清除不在选项中的值\n   * @default true\n   */\n  checkValueOnOptionsChange?: boolean;\n  /**\n   * 下拉框匹配输入框宽度\n   * @default true\n   */\n  dropdownMatchSelectWidth?: boolean;\n  /**\n   * 下拉框菜单样式名\n   */\n  dropdownMenuStyle?: CSSProperties;\n  /**\n   * 选项数据源\n   */\n  options?: DataSet;\n  /**\n   * 是否为原始值\n   * true - 选项中valueField对应的值\n   * false - 选项值对象\n   */\n  primitiveValue?: boolean;\n  /**\n   * 渲染Option文本的钩子\n   * @example\n   * ```js\n   * <Select\n   *   {...props}\n   *   optionRenderer={({ record, text, value }) => text + '$'}\n   * />\n   * ```\n   */\n  optionRenderer?: Renderer;\n  /**\n   * 当下拉列表为空时显示的内容\n   */\n  notFoundContent?: ReactNode;\n  /**\n   * 设置选项属性，如 disabled;\n   */\n  onOption: (props: onOptionProps) => OptionProps;\n}\n\nexport class Select<T extends SelectProps> extends TriggerField<T> {\n  static displayName = 'Select';\n\n  static propTypes = {\n    /**\n     * 复合输入值\n     * @default false\n     */\n    combo: PropTypes.bool,\n    /**\n     * 过滤器\n     * @default false\n     */\n    searchable: PropTypes.bool,\n    /**\n     * 搜索匹配器。 当为字符串时，作为lookup的参数名来重新请求值列表。\n     */\n    searchMatcher: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n    /**\n     * 是否为原始值\n     * true - 选项中valueField对应的值\n     * false - 选项值对象\n     */\n    primitiveValue: PropTypes.bool,\n    /**\n     * 渲染Option文本的钩子\n     * @example\n     * ```js\n     * <Select\n     *   {...props}\n     *   optionRenderer={({ dataSet, record, text, value }) => text + '$'}\n     * />\n     * ```\n     */\n    optionRenderer: PropTypes.func,\n    /**\n     * 当下拉列表为空时显示的内容\n     */\n    notFoundContent: PropTypes.node,\n    /**\n     * 设置选项属性，如 disabled;\n     */\n    onOption: PropTypes.func,\n    ...TriggerField.propTypes,\n  };\n\n  static defaultProps = {\n    ...TriggerField.defaultProps,\n    suffixCls: 'select',\n    combo: false,\n    searchable: false,\n    checkValueOnOptionsChange: true,\n    onOption: defaultOnOption,\n  };\n\n  static Option = Option;\n\n  static OptGroup = OptGroup;\n\n  comboOptions: DataSet = new DataSet();\n\n  menu?: Menu | null;\n\n  @computed\n  get searchMatcher(): SearchMatcher {\n    const { searchMatcher = defaultSearchMatcher } = this.observableProps;\n    return searchMatcher;\n  }\n\n  @computed\n  get defaultValidationMessages(): ValidationMessages {\n    const label = this.getProp('label');\n    return {\n      valueMissing: $l('Select', label ? 'value_missing' : 'value_missing_no_label', { label }),\n    };\n  }\n\n  @computed\n  get textField(): string {\n    return this.getProp('textField') || 'meaning';\n  }\n\n  @computed\n  get valueField(): string {\n    return this.getProp('valueField') || 'value';\n  }\n\n  get currentComboOption(): Record | undefined {\n    return this.comboOptions.filter(record => !this.isSelected(record))[0];\n  }\n\n  get filteredOptions(): Record[] {\n    const { optionsWithCombo, text } = this;\n    return this.filterData(optionsWithCombo, text);\n  }\n\n  @computed\n  get optionsWithCombo(): Record[] {\n    return [...this.comboOptions.data, ...this.cascadeOptions];\n  }\n\n  @computed\n  get cascadeOptions(): Record[] {\n    const { record, field, options, searchMatcher } = this;\n    const { data } = options;\n    if (field && !isString(searchMatcher)) {\n      const cascadeMap = field.get('cascadeMap');\n      if (cascadeMap) {\n        if (record) {\n          const cascades = Object.keys(cascadeMap);\n          return data.filter(item =>\n            cascades.every(cascade =>\n              isSameLike(record.get(cascadeMap[cascade]), item.get(cascade)),\n            ),\n          );\n        }\n        return [];\n      }\n    }\n    return data;\n  }\n\n  @computed\n  get editable(): boolean {\n    const { combo } = this.observableProps;\n    return !this.isReadOnly() && (!!this.searchable || !!combo);\n  }\n\n  @computed\n  get searchable(): boolean {\n    return !!this.props.searchable;\n  }\n\n  @computed\n  get multiple(): boolean {\n    return !!this.getProp('multiple');\n  }\n\n  @computed\n  get menuMultiple(): boolean {\n    return this.multiple;\n  }\n\n  @computed\n  get options(): DataSet {\n    const {\n      field,\n      textField,\n      valueField,\n      multiple,\n      observableProps: { children, options },\n    } = this;\n    return (\n      options ||\n      (field && field.options) ||\n      normalizeOptions({ textField, valueField, disabledField, multiple, children })\n    );\n  }\n\n  @computed\n  get primitive(): boolean {\n    const type = this.getProp('type');\n    return this.observableProps.primitiveValue !== false && type !== FieldType.object;\n  }\n\n  checkValueReaction?: IReactionDisposer;\n\n  checkComboReaction?: IReactionDisposer;\n\n  @autobind\n  saveMenu(node) {\n    this.menu = node;\n  }\n\n  checkValue() {\n    this.checkValueReaction = reaction(() => this.cascadeOptions, () => this.processSelectedData());\n  }\n\n  checkCombo() {\n    this.checkComboReaction = reaction(\n      () => this.getValue(),\n      value => this.generateComboOption(value),\n    );\n  }\n\n  clearCheckValue() {\n    if (this.checkValueReaction) {\n      this.checkValueReaction();\n      this.checkValueReaction = undefined;\n    }\n  }\n\n  clearCheckCombo() {\n    if (this.checkComboReaction) {\n      this.checkComboReaction();\n      this.checkComboReaction = undefined;\n    }\n  }\n\n  clearReaction() {\n    this.clearCheckValue();\n    this.clearCheckCombo();\n  }\n\n  componentWillMount() {\n    super.componentWillMount();\n    const { checkValueOnOptionsChange, combo } = this.props;\n    if (checkValueOnOptionsChange) {\n      this.checkValue();\n    }\n    if (combo) {\n      this.checkCombo();\n      this.generateComboOption(this.getValue());\n    }\n  }\n\n  componentWillUnmount() {\n    super.componentWillUnmount();\n    this.doSearch.cancel();\n    this.clearReaction();\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    super.componentWillReceiveProps(nextProps, nextContext);\n    const { checkValueOnOptionsChange, combo } = this.props;\n    if (checkValueOnOptionsChange && !nextProps.checkValueOnOptionsChange) {\n      this.clearCheckValue();\n    }\n    if (!checkValueOnOptionsChange && nextProps.checkValueOnOptionsChange) {\n      this.checkValue();\n    }\n    if (combo && !nextProps.combo) {\n      this.removeComboOptions();\n      this.clearCheckCombo();\n    }\n    if (!combo && nextProps.combo) {\n      this.checkCombo();\n      if ('value' in nextProps) {\n        this.generateComboOption(nextProps.value);\n      }\n    }\n  }\n\n  componentDidUpdate() {\n    this.forcePopupAlign();\n  }\n\n  getOtherProps() {\n    const otherProps = omit(super.getOtherProps(), [\n      'searchable',\n      'searchMatcher',\n      'combo',\n      'multiple',\n      'value',\n      'name',\n      'options',\n      'optionsFilter',\n      'dropdownMatchSelectWidth',\n      'dropdownMenuStyle',\n      'checkValueOnOptionsChange',\n      'primitiveValue',\n      'optionRenderer',\n      'notFoundContent',\n      'onOption',\n    ]);\n    return otherProps;\n  }\n\n  getObservableProps(props, context) {\n    return {\n      ...super.getObservableProps(props, context),\n      children: props.children,\n      options: props.options,\n      combo: props.combo,\n      primitiveValue: props.primitiveValue,\n      searchMatcher: props.searchMatcher,\n    };\n  }\n\n  getMenuPrefixCls() {\n    return `${this.prefixCls}-dropdown-menu`;\n  }\n\n  renderMultipleHolder() {\n    const { name, multiple } = this;\n    if (multiple) {\n      return super.renderMultipleHolder();\n    }\n    return (\n      <input\n        key=\"value\"\n        type=\"hidden\"\n        value={this.toValueString(this.getValue()) || ''}\n        name={name}\n        onChange={noop}\n      />\n    );\n  }\n\n  getNotFoundContent() {\n    const { notFoundContent } = this.props;\n    if (notFoundContent !== undefined) {\n      return notFoundContent;\n    }\n    return getConfig('renderEmpty')('Select');\n  }\n\n  @autobind\n  getMenu(menuProps: object = {}): ReactNode {\n    const {\n      options,\n      textField,\n      valueField,\n      props: { dropdownMenuStyle, optionRenderer, onOption },\n    } = this;\n    if (!options) {\n      return null;\n    }\n    const menuDisabled = this.isDisabled();\n    const groups = options.getGroups();\n    const optGroups: ReactElement<any>[] = [];\n    const selectedKeys: Key[] = [];\n    this.filteredOptions.forEach(record => {\n      let previousGroup: ReactElement<any> | undefined;\n      groups.every(field => {\n        const label = record.get(field);\n        if (label !== undefined) {\n          if (!previousGroup) {\n            previousGroup = optGroups.find(item => item.props.title === label);\n            if (!previousGroup) {\n              previousGroup = (\n                <ItemGroup key={`group-${label}`} title={label}>\n                  {[]}\n                </ItemGroup>\n              );\n              optGroups.push(previousGroup);\n            }\n          } else {\n            const { children } = previousGroup.props;\n            previousGroup = children.find(item => item.props.title === label);\n            if (!previousGroup) {\n              previousGroup = (\n                <ItemGroup key={`group-${label}`} title={label}>\n                  {[]}\n                </ItemGroup>\n              );\n              children.push(previousGroup);\n            }\n          }\n          return true;\n        }\n        return false;\n      });\n      const value = record.get(valueField);\n      const text = record.get(textField);\n      const optionProps = onOption({ dataSet: options, record });\n      const optionDisabled = menuDisabled || (optionProps && optionProps.disabled);\n      const key: Key = getItemKey(record, text, value);\n      if (!('selectedKeys' in menuProps) && this.isSelected(record)) {\n        selectedKeys.push(key);\n      }\n      const itemContent = optionRenderer\n        ? optionRenderer({ dataSet: this.options, record, text, value })\n        : text;\n      const option: ReactElement = (\n        <Item {...optionProps} key={key} value={record} disabled={optionDisabled}>\n          {itemContent}\n        </Item>\n      );\n      if (previousGroup) {\n        const { children } = previousGroup.props;\n        children.push(option);\n      } else {\n        optGroups.push(option);\n      }\n    });\n    if (!optGroups.length) {\n      optGroups.push(\n        <Item key=\"no_data\" disabled>\n          {this.loading ? ' ' : this.getNotFoundContent()}\n        </Item>,\n      );\n    }\n    return (\n      <Menu\n        ref={this.saveMenu}\n        disabled={menuDisabled}\n        defaultActiveFirst\n        multiple={this.menuMultiple}\n        selectedKeys={selectedKeys}\n        prefixCls={this.getMenuPrefixCls()}\n        onClick={this.handleMenuClick}\n        style={dropdownMenuStyle}\n        focusable={false}\n        {...menuProps}\n      >\n        {optGroups}\n      </Menu>\n    );\n  }\n\n  getPopupProps() {\n    const { options, textField, valueField } = this;\n    return {\n      dataSet: options,\n      textField,\n      valueField,\n    };\n  }\n\n  @computed\n  get loading(): boolean {\n    const { field, options } = this;\n    return options.status === DataSetStatus.loading || (!!field && field.pending.length > 0);\n  }\n\n  getPopupContent(): ReactNode {\n    const menu = (\n      <Spin key=\"menu\" spinning={this.loading}>\n        {this.getMenu()}\n      </Spin>\n    );\n    if (this.multiple) {\n      return [\n        <div key=\"check-all\" className={`${this.prefixCls}-select-all-none`}>\n          <span onClick={this.chooseAll}>{$l('Select', 'select_all')}</span>\n          <span onClick={this.unChooseAll}>{$l('Select', 'unselect_all')}</span>\n        </div>,\n        menu,\n      ];\n    }\n\n    return menu;\n  }\n\n  @autobind\n  getPopupStyleFromAlign(target): CSSProperties | undefined {\n    const { dropdownMatchSelectWidth = getConfig('dropdownMatchSelectWidth') } = this.props;\n    if (target) {\n      if (dropdownMatchSelectWidth) {\n        return {\n          width: pxToRem(target.getBoundingClientRect().width),\n        };\n      }\n      return {\n        minWidth: pxToRem(target.getBoundingClientRect().width),\n      };\n    }\n  }\n\n  getTriggerIconFont() {\n    return 'baseline-arrow_drop_down';\n  }\n\n  @autobind\n  handleKeyDown(e) {\n    const { menu } = this;\n    if (!this.isDisabled() && !this.isReadOnly() && menu) {\n      if (this.popup && menu.onKeyDown(e)) {\n        stopEvent(e);\n      } else {\n        switch (e.keyCode) {\n          case KeyCode.RIGHT:\n          case KeyCode.DOWN:\n            this.handleKeyDownPrevNext(e, menu, 1);\n            break;\n          case KeyCode.LEFT:\n          case KeyCode.UP:\n            this.handleKeyDownPrevNext(e, menu, -1);\n            break;\n          case KeyCode.END:\n          case KeyCode.PAGE_DOWN:\n            this.handleKeyDownFirstLast(e, menu, 1);\n            break;\n          case KeyCode.HOME:\n          case KeyCode.PAGE_UP:\n            this.handleKeyDownFirstLast(e, menu, -1);\n            break;\n          // case KeyCode.ENTER:\n          //   this.handleKeyDownEnter(e);\n          //   break;\n          case KeyCode.ESC:\n            this.handleKeyDownEsc(e);\n            break;\n          case KeyCode.SPACE:\n            this.handleKeyDownSpace(e);\n            break;\n          default:\n        }\n      }\n    }\n    super.handleKeyDown(e);\n  }\n\n  handleKeyDownFirstLast(e, menu: Menu, direction: number) {\n    stopEvent(e);\n    const children = menu.getFlatInstanceArray();\n    const activeItem = children[direction < 0 ? 0 : children.length - 1];\n    if (activeItem) {\n      if (!this.editable || this.popup) {\n        updateActiveKey(menu, activeItem.props.eventKey);\n      }\n      if (!this.editable && !this.popup) {\n        this.choose(activeItem.props.value);\n      }\n    }\n  }\n\n  handleKeyDownPrevNext(e, menu: Menu, direction: number) {\n    if (!this.multiple && !this.editable) {\n      const activeItem = menu.step(direction);\n      if (activeItem) {\n        updateActiveKey(menu, activeItem.props.eventKey);\n        this.choose(activeItem.props.value);\n      }\n      e.preventDefault();\n    } else if (e === KeyCode.DOWN) {\n      this.expand();\n      e.preventDefault();\n    }\n  }\n\n  // handleKeyDownEnter(_e) {\n  // }\n\n  handleKeyDownEsc(e) {\n    if (this.popup) {\n      e.preventDefault();\n      this.collapse();\n    }\n  }\n\n  handleKeyDownSpace(e) {\n    if (!this.editable) {\n      e.preventDefault();\n      if (!this.popup) {\n        this.expand();\n      }\n    }\n  }\n\n  @autobind\n  handleBlur(e) {\n    if (!e.isDefaultPrevented()) {\n      super.handleBlur(e);\n      this.resetFilter();\n    }\n  }\n\n  expand() {\n    const { filteredOptions } = this;\n    if (filteredOptions && filteredOptions.length) {\n      super.expand();\n    }\n  }\n\n  syncValueOnBlur(value) {\n    if (value) {\n      const { data } = this.comboOptions;\n      this.options.ready().then(() => {\n        const record = this.findByTextWithValue(value, data);\n        if (record) {\n          this.choose(record);\n        }\n      });\n    } else if (!this.multiple) {\n      this.setValue(this.emptyValue);\n    }\n  }\n\n  findByTextWithValue(text, data: Record[]): Record | undefined {\n    const { textField } = this;\n    const records = [...data, ...this.filteredOptions].filter(record =>\n      isSameLike(record.get(textField), text),\n    );\n    if (records.length > 1) {\n      const { valueField, primitive } = this;\n      const value = this.getValue();\n      if (value) {\n        const found = records.find(record =>\n          isSameLike(record.get(valueField), primitive ? value : value[valueField]),\n        );\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return records[0];\n  }\n\n  findByText(text): Record | undefined {\n    const { textField } = this;\n    return this.optionsWithCombo.find(record => isSameLike(record.get(textField), text));\n  }\n\n  findByValue(value): Record | undefined {\n    const { valueField } = this;\n    const autoType = this.getProp('type') === FieldType.auto;\n    value = getSimpleValue(value, valueField);\n    return this.optionsWithCombo.find(record =>\n      autoType ? isSameLike(record.get(valueField), value) : isSame(record.get(valueField), value),\n    );\n  }\n\n  isSelected(record: Record) {\n    const { valueField } = this;\n    const autoType = this.getProp('type') === FieldType.auto;\n    return this.getValues().some(value => {\n      const simpleValue = getSimpleValue(value, valueField);\n      return autoType\n        ? isSameLike(record.get(valueField), simpleValue)\n        : isSame(record.get(valueField), simpleValue);\n    });\n  }\n\n  generateComboOption(value: string | any[], callback?: (text: string) => void): void {\n    const { currentComboOption, textField, valueField } = this;\n    if (value) {\n      if (isArrayLike(value)) {\n        value.forEach(v => !isNil(v) && this.generateComboOption(v));\n      } else {\n        const found = this.findByText(value) || this.findByValue(value);\n        if (found) {\n          const text = found.get(textField);\n          if (text !== value && callback) {\n            callback(text);\n          }\n          this.removeComboOption();\n        } else if (currentComboOption) {\n          currentComboOption.set(textField, value);\n          currentComboOption.set(valueField, value);\n        } else {\n          this.createComboOption(value);\n        }\n      }\n    } else {\n      this.removeComboOption();\n    }\n  }\n\n  createComboOption(value): void {\n    const { textField, valueField, menu } = this;\n    const record = this.comboOptions.create(\n      {\n        [textField]: value,\n        [valueField]: value,\n      },\n      0,\n    );\n    if (menu) {\n      updateActiveKey(menu, getItemKey(record, value, value));\n    }\n  }\n\n  removeComboOptions() {\n    this.comboOptions.forEach(record => this.removeComboOption(record));\n  }\n\n  removeComboOption(record?: Record): void {\n    if (!record) {\n      record = this.currentComboOption;\n    }\n    if (record && !this.isSelected(record)) {\n      this.comboOptions.remove(record);\n    }\n  }\n\n  handlePopupAnimateAppear() {}\n\n  getValueKey(v) {\n    if (isArrayLike(v)) {\n      return v.map(this.getValueKey, this).join(',');\n    }\n    const autoType = this.getProp('type') === FieldType.auto;\n    const value = getSimpleValue(v, this.valueField);\n    return autoType && !isNil(value) ? value.toString() : value;\n  }\n\n  @autobind\n  handlePopupAnimateEnd(_key, _exists) {}\n\n  @autobind\n  handleMenuClick({\n    item: {\n      props: { value },\n    },\n  }) {\n    if (this.multiple && this.isSelected(value)) {\n      this.unChoose(value);\n    } else {\n      this.choose(value);\n    }\n  }\n\n  handleOptionSelect(record: Record) {\n    this.prepareSetValue(this.processRecordToObject(record));\n  }\n\n  handleOptionUnSelect(record: Record) {\n    const { valueField } = this;\n    const newValue = record.get(valueField);\n    this.removeValue(newValue, -1);\n  }\n\n  @action\n  setText(text?: string): void {\n    super.setText(text);\n    if (this.searchable && isString(this.searchMatcher)) {\n      this.doSearch(text);\n    }\n  }\n\n  doSearch = debounce(value => this.searchRemote(value), 500);\n\n  searchRemote(value) {\n    const { field, searchMatcher } = this;\n    if (field && isString(searchMatcher)) {\n      field.setLovPara(searchMatcher, value === '' ? undefined : value);\n    }\n  }\n\n  @autobind\n  @action\n  handleChange(e) {\n    const { value } = e.target;\n    this.setText(value);\n    if (this.observableProps.combo) {\n      this.generateComboOption(value, text => this.setText(text));\n    }\n    if (!this.popup) {\n      this.expand();\n    }\n  }\n\n  processRecordToObject(record: Record) {\n    const { primitive, valueField } = this;\n    return primitive ? record.get(valueField) : record.toData();\n  }\n\n  processObjectValue(value, textField) {\n    if (!isNil(value)) {\n      if (isPlainObject(value)) {\n        return ObjectChainValue.get(value, textField);\n      }\n      const found = this.findByValue(value);\n      if (found) {\n        return found.get(textField);\n      }\n    }\n  }\n\n  processLookupValue(value) {\n    const { field, textField, primitive } = this;\n    if (primitive && field && field.lookup) {\n      return super.processValue(field.getText(value));\n    }\n    return super.processValue(this.processObjectValue(value, textField));\n  }\n\n  processValue(value: any): string {\n    const text = this.processLookupValue(value);\n    if (isEmpty(text)) {\n      if (isPlainObject(value)) {\n        return ObjectChainValue.get(value, this.valueField) || '';\n      }\n      return super.processValue(value);\n    }\n    return text;\n  }\n\n  @action\n  clear() {\n    this.setText(undefined);\n    super.clear();\n    this.removeComboOptions();\n  }\n\n  resetFilter() {\n    this.setText(undefined);\n    this.removeComboOption();\n    this.forcePopupAlign();\n  }\n\n  @autobind\n  reset() {\n    super.reset();\n    this.resetFilter();\n  }\n\n  unChoose(record?: Record | null) {\n    if (record) {\n      this.handleOptionUnSelect(record);\n    }\n  }\n\n  choose(record?: Record | null) {\n    if (!this.multiple) {\n      this.collapse();\n    }\n    if (record) {\n      this.handleOptionSelect(record);\n    }\n  }\n\n  @autobind\n  chooseAll() {\n    this.setValue(this.filteredOptions.map(this.processRecordToObject, this));\n  }\n\n  @autobind\n  unChooseAll() {\n    this.clear();\n  }\n\n  @autobind\n  async handlePopupHiddenChange(hidden: boolean) {\n    if (!hidden) {\n      this.forcePopupAlign();\n    }\n    super.handlePopupHiddenChange(hidden);\n  }\n\n  async processSelectedData() {\n    this.comboOptions.removeAll();\n    const values = this.getValues();\n    const { field } = this;\n    if (field) {\n      await field.ready();\n    }\n    const {\n      filteredOptions,\n      observableProps: { combo },\n    } = this;\n    runInAction(() => {\n      const newValues = values.filter(value => {\n        const record = this.findByValue(value);\n        if (record) {\n          return true;\n        }\n        if (combo) {\n          this.createComboOption(value);\n          return true;\n        }\n        return false;\n      });\n      if (this.text && combo) {\n        this.generateComboOption(this.text);\n      }\n      if (\n        field &&\n        field.get('cascadeMap') &&\n        filteredOptions.length &&\n        !isEqual(newValues, values)\n      ) {\n        this.setValue(this.multiple ? newValues : newValues[0]);\n      }\n    });\n  }\n\n  filterData(data: Record[], text?: string): Record[] {\n    const {\n      textField,\n      valueField,\n      searchable,\n      searchMatcher,\n      props: { optionsFilter },\n    } = this;\n    data = optionsFilter ? data.filter(optionsFilter!) : data;\n    if (searchable && text && typeof searchMatcher === 'function') {\n      return data.filter(record => searchMatcher({ record, text, textField, valueField }));\n    }\n    return data;\n  }\n}\n\n@observer\nexport default class ObserverSelect extends Select<SelectProps> {\n  static defaultProps = Select.defaultProps;\n\n  static Option = Option;\n\n  static OptGroup = OptGroup;\n}\n"]}