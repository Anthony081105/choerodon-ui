3b64b2bc3bf428d75415c0b2f86e19d3
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _modalProviderTest = _interopRequireDefault(require("./modalProviderTest"));

describe('ModalProvider', function () {
  beforeEach(function () {
    jest.useFakeTimers();
  });
  afterEach(function () {
    jest.useRealTimers();
  });
  it('the mask appears when click the button', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_modalProviderTest["default"], null));
    expect(wrapper.find('.c7n-pro-mask-wrapper').length).toBe(0);
    wrapper.find('button').at(1).simulate('click');
    jest.runAllTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-mask-wrapper').length).toBe(1);
  });
  it('the modal show when click the button', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_modalProviderTest["default"], null));
    expect(wrapper.find('.c7n-pro-modal')).toHaveLength(0);
    wrapper.find('button').at(1).simulate('click');
    jest.runAllTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-modal')).toHaveLength(1);
  });
  it('the modal hidden when click the button cancel', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_modalProviderTest["default"], null));
    wrapper.find('button').at(1).simulate('click');
    jest.runAllTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-modal')).toHaveLength(1);
    expect(wrapper.find('.c7n-pro-modal').hostNodes().find('button').at(1)).toHaveLength(1);
    wrapper.find('.c7n-pro-modal').hostNodes().find('button').at(1).simulate('click');
    jest.runAllTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-mask-wrapper').prop('hidden')).toBe(false);
    wrapper.find('.c7n-pro-modal').hostNodes().find('button').at(0).simulate('click');
    jest.runAllTimers();
    wrapper.update();
    expect(wrapper.find('.c7n-pro-modal')).toHaveLength(2);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRlc3QuanMiXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiamVzdCIsInVzZUZha2VUaW1lcnMiLCJhZnRlckVhY2giLCJ1c2VSZWFsVGltZXJzIiwiaXQiLCJ3cmFwcGVyIiwiZXhwZWN0IiwiZmluZCIsImxlbmd0aCIsInRvQmUiLCJhdCIsInNpbXVsYXRlIiwicnVuQWxsVGltZXJzIiwidXBkYXRlIiwidG9IYXZlTGVuZ3RoIiwiaG9zdE5vZGVzIiwicHJvcCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBQSxRQUFRLENBQUMsZUFBRCxFQUFrQixZQUFNO0FBQzlCQyxFQUFBQSxVQUFVLENBQUMsWUFBTTtBQUNmQyxJQUFBQSxJQUFJLENBQUNDLGFBQUw7QUFDRCxHQUZTLENBQVY7QUFJQUMsRUFBQUEsU0FBUyxDQUFDLFlBQU07QUFDZEYsSUFBQUEsSUFBSSxDQUFDRyxhQUFMO0FBQ0QsR0FGUSxDQUFUO0FBSUFDLEVBQUFBLEVBQUUsQ0FBQyx3Q0FBRCxFQUEyQyxZQUFNO0FBQ2pELFFBQU1DLE9BQU8sR0FBRyxtQkFBTSxnQ0FBQyw2QkFBRCxPQUFOLENBQWhCO0FBQ0FDLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRSxJQUFSLENBQWEsdUJBQWIsRUFBc0NDLE1BQXZDLENBQU4sQ0FBcURDLElBQXJELENBQTBELENBQTFEO0FBQ0FKLElBQUFBLE9BQU8sQ0FDSkUsSUFESCxDQUNRLFFBRFIsRUFFR0csRUFGSCxDQUVNLENBRk4sRUFHR0MsUUFISCxDQUdZLE9BSFo7QUFJQVgsSUFBQUEsSUFBSSxDQUFDWSxZQUFMO0FBQ0FQLElBQUFBLE9BQU8sQ0FBQ1EsTUFBUjtBQUNBUCxJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ0UsSUFBUixDQUFhLHVCQUFiLEVBQXNDQyxNQUF2QyxDQUFOLENBQXFEQyxJQUFyRCxDQUEwRCxDQUExRDtBQUVELEdBWEMsQ0FBRjtBQWFBTCxFQUFBQSxFQUFFLENBQUMsc0NBQUQsRUFBeUMsWUFBTTtBQUMvQyxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsNkJBQUQsT0FBTixDQUFoQjtBQUNBQyxJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ0UsSUFBUixDQUFhLGdCQUFiLENBQUQsQ0FBTixDQUF1Q08sWUFBdkMsQ0FBb0QsQ0FBcEQ7QUFDQVQsSUFBQUEsT0FBTyxDQUNKRSxJQURILENBQ1EsUUFEUixFQUVHRyxFQUZILENBRU0sQ0FGTixFQUdHQyxRQUhILENBR1ksT0FIWjtBQUlBWCxJQUFBQSxJQUFJLENBQUNZLFlBQUw7QUFDQVAsSUFBQUEsT0FBTyxDQUFDUSxNQUFSO0FBQ0FQLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRSxJQUFSLENBQWEsZ0JBQWIsQ0FBRCxDQUFOLENBQXVDTyxZQUF2QyxDQUFvRCxDQUFwRDtBQUNELEdBVkMsQ0FBRjtBQVlBVixFQUFBQSxFQUFFLENBQUMsK0NBQUQsRUFBa0QsWUFBTTtBQUN4RCxRQUFNQyxPQUFPLEdBQUcsbUJBQU0sZ0NBQUMsNkJBQUQsT0FBTixDQUFoQjtBQUNBQSxJQUFBQSxPQUFPLENBQ0pFLElBREgsQ0FDUSxRQURSLEVBRUdHLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLFFBSEgsQ0FHWSxPQUhaO0FBSUFYLElBQUFBLElBQUksQ0FBQ1ksWUFBTDtBQUNBUCxJQUFBQSxPQUFPLENBQUNRLE1BQVI7QUFDQVAsSUFBQUEsTUFBTSxDQUFDRCxPQUFPLENBQUNFLElBQVIsQ0FBYSxnQkFBYixDQUFELENBQU4sQ0FBdUNPLFlBQXZDLENBQW9ELENBQXBEO0FBQ0FSLElBQUFBLE1BQU0sQ0FDSkQsT0FBTyxDQUNKRSxJQURILENBQ1EsZ0JBRFIsRUFFR1EsU0FGSCxHQUdHUixJQUhILENBR1EsUUFIUixFQUlHRyxFQUpILENBSU0sQ0FKTixDQURJLENBQU4sQ0FNRUksWUFORixDQU1lLENBTmY7QUFPQVQsSUFBQUEsT0FBTyxDQUNKRSxJQURILENBQ1EsZ0JBRFIsRUFFR1EsU0FGSCxHQUdHUixJQUhILENBR1EsUUFIUixFQUlHRyxFQUpILENBSU0sQ0FKTixFQUtHQyxRQUxILENBS1ksT0FMWjtBQU1BWCxJQUFBQSxJQUFJLENBQUNZLFlBQUw7QUFDQVAsSUFBQUEsT0FBTyxDQUFDUSxNQUFSO0FBQ0FQLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRSxJQUFSLENBQWEsdUJBQWIsRUFBc0NTLElBQXRDLENBQTJDLFFBQTNDLENBQUQsQ0FBTixDQUE2RFAsSUFBN0QsQ0FBa0UsS0FBbEU7QUFFQUosSUFBQUEsT0FBTyxDQUNKRSxJQURILENBQ1EsZ0JBRFIsRUFFR1EsU0FGSCxHQUdHUixJQUhILENBR1EsUUFIUixFQUlHRyxFQUpILENBSU0sQ0FKTixFQUtHQyxRQUxILENBS1ksT0FMWjtBQU1BWCxJQUFBQSxJQUFJLENBQUNZLFlBQUw7QUFDQVAsSUFBQUEsT0FBTyxDQUFDUSxNQUFSO0FBQ0FQLElBQUFBLE1BQU0sQ0FBQ0QsT0FBTyxDQUFDRSxJQUFSLENBQWEsZ0JBQWIsQ0FBRCxDQUFOLENBQXVDTyxZQUF2QyxDQUFvRCxDQUFwRDtBQUNELEdBbkNDLENBQUY7QUFvQ0QsQ0F0RU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtb3VudCB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgTW9kYWxQcm92aWRlclRlc3QgZnJvbSAnLi9tb2RhbFByb3ZpZGVyVGVzdCc7XG5cbmRlc2NyaWJlKCdNb2RhbFByb3ZpZGVyJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LnVzZUZha2VUaW1lcnMoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcbiAgfSk7XG5cbiAgaXQoJ3RoZSBtYXNrIGFwcGVhcnMgd2hlbiBjbGljayB0aGUgYnV0dG9uJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TW9kYWxQcm92aWRlclRlc3QgLz4pO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLW1hc2std3JhcHBlcicpLmxlbmd0aCkudG9CZSgwKTtcbiAgICB3cmFwcGVyXG4gICAgICAuZmluZCgnYnV0dG9uJylcbiAgICAgIC5hdCgxKVxuICAgICAgLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGplc3QucnVuQWxsVGltZXJzKCk7XG4gICAgd3JhcHBlci51cGRhdGUoKTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCcuYzduLXByby1tYXNrLXdyYXBwZXInKS5sZW5ndGgpLnRvQmUoMSk7XG5cbiAgfSk7XG5cbiAgaXQoJ3RoZSBtb2RhbCBzaG93IHdoZW4gY2xpY2sgdGhlIGJ1dHRvbicsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPE1vZGFsUHJvdmlkZXJUZXN0IC8+KTtcbiAgICBleHBlY3Qod3JhcHBlci5maW5kKCcuYzduLXByby1tb2RhbCcpKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgd3JhcHBlclxuICAgICAgLmZpbmQoJ2J1dHRvbicpXG4gICAgICAuYXQoMSlcbiAgICAgIC5zaW11bGF0ZSgnY2xpY2snKTtcbiAgICBqZXN0LnJ1bkFsbFRpbWVycygpO1xuICAgIHdyYXBwZXIudXBkYXRlKCk7XG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnLmM3bi1wcm8tbW9kYWwnKSkudG9IYXZlTGVuZ3RoKDEpO1xuICB9KTtcblxuICBpdCgndGhlIG1vZGFsIGhpZGRlbiB3aGVuIGNsaWNrIHRoZSBidXR0b24gY2FuY2VsJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8TW9kYWxQcm92aWRlclRlc3QgLz4pO1xuICAgIHdyYXBwZXJcbiAgICAgIC5maW5kKCdidXR0b24nKVxuICAgICAgLmF0KDEpXG4gICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLW1vZGFsJykpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCcuYzduLXByby1tb2RhbCcpXG4gICAgICAgIC5ob3N0Tm9kZXMoKVxuICAgICAgICAuZmluZCgnYnV0dG9uJylcbiAgICAgICAgLmF0KDEpLFxuICAgICkudG9IYXZlTGVuZ3RoKDEpO1xuICAgIHdyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLXByby1tb2RhbCcpXG4gICAgICAuaG9zdE5vZGVzKClcbiAgICAgIC5maW5kKCdidXR0b24nKVxuICAgICAgLmF0KDEpXG4gICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLW1hc2std3JhcHBlcicpLnByb3AoJ2hpZGRlbicpKS50b0JlKGZhbHNlKTtcblxuICAgIHdyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLXByby1tb2RhbCcpXG4gICAgICAuaG9zdE5vZGVzKClcbiAgICAgIC5maW5kKCdidXR0b24nKVxuICAgICAgLmF0KDApXG4gICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgamVzdC5ydW5BbGxUaW1lcnMoKTtcbiAgICB3cmFwcGVyLnVwZGF0ZSgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmZpbmQoJy5jN24tcHJvLW1vZGFsJykpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgfSk7XG59KTtcbiJdfQ==