0bca996677631d70d6a3c3ded76aa10b
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _checkbox = _interopRequireDefault(require("../../../components/checkbox"));

var _row = _interopRequireDefault(require("../../../components/row"));

var _button = _interopRequireDefault(require("../../../components/button"));

var _col = _interopRequireDefault(require("../../../components/col"));

var _cascader = _interopRequireDefault(require("../../../components/cascader"));

var _inputNumber = _interopRequireDefault(require("../../../components/input-number"));

var _tooltip = _interopRequireDefault(require("../../../components/tooltip"));

var _icon = _interopRequireDefault(require("../../../components/icon"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _input = _interopRequireDefault(require("../../../components/input"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _autoComplete = _interopRequireDefault(require("../../../components/auto-complete"));

var _form = _interopRequireDefault(require("../../../components/form"));

var _react = _interopRequireDefault(require("react"));

var FormItem = _form["default"].Item;
var AutoCompleteOption = _autoComplete["default"].Option;
var residences = [{
  value: 'zhejiang',
  label: 'Zhejiang',
  children: [{
    value: 'hangzhou',
    label: 'Hangzhou',
    children: [{
      value: 'xihu',
      label: 'West Lake'
    }]
  }]
}, {
  value: 'jiangsu',
  label: 'Jiangsu',
  children: [{
    value: 'nanjing',
    label: 'Nanjing',
    children: [{
      value: 'zhonghuamen',
      label: 'Zhong Hua Men'
    }]
  }]
}];

var RegistrationForm =
/*#__PURE__*/
function (_React$Component) {
  (0, _inherits2["default"])(RegistrationForm, _React$Component);

  function RegistrationForm() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, RegistrationForm);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(RegistrationForm)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", {
      confirmDirty: false,
      showLengthInfo: true,
      autoCompleteResult: []
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleSubmit", function (e) {
      e.preventDefault();

      _this.props.form.validateFields(function (err, values) {
        if (err.nickname) {
          _this.setState({
            showLengthInfo: false
          });
        }

        if (!err) {
          console.log('Received values of form: ', values);
        }
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleConfirmBlur", function (e) {
      var value = e.target.value;

      _this.setState({
        confirmDirty: _this.state.confirmDirty || !!value
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "compareToFirstPassword", function (rule, value, callback) {
      var form = _this.props.form;

      if (value && value !== form.getFieldValue('password')) {
        callback('Two passwords that you enter is inconsistent!');
      } else {
        callback();
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "validateToNextPassword", function (rule, value, callback) {
      var form = _this.props.form;

      if (value && _this.state.confirmDirty) {
        form.validateFields(['confirm'], {
          force: true
        });
      }

      callback();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleWebsiteChange", function (value) {
      var autoCompleteResult;

      if (!value) {
        autoCompleteResult = [];
      } else {
        autoCompleteResult = ['.com', '.org', '.net'].map(function (domain) {
          return "".concat(value).concat(domain);
        });
      }

      _this.setState({
        autoCompleteResult: autoCompleteResult
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleNickName", function () {
      var showLengthInfo = _this.state.showLengthInfo;

      if (!showLengthInfo) {
        _this.setState({
          showLengthInfo: true
        });
      }
    });
    return _this;
  }

  (0, _createClass2["default"])(RegistrationForm, [{
    key: "render",
    value: function render() {
      var getFieldDecorator = this.props.form.getFieldDecorator;
      var _this$state = this.state,
          autoCompleteResult = _this$state.autoCompleteResult,
          showLengthInfo = _this$state.showLengthInfo;
      var formItemLayout = {
        labelCol: {
          xs: {
            span: 24
          },
          sm: {
            span: 8
          }
        },
        wrapperCol: {
          xs: {
            span: 24
          },
          sm: {
            span: 16
          }
        }
      };
      var tailFormItemLayout = {
        wrapperCol: {
          xs: {
            span: 24,
            offset: 0
          },
          sm: {
            span: 16,
            offset: 8
          }
        }
      };
      var websiteOptions = autoCompleteResult.map(function (website) {
        return _react["default"].createElement(AutoCompleteOption, {
          key: website
        }, website);
      });
      return _react["default"].createElement(_form["default"], {
        onSubmit: this.handleSubmit
      }, _react["default"].createElement(FormItem, (0, _extends2["default"])({}, formItemLayout, {
        label: "E-mail"
      }), getFieldDecorator('email', {
        rules: [{
          type: 'email',
          message: 'The input is not valid E-mail!'
        }, {
          required: true,
          message: 'Please input your E-mail!'
        }]
      })(_react["default"].createElement(_input["default"], {
        label: "email"
      }))), _react["default"].createElement(FormItem, (0, _extends2["default"])({}, formItemLayout, {
        label: "Password"
      }), getFieldDecorator('password', {
        rules: [{
          required: true,
          message: 'Please input your password!'
        }, {
          validator: this.validateToNextPassword
        }]
      })(_react["default"].createElement(_input["default"], {
        showPasswordEye: true,
        label: "password",
        type: "password"
      }))), _react["default"].createElement(FormItem, (0, _extends2["default"])({}, formItemLayout, {
        label: "Confirm Password"
      }), getFieldDecorator('confirm', {
        rules: [{
          required: true,
          message: 'Please confirm your password!'
        }, {
          validator: this.compareToFirstPassword
        }]
      })(_react["default"].createElement(_input["default"], {
        showPasswordEye: true,
        label: "password",
        type: "password",
        onBlur: this.handleConfirmBlur
      }))), _react["default"].createElement(FormItem, (0, _extends2["default"])({}, formItemLayout, {
        label: _react["default"].createElement("span", null, "Nickname\xA0", _react["default"].createElement(_tooltip["default"], {
          title: "What do you want others to call you?"
        }, _react["default"].createElement(_icon["default"], {
          type: "question-circle-o"
        })))
      }), getFieldDecorator('nickname', {
        rules: [{
          required: true,
          message: 'Please input your nickname!',
          whitespace: true
        }]
      })(_react["default"].createElement(_input["default"], {
        maxLength: 20,
        label: "\u540D\u79F0",
        showLengthInfo: showLengthInfo,
        onChange: this.handleNickName
      }))), _react["default"].createElement(FormItem, formItemLayout, getFieldDecorator('age', {
        rules: [{
          required: true,
          message: 'Please input your age!',
          type: 'number',
          whitespace: true
        }],
        initialValue: 20
      })(_react["default"].createElement(_inputNumber["default"], {
        label: "Age",
        min: 1,
        max: 100
      }))), _react["default"].createElement(FormItem, (0, _extends2["default"])({}, formItemLayout, {
        label: "Habitual Residence"
      }), getFieldDecorator('residence', {
        initialValue: ['zhejiang', 'hangzhou', 'xihu'],
        rules: [{
          type: 'array',
          required: true,
          message: 'Please select your habitual residence!'
        }]
      })(_react["default"].createElement(_cascader["default"], {
        options: residences
      }))), _react["default"].createElement(FormItem, formItemLayout, getFieldDecorator('website', {
        rules: [{
          required: true,
          message: 'Please input website!'
        }]
      })(_react["default"].createElement(_autoComplete["default"], {
        dataSource: websiteOptions,
        onChange: this.handleWebsiteChange,
        placeholder: "website",
        label: "Website"
      }))), _react["default"].createElement(FormItem, (0, _extends2["default"])({}, formItemLayout, {
        extra: "We must make sure that your are a human."
      }), _react["default"].createElement(_row["default"], {
        gutter: 8
      }, _react["default"].createElement(_col["default"], {
        span: 12
      }, getFieldDecorator('captcha', {
        rules: [{
          required: true,
          message: 'Please input the captcha you got!'
        }]
      })(_react["default"].createElement(_input["default"], {
        label: "Captcha"
      }))), _react["default"].createElement(_col["default"], {
        span: 12
      }, _react["default"].createElement(_button["default"], {
        funcType: "raised"
      }, "Get captcha")))), _react["default"].createElement(FormItem, tailFormItemLayout, getFieldDecorator('agreement', {
        valuePropName: 'checked'
      })(_react["default"].createElement(_checkbox["default"], null, "I have read the ", _react["default"].createElement("a", {
        href: ""
      }, "agreement")))), _react["default"].createElement(FormItem, tailFormItemLayout, _react["default"].createElement(_button["default"], {
        type: "primary",
        funcType: "raised",
        htmlType: "submit"
      }, "Register")));
    }
  }]);
  return RegistrationForm;
}(_react["default"].Component);

var WrappedRegistrationForm = _form["default"].create()(RegistrationForm);

var __Demo = _react["default"].createElement(WrappedRegistrationForm, null);

var _default = __Demo;
exports["default"] = _default;