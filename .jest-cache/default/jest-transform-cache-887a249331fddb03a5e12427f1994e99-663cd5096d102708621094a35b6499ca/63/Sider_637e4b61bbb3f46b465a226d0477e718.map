{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/layout/Sider.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component, HTMLAttributes, ReactNode } from 'react';\nimport classNames from 'classnames';\nimport omit from 'lodash/omit';\nimport PropTypes from 'prop-types';\nimport Icon from '../icon';\nimport { getPrefixCls } from '../configure';\nimport { matchMediaPolifill } from '../_util/mediaQueryListPolyfill';\n\nif (typeof window !== 'undefined') {\n  // const matchMediaPolyfill = (mediaQuery: string): MediaQueryList => {\n  //   return {\n  //     media: mediaQuery,\n  //     matches: false,\n  //     addListener() {\n  //     },\n  //     removeListener() {\n  //     },\n  //   };\n  // };\n  window.matchMedia = window.matchMedia || matchMediaPolifill;\n}\n\nconst dimensionMap = {\n  xs: '480px',\n  sm: '576px',\n  md: '768px',\n  lg: '992px',\n  xl: '1200px',\n  xxl: '1600px',\n};\n\nexport type CollapseType = 'clickTrigger' | 'responsive';\n\nexport interface SiderProps extends HTMLAttributes<HTMLDivElement> {\n  prefixCls?: string;\n  collapsible?: boolean;\n  collapsed?: boolean;\n  defaultCollapsed?: boolean;\n  reverseArrow?: boolean;\n  onCollapse?: (collapsed: boolean, type: CollapseType) => void;\n  trigger?: ReactNode;\n  width?: number | string;\n  collapsedWidth?: number | string;\n  breakpoint?: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl';\n}\n\nexport interface SiderState {\n  collapsed?: boolean;\n  below: boolean;\n  belowShow?: boolean;\n}\n\nexport interface SiderContext {\n  siderCollapsed: boolean;\n}\n\nconst generateId = (() => {\n  let i = 0;\n  return (prefix: string = '') => {\n    i += 1;\n    return `${prefix}${i}`;\n  };\n})();\n\nexport default class Sider extends Component<SiderProps, SiderState> {\n  static displayName = 'LayoutSider';\n\n  static __ANT_LAYOUT_SIDER: any = true;\n\n  static defaultProps = {\n    collapsible: false,\n    defaultCollapsed: false,\n    reverseArrow: false,\n    width: 200,\n    collapsedWidth: 80,\n    style: {},\n  };\n\n  static childContextTypes = {\n    siderCollapsed: PropTypes.bool,\n    collapsedWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  };\n\n  static contextTypes = {\n    siderHook: PropTypes.object,\n  };\n\n  private mql: MediaQueryList;\n\n  private uniqueId: string;\n\n  constructor(props: SiderProps) {\n    super(props);\n    this.uniqueId = generateId(getPrefixCls('sider-'));\n    let matchMedia;\n    if (typeof window !== 'undefined') {\n      matchMedia = window.matchMedia;\n    }\n    if (matchMedia && props.breakpoint && props.breakpoint in dimensionMap) {\n      this.mql = matchMedia(`(max-width: ${dimensionMap[props.breakpoint]})`);\n    }\n    let collapsed;\n    if ('collapsed' in props) {\n      collapsed = props.collapsed;\n    } else {\n      collapsed = props.defaultCollapsed;\n    }\n    this.state = {\n      collapsed,\n      below: false,\n    };\n  }\n\n  getChildContext() {\n    const { collapsedWidth } = this.props;\n    const { collapsed } = this.state;\n    return {\n      siderCollapsed: collapsed,\n      collapsedWidth,\n    };\n  }\n\n  componentWillReceiveProps(nextProps: SiderProps) {\n    if ('collapsed' in nextProps) {\n      this.setState({\n        collapsed: nextProps.collapsed,\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (this.mql) {\n      this.mql.addListener(this.responsiveHandler);\n      this.responsiveHandler(\n        new MediaQueryListEvent('change', {\n          matches: this.mql.matches,\n          media: this.mql.media,\n        }),\n      );\n    }\n    const { siderHook } = this.context;\n    if (siderHook) {\n      siderHook.addSider(this.uniqueId);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.mql) {\n      this.mql.removeListener(this.responsiveHandler);\n    }\n    const { siderHook } = this.context;\n    if (siderHook) {\n      siderHook.removeSider(this.uniqueId);\n    }\n  }\n\n  responsiveHandler = (event: MediaQueryListEvent) => {\n    this.setState({ below: event.matches });\n    const { collapsed } = this.state;\n    if (collapsed !== event.matches) {\n      this.setCollapsed(event.matches, 'responsive');\n    }\n  };\n\n  setCollapsed = (collapsed: boolean, type: CollapseType) => {\n    if (!('collapsed' in this.props)) {\n      this.setState({\n        collapsed,\n      });\n    }\n    const { onCollapse } = this.props;\n    if (onCollapse) {\n      onCollapse(collapsed, type);\n    }\n  };\n\n  toggle = () => {\n    const { collapsed } = this.state;\n    this.setCollapsed(!collapsed, 'clickTrigger');\n  };\n\n  belowShowChange = () => {\n    const { belowShow } = this.state;\n    this.setState({ belowShow: !belowShow });\n  };\n\n  render() {\n    const {\n      prefixCls: customizePrefixCls,\n      className,\n      collapsible,\n      reverseArrow,\n      trigger,\n      style,\n      width,\n      collapsedWidth,\n      children,\n      ...others\n    } = this.props;\n    const { collapsed, below } = this.state;\n    const prefixCls = getPrefixCls('layout-sider', customizePrefixCls);\n    const divProps = omit(others, ['collapsed', 'defaultCollapsed', 'onCollapse', 'breakpoint']);\n    const siderWidth = collapsed ? collapsedWidth : width;\n    // special trigger when collapsedWidth == 0\n    const zeroWidthTrigger =\n      collapsedWidth === 0 || collapsedWidth === '0' || collapsedWidth === '0px' ? (\n        <span onClick={this.toggle} className={`${prefixCls}-zero-width-trigger`}>\n          <Icon type=\"bars\" />\n        </span>\n      ) : null;\n    const iconObj = {\n      expanded: reverseArrow ? <Icon type=\"right\" /> : <Icon type=\"left\" />,\n      collapsed: reverseArrow ? <Icon type=\"left\" /> : <Icon type=\"right\" />,\n    };\n    const status = collapsed ? 'collapsed' : 'expanded';\n    const defaultTrigger = iconObj[status];\n    const triggerDom =\n      trigger !== null\n        ? zeroWidthTrigger || (\n            <div\n              className={`${prefixCls}-trigger`}\n              onClick={this.toggle}\n              style={{ width: siderWidth }}\n            >\n              {trigger || defaultTrigger}\n            </div>\n          )\n        : null;\n    const divStyle = {\n      ...style,\n      flex: `0 0 ${siderWidth}px`,\n      maxWidth: `${siderWidth}px`, // Fix width transition bug in IE11\n      minWidth: `${siderWidth}px`,\n      width: `${siderWidth}px`,\n    };\n    const siderCls = classNames(className, prefixCls, {\n      [`${prefixCls}-collapsed`]: !!collapsed,\n      [`${prefixCls}-has-trigger`]: collapsible && trigger !== null && !zeroWidthTrigger,\n      [`${prefixCls}-below`]: !!below,\n      [`${prefixCls}-zero-width`]: siderWidth === 0 || siderWidth === '0' || siderWidth === '0px',\n    });\n    return (\n      <div className={siderCls} {...divProps} style={divStyle}>\n        <div className={`${prefixCls}-children`}>{children}</div>\n        {collapsible || (below && zeroWidthTrigger) ? triggerDom : null}\n      </div>\n    );\n  }\n}\n"]}