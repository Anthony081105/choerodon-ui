{"version":3,"sources":["tabs/utils.jsx"],"names":["c","Children","String","toArray","generateKey","child","style","transform","WebkitTransform","MozTransform","v","tabBarPosition","translate","isVertical","marginDirection","getComputedStyle","value","vertical","setTransform","el","key","prev","props","total","getStyle","childNodes","tabNode","Array","node","toNum","getTypeValue","top","height"],"mappings":"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","sourcesContent":["import { Children } from 'react';\nimport isNil from 'lodash/isNil';\n\nexport function toArray (children) {\n  const c = [];\n  Children.forEach(children, child => {\n    if (child) {\n      c.push(child);\n    }\n  });\n  return c;\n}\n\nexport function generateKey (key, index) {\n  return String(isNil(key) ? index : key);\n}\n\nexport function getActiveIndex (children, activeKey) {\n  const c = toArray(children);\n  return c.findIndex((child, index) => generateKey(child.key, index) === activeKey);\n}\n\nexport function getActiveKey (children, index) {\n  const c = toArray(children);\n  return generateKey(c[index].key, index);\n}\n\nexport function setTransform (style, v) {\n  style.transform = v;\n  style.webkitTransform = v;\n  style.mozTransform = v;\n}\n\nexport function isTransformSupported (style) {\n  return 'transform' in style ||\n    'webkitTransform' in style ||\n    'MozTransform' in style;\n}\n\nexport function setTransition (style, v) {\n  style.transition = v;\n  style.webkitTransition = v;\n  style.MozTransition = v;\n}\n\nexport function getTransformPropValue (v) {\n  return {\n    transform: v,\n    WebkitTransform: v,\n    MozTransform: v,\n  };\n}\n\nexport function isVertical (tabBarPosition) {\n  return tabBarPosition === 'left' || tabBarPosition === 'right';\n}\n\nexport function getTransformByIndex (index, tabBarPosition) {\n  const translate = isVertical(tabBarPosition) ? 'translateY' : 'translateX';\n  return `${translate}(${-index * 100}%) translateZ(0)`;\n}\n\nexport function getMarginStyle (index, tabBarPosition) {\n  const marginDirection = isVertical(tabBarPosition) ? 'marginTop' : 'marginLeft';\n  return {\n    [marginDirection]: `${-index * 100}%`,\n  };\n}\n\nexport function getStyle (el, property) {\n  return +getComputedStyle(el).getPropertyValue(property).replace('px', '');\n}\n\nexport function setPxStyle (el, value, vertical) {\n  value = vertical ? `0px, ${value}px, 0px` : `${value}px, 0px, 0px`;\n  setTransform(el.style, `translate3d(${value})`);\n}\n\nexport function getDataAttr (props) {\n  return Object.keys(props).reduce((prev, key) => {\n    if (key.substr(0, 5) === 'aria-' || key.substr(0, 5) === 'data-' || key === 'role') {\n      prev[key] = props[key];\n    }\n    return prev;\n  }, {});\n}\n\nfunction toNum (style, property) {\n  return +style.getPropertyValue(property).replace('px', '');\n}\n\nfunction getTypeValue (start, current, end, tabNode, wrapperNode) {\n  let total = getStyle(wrapperNode, `padding-${start}`);\n  const { childNodes } = tabNode.parentNode;\n  Array.prototype.some.call(childNodes, (node) => {\n    if (node !== tabNode) {\n      // 此处对代码进行了修改 取自rc-tabs@9.4.2 这版本进行了计算方式的调整,避免了在类似modal等有动画的内容中使用的时候，计算出现错误的问题，因为在动画过程中的计算，会有一次Height width为0的情况\n      // 在 9.4.2版本中 因为前几个版本的修改 refactor: rm mixin and react-create-class \n      // 对dom结构进行了调整 bar不与item在一个父元素中,因此有如下代码，在c7n中暂时不进行dom结构调整\n      if (node.className.includes('ink-bar')) {\n        return false;\n      }\n      const style = getComputedStyle(node);\n      total += toNum(style, `margin-${start}`);\n      total += toNum(style, `margin-${end}`);\n      total += toNum(style, current);\n\n      if (style.boxSizing === 'content-box') {\n        total += toNum(style, `border-${start}-width`) + toNum(style, `padding-${start}`) +\n          toNum(style, `border-${end}-width`) + toNum(style, `padding-${end}`);\n      }\n      return false;\n    }\n    return true;\n  });\n\n  return total;\n}\n\nexport function getLeft (tabNode, wrapperNode) {\n  return getTypeValue('left', 'width', 'right', tabNode, wrapperNode);\n}\n\nexport function getTop (tabNode, wrapperNode) {\n  const top = getTypeValue('top', 'height', 'bottom', tabNode, wrapperNode);\n  const height = getStyle(tabNode.parentNode, 'height');\n  return top - height;\n}\n"]}