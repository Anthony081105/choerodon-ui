{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/back-top/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component, CSSProperties } from 'react';\nimport classNames from 'classnames';\nimport omit from 'lodash/omit';\nimport Animate from '../animate';\nimport addEventListener from '../_util/addEventListener';\nimport { getPrefixCls } from '../configure';\nimport getScroll from '../_util/getScroll';\nimport scrollTo from '../_util/scrollTo';\n\nfunction getDefaultTarget() {\n  return window;\n}\n\nexport interface BackTopProps {\n  visibilityHeight?: number;\n  onClick?: React.MouseEventHandler<HTMLElement>;\n  target?: () => HTMLElement | Window;\n  prefixCls?: string;\n  className?: string;\n  style?: CSSProperties;\n  visible?: boolean; // Only for test. Don't use it.\n}\n\nexport default class BackTop extends Component<BackTopProps, any> {\n  static displayName = 'BackTop';\n\n  static defaultProps = {\n    visibilityHeight: 400,\n  };\n\n  scrollEvent: any;\n\n  state = {\n    visible: false,\n  };\n\n  componentDidMount() {\n    const { target = getDefaultTarget } = this.props;\n    this.scrollEvent = addEventListener(target(), 'scroll', this.handleScroll);\n    this.handleScroll();\n  }\n\n  componentWillUnmount() {\n    if (this.scrollEvent) {\n      this.scrollEvent.remove();\n    }\n  }\n\n  scrollToTop = (e: React.MouseEvent<HTMLDivElement>) => {\n    const { target = getDefaultTarget, onClick } = this.props;\n    scrollTo(0, {\n      getContainer: target,\n    });\n    if (typeof onClick === 'function') {\n      onClick(e);\n    }\n  };\n\n  handleScroll = () => {\n    const { visibilityHeight, target = getDefaultTarget } = this.props;\n    const scrollTop = getScroll(target(), true);\n    this.setState({\n      visible: scrollTop > (visibilityHeight as number),\n    });\n  };\n\n  render() {\n    const {\n      prefixCls: customizePrefixCls,\n      className = '',\n      visible: propsVisible,\n      children,\n    } = this.props;\n    const { visible: stateVisible } = this.state;\n    const prefixCls = getPrefixCls('back-top', customizePrefixCls);\n    const classString = classNames(prefixCls, className);\n\n    const defaultElement = (\n      <div className={`${prefixCls}-content`}>\n        <div className={`${prefixCls}-icon`} />\n      </div>\n    );\n\n    // fix https://fb.me/react-unknown-prop\n    const divProps = omit(this.props, [\n      'prefixCls',\n      'className',\n      'children',\n      'visibilityHeight',\n      'target',\n      'visible',\n    ]);\n\n    const visible = 'visible' in this.props ? propsVisible : stateVisible;\n\n    const backTopBtn = visible ? (\n      <div {...divProps} className={classString} onClick={this.scrollToTop}>\n        {children || defaultElement}\n      </div>\n    ) : null;\n\n    return (\n      <Animate component=\"\" transitionName=\"fade\">\n        {backTopBtn}\n      </Animate>\n    );\n  }\n}\n"]}