08d636e92d5ca0556aa9591a324189bc
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getValuePropValue = getValuePropValue;
exports.getPropValue = getPropValue;
exports.isMultiple = isMultiple;
exports.toArray = toArray;
exports.preventDefaultEvent = preventDefaultEvent;
exports.labelCompatible = labelCompatible;
exports.isInclude = isInclude;
exports.isPositionPrefix = isPositionPrefix;
exports.loopAllChildren = loopAllChildren;
exports.flatToHierarchy = flatToHierarchy;
exports.filterParentPosition = filterParentPosition;
exports.handleCheckState = handleCheckState;
exports.getTreeNodesStates = getTreeNodesStates;
exports.recursiveCloneChildren = recursiveCloneChildren;
exports.filterAllCheckedData = filterAllCheckedData;
exports.processSimpleTreeData = processSimpleTreeData;
exports.saveRef = saveRef;
exports.UNSELECTABLE_ATTRIBUTE = exports.UNSELECTABLE_STYLE = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _react = require("react");

/* eslint no-loop-func: 0*/
function getValuePropValue(child) {
  var props = child.props;

  if ('value' in props) {
    return props.value;
  }

  if (child.key) {
    return child.key;
  }

  throw new Error("no key or value for ".concat(child));
}

function getPropValue(child, prop) {
  if (prop === 'value') {
    return getValuePropValue(child);
  }

  return child.props[prop];
}

function isMultiple(props) {
  return !!(props.multiple || props.treeCheckable);
}

function toArray(value) {
  var ret = value;

  if (value === undefined) {
    ret = [];
  } else if (!Array.isArray(value)) {
    ret = [value];
  }

  return ret;
}

function preventDefaultEvent(e) {
  e.preventDefault();
}

var UNSELECTABLE_STYLE = {
  userSelect: 'none',
  WebkitUserSelect: 'none'
};
exports.UNSELECTABLE_STYLE = UNSELECTABLE_STYLE;
var UNSELECTABLE_ATTRIBUTE = {
  unselectable: 'unselectable'
};
exports.UNSELECTABLE_ATTRIBUTE = UNSELECTABLE_ATTRIBUTE;

function labelCompatible(prop) {
  var newProp = prop;

  if (newProp === 'label') {
    newProp = 'title';
  }

  return newProp;
}

function isInclude(smallArray, bigArray) {
  // attention: [0,0,1] [0,0,10]
  return smallArray.every(function (ii, i) {
    return ii === bigArray[i];
  });
}

function isPositionPrefix(smallPos, bigPos) {
  if (!bigPos || !smallPos) {
    // console.log(smallPos, bigPos);
    return false;
  }

  if (bigPos.length < smallPos.length) {
    return false;
  } // attention: "0-0-1" "0-0-10"


  if (bigPos.length > smallPos.length && bigPos.charAt(smallPos.length) !== '-') {
    return false;
  }

  return bigPos.substr(0, smallPos.length) === smallPos;
}
/*
export function getCheckedKeys(node, checkedKeys, allCheckedNodesKeys) {
  const nodeKey = node.props.eventKey;
  let newCks = [...checkedKeys];
  let nodePos;
  const unCheck = allCheckedNodesKeys.some(item => {
    if (item.key === nodeKey) {
      nodePos = item.pos;
      return true;
    }
  });
  if (unCheck) {
    newCks = [];
    allCheckedNodesKeys.forEach(item => {
      if (isPositionPrefix(item.pos, nodePos) || isPositionPrefix(nodePos, item.pos)) {
        return;
      }
      newCks.push(item.key);
    });
  } else {
    newCks.push(nodeKey);
  }
  return newCks;
}
*/


function getChildrenlength(children) {
  var len = 1;

  if (Array.isArray(children)) {
    len = children.length;
  }

  return len;
}

function getSiblingPosition(index, len, siblingPosition) {
  if (len === 1) {
    siblingPosition.first = true;
    siblingPosition.last = true;
  } else {
    siblingPosition.first = index === 0;
    siblingPosition.last = index === len - 1;
  }

  return siblingPosition;
}

function loopAllChildren(childs, callback, parent) {
  var loop = function loop(children, level, _parent) {
    var len = getChildrenlength(children);

    _react.Children.forEach(children, function handler(item, index) {
      // eslint-disable-line
      var pos = "".concat(level, "-").concat(index);

      if (item && item.props.children && item.type) {
        loop(item.props.children, pos, {
          node: item,
          pos: pos
        });
      }

      if (item) {
        callback(item, index, pos, item.key || pos, getSiblingPosition(index, len, {}), _parent);
      }
    });
  };

  loop(childs, 0, parent);
}

function flatToHierarchy(arr) {
  if (!arr.length) {
    return arr;
  }

  var hierarchyNodes = [];
  var levelObj = {};
  arr.forEach(function (item) {
    if (!item.pos) {
      return;
    }

    var posLen = item.pos.split('-').length;

    if (!levelObj[posLen]) {
      levelObj[posLen] = [];
    }

    levelObj[posLen].push(item);
  });
  var levelArr = Object.keys(levelObj).sort(function (a, b) {
    return b - a;
  }); // const s = Date.now();
  // todo: there are performance issues!

  levelArr.reduce(function (pre, cur) {
    if (cur && cur !== pre) {
      levelObj[pre].forEach(function (item) {
        var haveParent = false;
        levelObj[cur].forEach(function (ii) {
          if (isPositionPrefix(ii.pos, item.pos)) {
            haveParent = true;

            if (!ii.children) {
              ii.children = [];
            }

            ii.children.push(item);
          }
        });

        if (!haveParent) {
          hierarchyNodes.push(item);
        }
      });
    }

    return cur;
  }); // console.log(Date.now() - s);

  return levelObj[levelArr[levelArr.length - 1]].concat(hierarchyNodes);
} // arr.length === 628, use time: ~20ms


function filterParentPosition(arr) {
  var levelObj = {};
  arr.forEach(function (item) {
    var posLen = item.split('-').length;

    if (!levelObj[posLen]) {
      levelObj[posLen] = [];
    }

    levelObj[posLen].push(item);
  });
  var levelArr = Object.keys(levelObj).sort();

  var _loop = function _loop(i) {
    if (levelArr[i + 1]) {
      levelObj[levelArr[i]].forEach(function (ii) {
        var _loop2 = function _loop2(j) {
          levelObj[levelArr[j]].forEach(function (_i, index) {
            if (isPositionPrefix(ii, _i)) {
              levelObj[levelArr[j]][index] = null;
            }
          });
          levelObj[levelArr[j]] = levelObj[levelArr[j]].filter(function (p) {
            return p;
          });
        };

        for (var j = i + 1; j < levelArr.length; j++) {
          _loop2(j);
        }
      });
    }
  };

  for (var i = 0; i < levelArr.length; i++) {
    _loop(i);
  }

  var nArr = [];
  levelArr.forEach(function (i) {
    nArr = nArr.concat(levelObj[i]);
  });
  return nArr;
} // console.log(filterParentPosition(
// ['0-2', '0-3-3', '0-10', '0-10-0', '0-0-1', '0-0', '0-1-1', '0-1']
// ));


function stripTail(str) {
  var arr = str.match(/(.+)(-[^-]+)$/);
  var st = '';

  if (arr && arr.length === 3) {
    st = arr[1];
  }

  return st;
}

function splitPosition(pos) {
  return pos.split('-');
} // todo: do optimization.


function handleCheckState(obj, checkedPositionArr, checkIt) {
  // console.log(stripTail('0-101-000'));
  // let s = Date.now();
  var objKeys = Object.keys(obj);
  objKeys.forEach(function (i, index) {
    var iArr = splitPosition(i);
    var saved = false;
    checkedPositionArr.forEach(function (_pos) {
      var _posArr = splitPosition(_pos);

      if (iArr.length > _posArr.length && isInclude(_posArr, iArr)) {
        obj[i].halfChecked = false;
        obj[i].checked = checkIt;
        objKeys[index] = null;
      }

      if (iArr[0] === _posArr[0] && iArr[1] === _posArr[1]) {
        saved = true;
      }
    });

    if (!saved) {
      objKeys[index] = null;
    }
  });
  objKeys = objKeys.filter(function (i) {
    return i;
  }); // filter non null;

  var _loop3 = function _loop3(_pIndex) {
    // loop to set ancestral nodes's `checked` or `halfChecked`
    var loop = function loop(__pos) {
      var _posLen = splitPosition(__pos).length;

      if (_posLen <= 2) {
        pIndex = _pIndex;
        // e.g. '0-0', '0-1'
        return;
      }

      var sibling = 0;
      var siblingChecked = 0;
      var parentPosition = stripTail(__pos);
      objKeys.forEach(function (i
      /* , index*/
      ) {
        var iArr = splitPosition(i);

        if (iArr.length === _posLen && isInclude(splitPosition(parentPosition), iArr)) {
          sibling++;

          if (obj[i].checked) {
            siblingChecked++;

            var _i = checkedPositionArr.indexOf(i);

            if (_i > -1) {
              checkedPositionArr.splice(_i, 1);

              if (_i <= _pIndex) {
                _pIndex--;
              }
            }
          } else if (obj[i].halfChecked) {
            siblingChecked += 0.5;
          } // objKeys[index] = null;

        }
      }); // objKeys = objKeys.filter(i => i); // filter non null;

      var parent = obj[parentPosition]; // not check, checked, halfChecked

      if (siblingChecked === 0) {
        parent.checked = false;
        parent.halfChecked = false;
      } else if (siblingChecked === sibling) {
        parent.checked = true;
        parent.halfChecked = false;
      } else {
        parent.halfChecked = true;
        parent.checked = false;
      }

      loop(parentPosition);
    };

    loop(checkedPositionArr[_pIndex], _pIndex);
    pIndex = _pIndex;
  };

  for (var pIndex = 0; pIndex < checkedPositionArr.length; pIndex++) {
    _loop3(pIndex);
  } // console.log(Date.now()-s, objKeys.length, checkIt);

}

function getCheck(treeNodesStates, checkedPositions) {
  var halfCheckedKeys = [];
  var checkedKeys = [];
  var checkedNodes = [];
  Object.keys(treeNodesStates).forEach(function (item) {
    var itemObj = treeNodesStates[item];

    if (itemObj.checked) {
      checkedKeys.push(itemObj.key); // checkedNodes.push(getValuePropValue(itemObj.node));

      checkedNodes.push((0, _objectSpread2["default"])({}, itemObj, {
        pos: item
      }));
    } else if (itemObj.halfChecked) {
      halfCheckedKeys.push(itemObj.key);
    }
  });
  return {
    halfCheckedKeys: halfCheckedKeys,
    checkedKeys: checkedKeys,
    checkedNodes: checkedNodes,
    treeNodesStates: treeNodesStates,
    checkedPositions: checkedPositions
  };
}

function getTreeNodesStates(children, values) {
  var checkedPositions = [];
  var treeNodesStates = {};
  loopAllChildren(children, function (item, index, pos, keyOrPos, siblingPosition) {
    treeNodesStates[pos] = {
      node: item,
      key: keyOrPos,
      checked: false,
      halfChecked: false,
      siblingPosition: siblingPosition
    };

    if (values.indexOf(getValuePropValue(item)) !== -1) {
      treeNodesStates[pos].checked = true;
      checkedPositions.push(pos);
    }
  });
  handleCheckState(treeNodesStates, filterParentPosition(checkedPositions.sort()), true);
  return getCheck(treeNodesStates, checkedPositions);
} // can add extra prop to every node.


function recursiveCloneChildren(children) {
  var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (ch) {
    return ch;
  };
  return Array.from(children).map(function (child) {
    var newChild = cb(child);

    if (newChild && newChild.props && newChild.props.children) {
      return (0, _react.cloneElement)(newChild, {}, recursiveCloneChildren(newChild.props.children, cb));
    }

    return newChild;
  });
}

function recursiveGen(children) {
  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  return _react.Children.map(children, function (child, index) {
    var pos = "".concat(level, "-").concat(index);
    var _child$props = child.props,
        title = _child$props.title,
        label = _child$props.label,
        value = _child$props.value,
        subChildren = _child$props.children,
        rest = (0, _objectWithoutProperties2["default"])(_child$props, ["title", "label", "value", "children"]);
    var o = (0, _objectSpread2["default"])({}, rest, {
      title: title,
      label: label || title,
      value: value,
      key: child.key,
      _pos: pos
    });

    if (subChildren) {
      o.children = recursiveGen(subChildren, pos);
    }

    return o;
  });
}

function recursive(children, cb) {
  children.forEach(function (item) {
    cb(item);

    if (item.children) {
      recursive(item.children, cb);
    }
  });
} // Get the tree's checkedNodes (todo: can merge to the `handleCheckState` function)
// If one node checked, it's all children nodes checked.
// If sibling nodes all checked, the parent checked.


function filterAllCheckedData(vs, treeNodes) {
  var vals = (0, _toConsumableArray2["default"])(vs);

  if (!vals.length) {
    return vals;
  }

  var data = recursiveGen(treeNodes);
  var checkedNodesPositions = [];

  function checkChildren(children) {
    children.forEach(function (item) {
      if (item.__checked) {
        return;
      }

      var ci = vals.indexOf(item.value);
      var childs = item.children;

      if (ci > -1) {
        item.__checked = true;
        checkedNodesPositions.push({
          node: item,
          pos: item._pos
        });
        vals.splice(ci, 1);

        if (childs) {
          recursive(childs, function (child) {
            child.__checked = true;
            checkedNodesPositions.push({
              node: child,
              pos: child._pos
            });
          });
        }
      } else {
        if (childs) {
          checkChildren(childs);
        }
      }
    });
  }

  function checkParent(children) {
    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
      root: true
    };
    var siblingChecked = 0;
    children.forEach(function (item) {
      var childs = item.children;

      if (childs && !item.__checked && !item.__halfChecked) {
        var p = checkParent(childs, item);

        if (p.__checked) {
          siblingChecked++;
        } else if (p.__halfChecked) {
          siblingChecked += 0.5;
        }
      } else if (item.__checked) {
        siblingChecked++;
      } else if (item.__halfChecked) {
        siblingChecked += 0.5;
      }
    });
    var len = children.length;

    if (siblingChecked === len) {
      parent.__checked = true;
      checkedNodesPositions.push({
        node: parent,
        pos: parent._pos
      });
    } else if (siblingChecked < len && siblingChecked > 0) {
      parent.__halfChecked = true;
    }

    if (parent.root) {
      return children;
    }

    return parent;
  }

  checkChildren(data);
  checkParent(data);
  checkedNodesPositions.forEach(function (i, index) {
    // clear private metadata
    delete checkedNodesPositions[index].node.__checked;
    delete checkedNodesPositions[index].node._pos; // create the same structure of `onCheck`'s return.

    checkedNodesPositions[index].node.props = {
      title: checkedNodesPositions[index].node.title,
      label: checkedNodesPositions[index].node.label || checkedNodesPositions[index].node.title,
      value: checkedNodesPositions[index].node.value
    };

    if (checkedNodesPositions[index].node.children) {
      checkedNodesPositions[index].node.props.children = checkedNodesPositions[index].node.children;
    }

    delete checkedNodesPositions[index].node.title;
    delete checkedNodesPositions[index].node.label;
    delete checkedNodesPositions[index].node.value;
    delete checkedNodesPositions[index].node.children;
  });
  return checkedNodesPositions;
}

function processSimpleTreeData(treeData, format) {
  function unflatten2(array) {
    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (0, _defineProperty2["default"])({}, format.id, format.rootPId);
    var children = [];

    for (var i = 0; i < array.length; i++) {
      array[i] = (0, _objectSpread2["default"])({}, array[i]); // copy, can not corrupts original data

      if (array[i][format.pId] === parent[format.id]) {
        array[i].key = array[i][format.id];
        children.push(array[i]);
        array.splice(i--, 1);
      }
    }

    if (children.length) {
      parent.children = children;
      children.forEach(function (child) {
        return unflatten2(array, child);
      });
    }

    if (parent[format.id] === format.rootPId) {
      return children;
    }
  }

  return unflatten2(treeData);
}

function saveRef(instance, name) {
  if (!instance.saveRefs) {
    instance.saveRefs = {};
  }

  if (!instance.saveRefs[name]) {
    instance.saveRefs[name] = function (node) {
      instance[name] = node;
    };
  }

  return instance.saveRefs[name];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwuanN4Il0sIm5hbWVzIjpbImdldFZhbHVlUHJvcFZhbHVlIiwiY2hpbGQiLCJwcm9wcyIsInZhbHVlIiwia2V5IiwiRXJyb3IiLCJnZXRQcm9wVmFsdWUiLCJwcm9wIiwiaXNNdWx0aXBsZSIsIm11bHRpcGxlIiwidHJlZUNoZWNrYWJsZSIsInRvQXJyYXkiLCJyZXQiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJwcmV2ZW50RGVmYXVsdEV2ZW50IiwiZSIsInByZXZlbnREZWZhdWx0IiwiVU5TRUxFQ1RBQkxFX1NUWUxFIiwidXNlclNlbGVjdCIsIldlYmtpdFVzZXJTZWxlY3QiLCJVTlNFTEVDVEFCTEVfQVRUUklCVVRFIiwidW5zZWxlY3RhYmxlIiwibGFiZWxDb21wYXRpYmxlIiwibmV3UHJvcCIsImlzSW5jbHVkZSIsInNtYWxsQXJyYXkiLCJiaWdBcnJheSIsImV2ZXJ5IiwiaWkiLCJpIiwiaXNQb3NpdGlvblByZWZpeCIsInNtYWxsUG9zIiwiYmlnUG9zIiwibGVuZ3RoIiwiY2hhckF0Iiwic3Vic3RyIiwiZ2V0Q2hpbGRyZW5sZW5ndGgiLCJjaGlsZHJlbiIsImxlbiIsImdldFNpYmxpbmdQb3NpdGlvbiIsImluZGV4Iiwic2libGluZ1Bvc2l0aW9uIiwiZmlyc3QiLCJsYXN0IiwibG9vcEFsbENoaWxkcmVuIiwiY2hpbGRzIiwiY2FsbGJhY2siLCJwYXJlbnQiLCJsb29wIiwibGV2ZWwiLCJfcGFyZW50IiwiQ2hpbGRyZW4iLCJmb3JFYWNoIiwiaGFuZGxlciIsIml0ZW0iLCJwb3MiLCJ0eXBlIiwibm9kZSIsImZsYXRUb0hpZXJhcmNoeSIsImFyciIsImhpZXJhcmNoeU5vZGVzIiwibGV2ZWxPYmoiLCJwb3NMZW4iLCJzcGxpdCIsInB1c2giLCJsZXZlbEFyciIsIk9iamVjdCIsImtleXMiLCJzb3J0IiwiYSIsImIiLCJyZWR1Y2UiLCJwcmUiLCJjdXIiLCJoYXZlUGFyZW50IiwiY29uY2F0IiwiZmlsdGVyUGFyZW50UG9zaXRpb24iLCJqIiwiX2kiLCJmaWx0ZXIiLCJwIiwibkFyciIsInN0cmlwVGFpbCIsInN0ciIsIm1hdGNoIiwic3QiLCJzcGxpdFBvc2l0aW9uIiwiaGFuZGxlQ2hlY2tTdGF0ZSIsIm9iaiIsImNoZWNrZWRQb3NpdGlvbkFyciIsImNoZWNrSXQiLCJvYmpLZXlzIiwiaUFyciIsInNhdmVkIiwiX3BvcyIsIl9wb3NBcnIiLCJoYWxmQ2hlY2tlZCIsImNoZWNrZWQiLCJfX3BvcyIsIl9wb3NMZW4iLCJzaWJsaW5nIiwic2libGluZ0NoZWNrZWQiLCJwYXJlbnRQb3NpdGlvbiIsImluZGV4T2YiLCJzcGxpY2UiLCJwSW5kZXgiLCJnZXRDaGVjayIsInRyZWVOb2Rlc1N0YXRlcyIsImNoZWNrZWRQb3NpdGlvbnMiLCJoYWxmQ2hlY2tlZEtleXMiLCJjaGVja2VkS2V5cyIsImNoZWNrZWROb2RlcyIsIml0ZW1PYmoiLCJnZXRUcmVlTm9kZXNTdGF0ZXMiLCJ2YWx1ZXMiLCJrZXlPclBvcyIsInJlY3Vyc2l2ZUNsb25lQ2hpbGRyZW4iLCJjYiIsImNoIiwiZnJvbSIsIm1hcCIsIm5ld0NoaWxkIiwicmVjdXJzaXZlR2VuIiwidGl0bGUiLCJsYWJlbCIsInN1YkNoaWxkcmVuIiwicmVzdCIsIm8iLCJyZWN1cnNpdmUiLCJmaWx0ZXJBbGxDaGVja2VkRGF0YSIsInZzIiwidHJlZU5vZGVzIiwidmFscyIsImRhdGEiLCJjaGVja2VkTm9kZXNQb3NpdGlvbnMiLCJjaGVja0NoaWxkcmVuIiwiX19jaGVja2VkIiwiY2kiLCJjaGVja1BhcmVudCIsInJvb3QiLCJfX2hhbGZDaGVja2VkIiwicHJvY2Vzc1NpbXBsZVRyZWVEYXRhIiwidHJlZURhdGEiLCJmb3JtYXQiLCJ1bmZsYXR0ZW4yIiwiYXJyYXkiLCJpZCIsInJvb3RQSWQiLCJwSWQiLCJzYXZlUmVmIiwiaW5zdGFuY2UiLCJuYW1lIiwic2F2ZVJlZnMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQTs7QUFEQTtB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akMsRUFBMEM7QUFDeEMsYUFBTzlHLFFBQVA7QUFDRDtBQUNGOztBQUVELFNBQU8yRyxVQUFVLENBQUNGLFFBQUQsQ0FBakI7QUFDRDs7QUFFTSxTQUFTTyxPQUFULENBQWlCQyxRQUFqQixFQUEyQkMsSUFBM0IsRUFBaUM7QUFDdEMsTUFBSSxDQUFDRCxRQUFRLENBQUNFLFFBQWQsRUFBd0I7QUFDdEJGLElBQUFBLFFBQVEsQ0FBQ0UsUUFBVCxHQUFvQixFQUFwQjtBQUNEOztBQUNELE1BQUksQ0FBQ0YsUUFBUSxDQUFDRSxRQUFULENBQWtCRCxJQUFsQixDQUFMLEVBQThCO0FBQzVCRCxJQUFBQSxRQUFRLENBQUNFLFFBQVQsQ0FBa0JELElBQWxCLElBQTBCLFVBQUM5RixJQUFELEVBQVU7QUFDbEM2RixNQUFBQSxRQUFRLENBQUNDLElBQUQsQ0FBUixHQUFpQjlGLElBQWpCO0FBQ0QsS0FGRDtBQUdEOztBQUNELFNBQU82RixRQUFRLENBQUNFLFFBQVQsQ0FBa0JELElBQWxCLENBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludCBuby1sb29wLWZ1bmM6IDAqL1xuaW1wb3J0IHsgQ2hpbGRyZW4sIGNsb25lRWxlbWVudCB9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlUHJvcFZhbHVlKGNoaWxkKSB7XG4gIGNvbnN0IHByb3BzID0gY2hpbGQucHJvcHM7XG4gIGlmICgndmFsdWUnIGluIHByb3BzKSB7XG4gICAgcmV0dXJuIHByb3BzLnZhbHVlO1xuICB9XG4gIGlmIChjaGlsZC5rZXkpIHtcbiAgICByZXR1cm4gY2hpbGQua2V5O1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgbm8ga2V5IG9yIHZhbHVlIGZvciAke2NoaWxkfWApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvcFZhbHVlKGNoaWxkLCBwcm9wKSB7XG4gIGlmIChwcm9wID09PSAndmFsdWUnKSB7XG4gICAgcmV0dXJuIGdldFZhbHVlUHJvcFZhbHVlKGNoaWxkKTtcbiAgfVxuICByZXR1cm4gY2hpbGQucHJvcHNbcHJvcF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc011bHRpcGxlKHByb3BzKSB7XG4gIHJldHVybiAhIShwcm9wcy5tdWx0aXBsZSB8fCBwcm9wcy50cmVlQ2hlY2thYmxlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvQXJyYXkodmFsdWUpIHtcbiAgbGV0IHJldCA9IHZhbHVlO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldCA9IFtdO1xuICB9IGVsc2UgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldCA9IFt2YWx1ZV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0RXZlbnQoZSkge1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmV4cG9ydCBjb25zdCBVTlNFTEVDVEFCTEVfU1RZTEUgPSB7XG4gIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgV2Via2l0VXNlclNlbGVjdDogJ25vbmUnLFxufTtcblxuZXhwb3J0IGNvbnN0IFVOU0VMRUNUQUJMRV9BVFRSSUJVVEUgPSB7XG4gIHVuc2VsZWN0YWJsZTogJ3Vuc2VsZWN0YWJsZScsXG59O1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBsYWJlbENvbXBhdGlibGUocHJvcCkge1xuICBsZXQgbmV3UHJvcCA9IHByb3A7XG4gIGlmIChuZXdQcm9wID09PSAnbGFiZWwnKSB7XG4gICAgbmV3UHJvcCA9ICd0aXRsZSc7XG4gIH1cbiAgcmV0dXJuIG5ld1Byb3A7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW5jbHVkZShzbWFsbEFycmF5LCBiaWdBcnJheSkge1xuICAvLyBhdHRlbnRpb246IFswLDAsMV0gWzAsMCwxMF1cbiAgcmV0dXJuIHNtYWxsQXJyYXkuZXZlcnkoKGlpLCBpKSA9PiB7XG4gICAgcmV0dXJuIGlpID09PSBiaWdBcnJheVtpXTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Bvc2l0aW9uUHJlZml4KHNtYWxsUG9zLCBiaWdQb3MpIHtcbiAgaWYgKCFiaWdQb3MgfHwgIXNtYWxsUG9zKSB7XG4gICAgLy8gY29uc29sZS5sb2coc21hbGxQb3MsIGJpZ1Bvcyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChiaWdQb3MubGVuZ3RoIDwgc21hbGxQb3MubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIGF0dGVudGlvbjogXCIwLTAtMVwiIFwiMC0wLTEwXCJcbiAgaWYgKChiaWdQb3MubGVuZ3RoID4gc21hbGxQb3MubGVuZ3RoKSAmJiAoYmlnUG9zLmNoYXJBdChzbWFsbFBvcy5sZW5ndGgpICE9PSAnLScpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBiaWdQb3Muc3Vic3RyKDAsIHNtYWxsUG9zLmxlbmd0aCkgPT09IHNtYWxsUG9zO1xufVxuXG4vKlxuZXhwb3J0IGZ1bmN0aW9uIGdldENoZWNrZWRLZXlzKG5vZGUsIGNoZWNrZWRLZXlzLCBhbGxDaGVja2VkTm9kZXNLZXlzKSB7XG4gIGNvbnN0IG5vZGVLZXkgPSBub2RlLnByb3BzLmV2ZW50S2V5O1xuICBsZXQgbmV3Q2tzID0gWy4uLmNoZWNrZWRLZXlzXTtcbiAgbGV0IG5vZGVQb3M7XG4gIGNvbnN0IHVuQ2hlY2sgPSBhbGxDaGVja2VkTm9kZXNLZXlzLnNvbWUoaXRlbSA9PiB7XG4gICAgaWYgKGl0ZW0ua2V5ID09PSBub2RlS2V5KSB7XG4gICAgICBub2RlUG9zID0gaXRlbS5wb3M7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuICBpZiAodW5DaGVjaykge1xuICAgIG5ld0NrcyA9IFtdO1xuICAgIGFsbENoZWNrZWROb2Rlc0tleXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGlmIChpc1Bvc2l0aW9uUHJlZml4KGl0ZW0ucG9zLCBub2RlUG9zKSB8fCBpc1Bvc2l0aW9uUHJlZml4KG5vZGVQb3MsIGl0ZW0ucG9zKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBuZXdDa3MucHVzaChpdGVtLmtleSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgbmV3Q2tzLnB1c2gobm9kZUtleSk7XG4gIH1cbiAgcmV0dXJuIG5ld0Nrcztcbn1cbiovXG5cbmZ1bmN0aW9uIGdldENoaWxkcmVubGVuZ3RoKGNoaWxkcmVuKSB7XG4gIGxldCBsZW4gPSAxO1xuICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIGxlbjtcbn1cblxuZnVuY3Rpb24gZ2V0U2libGluZ1Bvc2l0aW9uKGluZGV4LCBsZW4sIHNpYmxpbmdQb3NpdGlvbikge1xuICBpZiAobGVuID09PSAxKSB7XG4gICAgc2libGluZ1Bvc2l0aW9uLmZpcnN0ID0gdHJ1ZTtcbiAgICBzaWJsaW5nUG9zaXRpb24ubGFzdCA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgc2libGluZ1Bvc2l0aW9uLmZpcnN0ID0gaW5kZXggPT09IDA7XG4gICAgc2libGluZ1Bvc2l0aW9uLmxhc3QgPSBpbmRleCA9PT0gbGVuIC0gMTtcbiAgfVxuICByZXR1cm4gc2libGluZ1Bvc2l0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9vcEFsbENoaWxkcmVuKGNoaWxkcywgY2FsbGJhY2ssIHBhcmVudCkge1xuICBjb25zdCBsb29wID0gKGNoaWxkcmVuLCBsZXZlbCwgX3BhcmVudCkgPT4ge1xuICAgIGNvbnN0IGxlbiA9IGdldENoaWxkcmVubGVuZ3RoKGNoaWxkcmVuKTtcbiAgICBDaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCBmdW5jdGlvbiBoYW5kbGVyKGl0ZW0sIGluZGV4KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgIGNvbnN0IHBvcyA9IGAke2xldmVsfS0ke2luZGV4fWA7XG4gICAgICBpZiAoaXRlbSAmJiBpdGVtLnByb3BzLmNoaWxkcmVuICYmIGl0ZW0udHlwZSkge1xuICAgICAgICBsb29wKGl0ZW0ucHJvcHMuY2hpbGRyZW4sIHBvcywgeyBub2RlOiBpdGVtLCBwb3MgfSk7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSkge1xuICAgICAgICBjYWxsYmFjayhpdGVtLCBpbmRleCwgcG9zLCBpdGVtLmtleSB8fCBwb3MsIGdldFNpYmxpbmdQb3NpdGlvbihpbmRleCwgbGVuLCB7fSksIF9wYXJlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuICBsb29wKGNoaWxkcywgMCwgcGFyZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZsYXRUb0hpZXJhcmNoeShhcnIpIHtcbiAgaWYgKCFhcnIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuICBjb25zdCBoaWVyYXJjaHlOb2RlcyA9IFtdO1xuICBjb25zdCBsZXZlbE9iaiA9IHt9O1xuICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGlmICghaXRlbS5wb3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcG9zTGVuID0gaXRlbS5wb3Muc3BsaXQoJy0nKS5sZW5ndGg7XG4gICAgaWYgKCFsZXZlbE9ialtwb3NMZW5dKSB7XG4gICAgICBsZXZlbE9ialtwb3NMZW5dID0gW107XG4gICAgfVxuICAgIGxldmVsT2JqW3Bvc0xlbl0ucHVzaChpdGVtKTtcbiAgfSk7XG4gIGNvbnN0IGxldmVsQXJyID0gT2JqZWN0LmtleXMobGV2ZWxPYmopLnNvcnQoKGEsIGIpID0+IGIgLSBhKTtcbiAgLy8gY29uc3QgcyA9IERhdGUubm93KCk7XG4gIC8vIHRvZG86IHRoZXJlIGFyZSBwZXJmb3JtYW5jZSBpc3N1ZXMhXG4gIGxldmVsQXJyLnJlZHVjZSgocHJlLCBjdXIpID0+IHtcbiAgICBpZiAoY3VyICYmIGN1ciAhPT0gcHJlKSB7XG4gICAgICBsZXZlbE9ialtwcmVdLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgbGV0IGhhdmVQYXJlbnQgPSBmYWxzZTtcbiAgICAgICAgbGV2ZWxPYmpbY3VyXS5mb3JFYWNoKChpaSkgPT4ge1xuICAgICAgICAgIGlmIChpc1Bvc2l0aW9uUHJlZml4KGlpLnBvcywgaXRlbS5wb3MpKSB7XG4gICAgICAgICAgICBoYXZlUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICghaWkuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgaWkuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlpLmNoaWxkcmVuLnB1c2goaXRlbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFoYXZlUGFyZW50KSB7XG4gICAgICAgICAgaGllcmFyY2h5Tm9kZXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjdXI7XG4gIH0pO1xuICAvLyBjb25zb2xlLmxvZyhEYXRlLm5vdygpIC0gcyk7XG4gIHJldHVybiBsZXZlbE9ialtsZXZlbEFycltsZXZlbEFyci5sZW5ndGggLSAxXV0uY29uY2F0KGhpZXJhcmNoeU5vZGVzKTtcbn1cblxuXG4vLyBhcnIubGVuZ3RoID09PSA2MjgsIHVzZSB0aW1lOiB+MjBtc1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclBhcmVudFBvc2l0aW9uKGFycikge1xuICBjb25zdCBsZXZlbE9iaiA9IHt9O1xuICBhcnIuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IHBvc0xlbiA9IGl0ZW0uc3BsaXQoJy0nKS5sZW5ndGg7XG4gICAgaWYgKCFsZXZlbE9ialtwb3NMZW5dKSB7XG4gICAgICBsZXZlbE9ialtwb3NMZW5dID0gW107XG4gICAgfVxuICAgIGxldmVsT2JqW3Bvc0xlbl0ucHVzaChpdGVtKTtcbiAgfSk7XG4gIGNvbnN0IGxldmVsQXJyID0gT2JqZWN0LmtleXMobGV2ZWxPYmopLnNvcnQoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZXZlbEFyci5sZW5ndGg7IGkrKykge1xuICAgIGlmIChsZXZlbEFycltpICsgMV0pIHtcbiAgICAgIGxldmVsT2JqW2xldmVsQXJyW2ldXS5mb3JFYWNoKGlpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbGV2ZWxBcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBsZXZlbE9ialtsZXZlbEFycltqXV0uZm9yRWFjaCgoX2ksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNQb3NpdGlvblByZWZpeChpaSwgX2kpKSB7XG4gICAgICAgICAgICAgIGxldmVsT2JqW2xldmVsQXJyW2pdXVtpbmRleF0gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxldmVsT2JqW2xldmVsQXJyW2pdXSA9IGxldmVsT2JqW2xldmVsQXJyW2pdXS5maWx0ZXIocCA9PiBwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGxldCBuQXJyID0gW107XG4gIGxldmVsQXJyLmZvckVhY2goaSA9PiB7XG4gICAgbkFyciA9IG5BcnIuY29uY2F0KGxldmVsT2JqW2ldKTtcbiAgfSk7XG4gIHJldHVybiBuQXJyO1xufVxuXG4vLyBjb25zb2xlLmxvZyhmaWx0ZXJQYXJlbnRQb3NpdGlvbihcbi8vIFsnMC0yJywgJzAtMy0zJywgJzAtMTAnLCAnMC0xMC0wJywgJzAtMC0xJywgJzAtMCcsICcwLTEtMScsICcwLTEnXVxuLy8gKSk7XG5cbmZ1bmN0aW9uIHN0cmlwVGFpbChzdHIpIHtcbiAgY29uc3QgYXJyID0gc3RyLm1hdGNoKC8oLispKC1bXi1dKykkLyk7XG4gIGxldCBzdCA9ICcnO1xuICBpZiAoYXJyICYmIGFyci5sZW5ndGggPT09IDMpIHtcbiAgICBzdCA9IGFyclsxXTtcbiAgfVxuICByZXR1cm4gc3Q7XG59XG5cbmZ1bmN0aW9uIHNwbGl0UG9zaXRpb24ocG9zKSB7XG4gIHJldHVybiBwb3Muc3BsaXQoJy0nKTtcbn1cblxuLy8gdG9kbzogZG8gb3B0aW1pemF0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNoZWNrU3RhdGUob2JqLCBjaGVja2VkUG9zaXRpb25BcnIsIGNoZWNrSXQpIHtcbiAgLy8gY29uc29sZS5sb2coc3RyaXBUYWlsKCcwLTEwMS0wMDAnKSk7XG4gIC8vIGxldCBzID0gRGF0ZS5ub3coKTtcbiAgbGV0IG9iaktleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXG4gIG9iaktleXMuZm9yRWFjaCgoaSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBpQXJyID0gc3BsaXRQb3NpdGlvbihpKTtcbiAgICBsZXQgc2F2ZWQgPSBmYWxzZTtcbiAgICBjaGVja2VkUG9zaXRpb25BcnIuZm9yRWFjaCgoX3BvcykgPT4ge1xuICAgICAgY29uc3QgX3Bvc0FyciA9IHNwbGl0UG9zaXRpb24oX3Bvcyk7XG4gICAgICBpZiAoaUFyci5sZW5ndGggPiBfcG9zQXJyLmxlbmd0aCAmJiBpc0luY2x1ZGUoX3Bvc0FyciwgaUFycikpIHtcbiAgICAgICAgb2JqW2ldLmhhbGZDaGVja2VkID0gZmFsc2U7XG4gICAgICAgIG9ialtpXS5jaGVja2VkID0gY2hlY2tJdDtcbiAgICAgICAgb2JqS2V5c1tpbmRleF0gPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGlBcnJbMF0gPT09IF9wb3NBcnJbMF0gJiYgaUFyclsxXSA9PT0gX3Bvc0FyclsxXSkge1xuICAgICAgICBzYXZlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFzYXZlZCkge1xuICAgICAgb2JqS2V5c1tpbmRleF0gPSBudWxsO1xuICAgIH1cbiAgfSk7XG4gIG9iaktleXMgPSBvYmpLZXlzLmZpbHRlcihpID0+IGkpOyAvLyBmaWx0ZXIgbm9uIG51bGw7XG5cbiAgZm9yIChsZXQgcEluZGV4ID0gMDsgcEluZGV4IDwgY2hlY2tlZFBvc2l0aW9uQXJyLmxlbmd0aDsgcEluZGV4KyspIHtcbiAgICAvLyBsb29wIHRvIHNldCBhbmNlc3RyYWwgbm9kZXMncyBgY2hlY2tlZGAgb3IgYGhhbGZDaGVja2VkYFxuICAgIGNvbnN0IGxvb3AgPSAoX19wb3MpID0+IHtcbiAgICAgIGNvbnN0IF9wb3NMZW4gPSBzcGxpdFBvc2l0aW9uKF9fcG9zKS5sZW5ndGg7XG4gICAgICBpZiAoX3Bvc0xlbiA8PSAyKSB7IC8vIGUuZy4gJzAtMCcsICcwLTEnXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxldCBzaWJsaW5nID0gMDtcbiAgICAgIGxldCBzaWJsaW5nQ2hlY2tlZCA9IDA7XG4gICAgICBjb25zdCBwYXJlbnRQb3NpdGlvbiA9IHN0cmlwVGFpbChfX3Bvcyk7XG4gICAgICBvYmpLZXlzLmZvckVhY2goKGkgLyogLCBpbmRleCovKSA9PiB7XG4gICAgICAgIGNvbnN0IGlBcnIgPSBzcGxpdFBvc2l0aW9uKGkpO1xuICAgICAgICBpZiAoaUFyci5sZW5ndGggPT09IF9wb3NMZW4gJiYgaXNJbmNsdWRlKHNwbGl0UG9zaXRpb24ocGFyZW50UG9zaXRpb24pLCBpQXJyKSkge1xuICAgICAgICAgIHNpYmxpbmcrKztcbiAgICAgICAgICBpZiAob2JqW2ldLmNoZWNrZWQpIHtcbiAgICAgICAgICAgIHNpYmxpbmdDaGVja2VkKys7XG4gICAgICAgICAgICBjb25zdCBfaSA9IGNoZWNrZWRQb3NpdGlvbkFyci5pbmRleE9mKGkpO1xuICAgICAgICAgICAgaWYgKF9pID4gLTEpIHtcbiAgICAgICAgICAgICAgY2hlY2tlZFBvc2l0aW9uQXJyLnNwbGljZShfaSwgMSk7XG4gICAgICAgICAgICAgIGlmIChfaSA8PSBwSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBwSW5kZXgtLTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAob2JqW2ldLmhhbGZDaGVja2VkKSB7XG4gICAgICAgICAgICBzaWJsaW5nQ2hlY2tlZCArPSAwLjU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG9iaktleXNbaW5kZXhdID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBvYmpLZXlzID0gb2JqS2V5cy5maWx0ZXIoaSA9PiBpKTsgLy8gZmlsdGVyIG5vbiBudWxsO1xuICAgICAgY29uc3QgcGFyZW50ID0gb2JqW3BhcmVudFBvc2l0aW9uXTtcbiAgICAgIC8vIG5vdCBjaGVjaywgY2hlY2tlZCwgaGFsZkNoZWNrZWRcbiAgICAgIGlmIChzaWJsaW5nQ2hlY2tlZCA9PT0gMCkge1xuICAgICAgICBwYXJlbnQuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICBwYXJlbnQuaGFsZkNoZWNrZWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoc2libGluZ0NoZWNrZWQgPT09IHNpYmxpbmcpIHtcbiAgICAgICAgcGFyZW50LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBwYXJlbnQuaGFsZkNoZWNrZWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudC5oYWxmQ2hlY2tlZCA9IHRydWU7XG4gICAgICAgIHBhcmVudC5jaGVja2VkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBsb29wKHBhcmVudFBvc2l0aW9uKTtcbiAgICB9O1xuICAgIGxvb3AoY2hlY2tlZFBvc2l0aW9uQXJyW3BJbmRleF0sIHBJbmRleCk7XG4gIH1cbiAgLy8gY29uc29sZS5sb2coRGF0ZS5ub3coKS1zLCBvYmpLZXlzLmxlbmd0aCwgY2hlY2tJdCk7XG59XG5cbmZ1bmN0aW9uIGdldENoZWNrKHRyZWVOb2Rlc1N0YXRlcywgY2hlY2tlZFBvc2l0aW9ucykge1xuICBjb25zdCBoYWxmQ2hlY2tlZEtleXMgPSBbXTtcbiAgY29uc3QgY2hlY2tlZEtleXMgPSBbXTtcbiAgY29uc3QgY2hlY2tlZE5vZGVzID0gW107XG4gIE9iamVjdC5rZXlzKHRyZWVOb2Rlc1N0YXRlcykuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0IGl0ZW1PYmogPSB0cmVlTm9kZXNTdGF0ZXNbaXRlbV07XG4gICAgaWYgKGl0ZW1PYmouY2hlY2tlZCkge1xuICAgICAgY2hlY2tlZEtleXMucHVzaChpdGVtT2JqLmtleSk7XG4gICAgICAvLyBjaGVja2VkTm9kZXMucHVzaChnZXRWYWx1ZVByb3BWYWx1ZShpdGVtT2JqLm5vZGUpKTtcbiAgICAgIGNoZWNrZWROb2Rlcy5wdXNoKHsgLi4uaXRlbU9iaiwgcG9zOiBpdGVtIH0pO1xuICAgIH0gZWxzZSBpZiAoaXRlbU9iai5oYWxmQ2hlY2tlZCkge1xuICAgICAgaGFsZkNoZWNrZWRLZXlzLnB1c2goaXRlbU9iai5rZXkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgaGFsZkNoZWNrZWRLZXlzLCBjaGVja2VkS2V5cywgY2hlY2tlZE5vZGVzLCB0cmVlTm9kZXNTdGF0ZXMsIGNoZWNrZWRQb3NpdGlvbnMsXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmVlTm9kZXNTdGF0ZXMoY2hpbGRyZW4sIHZhbHVlcykge1xuICBjb25zdCBjaGVja2VkUG9zaXRpb25zID0gW107XG4gIGNvbnN0IHRyZWVOb2Rlc1N0YXRlcyA9IHt9O1xuICBsb29wQWxsQ2hpbGRyZW4oY2hpbGRyZW4sIChpdGVtLCBpbmRleCwgcG9zLCBrZXlPclBvcywgc2libGluZ1Bvc2l0aW9uKSA9PiB7XG4gICAgdHJlZU5vZGVzU3RhdGVzW3Bvc10gPSB7XG4gICAgICBub2RlOiBpdGVtLFxuICAgICAga2V5OiBrZXlPclBvcyxcbiAgICAgIGNoZWNrZWQ6IGZhbHNlLFxuICAgICAgaGFsZkNoZWNrZWQ6IGZhbHNlLFxuICAgICAgc2libGluZ1Bvc2l0aW9uLFxuICAgIH07XG4gICAgaWYgKHZhbHVlcy5pbmRleE9mKGdldFZhbHVlUHJvcFZhbHVlKGl0ZW0pKSAhPT0gLTEpIHtcbiAgICAgIHRyZWVOb2Rlc1N0YXRlc1twb3NdLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgY2hlY2tlZFBvc2l0aW9ucy5wdXNoKHBvcyk7XG4gICAgfVxuICB9KTtcblxuICBoYW5kbGVDaGVja1N0YXRlKHRyZWVOb2Rlc1N0YXRlcywgZmlsdGVyUGFyZW50UG9zaXRpb24oY2hlY2tlZFBvc2l0aW9ucy5zb3J0KCkpLCB0cnVlKTtcblxuICByZXR1cm4gZ2V0Q2hlY2sodHJlZU5vZGVzU3RhdGVzLCBjaGVja2VkUG9zaXRpb25zKTtcbn1cblxuLy8gY2FuIGFkZCBleHRyYSBwcm9wIHRvIGV2ZXJ5IG5vZGUuXG5leHBvcnQgZnVuY3Rpb24gcmVjdXJzaXZlQ2xvbmVDaGlsZHJlbihjaGlsZHJlbiwgY2IgPSBjaCA9PiBjaCkge1xuICByZXR1cm4gQXJyYXkuZnJvbShjaGlsZHJlbikubWFwKGNoaWxkID0+IHtcbiAgICBjb25zdCBuZXdDaGlsZCA9IGNiKGNoaWxkKTtcbiAgICBpZiAobmV3Q2hpbGQgJiYgbmV3Q2hpbGQucHJvcHMgJiYgbmV3Q2hpbGQucHJvcHMuY2hpbGRyZW4pIHtcbiAgICAgIHJldHVybiBjbG9uZUVsZW1lbnQobmV3Q2hpbGQsIHt9LCByZWN1cnNpdmVDbG9uZUNoaWxkcmVuKG5ld0NoaWxkLnByb3BzLmNoaWxkcmVuLCBjYikpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3Q2hpbGQ7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZWN1cnNpdmVHZW4oY2hpbGRyZW4sIGxldmVsID0gMCkge1xuICByZXR1cm4gQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCAoY2hpbGQsIGluZGV4KSA9PiB7XG4gICAgY29uc3QgcG9zID0gYCR7bGV2ZWx9LSR7aW5kZXh9YDtcbiAgICBjb25zdCB7IHRpdGxlLCBsYWJlbCwgdmFsdWUsIGNoaWxkcmVuOiBzdWJDaGlsZHJlbiwgLi4ucmVzdCB9ID0gY2hpbGQucHJvcHM7XG4gICAgY29uc3QgbyA9IHtcbiAgICAgIC4uLnJlc3QsXG4gICAgICB0aXRsZSxcbiAgICAgIGxhYmVsOiBsYWJlbCB8fCB0aXRsZSxcbiAgICAgIHZhbHVlLFxuICAgICAga2V5OiBjaGlsZC5rZXksXG4gICAgICBfcG9zOiBwb3MsXG4gICAgfTtcbiAgICBpZiAoc3ViQ2hpbGRyZW4pIHtcbiAgICAgIG8uY2hpbGRyZW4gPSByZWN1cnNpdmVHZW4oc3ViQ2hpbGRyZW4sIHBvcyk7XG4gICAgfVxuICAgIHJldHVybiBvO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gcmVjdXJzaXZlKGNoaWxkcmVuLCBjYikge1xuICBjaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIGNiKGl0ZW0pO1xuICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7XG4gICAgICByZWN1cnNpdmUoaXRlbS5jaGlsZHJlbiwgY2IpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIEdldCB0aGUgdHJlZSdzIGNoZWNrZWROb2RlcyAodG9kbzogY2FuIG1lcmdlIHRvIHRoZSBgaGFuZGxlQ2hlY2tTdGF0ZWAgZnVuY3Rpb24pXG4vLyBJZiBvbmUgbm9kZSBjaGVja2VkLCBpdCdzIGFsbCBjaGlsZHJlbiBub2RlcyBjaGVja2VkLlxuLy8gSWYgc2libGluZyBub2RlcyBhbGwgY2hlY2tlZCwgdGhlIHBhcmVudCBjaGVja2VkLlxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckFsbENoZWNrZWREYXRhKHZzLCB0cmVlTm9kZXMpIHtcbiAgY29uc3QgdmFscyA9IFsuLi52c107XG4gIGlmICghdmFscy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdmFscztcbiAgfVxuXG4gIGNvbnN0IGRhdGEgPSByZWN1cnNpdmVHZW4odHJlZU5vZGVzKTtcbiAgY29uc3QgY2hlY2tlZE5vZGVzUG9zaXRpb25zID0gW107XG5cbiAgZnVuY3Rpb24gY2hlY2tDaGlsZHJlbihjaGlsZHJlbikge1xuICAgIGNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpZiAoaXRlbS5fX2NoZWNrZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY2kgPSB2YWxzLmluZGV4T2YoaXRlbS52YWx1ZSk7XG4gICAgICBjb25zdCBjaGlsZHMgPSBpdGVtLmNoaWxkcmVuO1xuICAgICAgaWYgKGNpID4gLTEpIHtcbiAgICAgICAgaXRlbS5fX2NoZWNrZWQgPSB0cnVlO1xuICAgICAgICBjaGVja2VkTm9kZXNQb3NpdGlvbnMucHVzaCh7IG5vZGU6IGl0ZW0sIHBvczogaXRlbS5fcG9zIH0pO1xuICAgICAgICB2YWxzLnNwbGljZShjaSwgMSk7XG4gICAgICAgIGlmIChjaGlsZHMpIHtcbiAgICAgICAgICByZWN1cnNpdmUoY2hpbGRzLCBjaGlsZCA9PiB7XG4gICAgICAgICAgICBjaGlsZC5fX2NoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2hlY2tlZE5vZGVzUG9zaXRpb25zLnB1c2goeyBub2RlOiBjaGlsZCwgcG9zOiBjaGlsZC5fcG9zIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY2hpbGRzKSB7XG4gICAgICAgICAgY2hlY2tDaGlsZHJlbihjaGlsZHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja1BhcmVudChjaGlsZHJlbiwgcGFyZW50ID0geyByb290OiB0cnVlIH0pIHtcbiAgICBsZXQgc2libGluZ0NoZWNrZWQgPSAwO1xuICAgIGNoaWxkcmVuLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBjb25zdCBjaGlsZHMgPSBpdGVtLmNoaWxkcmVuO1xuICAgICAgaWYgKGNoaWxkcyAmJiAhaXRlbS5fX2NoZWNrZWQgJiYgIWl0ZW0uX19oYWxmQ2hlY2tlZCkge1xuICAgICAgICBjb25zdCBwID0gY2hlY2tQYXJlbnQoY2hpbGRzLCBpdGVtKTtcbiAgICAgICAgaWYgKHAuX19jaGVja2VkKSB7XG4gICAgICAgICAgc2libGluZ0NoZWNrZWQrKztcbiAgICAgICAgfSBlbHNlIGlmIChwLl9faGFsZkNoZWNrZWQpIHtcbiAgICAgICAgICBzaWJsaW5nQ2hlY2tlZCArPSAwLjU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXRlbS5fX2NoZWNrZWQpIHtcbiAgICAgICAgc2libGluZ0NoZWNrZWQrKztcbiAgICAgIH0gZWxzZSBpZiAoaXRlbS5fX2hhbGZDaGVja2VkKSB7XG4gICAgICAgIHNpYmxpbmdDaGVja2VkICs9IDAuNTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBsZW4gPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgaWYgKHNpYmxpbmdDaGVja2VkID09PSBsZW4pIHtcbiAgICAgIHBhcmVudC5fX2NoZWNrZWQgPSB0cnVlO1xuICAgICAgY2hlY2tlZE5vZGVzUG9zaXRpb25zLnB1c2goeyBub2RlOiBwYXJlbnQsIHBvczogcGFyZW50Ll9wb3MgfSk7XG4gICAgfSBlbHNlIGlmIChzaWJsaW5nQ2hlY2tlZCA8IGxlbiAmJiBzaWJsaW5nQ2hlY2tlZCA+IDApIHtcbiAgICAgIHBhcmVudC5fX2hhbGZDaGVja2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHBhcmVudC5yb290KSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnQ7XG4gIH1cblxuICBjaGVja0NoaWxkcmVuKGRhdGEpO1xuICBjaGVja1BhcmVudChkYXRhKTtcblxuICBjaGVja2VkTm9kZXNQb3NpdGlvbnMuZm9yRWFjaCgoaSwgaW5kZXgpID0+IHtcbiAgICAvLyBjbGVhciBwcml2YXRlIG1ldGFkYXRhXG4gICAgZGVsZXRlIGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1tpbmRleF0ubm9kZS5fX2NoZWNrZWQ7XG4gICAgZGVsZXRlIGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1tpbmRleF0ubm9kZS5fcG9zO1xuICAgIC8vIGNyZWF0ZSB0aGUgc2FtZSBzdHJ1Y3R1cmUgb2YgYG9uQ2hlY2tgJ3MgcmV0dXJuLlxuICAgIGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1tpbmRleF0ubm9kZS5wcm9wcyA9IHtcbiAgICAgIHRpdGxlOiBjaGVja2VkTm9kZXNQb3NpdGlvbnNbaW5kZXhdLm5vZGUudGl0bGUsXG4gICAgICBsYWJlbDogY2hlY2tlZE5vZGVzUG9zaXRpb25zW2luZGV4XS5ub2RlLmxhYmVsIHx8IGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1tpbmRleF0ubm9kZS50aXRsZSxcbiAgICAgIHZhbHVlOiBjaGVja2VkTm9kZXNQb3NpdGlvbnNbaW5kZXhdLm5vZGUudmFsdWUsXG4gICAgfTtcbiAgICBpZiAoY2hlY2tlZE5vZGVzUG9zaXRpb25zW2luZGV4XS5ub2RlLmNoaWxkcmVuKSB7XG4gICAgICBjaGVja2VkTm9kZXNQb3NpdGlvbnNbaW5kZXhdLm5vZGUucHJvcHMuY2hpbGRyZW4gPSBjaGVja2VkTm9kZXNQb3NpdGlvbnNbaW5kZXhdLm5vZGUuY2hpbGRyZW47XG4gICAgfVxuICAgIGRlbGV0ZSBjaGVja2VkTm9kZXNQb3NpdGlvbnNbaW5kZXhdLm5vZGUudGl0bGU7XG4gICAgZGVsZXRlIGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1tpbmRleF0ubm9kZS5sYWJlbDtcbiAgICBkZWxldGUgY2hlY2tlZE5vZGVzUG9zaXRpb25zW2luZGV4XS5ub2RlLnZhbHVlO1xuICAgIGRlbGV0ZSBjaGVja2VkTm9kZXNQb3NpdGlvbnNbaW5kZXhdLm5vZGUuY2hpbGRyZW47XG4gIH0pO1xuICByZXR1cm4gY2hlY2tlZE5vZGVzUG9zaXRpb25zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc1NpbXBsZVRyZWVEYXRhKHRyZWVEYXRhLCBmb3JtYXQpIHtcbiAgZnVuY3Rpb24gdW5mbGF0dGVuMihhcnJheSwgcGFyZW50ID0geyBbZm9ybWF0LmlkXTogZm9ybWF0LnJvb3RQSWQgfSkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgYXJyYXlbaV0gPSB7IC4uLmFycmF5W2ldIH07IC8vIGNvcHksIGNhbiBub3QgY29ycnVwdHMgb3JpZ2luYWwgZGF0YVxuICAgICAgaWYgKGFycmF5W2ldW2Zvcm1hdC5wSWRdID09PSBwYXJlbnRbZm9ybWF0LmlkXSkge1xuICAgICAgICBhcnJheVtpXS5rZXkgPSBhcnJheVtpXVtmb3JtYXQuaWRdO1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGFycmF5W2ldKTtcbiAgICAgICAgYXJyYXkuc3BsaWNlKGktLSwgMSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgIHBhcmVudC5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB1bmZsYXR0ZW4yKGFycmF5LCBjaGlsZCkpO1xuICAgIH1cbiAgICBpZiAocGFyZW50W2Zvcm1hdC5pZF0gPT09IGZvcm1hdC5yb290UElkKSB7XG4gICAgICByZXR1cm4gY2hpbGRyZW47XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZmxhdHRlbjIodHJlZURhdGEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVJlZihpbnN0YW5jZSwgbmFtZSkge1xuICBpZiAoIWluc3RhbmNlLnNhdmVSZWZzKSB7XG4gICAgaW5zdGFuY2Uuc2F2ZVJlZnMgPSB7fTtcbiAgfVxuICBpZiAoIWluc3RhbmNlLnNhdmVSZWZzW25hbWVdKSB7XG4gICAgaW5zdGFuY2Uuc2F2ZVJlZnNbbmFtZV0gPSAobm9kZSkgPT4ge1xuICAgICAgaW5zdGFuY2VbbmFtZV0gPSBub2RlO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGluc3RhbmNlLnNhdmVSZWZzW25hbWVdO1xufVxuIl19