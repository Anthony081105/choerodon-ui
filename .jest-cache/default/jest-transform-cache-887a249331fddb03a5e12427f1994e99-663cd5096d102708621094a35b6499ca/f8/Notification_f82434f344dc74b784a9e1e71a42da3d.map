{"version":3,"sources":["notification/Notification.jsx"],"names":["seed","now","Date","Notification","Component","prefixCls","PropTypes","transitionName","animation","style","closeIcon","node","top","left","getContainer","props","properties","div","document","root","called","callback","notice","notification","removeNotice","component","destroy","ReactDOM","ref","notices","key","getUuid","previousState","v","noticeNodes","onClose","className"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport Animate from '../../animate';\nimport createChainedFunction from '../util/createChainedFunction';\nimport classnames from 'classnames';\nimport Notice from './Notice';\n\nlet seed = 0;\nconst now = Date.now();\n\nfunction getUuid() {\n  return `rcNotification_${now}_${seed++}`;\n}\n\nexport default class Notification extends Component {\n  static propTypes = {\n    prefixCls: PropTypes.string,\n    transitionName: PropTypes.string,\n    animation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    style: PropTypes.object,\n    closeIcon: PropTypes.node,\n  };\n\n  static defaultProps = {\n    prefixCls: 'rc-notification',\n    animation: 'fade',\n    style: {\n      top: 65,\n      left: '50%',\n    },\n  };\n\n  static newInstance = function newNotificationInstance(properties, callback) {\n    const { getContainer, ...props } = properties || {};\n    const div = document.createElement('div');\n    if (getContainer) {\n      const root = getContainer();\n      root.appendChild(div);\n    } else {\n      document.body.appendChild(div);\n    }\n    let called = false;\n\n    function ref(notification) {\n      if (called) {\n        return;\n      }\n      called = true;\n      callback({\n        notice(noticeProps) {\n          notification.add(noticeProps);\n        },\n        removeNotice(key) {\n          notification.remove(key);\n        },\n        component: notification,\n        destroy() {\n          ReactDOM.unmountComponentAtNode(div);\n          div.parentNode.removeChild(div);\n        },\n      });\n    }\n\n    ReactDOM.render(<Notification {...props} ref={ref} />, div);\n  };\n\n  state = {\n    notices: [],\n  };\n\n  getTransitionName() {\n    const props = this.props;\n    let transitionName = props.transitionName;\n    if (!transitionName && props.animation) {\n      transitionName = `${props.prefixCls}-${props.animation}`;\n    }\n    return transitionName;\n  }\n\n  add = notice => {\n    const key = (notice.key = notice.key || getUuid());\n    this.setState(previousState => {\n      const notices = previousState.notices;\n      if (!notices.filter(v => v.key === key).length) {\n        return {\n          notices: notices.concat(notice),\n        };\n      }\n    });\n  };\n\n  remove = key => {\n    this.setState(previousState => {\n      return {\n        notices: previousState.notices.filter(notice => notice.key !== key),\n      };\n    });\n  };\n\n  render() {\n    const props = this.props;\n    const noticeNodes = this.state.notices.map(notice => {\n      const onClose = createChainedFunction(this.remove.bind(this, notice.key), notice.onClose);\n      return (\n        <Notice\n          prefixCls={props.prefixCls}\n          {...notice}\n          onClose={onClose}\n          closeIcon={props.closeIcon}\n        >\n          {notice.content}\n        </Notice>\n      );\n    });\n    const className = {\n      [props.prefixCls]: 1,\n      [props.className]: !!props.className,\n    };\n    return (\n      <div className={classnames(className)} style={props.style}>\n        <Animate transitionName={this.getTransitionName()}>{noticeNodes}</Animate>\n      </div>\n    );\n  }\n}\n"]}