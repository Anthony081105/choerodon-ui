538a8796268ba802153f6147a47aea9a
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.T = T;
exports.fileToObject = fileToObject;
exports.genPercentAdd = genPercentAdd;
exports.getFileItem = getFileItem;
exports.removeFileItem = removeFileItem;

function T() {
  return true;
} // Fix IE file.status problem
// via coping a new Object


function fileToObject(file) {
  return {
    lastModified: file.lastModified,
    lastModifiedDate: file.lastModifiedDate,
    name: file.filename || file.name,
    size: file.size,
    type: file.type,
    uid: file.uid,
    response: file.response,
    error: file.error,
    percent: 0,
    originFileObj: file
  };
}
/**
 * 生成Progress percent: 0.1 -> 0.98
 *   - for ie
 */


function genPercentAdd() {
  var k = 0.1;
  var i = 0.01;
  var end = 0.98;
  return function (s) {
    var start = s;

    if (start >= end) {
      return start;
    }

    start += k;
    k -= i;

    if (k < 0.001) {
      k = 0.001;
    }

    return start * 100;
  };
}

function getFileItem(file, fileList) {
  var matchKey = file.uid !== undefined ? 'uid' : 'name';
  return fileList.filter(function (item) {
    return item[matchKey] === file[matchKey];
  })[0];
}

function removeFileItem(file, fileList) {
  var matchKey = file.uid !== undefined ? 'uid' : 'name';
  var removed = fileList.filter(function (item) {
    return item[matchKey] !== file[matchKey];
  });

  if (removed.length === fileList.length) {
    return null;
  }

  return removed;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwbG9hZC91dGlscy5qcyJdLCJuYW1lcyI6WyJsYXN0TW9kaWZpZWQiLCJmaWxlIiwibGFzdE1vZGlmaWVkRGF0ZSIsIm5hbWUiLCJzaXplIiwidHlwZSIsInVpZCIsInJlc3BvbnNlIiwiZXJyb3IiLCJwZXJjZW50Iiwib3JpZ2luRmlsZU9iaiIsImsiLCJpIiwiZW5kIiwic3RhcnQiLCJtYXRjaEtleSIsIml0ZW0iLCJyZW1vdmVkIiwiZmlsZUxpc3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sU0FBQSxDQUFBLEdBQWE7QUFDaEIsU0FBQSxJQUFBO0VBRUo7QUFDQTs7O0FBQ08sU0FBQSxZQUFBLENBQUEsSUFBQSxFQUE0QjtBQUMvQixTQUFPO0FBQ0hBLElBQUFBLFlBQVksRUFBRUMsSUFBSSxDQURmLFlBQUE7QUFFSEMsSUFBQUEsZ0JBQWdCLEVBQUVELElBQUksQ0FGbkIsZ0JBQUE7QUFHSEUsSUFBQUEsSUFBSSxFQUFFRixJQUFJLENBQUpBLFFBQUFBLElBQWlCQSxJQUFJLENBSHhCLElBQUE7QUFJSEcsSUFBQUEsSUFBSSxFQUFFSCxJQUFJLENBSlAsSUFBQTtBQUtISSxJQUFBQSxJQUFJLEVBQUVKLElBQUksQ0FMUCxJQUFBO0FBTUhLLElBQUFBLEdBQUcsRUFBRUwsSUFBSSxDQU5OLEdBQUE7QUFPSE0sSUFBQUEsUUFBUSxFQUFFTixJQUFJLENBUFgsUUFBQTtBQVFITyxJQUFBQSxLQUFLLEVBQUVQLElBQUksQ0FSUixLQUFBO0FBU0hRLElBQUFBLE9BQU8sRUFUSixDQUFBO0FBVUhDLElBQUFBLGFBQWEsRUFBRVQ7QUFWWixHQUFQO0FBWUg7QUFDRDs7Ozs7O0FBSU8sU0FBQSxhQUFBLEdBQXlCO0FBQzVCLE1BQUlVLENBQUMsR0FBTCxHQUFBO0FBQ0EsTUFBTUMsQ0FBQyxHQUFQLElBQUE7QUFDQSxNQUFNQyxHQUFHLEdBQVQsSUFBQTtBQUNBLFNBQU8sVUFBQSxDQUFBLEVBQWE7QUFDaEIsUUFBSUMsS0FBSyxHQUFULENBQUE7O0FBQ0EsUUFBSUEsS0FBSyxJQUFULEdBQUEsRUFBa0I7QUFDZCxhQUFBLEtBQUE7QUFDSDs7QUFDREEsSUFBQUEsS0FBSyxJQUFMQSxDQUFBQTtBQUNBSCxJQUFBQSxDQUFDLElBQURBLENBQUFBOztBQUNBLFFBQUlBLENBQUMsR0FBTCxLQUFBLEVBQWU7QUFDWEEsTUFBQUEsQ0FBQyxHQUFEQSxLQUFBQTtBQUNIOztBQUNELFdBQU9HLEtBQUssR0FBWixHQUFBO0FBVkosR0FBQTtBQVlIOztBQUNNLFNBQUEsV0FBQSxDQUFBLElBQUEsRUFBQSxRQUFBLEVBQXFDO0FBQ3hDLE1BQU1DLFFBQVEsR0FBR2QsSUFBSSxDQUFKQSxHQUFBQSxLQUFBQSxTQUFBQSxHQUFBQSxLQUFBQSxHQUFqQixNQUFBO0FBQ0EsU0FBTyxRQUFRLENBQVIsTUFBQSxDQUFnQixVQUFBLElBQUEsRUFBSTtBQUFBLFdBQUllLElBQUksQ0FBSkEsUUFBSSxDQUFKQSxLQUFtQmYsSUFBSSxDQUEzQixRQUEyQixDQUEzQjtBQUFwQixHQUFBLEVBQVAsQ0FBTyxDQUFQO0FBQ0g7O0FBQ00sU0FBQSxjQUFBLENBQUEsSUFBQSxFQUFBLFFBQUEsRUFBd0M7QUFDM0MsTUFBTWMsUUFBUSxHQUFHZCxJQUFJLENBQUpBLEdBQUFBLEtBQUFBLFNBQUFBLEdBQUFBLEtBQUFBLEdBQWpCLE1BQUE7QUFDQSxNQUFNZ0IsT0FBTyxHQUFHLFFBQVEsQ0FBUixNQUFBLENBQWdCLFVBQUEsSUFBQSxFQUFJO0FBQUEsV0FBSUQsSUFBSSxDQUFKQSxRQUFJLENBQUpBLEtBQW1CZixJQUFJLENBQTNCLFFBQTJCLENBQTNCO0FBQXBDLEdBQWdCLENBQWhCOztBQUNBLE1BQUlnQixPQUFPLENBQVBBLE1BQUFBLEtBQW1CQyxRQUFRLENBQS9CLE1BQUEsRUFBd0M7QUFDcEMsV0FBQSxJQUFBO0FBQ0g7O0FBQ0QsU0FBQSxPQUFBO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gVCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIEZpeCBJRSBmaWxlLnN0YXR1cyBwcm9ibGVtXG4vLyB2aWEgY29waW5nIGEgbmV3IE9iamVjdFxuZXhwb3J0IGZ1bmN0aW9uIGZpbGVUb09iamVjdChmaWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbGFzdE1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCxcbiAgICAgICAgbGFzdE1vZGlmaWVkRGF0ZTogZmlsZS5sYXN0TW9kaWZpZWREYXRlLFxuICAgICAgICBuYW1lOiBmaWxlLmZpbGVuYW1lIHx8IGZpbGUubmFtZSxcbiAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgIHVpZDogZmlsZS51aWQsXG4gICAgICAgIHJlc3BvbnNlOiBmaWxlLnJlc3BvbnNlLFxuICAgICAgICBlcnJvcjogZmlsZS5lcnJvcixcbiAgICAgICAgcGVyY2VudDogMCxcbiAgICAgICAgb3JpZ2luRmlsZU9iajogZmlsZSxcbiAgICB9O1xufVxuLyoqXG4gKiDnlJ/miJBQcm9ncmVzcyBwZXJjZW50OiAwLjEgLT4gMC45OFxuICogICAtIGZvciBpZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuUGVyY2VudEFkZCgpIHtcbiAgICBsZXQgayA9IDAuMTtcbiAgICBjb25zdCBpID0gMC4wMTtcbiAgICBjb25zdCBlbmQgPSAwLjk4O1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICBsZXQgc3RhcnQgPSBzO1xuICAgICAgICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhcnQgKz0gaztcbiAgICAgICAgayAtPSBpO1xuICAgICAgICBpZiAoayA8IDAuMDAxKSB7XG4gICAgICAgICAgICBrID0gMC4wMDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXJ0ICogMTAwO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUl0ZW0oZmlsZSwgZmlsZUxpc3QpIHtcbiAgICBjb25zdCBtYXRjaEtleSA9IGZpbGUudWlkICE9PSB1bmRlZmluZWQgPyAndWlkJyA6ICduYW1lJztcbiAgICByZXR1cm4gZmlsZUxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbVttYXRjaEtleV0gPT09IGZpbGVbbWF0Y2hLZXldKVswXTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGaWxlSXRlbShmaWxlLCBmaWxlTGlzdCkge1xuICAgIGNvbnN0IG1hdGNoS2V5ID0gZmlsZS51aWQgIT09IHVuZGVmaW5lZCA/ICd1aWQnIDogJ25hbWUnO1xuICAgIGNvbnN0IHJlbW92ZWQgPSBmaWxlTGlzdC5maWx0ZXIoaXRlbSA9PiBpdGVtW21hdGNoS2V5XSAhPT0gZmlsZVttYXRjaEtleV0pO1xuICAgIGlmIChyZW1vdmVkLmxlbmd0aCA9PT0gZmlsZUxpc3QubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcmVtb3ZlZDtcbn1cbiJdfQ==