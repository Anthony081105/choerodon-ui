{"version":3,"sources":["_util/autobind.js"],"names":["fn","args","WeakMap","mapStore","superStore","bind","constructor","target","configurable","enumerable","descriptor","get","Object","key","getBoundSuper","boundFn","writable","value","set"],"mappings":"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","sourcesContent":["import WeakMap from 'core-js/library/fn/weak-map';\nimport createDefaultSetter from './createDefaultSetter';\nlet mapStore;\nfunction bind(fn, context) {\n    if (fn.bind) {\n        return fn.bind(context);\n    }\n    return function __autobind__(...args) {\n        return fn.apply(context, args);\n    };\n}\nfunction getBoundSuper(obj, fn) {\n    if (typeof WeakMap === 'undefined') {\n        throw new Error(`Using @autobind on ${fn.name}() requires WeakMap support due to its use of super.${fn.name}()\n      See https://github.com/jayphelps/core-decorators.js/issues/20`);\n    }\n    if (!mapStore) {\n        mapStore = new WeakMap();\n    }\n    if (mapStore.has(obj) === false) {\n        mapStore.set(obj, new WeakMap());\n    }\n    const superStore = mapStore.get(obj);\n    if (superStore.has(fn) === false) {\n        superStore.set(fn, bind(fn, obj));\n    }\n    return superStore.get(fn);\n}\n/**\n * 绑定方法的this指向当前对象实例.\n *\n * @private\n * @param {Function} target 方法对象\n * @param {string} key 方法名.\n * @param {Object} descriptor 方法描述对象.\n * @returns {Object} 方法描述对象.\n */\nexport default function autobind(target, key, descriptor) {\n    const { constructor } = target;\n    const { value: fn, configurable, enumerable } = descriptor;\n    return {\n        configurable,\n        enumerable,\n        get() {\n            // Class.prototype.key lookup\n            // Someone accesses the property directly on the prototype on which it is\n            // actually defined on, i.e. Class.prototype.hasOwnProperty(key)\n            if (this === target) {\n                return fn;\n            }\n            // Class.prototype.key lookup\n            // Someone accesses the property directly on a prototype but it was found\n            // up the chain, not defined directly on it\n            // i.e. Class.prototype.hasOwnProperty(key) == false && key in Class.prototype\n            if (this.constructor !== constructor &&\n                Object.getPrototypeOf(this).constructor === constructor) {\n                return fn;\n            }\n            // Autobound method calling super.sameMethod() which is also autobound and so on.\n            if (this.constructor !== constructor && key in this.constructor.prototype) {\n                return getBoundSuper(this, fn);\n            }\n            const boundFn = bind(fn, this);\n            Object.defineProperty(this, key, {\n                configurable: true,\n                writable: true,\n                // NOT enumerable when it's a bound method\n                enumerable: false,\n                value: boundFn,\n            });\n            return boundFn;\n        },\n        set: createDefaultSetter(key),\n    };\n}\n"]}