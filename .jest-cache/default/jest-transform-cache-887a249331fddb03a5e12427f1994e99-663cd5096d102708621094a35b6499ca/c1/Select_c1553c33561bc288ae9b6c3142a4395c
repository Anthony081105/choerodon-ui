2a2462e95ff26f9578ae116844e087dc
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _reactDom = require("react-dom");

var _classnames = _interopRequireDefault(require("classnames"));

var _noop = _interopRequireDefault(require("lodash/noop"));

var _KeyCode = _interopRequireDefault(require("../../_util/KeyCode"));

var _animate = _interopRequireDefault(require("../../animate"));

var _util = require("./util");

var _SelectTrigger = _interopRequireDefault(require("./SelectTrigger"));

var _TreeNode2 = _interopRequireDefault(require("./TreeNode"));

var _strategies = require("./strategies");

var _PropTypes = require("./PropTypes");

var _Button = _interopRequireDefault(require("../../button/Button"));

var _isEmpty = _interopRequireDefault(require("lodash/isEmpty"));

function _createSuper(Derived) {
  function isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;

    try {
      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
      return true;
    } catch (e) {
      return false;
    }
  }

  return function () {
    var Super = (0, _getPrototypeOf2["default"])(Derived),
        result;

    if (isNativeReflectConstruct()) {
      var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return (0, _possibleConstructorReturn2["default"])(this, result);
  };
}

function filterFn(input, child) {
  return String((0, _util.getPropValue)(child, (0, _util.labelCompatible)(this.props.treeNodeFilterProp))).indexOf(input) > -1;
}

function loopTreeData(data) {
  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  var treeCheckable = arguments.length > 2 ? arguments[2] : undefined;
  return data.map(function (item, index) {
    var pos = "".concat(level, "-").concat(index);
    var label = item.label,
        value = item.value,
        disabled = item.disabled,
        key = item.key,
        hasOwnProperty = item.hasOwnProperty,
        selectable = item.selectable,
        children = item.children,
        isLeaf = item.isLeaf,
        otherProps = (0, _objectWithoutProperties2["default"])(item, ["label", "value", "disabled", "key", "hasOwnProperty", "selectable", "children", "isLeaf"]);
    var props = (0, _objectSpread2["default"])({
      value: value,
      title: label,
      // value: value || String(key || label), // cause onChange callback error
      key: key || value || pos,
      disabled: disabled || false,
      selectable: selectable === false ? selectable : !treeCheckable
    }, otherProps);
    var ret;

    if (children && children.length) {
      ret = _react["default"].createElement(_TreeNode2["default"], props, loopTreeData(children, pos, treeCheckable));
    } else {
      ret = _react["default"].createElement(_TreeNode2["default"], (0, _extends2["default"])({}, props, {
        isLeaf: isLeaf
      }));
    }

    return ret;
  });
}

var Select =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Select, _Component);

  var _super = _createSuper(Select);

  function Select(_props2) {
    var _this;

    (0, _classCallCheck2["default"])(this, Select);
    _this = _super.call(this, _props2);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onInputChange", function (event) {
      var val = event.target.value;

      var _assertThisInitialize = (0, _assertThisInitialized2["default"])(_this),
          props = _assertThisInitialize.props;

      _this.setState({
        inputValue: (0, _isEmpty["default"])(_this.props.searchValue) ? val : _this.props.searchValue,
        open: true
      });

      if (props.treeCheckable && !val) {
        _this.setState({
          value: _this.getValue(props, (0, _toConsumableArray2["default"])(_this.state.value), false)
        });
      }

      props.onSearch(val);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onDropdownVisibleChange", function (open) {
      // selection inside combobox cause click
      if (!open && document.activeElement === _this.getInputDOMNode()) {} // return;
      // this.setOpenState(open);
      // setTimeout, then have animation. why?


      setTimeout(function () {
        _this.setOpenState(open, undefined, !open);
      }, 10);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onKeyDown", function (event) {
      var props = _this.props;

      if (props.disabled) {
        return;
      }

      var keyCode = event.keyCode;

      if (_this.state.open && !_this.getInputDOMNode()) {
        _this.onInputKeyDown(event);
      } else if (keyCode === _KeyCode["default"].ENTER || keyCode === _KeyCode["default"].DOWN) {
        _this.setOpenState(true);

        event.preventDefault();
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onInputKeyDown", function (event) {
      var props = _this.props;

      if (props.disabled) {
        return;
      }

      var state = _this.state;
      var keyCode = event.keyCode;

      if ((0, _util.isMultiple)(props) && !event.target.value && keyCode === _KeyCode["default"].BACKSPACE) {
        var value = state.value.concat();

        if (value.length) {
          var popValue = value.pop();

          _this.removeSelected(_this.isLabelInValue() ? popValue : popValue.value);
        }

        return;
      }

      if (keyCode === _KeyCode["default"].DOWN) {
        if (!state.open) {
          _this.openIfHasChildren();

          event.preventDefault();
          event.stopPropagation();
          return;
        }
      } else if (keyCode === _KeyCode["default"].ESC) {
        if (state.open) {
          _this.setOpenState(false);

          event.preventDefault();
          event.stopPropagation();
        }

        return;
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onSelect", function (selectedKeys, info) {
      var item = info.node;
      var value = _this.state.value;
      var props = _this.props;
      var selectedValue = (0, _util.getValuePropValue)(item);

      var selectedLabel = _this.getLabelFromNode(item);

      var checkableSelect = props.treeCheckable && info.event === 'select';
      var event = selectedValue;

      if (_this.isLabelInValue()) {
        event = {
          value: event,
          label: selectedLabel
        };
      }

      if (info.selected === false) {
        _this.onDeselect(info);

        if (!checkableSelect) return;
      }

      props.onSelect(event, item, info);
      var checkEvt = info.event === 'check';

      if ((0, _util.isMultiple)(props)) {
        _this.clearSearchInput();

        if (checkEvt) {
          value = _this.getCheckedNodes(info, props).map(function (n) {
            return {
              value: (0, _util.getValuePropValue)(n),
              label: _this.getLabelFromNode(n)
            };
          });
        } else {
          if (value.some(function (i) {
            return i.value === selectedValue;
          })) {
            return;
          }

          value = value.concat([{
            value: selectedValue,
            label: selectedLabel
          }]);
        }
      } else {
        if (value.length && value[0].value === selectedValue) {
          _this.setOpenState(false);

          return;
        }

        value = [{
          value: selectedValue,
          label: selectedLabel
        }];

        _this.setOpenState(false);
      }

      var extraInfo = {
        triggerValue: selectedValue,
        triggerNode: item
      };

      if (checkEvt) {
        extraInfo.checked = info.checked; // if inputValue existing, tree is checkStrictly

        extraInfo.allCheckedNodes = props.treeCheckStrictly || _this.state.inputValue ? info.checkedNodes : (0, _util.flatToHierarchy)(info.checkedNodesPositions);
        _this._checkedNodes = info.checkedNodesPositions;
        var _tree = _this.trigger.popupEle;
        _this._treeNodesStates = _tree.checkKeys;
      } else {
        extraInfo.selected = info.selected;
      }

      _this.fireChange(value, extraInfo); // 选中后判断是否需要清楚搜索值


      if (props.autoClearSearchValue) {
        _this.clearSearchInput();
      }

      if (props.inputValue && (0, _isEmpty["default"])(_this.props.searchValue)) {
        _this.setState({
          inputValue: ''
        });
      } else {
        _this.setState({
          inputValue: _this.props.searchValue
        });
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onDeselect", function (info) {
      _this.removeSelected((0, _util.getValuePropValue)(info.node));

      if (!(0, _util.isMultiple)(_this.props)) {
        _this.setOpenState(false);
      } else {
        _this.clearSearchInput();
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onPlaceholderClick", function () {
      _this.getInputDOMNode().focus();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onClearSelection", function (event) {
      var props = _this.props;
      var state = _this.state;

      if (props.disabled) {
        return;
      }

      event.stopPropagation();
      _this._cacheTreeNodesStates = 'no';
      _this._checkedNodes = [];

      if (state.inputValue || state.value.length) {
        _this.setOpenState(false);

        if (typeof props.inputValue === 'undefined') {
          _this.setState({
            inputValue: (0, _isEmpty["default"])(_this.props.searchValue) ? '' : _this.props.searchValue
          }, function () {
            _this.fireChange([]);
          });
        } else {
          _this.fireChange([]);
        }
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onChoiceAnimationLeave", function () {
      _this.trigger.trigger.forcePopupAlign();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onArrowClick", function (e) {
      e.stopPropagation();
      e.preventDefault();

      if (!_this.props.disabled) {
        _this.onDropdownVisibleChange(!_this.state.open);
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getPlaceholderElement", function () {
      var _assertThisInitialize2 = (0, _assertThisInitialized2["default"])(_this),
          props = _assertThisInitialize2.props,
          state = _assertThisInitialize2.state;

      var placeholder = props.placeholder;

      if (placeholder) {
        return _react["default"].createElement("div", {
          className: "".concat(props.prefixCls, "-selection__placeholder")
        }, placeholder);
      }

      return null;
    });
    var _value = [];

    if ('value' in _props2) {
      _value = (0, _util.toArray)(_props2.value);
    } else {
      _value = (0, _util.toArray)(_props2.defaultValue);
    } // save parsed treeData, for performance (treeData may be very big)


    _this.renderedTreeData = _this.renderTreeData();
    _value = _this.addLabelToValue(_props2, _value);
    _value = _this.getValue(_props2, _value, _props2.inputValue ? '__strict' : true);
    var inputValue = _props2.inputValue || '';

    if (!(0, _isEmpty["default"])(_props2.searchValue)) {
      inputValue = String(_props2.searchValue);
    }

    _this.state = {
      value: _value,
      inputValue: inputValue,
      open: _props2.open || _props2.defaultOpen,
      focused: false
    };
    return _this;
  }

  (0, _createClass2["default"])(Select, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this$props = this.props,
          autoFocus = _this$props.autoFocus,
          disabled = _this$props.disabled;

      if ((0, _util.isMultiple)(this.props)) {
        var inputNode = this.getInputDOMNode();

        if (inputNode.value) {
          inputNode.style.width = '';
          inputNode.style.width = "".concat(this.inputMirrorInstance.clientWidth, "px");
        } else {
          inputNode.style.width = '';
        }
      }

      if (autoFocus && !disabled) {
        this.focus();
      }
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      // save parsed treeData, for performance (treeData may be very big)
      this.renderedTreeData = this.renderTreeData(nextProps); // Detecting whether the object of `onChange`'s argument  is old ref.
      // Better to do a deep equal later.

      this._cacheTreeNodesStates = this._cacheTreeNodesStates !== 'no' && this._savedValue && nextProps.value === this._savedValue;

      if (this.props.treeData !== nextProps.treeData || this.props.children !== nextProps.children) {
        // refresh this._treeNodesStates cache
        this._treeNodesStates = (0, _util.getTreeNodesStates)(this.renderedTreeData || nextProps.children, this.state.value.map(function (item) {
          return item.value;
        }));
      }

      if ('value' in nextProps) {
        var value = (0, _util.toArray)(nextProps.value);
        value = this.addLabelToValue(nextProps, value);
        value = this.getValue(nextProps, value);
        this.setState({
          value: value
        });

        if (nextProps.searchValue !== this.props.searchValue) {
          this.setState({
            inputValue: String(nextProps.searchValue)
          });
        }
      }

      if ((0, _isEmpty["default"])(this.props.searchValue)) {
        if (nextProps.inputValue !== this.props.inputValue) {
          this.setState({
            inputValue: nextProps.inputValue
          });
        }
      } else {
        this.setState({
          inputValue: this.props.searchValue
        });
      }

      if ('open' in nextProps) {
        this.setState({
          open: nextProps.open
        });
      }
    }
  }, {
    key: "componentWillUpdate",
    value: function componentWillUpdate(nextProps) {
      if (this._savedValue && nextProps.value && nextProps.value !== this._savedValue && nextProps.value === this.props.value) {
        this._cacheTreeNodesStates = false;
        this.getValue(nextProps, this.addLabelToValue(nextProps, (0, _util.toArray)(nextProps.value)));
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      var state = this.state;
      var props = this.props;

      if (state.open && (0, _util.isMultiple)(props)) {
        var inputNode = this.getInputDOMNode();

        if (inputNode.value) {
          inputNode.style.width = '';
          inputNode.style.width = "".concat(this.inputMirrorInstance.clientWidth, "px");
        } else {
          inputNode.style.width = '';
        }
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.clearDelayTimer();

      if (this.dropdownContainer) {
        (0, _reactDom.unmountComponentAtNode)(this.dropdownContainer);
        document.body.removeChild(this.dropdownContainer);
        this.dropdownContainer = null;
      }
    }
  }, {
    key: "getLabelFromNode",
    value: function getLabelFromNode(child) {
      return (0, _util.getPropValue)(child, this.props.treeNodeLabelProp);
    }
  }, {
    key: "getLabelFromProps",
    value: function getLabelFromProps(props, value) {
      var _this2 = this;

      if (value === undefined) {
        return null;
      }

      var label = null;
      (0, _util.loopAllChildren)(this.renderedTreeData || props.children, function (item) {
        if ((0, _util.getValuePropValue)(item) === value) {
          label = _this2.getLabelFromNode(item);
        }
      });

      if (label === null) {
        return value;
      }

      return label;
    }
  }, {
    key: "getDropdownContainer",
    value: function getDropdownContainer() {
      if (!this.dropdownContainer) {
        this.dropdownContainer = document.createElement('div');
        document.body.appendChild(this.dropdownContainer);
      }

      return this.dropdownContainer;
    }
  }, {
    key: "getSearchPlaceholderElement",
    value: function getSearchPlaceholderElement(hidden) {
      var props = this.props;
      var placeholder;

      if ((0, _util.isMultiple)(props)) {
        placeholder = props.placeholder || props.searchPlaceholder;
      } else {
        placeholder = props.searchPlaceholder;
      }

      if (placeholder) {
        return _react["default"].createElement("span", {
          style: {
            display: hidden ? 'none' : 'block'
          },
          onClick: this.onPlaceholderClick,
          className: "".concat(props.prefixCls, "-search__field__placeholder")
        }, placeholder);
      }

      return null;
    }
  }, {
    key: "getInputElement",
    value: function getInputElement() {
      var inputValue = this.state.inputValue;
      var _this$props2 = this.props,
          prefixCls = _this$props2.prefixCls,
          disabled = _this$props2.disabled;
      return _react["default"].createElement("span", {
        className: "".concat(prefixCls, "-search__field__wrap")
      }, _react["default"].createElement("input", {
        ref: (0, _util.saveRef)(this, 'inputInstance'),
        onChange: this.onInputChange,
        onKeyDown: this.onInputKeyDown,
        value: inputValue,
        disabled: disabled,
        className: "".concat(prefixCls, "-search__field"),
        role: "textbox"
      }), _react["default"].createElement("span", {
        ref: (0, _util.saveRef)(this, 'inputMirrorInstance'),
        className: "".concat(prefixCls, "-search__field__mirror")
      }, inputValue, "\xA0"), (0, _util.isMultiple)(this.props) ? null : this.getSearchPlaceholderElement(!!inputValue));
    }
  }, {
    key: "getInputDOMNode",
    value: function getInputDOMNode() {
      return this.inputInstance;
    }
  }, {
    key: "getPopupDOMNode",
    value: function getPopupDOMNode() {
      return this.trigger.getPopupDOMNode();
    }
  }, {
    key: "getPopupComponentRefs",
    value: function getPopupComponentRefs() {
      return this.trigger.getPopupEleRefs();
    }
  }, {
    key: "getValue",
    value: function getValue(_props, val) {
      var _this3 = this;

      var init = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var value = val; // if inputValue existing, tree is checkStrictly

      var _strict = init === '__strict' || init && (this.state && this.state.inputValue || this.props.inputValue !== _props.inputValue);

      if (_props.treeCheckable && (_props.treeCheckStrictly || _strict)) {
        this.halfCheckedValues = [];
        value = [];
        val.forEach(function (i) {
          if (!i.halfChecked) {
            value.push(i);
          } else {
            _this3.halfCheckedValues.push(i);
          }
        });
      } // if (!(_props.treeCheckable && !_props.treeCheckStrictly)) {


      if (!!!_props.treeCheckable || _props.treeCheckable && (_props.treeCheckStrictly || _strict)) {
        return value;
      }

      var checkedTreeNodes;

      if (this._cachetreeData && this._cacheTreeNodesStates && this._checkedNodes && this.state && !this.state.inputValue) {
        this.checkedTreeNodes = checkedTreeNodes = this._checkedNodes;
      } else {
        /**
         * Note: `this._treeNodesStates`'s treeNodesStates must correspond to nodes of the
         * final tree (`processTreeNode` function from SelectTrigger.jsx produce the final tree).
         *
         * And, `this._treeNodesStates` from `onSelect` is previous value,
         * so it perhaps only have a few nodes, but the newly filtered tree can have many nodes,
         * thus, you cannot use previous _treeNodesStates.
         */
        // getTreeNodesStates is not effective.
        this._treeNodesStates = (0, _util.getTreeNodesStates)(this.renderedTreeData || _props.children, value.map(function (item) {
          return item.value;
        }));
        this.checkedTreeNodes = checkedTreeNodes = this._treeNodesStates.checkedNodes;
      }

      var mapLabVal = function mapLabVal(arr) {
        return arr.map(function (itemObj) {
          return {
            value: (0, _util.getValuePropValue)(itemObj.node),
            label: (0, _util.getPropValue)(itemObj.node, _props.treeNodeLabelProp)
          };
        });
      };

      var props = this.props;
      var checkedValues = [];

      if (props.showCheckedStrategy === _strategies.SHOW_ALL) {
        checkedValues = mapLabVal(checkedTreeNodes);
      } else if (props.showCheckedStrategy === _strategies.SHOW_PARENT) {
        var posArr = (0, _util.filterParentPosition)(checkedTreeNodes.map(function (itemObj) {
          return itemObj.pos;
        }));
        checkedValues = mapLabVal(checkedTreeNodes.filter(function (itemObj) {
          return posArr.indexOf(itemObj.pos) !== -1;
        }));
      } else {
        checkedValues = mapLabVal(checkedTreeNodes.filter(function (itemObj) {
          return !itemObj.node.props.children;
        }));
      }

      return checkedValues;
    }
  }, {
    key: "getCheckedNodes",
    value: function getCheckedNodes(info, props) {
      // TODO treeCheckable does not support tags/dynamic
      var checkedNodes = info.checkedNodes;
      var checkNodeProps = checkedNodes.forEach(function (item) {
        if (!item.props) {
          item.props = item;
        }

        return item;
      });

      if (props.treeCheckStrictly || this.state.inputValue) {
        return checkNodeProps;
      }

      var checkedNodesPositions = info.checkedNodesPositions;

      if (props.showCheckedStrategy === _strategies.SHOW_ALL) {
        checkNodeProps = checkNodeProps;
      } else if (props.showCheckedStrategy === _strategies.SHOW_PARENT) {
        var posArr = (0, _util.filterParentPosition)(checkedNodesPositions.map(function (itemObj) {
          return itemObj.pos;
        }));
        checkNodeProps = checkedNodesPositions.filter(function (itemObj) {
          return posArr.indexOf(itemObj.pos) !== -1;
        }).map(function (itemObj) {
          return itemObj.node;
        });
      } else {
        checkNodeProps = checkNodeProps.filter(function (n) {
          return !n.props.children;
        });
      }

      return checkNodeProps;
    }
  }, {
    key: "getDeselectedValue",
    value: function getDeselectedValue(selectedValue) {
      var checkedTreeNodes = this.checkedTreeNodes;
      var unCheckPos;
      checkedTreeNodes.forEach(function (itemObj) {
        if (itemObj.node.props.value === selectedValue) {
          unCheckPos = itemObj.pos;
        }
      });
      var newVals = [];
      var newCkTns = [];
      checkedTreeNodes.forEach(function (itemObj) {
        if ((0, _util.isPositionPrefix)(itemObj.pos, unCheckPos) || (0, _util.isPositionPrefix)(unCheckPos, itemObj.pos)) {
          // Filter ancestral and children nodes when uncheck a node.
          return;
        }

        newCkTns.push(itemObj);
        newVals.push(itemObj.node.props.value);
      });
      this.checkedTreeNodes = this._checkedNodes = newCkTns;
      var nv = this.state.value.filter(function (val) {
        return newVals.indexOf(val.value) !== -1;
      });
      this.fireChange(nv, {
        triggerValue: selectedValue,
        clear: true
      });
    }
  }, {
    key: "setOpenState",
    value: function setOpenState(open, needFocus) {
      var _this4 = this;

      var documentClickClose = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      this.clearDelayTimer();
      var props = this.props; // can not optimize, if children is empty
      // if (this.state.open === open) {
      //   return;
      // }

      if (!this.props.onDropdownVisibleChange(open, {
        documentClickClose: documentClickClose
      })) {
        return;
      }

      this.setState({
        open: open
      }, function () {
        if (needFocus || open) {
          // Input dom init after first time component render
          // Add delay for this to get focus
          Promise.resolve().then(function () {
            if (open || (0, _util.isMultiple)(props)) {
              var input = _this4.getInputDOMNode();

              if (input && document.activeElement !== input) {
                input.focus();
              }
            } else if (_this4.selection) {
              _this4.selection.focus();
            }
          });
        }
      });
    }
  }, {
    key: "clearSearchInput",
    value: function clearSearchInput() {
      this.getInputDOMNode().focus();

      if (!('inputValue' in this.props)) {
        this.setState({
          inputValue: (0, _isEmpty["default"])(this.props.searchValue) ? '' : (0, _isEmpty["default"])(this.props.searchValue)
        });
      }
    }
  }, {
    key: "addLabelToValue",
    value: function addLabelToValue(props, value_) {
      var _this5 = this;

      var value = value_;

      if (this.isLabelInValue()) {
        value.forEach(function (v, i) {
          if (Object.prototype.toString.call(value[i]) !== '[object Object]') {
            value[i] = {
              value: '',
              label: ''
            };
            return;
          }

          v.label = v.label || _this5.getLabelFromProps(props, v.value);
        });
      } else {
        value = value.map(function (v) {
          return {
            value: v,
            label: _this5.getLabelFromProps(props, v)
          };
        });
      }

      return value;
    }
  }, {
    key: "clearDelayTimer",
    value: function clearDelayTimer() {
      if (this.delayTimer) {
        clearTimeout(this.delayTimer);
        this.delayTimer = null;
      }
    }
    /**
     * 移除select值
     * @param {*} selectedVal
     */

  }, {
    key: "removeSelected",
    value: function removeSelected(selectedVal) {
      var props = this.props;

      if (props.disabled) {
        return;
      }

      this._cacheTreeNodesStates = 'no';

      if (props.treeCheckable && (props.showCheckedStrategy === _strategies.SHOW_ALL || props.showCheckedStrategy === _strategies.SHOW_PARENT) && !(props.treeCheckStrictly || this.state.inputValue)) {
        this.getDeselectedValue(selectedVal);
        return;
      } // click the node's `x`(in select box), likely trigger the TreeNode's `unCheck` event,
      // cautiously, they are completely different, think about it, the tree may not render at first,
      // but the nodes in select box are ready.


      var label;
      var value = this.state.value.filter(function (singleValue) {
        if (singleValue.value === selectedVal) {
          label = singleValue.label;
        }

        return singleValue.value !== selectedVal;
      });
      var canMultiple = (0, _util.isMultiple)(props);

      if (canMultiple) {
        var event = selectedVal;

        if (this.isLabelInValue()) {
          event = {
            value: selectedVal,
            label: label
          };
        }

        props.onDeselect(event);
      }

      if (props.treeCheckable) {
        if (this.checkedTreeNodes && this.checkedTreeNodes.length) {
          this.checkedTreeNodes = this._checkedNodes = this.checkedTreeNodes.filter(function (item) {
            return value.some(function (i) {
              return i.value === item.node.props.value;
            });
          });
        }
      }

      this.fireChange(value, {
        triggerValue: selectedVal,
        clear: true
      });
    }
  }, {
    key: "openIfHasChildren",
    value: function openIfHasChildren() {
      var props = this.props;

      if (_react.Children.count(props.children) || !(0, _util.isMultiple)(props)) {
        this.setOpenState(true);
      }
    }
  }, {
    key: "fireChange",
    value: function fireChange(value) {
      var _this6 = this;

      var extraInfo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var props = this.props;
      var vals = value.map(function (i) {
        return i.value;
      });
      var sv = this.state.value.map(function (i) {
        return i.value;
      });

      if (vals.length !== sv.length || !vals.every(function (val, index) {
        return sv[index] === val;
      })) {
        var ex = (0, _objectSpread2["default"])({
          preValue: (0, _toConsumableArray2["default"])(this.state.value)
        }, extraInfo);
        var labs = null;
        var vls = value;

        if (!this.isLabelInValue()) {
          labs = value.map(function (i) {
            return i.label;
          });
          vls = vls.map(function (v) {
            return v.value;
          });
        } else if (this.halfCheckedValues && this.halfCheckedValues.length) {
          this.halfCheckedValues.forEach(function (i) {
            if (!vls.some(function (v) {
              return v.value === i.value;
            })) {
              vls.push(i);
            }
          });
        }

        if (props.treeCheckable && ex.clear) {
          var treeData = this.renderedTreeData || props.children;
          ex.allCheckedNodes = (0, _util.flatToHierarchy)((0, _util.filterAllCheckedData)(vals, treeData));
        }

        if (props.treeCheckable && this.state.inputValue) {
          var _vls = (0, _toConsumableArray2["default"])(this.state.value);

          if (ex.checked) {
            value.forEach(function (i) {
              if (_vls.every(function (ii) {
                return ii.value !== i.value;
              })) {
                _vls.push((0, _objectSpread2["default"])({}, i));
              }
            });
          } else {
            var index;

            var includeVal = _vls.some(function (i, ind) {
              if (i.value === ex.triggerValue) {
                index = ind;
                return true;
              }
            });

            if (includeVal) {
              _vls.splice(index, 1);
            }
          }

          vls = _vls;

          if (!this.isLabelInValue()) {
            labs = _vls.map(function (v) {
              return v.label;
            });
            vls = _vls.map(function (v) {
              return v.value;
            });
          }
        }

        this._savedValue = (0, _util.isMultiple)(props) ? vls : vls[0];
        props.onChange(this._savedValue, labs, ex);

        if (!('value' in props)) {
          this._cacheTreeNodesStates = false;
          this.setState({
            value: this.getValue(props, (0, _util.toArray)(this._savedValue).map(function (v, i) {
              return _this6.isLabelInValue() ? v : {
                value: v,
                label: labs && labs[i]
              };
            }))
          });
        }
      }
    }
  }, {
    key: "isLabelInValue",
    value: function isLabelInValue() {
      var _this$props3 = this.props,
          treeCheckable = _this$props3.treeCheckable,
          treeCheckStrictly = _this$props3.treeCheckStrictly,
          labelInValue = _this$props3.labelInValue;

      if (treeCheckable && treeCheckStrictly) {
        return true;
      }

      return labelInValue || false;
    }
  }, {
    key: "focus",
    value: function focus() {
      if (!(0, _util.isMultiple)(this.props)) {
        this.selection.focus();
      } else {
        this.getInputDOMNode().focus();
      }
    }
  }, {
    key: "blur",
    value: function blur() {
      if (!(0, _util.isMultiple)(this.props)) {
        this.selection.blur();
      } else {
        this.getInputDOMNode().blur();
      }
    }
  }, {
    key: "renderClear",
    value: function renderClear() {
      var _this$props4 = this.props,
          prefixCls = _this$props4.prefixCls,
          allowClear = _this$props4.allowClear;
      var _this$state = this.state,
          value = _this$state.value,
          inputValue = _this$state.inputValue;

      var clear = _react["default"].createElement(_Button["default"], (0, _extends2["default"])({
        key: "clear",
        className: "".concat(prefixCls, "-clear"),
        style: _util.UNSELECTABLE_STYLE
      }, _util.UNSELECTABLE_ATTRIBUTE, {
        shape: "circle",
        icon: "close",
        size: "small",
        onClick: this.onClearSelection,
        onMouseDown: _util.preventDefaultEvent
      }));

      if (!allowClear) {
        return null;
      }

      if (inputValue || value.length) {
        return clear;
      }

      return null;
    }
  }, {
    key: "renderTopControlNode",
    value: function renderTopControlNode() {
      var _this7 = this;

      var value = this.state.value;
      var props = this.props;
      var labelInValue = props.labelInValue,
          choiceTransitionName = props.choiceTransitionName,
          prefixCls = props.prefixCls,
          maxTagTextLength = props.maxTagTextLength,
          maxTagCount = props.maxTagCount,
          maxTagPlaceholder = props.maxTagPlaceholder,
          choiceRender = props.choiceRender;
      var multiple = (0, _util.isMultiple)(props); // single and not combobox, input is inside dropdown

      if (!multiple) {
        var singleValue = value && value[0];

        var _ref = singleValue || {},
            label = _ref.label;

        var innerNode = _react["default"].createElement("span", {
          key: "value",
          title: label,
          className: "".concat(prefixCls, "-selection-selected-value")
        }, choiceRender ? choiceRender(label) : label);

        return _react["default"].createElement("div", {
          className: "".concat(prefixCls, "-selection__rendered")
        }, this.getPlaceholderElement(), innerNode, this.renderClear(), multiple || !props.showArrow ? null : _react["default"].createElement("span", (0, _extends2["default"])({
          key: "arrow",
          className: "".concat(prefixCls, "-arrow"),
          style: _util.UNSELECTABLE_STYLE
        }, _util.UNSELECTABLE_ATTRIBUTE, {
          onClick: this.onArrowClick
        }), _react["default"].createElement("i", {
          className: "icon icon-arrow_drop_down"
        }), _react["default"].createElement("b", null)));
      } // Check if `maxTagCount` is set


      var myValueList = value;

      if (maxTagCount >= 0) {
        myValueList = value.slice(0, maxTagCount);
      }

      var selectedValueNodes = myValueList.map(function (singleValue) {
        var content = singleValue.label;
        var title = content;

        if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {
          content = "".concat(content.slice(0, maxTagTextLength), "...");
        }

        return _react["default"].createElement("li", (0, _extends2["default"])({
          style: _util.UNSELECTABLE_STYLE
        }, _util.UNSELECTABLE_ATTRIBUTE, {
          onMouseDown: _util.preventDefaultEvent,
          className: "".concat(prefixCls, "-selection__choice"),
          key: singleValue.value,
          title: title
        }), _react["default"].createElement("span", {
          className: "".concat(prefixCls, "-selection__choice__remove"),
          onClick: _this7.removeSelected.bind(_this7, singleValue.value)
        }, _react["default"].createElement("i", {
          className: "icon icon-cancel"
        })), _react["default"].createElement("span", {
          className: "".concat(prefixCls, "-selection__choice__content")
        }, content));
      });

      if (maxTagCount >= 0 && maxTagCount < value.length) {
        var content = "+ ".concat(value.length - maxTagCount, " ...");

        if (typeof maxTagPlaceholder === 'string') {
          content = maxTagPlaceholder;
        } else if (typeof maxTagPlaceholder === 'function') {
          var restValueList = value.slice(maxTagCount);
          content = maxTagPlaceholder(labelInValue ? restValueList : restValueList.map(function (_ref2) {
            var value = _ref2.value;
            return value;
          }));
        }

        var restNodeSelect = _react["default"].createElement("li", (0, _extends2["default"])({
          style: _util.UNSELECTABLE_STYLE
        }, _util.UNSELECTABLE_ATTRIBUTE, {
          onMouseDown: _util.preventDefaultEvent,
          className: "".concat(prefixCls, "-selection__choice"),
          key: "rc-tree-select-internal-max-tag-counter",
          title: content
        }), _react["default"].createElement("span", {
          className: "".concat(prefixCls, "-selection__choice__content")
        }, content));

        selectedValueNodes.push(restNodeSelect);
      }

      selectedValueNodes.push(_react["default"].createElement("li", {
        className: "".concat(prefixCls, "-search ").concat(prefixCls, "-search--inline"),
        key: "__input"
      }, this.getInputElement()));
      var className = "".concat(prefixCls, "-selection__rendered");

      if (choiceTransitionName) {
        return _react["default"].createElement("div", {
          className: className
        }, _react["default"].createElement(_animate["default"], {
          component: "ul",
          transitionName: choiceTransitionName,
          onLeave: this.onChoiceAnimationLeave
        }, selectedValueNodes));
      }

      return _react["default"].createElement("ul", {
        className: className
      }, selectedValueNodes);
    }
  }, {
    key: "renderTreeData",
    value: function renderTreeData(props) {
      var validProps = props || this.props;

      if (validProps.treeData) {
        if (props && props.treeData === this.props.treeData && this.renderedTreeData) {
          // cache and use pre data.
          this._cachetreeData = true;
          return this.renderedTreeData;
        }

        this._cachetreeData = false;
        var treeData = (0, _toConsumableArray2["default"])(validProps.treeData); // process treeDataSimpleMode

        if (validProps.treeDataSimpleMode) {
          var simpleFormat = {
            id: 'id',
            pId: 'pId',
            rootPId: null
          };

          if (Object.prototype.toString.call(validProps.treeDataSimpleMode) === '[object Object]') {
            simpleFormat = (0, _objectSpread2["default"])({}, simpleFormat, {}, validProps.treeDataSimpleMode);
          }

          treeData = (0, _util.processSimpleTreeData)(treeData, simpleFormat);
        }

        return loopTreeData(treeData, undefined, this.props.treeCheckable);
      }
    }
  }, {
    key: "getUnderLine",
    value: function getUnderLine() {
      var _this$props5 = this.props,
          prefixCls = _this$props5.prefixCls,
          className = _this$props5.className;

      if (className && className.includes("".concat(prefixCls, "-auto-complete"))) {
        return null;
      }

      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-underline")
      }, _react["default"].createElement("span", {
        className: "".concat(prefixCls, "-ripple")
      }));
    }
  }, {
    key: "render",
    value: function render() {
      var _rootCls;

      var props = this.props;
      var multiple = (0, _util.isMultiple)(props);
      var _this$state2 = this.state,
          open = _this$state2.open,
          focused = _this$state2.focused,
          inputValue = _this$state2.inputValue,
          value = _this$state2.value;
      var className = props.className,
          disabled = props.disabled,
          label = props.label,
          prefixCls = props.prefixCls;
      var ctrlNode = this.renderTopControlNode();
      var extraSelectionProps = {};

      if (!multiple) {
        extraSelectionProps = {
          onKeyDown: this.onKeyDown,
          tabIndex: 0
        };
      }

      var rootCls = (_rootCls = {}, (0, _defineProperty2["default"])(_rootCls, className, !!className), (0, _defineProperty2["default"])(_rootCls, prefixCls, 1), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-has-border"), 1), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-open"), open), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-focused"), open || focused), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-has-value"), inputValue || value.length && value[0]), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-has-label"), label), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-multiple"), multiple), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-disabled"), disabled), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-enabled"), !disabled), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-allow-clear"), !!props.allowClear), _rootCls);
      return _react["default"].createElement(_SelectTrigger["default"], (0, _extends2["default"])({}, props, {
        treeNodes: props.children,
        treeData: this.renderedTreeData,
        _cachetreeData: this._cachetreeData,
        _treeNodesStates: this._treeNodesStates,
        halfCheckedValues: this.halfCheckedValues,
        multiple: multiple,
        disabled: disabled,
        visible: open,
        inputValue: inputValue,
        inputElement: this.getInputElement(),
        value: value,
        onDropdownVisibleChange: this.onDropdownVisibleChange,
        getPopupContainer: props.getPopupContainer,
        onSelect: this.onSelect,
        ref: (0, _util.saveRef)(this, 'trigger')
      }), _react["default"].createElement("div", {
        style: props.style,
        onClick: props.onClick,
        className: (0, _classnames["default"])(rootCls),
        onBlur: props.onBlur,
        onFocus: props.onFocus
      }, _react["default"].createElement("div", (0, _extends2["default"])({
        ref: (0, _util.saveRef)(this, 'selection'),
        key: "selection",
        className: "".concat(prefixCls, "-selection\n            ").concat(prefixCls, "-selection--").concat(multiple ? 'multiple' : 'single'),
        role: "combobox",
        "aria-autocomplete": "list",
        "aria-haspopup": "true",
        "aria-expanded": open
      }, extraSelectionProps), ctrlNode, multiple ? this.getSearchPlaceholderElement(!!inputValue || value.length) : null), this.getUnderLine()));
    }
  }]);
  return Select;
}(_react.Component);

exports["default"] = Select;
(0, _defineProperty2["default"])(Select, "propTypes", _PropTypes.SelectPropTypes);
(0, _defineProperty2["default"])(Select, "defaultProps", {
  prefixCls: 'rc-tree-select',
  filterTreeNode: filterFn,
  showSearch: true,
  allowClear: false,
  placeholder: '',
  searchPlaceholder: '',
  labelInValue: false,
  onClick: _noop["default"],
  onChange: _noop["default"],
  onSelect: _noop["default"],
  onDeselect: _noop["default"],
  onSearch: _noop["default"],
  showArrow: true,
  dropdownMatchSelectWidth: true,
  dropdownStyle: {},
  autoClearSearchValue: true,
  onDropdownVisibleChange: function onDropdownVisibleChange() {
    return true;
  },
  optionLabelProp: 'value',
  notFoundContent: 'Not Found',
  showCheckedStrategy: _strategies.SHOW_CHILD,
  // skipHandleInitValue: false, // Deprecated (use treeCheckStrictly)
  treeCheckStrictly: false,
  treeIcon: false,
  treeLine: false,
  treeDataSimpleMode: false,
  treeDefaultExpandAll: false,
  treeCheckable: false,
  treeNodeFilterProp: 'value',
  treeNodeLabelProp: 'title',
  searchValue: ''
});
(0, _defineProperty2["default"])(Select, "SHOW_ALL", _strategies.SHOW_ALL);
(0, _defineProperty2["default"])(Select, "SHOW_PARENT", _strategies.SHOW_PARENT);
(0, _defineProperty2["default"])(Select, "SHOW_CHILD", _strategies.SHOW_CHILD);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlbGVjdC5qc3giXSwibmFtZXMiOlsiZmlsdGVyRm4iLCJpbnB1dCIsImNoaWxkIiwiU3RyaW5nIiwicHJvcHMiLCJ0cmVlTm9kZUZpbHRlclByb3AiLCJpbmRleE9mIiwibG9vcFRyZWVEYXRhIiwiZGF0YSIsImxldmVsIiwidHJlZUNoZWNrYWJsZSIsIm1hcCIsIml0ZW0iLCJpbmRleCIsInBvcyIsImxhYmVsIiwidmFsdWUiLCJkaXNhYmxlZCIsImtleSIsImhhc093blByb3BlcnR5Iiwic2VsZWN0YWJsZSIsImNoaWxkcmVuIiwiaXNMZWFmIiwib3RoZXJQcm9wcyIsInRpdGxlIiwicmV0IiwibGVuZ3RoIiwiU2VsZWN0IiwiZXZlbnQiLCJ2YWwiLCJ0YXJnZXQiLCJzZXRTdGF0ZSIsImlucHV0VmFsdWUiLCJzZWFyY2hWYWx1ZSIsIm9wZW4iLCJnZXRWYWx1ZSIsInN0YXRlIiwib25TZWFyY2giLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJnZXRJbnB1dERPTU5vZGUiLCJzZXRUaW1lb3V0Iiwic2V0T3BlblN0YXRlIiwidW5kZWZpbmVkIiwia2V5Q29kZSIsIm9uSW5wdXRLZXlEb3duIiwiS2V5Q29kZSIsIkVOVEVSIiwiRE9XTiIsInByZXZlbnREZWZhdWx0IiwiQkFDS1NQQUNFIiwiY29uY2F0IiwicG9wVmFsdWUiLCJwb3AiLCJyZW1vdmVTZWxlY3RlZCIsImlzTGFiZWxJblZhbHVlIiwib3BlbklmSGFzQ2hpbGRyZW4iLCJzdG9wUHJvcGFnYXRpb24iLCJFU0MiLCJzZWxlY3RlZEtleXMiLCJpbmZvIiwibm9kZSIsInNlbGVjdGVkVmFsdWUiLCJzZWxlY3RlZExhYmVsIiwiZ2V0TGFiZWxGcm9tTm9kZSIsImNoZWNrYWJsZVNlbGVjdCIsInNlbGVjdGVkIiwib25EZXNlbGVjdCIsIm9uU2VsZWN0IiwiY2hlY2tFdnQiLCJjbGVhclNlYXJjaElucHV0IiwiZ2V0Q2hlY2tlZE5vZGVzIiwibiIsInNvbWUiLCJpIiwiZXh0cmFJbmZvIiwidHJpZ2dlclZhbHVlIiwidHJpZ2dlck5vZGUiLCJjaGVja2VkIiwiYWxsQ2hlY2tlZE5vZGVzIiwidHJlZUNoZWNrU3RyaWN0bHkiLCJjaGVja2VkTm9kZXMiLCJjaGVja2VkTm9kZXNQb3NpdGlvbnMiLCJfY2hlY2tlZE5vZGVzIiwiX3RyZWUiLCJ0cmlnZ2VyIiwicG9wdXBFbGUiLCJfdHJlZU5vZGVzU3RhdGVzIiwiY2hlY2tLZXlzIiwiZmlyZUNoYW5nZSIsImF1dG9DbGVhclNlYXJjaFZhbHVlIiwiZm9jdXMiLCJfY2FjaGVUcmVlTm9kZXNTdGF0ZXMiLCJmb3JjZVBvcHVwQWxpZ24iLCJlIiwib25Ecm9wZG93blZpc2libGVDaGFuZ2UiLCJwbGFjZWhvbGRlciIsInByZWZpeENscyIsImRlZmF1bHRWYWx1ZSIsInJlbmRlcmVkVHJlZURhdGEiLCJyZW5kZXJUcmVlRGF0YSIsImFkZExhYmVsVG9WYWx1ZSIsImRlZmF1bHRPcGVuIiwiZm9jdXNlZCIsImF1dG9Gb2N1cyIsImlucHV0Tm9kZSIsInN0eWxlIiwid2lkdGgiLCJpbnB1dE1pcnJvckluc3RhbmNlIiwiY2xpZW50V2lkdGgiLCJuZXh0UHJvcHMiLCJfc2F2ZWRWYWx1ZSIsInRyZWVEYXRhIiwiY2xlYXJEZWxheVRpbWVyIiwiZHJvcGRvd25Db250YWluZXIiLCJib2R5IiwicmVtb3ZlQ2hpbGQiLCJ0cmVlTm9kZUxhYmVsUHJvcCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImhpZGRlbiIsInNlYXJjaFBsYWNlaG9sZGVyIiwiZGlzcGxheSIsIm9uUGxhY2Vob2xkZXJDbGljayIsIm9uSW5wdXRDaGFuZ2UiLCJnZXRTZWFyY2hQbGFjZWhvbGRlckVsZW1lbnQiLCJpbnB1dEluc3RhbmNlIiwiZ2V0UG9wdXBET01Ob2RlIiwiZ2V0UG9wdXBFbGVSZWZzIiwiX3Byb3BzIiwiaW5pdCIsIl9zdHJpY3QiLCJoYWxmQ2hlY2tlZFZhbHVlcyIsImZvckVhY2giLCJoYWxmQ2hlY2tlZCIsInB1c2giLCJjaGVja2VkVHJlZU5vZGVzIiwiX2NhY2hldHJlZURhdGEiLCJtYXBMYWJWYWwiLCJhcnIiLCJpdGVtT2JqIiwiY2hlY2tlZFZhbHVlcyIsInNob3dDaGVja2VkU3RyYXRlZ3kiLCJTSE9XX0FMTCIsIlNIT1dfUEFSRU5UIiwicG9zQXJyIiwiZmlsdGVyIiwiY2hlY2tOb2RlUHJvcHMiLCJ1bkNoZWNrUG9zIiwibmV3VmFscyIsIm5ld0NrVG5zIiwibnYiLCJjbGVhciIsIm5lZWRGb2N1cyIsImRvY3VtZW50Q2xpY2tDbG9zZSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsInNlbGVjdGlvbiIsInZhbHVlXyIsInYiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJnZXRMYWJlbEZyb21Qcm9wcyIsImRlbGF5VGltZXIiLCJjbGVhclRpbWVvdXQiLCJzZWxlY3RlZFZhbCIsImdldERlc2VsZWN0ZWRWYWx1ZSIsInNpbmdsZVZhbHVlIiwiY2FuTXVsdGlwbGUiLCJDaGlsZHJlbiIsImNvdW50IiwidmFscyIsInN2IiwiZXZlcnkiLCJleCIsInByZVZhbHVlIiwibGFicyIsInZscyIsIl92bHMiLCJpaSIsImluY2x1ZGVWYWwiLCJpbmQiLCJzcGxpY2UiLCJvbkNoYW5nZSIsImxhYmVsSW5WYWx1ZSIsImJsdXIiLCJhbGxvd0NsZWFyIiwiVU5TRUxFQ1RBQkxFX1NUWUxFIiwiVU5TRUxFQ1RBQkxFX0FUVFJJQlVURSIsIm9uQ2xlYXJTZWxlY3Rpb24iLCJwcmV2ZW50RGVmYXVsdEV2ZW50IiwiY2hvaWNlVHJhbnNpdGlvbk5hbWUiLCJtYXhUYWdUZXh0TGVuZ3RoIiwibWF4VGFnQ291bnQiLCJtYXhUYWdQbGFjZWhvbGRlciIsImNob2ljZVJlbmRlciIsIm11bHRpcGxlIiwiaW5uZXJOb2RlIiwiZ2V0UGxhY2Vob2xkZXJFbGVtZW50IiwicmVuZGVyQ2xlYXIiLCJzaG93QXJyb3ciLCJvbkFycm93Q2xpY2siLCJteVZhbHVlTGlzdCIsInNsaWNlIiwic2VsZWN0ZWRWYWx1ZU5vZGVzIiwiY29udGVudCIsImJpbmQiLCJyZXN0VmFsdWVMaXN0IiwicmVzdE5vZGVTZWxlY3QiLCJnZXRJbnB1dEVsZW1lbnQiLCJjbGFzc05hbWUiLCJvbkNob2ljZUFuaW1hdGlvbkxlYXZlIiwidmFsaWRQcm9wcyIsInRyZWVEYXRhU2ltcGxlTW9kZSIsInNpbXBsZUZvcm1hdCIsImlkIiwicElkIiwicm9vdFBJZCIsImluY2x1ZGVzIiwiY3RybE5vZGUiLCJyZW5kZXJUb3BDb250cm9sTm9kZSIsImV4dHJhU2VsZWN0aW9uUHJvcHMiLCJvbktleURvd24iLCJ0YWJJbmRleCIsInJvb3RDbHMiLCJnZXRQb3B1cENvbnRhaW5lciIsIm9uQ2xpY2siLCJvbkJsdXIiLCJvbkZvY3VzIiwiZ2V0VW5kZXJMaW5lIiwiQ29tcG9uZW50IiwiU2VsZWN0UHJvcFR5cGVzIiwiZmlsdGVyVHJlZU5vZGUiLCJzaG93U2VhcmNoIiwibm9vcCIsImRyb3Bkb3duTWF0Y2hTZWxlY3RXaWR0aCIsImRyb3Bkb3duU3R5bGUiLCJvcHRpb25MYWJlbFByb3AiLCJub3RGb3VuZENvbnRlbnQiLCJTSE9XX0NISUxEIiwidHJlZUljb24iLCJ0cmVlTGluZSIsInRyZWVEZWZhdWx0RXhwYW5kQWxsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFrQkE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxTQUFTQSxRQUFULENBQWtCQyxLQUFsQixFQUF5QkMsS0FBekIsRUFBZ0M7QUFDOUIsU0FDRUMsTUFBTSxDQUFDLHdCQUFhRCxLQUFiLEVBQW9CLDJCQUFnQixLQUFLRSxLQUFMLENBQVdDLGtCQUEzQixDQUFwQixDQUFELENBQU4sQ0FBNEVDLE9BQTVFLENBQW9GTCxLQUFwRixJQUE2RixDQUFDLENBRGhHO0FBR0Q7O0FBRUQsU0FBU00sWUFBVCxDQUFzQkMsSUFBdEIs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O2lDQUhITixNLGNBc0NEb0gsb0I7aUNBdENDcEgsTSxpQkF1Q0VxSCx1QjtpQ0F2Q0ZySCxNLGdCQXdDQ3VOLHNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENoaWxkcmVuLCBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1bm1vdW50Q29tcG9uZW50QXROb2RlIH0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG5vb3AgZnJvbSAnbG9kYXNoL25vb3AnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vLi4vX3V0aWwvS2V5Q29kZSc7XG5pbXBvcnQgQW5pbWF0ZSBmcm9tICcuLi8uLi9hbmltYXRlJztcbmltcG9ydCB7XG4gIGZpbHRlckFsbENoZWNrZWREYXRhLFxuICBmaWx0ZXJQYXJlbnRQb3NpdGlvbixcbiAgZmxhdFRvSGllcmFyY2h5LFxuICBnZXRQcm9wVmFsdWUsXG4gIGdldFRyZWVOb2Rlc1N0YXRlcyxcbiAgZ2V0VmFsdWVQcm9wVmFsdWUsXG4gIGlzTXVsdGlwbGUsXG4gIGlzUG9zaXRpb25QcmVmaXgsXG4gIGxhYmVsQ29tcGF0aWJsZSxcbiAgbG9vcEFsbENoaWxkcmVuLFxuICBwcmV2ZW50RGVmYXVsdEV2ZW50LFxuICBwcm9jZXNzU2ltcGxlVHJlZURhdGEsXG4gIHNhdmVSZWYsXG4gIHRvQXJyYXksXG4gIFVOU0VMRUNUQUJMRV9BVFRSSUJVVEUsXG4gIFVOU0VMRUNUQUJMRV9TVFlMRSxcbn0gZnJvbSAnLi91dGlsJztcbmltcG9ydCBTZWxlY3RUcmlnZ2VyIGZyb20gJy4vU2VsZWN0VHJpZ2dlcic7XG5pbXBvcnQgX1RyZWVOb2RlIGZyb20gJy4vVHJlZU5vZGUnO1xuaW1wb3J0IHsgU0hPV19BTEwsIFNIT1dfQ0hJTEQsIFNIT1dfUEFSRU5UIH0gZnJvbSAnLi9zdHJhdGVnaWVzJztcbmltcG9ydCB7IFNlbGVjdFByb3BUeXBlcyB9IGZyb20gJy4vUHJvcFR5cGVzJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vYnV0dG9uL0J1dHRvbic7XG5pbXBvcnQgeyBnZXRMYWJlbEZyb21Qcm9wc1ZhbHVlLCBnZXRNYXBLZXkgfSBmcm9tICcuLi9zZWxlY3QvdXRpbCc7XG5pbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7XG5cbmZ1bmN0aW9uIGZpbHRlckZuKGlucHV0LCBjaGlsZCkge1xuICByZXR1cm4gKFxuICAgIFN0cmluZyhnZXRQcm9wVmFsdWUoY2hpbGQsIGxhYmVsQ29tcGF0aWJsZSh0aGlzLnByb3BzLnRyZWVOb2RlRmlsdGVyUHJvcCkpKS5pbmRleE9mKGlucHV0KSA+IC0xXG4gICk7XG59XG5cbmZ1bmN0aW9uIGxvb3BUcmVlRGF0YShkYXRhLCBsZXZlbCA9IDAsIHRyZWVDaGVja2FibGUpIHtcbiAgcmV0dXJuIGRhdGEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHBvcyA9IGAke2xldmVsfS0ke2luZGV4fWA7XG4gICAgY29uc3Qge1xuICAgICAgbGFiZWwsXG4gICAgICB2YWx1ZSxcbiAgICAgIGRpc2FibGVkLFxuICAgICAga2V5LFxuICAgICAgaGFzT3duUHJvcGVydHksXG4gICAgICBzZWxlY3RhYmxlLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBpc0xlYWYsXG4gICAgICAuLi5vdGhlclByb3BzXG4gICAgfSA9IGl0ZW07XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICB2YWx1ZSxcbiAgICAgIHRpdGxlOiBsYWJlbCxcbiAgICAgIC8vIHZhbHVlOiB2YWx1ZSB8fCBTdHJpbmcoa2V5IHx8IGxhYmVsKSwgLy8gY2F1c2Ugb25DaGFuZ2UgY2FsbGJhY2sgZXJyb3JcbiAgICAgIGtleToga2V5IHx8IHZhbHVlIHx8IHBvcyxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBmYWxzZSxcbiAgICAgIHNlbGVjdGFibGU6IHNlbGVjdGFibGUgPT09IGZhbHNlID8gc2VsZWN0YWJsZSA6ICF0cmVlQ2hlY2thYmxlLFxuICAgICAgLi4ub3RoZXJQcm9wcyxcbiAgICB9O1xuICAgIGxldCByZXQ7XG4gICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgcmV0ID0gPF9UcmVlTm9kZSB7Li4ucHJvcHN9Pntsb29wVHJlZURhdGEoY2hpbGRyZW4sIHBvcywgdHJlZUNoZWNrYWJsZSl9PC9fVHJlZU5vZGU+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXQgPSA8X1RyZWVOb2RlIHsuLi5wcm9wc30gaXNMZWFmPXtpc0xlYWZ9IC8+O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IFNlbGVjdFByb3BUeXBlcztcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIHByZWZpeENsczogJ3JjLXRyZWUtc2VsZWN0JyxcbiAgICBmaWx0ZXJUcmVlTm9kZTogZmlsdGVyRm4sXG4gICAgc2hvd1NlYXJjaDogdHJ1ZSxcbiAgICBhbGxvd0NsZWFyOiBmYWxzZSxcbiAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgc2VhcmNoUGxhY2Vob2xkZXI6ICcnLFxuICAgIGxhYmVsSW5WYWx1ZTogZmFsc2UsXG4gICAgb25DbGljazogbm9vcCxcbiAgICBvbkNoYW5nZTogbm9vcCxcbiAgICBvblNlbGVjdDogbm9vcCxcbiAgICBvbkRlc2VsZWN0OiBub29wLFxuICAgIG9uU2VhcmNoOiBub29wLFxuICAgIHNob3dBcnJvdzogdHJ1ZSxcbiAgICBkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGg6IHRydWUsXG4gICAgZHJvcGRvd25TdHlsZToge30sXG4gICAgYXV0b0NsZWFyU2VhcmNoVmFsdWU6IHRydWUsXG4gICAgb25Ecm9wZG93blZpc2libGVDaGFuZ2U6ICgpID0+IHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgb3B0aW9uTGFiZWxQcm9wOiAndmFsdWUnLFxuICAgIG5vdEZvdW5kQ29udGVudDogJ05vdCBGb3VuZCcsXG4gICAgc2hvd0NoZWNrZWRTdHJhdGVneTogU0hPV19DSElMRCxcbiAgICAvLyBza2lwSGFuZGxlSW5pdFZhbHVlOiBmYWxzZSwgLy8gRGVwcmVjYXRlZCAodXNlIHRyZWVDaGVja1N0cmljdGx5KVxuICAgIHRyZWVDaGVja1N0cmljdGx5OiBmYWxzZSxcbiAgICB0cmVlSWNvbjogZmFsc2UsXG4gICAgdHJlZUxpbmU6IGZhbHNlLFxuICAgIHRyZWVEYXRhU2ltcGxlTW9kZTogZmFsc2UsXG4gICAgdHJlZURlZmF1bHRFeHBhbmRBbGw6IGZhbHNlLFxuICAgIHRyZWVDaGVja2FibGU6IGZhbHNlLFxuICAgIHRyZWVOb2RlRmlsdGVyUHJvcDogJ3ZhbHVlJyxcbiAgICB0cmVlTm9kZUxhYmVsUHJvcDogJ3RpdGxlJyxcbiAgICBzZWFyY2hWYWx1ZTonJyxcbiAgfTtcblxuICBzdGF0aWMgU0hPV19BTEwgPSBTSE9XX0FMTDtcbiAgc3RhdGljIFNIT1dfUEFSRU5UID0gU0hPV19QQVJFTlQ7XG4gIHN0YXRpYyBTSE9XX0NISUxEID0gU0hPV19DSElMRDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBsZXQgdmFsdWUgPSBbXTtcbiAgICBpZiAoJ3ZhbHVlJyBpbiBwcm9wcykge1xuICAgICAgdmFsdWUgPSB0b0FycmF5KHByb3BzLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSB0b0FycmF5KHByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuICAgIC8vIHNhdmUgcGFyc2VkIHRyZWVEYXRhLCBmb3IgcGVyZm9ybWFuY2UgKHRyZWVEYXRhIG1heSBiZSB2ZXJ5IGJpZylcbiAgICB0aGlzLnJlbmRlcmVkVHJlZURhdGEgPSB0aGlzLnJlbmRlclRyZWVEYXRhKCk7XG4gICAgdmFsdWUgPSB0aGlzLmFkZExhYmVsVG9WYWx1ZShwcm9wcywgdmFsdWUpO1xuICAgIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShwcm9wcywgdmFsdWUsIHByb3BzLmlucHV0VmFsdWUgPyAnX19zdHJpY3QnIDogdHJ1ZSk7XG4gICAgbGV0IGlucHV0VmFsdWUgPSBwcm9wcy5pbnB1dFZhbHVlIHx8ICcnO1xuICAgIGlmICghaXNFbXB0eShwcm9wcy5zZWFyY2hWYWx1ZSkpIHtcbiAgICAgIGlucHV0VmFsdWUgPSBTdHJpbmcocHJvcHMuc2VhcmNoVmFsdWUpXG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB2YWx1ZSxcbiAgICAgIGlucHV0VmFsdWUsXG4gICAgICBvcGVuOiBwcm9wcy5vcGVuIHx8IHByb3BzLmRlZmF1bHRPcGVuLFxuICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgYXV0b0ZvY3VzLCBkaXNhYmxlZCB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoaXNNdWx0aXBsZSh0aGlzLnByb3BzKSkge1xuICAgICAgY29uc3QgaW5wdXROb2RlID0gdGhpcy5nZXRJbnB1dERPTU5vZGUoKTtcbiAgICAgIGlmIChpbnB1dE5vZGUudmFsdWUpIHtcbiAgICAgICAgaW5wdXROb2RlLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgIGlucHV0Tm9kZS5zdHlsZS53aWR0aCA9IGAke3RoaXMuaW5wdXRNaXJyb3JJbnN0YW5jZS5jbGllbnRXaWR0aH1weGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dE5vZGUuc3R5bGUud2lkdGggPSAnJztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGF1dG9Gb2N1cyAmJiAhZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIC8vIHNhdmUgcGFyc2VkIHRyZWVEYXRhLCBmb3IgcGVyZm9ybWFuY2UgKHRyZWVEYXRhIG1heSBiZSB2ZXJ5IGJpZylcbiAgICB0aGlzLnJlbmRlcmVkVHJlZURhdGEgPSB0aGlzLnJlbmRlclRyZWVEYXRhKG5leHRQcm9wcyk7XG4gICAgLy8gRGV0ZWN0aW5nIHdoZXRoZXIgdGhlIG9iamVjdCBvZiBgb25DaGFuZ2VgJ3MgYXJndW1lbnQgIGlzIG9sZCByZWYuXG4gICAgLy8gQmV0dGVyIHRvIGRvIGEgZGVlcCBlcXVhbCBsYXRlci5cbiAgICB0aGlzLl9jYWNoZVRyZWVOb2Rlc1N0YXRlcyA9XG4gICAgICB0aGlzLl9jYWNoZVRyZWVOb2Rlc1N0YXRlcyAhPT0gJ25vJyAmJlxuICAgICAgdGhpcy5fc2F2ZWRWYWx1ZSAmJlxuICAgICAgbmV4dFByb3BzLnZhbHVlID09PSB0aGlzLl9zYXZlZFZhbHVlO1xuICAgIGlmICh0aGlzLnByb3BzLnRyZWVEYXRhICE9PSBuZXh0UHJvcHMudHJlZURhdGEgfHwgdGhpcy5wcm9wcy5jaGlsZHJlbiAhPT0gbmV4dFByb3BzLmNoaWxkcmVuKSB7XG4gICAgICAvLyByZWZyZXNoIHRoaXMuX3RyZWVOb2Rlc1N0YXRlcyBjYWNoZVxuICAgICAgdGhpcy5fdHJlZU5vZGVzU3RhdGVzID0gZ2V0VHJlZU5vZGVzU3RhdGVzKFxuICAgICAgICB0aGlzLnJlbmRlcmVkVHJlZURhdGEgfHwgbmV4dFByb3BzLmNoaWxkcmVuLFxuICAgICAgICB0aGlzLnN0YXRlLnZhbHVlLm1hcChpdGVtID0+IGl0ZW0udmFsdWUpLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCd2YWx1ZScgaW4gbmV4dFByb3BzKSB7XG4gICAgICBsZXQgdmFsdWUgPSB0b0FycmF5KG5leHRQcm9wcy52YWx1ZSk7XG4gICAgICB2YWx1ZSA9IHRoaXMuYWRkTGFiZWxUb1ZhbHVlKG5leHRQcm9wcywgdmFsdWUpO1xuICAgICAgdmFsdWUgPSB0aGlzLmdldFZhbHVlKG5leHRQcm9wcywgdmFsdWUpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHZhbHVlLFxuICAgICAgfSk7XG4gICAgICBpZiAobmV4dFByb3BzLnNlYXJjaFZhbHVlICE9PSB0aGlzLnByb3BzLnNlYXJjaFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIGlucHV0VmFsdWU6IFN0cmluZyhuZXh0UHJvcHMuc2VhcmNoVmFsdWUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZihpc0VtcHR5KHRoaXMucHJvcHMuc2VhcmNoVmFsdWUpKXtcbiAgICAgIGlmIChuZXh0UHJvcHMuaW5wdXRWYWx1ZSAhPT0gdGhpcy5wcm9wcy5pbnB1dFZhbHVlICkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBpbnB1dFZhbHVlOiBuZXh0UHJvcHMuaW5wdXRWYWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfWVsc2V7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaW5wdXRWYWx1ZTogdGhpcy5wcm9wcy5zZWFyY2hWYWx1ZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICgnb3BlbicgaW4gbmV4dFByb3BzKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgb3BlbjogbmV4dFByb3BzLm9wZW4sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcykge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX3NhdmVkVmFsdWUgJiZcbiAgICAgIG5leHRQcm9wcy52YWx1ZSAmJlxuICAgICAgbmV4dFByb3BzLnZhbHVlICE9PSB0aGlzLl9zYXZlZFZhbHVlICYmXG4gICAgICBuZXh0UHJvcHMudmFsdWUgPT09IHRoaXMucHJvcHMudmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuX2NhY2hlVHJlZU5vZGVzU3RhdGVzID0gZmFsc2U7XG4gICAgICB0aGlzLmdldFZhbHVlKG5leHRQcm9wcywgdGhpcy5hZGRMYWJlbFRvVmFsdWUobmV4dFByb3BzLCB0b0FycmF5KG5leHRQcm9wcy52YWx1ZSkpKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBpZiAoc3RhdGUub3BlbiAmJiBpc011bHRpcGxlKHByb3BzKSkge1xuICAgICAgY29uc3QgaW5wdXROb2RlID0gdGhpcy5nZXRJbnB1dERPTU5vZGUoKTtcbiAgICAgIGlmIChpbnB1dE5vZGUudmFsdWUpIHtcbiAgICAgICAgaW5wdXROb2RlLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICAgIGlucHV0Tm9kZS5zdHlsZS53aWR0aCA9IGAke3RoaXMuaW5wdXRNaXJyb3JJbnN0YW5jZS5jbGllbnRXaWR0aH1weGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dE5vZGUuc3R5bGUud2lkdGggPSAnJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuICAgIGlmICh0aGlzLmRyb3Bkb3duQ29udGFpbmVyKSB7XG4gICAgICB1bm1vdW50Q29tcG9uZW50QXROb2RlKHRoaXMuZHJvcGRvd25Db250YWluZXIpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmRyb3Bkb3duQ29udGFpbmVyKTtcbiAgICAgIHRoaXMuZHJvcGRvd25Db250YWluZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIG9uSW5wdXRDaGFuZ2UgPSBldmVudCA9PiB7XG4gICAgY29uc3QgdmFsID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgIGNvbnN0IHsgcHJvcHMgfSA9IHRoaXM7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBpbnB1dFZhbHVlOmlzRW1wdHkodGhpcy5wcm9wcy5zZWFyY2hWYWx1ZSk/IHZhbCA6dGhpcy5wcm9wcy5zZWFyY2hWYWx1ZSxcbiAgICAgIG9wZW46IHRydWUsXG4gICAgfSk7XG4gICAgaWYgKHByb3BzLnRyZWVDaGVja2FibGUgJiYgIXZhbCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHZhbHVlOiB0aGlzLmdldFZhbHVlKHByb3BzLCBbLi4udGhpcy5zdGF0ZS52YWx1ZV0sIGZhbHNlKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwcm9wcy5vblNlYXJjaCh2YWwpO1xuICB9O1xuXG4gIG9uRHJvcGRvd25WaXNpYmxlQ2hhbmdlID0gb3BlbiA9PiB7XG4gICAgLy8gc2VsZWN0aW9uIGluc2lkZSBjb21ib2JveCBjYXVzZSBjbGlja1xuICAgIGlmICghb3BlbiAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSB0aGlzLmdldElucHV0RE9NTm9kZSgpKSB7XG4gICAgICAvLyByZXR1cm47XG4gICAgfVxuICAgIC8vIHRoaXMuc2V0T3BlblN0YXRlKG9wZW4pO1xuICAgIC8vIHNldFRpbWVvdXQsIHRoZW4gaGF2ZSBhbmltYXRpb24uIHdoeT9cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuc2V0T3BlblN0YXRlKG9wZW4sIHVuZGVmaW5lZCwgIW9wZW4pO1xuICAgIH0sIDEwKTtcbiAgfTtcblxuICAvLyBjb21ib2JveCBpZ25vcmVcbiAgb25LZXlEb3duID0gZXZlbnQgPT4ge1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBpZiAocHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgaWYgKHRoaXMuc3RhdGUub3BlbiAmJiAhdGhpcy5nZXRJbnB1dERPTU5vZGUoKSkge1xuICAgICAgdGhpcy5vbklucHV0S2V5RG93bihldmVudCk7XG4gICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBLZXlDb2RlLkVOVEVSIHx8IGtleUNvZGUgPT09IEtleUNvZGUuRE9XTikge1xuICAgICAgdGhpcy5zZXRPcGVuU3RhdGUodHJ1ZSk7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfTtcblxuICBvbklucHV0S2V5RG93biA9IGV2ZW50ID0+IHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICBpZiAoaXNNdWx0aXBsZShwcm9wcykgJiYgIWV2ZW50LnRhcmdldC52YWx1ZSAmJiBrZXlDb2RlID09PSBLZXlDb2RlLkJBQ0tTUEFDRSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBzdGF0ZS52YWx1ZS5jb25jYXQoKTtcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcG9wVmFsdWUgPSB2YWx1ZS5wb3AoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZCh0aGlzLmlzTGFiZWxJblZhbHVlKCkgPyBwb3BWYWx1ZSA6IHBvcFZhbHVlLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuRE9XTikge1xuICAgICAgaWYgKCFzdGF0ZS5vcGVuKSB7XG4gICAgICAgIHRoaXMub3BlbklmSGFzQ2hpbGRyZW4oKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuRVNDKSB7XG4gICAgICBpZiAoc3RhdGUub3Blbikge1xuICAgICAgICB0aGlzLnNldE9wZW5TdGF0ZShmYWxzZSk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbiAgLyoqXG4gICAqIOmAieaLqeWAvFxuICAgKi9cbiAgb25TZWxlY3QgPSAoc2VsZWN0ZWRLZXlzLCBpbmZvKSA9PiB7XG4gICAgY29uc3QgaXRlbSA9IGluZm8ubm9kZTtcbiAgICBsZXQgdmFsdWUgPSB0aGlzLnN0YXRlLnZhbHVlO1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlID0gZ2V0VmFsdWVQcm9wVmFsdWUoaXRlbSk7XG4gICAgY29uc3Qgc2VsZWN0ZWRMYWJlbCA9IHRoaXMuZ2V0TGFiZWxGcm9tTm9kZShpdGVtKTtcbiAgICBjb25zdCBjaGVja2FibGVTZWxlY3QgPSBwcm9wcy50cmVlQ2hlY2thYmxlICYmIGluZm8uZXZlbnQgPT09ICdzZWxlY3QnO1xuICAgIGxldCBldmVudCA9IHNlbGVjdGVkVmFsdWU7XG4gICAgaWYgKHRoaXMuaXNMYWJlbEluVmFsdWUoKSkge1xuICAgICAgZXZlbnQgPSB7XG4gICAgICAgIHZhbHVlOiBldmVudCxcbiAgICAgICAgbGFiZWw6IHNlbGVjdGVkTGFiZWwsXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5mby5zZWxlY3RlZCA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMub25EZXNlbGVjdChpbmZvKTtcbiAgICAgIGlmICghY2hlY2thYmxlU2VsZWN0KSByZXR1cm47XG4gICAgfVxuICAgIHByb3BzLm9uU2VsZWN0KGV2ZW50LCBpdGVtLCBpbmZvKTtcblxuICAgIGNvbnN0IGNoZWNrRXZ0ID0gaW5mby5ldmVudCA9PT0gJ2NoZWNrJztcbiAgICBpZiAoaXNNdWx0aXBsZShwcm9wcykpIHtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dCgpO1xuICAgICAgaWYgKGNoZWNrRXZ0KSB7XG4gICAgICAgIHZhbHVlID0gdGhpcy5nZXRDaGVja2VkTm9kZXMoaW5mbywgcHJvcHMpLm1hcChuID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IGdldFZhbHVlUHJvcFZhbHVlKG4pLFxuICAgICAgICAgICAgbGFiZWw6IHRoaXMuZ2V0TGFiZWxGcm9tTm9kZShuKSxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWx1ZS5zb21lKGkgPT4gaS52YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5jb25jYXQoW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiBzZWxlY3RlZFZhbHVlLFxuICAgICAgICAgICAgbGFiZWw6IHNlbGVjdGVkTGFiZWwsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh2YWx1ZS5sZW5ndGggJiYgdmFsdWVbMF0udmFsdWUgPT09IHNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgdGhpcy5zZXRPcGVuU3RhdGUoZmFsc2UpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlOiBzZWxlY3RlZFZhbHVlLFxuICAgICAgICAgIGxhYmVsOiBzZWxlY3RlZExhYmVsLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICAgIHRoaXMuc2V0T3BlblN0YXRlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBjb25zdCBleHRyYUluZm8gPSB7XG4gICAgICB0cmlnZ2VyVmFsdWU6IHNlbGVjdGVkVmFsdWUsXG4gICAgICB0cmlnZ2VyTm9kZTogaXRlbSxcbiAgICB9O1xuICAgIGlmIChjaGVja0V2dCkge1xuICAgICAgZXh0cmFJbmZvLmNoZWNrZWQgPSBpbmZvLmNoZWNrZWQ7XG4gICAgICAvLyBpZiBpbnB1dFZhbHVlIGV4aXN0aW5nLCB0cmVlIGlzIGNoZWNrU3RyaWN0bHlcbiAgICAgIGV4dHJhSW5mby5hbGxDaGVja2VkTm9kZXMgPVxuICAgICAgICBwcm9wcy50cmVlQ2hlY2tTdHJpY3RseSB8fCB0aGlzLnN0YXRlLmlucHV0VmFsdWVcbiAgICAgICAgICA/IGluZm8uY2hlY2tlZE5vZGVzXG4gICAgICAgICAgOiBmbGF0VG9IaWVyYXJjaHkoaW5mby5jaGVja2VkTm9kZXNQb3NpdGlvbnMpO1xuICAgICAgdGhpcy5fY2hlY2tlZE5vZGVzID0gaW5mby5jaGVja2VkTm9kZXNQb3NpdGlvbnM7XG4gICAgICBjb25zdCBfdHJlZSA9IHRoaXMudHJpZ2dlci5wb3B1cEVsZTtcbiAgICAgIHRoaXMuX3RyZWVOb2Rlc1N0YXRlcyA9IF90cmVlLmNoZWNrS2V5cztcbiAgICB9IGVsc2Uge1xuICAgICAgZXh0cmFJbmZvLnNlbGVjdGVkID0gaW5mby5zZWxlY3RlZDtcbiAgICB9XG5cbiAgICB0aGlzLmZpcmVDaGFuZ2UodmFsdWUsIGV4dHJhSW5mbyk7XG4gICAgLy8g6YCJ5Lit5ZCO5Yik5pat5piv5ZCm6ZyA6KaB5riF5qWa5pCc57Si5YC8XG4gICAgaWYocHJvcHMuYXV0b0NsZWFyU2VhcmNoVmFsdWUgKXtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dCgpXG4gICAgfVxuICAgIGlmIChwcm9wcy5pbnB1dFZhbHVlICYmIGlzRW1wdHkodGhpcy5wcm9wcy5zZWFyY2hWYWx1ZSkpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpbnB1dFZhbHVlOiAnJyxcbiAgICAgIH0pO1xuICAgIH1lbHNle1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlucHV0VmFsdWU6IHRoaXMucHJvcHMuc2VhcmNoVmFsdWUsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgb25EZXNlbGVjdCA9IGluZm8gPT4ge1xuICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWQoZ2V0VmFsdWVQcm9wVmFsdWUoaW5mby5ub2RlKSk7XG4gICAgaWYgKCFpc011bHRpcGxlKHRoaXMucHJvcHMpKSB7XG4gICAgICB0aGlzLnNldE9wZW5TdGF0ZShmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dCgpO1xuICAgIH1cbiAgfTtcblxuICBvblBsYWNlaG9sZGVyQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5nZXRJbnB1dERPTU5vZGUoKS5mb2N1cygpO1xuICB9O1xuXG4gIG9uQ2xlYXJTZWxlY3Rpb24gPSBldmVudCA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAocHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5fY2FjaGVUcmVlTm9kZXNTdGF0ZXMgPSAnbm8nO1xuICAgIHRoaXMuX2NoZWNrZWROb2RlcyA9IFtdO1xuICAgIGlmIChzdGF0ZS5pbnB1dFZhbHVlIHx8IHN0YXRlLnZhbHVlLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRPcGVuU3RhdGUoZmFsc2UpO1xuICAgICAgaWYgKHR5cGVvZiBwcm9wcy5pbnB1dFZhbHVlID09PSAndW5kZWZpbmVkJyApIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpbnB1dFZhbHVlOiBpc0VtcHR5KHRoaXMucHJvcHMuc2VhcmNoVmFsdWUpID8gJyc6dGhpcy5wcm9wcy5zZWFyY2hWYWx1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmlyZUNoYW5nZShbXSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZmlyZUNoYW5nZShbXSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIG9uQ2hvaWNlQW5pbWF0aW9uTGVhdmUgPSAoKSA9PiB7XG4gICAgdGhpcy50cmlnZ2VyLnRyaWdnZXIuZm9yY2VQb3B1cEFsaWduKCk7XG4gIH07XG5cbiAgZ2V0TGFiZWxGcm9tTm9kZShjaGlsZCkge1xuICAgIHJldHVybiBnZXRQcm9wVmFsdWUoY2hpbGQsIHRoaXMucHJvcHMudHJlZU5vZGVMYWJlbFByb3ApO1xuICB9XG5cbiAgZ2V0TGFiZWxGcm9tUHJvcHMocHJvcHMsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBsZXQgbGFiZWwgPSBudWxsO1xuICAgIGxvb3BBbGxDaGlsZHJlbih0aGlzLnJlbmRlcmVkVHJlZURhdGEgfHwgcHJvcHMuY2hpbGRyZW4sIGl0ZW0gPT4ge1xuICAgICAgaWYgKGdldFZhbHVlUHJvcFZhbHVlKGl0ZW0pID09PSB2YWx1ZSkge1xuICAgICAgICBsYWJlbCA9IHRoaXMuZ2V0TGFiZWxGcm9tTm9kZShpdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAobGFiZWwgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGxhYmVsO1xuICB9XG5cbiAgZ2V0RHJvcGRvd25Db250YWluZXIoKSB7XG4gICAgaWYgKCF0aGlzLmRyb3Bkb3duQ29udGFpbmVyKSB7XG4gICAgICB0aGlzLmRyb3Bkb3duQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZHJvcGRvd25Db250YWluZXIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kcm9wZG93bkNvbnRhaW5lcjtcbiAgfVxuXG4gIGdldFNlYXJjaFBsYWNlaG9sZGVyRWxlbWVudChoaWRkZW4pIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgbGV0IHBsYWNlaG9sZGVyO1xuICAgIGlmIChpc011bHRpcGxlKHByb3BzKSkge1xuICAgICAgcGxhY2Vob2xkZXIgPSBwcm9wcy5wbGFjZWhvbGRlciB8fCBwcm9wcy5zZWFyY2hQbGFjZWhvbGRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgcGxhY2Vob2xkZXIgPSBwcm9wcy5zZWFyY2hQbGFjZWhvbGRlcjtcbiAgICB9XG4gICAgaWYgKHBsYWNlaG9sZGVyKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8c3BhblxuICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6IGhpZGRlbiA/ICdub25lJyA6ICdibG9jaycgfX1cbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUGxhY2Vob2xkZXJDbGlja31cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake3Byb3BzLnByZWZpeENsc30tc2VhcmNoX19maWVsZF9fcGxhY2Vob2xkZXJgfVxuICAgICAgICA+XG4gICAgICAgICAge3BsYWNlaG9sZGVyfVxuICAgICAgICA8L3NwYW4+XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGdldElucHV0RWxlbWVudCgpIHtcbiAgICBjb25zdCB7IGlucHV0VmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBwcmVmaXhDbHMsIGRpc2FibGVkIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiAoXG4gICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VhcmNoX19maWVsZF9fd3JhcGB9PlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICByZWY9e3NhdmVSZWYodGhpcywgJ2lucHV0SW5zdGFuY2UnKX1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbklucHV0Q2hhbmdlfVxuICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5vbklucHV0S2V5RG93bn1cbiAgICAgICAgICB2YWx1ZT17aW5wdXRWYWx1ZX1cbiAgICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlYXJjaF9fZmllbGRgfVxuICAgICAgICAgIHJvbGU9XCJ0ZXh0Ym94XCJcbiAgICAgICAgLz5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICByZWY9e3NhdmVSZWYodGhpcywgJ2lucHV0TWlycm9ySW5zdGFuY2UnKX1cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VhcmNoX19maWVsZF9fbWlycm9yYH1cbiAgICAgICAgPlxuICAgICAgICAgIHtpbnB1dFZhbHVlfSZuYnNwO1xuICAgICAgICA8L3NwYW4+XG4gICAgICAgIHtpc011bHRpcGxlKHRoaXMucHJvcHMpID8gbnVsbCA6IHRoaXMuZ2V0U2VhcmNoUGxhY2Vob2xkZXJFbGVtZW50KCEhaW5wdXRWYWx1ZSl9XG4gICAgICA8L3NwYW4+XG4gICAgKTtcbiAgfVxuXG4gIGdldElucHV0RE9NTm9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dEluc3RhbmNlO1xuICB9XG5cbiAgZ2V0UG9wdXBET01Ob2RlKCkge1xuICAgIHJldHVybiB0aGlzLnRyaWdnZXIuZ2V0UG9wdXBET01Ob2RlKCk7XG4gIH1cblxuICBnZXRQb3B1cENvbXBvbmVudFJlZnMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlci5nZXRQb3B1cEVsZVJlZnMoKTtcbiAgfVxuXG4gIGdldFZhbHVlKF9wcm9wcywgdmFsLCBpbml0ID0gdHJ1ZSkge1xuICAgIGxldCB2YWx1ZSA9IHZhbDtcbiAgICAvLyBpZiBpbnB1dFZhbHVlIGV4aXN0aW5nLCB0cmVlIGlzIGNoZWNrU3RyaWN0bHlcbiAgICBjb25zdCBfc3RyaWN0ID1cbiAgICAgIGluaXQgPT09ICdfX3N0cmljdCcgfHxcbiAgICAgIChpbml0ICYmXG4gICAgICAgICgodGhpcy5zdGF0ZSAmJiB0aGlzLnN0YXRlLmlucHV0VmFsdWUpIHx8IHRoaXMucHJvcHMuaW5wdXRWYWx1ZSAhPT0gX3Byb3BzLmlucHV0VmFsdWUpKTtcbiAgICBpZiAoX3Byb3BzLnRyZWVDaGVja2FibGUgJiYgKF9wcm9wcy50cmVlQ2hlY2tTdHJpY3RseSB8fCBfc3RyaWN0KSkge1xuICAgICAgdGhpcy5oYWxmQ2hlY2tlZFZhbHVlcyA9IFtdO1xuICAgICAgdmFsdWUgPSBbXTtcbiAgICAgIHZhbC5mb3JFYWNoKGkgPT4ge1xuICAgICAgICBpZiAoIWkuaGFsZkNoZWNrZWQpIHtcbiAgICAgICAgICB2YWx1ZS5wdXNoKGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaGFsZkNoZWNrZWRWYWx1ZXMucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGlmICghKF9wcm9wcy50cmVlQ2hlY2thYmxlICYmICFfcHJvcHMudHJlZUNoZWNrU3RyaWN0bHkpKSB7XG4gICAgaWYgKFxuICAgICAgISEhX3Byb3BzLnRyZWVDaGVja2FibGUgfHxcbiAgICAgIChfcHJvcHMudHJlZUNoZWNrYWJsZSAmJiAoX3Byb3BzLnRyZWVDaGVja1N0cmljdGx5IHx8IF9zdHJpY3QpKVxuICAgICkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBsZXQgY2hlY2tlZFRyZWVOb2RlcztcbiAgICBpZiAoXG4gICAgICB0aGlzLl9jYWNoZXRyZWVEYXRhICYmXG4gICAgICB0aGlzLl9jYWNoZVRyZWVOb2Rlc1N0YXRlcyAmJlxuICAgICAgdGhpcy5fY2hlY2tlZE5vZGVzICYmXG4gICAgICB0aGlzLnN0YXRlICYmXG4gICAgICAhdGhpcy5zdGF0ZS5pbnB1dFZhbHVlXG4gICAgKSB7XG4gICAgICB0aGlzLmNoZWNrZWRUcmVlTm9kZXMgPSBjaGVja2VkVHJlZU5vZGVzID0gdGhpcy5fY2hlY2tlZE5vZGVzO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIE5vdGU6IGB0aGlzLl90cmVlTm9kZXNTdGF0ZXNgJ3MgdHJlZU5vZGVzU3RhdGVzIG11c3QgY29ycmVzcG9uZCB0byBub2RlcyBvZiB0aGVcbiAgICAgICAqIGZpbmFsIHRyZWUgKGBwcm9jZXNzVHJlZU5vZGVgIGZ1bmN0aW9uIGZyb20gU2VsZWN0VHJpZ2dlci5qc3ggcHJvZHVjZSB0aGUgZmluYWwgdHJlZSkuXG4gICAgICAgKlxuICAgICAgICogQW5kLCBgdGhpcy5fdHJlZU5vZGVzU3RhdGVzYCBmcm9tIGBvblNlbGVjdGAgaXMgcHJldmlvdXMgdmFsdWUsXG4gICAgICAgKiBzbyBpdCBwZXJoYXBzIG9ubHkgaGF2ZSBhIGZldyBub2RlcywgYnV0IHRoZSBuZXdseSBmaWx0ZXJlZCB0cmVlIGNhbiBoYXZlIG1hbnkgbm9kZXMsXG4gICAgICAgKiB0aHVzLCB5b3UgY2Fubm90IHVzZSBwcmV2aW91cyBfdHJlZU5vZGVzU3RhdGVzLlxuICAgICAgICovXG4gICAgICAvLyBnZXRUcmVlTm9kZXNTdGF0ZXMgaXMgbm90IGVmZmVjdGl2ZS5cbiAgICAgIHRoaXMuX3RyZWVOb2Rlc1N0YXRlcyA9IGdldFRyZWVOb2Rlc1N0YXRlcyhcbiAgICAgICAgdGhpcy5yZW5kZXJlZFRyZWVEYXRhIHx8IF9wcm9wcy5jaGlsZHJlbixcbiAgICAgICAgdmFsdWUubWFwKGl0ZW0gPT4gaXRlbS52YWx1ZSksXG4gICAgICApO1xuICAgICAgdGhpcy5jaGVja2VkVHJlZU5vZGVzID0gY2hlY2tlZFRyZWVOb2RlcyA9IHRoaXMuX3RyZWVOb2Rlc1N0YXRlcy5jaGVja2VkTm9kZXM7XG4gICAgfVxuICAgIGNvbnN0IG1hcExhYlZhbCA9IGFyciA9PlxuICAgICAgYXJyLm1hcChpdGVtT2JqID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogZ2V0VmFsdWVQcm9wVmFsdWUoaXRlbU9iai5ub2RlKSxcbiAgICAgICAgICBsYWJlbDogZ2V0UHJvcFZhbHVlKGl0ZW1PYmoubm9kZSwgX3Byb3BzLnRyZWVOb2RlTGFiZWxQcm9wKSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBsZXQgY2hlY2tlZFZhbHVlcyA9IFtdO1xuICAgIGlmIChwcm9wcy5zaG93Q2hlY2tlZFN0cmF0ZWd5ID09PSBTSE9XX0FMTCkge1xuICAgICAgY2hlY2tlZFZhbHVlcyA9IG1hcExhYlZhbChjaGVja2VkVHJlZU5vZGVzKTtcbiAgICB9IGVsc2UgaWYgKHByb3BzLnNob3dDaGVja2VkU3RyYXRlZ3kgPT09IFNIT1dfUEFSRU5UKSB7XG4gICAgICBjb25zdCBwb3NBcnIgPSBmaWx0ZXJQYXJlbnRQb3NpdGlvbihjaGVja2VkVHJlZU5vZGVzLm1hcChpdGVtT2JqID0+IGl0ZW1PYmoucG9zKSk7XG4gICAgICBjaGVja2VkVmFsdWVzID0gbWFwTGFiVmFsKFxuICAgICAgICBjaGVja2VkVHJlZU5vZGVzLmZpbHRlcihpdGVtT2JqID0+IHBvc0Fyci5pbmRleE9mKGl0ZW1PYmoucG9zKSAhPT0gLTEpLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hlY2tlZFZhbHVlcyA9IG1hcExhYlZhbChjaGVja2VkVHJlZU5vZGVzLmZpbHRlcihpdGVtT2JqID0+ICFpdGVtT2JqLm5vZGUucHJvcHMuY2hpbGRyZW4pKTtcbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrZWRWYWx1ZXM7XG4gIH1cblxuICBnZXRDaGVja2VkTm9kZXMoaW5mbywgcHJvcHMpIHtcbiAgICAvLyBUT0RPIHRyZWVDaGVja2FibGUgZG9lcyBub3Qgc3VwcG9ydCB0YWdzL2R5bmFtaWNcbiAgICBsZXQgeyBjaGVja2VkTm9kZXMgfSA9IGluZm87XG4gICAgbGV0IGNoZWNrTm9kZVByb3BzID0gY2hlY2tlZE5vZGVzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpZighaXRlbS5wcm9wcyl7XG4gICAgICAgIGl0ZW0ucHJvcHMgPSBpdGVtXG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0pXG4gICAgaWYgKHByb3BzLnRyZWVDaGVja1N0cmljdGx5IHx8IHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSkge1xuICAgICAgcmV0dXJuIGNoZWNrTm9kZVByb3BzO1xuICAgIH1cbiAgICBjb25zdCBjaGVja2VkTm9kZXNQb3NpdGlvbnMgPSBpbmZvLmNoZWNrZWROb2Rlc1Bvc2l0aW9ucztcbiAgICBpZiAocHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19BTEwpIHtcbiAgICAgIGNoZWNrTm9kZVByb3BzID0gY2hlY2tOb2RlUHJvcHM7XG4gICAgfSBlbHNlIGlmIChwcm9wcy5zaG93Q2hlY2tlZFN0cmF0ZWd5ID09PSBTSE9XX1BBUkVOVCkge1xuICAgICAgY29uc3QgcG9zQXJyID0gZmlsdGVyUGFyZW50UG9zaXRpb24oY2hlY2tlZE5vZGVzUG9zaXRpb25zLm1hcChpdGVtT2JqID0+IGl0ZW1PYmoucG9zKSk7XG4gICAgICBjaGVja05vZGVQcm9wcyA9IGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1xuICAgICAgICAuZmlsdGVyKGl0ZW1PYmogPT4gcG9zQXJyLmluZGV4T2YoaXRlbU9iai5wb3MpICE9PSAtMSlcbiAgICAgICAgLm1hcChpdGVtT2JqID0+IGl0ZW1PYmoubm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoZWNrTm9kZVByb3BzID0gY2hlY2tOb2RlUHJvcHMuZmlsdGVyKG4gPT4gIW4ucHJvcHMuY2hpbGRyZW4pO1xuICAgIH1cbiAgICByZXR1cm4gY2hlY2tOb2RlUHJvcHM7XG4gIH1cblxuICBnZXREZXNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSkge1xuICAgIGNvbnN0IGNoZWNrZWRUcmVlTm9kZXMgPSB0aGlzLmNoZWNrZWRUcmVlTm9kZXM7XG4gICAgbGV0IHVuQ2hlY2tQb3M7XG4gICAgY2hlY2tlZFRyZWVOb2Rlcy5mb3JFYWNoKGl0ZW1PYmogPT4ge1xuICAgICAgaWYgKGl0ZW1PYmoubm9kZS5wcm9wcy52YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICB1bkNoZWNrUG9zID0gaXRlbU9iai5wb3M7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgbmV3VmFscyA9IFtdO1xuICAgIGNvbnN0IG5ld0NrVG5zID0gW107XG4gICAgY2hlY2tlZFRyZWVOb2Rlcy5mb3JFYWNoKGl0ZW1PYmogPT4ge1xuICAgICAgaWYgKGlzUG9zaXRpb25QcmVmaXgoaXRlbU9iai5wb3MsIHVuQ2hlY2tQb3MpIHx8IGlzUG9zaXRpb25QcmVmaXgodW5DaGVja1BvcywgaXRlbU9iai5wb3MpKSB7XG4gICAgICAgIC8vIEZpbHRlciBhbmNlc3RyYWwgYW5kIGNoaWxkcmVuIG5vZGVzIHdoZW4gdW5jaGVjayBhIG5vZGUuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5ld0NrVG5zLnB1c2goaXRlbU9iaik7XG4gICAgICBuZXdWYWxzLnB1c2goaXRlbU9iai5ub2RlLnByb3BzLnZhbHVlKTtcbiAgICB9KTtcbiAgICB0aGlzLmNoZWNrZWRUcmVlTm9kZXMgPSB0aGlzLl9jaGVja2VkTm9kZXMgPSBuZXdDa1RucztcbiAgICBjb25zdCBudiA9IHRoaXMuc3RhdGUudmFsdWUuZmlsdGVyKHZhbCA9PiBuZXdWYWxzLmluZGV4T2YodmFsLnZhbHVlKSAhPT0gLTEpO1xuICAgIHRoaXMuZmlyZUNoYW5nZShudiwgeyB0cmlnZ2VyVmFsdWU6IHNlbGVjdGVkVmFsdWUsIGNsZWFyOiB0cnVlIH0pO1xuICB9XG5cbiAgc2V0T3BlblN0YXRlKG9wZW4sIG5lZWRGb2N1cywgZG9jdW1lbnRDbGlja0Nsb3NlID0gZmFsc2UpIHtcbiAgICB0aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuICAgIGNvbnN0IHsgcHJvcHMgfSA9IHRoaXM7XG4gICAgLy8gY2FuIG5vdCBvcHRpbWl6ZSwgaWYgY2hpbGRyZW4gaXMgZW1wdHlcbiAgICAvLyBpZiAodGhpcy5zdGF0ZS5vcGVuID09PSBvcGVuKSB7XG4gICAgLy8gICByZXR1cm47XG4gICAgLy8gfVxuICAgIGlmICghdGhpcy5wcm9wcy5vbkRyb3Bkb3duVmlzaWJsZUNoYW5nZShvcGVuLCB7IGRvY3VtZW50Q2xpY2tDbG9zZSB9KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKFxuICAgICAge1xuICAgICAgICBvcGVuLFxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgaWYgKG5lZWRGb2N1cyB8fCBvcGVuKSB7XG4gICAgICAgICAgLy8gSW5wdXQgZG9tIGluaXQgYWZ0ZXIgZmlyc3QgdGltZSBjb21wb25lbnQgcmVuZGVyXG4gICAgICAgICAgLy8gQWRkIGRlbGF5IGZvciB0aGlzIHRvIGdldCBmb2N1c1xuICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG9wZW4gfHwgaXNNdWx0aXBsZShwcm9wcykpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmdldElucHV0RE9NTm9kZSgpO1xuICAgICAgICAgICAgICBpZiAoaW5wdXQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIGNsZWFyU2VhcmNoSW5wdXQoKSB7XG4gICAgdGhpcy5nZXRJbnB1dERPTU5vZGUoKS5mb2N1cygpO1xuICAgIGlmICghKCdpbnB1dFZhbHVlJyBpbiB0aGlzLnByb3BzKSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlucHV0VmFsdWU6IGlzRW1wdHkodGhpcy5wcm9wcy5zZWFyY2hWYWx1ZSk/ICcnIDogaXNFbXB0eSh0aGlzLnByb3BzLnNlYXJjaFZhbHVlKSB9KTtcbiAgICB9XG4gIH1cblxuICBhZGRMYWJlbFRvVmFsdWUocHJvcHMsIHZhbHVlXykge1xuICAgIGxldCB2YWx1ZSA9IHZhbHVlXztcbiAgICBpZiAodGhpcy5pc0xhYmVsSW5WYWx1ZSgpKSB7XG4gICAgICB2YWx1ZS5mb3JFYWNoKCh2LCBpKSA9PiB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWVbaV0pICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICAgIHZhbHVlW2ldID0ge1xuICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHYubGFiZWwgPSB2LmxhYmVsIHx8IHRoaXMuZ2V0TGFiZWxGcm9tUHJvcHMocHJvcHMsIHYudmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gdmFsdWUubWFwKHYgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiB2LFxuICAgICAgICAgIGxhYmVsOiB0aGlzLmdldExhYmVsRnJvbVByb3BzKHByb3BzLCB2KSxcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBjbGVhckRlbGF5VGltZXIoKSB7XG4gICAgaWYgKHRoaXMuZGVsYXlUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuZGVsYXlUaW1lcik7XG4gICAgICB0aGlzLmRlbGF5VGltZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDnp7vpmaRzZWxlY3TlgLxcbiAgICogQHBhcmFtIHsqfSBzZWxlY3RlZFZhbFxuICAgKi9cbiAgcmVtb3ZlU2VsZWN0ZWQoc2VsZWN0ZWRWYWwpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NhY2hlVHJlZU5vZGVzU3RhdGVzID0gJ25vJztcbiAgICBpZiAoXG4gICAgICBwcm9wcy50cmVlQ2hlY2thYmxlICYmXG4gICAgICAocHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19BTEwgfHwgcHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19QQVJFTlQpICYmXG4gICAgICAhKHByb3BzLnRyZWVDaGVja1N0cmljdGx5IHx8IHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSlcbiAgICApIHtcbiAgICAgIHRoaXMuZ2V0RGVzZWxlY3RlZFZhbHVlKHNlbGVjdGVkVmFsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY2xpY2sgdGhlIG5vZGUncyBgeGAoaW4gc2VsZWN0IGJveCksIGxpa2VseSB0cmlnZ2VyIHRoZSBUcmVlTm9kZSdzIGB1bkNoZWNrYCBldmVudCxcbiAgICAvLyBjYXV0aW91c2x5LCB0aGV5IGFyZSBjb21wbGV0ZWx5IGRpZmZlcmVudCwgdGhpbmsgYWJvdXQgaXQsIHRoZSB0cmVlIG1heSBub3QgcmVuZGVyIGF0IGZpcnN0LFxuICAgIC8vIGJ1dCB0aGUgbm9kZXMgaW4gc2VsZWN0IGJveCBhcmUgcmVhZHkuXG4gICAgbGV0IGxhYmVsO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZS5maWx0ZXIoc2luZ2xlVmFsdWUgPT4ge1xuICAgICAgaWYgKHNpbmdsZVZhbHVlLnZhbHVlID09PSBzZWxlY3RlZFZhbCkge1xuICAgICAgICBsYWJlbCA9IHNpbmdsZVZhbHVlLmxhYmVsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNpbmdsZVZhbHVlLnZhbHVlICE9PSBzZWxlY3RlZFZhbDtcbiAgICB9KTtcbiAgICBjb25zdCBjYW5NdWx0aXBsZSA9IGlzTXVsdGlwbGUocHJvcHMpO1xuXG4gICAgaWYgKGNhbk11bHRpcGxlKSB7XG4gICAgICBsZXQgZXZlbnQgPSBzZWxlY3RlZFZhbDtcbiAgICAgIGlmICh0aGlzLmlzTGFiZWxJblZhbHVlKCkpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdmFsdWU6IHNlbGVjdGVkVmFsLFxuICAgICAgICAgIGxhYmVsLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcHJvcHMub25EZXNlbGVjdChldmVudCk7XG4gICAgfVxuICAgIGlmIChwcm9wcy50cmVlQ2hlY2thYmxlKSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkVHJlZU5vZGVzICYmIHRoaXMuY2hlY2tlZFRyZWVOb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jaGVja2VkVHJlZU5vZGVzID0gdGhpcy5fY2hlY2tlZE5vZGVzID0gdGhpcy5jaGVja2VkVHJlZU5vZGVzLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuc29tZShpID0+IGkudmFsdWUgPT09IGl0ZW0ubm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmZpcmVDaGFuZ2UodmFsdWUsIHsgdHJpZ2dlclZhbHVlOiBzZWxlY3RlZFZhbCwgY2xlYXI6IHRydWUgfSk7XG4gIH1cblxuICBvcGVuSWZIYXNDaGlsZHJlbigpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKENoaWxkcmVuLmNvdW50KHByb3BzLmNoaWxkcmVuKSB8fCAhaXNNdWx0aXBsZShwcm9wcykpIHtcbiAgICAgIHRoaXMuc2V0T3BlblN0YXRlKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZpcmVDaGFuZ2UodmFsdWUsIGV4dHJhSW5mbyA9IHt9KSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHZhbHMgPSB2YWx1ZS5tYXAoaSA9PiBpLnZhbHVlKTtcbiAgICBjb25zdCBzdiA9IHRoaXMuc3RhdGUudmFsdWUubWFwKGkgPT4gaS52YWx1ZSk7XG4gICAgaWYgKHZhbHMubGVuZ3RoICE9PSBzdi5sZW5ndGggfHwgIXZhbHMuZXZlcnkoKHZhbCwgaW5kZXgpID0+IHN2W2luZGV4XSA9PT0gdmFsKSkge1xuICAgICAgY29uc3QgZXggPSB7XG4gICAgICAgIHByZVZhbHVlOiBbLi4udGhpcy5zdGF0ZS52YWx1ZV0sXG4gICAgICAgIC4uLmV4dHJhSW5mbyxcbiAgICAgIH07XG4gICAgICBsZXQgbGFicyA9IG51bGw7XG4gICAgICBsZXQgdmxzID0gdmFsdWU7XG4gICAgICBpZiAoIXRoaXMuaXNMYWJlbEluVmFsdWUoKSkge1xuICAgICAgICBsYWJzID0gdmFsdWUubWFwKGkgPT4gaS5sYWJlbCk7XG4gICAgICAgIHZscyA9IHZscy5tYXAodiA9PiB2LnZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYWxmQ2hlY2tlZFZhbHVlcyAmJiB0aGlzLmhhbGZDaGVja2VkVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmhhbGZDaGVja2VkVmFsdWVzLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgaWYgKCF2bHMuc29tZSh2ID0+IHYudmFsdWUgPT09IGkudmFsdWUpKSB7XG4gICAgICAgICAgICB2bHMucHVzaChpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BzLnRyZWVDaGVja2FibGUgJiYgZXguY2xlYXIpIHtcbiAgICAgICAgY29uc3QgdHJlZURhdGEgPSB0aGlzLnJlbmRlcmVkVHJlZURhdGEgfHwgcHJvcHMuY2hpbGRyZW47XG4gICAgICAgIGV4LmFsbENoZWNrZWROb2RlcyA9IGZsYXRUb0hpZXJhcmNoeShmaWx0ZXJBbGxDaGVja2VkRGF0YSh2YWxzLCB0cmVlRGF0YSkpO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BzLnRyZWVDaGVja2FibGUgJiYgdGhpcy5zdGF0ZS5pbnB1dFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IF92bHMgPSBbLi4udGhpcy5zdGF0ZS52YWx1ZV07XG4gICAgICAgIGlmIChleC5jaGVja2VkKSB7XG4gICAgICAgICAgdmFsdWUuZm9yRWFjaChpID0+IHtcbiAgICAgICAgICAgIGlmIChfdmxzLmV2ZXJ5KGlpID0+IGlpLnZhbHVlICE9PSBpLnZhbHVlKSkge1xuICAgICAgICAgICAgICBfdmxzLnB1c2goeyAuLi5pIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBpbmRleDtcbiAgICAgICAgICBjb25zdCBpbmNsdWRlVmFsID0gX3Zscy5zb21lKChpLCBpbmQpID0+IHtcbiAgICAgICAgICAgIGlmIChpLnZhbHVlID09PSBleC50cmlnZ2VyVmFsdWUpIHtcbiAgICAgICAgICAgICAgaW5kZXggPSBpbmQ7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChpbmNsdWRlVmFsKSB7XG4gICAgICAgICAgICBfdmxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZscyA9IF92bHM7XG4gICAgICAgIGlmICghdGhpcy5pc0xhYmVsSW5WYWx1ZSgpKSB7XG4gICAgICAgICAgbGFicyA9IF92bHMubWFwKHYgPT4gdi5sYWJlbCk7XG4gICAgICAgICAgdmxzID0gX3Zscy5tYXAodiA9PiB2LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fc2F2ZWRWYWx1ZSA9IGlzTXVsdGlwbGUocHJvcHMpID8gdmxzIDogdmxzWzBdO1xuICAgICAgcHJvcHMub25DaGFuZ2UodGhpcy5fc2F2ZWRWYWx1ZSwgbGFicywgZXgpO1xuICAgICAgaWYgKCEoJ3ZhbHVlJyBpbiBwcm9wcykpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVUcmVlTm9kZXNTdGF0ZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgdmFsdWU6IHRoaXMuZ2V0VmFsdWUoXG4gICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgIHRvQXJyYXkodGhpcy5fc2F2ZWRWYWx1ZSkubWFwKCh2LCBpKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTGFiZWxJblZhbHVlKClcbiAgICAgICAgICAgICAgICA/IHZcbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHYsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJzICYmIGxhYnNbaV0sXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNMYWJlbEluVmFsdWUoKSB7XG4gICAgY29uc3QgeyB0cmVlQ2hlY2thYmxlLCB0cmVlQ2hlY2tTdHJpY3RseSwgbGFiZWxJblZhbHVlIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmICh0cmVlQ2hlY2thYmxlICYmIHRyZWVDaGVja1N0cmljdGx5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGxhYmVsSW5WYWx1ZSB8fCBmYWxzZTtcbiAgfVxuXG4gIGZvY3VzKCkge1xuICAgIGlmICghaXNNdWx0aXBsZSh0aGlzLnByb3BzKSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb24uZm9jdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nZXRJbnB1dERPTU5vZGUoKS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIGJsdXIoKSB7XG4gICAgaWYgKCFpc011bHRpcGxlKHRoaXMucHJvcHMpKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvbi5ibHVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2V0SW5wdXRET01Ob2RlKCkuYmx1cigpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckNsZWFyKCkge1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzLCBhbGxvd0NsZWFyIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgdmFsdWUsIGlucHV0VmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgY2xlYXIgPSAoXG4gICAgICA8QnV0dG9uXG4gICAgICAgIGtleT1cImNsZWFyXCJcbiAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWNsZWFyYH1cbiAgICAgICAgc3R5bGU9e1VOU0VMRUNUQUJMRV9TVFlMRX1cbiAgICAgICAgey4uLlVOU0VMRUNUQUJMRV9BVFRSSUJVVEV9XG4gICAgICAgIHNoYXBlPVwiY2lyY2xlXCJcbiAgICAgICAgaWNvbj1cImNsb3NlXCJcbiAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgb25DbGljaz17dGhpcy5vbkNsZWFyU2VsZWN0aW9ufVxuICAgICAgICBvbk1vdXNlRG93bj17cHJldmVudERlZmF1bHRFdmVudH1cbiAgICAgIC8+XG4gICAgKTtcbiAgICBpZiAoIWFsbG93Q2xlYXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaW5wdXRWYWx1ZSB8fCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjbGVhcjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBvbkFycm93Q2xpY2sgPSBlID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXRoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMub25Ecm9wZG93blZpc2libGVDaGFuZ2UoIXRoaXMuc3RhdGUub3Blbik7XG4gICAgfVxuICB9O1xuXG4gIGdldFBsYWNlaG9sZGVyRWxlbWVudCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHByb3BzLCBzdGF0ZSB9ID0gdGhpcztcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IHByb3BzLnBsYWNlaG9sZGVyO1xuICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtgJHtwcm9wcy5wcmVmaXhDbHN9LXNlbGVjdGlvbl9fcGxhY2Vob2xkZXJgfT57cGxhY2Vob2xkZXJ9PC9kaXY+O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICByZW5kZXJUb3BDb250cm9sTm9kZSgpIHtcbiAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGxhYmVsSW5WYWx1ZSwgY2hvaWNlVHJhbnNpdGlvbk5hbWUsIHByZWZpeENscywgbWF4VGFnVGV4dExlbmd0aCwgbWF4VGFnQ291bnQsIG1heFRhZ1BsYWNlaG9sZGVyLCAgY2hvaWNlUmVuZGVyIH0gPSBwcm9wcztcbiAgICBjb25zdCBtdWx0aXBsZSA9IGlzTXVsdGlwbGUocHJvcHMpO1xuXG4gICAgLy8gc2luZ2xlIGFuZCBub3QgY29tYm9ib3gsIGlucHV0IGlzIGluc2lkZSBkcm9wZG93blxuICAgIGlmICghbXVsdGlwbGUpIHtcbiAgICAgIGNvbnN0IHNpbmdsZVZhbHVlID0gdmFsdWUgJiYgdmFsdWVbMF07XG4gICAgICBjb25zdCB7IGxhYmVsIH0gPSBzaW5nbGVWYWx1ZSB8fCB7fTtcbiAgICAgIGNvbnN0IGlubmVyTm9kZSA9IChcbiAgICAgICAgPHNwYW4ga2V5PVwidmFsdWVcIiB0aXRsZT17bGFiZWx9IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1zZWxlY3Rpb24tc2VsZWN0ZWQtdmFsdWVgfT5cbiAgICAgICAgICB7Y2hvaWNlUmVuZGVyID8gY2hvaWNlUmVuZGVyKGxhYmVsKSA6IGxhYmVsfVxuICAgICAgICA8L3NwYW4+XG4gICAgICApO1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uX19yZW5kZXJlZGB9PlxuICAgICAgICAgIHt0aGlzLmdldFBsYWNlaG9sZGVyRWxlbWVudCgpfVxuICAgICAgICAgIHtpbm5lck5vZGV9XG4gICAgICAgICAge3RoaXMucmVuZGVyQ2xlYXIoKX1cbiAgICAgICAgICB7bXVsdGlwbGUgfHwgIXByb3BzLnNob3dBcnJvdyA/IG51bGwgOiAoXG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBrZXk9XCJhcnJvd1wiXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1hcnJvd2B9XG4gICAgICAgICAgICAgIHN0eWxlPXtVTlNFTEVDVEFCTEVfU1RZTEV9XG4gICAgICAgICAgICAgIHsuLi5VTlNFTEVDVEFCTEVfQVRUUklCVVRFfVxuICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQXJyb3dDbGlja31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiaWNvbiBpY29uLWFycm93X2Ryb3BfZG93blwiPjwvaT5cbiAgICAgICAgICAgICAgPGIgLz5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYG1heFRhZ0NvdW50YCBpcyBzZXRcbiAgICBsZXQgbXlWYWx1ZUxpc3QgPSB2YWx1ZTtcbiAgICBpZiAobWF4VGFnQ291bnQgPj0gMCkge1xuICAgICAgbXlWYWx1ZUxpc3QgPSB2YWx1ZS5zbGljZSgwLCBtYXhUYWdDb3VudCk7XG4gICAgfVxuXG5cbiAgICBjb25zdCBzZWxlY3RlZFZhbHVlTm9kZXMgPSBteVZhbHVlTGlzdC5tYXAoc2luZ2xlVmFsdWUgPT4ge1xuICAgICAgbGV0IGNvbnRlbnQgPSBzaW5nbGVWYWx1ZS5sYWJlbDtcbiAgICAgIGNvbnN0IHRpdGxlID0gY29udGVudDtcbiAgICAgIGlmIChtYXhUYWdUZXh0TGVuZ3RoICYmIHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJyAmJiBjb250ZW50Lmxlbmd0aCA+IG1heFRhZ1RleHRMZW5ndGgpIHtcbiAgICAgICAgY29udGVudCA9IGAke2NvbnRlbnQuc2xpY2UoMCwgbWF4VGFnVGV4dExlbmd0aCl9Li4uYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxsaVxuICAgICAgICAgIHN0eWxlPXtVTlNFTEVDVEFCTEVfU1RZTEV9XG4gICAgICAgICAgey4uLlVOU0VMRUNUQUJMRV9BVFRSSUJVVEV9XG4gICAgICAgICAgb25Nb3VzZURvd249e3ByZXZlbnREZWZhdWx0RXZlbnR9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlbGVjdGlvbl9fY2hvaWNlYH1cbiAgICAgICAgICBrZXk9e3NpbmdsZVZhbHVlLnZhbHVlfVxuICAgICAgICAgIHRpdGxlPXt0aXRsZX1cbiAgICAgICAgPlxuICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uX19jaG9pY2VfX3JlbW92ZWB9XG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnJlbW92ZVNlbGVjdGVkLmJpbmQodGhpcywgc2luZ2xlVmFsdWUudmFsdWUpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImljb24gaWNvbi1jYW5jZWxcIiAvPlxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uX19jaG9pY2VfX2NvbnRlbnRgfT57Y29udGVudH08L3NwYW4+XG4gICAgICAgIDwvbGk+XG4gICAgICApO1xuICAgIH0pO1xuICAgIGlmIChtYXhUYWdDb3VudCA+PSAwICYmIG1heFRhZ0NvdW50IDwgdmFsdWUubGVuZ3RoKSB7XG4gICAgICBsZXQgY29udGVudCA9IGArICR7dmFsdWUubGVuZ3RoIC0gbWF4VGFnQ291bnR9IC4uLmA7XG4gICAgICBpZiAodHlwZW9mIG1heFRhZ1BsYWNlaG9sZGVyID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb250ZW50ID0gbWF4VGFnUGxhY2Vob2xkZXI7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtYXhUYWdQbGFjZWhvbGRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjb25zdCByZXN0VmFsdWVMaXN0ID0gdmFsdWUuc2xpY2UobWF4VGFnQ291bnQpO1xuICAgICAgICBjb250ZW50ID0gbWF4VGFnUGxhY2Vob2xkZXIoXG4gICAgICAgICAgbGFiZWxJblZhbHVlID8gcmVzdFZhbHVlTGlzdCA6IHJlc3RWYWx1ZUxpc3QubWFwKCh7IHZhbHVlIH0pID0+IHZhbHVlKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdE5vZGVTZWxlY3QgPSAoXG4gICAgICAgIDxsaVxuICAgICAgICAgIHN0eWxlPXtVTlNFTEVDVEFCTEVfU1RZTEV9XG4gICAgICAgICAgey4uLlVOU0VMRUNUQUJMRV9BVFRSSUJVVEV9XG4gICAgICAgICAgb25Nb3VzZURvd249e3ByZXZlbnREZWZhdWx0RXZlbnR9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlbGVjdGlvbl9fY2hvaWNlYH1cbiAgICAgICAgICBrZXk9XCJyYy10cmVlLXNlbGVjdC1pbnRlcm5hbC1tYXgtdGFnLWNvdW50ZXJcIlxuICAgICAgICAgIHRpdGxlPXtjb250ZW50fVxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlbGVjdGlvbl9fY2hvaWNlX19jb250ZW50YH0+e2NvbnRlbnR9PC9zcGFuPlxuICAgICAgICA8L2xpPlxuICAgICAgKTtcbiAgICAgIHNlbGVjdGVkVmFsdWVOb2Rlcy5wdXNoKHJlc3ROb2RlU2VsZWN0KTtcbiAgICB9XG5cbiAgICBzZWxlY3RlZFZhbHVlTm9kZXMucHVzaChcbiAgICAgIDxsaSBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VhcmNoICR7cHJlZml4Q2xzfS1zZWFyY2gtLWlubGluZWB9IGtleT1cIl9faW5wdXRcIj5cbiAgICAgICAge3RoaXMuZ2V0SW5wdXRFbGVtZW50KCl9XG4gICAgICA8L2xpPixcbiAgICApO1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IGAke3ByZWZpeENsc30tc2VsZWN0aW9uX19yZW5kZXJlZGA7XG4gICAgaWYgKGNob2ljZVRyYW5zaXRpb25OYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgICA8QW5pbWF0ZVxuICAgICAgICAgICAgY29tcG9uZW50PVwidWxcIlxuICAgICAgICAgICAgdHJhbnNpdGlvbk5hbWU9e2Nob2ljZVRyYW5zaXRpb25OYW1lfVxuICAgICAgICAgICAgb25MZWF2ZT17dGhpcy5vbkNob2ljZUFuaW1hdGlvbkxlYXZlfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtzZWxlY3RlZFZhbHVlTm9kZXN9XG4gICAgICAgICAgPC9BbmltYXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiA8dWwgY2xhc3NOYW1lPXtjbGFzc05hbWV9PntzZWxlY3RlZFZhbHVlTm9kZXN9PC91bD47XG4gIH1cblxuICByZW5kZXJUcmVlRGF0YShwcm9wcykge1xuICAgIGNvbnN0IHZhbGlkUHJvcHMgPSBwcm9wcyB8fCB0aGlzLnByb3BzO1xuICAgIGlmICh2YWxpZFByb3BzLnRyZWVEYXRhKSB7XG4gICAgICBpZiAocHJvcHMgJiYgcHJvcHMudHJlZURhdGEgPT09IHRoaXMucHJvcHMudHJlZURhdGEgJiYgdGhpcy5yZW5kZXJlZFRyZWVEYXRhKSB7XG4gICAgICAgIC8vIGNhY2hlIGFuZCB1c2UgcHJlIGRhdGEuXG4gICAgICAgIHRoaXMuX2NhY2hldHJlZURhdGEgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlZFRyZWVEYXRhO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2FjaGV0cmVlRGF0YSA9IGZhbHNlO1xuICAgICAgbGV0IHRyZWVEYXRhID0gWy4uLnZhbGlkUHJvcHMudHJlZURhdGFdO1xuICAgICAgLy8gcHJvY2VzcyB0cmVlRGF0YVNpbXBsZU1vZGVcbiAgICAgIGlmICh2YWxpZFByb3BzLnRyZWVEYXRhU2ltcGxlTW9kZSkge1xuICAgICAgICBsZXQgc2ltcGxlRm9ybWF0ID0ge1xuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgIHBJZDogJ3BJZCcsXG4gICAgICAgICAgcm9vdFBJZDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWxpZFByb3BzLnRyZWVEYXRhU2ltcGxlTW9kZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgc2ltcGxlRm9ybWF0ID0geyAuLi5zaW1wbGVGb3JtYXQsIC4uLnZhbGlkUHJvcHMudHJlZURhdGFTaW1wbGVNb2RlIH07XG4gICAgICAgIH1cbiAgICAgICAgdHJlZURhdGEgPSBwcm9jZXNzU2ltcGxlVHJlZURhdGEodHJlZURhdGEsIHNpbXBsZUZvcm1hdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbG9vcFRyZWVEYXRhKHRyZWVEYXRhLCB1bmRlZmluZWQsIHRoaXMucHJvcHMudHJlZUNoZWNrYWJsZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VW5kZXJMaW5lKCkge1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzLCBjbGFzc05hbWUgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoY2xhc3NOYW1lICYmIGNsYXNzTmFtZS5pbmNsdWRlcyhgJHtwcmVmaXhDbHN9LWF1dG8tY29tcGxldGVgKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXVuZGVybGluZWB9PlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tcmlwcGxlYH0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IG11bHRpcGxlID0gaXNNdWx0aXBsZShwcm9wcyk7XG4gICAgY29uc3QgeyBvcGVuLCBmb2N1c2VkLCBpbnB1dFZhbHVlLCB2YWx1ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgZGlzYWJsZWQsIGxhYmVsLCBwcmVmaXhDbHMgfSA9IHByb3BzO1xuICAgIGNvbnN0IGN0cmxOb2RlID0gdGhpcy5yZW5kZXJUb3BDb250cm9sTm9kZSgpO1xuICAgIGxldCBleHRyYVNlbGVjdGlvblByb3BzID0ge307XG4gICAgaWYgKCFtdWx0aXBsZSkge1xuICAgICAgZXh0cmFTZWxlY3Rpb25Qcm9wcyA9IHtcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93bixcbiAgICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByb290Q2xzID0ge1xuICAgICAgW2NsYXNzTmFtZV06ICEhY2xhc3NOYW1lLFxuICAgICAgW3ByZWZpeENsc106IDEsXG4gICAgICBbYCR7cHJlZml4Q2xzfS1oYXMtYm9yZGVyYF06IDEsXG4gICAgICBbYCR7cHJlZml4Q2xzfS1vcGVuYF06IG9wZW4sXG4gICAgICBbYCR7cHJlZml4Q2xzfS1mb2N1c2VkYF06IG9wZW4gfHwgZm9jdXNlZCxcbiAgICAgIFtgJHtwcmVmaXhDbHN9LWhhcy12YWx1ZWBdOiBpbnB1dFZhbHVlIHx8ICh2YWx1ZS5sZW5ndGggJiYgdmFsdWVbMF0pLFxuICAgICAgW2Ake3ByZWZpeENsc30taGFzLWxhYmVsYF06IGxhYmVsLFxuICAgICAgW2Ake3ByZWZpeENsc30tbXVsdGlwbGVgXTogbXVsdGlwbGUsXG4gICAgICAvLyBbYCR7cHJlZml4Q2xzfS1jb21ib2JveGBdOiBpc0NvbWJvYm94KHByb3BzKSxcbiAgICAgIFtgJHtwcmVmaXhDbHN9LWRpc2FibGVkYF06IGRpc2FibGVkLFxuICAgICAgW2Ake3ByZWZpeENsc30tZW5hYmxlZGBdOiAhZGlzYWJsZWQsXG4gICAgICBbYCR7cHJlZml4Q2xzfS1hbGxvdy1jbGVhcmBdOiAhIXByb3BzLmFsbG93Q2xlYXIsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U2VsZWN0VHJpZ2dlclxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIHRyZWVOb2Rlcz17cHJvcHMuY2hpbGRyZW59XG4gICAgICAgIHRyZWVEYXRhPXt0aGlzLnJlbmRlcmVkVHJlZURhdGF9XG4gICAgICAgIF9jYWNoZXRyZWVEYXRhPXt0aGlzLl9jYWNoZXRyZWVEYXRhfVxuICAgICAgICBfdHJlZU5vZGVzU3RhdGVzPXt0aGlzLl90cmVlTm9kZXNTdGF0ZXN9XG4gICAgICAgIGhhbGZDaGVja2VkVmFsdWVzPXt0aGlzLmhhbGZDaGVja2VkVmFsdWVzfVxuICAgICAgICBtdWx0aXBsZT17bXVsdGlwbGV9XG4gICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgdmlzaWJsZT17b3Blbn1cbiAgICAgICAgaW5wdXRWYWx1ZT17aW5wdXRWYWx1ZX1cbiAgICAgICAgaW5wdXRFbGVtZW50PXt0aGlzLmdldElucHV0RWxlbWVudCgpfVxuICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgIG9uRHJvcGRvd25WaXNpYmxlQ2hhbmdlPXt0aGlzLm9uRHJvcGRvd25WaXNpYmxlQ2hhbmdlfVxuICAgICAgICBnZXRQb3B1cENvbnRhaW5lcj17cHJvcHMuZ2V0UG9wdXBDb250YWluZXJ9XG4gICAgICAgIG9uU2VsZWN0PXt0aGlzLm9uU2VsZWN0fVxuICAgICAgICByZWY9e3NhdmVSZWYodGhpcywgJ3RyaWdnZXInKX1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPXtwcm9wcy5zdHlsZX1cbiAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5vbkNsaWNrfVxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcyhyb290Q2xzKX1cbiAgICAgICAgICBvbkJsdXI9e3Byb3BzLm9uQmx1cn1cbiAgICAgICAgICBvbkZvY3VzPXtwcm9wcy5vbkZvY3VzfVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgcmVmPXtzYXZlUmVmKHRoaXMsICdzZWxlY3Rpb24nKX1cbiAgICAgICAgICAgIGtleT1cInNlbGVjdGlvblwiXG4gICAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uXG4gICAgICAgICAgICAke3ByZWZpeENsc30tc2VsZWN0aW9uLS0ke211bHRpcGxlID8gJ211bHRpcGxlJyA6ICdzaW5nbGUnfWB9XG4gICAgICAgICAgICByb2xlPVwiY29tYm9ib3hcIlxuICAgICAgICAgICAgYXJpYS1hdXRvY29tcGxldGU9XCJsaXN0XCJcbiAgICAgICAgICAgIGFyaWEtaGFzcG9wdXA9XCJ0cnVlXCJcbiAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9e29wZW59XG4gICAgICAgICAgICB7Li4uZXh0cmFTZWxlY3Rpb25Qcm9wc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7Y3RybE5vZGV9XG4gICAgICAgICAgICB7bXVsdGlwbGUgPyB0aGlzLmdldFNlYXJjaFBsYWNlaG9sZGVyRWxlbWVudCghIWlucHV0VmFsdWUgfHwgdmFsdWUubGVuZ3RoKSA6IG51bGx9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge3RoaXMuZ2V0VW5kZXJMaW5lKCl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9TZWxlY3RUcmlnZ2VyPlxuICAgICk7XG4gIH1cbn1cbiJdfQ==