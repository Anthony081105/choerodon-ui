{"version":3,"sources":["confirm.test.js"],"names":["confirm","Modal","describe","errorSpy","jest","spyOn","console","mockImplementation","afterEach","mockReset","document","body","innerHTML","afterAll","mockRestore","$$","className","querySelectorAll","open","args","title","content","it","onCancel","fn","onOk","click","expect","mock","calls","length","toBe","not","toHaveBeenCalled","process","env","REACT","useFakeTimers","toHaveLength","runAllTimers","useRealTimers","okCancel","toContain"],"mappings":"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","sourcesContent":["import Modal from '..';\n\nconst { confirm } = Modal;\n\ndescribe('Modal.confirm triggers callbacks correctly', () => {\n  const errorSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\n\n  afterEach(() => {\n    errorSpy.mockReset();\n    document.body.innerHTML = '';\n  });\n\n  afterAll(() => {\n    errorSpy.mockRestore();\n  });\n\n  function $$(className) {\n    return document.body.querySelectorAll(className);\n  }\n\n  function open(args) {\n    confirm({\n      title: 'Want to delete these items?',\n      content: 'some descriptions',\n      ...args,\n    });\n  }\n\n  it('trigger onCancel once when click on cancel button', () => {\n    const onCancel = jest.fn();\n    const onOk = jest.fn();\n    open({\n      onCancel,\n      onOk,\n    });\n    // first Modal\n    $$('.c7n-btn')[0].click();\n    expect(onCancel.mock.calls.length).toBe(1);\n    expect(onOk.mock.calls.length).toBe(0);\n  });\n\n  it('trigger onOk once when click on ok button', () => {\n    const onCancel = jest.fn();\n    const onOk = jest.fn();\n    open({\n      onCancel,\n      onOk,\n    });\n    // second Modal\n    $$('.c7n-btn-primary')[0].click();\n    expect(onCancel.mock.calls.length).toBe(0);\n    expect(onOk.mock.calls.length).toBe(1);\n  });\n\n  it('should allow Modal.comfirm without onCancel been set', () => {\n    open();\n    // Third Modal\n    $$('.c7n-btn')[0].click();\n    expect(errorSpy).not.toHaveBeenCalled();\n  });\n\n  it('should allow Modal.comfirm without onOk been set', () => {\n    open();\n    // Fourth Modal\n    $$('.c7n-btn-primary')[0].click();\n    expect(errorSpy).not.toHaveBeenCalled();\n  });\n\n  if (process.env.REACT !== '15') {\n    it('shows animation when close', () => {\n      jest.useFakeTimers();\n      open();\n      $$('.c7n-btn')[0].click();\n      expect($$('.c7n-confirm')).toHaveLength(1);\n      jest.runAllTimers();\n      expect($$('.c7n-confirm')).toHaveLength(0);\n      jest.useRealTimers();\n    });\n  }\n\n  it('ok only', () => {\n    open({ okCancel: false });\n    expect($$('.c7n-btn')).toHaveLength(1);\n    expect($$('.c7n-btn')[0].innerHTML).toContain('OK');\n  });\n});\n"]}