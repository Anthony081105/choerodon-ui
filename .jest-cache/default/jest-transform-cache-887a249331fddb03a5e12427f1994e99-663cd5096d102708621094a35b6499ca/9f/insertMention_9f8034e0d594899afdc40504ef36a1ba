4359ba4517d8a0b656c0dbb470b9ce8a
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = insertMention;

var _draftJs = require("draft-js");

var _getSearchWord = _interopRequireDefault(require("./getSearchWord"));

function insertMention(editorState, mention, data, mode) {
  var entityMode = mode === 'immutable' ? 'IMMUTABLE' : 'MUTABLE';
  var selection = editorState.getSelection();
  var contentState = editorState.getCurrentContent();
  contentState.createEntity('mention', entityMode, data || mention);
  var searchWord = (0, _getSearchWord["default"])(editorState, selection);
  var begin = searchWord.begin,
      end = searchWord.end;

  var replacedContent = _draftJs.Modifier.replaceText(contentState, selection.merge({
    anchorOffset: begin,
    focusOffset: end
  }), mention, null, contentState.getLastCreatedEntityKey());

  var InsertSpaceContent = _draftJs.Modifier.insertText(replacedContent, replacedContent.getSelectionAfter(), ' ');

  var newEditorState = _draftJs.EditorState.push(editorState, InsertSpaceContent, 'insert-mention');

  return _draftJs.EditorState.forceSelection(newEditorState, InsertSpaceContent.getSelectionAfter());
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluc2VydE1lbnRpb24uanN4Il0sIm5hbWVzIjpbImluc2VydE1lbnRpb24iLCJlZGl0b3JTdGF0ZSIsIm1lbnRpb24iLCJkYXRhIiwibW9kZSIsImVudGl0eU1vZGUiLCJzZWxlY3Rpb24iLCJnZXRTZWxlY3Rpb24iLCJjb250ZW50U3RhdGUiLCJnZXRDdXJyZW50Q29udGVudCIsImNyZWF0ZUVudGl0eSIsInNlYXJjaFdvcmQiLCJiZWdpbiIsImVuZCIsInJlcGxhY2VkQ29udGVudCIsIk1vZGlmaWVyIiwicmVwbGFjZVRleHQiLCJtZXJnZSIsImFuY2hvck9mZnNldCIsImZvY3VzT2Zmc2V0IiwiZ2V0TGFzdENyZWF0ZWRFbnRpdHlLZXkiLCJJbnNlcnRTcGFjZUNvbnRlbnQiLCJpbnNlcnRUZXh0IiwiZ2V0U2VsZWN0aW9uQWZ0ZXIiLCJuZXdFZGl0b3JTdGF0ZSIsIkVkaXRvclN0YXRlIiwicHVzaCIsImZvcmNlU2VsZWN0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFZSxTQUFTQSxhQUFULENBQXVCQyxXQUF2QixFQUFvQ0MsT0FBcEMsRUFBNkNDLElBQTdDLEVBQW1EQyxJQUFuRCxFQUF5RDtBQUN0RSxNQUFNQyxVQUFVLEdBQUdELElBQUksS0FBSyxXQUFULEdBQXVCLFdBQXZCLEdBQXFDLFNBQXhEO0FBQ0EsTUFBTUUsU0FBUyxHQUFHTCxXQUFXLENBQUNNLFlBQVosRUFBbEI7QUFDQSxNQUFNQyxZQUFZLEdBQUdQLFdBQVcsQ0FBQ1EsaUJBQVosRUFBckI7QUFFQUQsRUFBQUEsWUFBWSxDQUFDRSxZQUFiLENBQTBCLFNBQTFCLEVBQXFDTCxVQUFyQyxFQUFpREYsSUFBSSxJQUFJRCxPQUF6RDtBQUNBLE1BQU1TLFVBQVUsR0FBRywrQkFBY1YsV0FBZCxFQUEyQkssU0FBM0IsQ0FBbkI7QUFOc0UsTUFPOURNLEtBUDhELEdBTy9DRCxVQVArQyxDQU85REMsS0FQOEQ7QUFBQSxNQU92REMsR0FQdUQsR0FPL0NGLFVBUCtDLENBT3ZERSxHQVB1RDs7QUFRdEUsTUFBTUMsZUFBZSxHQUFHQyxrQkFBU0MsV0FBVCxDQUN0QlIsWUFEc0IsRUFFdEJGLFNBQVMsQ0FBQ1csS0FBVixDQUFnQjtBQUNkQyxJQUFBQSxZQUFZLEVBQUVOLEtBREE7QUFFZE8sSUFBQUEsV0FBVyxFQUFFTjtBQUZDLEdBQWhCLENBRnNCLEVBTXRCWCxPQU5zQixFQU90QixJQVBzQixFQVF0Qk0sWUFBWSxDQUFDWSx1QkFBYixFQVJzQixDQUF4Qjs7QUFXQSxNQUFNQyxrQkFBa0IsR0FBR04sa0JBQVNPLFVBQVQsQ0FDekJSLGVBRHlCLEVBRXpCQSxlQUFlLENBQUNTLGlCQUFoQixFQUZ5QixFQUd6QixHQUh5QixDQUEzQjs7QUFNQSxNQUFNQyxjQUFjLEdBQUdDLHFCQUFZQyxJQUFaLENBQWlCekIsV0FBakIsRUFBOEJvQixrQkFBOUIsRUFBa0QsZ0JBQWxELENBQXZCOztBQUNBLFNBQU9JLHFCQUFZRSxjQUFaLENBQTJCSCxjQUEzQixFQUEyQ0gsa0JBQWtCLENBQUNFLGlCQUFuQixFQUEzQyxDQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGl0b3JTdGF0ZSwgTW9kaWZpZXIgfSBmcm9tICdkcmFmdC1qcyc7XG5pbXBvcnQgZ2V0U2VhcmNoV29yZCBmcm9tICcuL2dldFNlYXJjaFdvcmQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbnNlcnRNZW50aW9uKGVkaXRvclN0YXRlLCBtZW50aW9uLCBkYXRhLCBtb2RlKSB7XG4gIGNvbnN0IGVudGl0eU1vZGUgPSBtb2RlID09PSAnaW1tdXRhYmxlJyA/ICdJTU1VVEFCTEUnIDogJ01VVEFCTEUnO1xuICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3JTdGF0ZS5nZXRTZWxlY3Rpb24oKTtcbiAgY29uc3QgY29udGVudFN0YXRlID0gZWRpdG9yU3RhdGUuZ2V0Q3VycmVudENvbnRlbnQoKTtcblxuICBjb250ZW50U3RhdGUuY3JlYXRlRW50aXR5KCdtZW50aW9uJywgZW50aXR5TW9kZSwgZGF0YSB8fCBtZW50aW9uKTtcbiAgY29uc3Qgc2VhcmNoV29yZCA9IGdldFNlYXJjaFdvcmQoZWRpdG9yU3RhdGUsIHNlbGVjdGlvbik7XG4gIGNvbnN0IHsgYmVnaW4sIGVuZCB9ID0gc2VhcmNoV29yZDtcbiAgY29uc3QgcmVwbGFjZWRDb250ZW50ID0gTW9kaWZpZXIucmVwbGFjZVRleHQoXG4gICAgY29udGVudFN0YXRlLFxuICAgIHNlbGVjdGlvbi5tZXJnZSh7XG4gICAgICBhbmNob3JPZmZzZXQ6IGJlZ2luLFxuICAgICAgZm9jdXNPZmZzZXQ6IGVuZCxcbiAgICB9KSxcbiAgICBtZW50aW9uLFxuICAgIG51bGwsXG4gICAgY29udGVudFN0YXRlLmdldExhc3RDcmVhdGVkRW50aXR5S2V5KClcbiAgKTtcblxuICBjb25zdCBJbnNlcnRTcGFjZUNvbnRlbnQgPSBNb2RpZmllci5pbnNlcnRUZXh0KFxuICAgIHJlcGxhY2VkQ29udGVudCxcbiAgICByZXBsYWNlZENvbnRlbnQuZ2V0U2VsZWN0aW9uQWZ0ZXIoKSxcbiAgICAnICcsXG4gICk7XG5cbiAgY29uc3QgbmV3RWRpdG9yU3RhdGUgPSBFZGl0b3JTdGF0ZS5wdXNoKGVkaXRvclN0YXRlLCBJbnNlcnRTcGFjZUNvbnRlbnQsICdpbnNlcnQtbWVudGlvbicpO1xuICByZXR1cm4gRWRpdG9yU3RhdGUuZm9yY2VTZWxlY3Rpb24obmV3RWRpdG9yU3RhdGUsIEluc2VydFNwYWNlQ29udGVudC5nZXRTZWxlY3Rpb25BZnRlcigpKTtcbn1cbiJdfQ==