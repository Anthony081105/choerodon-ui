14c4dec590dbdb383b7b1856f87eeea2
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("../../pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("../../pro/lib/data-set/FeedBack"));

var _utils = require("../../pro/lib/form/utils");

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};
var defaultSpinProps = {
  size: "default"
  /* default */
  ,
  wrapperClassName: ''
};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['collapseExpandIconPosition', 'left'], ['collapseTrigger', 'header'], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['lovTriggerMode', "icon"
/* icon */
], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableSelectedHighLightRow', false], ['tableRowHeight', 30], ['tableDefaultRenderer', ''], ['tableColumnResizable', true], ['tableSpinProps', defaultSpinProps], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['tableAlwaysShowRowBox', false], ['tableUseMouseBatchChoose', false], ['tableEditorNextKeyEnterDown', true], ['modalSectionBorder', true], ['modalOkFirst', true], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}], ['dropdownMatchSelectWidth', true], ['useColon', false], ['excludeUseColonTagList', _utils.defaultExcludeUseColonTag], ['lovTableProps', {}], ['textFieldAutoComplete', undefined], ['tableDragRow', false], ['tableDragColumn', false], ['numberFieldNonStrictStep', false]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZ3VyZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJkZWZhdWx0UmVuZGVyRW1wdHkiLCJkZWZhdWx0QnV0dG9uUHJvcHMiLCJjb2xvciIsImZ1bmNUeXBlIiwiZGVmYXVsdFNwaW5Qcm9wcyIsInNpemUiLCJ3cmFwcGVyQ2xhc3NOYW1lIiwiZ2xvYmFsQ29uZmlnIiwib2JzZXJ2YWJsZSIsIm1heEFnZSIsIm1heCIsImRlZmF1bHRGZWVkYmFjayIsImNhdGVnb3JpZXMiLCJqc29uRGF0ZSIsImRhdGUiLCJkYXRlVGltZSIsInRpbWUiLCJ5ZWFyIiwibW9udGgiLCJ3ZWVrIiwiZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZyIsImdldENvbmZpZyIsIm1lcmdlUHJvcHMiLCJPYmplY3QiLCJ2YWx1ZSIsImNvbmZpZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUE7O0FBQ0EsSUFBQSxTQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsaUJBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsZ0JBQUEsR0FBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQTs7QUFDQSxJQUFBLGNBQUEsR0FBQSxPQUFBLENBQUEsOEJBQUEsQ0FBQTs7QUFDQSxJQUFBLFNBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxpQ0FBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxNQUFBLEdBQUEsT0FBQSxDQUFBLDBCQUFBLENBQUE7Ozs7QUFDQSxJQUFNQSxrQkFBa0IsR0FBRyxTQUFyQkEsa0JBQXFCLENBQUEsYUFBQSxFQUFtQjtBQUMxQyxVQUFBLGFBQUE7QUFDSSxTQUFBLE9BQUE7QUFDSSxhQUFPLENBQUEsR0FBQSxjQUFBLENBQUEsRUFBQSxFQUFBLE9BQUEsRUFBUCxZQUFPLENBQVA7O0FBQ0osU0FBQSxRQUFBO0FBQ0ksYUFBTyxDQUFBLEdBQUEsY0FBQSxDQUFBLEVBQUEsRUFBQSxRQUFBLEVBQVAscUJB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QSxLQUE0QixDQUFBLEdBQUEsU0FBQSxDQUFBLFNBQUEsQ0FBQSxFQUFoQyxLQUFnQyxDQUFoQyxFQUFpRDtBQUM3Q2YsUUFBQUEsWUFBWSxDQUFaQSxHQUFBQSxDQUFBQSxHQUFBQSxFQUFBQSxDQUFBQSxHQUFBQSxjQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxFQUFBQSxFQUFBQSxFQUNPLENBQUEsR0FBQSxLQUFBLENBQUEsSUFBQSxFQUFLQSxZQUFZLENBQVpBLEdBQUFBLENBRFpBLEdBQ1lBLENBQUwsQ0FEUEEsRUFBQUEsRUFBQUEsRUFBQUEsS0FBQUEsQ0FBQUE7QUFESixPQUFBLE1BTUs7QUFDREEsUUFBQUEsWUFBWSxDQUFaQSxHQUFBQSxDQUFBQSxHQUFBQSxFQUFzQmtCLE1BQU0sQ0FBNUJsQixHQUE0QixDQUE1QkE7QUFDSDtBQVZMZ0IsS0FBQUE7QUFESixHQUFBO0FBY0giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvYnNlcnZhYmxlLCBydW5JbkFjdGlvbiwgdG9KUyB9IGZyb20gJ21vYngnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJ2xvZGFzaC9pc09iamVjdCc7XG5pbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnY2hvZXJvZG9uLXVpLWZvbnQnO1xuaW1wb3J0IHsgJGwgfSBmcm9tICcuLi8uLi9wcm8vbGliL2xvY2FsZS1jb250ZXh0JztcbmltcG9ydCBkZWZhdWx0RmVlZGJhY2sgZnJvbSAnLi4vLi4vcHJvL2xpYi9kYXRhLXNldC9GZWVkQmFjayc7XG5pbXBvcnQgeyBkZWZhdWx0RXhjbHVkZVVzZUNvbG9uVGFnIH0gZnJvbSAnLi4vLi4vcHJvL2xpYi9mb3JtL3V0aWxzJztcbmNvbnN0IGRlZmF1bHRSZW5kZXJFbXB0eSA9IChjb21wb25lbnROYW1lKSA9PiB7XG4gICAgc3dpdGNoIChjb21wb25lbnROYW1lKSB7XG4gICAgICAgIGNhc2UgJ1RhYmxlJzpcbiAgICAgICAgICAgIHJldHVybiAkbCgnVGFibGUnLCAnZW1wdHlfZGF0YScpO1xuICAgICAgICBjYXNlICdTZWxlY3QnOlxuICAgICAgICAgICAgcmV0dXJuICRsKCdTZWxlY3QnLCAnbm9fbWF0Y2hpbmdfcmVzdWx0cycpO1xuICAgICAgICBkZWZhdWx0OlxuICAgIH1cbn07XG5jb25zdCBkZWZhdWx0QnV0dG9uUHJvcHMgPSB7IGNvbG9yOiBcInByaW1hcnlcIiAvKiBwcmltYXJ5ICovLCBmdW5jVHlwZTogXCJmbGF0XCIgLyogZmxhdCAqLyB9O1xuY29uc3QgZGVmYXVsdFNwaW5Qcm9wcyA9IHsgc2l6ZTogXCJkZWZhdWx0XCIgLyogZGVmYXVsdCAqLywgd3JhcHBlckNsYXNzTmFtZTogJycgfTtcbmNvbnN0IGdsb2JhbENvbmZpZyA9IG9ic2VydmFibGUubWFwKFtcbiAgICBbJ3ByZWZpeENscycsICdjN24nXSxcbiAgICBbJ3Byb1ByZWZpeENscycsICdjN24tcHJvJ10sXG4gICAgWydpY29uZm9udFByZWZpeCcsICdpY29uJ10sXG4gICAgWydyaXBwbGUnLCB0cnVlXSxcbiAgICBbJ2NvbGxhcHNlRXhwYW5kSWNvblBvc2l0aW9uJywgJ2xlZnQnXSxcbiAgICBbJ2NvbGxhcHNlVHJpZ2dlcicsICdoZWFkZXInXSxcbiAgICBbJ2xvb2t1cENhY2hlJywgeyBtYXhBZ2U6IDEwMDAgKiA2MCAqIDEwLCBtYXg6IDEwMCB9XSxcbiAgICBbJ2xvb2t1cFVybCcsIGNvZGUgPT4gYC9jb21tb24vY29kZS8ke2NvZGV9L2BdLFxuICAgIFsnbG9va3VwQXhpb3NNZXRob2QnLCAncG9zdCddLFxuICAgIC8vIFtcbiAgICAvLyAgICdsb29rdXBCYXRjaEF4aW9zQ29uZmlnJyxcbiAgICAvLyAgIGNvZGVzID0+ICh7XG4gICAgLy8gICAgIHVybDogJy9jb21tb24vYmF0Y2gnLFxuICAgIC8vICAgICBwYXJhbXM6IGNvZGVzLnJlZHVjZSgob2JqLCBjb2RlKSA9PiB7XG4gICAgLy8gICAgICAgb2JqW2NvZGVdID0gY29kZTtcbiAgICAvLyAgICAgICByZXR1cm4gb2JqO1xuICAgIC8vICAgICB9LCB7fSksXG4gICAgLy8gICB9KSxcbiAgICAvLyBdLFxuICAgIFsnbG92RGVmaW5lVXJsJywgY29kZSA9PiBgL3N5cy9sb3YvbG92X2RlZmluZT9jb2RlPSR7Y29kZX1gXSxcbiAgICBbJ2xvdlF1ZXJ5VXJsJywgY29kZSA9PiBgL2NvbW1vbi9sb3YvZGF0YXNldC8ke2NvZGV9YF0sXG4gICAgWydsb3ZUcmlnZ2VyTW9kZScsIFwiaWNvblwiIC8qIGljb24gKi9dLFxuICAgIFsnZGF0YUtleScsICdyb3dzJ10sXG4gICAgWyd0b3RhbEtleScsICd0b3RhbCddLFxuICAgIFsnc3RhdHVzS2V5JywgJ19fc3RhdHVzJ10sXG4gICAgWyd0bHNLZXknLCAnX190bHMnXSxcbiAgICBbXG4gICAgICAgICdzdGF0dXMnLFxuICAgICAgICB7IFtcImFkZFwiIC8qIGFkZCAqL106ICdhZGQnLCBbXCJ1cGRhdGVcIiAvKiB1cGRhdGUgKi9dOiAndXBkYXRlJywgW1wiZGVsZXRlXCIgLyogZGVsZXRlICovXTogJ2RlbGV0ZScgfSxcbiAgICBdLFxuICAgIFsnbGFiZWxMYXlvdXQnLCBcImhvcml6b250YWxcIiAvKiBob3Jpem9udGFsICovXSxcbiAgICBbJ3F1ZXJ5QmFyJywgXCJub3JtYWxcIiAvKiBub3JtYWwgKi9dLFxuICAgIFsndGFibGVCb3JkZXInLCB0cnVlXSxcbiAgICBbJ3RhYmxlSGlnaExpZ2h0Um93JywgdHJ1ZV0sXG4gICAgWyd0YWJsZVNlbGVjdGVkSGlnaExpZ2h0Um93JywgZmFsc2VdLFxuICAgIFsndGFibGVSb3dIZWlnaHQnLCAzMF0sXG4gICAgWyd0YWJsZURlZmF1bHRSZW5kZXJlcicsICcnXSxcbiAgICBbJ3RhYmxlQ29sdW1uUmVzaXphYmxlJywgdHJ1ZV0sXG4gICAgWyd0YWJsZVNwaW5Qcm9wcycsIGRlZmF1bHRTcGluUHJvcHNdLFxuICAgIFsndGFibGVCdXR0b25Qcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gICAgWyd0YWJsZUNvbW1hbmRQcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gICAgWyd0YWJsZUFsd2F5c1Nob3dSb3dCb3gnLCBmYWxzZV0sXG4gICAgWyd0YWJsZVVzZU1vdXNlQmF0Y2hDaG9vc2UnLCBmYWxzZV0sXG4gICAgWyd0YWJsZUVkaXRvck5leHRLZXlFbnRlckRvd24nLCB0cnVlXSxcbiAgICBbJ21vZGFsU2VjdGlvbkJvcmRlcicsIHRydWVdLFxuICAgIFsnbW9kYWxPa0ZpcnN0JywgdHJ1ZV0sXG4gICAgWydidXR0b25Db2xvcicsIFwiZGVmYXVsdFwiIC8qIGRlZmF1bHQgKi9dLFxuICAgIFsnYnV0dG9uRnVuY1R5cGUnLCBcInJhaXNlZFwiIC8qIHJhaXNlZCAqL10sXG4gICAgWydmZWVkYmFjaycsIGRlZmF1bHRGZWVkYmFja10sXG4gICAgWydyZW5kZXJFbXB0eScsIGRlZmF1bHRSZW5kZXJFbXB0eV0sXG4gICAgWydpY29ucycsIGNhdGVnb3JpZXNdLFxuICAgIFtcbiAgICAgICAgJ2Zvcm1hdHRlcicsXG4gICAgICAgIHtcbiAgICAgICAgICAgIGpzb25EYXRlOiAnWVlZWS1NTS1ERCBISDptbTpzcycsXG4gICAgICAgICAgICBkYXRlOiAnWVlZWS1NTS1ERCcsXG4gICAgICAgICAgICBkYXRlVGltZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgICAgICAgdGltZTogJ0hIOm1tOnNzJyxcbiAgICAgICAgICAgIHllYXI6ICdZWVlZJyxcbiAgICAgICAgICAgIG1vbnRoOiAnWVlZWS1NTScsXG4gICAgICAgICAgICB3ZWVrOiAnR0dHRy1XbycsXG4gICAgICAgIH0sXG4gICAgXSxcbiAgICBbJ2Ryb3Bkb3duTWF0Y2hTZWxlY3RXaWR0aCcsIHRydWVdLFxuICAgIFsndXNlQ29sb24nLCBmYWxzZV0sXG4gICAgWydleGNsdWRlVXNlQ29sb25UYWdMaXN0JywgZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZ10sXG4gICAgWydsb3ZUYWJsZVByb3BzJywge31dLFxuICAgIFsndGV4dEZpZWxkQXV0b0NvbXBsZXRlJywgdW5kZWZpbmVkXSxcbiAgICBbJ3RhYmxlRHJhZ1JvdycsIGZhbHNlXSxcbiAgICBbJ3RhYmxlRHJhZ0NvbHVtbicsIGZhbHNlXSxcbiAgICBbJ251bWJlckZpZWxkTm9uU3RyaWN0U3RlcCcsIGZhbHNlXSxcbl0pO1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZyhrZXkpIHtcbiAgICAvLyBGSVhNRTogb2JzZXJ2YWJsZS5tYXDmiormnoTlu7ptYXDml7bkvKDlhaXnmoRrZXnnsbvlnovlkox2YWx1Zeexu+Wei+WIhuWIq+WBmuS6hnVuaW9u77yMXG4gICAgLy8g5Lii5aSx5LqG5LiA5LiA5a+55bqU55qE5pig5bCE5YWz57O777yM5a+86Ie05Ye95pWw6LCD55So6ICF5peg5rOV5L2/55SodW5pb27lkI7nmoTov5Tlm57lgLznsbvlnovvvIzlm6DmraTpnIDopoHmjIflrprmnKzlh73mlbDov5Tlm57lgLzkuLphbnlcbiAgICByZXR1cm4gZ2xvYmFsQ29uZmlnLmdldChrZXkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZWZpeENscyhzdWZmaXhDbHMsIGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgIGlmIChjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbWl6ZVByZWZpeENscztcbiAgICB9XG4gICAgcmV0dXJuIGAke2dldENvbmZpZygncHJlZml4Q2xzJyl9LSR7c3VmZml4Q2xzfWA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvUHJlZml4Q2xzKHN1ZmZpeENscywgY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgaWYgKGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgICAgICByZXR1cm4gY3VzdG9taXplUHJlZml4Q2xzO1xuICAgIH1cbiAgICByZXR1cm4gYCR7Z2V0Q29uZmlnKCdwcm9QcmVmaXhDbHMnKX0tJHtzdWZmaXhDbHN9YDtcbn1cbmNvbnN0IG1lcmdlUHJvcHMgPSBbJ3RyYW5zcG9ydCcsICdmZWVkYmFjaycsICdmb3JtYXR0ZXInXTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWcpIHtcbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuICAgICAgICAgICAgaWYgKG1lcmdlUHJvcHMuaW5jbHVkZXMoa2V5KSAmJiBpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxDb25maWcuc2V0KGtleSwge1xuICAgICAgICAgICAgICAgICAgICAuLi50b0pTKGdsb2JhbENvbmZpZy5nZXQoa2V5KSksXG4gICAgICAgICAgICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsQ29uZmlnLnNldChrZXksIGNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4iXX0=