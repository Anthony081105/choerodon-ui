{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/modal/Modal.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { cloneElement, isValidElement, Key, ReactNode, CSSProperties } from 'react';\nimport PropTypes from 'prop-types';\nimport omit from 'lodash/omit';\nimport defer from 'lodash/defer';\nimport noop from 'lodash/noop';\nimport classNames from 'classnames';\nimport classes from 'component-classes';\nimport { pxToRem } from 'choerodon-ui/lib/_util/UnitConvertor';\nimport KeyCode from 'choerodon-ui/lib/_util/KeyCode';\nimport { getConfig } from 'choerodon-ui/lib/configure';\nimport ViewComponent, { ViewComponentProps } from '../core/ViewComponent';\nimport Icon from '../icon';\nimport autobind from '../_util/autobind';\nimport Button, { ButtonProps } from '../button/Button';\nimport EventManager from '../_util/EventManager';\nimport isEmpty from '../_util/isEmpty';\nimport { ButtonColor, FuncType } from '../button/enum';\nimport asyncComponent, { AsyncCmpLoadingFunction } from '../_util/AsyncComponent';\nimport message from '../message';\nimport exception from '../_util/exception';\nimport { $l } from '../locale-context';\nimport DataSetRequestError from '../data-set/DataSetRequestError';\nimport { suffixCls } from './utils';\n\nexport const destroyFns: Array<() => void> = [];\n\nexport interface ModalProps extends ViewComponentProps {\n  closable?: boolean;\n  movable?: boolean;\n  fullScreen?: boolean;\n  maskClosable?: boolean;\n  maskStyle?: CSSProperties;\n  mask?: boolean,\n  maskClassName?: string,\n  keyboardClosable?: boolean;\n  footer?: ((okBtn: ReactNode, cancelBtn: ReactNode) => ReactNode) | ReactNode | boolean;\n  destroyOnClose?: boolean;\n  okText?: ReactNode;\n  cancelText?: ReactNode;\n  okProps?: ButtonProps;\n  cancelProps?: ButtonProps;\n  onClose?: () => Promise<boolean | undefined>;\n  onOk?: () => Promise<boolean | undefined>;\n  onCancel?: () => Promise<boolean | undefined>;\n  afterClose?: () => void;\n  close?: () => void;\n  update?: (props?: ModalProps) => void;\n  okCancel?: boolean;\n  drawer?: boolean;\n  drawerTransitionName?: string;\n  key?: Key;\n  border?: boolean;\n  okFirst?: boolean;\n}\n\nexport default class Modal extends ViewComponent<ModalProps> {\n  static displayName = 'Modal';\n\n  static propTypes = {\n    ...ViewComponent.propTypes,\n    closable: PropTypes.bool,\n    movable: PropTypes.bool,\n    fullScreen: PropTypes.bool,\n    maskClosable: PropTypes.bool,\n    maskStyle: PropTypes.object,\n    mask: PropTypes.bool,\n    maskClassName: PropTypes.string,\n    keyboardClosable: PropTypes.bool,\n    footer: PropTypes.oneOfType([PropTypes.func, PropTypes.node, PropTypes.bool]),\n    destroyOnClose: PropTypes.bool,\n    okText: PropTypes.node,\n    cancelText: PropTypes.node,\n    okProps: PropTypes.object,\n    cancelProps: PropTypes.object,\n    onClose: PropTypes.func,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    afterClose: PropTypes.func,\n    okCancel: PropTypes.bool,\n    drawer: PropTypes.bool,\n    // title: PropTypes.node,\n    // 此处原本允许title传入node，但是类型为PropTypes.node时无法正确继承ViewComponent\n    // 父类中的title指的是HTML元素的title属性，此处title指modal标题，产生歧义，暂时设置为string\n    // TODO: 添加modalTitle属性替代此处的title\n    title: PropTypes.string,\n    okFirst: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    suffixCls,\n    closable: false,\n    movable: true,\n    maskClosable: false,\n    mask: true,\n    keyboardClosable: true,\n    okCancel: true,\n    destroyOnClose: true,\n    fullScreen: false,\n    drawer: false,\n    autoFocus: true,\n  };\n\n  static key;\n\n  static open;\n\n  static confirm;\n\n  static info;\n\n  static success;\n\n  static error;\n\n  static warning;\n\n  static destroyAll: () => void;\n\n  moveEvent: EventManager = new EventManager(typeof window === 'undefined' ? undefined : document);\n\n  okCancelEvent: EventManager = new EventManager();\n\n  offset?: [number | string | undefined, number | string | undefined];\n\n  cancelButton: Button | null;\n\n  saveCancelRef = node => (this.cancelButton = node);\n\n  handleKeyDown = e => {\n    const { cancelButton } = this;\n    if (cancelButton && !cancelButton.isDisabled() && e.keyCode === KeyCode.ESC) {\n      cancelButton.handleClickWait(e);\n    }\n  };\n\n  getOtherProps() {\n    const otherProps = omit(super.getOtherProps(), [\n      'closable',\n      'movable',\n      'maskClosable',\n      'maskStyle',\n      'mask',\n      'maskClassName',\n      'keyboardClosable',\n      'fullScreen',\n      'title',\n      'footer',\n      'close',\n      'update',\n      'okText',\n      'cancelText',\n      'okCancel',\n      'onClose',\n      'onOk',\n      'onCancel',\n      'destroyOnClose',\n      'drawer',\n      'afterClose',\n      'okProps',\n      'cancelProps',\n      'border',\n      'okFirst',\n      'drawerTransitionName',\n    ]);\n    if (this.props.keyboardClosable) {\n      otherProps.autoFocus = true;\n      otherProps.tabIndex = -1;\n      otherProps.onKeyDown = this.handleKeyDown;\n    }\n\n    return otherProps;\n  }\n\n  getClassName(): string | undefined {\n    const {\n      prefixCls,\n      props: { style = {}, fullScreen, drawer, border = getConfig('modalSectionBorder') },\n    } = this;\n\n    return super.getClassName({\n      [`${prefixCls}-center`]: !drawer && !('left' in style || 'right' in style) && !this.offset,\n      [`${prefixCls}-fullscreen`]: fullScreen,\n      [`${prefixCls}-drawer`]: drawer,\n      [`${prefixCls}-border`]: border,\n    });\n  }\n\n  render() {\n    const { prefixCls } = this;\n    const header = this.getHeader();\n    const body = this.getBody();\n    const footer = this.getFooter();\n    return (\n      <div {...this.getMergedProps()}>\n        <div className={`${prefixCls}-content`}>\n          {header}\n          {body}\n          {footer}\n        </div>\n      </div>\n    );\n  }\n\n  componentWillUpdate({ hidden }) {\n    if (hidden === false && hidden !== this.props.hidden) {\n      defer(() => this.focus());\n    }\n  }\n\n  componentWillUnmount() {\n    this.moveEvent.clear();\n    this.okCancelEvent.clear();\n  }\n\n  @autobind\n  handleHeaderMouseDown(downEvent: MouseEvent) {\n    const { element } = this;\n    if (element) {\n      const { prefixCls } = this;\n      const { clientX, clientY } = downEvent;\n      const { offsetLeft, offsetTop } = element;\n      this.moveEvent\n        .addEventListener('mousemove', (moveEvent: MouseEvent) => {\n          const { clientX: moveX, clientY: moveY } = moveEvent;\n          classes(element).remove(`${prefixCls}-center`);\n          const left = pxToRem(Math.max(offsetLeft + moveX - clientX, 0));\n          const top = pxToRem(Math.max(offsetTop + moveY - clientY, 0));\n          this.offset = [left, top];\n          Object.assign(element.style, {\n            left,\n            top,\n          });\n        })\n        .addEventListener('mouseup', () => {\n          this.moveEvent.clear();\n        });\n    }\n  }\n\n  @autobind\n  async handleOk() {\n    const { onOk = noop } = this.props;\n    const promise = Promise.all([onOk(), this.okCancelEvent.fireEvent('ok')]);\n    try {\n      const [ret1, ret2] = await promise;\n      if (ret1 !== false && ret2) {\n        this.close();\n      }\n    } catch (e) {\n      if (!(e instanceof DataSetRequestError)) {\n        message.error(exception(e));\n      }\n      throw e;\n    }\n  }\n\n  @autobind\n  async handleCancel() {\n    const { onCancel = noop } = this.props;\n    const promise = Promise.all([onCancel(), this.okCancelEvent.fireEvent('cancel')]);\n    try {\n      const [ret1, ret2] = await promise;\n      if (ret1 !== false && ret2) {\n        this.close();\n      }\n    } catch (e) {\n      if (!(e instanceof DataSetRequestError)) {\n        message.error(exception(e));\n      }\n      throw e;\n    }\n  }\n\n  getTitle(): ReactNode {\n    const {\n      props: { title },\n      prefixCls,\n    } = this;\n    if (title) {\n      return <div className={`${prefixCls}-title`}>{title}</div>;\n    }\n  }\n\n  getHeader(): ReactNode {\n    const {\n      prefixCls,\n      props: { closable, movable, fullScreen, drawer },\n    } = this;\n    const title = this.getTitle();\n    const buttons = this.getHeaderButtons();\n    if (title || closable || movable) {\n      const headerProps: any = {\n        className: classNames(`${prefixCls}-header`, {\n          [`${prefixCls}-movable`]: movable && !fullScreen && !drawer,\n        }),\n      };\n      if (movable && !fullScreen && !drawer) {\n        headerProps.onMouseDown = this.handleHeaderMouseDown;\n      }\n      return (\n        <div {...headerProps}>\n          {title}\n          {buttons}\n        </div>\n      );\n    }\n  }\n\n  getHeaderButtons(): ReactNode {\n    const { prefixCls } = this;\n    const closeButton = this.getCloseButton();\n    if (closeButton) {\n      return <div className={`${prefixCls}-header-buttons`}>{closeButton}</div>;\n    }\n  }\n\n  getCloseButton(): ReactNode {\n    const {\n      prefixCls,\n      props: { closable },\n    } = this;\n    if (closable) {\n      return (\n        <button type=\"button\" className={`${prefixCls}-header-button`} onClick={this.close}>\n          <Icon type=\"close\" />\n        </button>\n      );\n    }\n  }\n\n  registerOk = ok => {\n    this.okCancelEvent.removeEventListener('ok');\n    this.okCancelEvent.addEventListener('ok', ok);\n  };\n\n  registerCancel = cancel => {\n    this.okCancelEvent.removeEventListener('cancel');\n    this.okCancelEvent.addEventListener('cancel', cancel);\n  };\n\n  renderChildren(children: ReactNode): ReactNode {\n    if (children) {\n      const { prefixCls, props } = this;\n      const { close = noop, update = noop } = props;\n      const modal = {\n        close,\n        update,\n        props,\n        handleOk: this.registerOk,\n        handleCancel: this.registerCancel,\n      };\n      return (\n        <div className={`${prefixCls}-body`}>\n          {isValidElement(children) ? cloneElement<any>(children, { modal }) : children}\n        </div>\n      );\n    }\n  }\n\n  getBody(): ReactNode {\n    const { children } = this.props;\n    return this.renderChildren(\n      typeof children === 'function'\n        ? asyncComponent(children as AsyncCmpLoadingFunction)\n        : children,\n    );\n  }\n\n  getFooter(): ReactNode {\n    const {\n      okProps,\n      cancelProps,\n      drawer,\n      okText = $l('Modal', 'ok'),\n      cancelText = $l('Modal', 'cancel'),\n      footer = this.getDefaultFooter,\n    } = this.props;\n    const funcType: FuncType | undefined = drawer\n      ? FuncType.raised\n      : (getConfig('buttonFuncType') as FuncType);\n\n    const okBtn = (\n      <Button\n        key=\"ok\"\n        funcType={funcType}\n        color={ButtonColor.primary}\n        onClick={this.handleOk}\n        {...okProps}\n      >\n        {okText}\n      </Button>\n    );\n    const cancelBtn = (\n      <Button\n        key=\"cancel\"\n        ref={this.saveCancelRef}\n        funcType={funcType}\n        onClick={this.handleCancel}\n        {...cancelProps}\n      >\n        {cancelText}\n      </Button>\n    );\n\n    if (typeof footer === 'function') {\n      return this.getWrappedFooter(footer(okBtn, cancelBtn));\n    }\n\n    if (!isEmpty(footer, true)) {\n      return this.getWrappedFooter(footer);\n    }\n  }\n\n  getWrappedFooter(footer: ReactNode) {\n    const { prefixCls } = this;\n\n    const { drawer } = this.props;\n\n    const className = classNames(`${prefixCls}-footer`, {\n      [`${prefixCls}-footer-drawer`]: !!drawer,\n    });\n    return <div className={className}>{footer}</div>;\n  }\n\n  getDefaultFooter = (okBtn: ReactNode, cancelBtn: ReactNode) => {\n    const { okCancel, okFirst = getConfig('modalOkFirst'), drawer } = this.props;\n    const buttons = [okBtn];\n    if (okCancel) {\n      if (okFirst || drawer) {\n        buttons.push(cancelBtn);\n      } else {\n        buttons.unshift(cancelBtn);\n      }\n    }\n    return <div>{buttons}</div>;\n  };\n\n  @autobind\n  close() {\n    const { close = noop } = this.props;\n    close();\n  }\n}\n"]}