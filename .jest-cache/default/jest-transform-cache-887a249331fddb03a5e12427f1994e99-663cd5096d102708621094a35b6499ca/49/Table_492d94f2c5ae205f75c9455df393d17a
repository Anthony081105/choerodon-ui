8379529d5a792885cffe3fac32088e6e
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _debounce = _interopRequireDefault(require("lodash/debounce"));

var _isEqual = _interopRequireDefault(require("lodash/isEqual"));

var _merge = _interopRequireDefault(require("lodash/merge"));

var _miniStore = require("mini-store");

var _componentClasses = _interopRequireDefault(require("component-classes"));

var _warning = _interopRequireDefault(require("../../_util/warning"));

var _addEventListener = _interopRequireDefault(require("../../_util/addEventListener"));

var _ColumnManager = _interopRequireDefault(require("./ColumnManager"));

var _HeadTable = _interopRequireDefault(require("./HeadTable"));

var _BodyTable = _interopRequireDefault(require("./BodyTable"));

var _FootTable = _interopRequireDefault(require("./FootTable"));

var _ExpandableTable = _interopRequireDefault(require("./ExpandableTable"));

function _createSuper(Derived) {
  function isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;

    try {
      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
      return true;
    } catch (e) {
      return false;
    }
  }

  return function () {
    var Super = (0, _getPrototypeOf2["default"])(Derived),
        result;

    if (isNativeReflectConstruct()) {
      var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return (0, _possibleConstructorReturn2["default"])(this, result);
  };
}

var Table =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Table, _Component);

  var _super = _createSuper(Table);

  function Table(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, Table);
    _this = _super.call(this, props);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getRowKey", function (record, index) {
      var rowKey = _this.props.rowKey;
      var key = typeof rowKey === 'function' ? rowKey(record, index) : record[rowKey];
      (0, _warning["default"])(key !== undefined, 'Each record in table should have a unique `key` prop,' + 'or set `rowKey` to an unique primary key.');
      return key === undefined ? index : key;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleWindowResize", function () {
      _this.syncFixedTableRowHeight();

      _this.setScrollPositionClassName();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "syncFixedTableRowHeight", function () {
      var tableRect = _this.tableNode.getBoundingClientRect(); // If tableNode's height less than 0, suppose it is hidden and don't recalculate rowHeight.


      if (tableRect.height !== undefined && tableRect.height <= 0) {
        return;
      }

      var prefixCls = _this.props.prefixCls;
      var headRows = _this.headTable ? _this.headTable.querySelectorAll('thead') : _this.bodyTable.querySelectorAll('thead');
      var footRows = _this.footTable ? _this.footTable.querySelectorAll('tfoot') : _this.bodyTable.querySelectorAll('tfoot');
      var bodyRows = _this.bodyTable.querySelectorAll(".".concat(prefixCls, "-row")) || [];
      var fixedColumnsHeadRowsHeight = [].map.call(headRows, function (row) {
        return row.getBoundingClientRect().height || 'auto';
      });
      var fixedColumnsFootRowsHeight = [].map.call(footRows, function (row) {
        return row.getBoundingClientRect().height || 'auto';
      });
      var fixedColumnsBodyRowsHeight = [].map.call(bodyRows, function (row) {
        return row.getBoundingClientRect().height || 'auto';
      });

      var state = _this.store.getState();

      if ((0, _isEqual["default"])(state.fixedColumnsHeadRowsHeight, fixedColumnsHeadRowsHeight) && (0, _isEqual["default"])(state.fixedColumnsFootRowsHeight, fixedColumnsFootRowsHeight) && (0, _isEqual["default"])(state.fixedColumnsBodyRowsHeight, fixedColumnsBodyRowsHeight)) {
        return;
      }

      _this.store.setState({
        fixedColumnsHeadRowsHeight: fixedColumnsHeadRowsHeight,
        fixedColumnsFootRowsHeight: fixedColumnsFootRowsHeight,
        fixedColumnsBodyRowsHeight: fixedColumnsBodyRowsHeight
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleBodyScrollLeft", function (e) {
      if (e.currentTarget !== e.target) {
        return;
      }

      var target = e.target;
      var _this$props$scroll = _this.props.scroll,
          scroll = _this$props$scroll === void 0 ? {} : _this$props$scroll;

      var _assertThisInitialize = (0, _assertThisInitialized2["default"])(_this),
          headTable = _assertThisInitialize.headTable,
          bodyTable = _assertThisInitialize.bodyTable,
          footTable = _assertThisInitialize.footTable;

      if (target.scrollLeft !== _this.lastScrollLeft && scroll.x) {
        if (target === bodyTable) {
          if (headTable) headTable.scrollLeft = target.scrollLeft;
          if (footTable) footTable.scrollLeft = target.scrollLeft;
        } else if (target === headTable) {
          if (bodyTable) bodyTable.scrollLeft = target.scrollLeft;
          if (footTable) footTable.scrollLeft = target.scrollLeft;
        } else if (target === footTable) {
          if (bodyTable) bodyTable.scrollLeft = target.scrollLeft;
          if (headTable) headTable.scrollLeft = target.scrollLeft;
        }

        _this.setScrollPositionClassName();
      } // Remember last scrollLeft for scroll direction detecting.


      _this.lastScrollLeft = target.scrollLeft;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleBodyScrollTop", function (e) {
      var target = e.target;
      var _this$props$scroll2 = _this.props.scroll,
          scroll = _this$props$scroll2 === void 0 ? {} : _this$props$scroll2;

      var _assertThisInitialize2 = (0, _assertThisInitialized2["default"])(_this),
          headTable = _assertThisInitialize2.headTable,
          bodyTable = _assertThisInitialize2.bodyTable,
          fixedColumnsBodyLeft = _assertThisInitialize2.fixedColumnsBodyLeft,
          fixedColumnsBodyRight = _assertThisInitialize2.fixedColumnsBodyRight;

      if (target.scrollTop !== _this.lastScrollTop && scroll.y && target !== headTable) {
        var scrollTop = target.scrollTop;

        if (fixedColumnsBodyLeft && target !== fixedColumnsBodyLeft) {
          fixedColumnsBodyLeft.scrollTop = scrollTop;
        }

        if (fixedColumnsBodyRight && target !== fixedColumnsBodyRight) {
          fixedColumnsBodyRight.scrollTop = scrollTop;
        }

        if (bodyTable && target !== bodyTable) {
          bodyTable.scrollTop = scrollTop;
        }
      } // Remember last scrollTop for scroll direction detecting.


      _this.lastScrollTop = target.scrollTop;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "handleBodyScroll", function (e) {
      _this.handleBodyScrollLeft(e);

      _this.handleBodyScrollTop(e);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "saveRef", function (name) {
      return function (node) {
        _this[name] = node;
      };
    });
    ['onRowClick', 'onRowDoubleClick', 'onRowContextMenu', 'onRowMouseEnter', 'onRowMouseLeave'].forEach(function (name) {
      (0, _warning["default"])(props[name] === undefined, "".concat(name, " is deprecated, please use onRow instead."));
    });
    (0, _warning["default"])(props.getBodyWrapper === undefined, 'getBodyWrapper is deprecated, please use custom components instead.');
    _this.columnManager = new _ColumnManager["default"](props.columns, props.children);
    _this.store = (0, _miniStore.create)({
      currentHoverKey: null,
      fixedColumnsHeadRowsHeight: [],
      fixedColumnsFootRowsHeight: [],
      fixedColumnsBodyRowsHeight: []
    });

    _this.setScrollPosition('left');

    _this.debouncedWindowResize = (0, _debounce["default"])(_this.handleWindowResize, 150);
    return _this;
  }

  (0, _createClass2["default"])(Table, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        table: {
          props: this.props,
          columnManager: this.columnManager,
          saveRef: this.saveRef,
          components: (0, _merge["default"])({
            table: 'table',
            header: {
              wrapper: 'thead',
              row: 'tr',
              cell: 'th'
            },
            body: {
              wrapper: 'tbody',
              row: 'tr',
              cell: 'td'
            },
            footer: {
              wrapper: 'tfoot',
              row: 'tr',
              cell: 'td'
            }
          }, this.props.components)
        }
      };
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this.columnManager.isAnyColumnsFixed()) {
        this.handleWindowResize();
        this.resizeEvent = (0, _addEventListener["default"])(window, 'resize', this.debouncedWindowResize);
      }
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (nextProps.columns && nextProps.columns !== this.props.columns) {
        this.columnManager.reset(nextProps.columns);
      } else if (nextProps.children !== this.props.children) {
        this.columnManager.reset(null, nextProps.children);
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (this.columnManager.isAnyColumnsFixed()) {
        this.handleWindowResize();

        if (!this.resizeEvent) {
          this.resizeEvent = (0, _addEventListener["default"])(window, 'resize', this.debouncedWindowResize);
        }
      } // when table changes to empty, reset scrollLeft


      if (prevProps.data.length > 0 && this.props.data.length === 0 && this.hasScrollX()) {
        this.resetScrollX();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.resizeEvent) {
        this.resizeEvent.remove();
      }

      if (this.debouncedWindowResize) {
        this.debouncedWindowResize.cancel();
      }
    }
  }, {
    key: "setScrollPosition",
    value: function setScrollPosition(position) {
      this.scrollPosition = position;

      if (this.tableNode) {
        var prefixCls = this.props.prefixCls;

        if (position === 'both') {
          (0, _componentClasses["default"])(this.tableNode).remove(new RegExp("^".concat(prefixCls, "-scroll-position-.+$"))).add("".concat(prefixCls, "-scroll-position-left")).add("".concat(prefixCls, "-scroll-position-right"));
        } else {
          (0, _componentClasses["default"])(this.tableNode).remove(new RegExp("^".concat(prefixCls, "-scroll-position-.+$"))).add("".concat(prefixCls, "-scroll-position-").concat(position));
        }
      }
    }
  }, {
    key: "setScrollPositionClassName",
    value: function setScrollPositionClassName() {
      var node = this.bodyTable;
      var scrollToLeft = node.scrollLeft === 0;
      var scrollToRight = node.scrollLeft + 1 >= node.children[0].getBoundingClientRect().width - node.getBoundingClientRect().width;

      if (scrollToLeft && scrollToRight) {
        this.setScrollPosition('both');
      } else if (scrollToLeft) {
        this.setScrollPosition('left');
      } else if (scrollToRight) {
        this.setScrollPosition('right');
      } else if (this.scrollPosition !== 'middle') {
        this.setScrollPosition('middle');
      }
    }
  }, {
    key: "resetScrollX",
    value: function resetScrollX() {
      if (this.headTable) {
        this.headTable.scrollLeft = 0;
      }

      if (this.bodyTable) {
        this.bodyTable.scrollLeft = 0;
      }

      if (this.footTable) {
        this.footTable.scrollLeft = 0;
      }
    }
  }, {
    key: "hasScrollX",
    value: function hasScrollX() {
      var _this$props$scroll3 = this.props.scroll,
          scroll = _this$props$scroll3 === void 0 ? {} : _this$props$scroll3;
      return 'x' in scroll;
    }
  }, {
    key: "renderMainTable",
    value: function renderMainTable() {
      var _this$props = this.props,
          scroll = _this$props.scroll,
          prefixCls = _this$props.prefixCls;
      var isAnyColumnsFixed = this.columnManager.isAnyColumnsFixed();
      var scrollable = isAnyColumnsFixed || scroll.x || scroll.y;
      var table = [this.renderTable({
        columns: this.columnManager.groupedColumns(),
        isAnyColumnsFixed: isAnyColumnsFixed
      }), this.renderEmptyText(), this.renderFooter()];
      return scrollable ? _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-scroll")
      }, table) : table;
    }
  }, {
    key: "renderLeftFixedTable",
    value: function renderLeftFixedTable() {
      var prefixCls = this.props.prefixCls;
      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-fixed-left")
      }, this.renderTable({
        columns: this.columnManager.leftColumns(),
        fixed: 'left'
      }));
    }
  }, {
    key: "renderRightFixedTable",
    value: function renderRightFixedTable() {
      var prefixCls = this.props.prefixCls;
      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-fixed-right")
      }, this.renderTable({
        columns: this.columnManager.rightColumns(),
        fixed: 'right'
      }));
    }
  }, {
    key: "renderTable",
    value: function renderTable(options) {
      var columns = options.columns,
          fixed = options.fixed,
          isAnyColumnsFixed = options.isAnyColumnsFixed;
      var _this$props2 = this.props,
          prefixCls = _this$props2.prefixCls,
          _this$props2$scroll = _this$props2.scroll,
          scroll = _this$props2$scroll === void 0 ? {} : _this$props2$scroll;
      var tableClassName = scroll.x || fixed ? "".concat(prefixCls, "-fixed") : '';

      var headTable = _react["default"].createElement(_HeadTable["default"], {
        key: "head",
        columns: columns,
        fixed: fixed,
        tableClassName: tableClassName,
        handleBodyScrollLeft: this.handleBodyScrollLeft,
        expander: this.expander
      });

      var bodyTable = _react["default"].createElement(_BodyTable["default"], {
        key: "body",
        columns: columns,
        fixed: fixed,
        tableClassName: tableClassName,
        getRowKey: this.getRowKey,
        handleBodyScroll: this.handleBodyScroll,
        expander: this.expander,
        isAnyColumnsFixed: isAnyColumnsFixed
      });

      var footTable = _react["default"].createElement(_FootTable["default"], {
        key: "foot",
        columns: columns,
        fixed: fixed,
        tableClassName: tableClassName,
        handleBodyScrollLeft: this.handleBodyScrollLeft,
        expander: this.expander
      });

      return [headTable, bodyTable, footTable];
    }
  }, {
    key: "renderTitle",
    value: function renderTitle() {
      var _this$props3 = this.props,
          title = _this$props3.title,
          prefixCls = _this$props3.prefixCls;
      return title ? _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-title"),
        key: "title"
      }, title(this.props.data)) : null;
    }
  }, {
    key: "renderFooter",
    value: function renderFooter() {
      var _this$props4 = this.props,
          footer = _this$props4.footer,
          prefixCls = _this$props4.prefixCls;
      return footer ? _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-footer"),
        key: "footer"
      }, footer(this.props.data)) : null;
    }
  }, {
    key: "renderEmptyText",
    value: function renderEmptyText() {
      var _this$props5 = this.props,
          emptyText = _this$props5.emptyText,
          prefixCls = _this$props5.prefixCls,
          data = _this$props5.data;

      if (data.length) {
        return null;
      }

      var emptyClassName = "".concat(prefixCls, "-placeholder");
      return _react["default"].createElement("div", {
        className: emptyClassName,
        key: "emptyText"
      }, typeof emptyText === 'function' ? emptyText() : emptyText);
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var props = this.props;
      var prefixCls = props.prefixCls;
      var className = props.prefixCls;

      if (props.className) {
        className += " ".concat(props.className);
      }

      if (props.useFixedHeader || props.scroll && props.scroll.y) {
        className += " ".concat(prefixCls, "-fixed-header");
      }

      if (this.scrollPosition === 'both') {
        className += " ".concat(prefixCls, "-scroll-position-left ").concat(prefixCls, "-scroll-position-right");
      } else {
        className += " ".concat(prefixCls, "-scroll-position-").concat(this.scrollPosition);
      }

      var hasLeftFixed = this.columnManager.isAnyColumnsLeftFixed();
      var hasRightFixed = this.columnManager.isAnyColumnsRightFixed();
      return _react["default"].createElement(_miniStore.Provider, {
        store: this.store
      }, _react["default"].createElement(_ExpandableTable["default"], (0, _extends2["default"])({}, props, {
        columnManager: this.columnManager,
        getRowKey: this.getRowKey
      }), function (expander) {
        _this2.expander = expander;
        return _react["default"].createElement("div", {
          ref: _this2.saveRef('tableNode'),
          className: className,
          style: props.style,
          id: props.id
        }, _this2.renderTitle(), _react["default"].createElement("div", {
          className: "".concat(prefixCls, "-content")
        }, _this2.renderMainTable(), hasLeftFixed && _this2.renderLeftFixedTable(), hasRightFixed && _this2.renderRightFixedTable()));
      }));
    }
  }]);
  return Table;
}(_react.Component);

exports["default"] = Table;
(0, _defineProperty2["default"])(Table, "propTypes", (0, _objectSpread2["default"])({
  data: _propTypes["default"].array,
  useFixedHeader: _propTypes["default"].bool,
  columns: _propTypes["default"].array,
  prefixCls: _propTypes["default"].string,
  bodyStyle: _propTypes["default"].object,
  style: _propTypes["default"].object,
  rowKey: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]),
  rowClassName: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]),
  onRow: _propTypes["default"].func,
  onHeaderRow: _propTypes["default"].func,
  onRowClick: _propTypes["default"].func,
  onRowDoubleClick: _propTypes["default"].func,
  onRowContextMenu: _propTypes["default"].func,
  onRowMouseEnter: _propTypes["default"].func,
  onRowMouseLeave: _propTypes["default"].func,
  showHeader: _propTypes["default"].bool,
  title: _propTypes["default"].func,
  id: _propTypes["default"].string,
  footer: _propTypes["default"].func,
  emptyText: _propTypes["default"].oneOfType([_propTypes["default"].node, _propTypes["default"].func]),
  scroll: _propTypes["default"].object,
  rowRef: _propTypes["default"].func,
  getBodyWrapper: _propTypes["default"].func,
  children: _propTypes["default"].node,
  components: _propTypes["default"].shape({
    table: _propTypes["default"].any,
    header: _propTypes["default"].shape({
      wrapper: _propTypes["default"].any,
      row: _propTypes["default"].any,
      cell: _propTypes["default"].any
    }),
    body: _propTypes["default"].shape({
      wrapper: _propTypes["default"].any,
      row: _propTypes["default"].any,
      cell: _propTypes["default"].any
    }),
    footer: _propTypes["default"].shape({
      wrapper: _propTypes["default"].any,
      row: _propTypes["default"].any,
      cell: _propTypes["default"].any
    })
  })
}, _ExpandableTable["default"].PropTypes));
(0, _defineProperty2["default"])(Table, "childContextTypes", {
  table: _propTypes["default"].any,
  components: _propTypes["default"].any
});
(0, _defineProperty2["default"])(Table, "defaultProps", {
  data: [],
  useFixedHeader: false,
  rowKey: 'key',
  rowClassName: function rowClassName() {
    return '';
  },
  onRow: function onRow() {},
  onHeaderRow: function onHeaderRow() {},
  prefixCls: 'rc-table',
  bodyStyle: {},
  style: {},
  showHeader: true,
  scroll: {},
  rowRef: function rowRef() {
    return null;
  },
  emptyText: function emptyText() {
    return 'No Data';
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYmxlLmpzeCJdLCJuYW1lcyI6WyJUYWJsZSIsInByb3BzIiwicmVjb3JkIiwiaW5kZXgiLCJyb3dLZXkiLCJrZXkiLCJ1bmRlZmluZWQiLCJzeW5jRml4ZWRUYWJsZVJvd0hlaWdodCIsInNldFNjcm9sbFBvc2l0aW9uQ2xhc3NOYW1lIiwidGFibGVSZWN0IiwidGFibGVOb2RlIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiaGVpZ2h0IiwicHJlZml4Q2xzIiwiaGVhZFJvd3MiLCJoZWFkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYm9keVRhYmxlIiwiZm9vdFJvd3MiLCJmb290VGFibGUiLCJib2R5Um93cyIsImZpeGVkQ29sdW1uc0hlYWRSb3dzSGVpZ2h0IiwibWFwIiwiY2FsbCIsInJvdyIsImZpeGVkQ29sdW1uc0Zvb3RSb3dzSGVpZ2h0IiwiZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQiLCJzdGF0ZSIsInN0b3JlIiwiZ2V0U3RhdGUiLCJzZXRTdGF0ZSIsImUiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0Iiwic2Nyb2xsIiwic2Nyb2xsTGVmdCIsImxhc3RTY3JvbGxMZWZ0IiwieCIsImZpeGVkQ29sdW1uc0JvZHlMZWZ0IiwiZml4ZWRDb2x1bW5zQm9keVJpZ2h0Iiwic2Nyb2xsVG9wIiwibGFzdFNjcm9sbFRvcCIsInkiLCJoYW5kbGVCb2R5U2Nyb2xsTGVmdCIsImhhbmRsZUJvZHlTY3JvbGxUb3AiLCJuYW1lIiwibm9kZSIsImZvckVhY2giLCJnZXRCb2R5V3JhcHBlciIsImNvbHVtbk1hbmFnZXIiLCJDb2x1bW5NYW5hZ2VyIiwiY29sdW1ucyIsImNoaWxkcmVuIiwiY3VycmVudEhvdmVyS2V5Iiwic2V0U2Nyb2xsUG9zaXRpb24iLCJkZWJvdW5jZWRXaW5kb3dSZXNpemUiLCJoYW5kbGVXaW5kb3dSZXNpemUiLCJ0YWJsZSIsInNhdmVSZWYiLCJjb21wb25lbnRzIiwiaGVhZGVyIiwid3JhcHBlciIsImNlbGwiLCJib2R5IiwiZm9vdGVyIiwiaXNBbnlDb2x1bW5zRml4ZWQiLCJyZXNpemVFdmVudCIsIndpbmRvdyIsIm5leHRQcm9wcyIsInJlc2V0IiwicHJldlByb3BzIiwiZGF0YSIsImxlbmd0aCIsImhhc1Njcm9sbFgiLCJyZXNldFNjcm9sbFgiLCJyZW1vdmUiLCJjYW5jZWwiLCJwb3NpdGlvbiIsInNjcm9sbFBvc2l0aW9uIiwiUmVnRXhwIiwiYWRkIiwic2Nyb2xsVG9MZWZ0Iiwic2Nyb2xsVG9SaWdodCIsIndpZHRoIiwic2Nyb2xsYWJsZSIsInJlbmRlclRhYmxlIiwiZ3JvdXBlZENvbHVtbnMiLCJyZW5kZXJFbXB0eVRleHQiLCJyZW5kZXJGb290ZXIiLCJsZWZ0Q29sdW1ucyIsImZpeGVkIiwicmlnaHRDb2x1bW5zIiwib3B0aW9ucyIsInRhYmxlQ2xhc3NOYW1lIiwiZXhwYW5kZXIiLCJnZXRSb3dLZXkiLCJoYW5kbGVCb2R5U2Nyb2xsIiwidGl0bGUiLCJlbXB0eVRleHQiLCJlbXB0eUNsYXNzTmFtZSIsImNsYXNzTmFtZSIsInVzZUZpeGVkSGVhZGVyIiwiaGFzTGVmdEZpeGVkIiwiaXNBbnlDb2x1bW5zTGVmdEZpeGVkIiwiaGFzUmlnaHRGaXhlZCIsImlzQW55Q29sdW1uc1JpZ2h0Rml4ZWQiLCJzdHlsZSIsImlkIiwicmVuZGVyVGl0bGUiLCJyZW5kZXJNYWluVGFibGUiLCJyZW5kZXJMZWZ0Rml4ZWRUYWJsZSIsInJlbmRlclJpZ2h0Rml4ZWRUYWJsZSIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsImFycmF5IiwiYm9vbCIsInN0cmluZyIsImJvZHlTdHlsZSIsIm9iamVjdCIsIm9uZU9mVHlwZSIsImZ1bmMiLCJyb3dDbGFzc05hbWUiLCJvblJvdyIsIm9uSGVhZGVyUm93Iiwib25Sb3dDbGljayIsIm9uUm93RG91YmxlQ2xpY2siLCJvblJvd0NvbnRleHRNZW51Iiwib25Sb3dNb3VzZUVudGVyIiwib25Sb3dNb3VzZUxlYXZlIiwic2hvd0hlYWRlciIsInJvd1JlZiIsInNoYXBlIiwiYW55IiwiRXhw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QUFBQSxNQUFNLEVBQUUsRUFiWTtBQWNwQmdHLEVBQUFBLE1BQU0sRUFBRTtBQUFBLFdBQU0sSUFBTjtBQUFBLEdBZFk7QUFlcEJoQyxFQUFBQSxTQUFTLEVBQUU7QUFBQSxXQUFNLFNBQU47QUFBQTtBQWZTLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnO1xuaW1wb3J0IGlzRXF1YWwgZnJvbSAnbG9kYXNoL2lzRXF1YWwnO1xuaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC9tZXJnZSc7XG5pbXBvcnQgeyBjcmVhdGUsIFByb3ZpZGVyIH0gZnJvbSAnbWluaS1zdG9yZSc7XG5pbXBvcnQgY2xhc3NlcyBmcm9tICdjb21wb25lbnQtY2xhc3Nlcyc7XG5pbXBvcnQgd2FybmluZyBmcm9tICcuLi8uLi9fdXRpbC93YXJuaW5nJztcbmltcG9ydCBhZGRFdmVudExpc3RlbmVyIGZyb20gJy4uLy4uL191dGlsL2FkZEV2ZW50TGlzdGVuZXInO1xuaW1wb3J0IENvbHVtbk1hbmFnZXIgZnJvbSAnLi9Db2x1bW5NYW5hZ2VyJztcbmltcG9ydCBIZWFkVGFibGUgZnJvbSAnLi9IZWFkVGFibGUnO1xuaW1wb3J0IEJvZHlUYWJsZSBmcm9tICcuL0JvZHlUYWJsZSc7XG5pbXBvcnQgRm9vdFRhYmxlIGZyb20gJy4vRm9vdFRhYmxlJztcbmltcG9ydCBFeHBhbmRhYmxlVGFibGUgZnJvbSAnLi9FeHBhbmRhYmxlVGFibGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgZGF0YTogUHJvcFR5cGVzLmFycmF5LFxuICAgIHVzZUZpeGVkSGVhZGVyOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjb2x1bW5zOiBQcm9wVHlwZXMuYXJyYXksXG4gICAgcHJlZml4Q2xzOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGJvZHlTdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICBzdHlsZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICByb3dLZXk6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgcm93Q2xhc3NOYW1lOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuZnVuY10pLFxuICAgIG9uUm93OiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvbkhlYWRlclJvdzogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Sb3dDbGljazogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Sb3dEb3VibGVDbGljazogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Sb3dDb250ZXh0TWVudTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Sb3dNb3VzZUVudGVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblJvd01vdXNlTGVhdmU6IFByb3BUeXBlcy5mdW5jLFxuICAgIHNob3dIZWFkZXI6IFByb3BUeXBlcy5ib29sLFxuICAgIHRpdGxlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBmb290ZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGVtcHR5VGV4dDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLm5vZGUsIFByb3BUeXBlcy5mdW5jXSksXG4gICAgc2Nyb2xsOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHJvd1JlZjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZ2V0Qm9keVdyYXBwZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbiAgICBjb21wb25lbnRzOiBQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgdGFibGU6IFByb3BUeXBlcy5hbnksXG4gICAgICBoZWFkZXI6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIHdyYXBwZXI6IFByb3BUeXBlcy5hbnksXG4gICAgICAgIHJvdzogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgY2VsbDogUHJvcFR5cGVzLmFueSxcbiAgICAgIH0pLFxuICAgICAgYm9keTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAgICAgd3JhcHBlcjogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgcm93OiBQcm9wVHlwZXMuYW55LFxuICAgICAgICBjZWxsOiBQcm9wVHlwZXMuYW55LFxuICAgICAgfSksXG4gICAgICBmb290ZXI6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgICAgIHdyYXBwZXI6IFByb3BUeXBlcy5hbnksXG4gICAgICAgIHJvdzogUHJvcFR5cGVzLmFueSxcbiAgICAgICAgY2VsbDogUHJvcFR5cGVzLmFueSxcbiAgICAgIH0pLFxuICAgIH0pLFxuICAgIC4uLkV4cGFuZGFibGVUYWJsZS5Qcm9wVHlwZXMsXG4gIH07XG5cbiAgc3RhdGljIGNoaWxkQ29udGV4dFR5cGVzID0ge1xuICAgIHRhYmxlOiBQcm9wVHlwZXMuYW55LFxuICAgIGNvbXBvbmVudHM6IFByb3BUeXBlcy5hbnksXG4gIH07XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBkYXRhOiBbXSxcbiAgICB1c2VGaXhlZEhlYWRlcjogZmFsc2UsXG4gICAgcm93S2V5OiAna2V5JyxcbiAgICByb3dDbGFzc05hbWU6ICgpID0+ICcnLFxuICAgIG9uUm93KCkge1xuICAgIH0sXG4gICAgb25IZWFkZXJSb3coKSB7XG4gICAgfSxcbiAgICBwcmVmaXhDbHM6ICdyYy10YWJsZScsXG4gICAgYm9keVN0eWxlOiB7fSxcbiAgICBzdHlsZToge30sXG4gICAgc2hvd0hlYWRlcjogdHJ1ZSxcbiAgICBzY3JvbGw6IHt9LFxuICAgIHJvd1JlZjogKCkgPT4gbnVsbCxcbiAgICBlbXB0eVRleHQ6ICgpID0+ICdObyBEYXRhJyxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIFtcbiAgICAgICdvblJvd0NsaWNrJyxcbiAgICAgICdvblJvd0RvdWJsZUNsaWNrJyxcbiAgICAgICdvblJvd0NvbnRleHRNZW51JyxcbiAgICAgICdvblJvd01vdXNlRW50ZXInLFxuICAgICAgJ29uUm93TW91c2VMZWF2ZScsXG4gICAgXS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgd2FybmluZyhcbiAgICAgICAgcHJvcHNbbmFtZV0gPT09IHVuZGVmaW5lZCxcbiAgICAgICAgYCR7bmFtZX0gaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBvblJvdyBpbnN0ZWFkLmAsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgd2FybmluZyhcbiAgICAgIHByb3BzLmdldEJvZHlXcmFwcGVyID09PSB1bmRlZmluZWQsXG4gICAgICAnZ2V0Qm9keVdyYXBwZXIgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBjdXN0b20gY29tcG9uZW50cyBpbnN0ZWFkLicsXG4gICAgKTtcblxuICAgIHRoaXMuY29sdW1uTWFuYWdlciA9IG5ldyBDb2x1bW5NYW5hZ2VyKHByb3BzLmNvbHVtbnMsIHByb3BzLmNoaWxkcmVuKTtcblxuICAgIHRoaXMuc3RvcmUgPSBjcmVhdGUoe1xuICAgICAgY3VycmVudEhvdmVyS2V5OiBudWxsLFxuICAgICAgZml4ZWRDb2x1bW5zSGVhZFJvd3NIZWlnaHQ6IFtdLFxuICAgICAgZml4ZWRDb2x1bW5zRm9vdFJvd3NIZWlnaHQ6IFtdLFxuICAgICAgZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQ6IFtdLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbignbGVmdCcpO1xuXG4gICAgdGhpcy5kZWJvdW5jZWRXaW5kb3dSZXNpemUgPSBkZWJvdW5jZSh0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZSwgMTUwKTtcbiAgfVxuXG4gIGdldENoaWxkQ29udGV4dCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGFibGU6IHtcbiAgICAgICAgcHJvcHM6IHRoaXMucHJvcHMsXG4gICAgICAgIGNvbHVtbk1hbmFnZXI6IHRoaXMuY29sdW1uTWFuYWdlcixcbiAgICAgICAgc2F2ZVJlZjogdGhpcy5zYXZlUmVmLFxuICAgICAgICBjb21wb25lbnRzOiBtZXJnZSh7XG4gICAgICAgICAgdGFibGU6ICd0YWJsZScsXG4gICAgICAgICAgaGVhZGVyOiB7XG4gICAgICAgICAgICB3cmFwcGVyOiAndGhlYWQnLFxuICAgICAgICAgICAgcm93OiAndHInLFxuICAgICAgICAgICAgY2VsbDogJ3RoJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IHtcbiAgICAgICAgICAgIHdyYXBwZXI6ICd0Ym9keScsXG4gICAgICAgICAgICByb3c6ICd0cicsXG4gICAgICAgICAgICBjZWxsOiAndGQnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZm9vdGVyOiB7XG4gICAgICAgICAgICB3cmFwcGVyOiAndGZvb3QnLFxuICAgICAgICAgICAgcm93OiAndHInLFxuICAgICAgICAgICAgY2VsbDogJ3RkJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9LCB0aGlzLnByb3BzLmNvbXBvbmVudHMpLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgaWYgKHRoaXMuY29sdW1uTWFuYWdlci5pc0FueUNvbHVtbnNGaXhlZCgpKSB7XG4gICAgICB0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZSgpO1xuICAgICAgdGhpcy5yZXNpemVFdmVudCA9IGFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuZGVib3VuY2VkV2luZG93UmVzaXplLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGlmIChuZXh0UHJvcHMuY29sdW1ucyAmJiBuZXh0UHJvcHMuY29sdW1ucyAhPT0gdGhpcy5wcm9wcy5jb2x1bW5zKSB7XG4gICAgICB0aGlzLmNvbHVtbk1hbmFnZXIucmVzZXQobmV4dFByb3BzLmNvbHVtbnMpO1xuICAgIH0gZWxzZSBpZiAobmV4dFByb3BzLmNoaWxkcmVuICE9PSB0aGlzLnByb3BzLmNoaWxkcmVuKSB7XG4gICAgICB0aGlzLmNvbHVtbk1hbmFnZXIucmVzZXQobnVsbCwgbmV4dFByb3BzLmNoaWxkcmVuKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgaWYgKHRoaXMuY29sdW1uTWFuYWdlci5pc0FueUNvbHVtbnNGaXhlZCgpKSB7XG4gICAgICB0aGlzLmhhbmRsZVdpbmRvd1Jlc2l6ZSgpO1xuICAgICAgaWYgKCF0aGlzLnJlc2l6ZUV2ZW50KSB7XG4gICAgICAgIHRoaXMucmVzaXplRXZlbnQgPSBhZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuZGVib3VuY2VkV2luZG93UmVzaXplLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyB3aGVuIHRhYmxlIGNoYW5nZXMgdG8gZW1wdHksIHJlc2V0IHNjcm9sbExlZnRcbiAgICBpZiAocHJldlByb3BzLmRhdGEubGVuZ3RoID4gMCAmJiB0aGlzLnByb3BzLmRhdGEubGVuZ3RoID09PSAwICYmIHRoaXMuaGFzU2Nyb2xsWCgpKSB7XG4gICAgICB0aGlzLnJlc2V0U2Nyb2xsWCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGlmICh0aGlzLnJlc2l6ZUV2ZW50KSB7XG4gICAgICB0aGlzLnJlc2l6ZUV2ZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5kZWJvdW5jZWRXaW5kb3dSZXNpemUpIHtcbiAgICAgIHRoaXMuZGVib3VuY2VkV2luZG93UmVzaXplLmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldFJvd0tleSA9IChyZWNvcmQsIGluZGV4KSA9PiB7XG4gICAgY29uc3Qgcm93S2V5ID0gdGhpcy5wcm9wcy5yb3dLZXk7XG4gICAgY29uc3Qga2V5ID0gKHR5cGVvZiByb3dLZXkgPT09ICdmdW5jdGlvbicpID8gcm93S2V5KHJlY29yZCwgaW5kZXgpIDogcmVjb3JkW3Jvd0tleV07XG4gICAgd2FybmluZyhcbiAgICAgIGtleSAhPT0gdW5kZWZpbmVkLFxuICAgICAgJ0VhY2ggcmVjb3JkIGluIHRhYmxlIHNob3VsZCBoYXZlIGEgdW5pcXVlIGBrZXlgIHByb3AsJyArXG4gICAgICAnb3Igc2V0IGByb3dLZXlgIHRvIGFuIHVuaXF1ZSBwcmltYXJ5IGtleS4nLFxuICAgICk7XG4gICAgcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkID8gaW5kZXggOiBrZXk7XG4gIH07XG5cbiAgc2V0U2Nyb2xsUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICB0aGlzLnNjcm9sbFBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgaWYgKHRoaXMudGFibGVOb2RlKSB7XG4gICAgICBjb25zdCB7IHByZWZpeENscyB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2JvdGgnKSB7XG4gICAgICAgIGNsYXNzZXModGhpcy50YWJsZU5vZGUpXG4gICAgICAgICAgLnJlbW92ZShuZXcgUmVnRXhwKGBeJHtwcmVmaXhDbHN9LXNjcm9sbC1wb3NpdGlvbi0uKyRgKSlcbiAgICAgICAgICAuYWRkKGAke3ByZWZpeENsc30tc2Nyb2xsLXBvc2l0aW9uLWxlZnRgKVxuICAgICAgICAgIC5hZGQoYCR7cHJlZml4Q2xzfS1zY3JvbGwtcG9zaXRpb24tcmlnaHRgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsYXNzZXModGhpcy50YWJsZU5vZGUpXG4gICAgICAgICAgLnJlbW92ZShuZXcgUmVnRXhwKGBeJHtwcmVmaXhDbHN9LXNjcm9sbC1wb3NpdGlvbi0uKyRgKSlcbiAgICAgICAgICAuYWRkKGAke3ByZWZpeENsc30tc2Nyb2xsLXBvc2l0aW9uLSR7cG9zaXRpb259YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0U2Nyb2xsUG9zaXRpb25DbGFzc05hbWUoKSB7XG4gICAgY29uc3Qgbm9kZSA9IHRoaXMuYm9keVRhYmxlO1xuICAgIGNvbnN0IHNjcm9sbFRvTGVmdCA9IG5vZGUuc2Nyb2xsTGVmdCA9PT0gMDtcbiAgICBjb25zdCBzY3JvbGxUb1JpZ2h0ID0gbm9kZS5zY3JvbGxMZWZ0ICsgMSA+PVxuICAgICAgbm9kZS5jaGlsZHJlblswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAtXG4gICAgICBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGlmIChzY3JvbGxUb0xlZnQgJiYgc2Nyb2xsVG9SaWdodCkge1xuICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbignYm90aCcpO1xuICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9MZWZ0KSB7XG4gICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKCdsZWZ0Jyk7XG4gICAgfSBlbHNlIGlmIChzY3JvbGxUb1JpZ2h0KSB7XG4gICAgICB0aGlzLnNldFNjcm9sbFBvc2l0aW9uKCdyaWdodCcpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxQb3NpdGlvbiAhPT0gJ21pZGRsZScpIHtcbiAgICAgIHRoaXMuc2V0U2Nyb2xsUG9zaXRpb24oJ21pZGRsZScpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVdpbmRvd1Jlc2l6ZSA9ICgpID0+IHtcbiAgICB0aGlzLnN5bmNGaXhlZFRhYmxlUm93SGVpZ2h0KCk7XG4gICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbkNsYXNzTmFtZSgpO1xuICB9O1xuXG4gIHN5bmNGaXhlZFRhYmxlUm93SGVpZ2h0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHRhYmxlUmVjdCA9IHRoaXMudGFibGVOb2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIC8vIElmIHRhYmxlTm9kZSdzIGhlaWdodCBsZXNzIHRoYW4gMCwgc3VwcG9zZSBpdCBpcyBoaWRkZW4gYW5kIGRvbid0IHJlY2FsY3VsYXRlIHJvd0hlaWdodC5cbiAgICBpZiAodGFibGVSZWN0LmhlaWdodCAhPT0gdW5kZWZpbmVkICYmIHRhYmxlUmVjdC5oZWlnaHQgPD0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB7IHByZWZpeENscyB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBoZWFkUm93cyA9IHRoaXMuaGVhZFRhYmxlID8gdGhpcy5oZWFkVGFibGUucXVlcnlTZWxlY3RvckFsbCgndGhlYWQnKSA6IHRoaXMuYm9keVRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoZWFkJyk7XG4gICAgY29uc3QgZm9vdFJvd3MgPSB0aGlzLmZvb3RUYWJsZSA/IHRoaXMuZm9vdFRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rmb290JykgOiB0aGlzLmJvZHlUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0Zm9vdCcpO1xuICAgIGNvbnN0IGJvZHlSb3dzID0gdGhpcy5ib2R5VGFibGUucXVlcnlTZWxlY3RvckFsbChgLiR7cHJlZml4Q2xzfS1yb3dgKSB8fCBbXTtcbiAgICBjb25zdCBmaXhlZENvbHVtbnNIZWFkUm93c0hlaWdodCA9IFtdLm1hcC5jYWxsKFxuICAgICAgaGVhZFJvd3MsIHJvdyA9PiByb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IHx8ICdhdXRvJyxcbiAgICApO1xuICAgIGNvbnN0IGZpeGVkQ29sdW1uc0Zvb3RSb3dzSGVpZ2h0ID0gW10ubWFwLmNhbGwoXG4gICAgICBmb290Um93cywgcm93ID0+IHJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgfHwgJ2F1dG8nLFxuICAgICk7XG4gICAgY29uc3QgZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQgPSBbXS5tYXAuY2FsbChcbiAgICAgIGJvZHlSb3dzLCByb3cgPT4gcm93LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCB8fCAnYXV0bycsXG4gICAgKTtcbiAgICBjb25zdCBzdGF0ZSA9IHRoaXMuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBpZiAoaXNFcXVhbChzdGF0ZS5maXhlZENvbHVtbnNIZWFkUm93c0hlaWdodCwgZml4ZWRDb2x1bW5zSGVhZFJvd3NIZWlnaHQpICYmXG4gICAgICBpc0VxdWFsKHN0YXRlLmZpeGVkQ29sdW1uc0Zvb3RSb3dzSGVpZ2h0LCBmaXhlZENvbHVtbnNGb290Um93c0hlaWdodCkgJiZcbiAgICAgIGlzRXF1YWwoc3RhdGUuZml4ZWRDb2x1bW5zQm9keVJvd3NIZWlnaHQsIGZpeGVkQ29sdW1uc0JvZHlSb3dzSGVpZ2h0KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3RvcmUuc2V0U3RhdGUoe1xuICAgICAgZml4ZWRDb2x1bW5zSGVhZFJvd3NIZWlnaHQsXG4gICAgICBmaXhlZENvbHVtbnNGb290Um93c0hlaWdodCxcbiAgICAgIGZpeGVkQ29sdW1uc0JvZHlSb3dzSGVpZ2h0LFxuICAgIH0pO1xuICB9O1xuXG4gIHJlc2V0U2Nyb2xsWCgpIHtcbiAgICBpZiAodGhpcy5oZWFkVGFibGUpIHtcbiAgICAgIHRoaXMuaGVhZFRhYmxlLnNjcm9sbExlZnQgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib2R5VGFibGUpIHtcbiAgICAgIHRoaXMuYm9keVRhYmxlLnNjcm9sbExlZnQgPSAwO1xuICAgIH1cbiAgICBpZiAodGhpcy5mb290VGFibGUpIHtcbiAgICAgIHRoaXMuZm9vdFRhYmxlLnNjcm9sbExlZnQgPSAwO1xuICAgIH1cbiAgfVxuXG4gIGhhc1Njcm9sbFgoKSB7XG4gICAgY29uc3QgeyBzY3JvbGwgPSB7fSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gJ3gnIGluIHNjcm9sbDtcbiAgfVxuXG4gIGhhbmRsZUJvZHlTY3JvbGxMZWZ0ID0gKGUpID0+IHtcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ICE9PSBlLnRhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBjb25zdCB7IHNjcm9sbCA9IHt9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgaGVhZFRhYmxlLCBib2R5VGFibGUsIGZvb3RUYWJsZSB9ID0gdGhpcztcbiAgICBpZiAodGFyZ2V0LnNjcm9sbExlZnQgIT09IHRoaXMubGFzdFNjcm9sbExlZnQgJiYgc2Nyb2xsLngpIHtcbiAgICAgIGlmICh0YXJnZXQgPT09IGJvZHlUYWJsZSkge1xuICAgICAgICBpZiAoaGVhZFRhYmxlKSBoZWFkVGFibGUuc2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICBpZiAoZm9vdFRhYmxlKSBmb290VGFibGUuc2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IGhlYWRUYWJsZSkge1xuICAgICAgICBpZiAoYm9keVRhYmxlKSBib2R5VGFibGUuc2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICBpZiAoZm9vdFRhYmxlKSBmb290VGFibGUuc2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgfSBlbHNlIGlmICh0YXJnZXQgPT09IGZvb3RUYWJsZSkge1xuICAgICAgICBpZiAoYm9keVRhYmxlKSBib2R5VGFibGUuc2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgICBpZiAoaGVhZFRhYmxlKSBoZWFkVGFibGUuc2Nyb2xsTGVmdCA9IHRhcmdldC5zY3JvbGxMZWZ0O1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTY3JvbGxQb3NpdGlvbkNsYXNzTmFtZSgpO1xuICAgIH1cbiAgICAvLyBSZW1lbWJlciBsYXN0IHNjcm9sbExlZnQgZm9yIHNjcm9sbCBkaXJlY3Rpb24gZGV0ZWN0aW5nLlxuICAgIHRoaXMubGFzdFNjcm9sbExlZnQgPSB0YXJnZXQuc2Nyb2xsTGVmdDtcbiAgfTtcblxuICBoYW5kbGVCb2R5U2Nyb2xsVG9wID0gKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICBjb25zdCB7IHNjcm9sbCA9IHt9IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgaGVhZFRhYmxlLCBib2R5VGFibGUsIGZpeGVkQ29sdW1uc0JvZHlMZWZ0LCBmaXhlZENvbHVtbnNCb2R5UmlnaHQgfSA9IHRoaXM7XG4gICAgaWYgKHRhcmdldC5zY3JvbGxUb3AgIT09IHRoaXMubGFzdFNjcm9sbFRvcCAmJiBzY3JvbGwueSAmJiB0YXJnZXQgIT09IGhlYWRUYWJsZSkge1xuICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gdGFyZ2V0LnNjcm9sbFRvcDtcbiAgICAgIGlmIChmaXhlZENvbHVtbnNCb2R5TGVmdCAmJiB0YXJnZXQgIT09IGZpeGVkQ29sdW1uc0JvZHlMZWZ0KSB7XG4gICAgICAgIGZpeGVkQ29sdW1uc0JvZHlMZWZ0LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgIH1cbiAgICAgIGlmIChmaXhlZENvbHVtbnNCb2R5UmlnaHQgJiYgdGFyZ2V0ICE9PSBmaXhlZENvbHVtbnNCb2R5UmlnaHQpIHtcbiAgICAgICAgZml4ZWRDb2x1bW5zQm9keVJpZ2h0LnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgIH1cbiAgICAgIGlmIChib2R5VGFibGUgJiYgdGFyZ2V0ICE9PSBib2R5VGFibGUpIHtcbiAgICAgICAgYm9keVRhYmxlLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtZW1iZXIgbGFzdCBzY3JvbGxUb3AgZm9yIHNjcm9sbCBkaXJlY3Rpb24gZGV0ZWN0aW5nLlxuICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IHRhcmdldC5zY3JvbGxUb3A7XG4gIH07XG5cbiAgaGFuZGxlQm9keVNjcm9sbCA9IChlKSA9PiB7XG4gICAgdGhpcy5oYW5kbGVCb2R5U2Nyb2xsTGVmdChlKTtcbiAgICB0aGlzLmhhbmRsZUJvZHlTY3JvbGxUb3AoZSk7XG4gIH07XG5cbiAgc2F2ZVJlZiA9IChuYW1lKSA9PiAobm9kZSkgPT4ge1xuICAgIHRoaXNbbmFtZV0gPSBub2RlO1xuICB9O1xuXG4gIHJlbmRlck1haW5UYWJsZSgpIHtcbiAgICBjb25zdCB7IHNjcm9sbCwgcHJlZml4Q2xzIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGlzQW55Q29sdW1uc0ZpeGVkID0gdGhpcy5jb2x1bW5NYW5hZ2VyLmlzQW55Q29sdW1uc0ZpeGVkKCk7XG4gICAgY29uc3Qgc2Nyb2xsYWJsZSA9IGlzQW55Q29sdW1uc0ZpeGVkIHx8IHNjcm9sbC54IHx8IHNjcm9sbC55O1xuXG4gICAgY29uc3QgdGFibGUgPSBbXG4gICAgICB0aGlzLnJlbmRlclRhYmxlKHtcbiAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5NYW5hZ2VyLmdyb3VwZWRDb2x1bW5zKCksXG4gICAgICAgIGlzQW55Q29sdW1uc0ZpeGVkLFxuICAgICAgfSksXG4gICAgICB0aGlzLnJlbmRlckVtcHR5VGV4dCgpLFxuICAgICAgdGhpcy5yZW5kZXJGb290ZXIoKSxcbiAgICBdO1xuXG4gICAgcmV0dXJuIHNjcm9sbGFibGUgPyAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1zY3JvbGxgfT57dGFibGV9PC9kaXY+XG4gICAgKSA6IHRhYmxlO1xuICB9XG5cbiAgcmVuZGVyTGVmdEZpeGVkVGFibGUoKSB7XG4gICAgY29uc3QgeyBwcmVmaXhDbHMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tZml4ZWQtbGVmdGB9PlxuICAgICAgICB7dGhpcy5yZW5kZXJUYWJsZSh7XG4gICAgICAgICAgY29sdW1uczogdGhpcy5jb2x1bW5NYW5hZ2VyLmxlZnRDb2x1bW5zKCksXG4gICAgICAgICAgZml4ZWQ6ICdsZWZ0JyxcbiAgICAgICAgfSl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyUmlnaHRGaXhlZFRhYmxlKCkge1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWZpeGVkLXJpZ2h0YH0+XG4gICAgICAgIHt0aGlzLnJlbmRlclRhYmxlKHtcbiAgICAgICAgICBjb2x1bW5zOiB0aGlzLmNvbHVtbk1hbmFnZXIucmlnaHRDb2x1bW5zKCksXG4gICAgICAgICAgZml4ZWQ6ICdyaWdodCcsXG4gICAgICAgIH0pfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlclRhYmxlKG9wdGlvbnMpIHtcbiAgICBjb25zdCB7IGNvbHVtbnMsIGZpeGVkLCBpc0FueUNvbHVtbnNGaXhlZCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCB7IHByZWZpeENscywgc2Nyb2xsID0ge30gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgdGFibGVDbGFzc05hbWUgPSAoc2Nyb2xsLnggfHwgZml4ZWQpID8gYCR7cHJlZml4Q2xzfS1maXhlZGAgOiAnJztcblxuICAgIGNvbnN0IGhlYWRUYWJsZSA9IChcbiAgICAgIDxIZWFkVGFibGVcbiAgICAgICAga2V5PVwiaGVhZFwiXG4gICAgICAgIGNvbHVtbnM9e2NvbHVtbnN9XG4gICAgICAgIGZpeGVkPXtmaXhlZH1cbiAgICAgICAgdGFibGVDbGFzc05hbWU9e3RhYmxlQ2xhc3NOYW1lfVxuICAgICAgICBoYW5kbGVCb2R5U2Nyb2xsTGVmdD17dGhpcy5oYW5kbGVCb2R5U2Nyb2xsTGVmdH1cbiAgICAgICAgZXhwYW5kZXI9e3RoaXMuZXhwYW5kZXJ9XG4gICAgICAvPlxuICAgICk7XG5cbiAgICBjb25zdCBib2R5VGFibGUgPSAoXG4gICAgICA8Qm9keVRhYmxlXG4gICAgICAgIGtleT1cImJvZHlcIlxuICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICBmaXhlZD17Zml4ZWR9XG4gICAgICAgIHRhYmxlQ2xhc3NOYW1lPXt0YWJsZUNsYXNzTmFtZX1cbiAgICAgICAgZ2V0Um93S2V5PXt0aGlzLmdldFJvd0tleX1cbiAgICAgICAgaGFuZGxlQm9keVNjcm9sbD17dGhpcy5oYW5kbGVCb2R5U2Nyb2xsfVxuICAgICAgICBleHBhbmRlcj17dGhpcy5leHBhbmRlcn1cbiAgICAgICAgaXNBbnlDb2x1bW5zRml4ZWQ9e2lzQW55Q29sdW1uc0ZpeGVkfVxuICAgICAgLz5cbiAgICApO1xuXG4gICAgY29uc3QgZm9vdFRhYmxlID0gKFxuICAgICAgPEZvb3RUYWJsZVxuICAgICAgICBrZXk9XCJmb290XCJcbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgZml4ZWQ9e2ZpeGVkfVxuICAgICAgICB0YWJsZUNsYXNzTmFtZT17dGFibGVDbGFzc05hbWV9XG4gICAgICAgIGhhbmRsZUJvZHlTY3JvbGxMZWZ0PXt0aGlzLmhhbmRsZUJvZHlTY3JvbGxMZWZ0fVxuICAgICAgICBleHBhbmRlcj17dGhpcy5leHBhbmRlcn1cbiAgICAgIC8+XG4gICAgKTtcblxuICAgIHJldHVybiBbaGVhZFRhYmxlLCBib2R5VGFibGUsIGZvb3RUYWJsZV07XG4gIH1cblxuICByZW5kZXJUaXRsZSgpIHtcbiAgICBjb25zdCB7IHRpdGxlLCBwcmVmaXhDbHMgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIHRpdGxlID8gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tdGl0bGVgfSBrZXk9XCJ0aXRsZVwiPlxuICAgICAgICB7dGl0bGUodGhpcy5wcm9wcy5kYXRhKX1cbiAgICAgIDwvZGl2PlxuICAgICkgOiBudWxsO1xuICB9XG5cbiAgcmVuZGVyRm9vdGVyKCkge1xuICAgIGNvbnN0IHsgZm9vdGVyLCBwcmVmaXhDbHMgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIGZvb3RlciA/IChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWZvb3RlcmB9IGtleT1cImZvb3RlclwiPlxuICAgICAgICB7Zm9vdGVyKHRoaXMucHJvcHMuZGF0YSl9XG4gICAgICA8L2Rpdj5cbiAgICApIDogbnVsbDtcbiAgfVxuXG4gIHJlbmRlckVtcHR5VGV4dCgpIHtcbiAgICBjb25zdCB7IGVtcHR5VGV4dCwgcHJlZml4Q2xzLCBkYXRhIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChkYXRhLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGVtcHR5Q2xhc3NOYW1lID0gYCR7cHJlZml4Q2xzfS1wbGFjZWhvbGRlcmA7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtlbXB0eUNsYXNzTmFtZX0ga2V5PVwiZW1wdHlUZXh0XCI+XG4gICAgICAgIHsodHlwZW9mIGVtcHR5VGV4dCA9PT0gJ2Z1bmN0aW9uJykgPyBlbXB0eVRleHQoKSA6IGVtcHR5VGV4dH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHByZWZpeENscyA9IHByb3BzLnByZWZpeENscztcblxuICAgIGxldCBjbGFzc05hbWUgPSBwcm9wcy5wcmVmaXhDbHM7XG4gICAgaWYgKHByb3BzLmNsYXNzTmFtZSkge1xuICAgICAgY2xhc3NOYW1lICs9IGAgJHtwcm9wcy5jbGFzc05hbWV9YDtcbiAgICB9XG4gICAgaWYgKHByb3BzLnVzZUZpeGVkSGVhZGVyIHx8IChwcm9wcy5zY3JvbGwgJiYgcHJvcHMuc2Nyb2xsLnkpKSB7XG4gICAgICBjbGFzc05hbWUgKz0gYCAke3ByZWZpeENsc30tZml4ZWQtaGVhZGVyYDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2Nyb2xsUG9zaXRpb24gPT09ICdib3RoJykge1xuICAgICAgY2xhc3NOYW1lICs9IGAgJHtwcmVmaXhDbHN9LXNjcm9sbC1wb3NpdGlvbi1sZWZ0ICR7cHJlZml4Q2xzfS1zY3JvbGwtcG9zaXRpb24tcmlnaHRgO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGFzc05hbWUgKz0gYCAke3ByZWZpeENsc30tc2Nyb2xsLXBvc2l0aW9uLSR7dGhpcy5zY3JvbGxQb3NpdGlvbn1gO1xuICAgIH1cbiAgICBjb25zdCBoYXNMZWZ0Rml4ZWQgPSB0aGlzLmNvbHVtbk1hbmFnZXIuaXNBbnlDb2x1bW5zTGVmdEZpeGVkKCk7XG4gICAgY29uc3QgaGFzUmlnaHRGaXhlZCA9IHRoaXMuY29sdW1uTWFuYWdlci5pc0FueUNvbHVtbnNSaWdodEZpeGVkKCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXt0aGlzLnN0b3JlfT5cbiAgICAgICAgPEV4cGFuZGFibGVUYWJsZVxuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICBjb2x1bW5NYW5hZ2VyPXt0aGlzLmNvbHVtbk1hbmFnZXJ9XG4gICAgICAgICAgZ2V0Um93S2V5PXt0aGlzLmdldFJvd0tleX1cbiAgICAgICAgPlxuICAgICAgICAgIHsoZXhwYW5kZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhwYW5kZXIgPSBleHBhbmRlcjtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICByZWY9e3RoaXMuc2F2ZVJlZigndGFibGVOb2RlJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWV9XG4gICAgICAgICAgICAgICAgc3R5bGU9e3Byb3BzLnN0eWxlfVxuICAgICAgICAgICAgICAgIGlkPXtwcm9wcy5pZH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlclRpdGxlKCl9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tY29udGVudGB9PlxuICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTWFpblRhYmxlKCl9XG4gICAgICAgICAgICAgICAgICB7aGFzTGVmdEZpeGVkICYmIHRoaXMucmVuZGVyTGVmdEZpeGVkVGFibGUoKX1cbiAgICAgICAgICAgICAgICAgIHtoYXNSaWdodEZpeGVkICYmIHRoaXMucmVuZGVyUmlnaHRGaXhlZFRhYmxlKCl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9fVxuICAgICAgICA8L0V4cGFuZGFibGVUYWJsZT5cbiAgICAgIDwvUHJvdmlkZXI+XG4gICAgKTtcbiAgfVxufVxuIl19