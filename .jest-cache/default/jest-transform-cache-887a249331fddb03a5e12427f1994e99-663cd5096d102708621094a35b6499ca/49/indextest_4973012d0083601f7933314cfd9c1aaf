8ea62696f9910974815924b9d518df60
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _KeyCode = _interopRequireDefault(require("../../_util/KeyCode"));

var _ = _interopRequireDefault(require(".."));

var _focusTest = _interopRequireDefault(require("../../../tests/shared/focusTest"));

var options = [{
  value: 'zhejiang',
  label: 'Zhejiang',
  children: [{
    value: 'hangzhou',
    label: 'Hangzhou',
    children: [{
      value: 'xihu',
      label: 'West Lake'
    }]
  }]
}, {
  value: 'jiangsu',
  label: 'Jiangsu',
  children: [{
    value: 'nanjing',
    label: 'Nanjing',
    children: [{
      value: 'zhonghuamen',
      label: 'Zhong Hua Men'
    }]
  }]
}];
describe('Cascader', function () {
  (0, _focusTest["default"])(_["default"]);
  it('popup correctly when panel is hidden', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      options: options
    }));
    expect((0, _enzyme.render)(wrapper.find('Trigger').instance().getComponent())).toMatchSnapshot();
  });
  it('popup correctly when panel is open', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      options: options
    }));
    wrapper.find('input').simulate('click');
    expect((0, _enzyme.render)(wrapper.find('Trigger').instance().getComponent())).toMatchSnapshot();
  });
  it('support controlled mode', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      options: options
    }));
    wrapper.setProps({
      value: ['zhejiang', 'hangzhou', 'xihu']
    });
    expect(wrapper.render()).toMatchSnapshot();
  });
  it('popup correctly with defaultValue', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      options: options,
      defaultValue: ['zhejiang', 'hangzhou']
    }));
    wrapper.find('input').simulate('click');
    expect((0, _enzyme.render)(wrapper.find('Trigger').instance().getComponent())).toMatchSnapshot();
  });
  it('can be selected', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      options: options
    }));
    wrapper.find('input').simulate('click');
    var popupWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    popupWrapper.find('.c7n-cascader-menu').at(0).find('.c7n-cascader-menu-item').at(0).simulate('click');
    expect((0, _enzyme.render)(wrapper.find('Trigger').instance().getComponent())).toMatchSnapshot();
    popupWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    popupWrapper.find('.c7n-cascader-menu').at(1).find('.c7n-cascader-menu-item').at(0).simulate('click');
    expect((0, _enzyme.render)(wrapper.find('Trigger').instance().getComponent())).toMatchSnapshot();
    popupWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    popupWrapper.find('.c7n-cascader-menu').at(2).find('.c7n-cascader-menu-item').at(0).simulate('click');
    expect((0, _enzyme.render)(wrapper.find('Trigger').instance().getComponent())).toMatchSnapshot();
  });
  it('backspace should work with `Cascader[showSearch]`', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      options: options,
      showSearch: true
    }));
    wrapper.find('input').simulate('change', {
      target: {
        value: '123'
      }
    });
    expect(wrapper.state('inputValue')).toBe('123');
    wrapper.find('input').simulate('keydown', {
      keyCode: _KeyCode["default"].BACKSPACE
    }); // Simulate onKeyDown will not trigger onChange by default, so the value is still '123'

    expect(wrapper.state('inputValue')).toBe('123');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LnRlc3QuanMiXSwibmFtZXMiOlsib3B0aW9ucyIsInZhbHVlIiwibGFiZWwiLCJjaGlsZHJlbiIsImRlc2NyaWJlIiwiQ2FzY2FkZXIiLCJpdCIsIndyYXBwZXIiLCJleHBlY3QiLCJmaW5kIiwiaW5zdGFuY2UiLCJnZXRDb21wb25lbnQiLCJ0b01hdGNoU25hcHNob3QiLCJzaW11bGF0ZSIsInNldFByb3BzIiwicmVuZGVyIiwicG9wdXBXcmFwcGVyIiwiYXQiLCJ0YXJnZXQiLCJzdGF0ZSIsInRvQmUiLCJrZXlDb2RlIiwiS2V5Q29kZSIsIkJBQ0tTUEFDRSJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLE9BQU8sR0FBRyxDQUNkO0FBQ0VDLEVBQUFBLEtBQUssRUFBRSxVQURUO0FBRUVDLEVBQUFBLEtBQUssRUFBRSxVQUZUO0FBR0VDLEVBQUFBLFFBQVEsRUFBRSxDQUNSO0FBQ0VGLElBQUFBLEtBQUssRUFBRSxVQURUO0FBRUVDLElBQUFBLEtBQUssRUFBRSxVQUZUO0FBR0VDLElBQUFBLFFBQVEsRUFBRSxDQUNSO0FBQ0VGLE1BQUFBLEtBQUssRUFBRSxNQURUO0FBRUVDLE1BQUFBLEtBQUssRUFBRTtBQUZULEtBRFE7QUFIWixHQURRO0FBSFosQ0FEYyxFQWlCZDtBQUNFRCxFQUFBQSxLQUFLLEVBQUUsU0FEVDtBQUVFQyxFQUFBQSxLQUFLLEVBQUUsU0FGVDtBQUdFQyxFQUFBQSxRQUFRLEVBQUUsQ0FDUjtBQUNFRixJQUFBQSxLQUFLLEVBQUUsU0FEVDtBQUVFQyxJQUFBQSxLQUFLLEVBQUUsU0FGVDtBQUdFQyxJQUFBQSxRQUFRLEVBQUUsQ0FDUjtBQUNFRixNQUFBQSxLQUFLLEVBQUUsYUFEVDtBQUVFQyxNQUFBQSxLQUFLLEVBQUU7QUFGVCxLQURRO0FBSFosR0FEUTtBQUhaLENBakJjLENBQWhCO0FBbUNBRSxRQUFRLENBQUMsVUFBRCxFQUFhLFlBQU07QUFDekIsNkJB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LE9BQWIsRUFBc0JJLFFBQXRCLENBQStCLFNBQS9CLEVBQTBDO0FBQUVRLE1BQUFBLE9BQU8sRUFBRUMsb0JBQVFDO0FBQW5CLEtBQTFDLEVBSjRELENBSzVEOztBQUNBZixJQUFBQSxNQUFNLENBQUNELE9BQU8sQ0FBQ1ksS0FBUixDQUFjLFlBQWQsQ0FBRCxDQUFOLENBQW9DQyxJQUFwQyxDQUF5QyxLQUF6QztBQUNELEdBUEMsQ0FBRjtBQVFELENBMUhPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBtb3VudCB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tICcuLi8uLi9fdXRpbC9LZXlDb2RlJztcbmltcG9ydCBDYXNjYWRlciBmcm9tICcuLic7XG5pbXBvcnQgZm9jdXNUZXN0IGZyb20gJy4uLy4uLy4uL3Rlc3RzL3NoYXJlZC9mb2N1c1Rlc3QnO1xuXG5jb25zdCBvcHRpb25zID0gW1xuICB7XG4gICAgdmFsdWU6ICd6aGVqaWFuZycsXG4gICAgbGFiZWw6ICdaaGVqaWFuZycsXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIHtcbiAgICAgICAgdmFsdWU6ICdoYW5nemhvdScsXG4gICAgICAgIGxhYmVsOiAnSGFuZ3pob3UnLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiAneGlodScsXG4gICAgICAgICAgICBsYWJlbDogJ1dlc3QgTGFrZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbiAge1xuICAgIHZhbHVlOiAnamlhbmdzdScsXG4gICAgbGFiZWw6ICdKaWFuZ3N1JyxcbiAgICBjaGlsZHJlbjogW1xuICAgICAge1xuICAgICAgICB2YWx1ZTogJ25hbmppbmcnLFxuICAgICAgICBsYWJlbDogJ05hbmppbmcnLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHZhbHVlOiAnemhvbmdodWFtZW4nLFxuICAgICAgICAgICAgbGFiZWw6ICdaaG9uZyBIdWEgTWVuJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuXTtcblxuZGVzY3JpYmUoJ0Nhc2NhZGVyJywgKCkgPT4ge1xuICBmb2N1c1Rlc3QoQ2FzY2FkZXIpO1xuXG4gIGl0KCdwb3B1cCBjb3JyZWN0bHkgd2hlbiBwYW5lbCBpcyBoaWRkZW4nLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxDYXNjYWRlciBvcHRpb25zPXtvcHRpb25zfSAvPik7XG4gICAgZXhwZWN0KFxuICAgICAgcmVuZGVyKFxuICAgICAgICB3cmFwcGVyXG4gICAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAgIC5pbnN0YW5jZSgpXG4gICAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICAgKSxcbiAgICApLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgncG9wdXAgY29ycmVjdGx5IHdoZW4gcGFuZWwgaXMgb3BlbicsICgpID0+IHtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoPENhc2NhZGVyIG9wdGlvbnM9e29wdGlvbnN9IC8+KTtcbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0Jykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgZXhwZWN0KFxuICAgICAgcmVuZGVyKFxuICAgICAgICB3cmFwcGVyXG4gICAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAgIC5pbnN0YW5jZSgpXG4gICAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICAgKSxcbiAgICApLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgnc3VwcG9ydCBjb250cm9sbGVkIG1vZGUnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxDYXNjYWRlciBvcHRpb25zPXtvcHRpb25zfSAvPik7XG4gICAgd3JhcHBlci5zZXRQcm9wcyh7XG4gICAgICB2YWx1ZTogWyd6aGVqaWFuZycsICdoYW5nemhvdScsICd4aWh1J10sXG4gICAgfSk7XG4gICAgZXhwZWN0KHdyYXBwZXIucmVuZGVyKCkpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgncG9wdXAgY29ycmVjdGx5IHdpdGggZGVmYXVsdFZhbHVlJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q2FzY2FkZXIgb3B0aW9ucz17b3B0aW9uc30gZGVmYXVsdFZhbHVlPXtbJ3poZWppYW5nJywgJ2hhbmd6aG91J119IC8+KTtcbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0Jykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgZXhwZWN0KFxuICAgICAgcmVuZGVyKFxuICAgICAgICB3cmFwcGVyXG4gICAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAgIC5pbnN0YW5jZSgpXG4gICAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICAgKSxcbiAgICApLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICB9KTtcblxuICBpdCgnY2FuIGJlIHNlbGVjdGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q2FzY2FkZXIgb3B0aW9ucz17b3B0aW9uc30gLz4pO1xuICAgIHdyYXBwZXIuZmluZCgnaW5wdXQnKS5zaW11bGF0ZSgnY2xpY2snKTtcbiAgICBsZXQgcG9wdXBXcmFwcGVyID0gbW91bnQoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCdUcmlnZ2VyJylcbiAgICAgICAgLmluc3RhbmNlKClcbiAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICk7XG4gICAgcG9wdXBXcmFwcGVyXG4gICAgICAuZmluZCgnLmM3bi1jYXNjYWRlci1tZW51JylcbiAgICAgIC5hdCgwKVxuICAgICAgLmZpbmQoJy5jN24tY2FzY2FkZXItbWVudS1pdGVtJylcbiAgICAgIC5hdCgwKVxuICAgICAgLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGV4cGVjdChcbiAgICAgIHJlbmRlcihcbiAgICAgICAgd3JhcHBlclxuICAgICAgICAgIC5maW5kKCdUcmlnZ2VyJylcbiAgICAgICAgICAuaW5zdGFuY2UoKVxuICAgICAgICAgIC5nZXRDb21wb25lbnQoKSxcbiAgICAgICksXG4gICAgKS50b01hdGNoU25hcHNob3QoKTtcbiAgICBwb3B1cFdyYXBwZXIgPSBtb3VudChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAuaW5zdGFuY2UoKVxuICAgICAgICAuZ2V0Q29tcG9uZW50KCksXG4gICAgKTtcbiAgICBwb3B1cFdyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLWNhc2NhZGVyLW1lbnUnKVxuICAgICAgLmF0KDEpXG4gICAgICAuZmluZCgnLmM3bi1jYXNjYWRlci1tZW51LWl0ZW0nKVxuICAgICAgLmF0KDApXG4gICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgZXhwZWN0KFxuICAgICAgcmVuZGVyKFxuICAgICAgICB3cmFwcGVyXG4gICAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAgIC5pbnN0YW5jZSgpXG4gICAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICAgKSxcbiAgICApLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICAgIHBvcHVwV3JhcHBlciA9IG1vdW50KFxuICAgICAgd3JhcHBlclxuICAgICAgICAuZmluZCgnVHJpZ2dlcicpXG4gICAgICAgIC5pbnN0YW5jZSgpXG4gICAgICAgIC5nZXRDb21wb25lbnQoKSxcbiAgICApO1xuICAgIHBvcHVwV3JhcHBlclxuICAgICAgLmZpbmQoJy5jN24tY2FzY2FkZXItbWVudScpXG4gICAgICAuYXQoMilcbiAgICAgIC5maW5kKCcuYzduLWNhc2NhZGVyLW1lbnUtaXRlbScpXG4gICAgICAuYXQoMClcbiAgICAgIC5zaW11bGF0ZSgnY2xpY2snKTtcbiAgICBleHBlY3QoXG4gICAgICByZW5kZXIoXG4gICAgICAgIHdyYXBwZXJcbiAgICAgICAgICAuZmluZCgnVHJpZ2dlcicpXG4gICAgICAgICAgLmluc3RhbmNlKClcbiAgICAgICAgICAuZ2V0Q29tcG9uZW50KCksXG4gICAgICApLFxuICAgICkudG9NYXRjaFNuYXBzaG90KCk7XG4gIH0pO1xuXG4gIGl0KCdiYWNrc3BhY2Ugc2hvdWxkIHdvcmsgd2l0aCBgQ2FzY2FkZXJbc2hvd1NlYXJjaF1gJywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudCg8Q2FzY2FkZXIgb3B0aW9ucz17b3B0aW9uc30gc2hvd1NlYXJjaCAvPik7XG4gICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNpbXVsYXRlKCdjaGFuZ2UnLCB7IHRhcmdldDogeyB2YWx1ZTogJzEyMycgfSB9KTtcbiAgICBleHBlY3Qod3JhcHBlci5zdGF0ZSgnaW5wdXRWYWx1ZScpKS50b0JlKCcxMjMnKTtcbiAgICB3cmFwcGVyLmZpbmQoJ2lucHV0Jykuc2ltdWxhdGUoJ2tleWRvd24nLCB7IGtleUNvZGU6IEtleUNvZGUuQkFDS1NQQUNFIH0pO1xuICAgIC8vIFNpbXVsYXRlIG9uS2V5RG93biB3aWxsIG5vdCB0cmlnZ2VyIG9uQ2hhbmdlIGJ5IGRlZmF1bHQsIHNvIHRoZSB2YWx1ZSBpcyBzdGlsbCAnMTIzJ1xuICAgIGV4cGVjdCh3cmFwcGVyLnN0YXRlKCdpbnB1dFZhbHVlJykpLnRvQmUoJzEyMycpO1xuICB9KTtcbn0pO1xuIl19