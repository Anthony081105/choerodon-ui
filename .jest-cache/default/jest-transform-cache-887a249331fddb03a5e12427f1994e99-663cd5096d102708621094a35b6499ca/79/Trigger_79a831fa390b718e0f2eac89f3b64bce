cac8b983df773501d12d755fe1c7ebd9
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _tslib = require("tslib");

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactDom = require("react-dom");

var _classnames = _interopRequireDefault(require("classnames"));

var _raf = _interopRequireDefault(require("raf"));

var _mobx = require("mobx");

var _mobxReact = require("mobx-react");

var _noop = _interopRequireDefault(require("lodash/noop"));

var _Popup = _interopRequireDefault(require("./Popup"));

var _autobind = _interopRequireDefault(require("../_util/autobind"));

var _TaskRunner = _interopRequireDefault(require("../_util/TaskRunner"));

var _EventManager = _interopRequireDefault(require("../_util/EventManager"));

var _TriggerChild = _interopRequireDefault(require("./TriggerChild"));

function isPointsEq(a1, a2) {
  return a1[0] === a2[0] && a1[1] === a2[1];
}

function _getPopupClassNameFromAlign(builtinPlacements, prefixCls, align) {
  var points = align.points;
  var found = Object.keys(builtinPlacements).find(function (placement) {
    return {}.hasOwnProperty.call(builtinPlacements, placement) && isPointsEq(builtinPlacements[placement].points, points);
  });
  return found ? "".concat(prefixCls, "-popup-placement-").concat(found) : '';
}

function getAlignFromPlacement(builtinPlacements, placementStr, align) {
  var baseAlign = builtinPlacements[placementStr] || {};
  return (0, _objectSpread2["default"])({}, baseAlign, {}, align);
}

function contains(root, n) {
  var node = n;

  if (root) {
    while (node) {
      if (node === root || root.contains && root.contains(node)) {
        return true;
      }

      node = node.parentNode;
    }
  }

  return false;
}

var Trigger =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Trigger, _Component);

  function Trigger(props, context) {
    var _this;

    (0, _classCallCheck2["default"])(this, Trigger);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(Trigger).call(this, props, context)); // 兼容ie11
    // 在ie11上当pop的内容存在滚动条的时候 点击滚动条会导致当前组件失去焦点
    // 给组件设置的 preventDefault 不会起到作用
    // 根据 handlePopupMouseDown  handlePopupMouseUp 设置一个标识符来判断当前点击的是否是弹出框
    // 不应该使用 state 将isClickScrollbar放到state里面会导致渲染导致在chrome下无法点击滚动条进行拖动

    _this.isClickScrollbar = {
      value: false
    };
    _this.popupTask = new _TaskRunner["default"]();
    _this.documentEvent = new _EventManager["default"](typeof window !== 'undefined' && document);
    _this.focusTime = 0;
    _this.preClickTime = 0;
    _this.animateFrameId = 0;

    _this.saveRef = function (node) {
      return _this.popup = node;
    };

    (0, _mobx.runInAction)(function () {
      _this.popupHidden = 'popupHidden' in props ? props.popupHidden : props.defaultPopupHidden;
    });
    return _this;
  }

  (0, _createClass2["default"])(Trigger, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var children = this.props.children;
      var popup = this.getPopup();

      var newChildren = _react.Children.map(children, function (child) {
        if ((0, _react.isValidElement)(child)) {
          var newChildProps = {};

          if (_this2.isContextMenuToShow()) {
            newChildProps.onContextMenu = _this2.handleEvent;
          }

          if (_this2.isClickToHide() || _this2.isClickToShow()) {
            newChildProps.onClick = _this2.handleEvent;
            newChildProps.onMouseDown = _this2.handleEvent;
          }

          if (_this2.isMouseEnterToShow()) {
            newChildProps.onMouseEnter = _this2.handleEvent;
          }

          if (_this2.isMouseLeaveToHide()) {
            newChildProps.onMouseLeave = _this2.handleEvent;
          }

          if (_this2.isFocusToShow() || _this2.isBlurToHide()) {
            newChildProps.onFocus = _this2.handleEvent;
            newChildProps.onBlur = _this2.handleEvent;
          }

          newChildProps.isClickScrollbar = _this2.isClickScrollbar;
          newChildProps.popupHidden = _this2.popupHidden;
          return _react["default"].createElement(_TriggerChild["default"], (0, _extends2["default"])({}, newChildProps), child);
        }

        return child;
      });

      return [newChildren, popup];
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      var popupHidden = nextProps.popupHidden;

      if (popupHidden !== this.popupHidden && popupHidden !== undefined) {
        this.popupHidden = popupHidden;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      var popupHidden = this.popupHidden;
      this.documentEvent.clear();

      if (!popupHidden) {
        this.documentEvent.addEventListener('scroll', this.handleDocumentScroll, true);

        if ((this.isClickToHide() || this.isContextMenuToShow()) && !this.isBlurToHide()) {
          this.documentEvent.addEventListener('mousedown', this.handleDocumentMouseDown);
        }
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.popupTask.cancel();
      this.documentEvent.clear();
    }
  }, {
    key: "handleEvent",
    value: function handleEvent(eventName, child, e) {
      var handle = this.props["on".concat(eventName)];
      var childHandle = child.props["on".concat(eventName)];

      if (childHandle) {
        childHandle(e);
      }

      if (!e.isDefaultPrevented()) {
        if (handle) {
          handle(e);
        }

        if (!e.isDefaultPrevented()) {
          this["handle".concat(eventName)].call(this, e);
        }
      }
    }
  }, {
    key: "handleContextMenu",
    value: function handleContextMenu(e) {
      e.preventDefault();
      this.setPopupHidden(false);
    }
  }, {
    key: "handleFocus",
    value: function handleFocus() {
      if (this.isFocusToShow()) {
        var focusDelay = this.props.focusDelay;
        this.focusTime = Date.now();
        this.delaySetPopupHidden(false, focusDelay);
      }
    }
  }, {
    key: "handleBlur",
    value: function handleBlur() {
      if (this.isBlurToHide()) {
        var blurDelay = this.props.blurDelay;
        this.delaySetPopupHidden(true, blurDelay);
      }
    }
  }, {
    key: "handleDocumentMouseDown",
    value: function handleDocumentMouseDown(e) {
      if (this.popup) {
        var target = e.target;

        if (!contains((0, _reactDom.findDOMNode)(this), target) && !contains((0, _reactDom.findDOMNode)(this.popup), target)) {
          this.setPopupHidden(true);
        }
      }
    }
  }, {
    key: "handleDocumentScroll",
    value: function handleDocumentScroll(_ref) {
      var target = _ref.target;

      if (this.popup && target !== document && !contains((0, _reactDom.findDOMNode)(this.popup), target)) {
        if (this.animateFrameId) {
          _raf["default"].cancel(this.animateFrameId);
        }

        this.animateFrameId = (0, _raf["default"])(this.forcePopupAlign);
      }
    }
  }, {
    key: "handleMouseDown",
    value: function handleMouseDown() {
      this.preClickTime = Date.now();
    }
  }, {
    key: "handleClick",
    value: function handleClick(e) {
      var popupHidden = this.popupHidden;

      if (this.focusTime) {
        if (Math.abs(this.preClickTime - this.focusTime) < 20) {
          return;
        }

        this.focusTime = 0;
      }

      this.preClickTime = 0;

      if (this.isClickToHide() && !popupHidden || popupHidden && this.isClickToShow()) {
        e.preventDefault();
        this.setPopupHidden(!popupHidden);
      }
    }
  }, {
    key: "handleMouseEnter",
    value: function handleMouseEnter() {
      var mouseEnterDelay = this.props.mouseEnterDelay;
      this.delaySetPopupHidden(false, mouseEnterDelay);
    }
  }, {
    key: "handleMouseLeave",
    value: function handleMouseLeave() {
      var mouseLeaveDelay = this.props.mouseLeaveDelay;
      this.delaySetPopupHidden(true, mouseLeaveDelay);
    }
  }, {
    key: "handlePopupMouseEnter",
    value: function handlePopupMouseEnter() {
      this.popupTask.cancel();
    }
  }, {
    key: "handlePopupMouseLeave",
    value: function handlePopupMouseLeave() {
      var mouseLeaveDelay = this.props.mouseLeaveDelay;
      this.delaySetPopupHidden(true, mouseLeaveDelay);
    }
  }, {
    key: "getPopup",
    value: function getPopup() {
      var _this$props = this.props,
          prefixCls = _this$props.prefixCls,
          popupCls = _this$props.popupCls,
          popupStyle = _this$props.popupStyle,
          onPopupAnimateAppear = _this$props.onPopupAnimateAppear,
          onPopupAnimateEnter = _this$props.onPopupAnimateEnter,
          onPopupAnimateLeave = _this$props.onPopupAnimateLeave,
          onPopupAnimateEnd = _this$props.onPopupAnimateEnd,
          onPopupAlign = _this$props.onPopupAlign,
          popupContent = _this$props.popupContent,
          getPopupStyleFromAlign = _this$props.getPopupStyleFromAlign,
          _this$props$getRootDo = _this$props.getRootDomNode,
          getRootDomNode = _this$props$getRootDo === void 0 ? this.getRootDomNode : _this$props$getRootDo,
          transitionName = _this$props.transitionName,
          getPopupContainer = _this$props.getPopupContainer;
      var visible = !this.popupHidden && popupContent;
      var mouseProps = {};

      if (this.isMouseEnterToShow()) {
        mouseProps.onMouseEnter = this.handlePopupMouseEnter;
      }

      if (this.isMouseLeaveToHide()) {
        mouseProps.onMouseLeave = this.handlePopupMouseLeave;
      }

      return _react["default"].createElement(_Popup["default"], (0, _extends2["default"])({
        key: "popup",
        ref: this.saveRef,
        transitionName: transitionName,
        className: (0, _classnames["default"])("".concat(prefixCls, "-popup"), popupCls),
        style: popupStyle,
        hidden: !visible,
        align: this.getPopupAlign(),
        onAlign: onPopupAlign,
        onMouseDown: this.handlePopupMouseDown,
        onMouseUp: this.handlePopupMouseUp,
        getRootDomNode: getRootDomNode,
        onAnimateAppear: onPopupAnimateAppear,
        onAnimateEnter: onPopupAnimateEnter,
        onAnimateLeave: onPopupAnimateLeave,
        onAnimateEnd: onPopupAnimateEnd,
        getStyleFromAlign: getPopupStyleFromAlign,
        getClassNameFromAlign: this.getPopupClassNameFromAlign,
        getPopupContainer: getPopupContainer
      }, mouseProps), popupContent);
    }
  }, {
    key: "getPopupAlign",
    value: function getPopupAlign() {
      var _this$props2 = this.props,
          popupPlacement = _this$props2.popupPlacement,
          popupAlign = _this$props2.popupAlign,
          builtinPlacements = _this$props2.builtinPlacements;

      if (popupPlacement && builtinPlacements) {
        return getAlignFromPlacement(builtinPlacements, popupPlacement, popupAlign);
      }

      return popupAlign;
    }
  }, {
    key: "handlePopupMouseDown",
    value: function handlePopupMouseDown(e) {
      this.isClickScrollbar.value = true;
      e.preventDefault();
    }
  }, {
    key: "handlePopupMouseUp",
    value: function handlePopupMouseUp() {
      this.isClickScrollbar.value = false;
    }
  }, {
    key: "getRootDomNode",
    value: function getRootDomNode() {
      return (0, _reactDom.findDOMNode)(this);
    }
  }, {
    key: "getPopupClassNameFromAlign",
    value: function getPopupClassNameFromAlign(align) {
      var className = [];
      var _this$props3 = this.props,
          popupPlacement = _this$props3.popupPlacement,
          builtinPlacements = _this$props3.builtinPlacements,
          prefixCls = _this$props3.prefixCls,
          getCls = _this$props3.getPopupClassNameFromAlign;

      if (popupPlacement && builtinPlacements) {
        className.push(_getPopupClassNameFromAlign(builtinPlacements, prefixCls, align));
      }

      if (getCls) {
        var cls = getCls(align);

        if (cls) {
          className.push(cls);
        }
      }

      return className.join(' ');
    }
  }, {
    key: "forcePopupAlign",
    value: function forcePopupAlign() {
      if (!this.popupHidden && this.popup) {
        this.popup.forceAlign();
      }
    }
  }, {
    key: "setPopupHidden",
    value: function setPopupHidden(hidden) {
      this.popupTask.cancel();

      if (this.popupHidden !== hidden) {
        var _this$props4 = this.props,
            popupHidden = _this$props4.popupHidden,
            _this$props4$onPopupH = _this$props4.onPopupHiddenChange,
            onPopupHiddenChange = _this$props4$onPopupH === void 0 ? _noop["default"] : _this$props4$onPopupH;

        if (popupHidden === undefined) {
          this.popupHidden = hidden;
        }

        onPopupHiddenChange(hidden);
      }
    }
  }, {
    key: "delaySetPopupHidden",
    value: function delaySetPopupHidden(popupHidden, delay) {
      var _this3 = this;

      this.popupTask.cancel();

      if (delay) {
        this.popupTask.delay(delay, function () {
          _this3.setPopupHidden(popupHidden);
        });
      } else {
        this.setPopupHidden(popupHidden);
      }
    }
  }, {
    key: "isClickToShow",
    value: function isClickToShow() {
      var _this$props5 = this.props,
          _this$props5$action = _this$props5.action,
          action = _this$props5$action === void 0 ? [] : _this$props5$action,
          _this$props5$showActi = _this$props5.showAction,
          showAction = _this$props5$showActi === void 0 ? [] : _this$props5$showActi;
      return action.indexOf("click"
      /* click */
      ) !== -1 || showAction.indexOf("click"
      /* click */
      ) !== -1;
    }
  }, {
    key: "isContextMenuToShow",
    value: function isContextMenuToShow() {
      var _this$props6 = this.props,
          _this$props6$action = _this$props6.action,
          action = _this$props6$action === void 0 ? [] : _this$props6$action,
          _this$props6$showActi = _this$props6.showAction,
          showAction = _this$props6$showActi === void 0 ? [] : _this$props6$showActi;
      return action.indexOf("contextMenu"
      /* contextMenu */
      ) !== -1 || showAction.indexOf("contextMenu"
      /* contextMenu */
      ) !== -1;
    }
  }, {
    key: "isClickToHide",
    value: function isClickToHide() {
      var _this$props7 = this.props,
          _this$props7$action = _this$props7.action,
          action = _this$props7$action === void 0 ? [] : _this$props7$action,
          _this$props7$hideActi = _this$props7.hideAction,
          hideAction = _this$props7$hideActi === void 0 ? [] : _this$props7$hideActi;
      return action.indexOf("click"
      /* click */
      ) !== -1 || hideAction.indexOf("click"
      /* click */
      ) !== -1;
    }
  }, {
    key: "isMouseEnterToShow",
    value: function isMouseEnterToShow() {
      var _this$props8 = this.props,
          _this$props8$action = _this$props8.action,
          action = _this$props8$action === void 0 ? [] : _this$props8$action,
          _this$props8$showActi = _this$props8.showAction,
          showAction = _this$props8$showActi === void 0 ? [] : _this$props8$showActi;
      return action.indexOf("hover"
      /* hover */
      ) !== -1 || showAction.indexOf("mouseEnter"
      /* mouseEnter */
      ) !== -1;
    }
  }, {
    key: "isMouseLeaveToHide",
    value: function isMouseLeaveToHide() {
      var _this$props9 = this.props,
          _this$props9$action = _this$props9.action,
          action = _this$props9$action === void 0 ? [] : _this$props9$action,
          _this$props9$hideActi = _this$props9.hideAction,
          hideAction = _this$props9$hideActi === void 0 ? [] : _this$props9$hideActi;
      return action.indexOf("hover"
      /* hover */
      ) !== -1 || hideAction.indexOf("mouseLeave"
      /* mouseLeave */
      ) !== -1;
    }
  }, {
    key: "isFocusToShow",
    value: function isFocusToShow() {
      var _this$props10 = this.props,
          _this$props10$action = _this$props10.action,
          action = _this$props10$action === void 0 ? [] : _this$props10$action,
          _this$props10$showAct = _this$props10.showAction,
          showAction = _this$props10$showAct === void 0 ? [] : _this$props10$showAct;
      return action.indexOf("focus"
      /* focus */
      ) !== -1 || showAction.indexOf("focus"
      /* focus */
      ) !== -1;
    }
  }, {
    key: "isBlurToHide",
    value: function isBlurToHide() {
      var _this$props11 = this.props,
          _this$props11$action = _this$props11.action,
          action = _this$props11$action === void 0 ? [] : _this$props11$action,
          _this$props11$hideAct = _this$props11.hideAction,
          hideAction = _this$props11$hideAct === void 0 ? [] : _this$props11$hideAct;
      return action.indexOf("focus"
      /* focus */
      ) !== -1 || hideAction.indexOf("blur"
      /* blur */
      ) !== -1;
    }
  }]);
  return Trigger;
}(_react.Component);

Trigger.displayName = 'Trigger';
Trigger.propTypes = {
  action: _mobxReact.PropTypes.arrayOrObservableArrayOf(_propTypes["default"].oneOf(["hover"
  /* hover */
  , "contextMenu"
  /* contextMenu */
  , "focus"
  /* focus */
  , "click"
  /* click */
  ])),
  showAction: _mobxReact.PropTypes.arrayOrObservableArrayOf(_propTypes["default"].oneOf(["mouseEnter"
  /* mouseEnter */
  , "contextMenu"
  /* contextMenu */
  , "focus"
  /* focus */
  , "click"
  /* click */
  ])),
  hideAction: _mobxReact.PropTypes.arrayOrObservableArrayOf(_propTypes["default"].oneOf(["blur"
  /* blur */
  , "mouseLeave"
  /* mouseLeave */
  , "click"
  /* click */
  ])),
  popupContent: _propTypes["default"].node,
  popupCls: _propTypes["default"].string,
  popupStyle: _propTypes["default"].object,
  popupHidden: _propTypes["default"].bool,
  popupPlacement: _propTypes["default"].string,
  popupAlign: _propTypes["default"].object,
  builtinPlacements: _propTypes["default"].any,
  onPopupAnimateAppear: _propTypes["default"].func,
  onPopupAnimateEnter: _propTypes["default"].func,
  onPopupAnimateLeave: _propTypes["default"].func,
  onPopupAnimateEnd: _propTypes["default"].func,
  onPopupAlign: _propTypes["default"].func,
  onPopupHiddenChange: _propTypes["default"].func,
  getPopupStyleFromAlign: _propTypes["default"].func,
  getPopupContainer: _propTypes["default"].func,
  focusDelay: _propTypes["default"].number,
  blurDelay: _propTypes["default"].number,
  mouseEnterDelay: _propTypes["default"].number,
  mouseLeaveDelay: _propTypes["default"].number,
  transitionName: _propTypes["default"].string,
  defaultPopupHidden: _propTypes["default"].bool
};
Trigger.defaultProps = {
  focusDelay: 150,
  blurDelay: 0,
  mouseEnterDelay: 100,
  mouseLeaveDelay: 100,
  transitionName: 'slide-up',
  defaultPopupHidden: true
};
(0, _tslib.__decorate)([_mobx.observable], Trigger.prototype, "popupHidden", void 0);
(0, _tslib.__decorate)([_mobx.action], Trigger.prototype, "componentWillReceiveProps", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handleEvent", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handleDocumentMouseDown", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handleDocumentScroll", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handlePopupMouseEnter", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handlePopupMouseLeave", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handlePopupMouseDown", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "handlePopupMouseUp", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "getRootDomNode", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "getPopupClassNameFromAlign", null);
(0, _tslib.__decorate)([_autobind["default"]], Trigger.prototype, "forcePopupAlign", null);
(0, _tslib.__decorate)([_mobx.action], Trigger.prototype, "setPopupHidden", null);
Trigger = (0, _tslib.__decorate)([_mobxReact.observer], Trigger);
var _default = Trigger;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzLXByby90cmlnZ2VyL1RyaWdnZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUVBLFNBQVMsVUFBVCxDQUFvQixFQUFwQixFQUFrQyxFQUFsQyxFQUE4QztBQUM1QyxTQUFPLEVBQUUsQ0FBQyxDQUFELENBQUYsS0FBVSxFQUFFLENBQUMsQ0FBRCxDQUFaLElBQW1CLEVBQUUsQ0FBQyxDQUFELENBQUYsS0FBVSxFQUFFLENBQUMsQ0FBRCxDQUF0QztBQUNEOztBQUVELFNBQVMsMkJBQVQsQ0FBb0MsaUJBQXBDLEVBQXVELFNBQXZELEVBQWtFLEtBQWxFLEVBQXVFO0FBQUEsTUFDN0QsTUFENkQsR0FDbEQsS0FEa0QsQ0FDN0QsTUFENkQ7QUFFckUsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQVAsQ0FBWSxpQkFBWixFQUErQixJQUEvQixDQUNaLFVBQUEsU0FBUztBQUFBLFdBQ04sR0FBRyxjQUFILENBQWtCLElBQWxCLENBQXVCLGlCQUF2QixFQUEwQyxTQUExQyxLQUNDLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFELENBQWpCLENBQTZCLE1BQTlCLEVBQXNDLE1BQXRDLENBRkw7QUFBQSxHQURHLENBQWQ7QUFLQSxTQUFPLEtBQUssYUFBTSxTQUFOLDhCQUFtQyxLQUFuQyxJQUE2QyxFQUF6RDtBQUNEOztBQUVELFNBQVMscUJBQVQsQ0FBK0IsaUJBQS9CLEVBQWtELFlBQWxELEVBQWdFLEtBQWhFLEVBQXFFO0FBQ25FLE1BQU0sU0FBUyxHQUFHLGlCQUFpQixDQUFDLFlBQUQsQ0FBakIsSUFBbUMsRUFBckQ7QUFDQSw0Q0FDSyxTQURMLE1BRUssS0FG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TXBCLEVBQUEsa0JBQWtCLEVBQUU7QUFOQSxDQUFmO0FBZ0NLLHVCQUFBLENBQVgsZ0JBQVcsQ0FBQSxFLGlCQUFBLEUsYUFBQSxFLEtBQXNCLENBQXRCO0FBNENaLHVCQUFBLENBREMsWUFDRCxDQUFBLEUsaUJBQUEsRSwyQkFBQSxFQUtDLElBTEQ7QUF3QkEsdUJBQUEsQ0FEQyxvQkFDRCxDQUFBLEUsaUJBQUEsRSxhQUFBLEVBY0MsSUFkRDtBQXFDQSx1QkFBQSxDQURDLG9CQUNELENBQUEsRSxpQkFBQSxFLHlCQUFBLEVBT0MsSUFQRDtBQVVBLHVCQUFBLENBREMsb0JBQ0QsQ0FBQSxFLGlCQUFBLEUsc0JBQUEsRUFPQyxJQVBEO0FBdUNBLHVCQUFBLENBREMsb0JBQ0QsQ0FBQSxFLGlCQUFBLEUsdUJBQUEsRUFFQyxJQUZEO0FBS0EsdUJBQUEsQ0FEQyxvQkFDRCxDQUFBLEUsaUJBQUEsRSx1QkFBQSxFQUdDLElBSEQ7QUFpRUEsdUJBQUEsQ0FEQyxvQkFDRCxDQUFBLEUsaUJBQUEsRSxzQkFBQSxFQUdDLElBSEQ7QUFNQSx1QkFBQSxDQURDLG9CQUNELENBQUEsRSxpQkFBQSxFLG9CQUFBLEVBRUMsSUFGRDtBQUtBLHVCQUFBLENBREMsb0JBQ0QsQ0FBQSxFLGlCQUFBLEUsZ0JBQUEsRUFFQyxJQUZEO0FBS0EsdUJBQUEsQ0FEQyxvQkFDRCxDQUFBLEUsaUJBQUEsRSw0QkFBQSxFQWtCQyxJQWxCRDtBQXFCQSx1QkFBQSxDQURDLG9CQUNELENBQUEsRSxpQkFBQSxFLGlCQUFBLEVBSUMsSUFKRDtBQU9BLHVCQUFBLENBREMsWUFDRCxDQUFBLEUsaUJBQUEsRSxnQkFBQSxFQVNDLElBVEQ7QUFyVm1CLE9BQU8sR0FBQSx1QkFBQSxDQUQzQixtQkFDMkIsQ0FBQSxFQUFQLE9BQU8sQ0FBUDtlQUFBLE8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgQ1NTUHJvcGVydGllcywgaXNWYWxpZEVsZW1lbnQsIEtleSwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCB7IGZpbmRET01Ob2RlIH0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHJhZiBmcm9tICdyYWYnO1xuaW1wb3J0IHsgYWN0aW9uIGFzIG1vYnhBY3Rpb24sIG9ic2VydmFibGUsIHJ1bkluQWN0aW9uIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBvYnNlcnZlciwgUHJvcFR5cGVzIGFzIE1vYnhQcm9wVHlwZXMgfSBmcm9tICdtb2J4LXJlYWN0JztcbmltcG9ydCBub29wIGZyb20gJ2xvZGFzaC9ub29wJztcbmltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwJztcbmltcG9ydCBhdXRvYmluZCBmcm9tICcuLi9fdXRpbC9hdXRvYmluZCc7XG5pbXBvcnQgVGFza1J1bm5lciBmcm9tICcuLi9fdXRpbC9UYXNrUnVubmVyJztcbmltcG9ydCB7IEVsZW1lbnRQcm9wcyB9IGZyb20gJy4uL2NvcmUvVmlld0NvbXBvbmVudCc7XG5pbXBvcnQgRXZlbnRNYW5hZ2VyIGZyb20gJy4uL191dGlsL0V2ZW50TWFuYWdlcic7XG5pbXBvcnQgeyBBY3Rpb24sIEhpZGVBY3Rpb24sIFNob3dBY3Rpb24gfSBmcm9tICcuL2VudW0nO1xuaW1wb3J0IFRyaWdnZXJDaGlsZCBmcm9tICcuL1RyaWdnZXJDaGlsZCc7XG5cbmZ1bmN0aW9uIGlzUG9pbnRzRXEoYTE6IHN0cmluZ1tdLCBhMjogc3RyaW5nW10pOiBib29sZWFuIHtcbiAgcmV0dXJuIGExWzBdID09PSBhMlswXSAmJiBhMVsxXSA9PT0gYTJbMV07XG59XG5cbmZ1bmN0aW9uIGdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduKGJ1aWx0aW5QbGFjZW1lbnRzLCBwcmVmaXhDbHMsIGFsaWduKTogc3RyaW5nIHtcbiAgY29uc3QgeyBwb2ludHMgfSA9IGFsaWduO1xuICBjb25zdCBmb3VuZCA9IE9iamVjdC5rZXlzKGJ1aWx0aW5QbGFjZW1lbnRzKS5maW5kKFxuICAgIHBsYWNlbWVudCA9PlxuICAgICAgKHt9Lmhhc093blByb3BlcnR5LmNhbGwoYnVpbHRpblBsYWNlbWVudHMsIHBsYWNlbWVudCkgJiZcbiAgICAgICAgaXNQb2ludHNFcShidWlsdGluUGxhY2VtZW50c1twbGFjZW1lbnRdLnBvaW50cywgcG9pbnRzKSksXG4gICk7XG4gIHJldHVybiBmb3VuZCA/IGAke3ByZWZpeENsc30tcG9wdXAtcGxhY2VtZW50LSR7Zm91bmR9YCA6ICcnO1xufVxuXG5mdW5jdGlvbiBnZXRBbGlnbkZyb21QbGFjZW1lbnQoYnVpbHRpblBsYWNlbWVudHMsIHBsYWNlbWVudFN0ciwgYWxpZ24pIHtcbiAgY29uc3QgYmFzZUFsaWduID0gYnVpbHRpblBsYWNlbWVudHNbcGxhY2VtZW50U3RyXSB8fCB7fTtcbiAgcmV0dXJuIHtcbiAgICAuLi5iYXNlQWxpZ24sXG4gICAgLi4uYWxpZ24sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNvbnRhaW5zKHJvb3QsIG4pIHtcbiAgbGV0IG5vZGUgPSBuO1xuICBpZiAocm9vdCkge1xuICAgIHdoaWxlIChub2RlKSB7XG4gICAgICBpZiAobm9kZSA9PT0gcm9vdCB8fCAocm9vdC5jb250YWlucyAmJiByb290LmNvbnRhaW5zKG5vZGUpKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmlnZ2VyUHJvcHMgZXh0ZW5kcyBFbGVtZW50UHJvcHMge1xuICBhY3Rpb24/OiBBY3Rpb25bXTtcbiAgc2hvd0FjdGlvbj86IFNob3dBY3Rpb25bXTtcbiAgaGlkZUFjdGlvbj86IEhpZGVBY3Rpb25bXTtcbiAgcG9wdXBDb250ZW50PzogUmVhY3ROb2RlIHwgKChwcm9wczogYW55KSA9PiBSZWFjdE5vZGUpO1xuICBwb3B1cENscz86IHN0cmluZztcbiAgcG9wdXBTdHlsZT86IENTU1Byb3BlcnRpZXM7XG4gIHBvcHVwSGlkZGVuPzogYm9vbGVhbjtcbiAgcG9wdXBQbGFjZW1lbnQ/OiBzdHJpbmc7XG4gIHBvcHVwQWxpZ24/OiBvYmplY3Q7XG4gIGJ1aWx0aW5QbGFjZW1lbnRzPzogYW55O1xuICBvblBvcHVwQWxpZ24/OiAoc291cmNlOiBOb2RlLCBhbGlnbjogb2JqZWN0LCB0YXJnZXQ6IE5vZGUgfCBXaW5kb3cpID0+IHZvaWQ7XG4gIG9uUG9wdXBBbmltYXRlQXBwZWFyPzogKGtleTogS2V5IHwgbnVsbCkgPT4gdm9pZDtcbiAgb25Qb3B1cEFuaW1hdGVFbnRlcj86IChrZXk6IEtleSB8IG51bGwpID0+IHZvaWQ7XG4gIG9uUG9wdXBBbmltYXRlTGVhdmU/OiAoa2V5OiBLZXkgfCBudWxsKSA9PiB2b2lkO1xuICBvblBvcHVwQW5pbWF0ZUVuZD86IChrZXk6IEtleSB8IG51bGwsIGV4aXN0czogYm9vbGVhbikgPT4gdm9pZDtcbiAgb25Qb3B1cEhpZGRlbkNoYW5nZT86IChoaWRkZW46IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGdldFJvb3REb21Ob2RlPzogKCkgPT4gRWxlbWVudCB8IG51bGwgfCBUZXh0O1xuICBnZXRQb3B1cFN0eWxlRnJvbUFsaWduPzogKHRhcmdldDogTm9kZSB8IFdpbmRvdywgYWxpZ246IG9iamVjdCkgPT4gb2JqZWN0IHwgdW5kZWZpbmVkO1xuICBnZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbj86IChhbGlnbjogb2JqZWN0KSA9PiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGdldFBvcHVwQ29udGFpbmVyPzogKHRyaWdnZXJOb2RlOiBIVE1MRWxlbWVudCkgPT4gSFRNTEVsZW1lbnQ7XG4gIGZvY3VzRGVsYXk/OiBudW1iZXI7XG4gIGJsdXJEZWxheT86IG51bWJlcjtcbiAgbW91c2VFbnRlckRlbGF5PzogbnVtYmVyO1xuICBtb3VzZUxlYXZlRGVsYXk/OiBudW1iZXI7XG4gIHRyYW5zaXRpb25OYW1lPzogc3RyaW5nO1xuICBkZWZhdWx0UG9wdXBIaWRkZW4/OiBib29sZWFuO1xufVxuXG5Ab2JzZXJ2ZXJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRyaWdnZXIgZXh0ZW5kcyBDb21wb25lbnQ8VHJpZ2dlclByb3BzPiB7XG4gIHN0YXRpYyBkaXNwbGF5TmFtZSA9ICdUcmlnZ2VyJztcblxuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGFjdGlvbjogTW9ieFByb3BUeXBlcy5hcnJheU9yT2JzZXJ2YWJsZUFycmF5T2YoXG4gICAgICBQcm9wVHlwZXMub25lT2YoW0FjdGlvbi5ob3ZlciwgQWN0aW9uLmNvbnRleHRNZW51LCBBY3Rpb24uZm9jdXMsIEFjdGlvbi5jbGlja10pLFxuICAgICksXG4gICAgc2hvd0FjdGlvbjogTW9ieFByb3BUeXBlcy5hcnJheU9yT2JzZXJ2YWJsZUFycmF5T2YoXG4gICAgICBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICBTaG93QWN0aW9uLm1vdXNlRW50ZXIsXG4gICAgICAgIFNob3dBY3Rpb24uY29udGV4dE1lbnUsXG4gICAgICAgIFNob3dBY3Rpb24uZm9jdXMsXG4gICAgICAgIFNob3dBY3Rpb24uY2xpY2ssXG4gICAgICBdKSxcbiAgICApLFxuICAgIGhpZGVBY3Rpb246IE1vYnhQcm9wVHlwZXMuYXJyYXlPck9ic2VydmFibGVBcnJheU9mKFxuICAgICAgUHJvcFR5cGVzLm9uZU9mKFtIaWRlQWN0aW9uLmJsdXIsIEhpZGVBY3Rpb24ubW91c2VMZWF2ZSwgSGlkZUFjdGlvbi5jbGlja10pLFxuICAgICksXG4gICAgcG9wdXBDb250ZW50OiBQcm9wVHlwZXMubm9kZSxcbiAgICBwb3B1cENsczogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwb3B1cFN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHBvcHVwSGlkZGVuOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBwb3B1cFBsYWNlbWVudDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwb3B1cEFsaWduOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGJ1aWx0aW5QbGFjZW1lbnRzOiBQcm9wVHlwZXMuYW55LFxuICAgIG9uUG9wdXBBbmltYXRlQXBwZWFyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblBvcHVwQW5pbWF0ZUVudGVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblBvcHVwQW5pbWF0ZUxlYXZlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblBvcHVwQW5pbWF0ZUVuZDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Qb3B1cEFsaWduOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblBvcHVwSGlkZGVuQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBnZXRQb3B1cFN0eWxlRnJvbUFsaWduOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBnZXRQb3B1cENvbnRhaW5lcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZm9jdXNEZWxheTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBibHVyRGVsYXk6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgbW91c2VFbnRlckRlbGF5OiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIG1vdXNlTGVhdmVEZWxheTogUHJvcFR5cGVzLm51bWJlcixcbiAgICB0cmFuc2l0aW9uTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBkZWZhdWx0UG9wdXBIaWRkZW46IFByb3BUeXBlcy5ib29sLFxuICB9O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZm9jdXNEZWxheTogMTUwLFxuICAgIGJsdXJEZWxheTogMCxcbiAgICBtb3VzZUVudGVyRGVsYXk6IDEwMCxcbiAgICBtb3VzZUxlYXZlRGVsYXk6IDEwMCxcbiAgICB0cmFuc2l0aW9uTmFtZTogJ3NsaWRlLXVwJyxcbiAgICBkZWZhdWx0UG9wdXBIaWRkZW46IHRydWUsXG4gIH07XG5cbiAgLy8g5YW85a65aWUxMVxuICAvLyDlnKhpZTEx5LiK5b2TcG9w55qE5YaF5a655a2Y5Zyo5rua5Yqo5p2h55qE5pe25YCZIOeCueWHu+a7muWKqOadoeS8muWvvOiHtOW9k+WJjee7hOS7tuWkseWOu+eEpueCuVxuICAvLyDnu5nnu4Tku7borr7nva7nmoQgcHJldmVudERlZmF1bHQg5LiN5Lya6LW35Yiw5L2c55SoXG4gIC8vIOagueaNriBoYW5kbGVQb3B1cE1vdXNlRG93biAgaGFuZGxlUG9wdXBNb3VzZVVwIOiuvue9ruS4gOS4quagh+ivhuespuadpeWIpOaWreW9k+WJjeeCueWHu+eahOaYr+WQpuaYr+W8ueWHuuahhlxuICAvLyDkuI3lupTor6Xkvb/nlKggc3RhdGUg5bCGaXNDbGlja1Njcm9sbGJhcuaUvuWIsHN0YXRl6YeM6Z2i5Lya5a+86Ie05riy5p+T5a+86Ie05ZyoY2hyb21l5LiL5peg5rOV54K55Ye75rua5Yqo5p2h6L+b6KGM5ouW5YqoXG4gIGlzQ2xpY2tTY3JvbGxiYXI6IHtcbiAgICB2YWx1ZTogYm9vbGVhblxuICB9ID0ge1xuICAgICAgdmFsdWU6IGZhbHNlLFxuICAgIH07XG5cbiAgcG9wdXA6IFBvcHVwIHwgbnVsbDtcblxuICBwb3B1cFRhc2s6IFRhc2tSdW5uZXIgPSBuZXcgVGFza1J1bm5lcigpO1xuXG4gIGRvY3VtZW50RXZlbnQ6IEV2ZW50TWFuYWdlciA9IG5ldyBFdmVudE1hbmFnZXIodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQpO1xuXG4gIGZvY3VzVGltZTogbnVtYmVyID0gMDtcblxuICBwcmVDbGlja1RpbWU6IG51bWJlciA9IDA7XG5cbiAgYW5pbWF0ZUZyYW1lSWQ6IG51bWJlciA9IDA7XG5cbiAgQG9ic2VydmFibGUgcG9wdXBIaWRkZW4/OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIHRoaXMucG9wdXBIaWRkZW4gPSAncG9wdXBIaWRkZW4nIGluIHByb3BzID8gcHJvcHMucG9wdXBIaWRkZW4gOiBwcm9wcy5kZWZhdWx0UG9wdXBIaWRkZW47XG4gICAgfSk7XG4gIH1cblxuICBzYXZlUmVmID0gbm9kZSA9PiAodGhpcy5wb3B1cCA9IG5vZGUpO1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNoaWxkcmVuIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHBvcHVwID0gdGhpcy5nZXRQb3B1cCgpO1xuICAgIGNvbnN0IG5ld0NoaWxkcmVuID0gQ2hpbGRyZW4ubWFwKGNoaWxkcmVuLCBjaGlsZCA9PiB7XG4gICAgICBpZiAoaXNWYWxpZEVsZW1lbnQoY2hpbGQpKSB7XG4gICAgICAgIGNvbnN0IG5ld0NoaWxkUHJvcHM6IGFueSA9IHt9O1xuICAgICAgICBpZiAodGhpcy5pc0NvbnRleHRNZW51VG9TaG93KCkpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uQ29udGV4dE1lbnUgPSB0aGlzLmhhbmRsZUV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ2xpY2tUb0hpZGUoKSB8fCB0aGlzLmlzQ2xpY2tUb1Nob3coKSkge1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25DbGljayA9IHRoaXMuaGFuZGxlRXZlbnQ7XG4gICAgICAgICAgbmV3Q2hpbGRQcm9wcy5vbk1vdXNlRG93biA9IHRoaXMuaGFuZGxlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNNb3VzZUVudGVyVG9TaG93KCkpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uTW91c2VFbnRlciA9IHRoaXMuaGFuZGxlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNNb3VzZUxlYXZlVG9IaWRlKCkpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uTW91c2VMZWF2ZSA9IHRoaXMuaGFuZGxlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNGb2N1c1RvU2hvdygpIHx8IHRoaXMuaXNCbHVyVG9IaWRlKCkpIHtcbiAgICAgICAgICBuZXdDaGlsZFByb3BzLm9uRm9jdXMgPSB0aGlzLmhhbmRsZUV2ZW50O1xuICAgICAgICAgIG5ld0NoaWxkUHJvcHMub25CbHVyID0gdGhpcy5oYW5kbGVFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBuZXdDaGlsZFByb3BzLmlzQ2xpY2tTY3JvbGxiYXIgPSB0aGlzLmlzQ2xpY2tTY3JvbGxiYXI7XG4gICAgICAgIG5ld0NoaWxkUHJvcHMucG9wdXBIaWRkZW4gPSB0aGlzLnBvcHVwSGlkZGVuO1xuICAgICAgICByZXR1cm4gPFRyaWdnZXJDaGlsZCB7Li4ubmV3Q2hpbGRQcm9wc30+e2NoaWxkfTwvVHJpZ2dlckNoaWxkPjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGlsZDtcbiAgICB9KTtcbiAgICByZXR1cm4gW25ld0NoaWxkcmVuLCBwb3B1cF07XG4gIH1cblxuICBAbW9ieEFjdGlvblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGNvbnN0IHsgcG9wdXBIaWRkZW4gfSA9IG5leHRQcm9wcztcbiAgICBpZiAocG9wdXBIaWRkZW4gIT09IHRoaXMucG9wdXBIaWRkZW4gJiYgcG9wdXBIaWRkZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5wb3B1cEhpZGRlbiA9IHBvcHVwSGlkZGVuO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICBjb25zdCB7IHBvcHVwSGlkZGVuIH0gPSB0aGlzO1xuICAgIHRoaXMuZG9jdW1lbnRFdmVudC5jbGVhcigpO1xuICAgIGlmICghcG9wdXBIaWRkZW4pIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRFdmVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLmhhbmRsZURvY3VtZW50U2Nyb2xsLCB0cnVlKTtcbiAgICAgIGlmICgodGhpcy5pc0NsaWNrVG9IaWRlKCkgfHwgdGhpcy5pc0NvbnRleHRNZW51VG9TaG93KCkpICYmICF0aGlzLmlzQmx1clRvSGlkZSgpKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnRFdmVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZURvY3VtZW50TW91c2VEb3duKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLnBvcHVwVGFzay5jYW5jZWwoKTtcbiAgICB0aGlzLmRvY3VtZW50RXZlbnQuY2xlYXIoKTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBoYW5kbGVFdmVudChldmVudE5hbWUsIGNoaWxkLCBlKSB7XG4gICAgY29uc3QgeyBbYG9uJHtldmVudE5hbWV9YF06IGhhbmRsZSB9ID0gdGhpcy5wcm9wcyBhcyB7IFtrZXk6IHN0cmluZ106IGFueSB9O1xuICAgIGNvbnN0IHsgW2BvbiR7ZXZlbnROYW1lfWBdOiBjaGlsZEhhbmRsZSB9ID0gY2hpbGQucHJvcHM7XG4gICAgaWYgKGNoaWxkSGFuZGxlKSB7XG4gICAgICBjaGlsZEhhbmRsZShlKTtcbiAgICB9XG4gICAgaWYgKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICBpZiAoaGFuZGxlKSB7XG4gICAgICAgIGhhbmRsZShlKTtcbiAgICAgIH1cbiAgICAgIGlmICghZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICB0aGlzW2BoYW5kbGUke2V2ZW50TmFtZX1gXS5jYWxsKHRoaXMsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUNvbnRleHRNZW51KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zZXRQb3B1cEhpZGRlbihmYWxzZSk7XG4gIH1cblxuICBoYW5kbGVGb2N1cygpIHtcbiAgICBpZiAodGhpcy5pc0ZvY3VzVG9TaG93KCkpIHtcbiAgICAgIGNvbnN0IHsgZm9jdXNEZWxheSB9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMuZm9jdXNUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMuZGVsYXlTZXRQb3B1cEhpZGRlbihmYWxzZSwgZm9jdXNEZWxheSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlQmx1cigpIHtcbiAgICBpZiAodGhpcy5pc0JsdXJUb0hpZGUoKSkge1xuICAgICAgY29uc3QgeyBibHVyRGVsYXkgfSA9IHRoaXMucHJvcHM7XG4gICAgICB0aGlzLmRlbGF5U2V0UG9wdXBIaWRkZW4odHJ1ZSwgYmx1ckRlbGF5KTtcbiAgICB9XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgaGFuZGxlRG9jdW1lbnRNb3VzZURvd24oZSkge1xuICAgIGlmICh0aGlzLnBvcHVwKSB7XG4gICAgICBjb25zdCB7IHRhcmdldCB9ID0gZTtcbiAgICAgIGlmICghY29udGFpbnMoZmluZERPTU5vZGUodGhpcyksIHRhcmdldCkgJiYgIWNvbnRhaW5zKGZpbmRET01Ob2RlKHRoaXMucG9wdXApLCB0YXJnZXQpKSB7XG4gICAgICAgIHRoaXMuc2V0UG9wdXBIaWRkZW4odHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgQGF1dG9iaW5kXG4gIGhhbmRsZURvY3VtZW50U2Nyb2xsKHsgdGFyZ2V0IH0pIHtcbiAgICBpZiAodGhpcy5wb3B1cCAmJiB0YXJnZXQgIT09IGRvY3VtZW50ICYmICFjb250YWlucyhmaW5kRE9NTm9kZSh0aGlzLnBvcHVwKSwgdGFyZ2V0KSkge1xuICAgICAgaWYgKHRoaXMuYW5pbWF0ZUZyYW1lSWQpIHtcbiAgICAgICAgcmFmLmNhbmNlbCh0aGlzLmFuaW1hdGVGcmFtZUlkKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuYW5pbWF0ZUZyYW1lSWQgPSByYWYodGhpcy5mb3JjZVBvcHVwQWxpZ24pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZU1vdXNlRG93bigpIHtcbiAgICB0aGlzLnByZUNsaWNrVGltZSA9IERhdGUubm93KCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhlKSB7XG4gICAgY29uc3QgeyBwb3B1cEhpZGRlbiB9ID0gdGhpcztcbiAgICBpZiAodGhpcy5mb2N1c1RpbWUpIHtcbiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnByZUNsaWNrVGltZSAtIHRoaXMuZm9jdXNUaW1lKSA8IDIwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZm9jdXNUaW1lID0gMDtcbiAgICB9XG4gICAgdGhpcy5wcmVDbGlja1RpbWUgPSAwO1xuICAgIGlmICgodGhpcy5pc0NsaWNrVG9IaWRlKCkgJiYgIXBvcHVwSGlkZGVuKSB8fCAocG9wdXBIaWRkZW4gJiYgdGhpcy5pc0NsaWNrVG9TaG93KCkpKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnNldFBvcHVwSGlkZGVuKCFwb3B1cEhpZGRlbik7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlTW91c2VFbnRlcigpIHtcbiAgICBjb25zdCB7IG1vdXNlRW50ZXJEZWxheSB9ID0gdGhpcy5wcm9wcztcbiAgICB0aGlzLmRlbGF5U2V0UG9wdXBIaWRkZW4oZmFsc2UsIG1vdXNlRW50ZXJEZWxheSk7XG4gIH1cblxuICBoYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgIGNvbnN0IHsgbW91c2VMZWF2ZURlbGF5IH0gPSB0aGlzLnByb3BzO1xuICAgIHRoaXMuZGVsYXlTZXRQb3B1cEhpZGRlbih0cnVlLCBtb3VzZUxlYXZlRGVsYXkpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIGhhbmRsZVBvcHVwTW91c2VFbnRlcigpIHtcbiAgICB0aGlzLnBvcHVwVGFzay5jYW5jZWwoKTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBoYW5kbGVQb3B1cE1vdXNlTGVhdmUoKSB7XG4gICAgY29uc3QgeyBtb3VzZUxlYXZlRGVsYXkgfSA9IHRoaXMucHJvcHM7XG4gICAgdGhpcy5kZWxheVNldFBvcHVwSGlkZGVuKHRydWUsIG1vdXNlTGVhdmVEZWxheSk7XG4gIH1cblxuICBnZXRQb3B1cCgpOiBSZWFjdE5vZGUge1xuICAgIGNvbnN0IHtcbiAgICAgIHByZWZpeENscyxcbiAgICAgIHBvcHVwQ2xzLFxuICAgICAgcG9wdXBTdHlsZSxcbiAgICAgIG9uUG9wdXBBbmltYXRlQXBwZWFyLFxuICAgICAgb25Qb3B1cEFuaW1hdGVFbnRlcixcbiAgICAgIG9uUG9wdXBBbmltYXRlTGVhdmUsXG4gICAgICBvblBvcHVwQW5pbWF0ZUVuZCxcbiAgICAgIG9uUG9wdXBBbGlnbixcbiAgICAgIHBvcHVwQ29udGVudCxcbiAgICAgIGdldFBvcHVwU3R5bGVGcm9tQWxpZ24sXG4gICAgICBnZXRSb290RG9tTm9kZSA9IHRoaXMuZ2V0Um9vdERvbU5vZGUsXG4gICAgICB0cmFuc2l0aW9uTmFtZSxcbiAgICAgIGdldFBvcHVwQ29udGFpbmVyLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHZpc2libGUgPSAhdGhpcy5wb3B1cEhpZGRlbiAmJiBwb3B1cENvbnRlbnQ7XG4gICAgY29uc3QgbW91c2VQcm9wczogYW55ID0ge307XG4gICAgaWYgKHRoaXMuaXNNb3VzZUVudGVyVG9TaG93KCkpIHtcbiAgICAgIG1vdXNlUHJvcHMub25Nb3VzZUVudGVyID0gdGhpcy5oYW5kbGVQb3B1cE1vdXNlRW50ZXI7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzTW91c2VMZWF2ZVRvSGlkZSgpKSB7XG4gICAgICBtb3VzZVByb3BzLm9uTW91c2VMZWF2ZSA9IHRoaXMuaGFuZGxlUG9wdXBNb3VzZUxlYXZlO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgPFBvcHVwXG4gICAgICAgIGtleT1cInBvcHVwXCJcbiAgICAgICAgcmVmPXt0aGlzLnNhdmVSZWZ9XG4gICAgICAgIHRyYW5zaXRpb25OYW1lPXt0cmFuc2l0aW9uTmFtZX1cbiAgICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWVzKGAke3ByZWZpeENsc30tcG9wdXBgLCBwb3B1cENscyl9XG4gICAgICAgIHN0eWxlPXtwb3B1cFN0eWxlfVxuICAgICAgICBoaWRkZW49eyF2aXNpYmxlfVxuICAgICAgICBhbGlnbj17dGhpcy5nZXRQb3B1cEFsaWduKCl9XG4gICAgICAgIG9uQWxpZ249e29uUG9wdXBBbGlnbn1cbiAgICAgICAgb25Nb3VzZURvd249e3RoaXMuaGFuZGxlUG9wdXBNb3VzZURvd259XG4gICAgICAgIG9uTW91c2VVcD17dGhpcy5oYW5kbGVQb3B1cE1vdXNlVXB9XG4gICAgICAgIGdldFJvb3REb21Ob2RlPXtnZXRSb290RG9tTm9kZX1cbiAgICAgICAgb25BbmltYXRlQXBwZWFyPXtvblBvcHVwQW5pbWF0ZUFwcGVhcn1cbiAgICAgICAgb25BbmltYXRlRW50ZXI9e29uUG9wdXBBbmltYXRlRW50ZXJ9XG4gICAgICAgIG9uQW5pbWF0ZUxlYXZlPXtvblBvcHVwQW5pbWF0ZUxlYXZlfVxuICAgICAgICBvbkFuaW1hdGVFbmQ9e29uUG9wdXBBbmltYXRlRW5kfVxuICAgICAgICBnZXRTdHlsZUZyb21BbGlnbj17Z2V0UG9wdXBTdHlsZUZyb21BbGlnbn1cbiAgICAgICAgZ2V0Q2xhc3NOYW1lRnJvbUFsaWduPXt0aGlzLmdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWdufVxuICAgICAgICBnZXRQb3B1cENvbnRhaW5lcj17Z2V0UG9wdXBDb250YWluZXJ9XG4gICAgICAgIHsuLi5tb3VzZVByb3BzfVxuICAgICAgPlxuICAgICAgICB7cG9wdXBDb250ZW50fVxuICAgICAgPC9Qb3B1cD5cbiAgICApO1xuICB9XG5cbiAgZ2V0UG9wdXBBbGlnbigpIHtcbiAgICBjb25zdCB7IHBvcHVwUGxhY2VtZW50LCBwb3B1cEFsaWduLCBidWlsdGluUGxhY2VtZW50cyB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAocG9wdXBQbGFjZW1lbnQgJiYgYnVpbHRpblBsYWNlbWVudHMpIHtcbiAgICAgIHJldHVybiBnZXRBbGlnbkZyb21QbGFjZW1lbnQoYnVpbHRpblBsYWNlbWVudHMsIHBvcHVwUGxhY2VtZW50LCBwb3B1cEFsaWduKTtcbiAgICB9XG4gICAgcmV0dXJuIHBvcHVwQWxpZ247XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgaGFuZGxlUG9wdXBNb3VzZURvd24oZSkge1xuICAgIHRoaXMuaXNDbGlja1Njcm9sbGJhci52YWx1ZSA9IHRydWVcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBAYXV0b2JpbmRcbiAgaGFuZGxlUG9wdXBNb3VzZVVwKCkge1xuICAgIHRoaXMuaXNDbGlja1Njcm9sbGJhci52YWx1ZSA9IGZhbHNlXG4gIH1cblxuICBAYXV0b2JpbmRcbiAgZ2V0Um9vdERvbU5vZGUoKSB7XG4gICAgcmV0dXJuIGZpbmRET01Ob2RlKHRoaXMpO1xuICB9XG5cbiAgQGF1dG9iaW5kXG4gIGdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduKGFsaWduKTogc3RyaW5nIHtcbiAgICBjb25zdCBjbGFzc05hbWU6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qge1xuICAgICAgcG9wdXBQbGFjZW1lbnQsXG4gICAgICBidWlsdGluUGxhY2VtZW50cyxcbiAgICAgIHByZWZpeENscyxcbiAgICAgIGdldFBvcHVwQ2xhc3NOYW1lRnJvbUFsaWduOiBnZXRDbHMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHBvcHVwUGxhY2VtZW50ICYmIGJ1aWx0aW5QbGFjZW1lbnRzKSB7XG4gICAgICBjbGFzc05hbWUucHVzaChnZXRQb3B1cENsYXNzTmFtZUZyb21BbGlnbihidWlsdGluUGxhY2VtZW50cywgcHJlZml4Q2xzLCBhbGlnbikpO1xuICAgIH1cbiAgICBpZiAoZ2V0Q2xzKSB7XG4gICAgICBjb25zdCBjbHMgPSBnZXRDbHMoYWxpZ24pO1xuICAgICAgaWYgKGNscykge1xuICAgICAgICBjbGFzc05hbWUucHVzaChjbHMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xhc3NOYW1lLmpvaW4oJyAnKTtcbiAgfVxuXG4gIEBhdXRvYmluZFxuICBmb3JjZVBvcHVwQWxpZ24oKSB7XG4gICAgaWYgKCF0aGlzLnBvcHVwSGlkZGVuICYmIHRoaXMucG9wdXApIHtcbiAgICAgIHRoaXMucG9wdXAuZm9yY2VBbGlnbigpO1xuICAgIH1cbiAgfVxuXG4gIEBtb2J4QWN0aW9uXG4gIHNldFBvcHVwSGlkZGVuKGhpZGRlbikge1xuICAgIHRoaXMucG9wdXBUYXNrLmNhbmNlbCgpO1xuICAgIGlmICh0aGlzLnBvcHVwSGlkZGVuICE9PSBoaWRkZW4pIHtcbiAgICAgIGNvbnN0IHsgcG9wdXBIaWRkZW4sIG9uUG9wdXBIaWRkZW5DaGFuZ2UgPSBub29wIH0gPSB0aGlzLnByb3BzO1xuICAgICAgaWYgKHBvcHVwSGlkZGVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5wb3B1cEhpZGRlbiA9IGhpZGRlbjtcbiAgICAgIH1cbiAgICAgIG9uUG9wdXBIaWRkZW5DaGFuZ2UoaGlkZGVuKTtcbiAgICB9XG4gIH1cblxuICBkZWxheVNldFBvcHVwSGlkZGVuKHBvcHVwSGlkZGVuLCBkZWxheSkge1xuICAgIHRoaXMucG9wdXBUYXNrLmNhbmNlbCgpO1xuICAgIGlmIChkZWxheSkge1xuICAgICAgdGhpcy5wb3B1cFRhc2suZGVsYXkoZGVsYXksICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRQb3B1cEhpZGRlbihwb3B1cEhpZGRlbik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRQb3B1cEhpZGRlbihwb3B1cEhpZGRlbik7XG4gICAgfVxuICB9XG5cbiAgaXNDbGlja1RvU2hvdygpIHtcbiAgICBjb25zdCB7IGFjdGlvbiA9IFtdLCBzaG93QWN0aW9uID0gW10gfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKEFjdGlvbi5jbGljaykgIT09IC0xIHx8IHNob3dBY3Rpb24uaW5kZXhPZihTaG93QWN0aW9uLmNsaWNrKSAhPT0gLTE7XG4gIH1cblxuICBpc0NvbnRleHRNZW51VG9TaG93KCkge1xuICAgIGNvbnN0IHsgYWN0aW9uID0gW10sIHNob3dBY3Rpb24gPSBbXSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gKFxuICAgICAgYWN0aW9uLmluZGV4T2YoQWN0aW9uLmNvbnRleHRNZW51KSAhPT0gLTEgfHwgc2hvd0FjdGlvbi5pbmRleE9mKFNob3dBY3Rpb24uY29udGV4dE1lbnUpICE9PSAtMVxuICAgICk7XG4gIH1cblxuICBpc0NsaWNrVG9IaWRlKCkge1xuICAgIGNvbnN0IHsgYWN0aW9uID0gW10sIGhpZGVBY3Rpb24gPSBbXSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gYWN0aW9uLmluZGV4T2YoQWN0aW9uLmNsaWNrKSAhPT0gLTEgfHwgaGlkZUFjdGlvbi5pbmRleE9mKEhpZGVBY3Rpb24uY2xpY2spICE9PSAtMTtcbiAgfVxuXG4gIGlzTW91c2VFbnRlclRvU2hvdygpIHtcbiAgICBjb25zdCB7IGFjdGlvbiA9IFtdLCBzaG93QWN0aW9uID0gW10gfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKEFjdGlvbi5ob3ZlcikgIT09IC0xIHx8IHNob3dBY3Rpb24uaW5kZXhPZihTaG93QWN0aW9uLm1vdXNlRW50ZXIpICE9PSAtMTtcbiAgfVxuXG4gIGlzTW91c2VMZWF2ZVRvSGlkZSgpIHtcbiAgICBjb25zdCB7IGFjdGlvbiA9IFtdLCBoaWRlQWN0aW9uID0gW10gfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIGFjdGlvbi5pbmRleE9mKEFjdGlvbi5ob3ZlcikgIT09IC0xIHx8IGhpZGVBY3Rpb24uaW5kZXhPZihIaWRlQWN0aW9uLm1vdXNlTGVhdmUpICE9PSAtMTtcbiAgfVxuXG4gIGlzRm9jdXNUb1Nob3coKSB7XG4gICAgY29uc3QgeyBhY3Rpb24gPSBbXSwgc2hvd0FjdGlvbiA9IFtdIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiBhY3Rpb24uaW5kZXhPZihBY3Rpb24uZm9jdXMpICE9PSAtMSB8fCBzaG93QWN0aW9uLmluZGV4T2YoU2hvd0FjdGlvbi5mb2N1cykgIT09IC0xO1xuICB9XG5cbiAgaXNCbHVyVG9IaWRlKCkge1xuICAgIGNvbnN0IHsgYWN0aW9uID0gW10sIGhpZGVBY3Rpb24gPSBbXSB9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gYWN0aW9uLmluZGV4T2YoQWN0aW9uLmZvY3VzKSAhPT0gLTEgfHwgaGlkZUFjdGlvbi5pbmRleE9mKEhpZGVBY3Rpb24uYmx1cikgIT09IC0xO1xuICB9XG59XG4iXX0=