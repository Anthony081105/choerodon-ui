2eab6839e938bdedc4b926731348dbf3
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("choerodon-ui/pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("choerodon-ui/pro/lib/data-set/FeedBack"));

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};
var defaultSpinProps = {
  size: "default"
  /* default */
  ,
  wrapperClassName: ''
};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableRowHeight', 30], ['tableColumnResizable', true], ['tableSpinProps', defaultSpinProps], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['modalSectionBorder', true], ['modalOkFirst', true], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL2NvbmZpZ3VyZS9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUdBOztBQUNBOztBQUdBOztBQWFBOzs7O0FBMkZBLElBQU0sa0JBQWtCLEdBQXVCLFNBQXpDLGtCQUF5QyxDQUFDLGFBQUQsRUFBc0M7QUFDbkYsVUFBUSxhQUFSO0FBQ0UsU0FBSyxPQUFMO0FBQ0UsYUFBTyx1QkFBRyxPQUFILEVBQVksWUFBWixDQUFQOztBQUNGLFNBQUssUUFBTDtBQUNFLGFBQU8sdUJBQUcsUUFBSCxFQUFhLHFCQUFiLENBQVA7O0FBQ0Y7QUFMRjtBQU9ELENBUkQ7O0FBVUEsSUFBTSxrQkFBa0IsR0FBRztBQUFFLEVBQUEsS0FBSyxFQUFBO0FBQUE7QUFBUDtBQUE4QixFQUFBLFFBQVEsRUFBQTtBQUFBOztBQUF0QyxDQUEzQjtBQUVBLElBQU0sZ0JBQWdCLEdBQUc7QUFBRSxFQUFBLElBQUksRUFBQTtBQUFBO0FBQU47QUFBc0IsRUFBQSxnQkFBZ0IsRUFBRTtBQUF4QyxDQUF6Qjs7QUFFQSxJQUFNLFlBQVksR0FBa0QsaUJBQVcsR0FBWCxDQUdsRSxDQUNBLENBQUMsV0FBRCxFQUFjLEtBQWQsQ0FEQSxFQUVBLENBQUMsY0FBRCxFQUFpQixTQUFqQixDQUZBLEVBR0EsQ0FBQyxnQkFBRCxFQUFtQixNQUFuQixDQUhBLEVBSUEsQ0FBQyxRQUFELEVBQVcsSUFBWCxDQUpBLEVBS0EsQ0FBQyxhQUFELEVBQWdCO0FBQUUsRUFBQSxNQUFNLEVBQUUsT0FBTyxFQUFQLEdBQVksRUFBdEI7QUFBMEIsRUFBQSxHQUFHLEVBQUU7QUFBL0IsQ0FBaEIsQ0FMQSxFQU1BLENBQUMsV0FBRCxFQUFjLFVBQUEsSUFBSTtBQUFBLGdDQUFvQixJQUFwQjtBQUFBLENBQWxCLENBTkEsRUFPQSxDQUFDLG1CQUFELEVBQXNCLE1BQXRC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QUMsR0FBRCxDQUFwQjs7QUFDQSxVQUFJLFVBQVUsQ0FBQyxRQUFYLENBQW9CLEdBQXBCLEtBQTRCLDBCQUFTLEtBQVQsQ0FBaEMsRUFBaUQ7QUFDL0MsUUFBQSxZQUFZLENBQUMsR0FBYixDQUFpQixHQUFqQixxQ0FDSyxnQkFBVSxZQUFZLENBQUMsR0FBYixDQUFpQixHQUFqQixDQUFWLENBREwsTUFFSyxLQUZMO0FBSUQsT0FMRCxNQUtPO0FBQ0wsUUFBQSxZQUFZLENBQUMsR0FBYixDQUFpQixHQUFqQixFQUFzQixNQUFNLENBQUMsR0FBRCxDQUE1QjtBQUNEO0FBQ0YsS0FWRDtBQVdELEdBWkQ7QUFhRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9ic2VydmFibGUsIE9ic2VydmFibGVNYXAsIHJ1bkluQWN0aW9uLCB0b0pTIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBBeGlvc0luc3RhbmNlLCBBeGlvc1Byb21pc2UsIEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpc09iamVjdCBmcm9tICdsb2Rhc2gvaXNPYmplY3QnO1xuaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS1mb250JztcbmltcG9ydCB7IExvdkNvbmZpZyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvdi9Mb3YnO1xuaW1wb3J0IHsgUmVjb3JkU3RhdHVzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvZW51bSc7XG5pbXBvcnQgeyAkbCB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvY2FsZS1jb250ZXh0JztcbmltcG9ydCB7XG4gIGV4cGFuZEluY29uUHJvcHMsXG4gIFRhYmxlUGFnaW5hdGlvbkNvbmZpZyxcbiAgVGFibGVRdWVyeUJhckhvb2ssXG59IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL3RhYmxlL1RhYmxlJztcbmltcG9ydCB7IFZhbGlkYXRpb25NZXNzYWdlcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL3ZhbGlkYXRvci9WYWxpZGF0b3InO1xuaW1wb3J0IHsgQnV0dG9uUHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9idXR0b24vQnV0dG9uJztcbmltcG9ydCB7IFNwaW5Qcm9wcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9saWIvc3Bpbic7XG5pbXBvcnQgeyBTaXplIH0gZnJvbSAnY2hvZXJvZG9uLXVpL2xpYi9fdXRpbC9lbnVtJztcbmltcG9ydCB7IFRhYmxlUXVlcnlCYXJUeXBlIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvdGFibGUvZW51bSc7XG5pbXBvcnQgeyBUcmFuc3BvcnRIb29rUHJvcHMsIFRyYW5zcG9ydFByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvVHJhbnNwb3J0JztcbmltcG9ydCBEYXRhU2V0IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0RhdGFTZXQnO1xuaW1wb3J0IGRlZmF1bHRGZWVkYmFjaywgeyBGZWVkQmFjayB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0ZlZWRCYWNrJztcbmltcG9ydCBSZWNvcmQgZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvUmVjb3JkJztcbmltcG9ydCB7IENhY2hlT3B0aW9ucyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL191dGlsL0NhY2hlJztcbmltcG9ydCB7IExhYmVsTGF5b3V0IH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZm9ybS9lbnVtJztcbmltcG9ydCB7IEJ1dHRvbkNvbG9yLCBGdW5jVHlwZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2J1dHRvbi9lbnVtJztcblxuZXhwb3J0IHR5cGUgU3RhdHVzID0ge1xuICBbUmVjb3JkU3RhdHVzLmFkZF06IHN0cmluZztcbiAgW1JlY29yZFN0YXR1cy51cGRhdGVdOiBzdHJpbmc7XG4gIFtSZWNvcmRTdGF0dXMuZGVsZXRlXTogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgcmVuZGVyRW1wdHlIYW5kbGVyID0gKGNvbXBvbmVudE5hbWU/OiBzdHJpbmcpID0+IFJlYWN0Tm9kZTtcblxuZXhwb3J0IHR5cGUgRm9ybWF0dGVyID0ge1xuICBqc29uRGF0ZT86IHN0cmluZyB8IG51bGw7XG4gIGRhdGU/OiBzdHJpbmc7XG4gIGRhdGVUaW1lPzogc3RyaW5nO1xuICB0aW1lPzogc3RyaW5nO1xuICB5ZWFyPzogc3RyaW5nO1xuICBtb250aD86IHN0cmluZztcbiAgd2Vlaz86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZyA9IHtcbiAgcHJlZml4Q2xzPzogc3RyaW5nO1xuICBwcm9QcmVmaXhDbHM/OiBzdHJpbmc7XG4gIGljb25mb250UHJlZml4Pzogc3RyaW5nO1xuICByaXBwbGU/OiBib29sZWFuO1xuICBsb29rdXBDYWNoZT86IENhY2hlT3B0aW9uczxzdHJpbmcsIEF4aW9zUHJvbWlzZT47XG4gIGxvb2t1cFVybD86IHN0cmluZyB8ICgoY29kZTogc3RyaW5nKSA9PiBzdHJpbmcpO1xuICBsb29rdXBBeGlvc01ldGhvZD86IHN0cmluZztcbiAgbG9va3VwQXhpb3NDb25maWc/OlxuICAgIHwgQXhpb3NSZXF1ZXN0Q29uZmlnXG4gICAgfCAoKHByb3BzOiB7XG4gICAgcGFyYW1zPzogYW55O1xuICAgIGRhdGFTZXQ/OiBEYXRhU2V0O1xuICAgIHJlY29yZD86IFJlY29yZDtcbiAgICBsb29rdXBDb2RlPzogc3RyaW5nO1xuICB9KSA9PiBBeGlvc1JlcXVlc3RDb25maWcpO1xuICBsb29rdXBCYXRjaEF4aW9zQ29uZmlnPzogKGNvZGVzOiBzdHJpbmdbXSkgPT4gQXhpb3NSZXF1ZXN0Q29uZmlnO1xuICBsb3ZEZWZpbmVVcmw/OiBzdHJpbmcgfCAoKGNvZGU6IHN0cmluZykgPT4gc3RyaW5nKTtcbiAgbG92RGVmaW5lQXhpb3NDb25maWc/OiBBeGlvc1JlcXVlc3RDb25maWcgfCAoKGNvZGU6IHN0cmluZykgPT4gQXhpb3NSZXF1ZXN0Q29uZmlnKTtcbiAgbG92UXVlcnlVcmw/OlxuICAgIHwgc3RyaW5nXG4gICAgfCAoKGNvZGU6IHN0cmluZywgbG92Q29uZmlnOiBMb3ZDb25maWcgfCB1bmRlZmluZWQsIHByb3BzOiBUcmFuc3BvcnRIb29rUHJvcHMpID0+IHN0cmluZyk7XG4gIGxvdlF1ZXJ5QXhpb3NDb25maWc/OlxuICAgIHwgQXhpb3NSZXF1ZXN0Q29uZmlnXG4gICAgfCAoKFxuICAgIGNvZGU6IHN0cmluZyxcbiAgICBsb3ZDb25maWc6IExvdkNvbmZpZyB8IHVuZGVmaW5lZCxcbiAgICBwcm9wczogVHJhbnNwb3J0SG9va1Byb3BzLFxuICApID0+IEF4aW9zUmVxdWVzdENvbmZpZyk7XG4gIGF4aW9zPzogQXhpb3NJbnN0YW5jZTtcbiAgZmVlZGJhY2s/OiBGZWVkQmFjaztcbiAgZGF0YUtleT86IHN0cmluZztcbiAgdG90YWxLZXk/OiBzdHJpbmc7XG4gIHN0YXR1c0tleT86IHN0cmluZztcbiAgdGxzS2V5Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBTdGF0dXM7XG4gIGxhYmVsTGF5b3V0PzogTGFiZWxMYXlvdXQ7XG4gIHF1ZXJ5QmFyPzogVGFibGVRdWVyeUJhclR5cGUgfCBUYWJsZVF1ZXJ5QmFySG9vaztcbiAgdGFibGVCb3JkZXI/OiBib29sZWFuO1xuICB0YWJsZUhpZ2hMaWdodFJvdz86IGJvb2xlYW47XG4gIHRhYmxlUm93SGVpZ2h0PzogJ2F1dG8nIHwgbnVtYmVyO1xuICB0YWJsZUNvbHVtblJlc2l6YWJsZT86IGJvb2xlYW47XG4gIHRhYmxlRXhwYW5kSWNvbj86IChwcm9wczogZXhwYW5kSW5jb25Qcm9wcykgPT4gUmVhY3ROb2RlO1xuICB0YWJsZVNwaW5Qcm9wcz86IFNwaW5Qcm9wcztcbiAgdGFibGVCdXR0b25Qcm9wcz86IEJ1dHRvblByb3BzO1xuICB0YWJsZUNvbW1hbmRQcm9wcz86IEJ1dHRvblByb3BzO1xuICBwYWdpbmF0aW9uPzogVGFibGVQYWdpbmF0aW9uQ29uZmlnIHwgZmFsc2U7XG4gIG1vZGFsU2VjdGlvbkJvcmRlcj86IGJvb2xlYW47XG4gIG1vZGFsT2tGaXJzdD86IGJvb2xlYW47XG4gIG1vZGFsQnV0dG9uUHJvcHM/OiBCdXR0b25Qcm9wcztcbiAgYnV0dG9uRnVuY1R5cGU/OiBGdW5jVHlwZTtcbiAgYnV0dG9uQ29sb3I/OiBCdXR0b25Db2xvcjtcbiAgcmVuZGVyRW1wdHk/OiByZW5kZXJFbXB0eUhhbmRsZXI7XG4gIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXM/OiBWYWxpZGF0aW9uTWVzc2FnZXM7XG4gIHRyYW5zcG9ydD86IFRyYW5zcG9ydFByb3BzO1xuICBpY29ucz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW10gfSB8IHN0cmluZ1tdO1xuICBnZW5lcmF0ZVBhZ2VRdWVyeT86IChwYWdlUGFyYW1zOiB7XG4gICAgcGFnZT86IG51bWJlcjtcbiAgICBwYWdlU2l6ZT86IG51bWJlcjtcbiAgICBzb3J0TmFtZT86IHN0cmluZztcbiAgICBzb3J0T3JkZXI/OiBzdHJpbmc7XG4gIH0pID0+IG9iamVjdDtcbiAgZm9ybWF0dGVyPzogRm9ybWF0dGVyO1xufTtcblxuZXhwb3J0IHR5cGUgQ29uZmlnS2V5cyA9IGtleW9mIENvbmZpZztcblxuY29uc3QgZGVmYXVsdFJlbmRlckVtcHR5OiByZW5kZXJFbXB0eUhhbmRsZXIgPSAoY29tcG9uZW50TmFtZT86IHN0cmluZyk6IFJlYWN0Tm9kZSA9PiB7XG4gIHN3aXRjaCAoY29tcG9uZW50TmFtZSkge1xuICAgIGNhc2UgJ1RhYmxlJzpcbiAgICAgIHJldHVybiAkbCgnVGFibGUnLCAnZW1wdHlfZGF0YScpO1xuICAgIGNhc2UgJ1NlbGVjdCc6XG4gICAgICByZXR1cm4gJGwoJ1NlbGVjdCcsICdub19tYXRjaGluZ19yZXN1bHRzJyk7XG4gICAgZGVmYXVsdDpcbiAgfVxufTtcblxuY29uc3QgZGVmYXVsdEJ1dHRvblByb3BzID0geyBjb2xvcjogQnV0dG9uQ29sb3IucHJpbWFyeSwgZnVuY1R5cGU6IEZ1bmNUeXBlLmZsYXQgfTtcblxuY29uc3QgZGVmYXVsdFNwaW5Qcm9wcyA9IHsgc2l6ZTogU2l6ZS5kZWZhdWx0LCB3cmFwcGVyQ2xhc3NOYW1lOiAnJyB9O1xuXG5jb25zdCBnbG9iYWxDb25maWc6IE9ic2VydmFibGVNYXA8Q29uZmlnS2V5cywgQ29uZmlnW0NvbmZpZ0tleXNdPiA9IG9ic2VydmFibGUubWFwPFxuICBDb25maWdLZXlzLFxuICBDb25maWdbQ29uZmlnS2V5c11cbj4oW1xuICBbJ3ByZWZpeENscycsICdjN24nXSxcbiAgWydwcm9QcmVmaXhDbHMnLCAnYzduLXBybyddLFxuICBbJ2ljb25mb250UHJlZml4JywgJ2ljb24nXSxcbiAgWydyaXBwbGUnLCB0cnVlXSxcbiAgWydsb29rdXBDYWNoZScsIHsgbWF4QWdlOiAxMDAwICogNjAgKiAxMCwgbWF4OiAxMDAgfV0sXG4gIFsnbG9va3VwVXJsJywgY29kZSA9PiBgL2NvbW1vbi9jb2RlLyR7Y29kZX0vYF0sXG4gIFsnbG9va3VwQXhpb3NNZXRob2QnLCAncG9zdCddLFxuICAvLyBbXG4gIC8vICAgJ2xvb2t1cEJhdGNoQXhpb3NDb25maWcnLFxuICAvLyAgIGNvZGVzID0+ICh7XG4gIC8vICAgICB1cmw6ICcvY29tbW9uL2JhdGNoJyxcbiAgLy8gICAgIHBhcmFtczogY29kZXMucmVkdWNlKChvYmosIGNvZGUpID0+IHtcbiAgLy8gICAgICAgb2JqW2NvZGVdID0gY29kZTtcbiAgLy8gICAgICAgcmV0dXJuIG9iajtcbiAgLy8gICAgIH0sIHt9KSxcbiAgLy8gICB9KSxcbiAgLy8gXSxcbiAgWydsb3ZEZWZpbmVVcmwnLCBjb2RlID0+IGAvc3lzL2xvdi9sb3ZfZGVmaW5lP2NvZGU9JHtjb2RlfWBdLFxuICBbJ2xvdlF1ZXJ5VXJsJywgY29kZSA9PiBgL2NvbW1vbi9sb3YvZGF0YXNldC8ke2NvZGV9YF0sXG4gIFsnZGF0YUtleScsICdyb3dzJ10sXG4gIFsndG90YWxLZXknLCAndG90YWwnXSxcbiAgWydzdGF0dXNLZXknLCAnX19zdGF0dXMnXSxcbiAgWyd0bHNLZXknLCAnX190bHMnXSxcbiAgW1xuICAgICdzdGF0dXMnLFxuICAgIHsgW1JlY29yZFN0YXR1cy5hZGRdOiAnYWRkJywgW1JlY29yZFN0YXR1cy51cGRhdGVdOiAndXBkYXRlJywgW1JlY29yZFN0YXR1cy5kZWxldGVdOiAnZGVsZXRlJyB9LFxuICBdLFxuICBbJ2xhYmVsTGF5b3V0JywgTGFiZWxMYXlvdXQuaG9yaXpvbnRhbF0sXG4gIFsncXVlcnlCYXInLCBUYWJsZVF1ZXJ5QmFyVHlwZS5ub3JtYWxdLFxuICBbJ3RhYmxlQm9yZGVyJywgdHJ1ZV0sXG4gIFsndGFibGVIaWdoTGlnaHRSb3cnLCB0cnVlXSxcbiAgWyd0YWJsZVJvd0hlaWdodCcsIDMwXSxcbiAgWyd0YWJsZUNvbHVtblJlc2l6YWJsZScsIHRydWVdLFxuICBbJ3RhYmxlU3BpblByb3BzJywgZGVmYXVsdFNwaW5Qcm9wc10sXG4gIFsndGFibGVCdXR0b25Qcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gIFsndGFibGVDb21tYW5kUHJvcHMnLCBkZWZhdWx0QnV0dG9uUHJvcHNdLFxuICBbJ21vZGFsU2VjdGlvbkJvcmRlcicsIHRydWVdLFxuICBbJ21vZGFsT2tGaXJzdCcsIHRydWVdLFxuICBbJ2J1dHRvbkNvbG9yJywgQnV0dG9uQ29sb3IuZGVmYXVsdF0sXG4gIFsnYnV0dG9uRnVuY1R5cGUnLCBGdW5jVHlwZS5yYWlzZWRdLFxuICBbJ2ZlZWRiYWNrJywgZGVmYXVsdEZlZWRiYWNrXSxcbiAgWydyZW5kZXJFbXB0eScsIGRlZmF1bHRSZW5kZXJFbXB0eV0sXG4gIFsnaWNvbnMnLCBjYXRlZ29yaWVzXSxcbiAgW1xuICAgICdmb3JtYXR0ZXInLFxuICAgIHtcbiAgICAgIGpzb25EYXRlOiAnWVlZWS1NTS1ERCBISDptbTpzcycsXG4gICAgICBkYXRlOiAnWVlZWS1NTS1ERCcsXG4gICAgICBkYXRlVGltZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgdGltZTogJ0hIOm1tOnNzJyxcbiAgICAgIHllYXI6ICdZWVlZJyxcbiAgICAgIG1vbnRoOiAnWVlZWS1NTScsXG4gICAgICB3ZWVrOiAnR0dHRy1XbycsXG4gICAgfSxcbiAgXSxcbl0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKGtleTogQ29uZmlnS2V5cyk6IGFueSB7XG4gIC8vIEZJWE1FOiBvYnNlcnZhYmxlLm1hcOaKiuaehOW7um1hcOaXtuS8oOWFpeeahGtleeexu+Wei+WSjHZhbHVl57G75Z6L5YiG5Yir5YGa5LqGdW5pb27vvIxcbiAgLy8g5Lii5aSx5LqG5LiA5LiA5a+55bqU55qE5pig5bCE5YWz57O777yM5a+86Ie05Ye95pWw6LCD55So6ICF5peg5rOV5L2/55SodW5pb27lkI7nmoTov5Tlm57lgLznsbvlnovvvIzlm6DmraTpnIDopoHmjIflrprmnKzlh73mlbDov5Tlm57lgLzkuLphbnlcbiAgcmV0dXJuIGdsb2JhbENvbmZpZy5nZXQoa2V5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZWZpeENscyhzdWZmaXhDbHM6IHN0cmluZywgY3VzdG9taXplUHJlZml4Q2xzPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgIHJldHVybiBjdXN0b21pemVQcmVmaXhDbHM7XG4gIH1cbiAgcmV0dXJuIGAke2dldENvbmZpZygncHJlZml4Q2xzJyl9LSR7c3VmZml4Q2xzfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9QcmVmaXhDbHMoc3VmZml4Q2xzOiBzdHJpbmcsIGN1c3RvbWl6ZVByZWZpeENscz86IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICByZXR1cm4gY3VzdG9taXplUHJlZml4Q2xzO1xuICB9XG4gIHJldHVybiBgJHtnZXRDb25maWcoJ3Byb1ByZWZpeENscycpfS0ke3N1ZmZpeENsc31gO1xufVxuXG5jb25zdCBtZXJnZVByb3BzID0gWyd0cmFuc3BvcnQnLCAnZmVlZGJhY2snLCAnZm9ybWF0dGVyJ107XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNvbmZpZ3VyZShjb25maWc6IENvbmZpZykge1xuICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXk6IENvbmZpZ0tleXMpID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG4gICAgICBpZiAobWVyZ2VQcm9wcy5pbmNsdWRlcyhrZXkpICYmIGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICBnbG9iYWxDb25maWcuc2V0KGtleSwge1xuICAgICAgICAgIC4uLnRvSlM8YW55PihnbG9iYWxDb25maWcuZ2V0KGtleSkpLFxuICAgICAgICAgIC4uLnZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdsb2JhbENvbmZpZy5zZXQoa2V5LCBjb25maWdba2V5XSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuIl19