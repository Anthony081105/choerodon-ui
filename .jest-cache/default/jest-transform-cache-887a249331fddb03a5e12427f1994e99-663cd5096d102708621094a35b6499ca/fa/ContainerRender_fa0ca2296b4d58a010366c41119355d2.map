{"version":3,"sources":["ContainerRender.jsx"],"names":["ContainerRender","container","ReactDOM","unmountComponentAtNode","parentNode","removeChild","props","ready","visible","getComponent","forceRender","getContainer","parent","_component","unstable_renderSubtreeIntoContainer","callback","call","autoMount","renderComponent","autoDestroy","removeContainer","children","Component","PropTypes","bool","any","func","isRequired"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEqBA,e;;;;;;;;;;;;;;;;;wGAoCD,YAAM;AACtB,UAAI,MAAKC,SAAT,EAAoB;AAClBC,6BAASC,sBAAT,CAAgC,MAAKF,SAArC;;AACA,cAAKA,SAAL,CAAeG,UAAf,CAA0BC,WAA1B,CAAsC,MAAKJ,SAA3C;;AACA,cAAKA,SAAL,GAAiB,IAAjB;AACD;AACF,K;wGAEiB,UAACK,KAAD,EAAQC,KAAR,EAAkB;AAAA,wBACmC,MAAKD,KADxC;AAAA,UAC1BE,OAD0B,eAC1BA,OAD0B;AAAA,UACjBC,YADiB,eACjBA,YADiB;AAAA,UACHC,WADG,eACHA,WADG;AAAA,UACUC,YADV,eACUA,YADV;AAAA,UACwBC,MADxB,eACwBA,MADxB;;AAElC,UAAIJ,OAAO,IAAII,MAAM,CAACC,UAAlB,IAAgCH,WAApC,EAAiD;AAC/C,YAAI,CAAC,MAAKT,SAAV,EAAqB;AACnB,gBAAKA,SAAL,GAAiBU,YAAY,EAA7B;AACD;;AACDT,6BAASY,mCAAT,CACEF,MADF,EAEEH,YAAY,CAACH,KAAD,CAFd,EAGE,MAAKL,SAHP,EAIE,SAASc,QAAT,GAAoB;AAClB,cAAIR,KAAJ,EAAW;AACTA,YAAAA,KAAK,CAACS,IAAN,CAAW,IAAX;AACD;AACF,SARH;AAUD;AACF,K;;;;;;wCA3CmB;AAClB,UAAI,KAAKV,KAAL,CAAWW,SAAf,EAA0B;AACxB,aAAKC,eAAL;AACD;AACF;;;yCAEoB;AACnB,UAAI,KAAKZ,KAAL,CAAWW,SAAf,EAA0B;AACxB,aAAKC,eAAL;AACD;AACF;;;2CAEsB;AACrB,UAAI,KAAKZ,KAAL,CAAWa,WAAf,EAA4B;AAC1B,aAAKC,eAAL;AACD;AACF;;;6BA6BQ;AACP,aAAO,KAAKd,KAAL,CAAWe,QAAX,CAAoB;AACzBH,QAAAA,eAAe,EAAE,KAAKA,eADG;AAEzBE,QAAAA,eAAe,EAAE,KAAKA;AAFG,OAApB,CAAP;AAID;;;EApE0CE,gB;;;iCAAxBtB,e,eACA;AACjBiB,EAAAA,SAAS,EAAEM,sBAAUC,IADJ;AAEjBL,EAAAA,WAAW,EAAEI,sBAAUC,IAFN;AAGjBhB,EAAAA,OAAO,EAAEe,sBAAUC,IAHF;AAIjBd,EAAAA,WAAW,EAAEa,sBAAUC,IAJN;AAKjBZ,EAAAA,MAAM,EAAEW,sBAAUE,GALD;AAMjBhB,EAAAA,YAAY,EAAEc,sBAAUG,IAAV,CAAeC,UANZ;AAOjBhB,EAAAA,YAAY,EAAEY,sBAAUG,IAAV,CAAeC,UAPZ;AAQjBN,EAAAA,QAAQ,EAAEE,sBAAUG,IAAV,CAAeC;AARR,C;iCADA3B,e,kBAYG;AACpBiB,EAAAA,SAAS,EAAE,IADS;AAEpBE,EAAAA,WAAW,EAAE,IAFO;AAGpBT,EAAAA,WAAW,EAAE;AAHO,C","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class ContainerRender extends Component {\n  static propTypes = {\n    autoMount: PropTypes.bool,\n    autoDestroy: PropTypes.bool,\n    visible: PropTypes.bool,\n    forceRender: PropTypes.bool,\n    parent: PropTypes.any,\n    getComponent: PropTypes.func.isRequired,\n    getContainer: PropTypes.func.isRequired,\n    children: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    autoMount: true,\n    autoDestroy: true,\n    forceRender: false,\n  }\n\n  componentDidMount() {\n    if (this.props.autoMount) {\n      this.renderComponent();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.autoMount) {\n      this.renderComponent();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.autoDestroy) {\n      this.removeContainer();\n    }\n  }\n\n  removeContainer = () => {\n    if (this.container) {\n      ReactDOM.unmountComponentAtNode(this.container);\n      this.container.parentNode.removeChild(this.container);\n      this.container = null;\n    }\n  }\n\n  renderComponent = (props, ready) => {\n    const { visible, getComponent, forceRender, getContainer, parent } = this.props;\n    if (visible || parent._component || forceRender) {\n      if (!this.container) {\n        this.container = getContainer();\n      }\n      ReactDOM.unstable_renderSubtreeIntoContainer(\n        parent,\n        getComponent(props),\n        this.container,\n        function callback() {\n          if (ready) {\n            ready.call(this);\n          }\n        }\n      );\n    }\n  }\n\n  render() {\n    return this.props.children({\n      renderComponent: this.renderComponent,\n      removeContainer: this.removeContainer,\n    });\n  }\n}\n"]}