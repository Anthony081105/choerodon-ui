{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/locale-context/LocaleContext.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,SAAS,eAAT,CAAyB,MAAzB,EAAuC;AACrC,qBAAO,MAAP,CAAc,mCAAkB,MAAM,GAAG,MAAM,CAAC,IAAV,GAAiB,mBAAc,IAAvD,CAAd;AACD;;IAEY,a;;;AAKX,2BAAA;AAAA;;AAAA;AACE,2BAAY,YAAK;AACf,MAAA,KAAI,CAAC,MAAL,GAAc,kBAAd;AACA,MAAA,KAAI,CAAC,QAAL,GAAgB,oBAAhB;AACD,KAHD;AAID;;;;8BAGS,M,EAAc;AACtB,MAAA,eAAe,CAAC,MAAD,CAAf;AACA,WAAK,MAAL,GAAc,MAAd;AACD;;;gCAEW,Q,EAAkB;AAC5B,WAAK,QAAL,GAAgB,QAAhB;AACD;;;wBAEG,S,EAAmB,G,EAAW;AAChC,UAAM,GAAG,GAAG,eAAI,KAAK,MAAT,EAAiB,SAAjB,CAAZ;AACA,aAAQ,GAAG,IAAI,eAAI,GAAJ,EAAS,GAAT,CAAR,cAA6B,SAA7B,cAA0C,GAA1C,CAAP;AACD;;;;;;AAxBW,uBAAA,CAAX,gBAAW,CAAA,E,uBAAA,E,QAAA,E,KAAe,CAAf;AAEA,uBAAA,CAAX,gBAAW,CAAA,E,uBAAA,E,UAAA,E,KAAmB,CAAnB;AAUZ,uBAAA,CADC,YACD,CAAA,E,uBAAA,E,WAAA,EAGC,IAHD;;eAea,IAAI,aAAJ,E","sourcesContent":["import { action, get, observable, runInAction } from 'mobx';\nimport moment from 'moment';\nimport defaultLocale, { Locale } from './locale';\nimport defaultSupports, { Supports } from './supports';\nimport normalizeLanguage from '../_util/normalizeLanguage';\n\nfunction setMomentLocale(locale: Locale) {\n  moment.locale(normalizeLanguage(locale ? locale.lang : defaultLocale.lang));\n}\n\nexport class LocaleContext {\n  @observable locale: Locale;\n\n  @observable supports: Supports;\n\n  constructor() {\n    runInAction(() => {\n      this.locale = defaultLocale;\n      this.supports = defaultSupports;\n    });\n  }\n\n  @action\n  setLocale(locale: Locale) {\n    setMomentLocale(locale);\n    this.locale = locale;\n  }\n\n  setSupports(supports: Supports) {\n    this.supports = supports;\n  }\n\n  get(component: string, key: string) {\n    const cmp = get(this.locale, component);\n    return (cmp && get(cmp, key)) || `${component}.${key}`;\n  }\n}\n\nexport default new LocaleContext();\n"]}