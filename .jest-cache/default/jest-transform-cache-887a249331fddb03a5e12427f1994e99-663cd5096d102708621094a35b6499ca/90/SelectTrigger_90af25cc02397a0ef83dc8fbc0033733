b0b8d6aee47a5fa58aadab43703ef7ed
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactDom = _interopRequireDefault(require("react-dom"));

var _classnames = _interopRequireDefault(require("classnames"));

var _trigger = _interopRequireDefault(require("../trigger"));

var _tree = _interopRequireWildcard(require("../../tree"));

var _util = require("./util");

var _toArray = _interopRequireDefault(require("../util/Children/toArray"));

var BUILT_IN_PLACEMENTS = {
  bottomLeft: {
    points: ['tl', 'bl'],
    offset: [0, 4],
    overflow: {
      adjustX: 0,
      adjustY: 1
    }
  },
  topLeft: {
    points: ['bl', 'tl'],
    offset: [0, -4],
    overflow: {
      adjustX: 0,
      adjustY: 1
    }
  }
};

var SelectTrigger =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(SelectTrigger, _Component);

  function SelectTrigger() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, SelectTrigger);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(SelectTrigger)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", {
      _expandedKeys: [],
      fireOnExpand: false,
      dropdownWidth: null
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onExpand", function (expandedKeys) {
      // rerender
      _this.setState({
        _expandedKeys: expandedKeys,
        fireOnExpand: true
      }, function () {
        if (_this.trigger && _this.trigger.forcePopupAlign) {
          _this.trigger.forcePopupAlign();
        }
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "highlightTreeNode", function (treeNode) {
      var props = _this.props;
      var filterVal = treeNode.props[(0, _util.labelCompatible)(props.treeNodeFilterProp)];

      if (typeof filterVal === 'string') {
        return props.inputValue && filterVal.indexOf(props.inputValue) > -1;
      }

      return false;
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "filterTreeNode", function (input, child) {
      if (!input) {
        return true;
      }

      var filterTreeNode = _this.props.filterTreeNode;

      if (!filterTreeNode) {
        return true;
      }

      if (child.props.disabled) {
        return false;
      }

      return filterTreeNode.call((0, _assertThisInitialized2["default"])(_this), input, child);
    });
    return _this;
  }

  (0, _createClass2["default"])(SelectTrigger, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      this.setDropdownWidth();
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      if (nextProps.inputValue && nextProps.inputValue !== this.props.inputValue) {
        // set autoExpandParent to true
        this.setState({
          _expandedKeys: [],
          fireOnExpand: false
        });
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      this.setDropdownWidth();
    }
  }, {
    key: "setDropdownWidth",
    value: function setDropdownWidth() {
      var width = _reactDom["default"].findDOMNode(this).offsetWidth;

      if (width !== this.state.dropdownWidth) {
        this.setState({
          dropdownWidth: width
        });
      }
    }
  }, {
    key: "getPopupEleRefs",
    value: function getPopupEleRefs() {
      return this.popupEle;
    }
  }, {
    key: "getPopupDOMNode",
    value: function getPopupDOMNode() {
      return this.trigger.getPopupDomNode();
    }
  }, {
    key: "getDropdownTransitionName",
    value: function getDropdownTransitionName() {
      var props = this.props;
      var transitionName = props.transitionName;

      if (!transitionName && props.animation) {
        transitionName = "".concat(this.getDropdownPrefixCls(), "-").concat(props.animation);
      }

      return transitionName;
    }
  }, {
    key: "getDropdownPrefixCls",
    value: function getDropdownPrefixCls() {
      return "".concat(this.props.prefixCls, "-dropdown");
    }
  }, {
    key: "processTreeNode",
    value: function processTreeNode(treeNodes) {
      var _this2 = this;

      var filterPoss = [];
      this._expandedKeys = [];
      (0, _util.loopAllChildren)(treeNodes, function (child, index, pos) {
        if (_this2.filterTreeNode(_this2.props.inputValue, child)) {
          filterPoss.push(pos);

          _this2._expandedKeys.push(child.key);
        }
      }); // Include the filtered nodes's ancestral nodes.

      var processedPoss = [];
      filterPoss.forEach(function (pos) {
        var arr = pos.split('-');
        arr.reduce(function (pre, cur) {
          var res = "".concat(pre, "-").concat(cur);

          if (processedPoss.indexOf(res) < 0) {
            processedPoss.push(res);
          }

          return res;
        });
      });
      var filterNodesPositions = [];
      (0, _util.loopAllChildren)(treeNodes, function (child, index, pos) {
        if (processedPoss.indexOf(pos) > -1) {
          filterNodesPositions.push({
            node: child,
            pos: pos
          });
        }
      });
      var hierarchyNodes = (0, _util.flatToHierarchy)(filterNodesPositions);

      var recursive = function recursive(children) {
        return children.map(function (child) {
          if (child.children) {
            return (0, _react.cloneElement)(child.node, {}, recursive(child.children));
          }

          return child.node;
        });
      };

      return recursive(hierarchyNodes);
    }
  }, {
    key: "renderTree",
    value: function renderTree(keys, halfCheckedKeys, newTreeNodes, multiple) {
      var props = this.props;
      var trProps = {
        multiple: multiple,
        prefixCls: "".concat(props.prefixCls, "-tree"),
        showIcon: props.treeIcon,
        showLine: props.treeLine,
        defaultExpandAll: props.treeDefaultExpandAll,
        defaultExpandedKeys: props.treeDefaultExpandedKeys,
        filterTreeNode: this.highlightTreeNode
      };

      if (props.treeCheckable) {
        trProps.selectable = false;
        trProps.checkable = props.treeCheckable;
        trProps.onCheck = props.onSelect;
        trProps.checkStrictly = props.treeCheckStrictly;

        if (props.inputValue) {
          // enable checkStrictly when search tree.
          trProps.checkStrictly = true;
        } else {
          trProps._treeNodesStates = props._treeNodesStates;
        }

        if (trProps.treeCheckStrictly && halfCheckedKeys.length) {
          trProps.checkedKeys = {
            checked: keys,
            halfChecked: halfCheckedKeys
          };
        } else {
          trProps.checkedKeys = keys;
        }
      } else {
        trProps.selectedKeys = keys;
        trProps.onSelect = props.onSelect;
      } // expand keys


      if (!trProps.defaultExpandAll && !trProps.defaultExpandedKeys && !props.loadData) {
        trProps.expandedKeys = keys;
      }

      trProps.autoExpandParent = true;
      trProps.onExpand = this.onExpand;

      if (this._expandedKeys && this._expandedKeys.length) {
        trProps.expandedKeys = this._expandedKeys;
      }

      if (this.state.fireOnExpand) {
        trProps.expandedKeys = this.state._expandedKeys;
        trProps.autoExpandParent = false;
      } // async loadData


      if (props.loadData) {
        trProps.loadData = props.loadData;
      }

      return _react["default"].createElement(_tree["default"], (0, _extends2["default"])({
        ref: (0, _util.saveRef)(this, 'popupEle')
      }, trProps), newTreeNodes);
    }
  }, {
    key: "render",
    value: function render() {
      var _popupClassName;

      var props = this.props;
      var multiple = props.multiple;
      var dropdownPrefixCls = this.getDropdownPrefixCls();
      var popupClassName = (_popupClassName = {}, (0, _defineProperty2["default"])(_popupClassName, props.dropdownClassName, !!props.dropdownClassName), (0, _defineProperty2["default"])(_popupClassName, "".concat(dropdownPrefixCls, "--").concat(multiple ? 'multiple' : 'single'), 1), _popupClassName);
      var visible = props.visible;
      var search = multiple || !props.showSearch ? null : _react["default"].createElement("span", {
        className: "".concat(dropdownPrefixCls, "-search")
      }, props.inputElement);

      var recursive = function recursive(children) {
        // Note: if use `React.Children.map`, the node's key will be modified.
        return (0, _toArray["default"])(children).map(function handler(child) {
          // eslint-disable-line
          if (!child) {
            return null;
          }

          if (child && child.props.children) {
            // null or String has no Prop
            return _react["default"].createElement(_tree.TreeNode, (0, _extends2["default"])({}, child.props, {
              key: child.key
            }), recursive(child.props.children));
          }

          return _react["default"].createElement(_tree.TreeNode, (0, _extends2["default"])({}, child.props, {
            key: child.key
          }));
        });
      }; // const s = Date.now();


      var treeNodes;

      if (props._cachetreeData && this.treeNodes) {
        treeNodes = this.treeNodes;
      } else {
        treeNodes = recursive(props.treeData || props.treeNodes);
        this.treeNodes = treeNodes;
      } // console.log(Date.now()-s);


      if (props.inputValue) {
        treeNodes = this.processTreeNode(treeNodes);
      }

      var keys = [];
      var halfCheckedKeys = [];
      (0, _util.loopAllChildren)(treeNodes, function (child) {
        if (props.value.some(function (item) {
          return item.value === (0, _util.getValuePropValue)(child);
        })) {
          keys.push(child.key);
        }

        if (props.halfCheckedValues && props.halfCheckedValues.some(function (item) {
          return item.value === (0, _util.getValuePropValue)(child);
        })) {
          halfCheckedKeys.push(child.key);
        }
      });
      var notFoundContent;

      if (!treeNodes.length) {
        if (props.notFoundContent) {
          notFoundContent = _react["default"].createElement("span", {
            className: "".concat(props.prefixCls, "-not-found")
          }, props.notFoundContent);
        } else if (!search) {
          visible = false;
        }
      }

      var popupElement = _react["default"].createElement("div", null, search, notFoundContent || this.renderTree(keys, halfCheckedKeys, treeNodes, multiple));

      var popupStyle = (0, _objectSpread2["default"])({}, props.dropdownStyle);
      var widthProp = props.dropdownMatchSelectWidth ? 'width' : 'minWidth';

      if (this.state.dropdownWidth) {
        popupStyle[widthProp] = "".concat(this.state.dropdownWidth, "px");
      }

      return _react["default"].createElement(_trigger["default"], {
        action: props.disabled ? [] : ['click'],
        ref: (0, _util.saveRef)(this, 'trigger'),
        popupPlacement: "bottomLeft",
        builtinPlacements: BUILT_IN_PLACEMENTS,
        popupAlign: props.dropdownPopupAlign,
        prefixCls: dropdownPrefixCls,
        popupTransitionName: this.getDropdownTransitionName(),
        onPopupVisibleChange: props.onDropdownVisibleChange,
        popup: popupElement,
        popupVisible: visible,
        getPopupContainer: props.getPopupContainer,
        popupClassName: (0, _classnames["default"])(popupClassName),
        popupStyle: popupStyle
      }, this.props.children);
    }
  }]);
  return SelectTrigger;
}(_react.Component);

(0, _defineProperty2["default"])(SelectTrigger, "propTypes", {
  dropdownMatchSelectWidth: _propTypes["default"].bool,
  dropdownPopupAlign: _propTypes["default"].object,
  visible: _propTypes["default"].bool,
  filterTreeNode: _propTypes["default"].any,
  treeNodes: _propTypes["default"].any,
  inputValue: _propTypes["default"].string,
  prefixCls: _propTypes["default"].string,
  popupClassName: _propTypes["default"].string,
  children: _propTypes["default"].any
});
var _default = SelectTrigger;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlbGVjdFRyaWdnZXIuanN4Il0sIm5hbWVzIjpbIkJVSUxUX0lOX1BMQUNFTUVOVFMiLCJib3R0b21MZWZ0IiwicG9pbnRzIiwib2Zmc2V0Iiwib3ZlcmZsb3ciLCJhZGp1c3RYIiwiYWRqdXN0WSIsInRvcExlZnQiLCJTZWxlY3RUcmlnZ2VyIiwiX2V4cGFuZGVkS2V5cyIsImZpcmVPbkV4cGFuZCIsImRyb3Bkb3duV2lkdGgiLCJleHBhbmRlZEtleXMiLCJzZXRTdGF0ZSIsInRyaWdnZXIiLCJmb3JjZVBvcHVwQWxpZ24iLCJ0cmVlTm9kZSIsInByb3BzIiwiZmlsdGVyVmFsIiwidHJlZU5vZGVGaWx0ZXJQcm9wIiwiaW5wdXRWYWx1ZSIsImluZGV4T2YiLCJpbnB1dCIsImNoaWxkIiwiZmlsdGVyVHJlZU5vZGUiLCJkaXNhYmxlZCIsImNhbGwiLCJzZXREcm9wZG93bldpZHRoIiwibmV4dFByb3BzIiwid2lkdGgiLCJSZWFjdERPTSIsImZpbmRET01Ob2RlIiwib2Zmc2V0V2lkdGgiLCJzdGF0ZSIsInBvcHVwRWxlIiwiZ2V0UG9wdXBEb21Ob2RlIiwidHJhbnNpdGlvbk5hbWUiLCJhbmltYXRpb24iLCJnZXREcm9wZG93blByZWZpeENscyIsInByZWZpeENscyIsInRyZWVOb2RlcyIsImZpbHRlclBvc3MiLCJpbmRleCIsInBvcyIsInB1c2giLCJrZXkiLCJwcm9jZXNzZWRQb3NzIiwiZm9yRWFjaCIsImFyciIsInNwbGl0IiwicmVkdWNlIiwicHJlIiwiY3VyIiwicmVzIiwiZmlsdGVyTm9kZXNQb3NpdGlvbnMiLCJub2RlIiwiaGllcmFyY2h5Tm9kZXMiLCJyZWN1cnNpdmUiLCJjaGlsZHJlbiIsIm1hcCIsImtleXMiLCJoYWxmQ2hlY2tlZEtleXMiLCJuZXdUcmVlTm9kZXMiLCJtdWx0aXBsZSIsInRyUHJvcHMiLCJzaG93SWNvbiIsInRyZWVJY29uIiwic2hvd0xpbmUiLCJ0cmVlTGluZSIsImRlZmF1bHRFeHBhbmRBbGwiLCJ0cmVlRGVmYXVsdEV4cGFuZEFsbCIsImRlZmF1bHRFeHBhbmRlZEtleXMiLCJ0cmVlRGVmYXVsdEV4cGFuZGVkS2V5cyIsImhpZ2hsaWdodFRyZWVOb2RlIiwidHJlZUNoZWNrYWJsZSIsInNlbGVjdGFibGUiLCJjaGVja2FibGUiLCJvbkNoZWNrIiwib25TZWxlY3QiLCJjaGVja1N0cmljdGx5IiwidHJlZUNoZWNrU3RyaWN0bHkiLCJfdHJlZU5vZGVzU3RhdGVzIiwibGVuZ3RoIiwiY2hlY2tlZEtleXMiLCJjaGVja2VkIiwiaGFsZkNoZWNrZWQiLCJzZWxlY3RlZEtleXMiLCJsb2FkRGF0YSIsImF1dG9FeHBhbmRQYXJlbnQiLCJvbkV4cGFuZCIsImRyb3Bkb3duUHJlZml4Q2xzIiwicG9wdXBDbGFzc05hbWUiLCJkcm9wZG93bkNsYXNzTmFtZSIsInZpc2libGUiLCJzZWFyY2giLCJzaG93U2VhcmNoIiwiaW5wdXRFbGVtZW50IiwiaGFuZGxlciIsIl9jYWNoZXRyZWVEYXRhIiwidHJlZURhdGEiLCJwcm9jZXNzVHJlZU5vZGUiLCJ2YWx1ZSIsInNvbWUiLCJpdGVtIiwiaGFsZkNoZWNrZWRWYWx1ZXMiLCJub3RGb3VuZENvbnRlbnQiLCJwb3B1cEVsZW1lbnQiLCJyZW5kZXJUcmVlIiwicG9wdXBTdHlsZSIsImRyb3Bkb3duU3R5bGUiLCJ3aWR0aFByb3AiLCJkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGgiLCJkcm9wZG93blBvcHVwQWxpZ24iLCJnZXREcm9wZG93blRyYW5zaXRpb25OYW1lIiwib25Ecm9wZG93blZpc2libGVDaGFuZ2UiLCJnZXRQb3B1cENvbnRhaW5lciIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsImJvb2wiLCJvYmplY3QiLCJhbnkiLCJzdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsSUFBTUEsbUJBQW1CLEdBQUc7QUFDMUJDLEVBQUFBLFVBQVUsRUFB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SGpCO0FBSUUsUUFBQSxpQkFBaUIsRUFBRXpCLG1CQUpyQjtBQUtFLFFBQUEsVUFBVSxFQUFFaUIsS0FBSyxDQUFDK0Ysa0JBTHBCO0FBTUUsUUFBQSxTQUFTLEVBQUV0QixpQkFOYjtBQU9FLFFBQUEsbUJBQW1CLEVBQUUsS0FBS3VCLHlCQUFMLEVBUHZCO0FBUUUsUUFBQSxvQkFBb0IsRUFBRWhHLEtBQUssQ0FBQ2lHLHVCQVI5QjtBQVNFLFFBQUEsS0FBSyxFQUFFUixZQVRUO0FBVUUsUUFBQSxZQUFZLEVBQUViLE9BVmhCO0FBV0UsUUFBQSxpQkFBaUIsRUFBRTVFLEtBQUssQ0FBQ2tHLGlCQVgzQjtBQVlFLFFBQUEsY0FBYyxFQUFFLDRCQUFXeEIsY0FBWCxDQVpsQjtBQWFFLFFBQUEsVUFBVSxFQUFFaUI7QUFiZCxTQWVHLEtBQUszRixLQUFMLENBQVd5QyxRQWZkLENBREY7QUFtQkQ7OztFQTlTeUIwRCxnQjs7aUNBQXRCNUcsYSxlQUNlO0FBQ2pCdUcsRUFBQUEsd0JBQXdCLEVBQUVNLHNCQUFVQyxJQURuQjtBQUVqQk4sRUFBQUEsa0JBQWtCLEVBQUVLLHNCQUFVRSxNQUZiO0FBR2pCMUIsRUFBQUEsT0FBTyxFQUFFd0Isc0JBQVVDLElBSEY7QUFJakI5RixFQUFBQSxjQUFjLEVBQUU2RixzQkFBVUcsR0FKVDtBQUtqQmhGLEVBQUFBLFNBQVMsRUFBRTZFLHNCQUFVRyxHQUxKO0FBTWpCcEcsRUFBQUEsVUFBVSxFQUFFaUcsc0JBQVVJLE1BTkw7QUFPakJsRixFQUFBQSxTQUFTLEVBQUU4RSxzQkFBVUksTUFQSjtBQVFqQjlCLEVBQUFBLGNBQWMsRUFBRTBCLHNCQUFVSSxNQVJUO0FBU2pCL0QsRUFBQUEsUUFBUSxFQUFFMkQsc0JBQVVHO0FBVEgsQztlQWdUTmhILGEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgY2xvbmVFbGVtZW50LCBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBUcmlnZ2VyIGZyb20gJy4uL3RyaWdnZXInO1xuaW1wb3J0IFRyZWUsIHsgVHJlZU5vZGUgfSBmcm9tICcuLi8uLi90cmVlJztcbmltcG9ydCB7IGZsYXRUb0hpZXJhcmNoeSwgZ2V0VmFsdWVQcm9wVmFsdWUsIGxhYmVsQ29tcGF0aWJsZSwgbG9vcEFsbENoaWxkcmVuLCBzYXZlUmVmLCB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgdG9BcnJheSBmcm9tICcuLi91dGlsL0NoaWxkcmVuL3RvQXJyYXknO1xuXG5jb25zdCBCVUlMVF9JTl9QTEFDRU1FTlRTID0ge1xuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb2Zmc2V0OiBbMCwgNF0sXG4gICAgb3ZlcmZsb3c6IHtcbiAgICAgIGFkanVzdFg6IDAsXG4gICAgICBhZGp1c3RZOiAxLFxuICAgIH0sXG4gIH0sXG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvZmZzZXQ6IFswLCAtNF0sXG4gICAgb3ZlcmZsb3c6IHtcbiAgICAgIGFkanVzdFg6IDAsXG4gICAgICBhZGp1c3RZOiAxLFxuICAgIH0sXG4gIH0sXG59O1xuXG5jbGFzcyBTZWxlY3RUcmlnZ2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICBkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGg6IFByb3BUeXBlcy5ib29sLFxuICAgIGRyb3Bkb3duUG9wdXBBbGlnbjogUHJvcFR5cGVzLm9iamVjdCxcbiAgICB2aXNpYmxlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBmaWx0ZXJUcmVlTm9kZTogUHJvcFR5cGVzLmFueSxcbiAgICB0cmVlTm9kZXM6IFByb3BUeXBlcy5hbnksXG4gICAgaW5wdXRWYWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwcmVmaXhDbHM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgcG9wdXBDbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5hbnksXG4gIH07XG5cbiAgc3RhdGUgPSB7XG4gICAgX2V4cGFuZGVkS2V5czogW10sXG4gICAgZmlyZU9uRXhwYW5kOiBmYWxzZSxcbiAgICBkcm9wZG93bldpZHRoOiBudWxsLFxuICB9O1xuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0RHJvcGRvd25XaWR0aCgpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICBpZiAobmV4dFByb3BzLmlucHV0VmFsdWUgJiYgbmV4dFByb3BzLmlucHV0VmFsdWUgIT09IHRoaXMucHJvcHMuaW5wdXRWYWx1ZSkge1xuICAgICAgLy8gc2V0IGF1dG9FeHBhbmRQYXJlbnQgdG8gdHJ1ZVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIF9leHBhbmRlZEtleXM6IFtdLFxuICAgICAgICBmaXJlT25FeHBhbmQ6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuc2V0RHJvcGRvd25XaWR0aCgpO1xuICB9XG5cbiAgb25FeHBhbmQgPSAoZXhwYW5kZWRLZXlzKSA9PiB7XG4gICAgLy8gcmVyZW5kZXJcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIF9leHBhbmRlZEtleXM6IGV4cGFuZGVkS2V5cyxcbiAgICAgIGZpcmVPbkV4cGFuZDogdHJ1ZSxcbiAgICB9LCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy50cmlnZ2VyICYmIHRoaXMudHJpZ2dlci5mb3JjZVBvcHVwQWxpZ24pIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyLmZvcmNlUG9wdXBBbGlnbigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIHNldERyb3Bkb3duV2lkdGgoKSB7XG4gICAgY29uc3Qgd2lkdGggPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5vZmZzZXRXaWR0aDtcbiAgICBpZiAod2lkdGggIT09IHRoaXMuc3RhdGUuZHJvcGRvd25XaWR0aCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRyb3Bkb3duV2lkdGg6IHdpZHRoIH0pO1xuICAgIH1cbiAgfVxuXG4gIGdldFBvcHVwRWxlUmVmcygpIHtcbiAgICByZXR1cm4gdGhpcy5wb3B1cEVsZTtcbiAgfVxuXG4gIGdldFBvcHVwRE9NTm9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyLmdldFBvcHVwRG9tTm9kZSgpO1xuICB9XG5cbiAgZ2V0RHJvcGRvd25UcmFuc2l0aW9uTmFtZSgpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgbGV0IHRyYW5zaXRpb25OYW1lID0gcHJvcHMudHJhbnNpdGlvbk5hbWU7XG4gICAgaWYgKCF0cmFuc2l0aW9uTmFtZSAmJiBwcm9wcy5hbmltYXRpb24pIHtcbiAgICAgIHRyYW5zaXRpb25OYW1lID0gYCR7dGhpcy5nZXREcm9wZG93blByZWZpeENscygpfS0ke3Byb3BzLmFuaW1hdGlvbn1gO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNpdGlvbk5hbWU7XG4gIH1cblxuICBnZXREcm9wZG93blByZWZpeENscygpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5wcm9wcy5wcmVmaXhDbHN9LWRyb3Bkb3duYDtcbiAgfVxuXG4gIGhpZ2hsaWdodFRyZWVOb2RlID0gKHRyZWVOb2RlKSA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGZpbHRlclZhbCA9IHRyZWVOb2RlLnByb3BzW2xhYmVsQ29tcGF0aWJsZShwcm9wcy50cmVlTm9kZUZpbHRlclByb3ApXTtcbiAgICBpZiAodHlwZW9mIGZpbHRlclZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBwcm9wcy5pbnB1dFZhbHVlICYmIGZpbHRlclZhbC5pbmRleE9mKHByb3BzLmlucHV0VmFsdWUpID4gLTE7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmaWx0ZXJUcmVlTm9kZSA9IChpbnB1dCwgY2hpbGQpID0+IHtcbiAgICBpZiAoIWlucHV0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgZmlsdGVyVHJlZU5vZGUgPSB0aGlzLnByb3BzLmZpbHRlclRyZWVOb2RlO1xuICAgIGlmICghZmlsdGVyVHJlZU5vZGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY2hpbGQucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbHRlclRyZWVOb2RlLmNhbGwodGhpcywgaW5wdXQsIGNoaWxkKTtcbiAgfTtcblxuICBwcm9jZXNzVHJlZU5vZGUodHJlZU5vZGVzKSB7XG4gICAgY29uc3QgZmlsdGVyUG9zcyA9IFtdO1xuICAgIHRoaXMuX2V4cGFuZGVkS2V5cyA9IFtdO1xuICAgIGxvb3BBbGxDaGlsZHJlbih0cmVlTm9kZXMsIChjaGlsZCwgaW5kZXgsIHBvcykgPT4ge1xuICAgICAgaWYgKHRoaXMuZmlsdGVyVHJlZU5vZGUodGhpcy5wcm9wcy5pbnB1dFZhbHVlLCBjaGlsZCkpIHtcbiAgICAgICAgZmlsdGVyUG9zcy5wdXNoKHBvcyk7XG4gICAgICAgIHRoaXMuX2V4cGFuZGVkS2V5cy5wdXNoKGNoaWxkLmtleSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBJbmNsdWRlIHRoZSBmaWx0ZXJlZCBub2RlcydzIGFuY2VzdHJhbCBub2Rlcy5cbiAgICBjb25zdCBwcm9jZXNzZWRQb3NzID0gW107XG4gICAgZmlsdGVyUG9zcy5mb3JFYWNoKHBvcyA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBwb3Muc3BsaXQoJy0nKTtcbiAgICAgIGFyci5yZWR1Y2UoKHByZSwgY3VyKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGAke3ByZX0tJHtjdXJ9YDtcbiAgICAgICAgaWYgKHByb2Nlc3NlZFBvc3MuaW5kZXhPZihyZXMpIDwgMCkge1xuICAgICAgICAgIHByb2Nlc3NlZFBvc3MucHVzaChyZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBjb25zdCBmaWx0ZXJOb2Rlc1Bvc2l0aW9ucyA9IFtdO1xuICAgIGxvb3BBbGxDaGlsZHJlbih0cmVlTm9kZXMsIChjaGlsZCwgaW5kZXgsIHBvcykgPT4ge1xuICAgICAgaWYgKHByb2Nlc3NlZFBvc3MuaW5kZXhPZihwb3MpID4gLTEpIHtcbiAgICAgICAgZmlsdGVyTm9kZXNQb3NpdGlvbnMucHVzaCh7IG5vZGU6IGNoaWxkLCBwb3MgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBoaWVyYXJjaHlOb2RlcyA9IGZsYXRUb0hpZXJhcmNoeShmaWx0ZXJOb2Rlc1Bvc2l0aW9ucyk7XG5cbiAgICBjb25zdCByZWN1cnNpdmUgPSBjaGlsZHJlbiA9PiB7XG4gICAgICByZXR1cm4gY2hpbGRyZW4ubWFwKGNoaWxkID0+IHtcbiAgICAgICAgaWYgKGNoaWxkLmNoaWxkcmVuKSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudChjaGlsZC5ub2RlLCB7fSwgcmVjdXJzaXZlKGNoaWxkLmNoaWxkcmVuKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoaWxkLm5vZGU7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiByZWN1cnNpdmUoaGllcmFyY2h5Tm9kZXMpO1xuICB9XG5cbiAgcmVuZGVyVHJlZShrZXlzLCBoYWxmQ2hlY2tlZEtleXMsIG5ld1RyZWVOb2RlcywgbXVsdGlwbGUpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCB0clByb3BzID0ge1xuICAgICAgbXVsdGlwbGUsXG4gICAgICBwcmVmaXhDbHM6IGAke3Byb3BzLnByZWZpeENsc30tdHJlZWAsXG4gICAgICBzaG93SWNvbjogcHJvcHMudHJlZUljb24sXG4gICAgICBzaG93TGluZTogcHJvcHMudHJlZUxpbmUsXG4gICAgICBkZWZhdWx0RXhwYW5kQWxsOiBwcm9wcy50cmVlRGVmYXVsdEV4cGFuZEFsbCxcbiAgICAgIGRlZmF1bHRFeHBhbmRlZEtleXM6IHByb3BzLnRyZWVEZWZhdWx0RXhwYW5kZWRLZXlzLFxuICAgICAgZmlsdGVyVHJlZU5vZGU6IHRoaXMuaGlnaGxpZ2h0VHJlZU5vZGUsXG4gICAgfTtcblxuICAgIGlmIChwcm9wcy50cmVlQ2hlY2thYmxlKSB7XG4gICAgICB0clByb3BzLnNlbGVjdGFibGUgPSBmYWxzZTtcbiAgICAgIHRyUHJvcHMuY2hlY2thYmxlID0gcHJvcHMudHJlZUNoZWNrYWJsZTtcbiAgICAgIHRyUHJvcHMub25DaGVjayA9IHByb3BzLm9uU2VsZWN0O1xuICAgICAgdHJQcm9wcy5jaGVja1N0cmljdGx5ID0gcHJvcHMudHJlZUNoZWNrU3RyaWN0bHk7XG4gICAgICBpZiAocHJvcHMuaW5wdXRWYWx1ZSkge1xuICAgICAgICAvLyBlbmFibGUgY2hlY2tTdHJpY3RseSB3aGVuIHNlYXJjaCB0cmVlLlxuICAgICAgICB0clByb3BzLmNoZWNrU3RyaWN0bHkgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJQcm9wcy5fdHJlZU5vZGVzU3RhdGVzID0gcHJvcHMuX3RyZWVOb2Rlc1N0YXRlcztcbiAgICAgIH1cbiAgICAgIGlmICh0clByb3BzLnRyZWVDaGVja1N0cmljdGx5ICYmIGhhbGZDaGVja2VkS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgdHJQcm9wcy5jaGVja2VkS2V5cyA9IHsgY2hlY2tlZDoga2V5cywgaGFsZkNoZWNrZWQ6IGhhbGZDaGVja2VkS2V5cyB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJQcm9wcy5jaGVja2VkS2V5cyA9IGtleXM7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyUHJvcHMuc2VsZWN0ZWRLZXlzID0ga2V5cztcbiAgICAgIHRyUHJvcHMub25TZWxlY3QgPSBwcm9wcy5vblNlbGVjdDtcbiAgICB9XG5cbiAgICAvLyBleHBhbmQga2V5c1xuICAgIGlmICghdHJQcm9wcy5kZWZhdWx0RXhwYW5kQWxsICYmICF0clByb3BzLmRlZmF1bHRFeHBhbmRlZEtleXMgJiYgIXByb3BzLmxvYWREYXRhKSB7XG4gICAgICB0clByb3BzLmV4cGFuZGVkS2V5cyA9IGtleXM7XG4gICAgfVxuICAgIHRyUHJvcHMuYXV0b0V4cGFuZFBhcmVudCA9IHRydWU7XG4gICAgdHJQcm9wcy5vbkV4cGFuZCA9IHRoaXMub25FeHBhbmQ7XG4gICAgaWYgKHRoaXMuX2V4cGFuZGVkS2V5cyAmJiB0aGlzLl9leHBhbmRlZEtleXMubGVuZ3RoKSB7XG4gICAgICB0clByb3BzLmV4cGFuZGVkS2V5cyA9IHRoaXMuX2V4cGFuZGVkS2V5cztcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RhdGUuZmlyZU9uRXhwYW5kKSB7XG4gICAgICB0clByb3BzLmV4cGFuZGVkS2V5cyA9IHRoaXMuc3RhdGUuX2V4cGFuZGVkS2V5cztcbiAgICAgIHRyUHJvcHMuYXV0b0V4cGFuZFBhcmVudCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGFzeW5jIGxvYWREYXRhXG4gICAgaWYgKHByb3BzLmxvYWREYXRhKSB7XG4gICAgICB0clByb3BzLmxvYWREYXRhID0gcHJvcHMubG9hZERhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxUcmVlIHJlZj17c2F2ZVJlZih0aGlzLCAncG9wdXBFbGUnKX0gey4uLnRyUHJvcHN9PlxuICAgICAgICB7bmV3VHJlZU5vZGVzfVxuICAgICAgPC9UcmVlPlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IG11bHRpcGxlID0gcHJvcHMubXVsdGlwbGU7XG4gICAgY29uc3QgZHJvcGRvd25QcmVmaXhDbHMgPSB0aGlzLmdldERyb3Bkb3duUHJlZml4Q2xzKCk7XG4gICAgY29uc3QgcG9wdXBDbGFzc05hbWUgPSB7XG4gICAgICBbcHJvcHMuZHJvcGRvd25DbGFzc05hbWVdOiAhIXByb3BzLmRyb3Bkb3duQ2xhc3NOYW1lLFxuICAgICAgW2Ake2Ryb3Bkb3duUHJlZml4Q2xzfS0tJHttdWx0aXBsZSA/ICdtdWx0aXBsZScgOiAnc2luZ2xlJ31gXTogMSxcbiAgICB9O1xuICAgIGxldCB2aXNpYmxlID0gcHJvcHMudmlzaWJsZTtcbiAgICBjb25zdCBzZWFyY2ggPSBtdWx0aXBsZSB8fCAhcHJvcHMuc2hvd1NlYXJjaCA/IG51bGwgOiAoXG4gICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2Ryb3Bkb3duUHJlZml4Q2xzfS1zZWFyY2hgfT57cHJvcHMuaW5wdXRFbGVtZW50fTwvc3Bhbj5cbiAgICApO1xuXG4gICAgY29uc3QgcmVjdXJzaXZlID0gY2hpbGRyZW4gPT4ge1xuICAgICAgLy8gTm90ZTogaWYgdXNlIGBSZWFjdC5DaGlsZHJlbi5tYXBgLCB0aGUgbm9kZSdzIGtleSB3aWxsIGJlIG1vZGlmaWVkLlxuICAgICAgcmV0dXJuIHRvQXJyYXkoY2hpbGRyZW4pLm1hcChmdW5jdGlvbiBoYW5kbGVyKGNoaWxkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiAgICAgICAgaWYgKCFjaGlsZCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGlsZCAmJiBjaGlsZC5wcm9wcy5jaGlsZHJlbikge1xuICAgICAgICAgIC8vIG51bGwgb3IgU3RyaW5nIGhhcyBubyBQcm9wXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUcmVlTm9kZSB7Li4uY2hpbGQucHJvcHN9IGtleT17Y2hpbGQua2V5fT5cbiAgICAgICAgICAgICAge3JlY3Vyc2l2ZShjaGlsZC5wcm9wcy5jaGlsZHJlbil9XG4gICAgICAgICAgICA8L1RyZWVOb2RlPlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDxUcmVlTm9kZSB7Li4uY2hpbGQucHJvcHN9IGtleT17Y2hpbGQua2V5fSAvPjtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgLy8gY29uc3QgcyA9IERhdGUubm93KCk7XG4gICAgbGV0IHRyZWVOb2RlcztcbiAgICBpZiAocHJvcHMuX2NhY2hldHJlZURhdGEgJiYgdGhpcy50cmVlTm9kZXMpIHtcbiAgICAgIHRyZWVOb2RlcyA9IHRoaXMudHJlZU5vZGVzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmVlTm9kZXMgPSByZWN1cnNpdmUocHJvcHMudHJlZURhdGEgfHwgcHJvcHMudHJlZU5vZGVzKTtcbiAgICAgIHRoaXMudHJlZU5vZGVzID0gdHJlZU5vZGVzO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhEYXRlLm5vdygpLXMpO1xuXG4gICAgaWYgKHByb3BzLmlucHV0VmFsdWUpIHtcbiAgICAgIHRyZWVOb2RlcyA9IHRoaXMucHJvY2Vzc1RyZWVOb2RlKHRyZWVOb2Rlcyk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5cyA9IFtdO1xuICAgIGNvbnN0IGhhbGZDaGVja2VkS2V5cyA9IFtdO1xuICAgIGxvb3BBbGxDaGlsZHJlbih0cmVlTm9kZXMsIChjaGlsZCkgPT4ge1xuICAgICAgaWYgKHByb3BzLnZhbHVlLnNvbWUoaXRlbSA9PiBpdGVtLnZhbHVlID09PSBnZXRWYWx1ZVByb3BWYWx1ZShjaGlsZCkpKSB7XG4gICAgICAgIGtleXMucHVzaChjaGlsZC5rZXkpO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BzLmhhbGZDaGVja2VkVmFsdWVzICYmXG4gICAgICAgIHByb3BzLmhhbGZDaGVja2VkVmFsdWVzLnNvbWUoaXRlbSA9PiBpdGVtLnZhbHVlID09PSBnZXRWYWx1ZVByb3BWYWx1ZShjaGlsZCkpKSB7XG4gICAgICAgIGhhbGZDaGVja2VkS2V5cy5wdXNoKGNoaWxkLmtleSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgbm90Rm91bmRDb250ZW50O1xuICAgIGlmICghdHJlZU5vZGVzLmxlbmd0aCkge1xuICAgICAgaWYgKHByb3BzLm5vdEZvdW5kQ29udGVudCkge1xuICAgICAgICBub3RGb3VuZENvbnRlbnQgPSAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgJHtwcm9wcy5wcmVmaXhDbHN9LW5vdC1mb3VuZGB9PlxuICAgICAgICAgICAge3Byb3BzLm5vdEZvdW5kQ29udGVudH1cbiAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKCFzZWFyY2gpIHtcbiAgICAgICAgdmlzaWJsZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7c2VhcmNofVxuICAgICAgICB7bm90Rm91bmRDb250ZW50IHx8IHRoaXMucmVuZGVyVHJlZShrZXlzLCBoYWxmQ2hlY2tlZEtleXMsIHRyZWVOb2RlcywgbXVsdGlwbGUpfVxuICAgICAgPC9kaXY+XG4gICAgKTtcblxuICAgIGNvbnN0IHBvcHVwU3R5bGUgPSB7IC4uLnByb3BzLmRyb3Bkb3duU3R5bGUgfTtcbiAgICBjb25zdCB3aWR0aFByb3AgPSBwcm9wcy5kcm9wZG93bk1hdGNoU2VsZWN0V2lkdGggPyAnd2lkdGgnIDogJ21pbldpZHRoJztcbiAgICBpZiAodGhpcy5zdGF0ZS5kcm9wZG93bldpZHRoKSB7XG4gICAgICBwb3B1cFN0eWxlW3dpZHRoUHJvcF0gPSBgJHt0aGlzLnN0YXRlLmRyb3Bkb3duV2lkdGh9cHhgO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8VHJpZ2dlclxuICAgICAgICBhY3Rpb249e3Byb3BzLmRpc2FibGVkID8gW10gOiBbJ2NsaWNrJ119XG4gICAgICAgIHJlZj17c2F2ZVJlZih0aGlzLCAndHJpZ2dlcicpfVxuICAgICAgICBwb3B1cFBsYWNlbWVudD1cImJvdHRvbUxlZnRcIlxuICAgICAgICBidWlsdGluUGxhY2VtZW50cz17QlVJTFRfSU5fUExBQ0VNRU5UU31cbiAgICAgICAgcG9wdXBBbGlnbj17cHJvcHMuZHJvcGRvd25Qb3B1cEFsaWdufVxuICAgICAgICBwcmVmaXhDbHM9e2Ryb3Bkb3duUHJlZml4Q2xzfVxuICAgICAgICBwb3B1cFRyYW5zaXRpb25OYW1lPXt0aGlzLmdldERyb3Bkb3duVHJhbnNpdGlvbk5hbWUoKX1cbiAgICAgICAgb25Qb3B1cFZpc2libGVDaGFuZ2U9e3Byb3BzLm9uRHJvcGRvd25WaXNpYmxlQ2hhbmdlfVxuICAgICAgICBwb3B1cD17cG9wdXBFbGVtZW50fVxuICAgICAgICBwb3B1cFZpc2libGU9e3Zpc2libGV9XG4gICAgICAgIGdldFBvcHVwQ29udGFpbmVyPXtwcm9wcy5nZXRQb3B1cENvbnRhaW5lcn1cbiAgICAgICAgcG9wdXBDbGFzc05hbWU9e2NsYXNzbmFtZXMocG9wdXBDbGFzc05hbWUpfVxuICAgICAgICBwb3B1cFN0eWxlPXtwb3B1cFN0eWxlfVxuICAgICAgPlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvVHJpZ2dlcj5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdFRyaWdnZXI7XG4iXX0=