7c6019ac4b4cd0f59efdce1950ec89fa
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.LocaleContext = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _tslib = require("tslib");

var _mobx = require("mobx");

var _moment = _interopRequireDefault(require("moment"));

var _locale = _interopRequireDefault(require("./locale"));

var _supports = _interopRequireDefault(require("./supports"));

var _normalizeLanguage = _interopRequireDefault(require("../_util/normalizeLanguage"));

function setMomentLocale(locale) {
  _moment["default"].locale((0, _normalizeLanguage["default"])(locale ? locale.lang : _locale["default"].lang));
}

var LocaleContext =
/*#__PURE__*/
function () {
  function LocaleContext() {
    var _this = this;

    (0, _classCallCheck2["default"])(this, LocaleContext);
    (0, _mobx.runInAction)(function () {
      _this.locale = _locale["default"];
      _this.supports = _supports["default"];
    });
  }

  (0, _createClass2["default"])(LocaleContext, [{
    key: "setLocale",
    value: function setLocale(locale) {
      setMomentLocale(locale);
      this.locale = locale;
    }
  }, {
    key: "setSupports",
    value: function setSupports(supports) {
      this.supports = supports;
    }
  }, {
    key: "get",
    value: function get(component, key) {
      var cmp = (0, _mobx.get)(this.locale, component);
      return cmp && (0, _mobx.get)(cmp, key) || "".concat(component, ".").concat(key);
    }
  }]);
  return LocaleContext;
}();

exports.LocaleContext = LocaleContext;
(0, _tslib.__decorate)([_mobx.observable], LocaleContext.prototype, "locale", void 0);
(0, _tslib.__decorate)([_mobx.observable], LocaleContext.prototype, "supports", void 0);
(0, _tslib.__decorate)([_mobx.action], LocaleContext.prototype, "setLocale", null);

var _default = new LocaleContext();

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2FsZS1jb250ZXh0L0xvY2FsZUNvbnRleHQuanMiXSwibmFtZXMiOlsibW9tZW50IiwibG9jYWxlIiwiZGVmYXVsdExvY2FsZSIsIkxvY2FsZUNvbnRleHQiLCJkZWZhdWx0U3VwcG9ydHMiLCJzZXRNb21lbnRMb2NhbGUiLCJzdXBwb3J0cyIsImNvbXBvbmVudCIsImtleSIsImNtcCIsIm9ic2VydmFibGUiLCJhY3Rpb24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLE1BQUEsR0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBOztBQUNBLElBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUE7O0FBQ0EsSUFBQSxPQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsUUFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxPQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxTQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsWUFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxrQkFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLDRCQUFBLENBQUEsQ0FBQTs7QUFDQSxTQUFBLGVBQUEsQ0FBQSxNQUFBLEVBQWlDO0FBQzdCQSxFQUFBQSxPQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQUFBQSxNQUFBQSxDQUFjLENBQUEsR0FBQSxrQkFBQSxDQUFBLFNBQUEsQ0FBQSxFQUFrQkMsTUFBTSxHQUFHQSxNQUFNLENBQVQsSUFBQSxHQUFpQkMsT0FBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsQ0FBdkRGLElBQWMsQ0FBZEE7QUFDSDs7SUFDWUcsYTs7O0FBQ1QsV0FBQSxhQUFBLEdBQWM7QUFBQSxRQUFBLEtBQUEsR0FBQSxJQUFBOztBQUFBLEtBQUEsR0FBQSxnQkFBQSxDQUFBLFNBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxhQUFBO0FBQ1YsS0FBQSxHQUFBLEtBQUEsQ0FBQSxXQUFBLEVBQVksWUFBTTtBQUNkLE1BQUEsS0FBSSxDQUFKLE1BQUEsR0FBY0QsT0FBQUEsQ0FBZCxTQUFjQSxDQUFkO0FBQ0EsTUFBQSxLQUFJLENBQUosUUFBQSxHQUFnQkUsU0FBQUEsQ0FBaEIsU0FBZ0JBLENBQWhCO0FBRkosS0FBQTtBQUlIOzs7OzhCQUNTSCxNLEVBQVE7QUFDZEksTUFBQUEsZUFBZSxDQUFmQSxNQUFlLENBQWZBO0FBQ0EsV0FBQSxNQUFBLEdBQUEsTUFBQTtBQUNIOzs7Z0NBQ1dDLFEsRUFBVTtBQUNsQixXQUFBLFFBQUEsR0FBQSxRQUFBO0FBQ0g7Ozt3QkFDR0MsUyxFQUFXQyxHLEVBQUs7QUFDaEIsVUFBTUMsR0FBRyxHQUFHLENBQUEsR0FBQSxLQUFBLENBQUEsR0FBQSxFQUFJLEtBQUosTUFBQSxFQUFaLFNBQVksQ0FBWjtBQUNBLGFBQVFBLEdBQUcsSUFBSSxDQUFBLEdBQUEsS0FBQSxDQUFBLEdBQUEsRUFBQSxHQUFBLEVBQVIsR0FBUSxDQUFQQSxJQUFELEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxDQUFQLEdBQU8sQ0FBUDtBQUNIOzs7Ozs7QUFFTCxDQUFBLEdBQUEsTUFBQSxDQUFBLFVBQUEsRUFBVyxDQUNQQyxLQUFBQSxDQURKLFVBQVcsQ0FBWCxFQUVHUCxhQUFhLENBRmhCLFNBQUEsRUFBQSxRQUFBLEVBRXNDLEtBRnRDLENBQUE7QUFHQSxDQUFBLEdBQUEsTUFBQSxDQUFBLFVBQUEsRUFBVyxDQUNQTyxLQUFBQSxDQURKLFVBQVcsQ0FBWCxFQUVHUCxhQUFhLENBRmhCLFNBQUEsRUFBQSxVQUFBLEVBRXdDLEtBRnhDLENBQUE7QUFHQSxDQUFBLEdBQUEsTUFBQSxDQUFBLFVBQUEsRUFBVyxDQUNQUSxLQUFBQSxDQURKLE1BQVcsQ0FBWCxFQUVHUixhQUFhLENBRmhCLFNBQUEsRUFBQSxXQUFBLEVBQUEsSUFBQTs7ZUFHZSxJQUFBLGFBQUEsRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGFjdGlvbiwgZ2V0LCBvYnNlcnZhYmxlLCBydW5JbkFjdGlvbiB9IGZyb20gJ21vYngnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IGRlZmF1bHRMb2NhbGUgZnJvbSAnLi9sb2NhbGUnO1xuaW1wb3J0IGRlZmF1bHRTdXBwb3J0cyBmcm9tICcuL3N1cHBvcnRzJztcbmltcG9ydCBub3JtYWxpemVMYW5ndWFnZSBmcm9tICcuLi9fdXRpbC9ub3JtYWxpemVMYW5ndWFnZSc7XG5mdW5jdGlvbiBzZXRNb21lbnRMb2NhbGUobG9jYWxlKSB7XG4gICAgbW9tZW50LmxvY2FsZShub3JtYWxpemVMYW5ndWFnZShsb2NhbGUgPyBsb2NhbGUubGFuZyA6IGRlZmF1bHRMb2NhbGUubGFuZykpO1xufVxuZXhwb3J0IGNsYXNzIExvY2FsZUNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IGRlZmF1bHRMb2NhbGU7XG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRzID0gZGVmYXVsdFN1cHBvcnRzO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgICAgICBzZXRNb21lbnRMb2NhbGUobG9jYWxlKTtcbiAgICAgICAgdGhpcy5sb2NhbGUgPSBsb2NhbGU7XG4gICAgfVxuICAgIHNldFN1cHBvcnRzKHN1cHBvcnRzKSB7XG4gICAgICAgIHRoaXMuc3VwcG9ydHMgPSBzdXBwb3J0cztcbiAgICB9XG4gICAgZ2V0KGNvbXBvbmVudCwga2V5KSB7XG4gICAgICAgIGNvbnN0IGNtcCA9IGdldCh0aGlzLmxvY2FsZSwgY29tcG9uZW50KTtcbiAgICAgICAgcmV0dXJuIChjbXAgJiYgZ2V0KGNtcCwga2V5KSkgfHwgYCR7Y29tcG9uZW50fS4ke2tleX1gO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIG9ic2VydmFibGVcbl0sIExvY2FsZUNvbnRleHQucHJvdG90eXBlLCBcImxvY2FsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgb2JzZXJ2YWJsZVxuXSwgTG9jYWxlQ29udGV4dC5wcm90b3R5cGUsIFwic3VwcG9ydHNcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGFjdGlvblxuXSwgTG9jYWxlQ29udGV4dC5wcm90b3R5cGUsIFwic2V0TG9jYWxlXCIsIG51bGwpO1xuZXhwb3J0IGRlZmF1bHQgbmV3IExvY2FsZUNvbnRleHQoKTtcbiJdfQ==