f355f2145f2be6283d0f69486d73396a
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("choerodon-ui/pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("choerodon-ui/pro/lib/data-set/FeedBack"));

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};
var defaultSpinProps = {
  size: "default"
  /* default */
  ,
  wrapperClassName: ''
};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['lovTriggerMode', "icon"
/* icon */
], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableSelectedHighLightRow', false], ['tableRowHeight', 30], ['tableColumnResizable', true], ['tableSpinProps', defaultSpinProps], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['modalSectionBorder', true], ['modalOkFirst', true], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}], ['dropdownMatchSelectWidth', true]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL2NvbmZpZ3VyZS9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUdBOztBQUNBOztBQUdBOztBQWNBOzs7O0FBOEZBLElBQU0sa0JBQWtCLEdBQXVCLFNBQXpDLGtCQUF5QyxDQUFDLGFBQUQsRUFBc0M7QUFDbkYsVUFBUSxhQUFSO0FBQ0UsU0FBSyxPQUFMO0FBQ0UsYUFBTyx1QkFBRyxPQUFILEVBQVksWUFBWixDQUFQOztBQUNGLFNBQUssUUFBTDtBQUNFLGFBQU8sdUJBQUcsUUFBSCxFQUFhLHFCQUFiLENBQVA7O0FBQ0Y7QUFMRjtBQU9ELENBUkQ7O0FBVUEsSUFBTSxrQkFBa0IsR0FBRztBQUFFLEVBQUEsS0FBSyxFQUFBO0FBQUE7QUFBUDtBQUE4QixFQUFBLFFBQVEsRUFBQTtBQUFBOztBQUF0QyxDQUEzQjtBQUVBLElBQU0sZ0JBQWdCLEdBQUc7QUFBRSxFQUFBLElBQUksRUFBQTtBQUFBO0FBQU47QUFBc0IsRUFBQSxnQkFBZ0IsRUFBRTtBQUF4QyxDQUF6Qjs7QUFFQSxJQUFNLFlBQVksR0FBa0QsaUJBQVcsR0FBWCxDQUdsRSxDQUNBLENBQUMsV0FBRCxFQUFjLEtBQWQsQ0FEQSxFQUVBLENBQUMsY0FBRCxFQUFpQixTQUFqQixDQUZBLEVBR0EsQ0FBQyxnQkFBRCxFQUFtQixNQUFuQixDQUhBLEVBSUEsQ0FBQyxRQUFELEVBQVcsSUFBWCxDQUpBLEVBS0EsQ0FBQyxhQUFELEVBQWdCO0FBQUUsRUFBQSxNQUFNLEVBQUUsT0FBTyxFQUFQLEdBQVksRUFBdEI7QUFBMEIsRUFBQSxHQUFHLEVBQUU7QUFBL0IsQ0FBaEIsQ0FMQSxFQU1BLENBQUMsV0FBRCxFQUFjLFVBQUEsSUFBSTtBQUFBLGdDQUFvQixJQUFwQjtBQUFBLENBQWxCLENBTkEsRUFPQSxDQUFDLG1CQUFELEVBQXNCLE1BQXRC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Qyx5QkFBWSxZQUFLO0FBQ2YsSUFBQSxNQUFNLENBQUMsSUFBUCxDQUFZLE1BQVosRUFBb0IsT0FBcEIsQ0FBNEIsVUFBQyxHQUFELEVBQW9CO0FBQzlDLFVBQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxHQUFELENBQXBCOztBQUNBLFVBQUksVUFBVSxDQUFDLFFBQVgsQ0FBb0IsR0FBcEIsS0FBNEIsMEJBQVMsS0FBVCxDQUFoQyxFQUFpRDtBQUMvQyxRQUFBLFlBQVksQ0FBQyxHQUFiLENBQWlCLEdBQWpCLHFDQUNLLGdCQUFVLFlBQVksQ0FBQyxHQUFiLENBQWlCLEdBQWpCLENBQVYsQ0FETCxNQUVLLEtBRkw7QUFJRCxPQUxELE1BS087QUFDTCxRQUFBLFlBQVksQ0FBQyxHQUFiLENBQWlCLEdBQWpCLEVBQXNCLE1BQU0sQ0FBQyxHQUFELENBQTVCO0FBQ0Q7QUFDRixLQVZEO0FBV0QsR0FaRDtBQWFEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2JzZXJ2YWJsZSwgT2JzZXJ2YWJsZU1hcCwgcnVuSW5BY3Rpb24sIHRvSlMgfSBmcm9tICdtb2J4JztcbmltcG9ydCB7IEF4aW9zSW5zdGFuY2UsIEF4aW9zUHJvbWlzZSwgQXhpb3NSZXF1ZXN0Q29uZmlnIH0gZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGlzT2JqZWN0IGZyb20gJ2xvZGFzaC9pc09iamVjdCc7XG5pbXBvcnQgeyBjYXRlZ29yaWVzIH0gZnJvbSAnY2hvZXJvZG9uLXVpLWZvbnQnO1xuaW1wb3J0IHsgTG92Q29uZmlnIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvbG92L0xvdic7XG5pbXBvcnQgeyBSZWNvcmRTdGF0dXMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9kYXRhLXNldC9lbnVtJztcbmltcG9ydCB7ICRsIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvbG9jYWxlLWNvbnRleHQnO1xuaW1wb3J0IHtcbiAgZXhwYW5kSWNvblByb3BzLFxuICBUYWJsZVBhZ2luYXRpb25Db25maWcsXG4gIFRhYmxlUXVlcnlCYXJIb29rLFxufSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi90YWJsZS9UYWJsZSc7XG5pbXBvcnQgeyBWYWxpZGF0aW9uTWVzc2FnZXMgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi92YWxpZGF0b3IvVmFsaWRhdG9yJztcbmltcG9ydCB7IEJ1dHRvblByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvYnV0dG9uL0J1dHRvbic7XG5pbXBvcnQgeyBTcGluUHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvbGliL3NwaW4nO1xuaW1wb3J0IHsgU2l6ZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9saWIvX3V0aWwvZW51bSc7XG5pbXBvcnQgeyBUYWJsZVF1ZXJ5QmFyVHlwZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL3RhYmxlL2VudW0nO1xuaW1wb3J0IHsgVHJpZ2dlck1vZGUgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9sb3YvZW51bSc7XG5pbXBvcnQgeyBUcmFuc3BvcnRIb29rUHJvcHMsIFRyYW5zcG9ydFByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvVHJhbnNwb3J0JztcbmltcG9ydCBEYXRhU2V0IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0RhdGFTZXQnO1xuaW1wb3J0IGRlZmF1bHRGZWVkYmFjaywgeyBGZWVkQmFjayB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0ZlZWRCYWNrJztcbmltcG9ydCBSZWNvcmQgZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvUmVjb3JkJztcbmltcG9ydCB7IENhY2hlT3B0aW9ucyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL191dGlsL0NhY2hlJztcbmltcG9ydCB7IExhYmVsTGF5b3V0IH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZm9ybS9lbnVtJztcbmltcG9ydCB7IEJ1dHRvbkNvbG9yLCBGdW5jVHlwZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2J1dHRvbi9lbnVtJztcblxuZXhwb3J0IHR5cGUgU3RhdHVzID0ge1xuICBbUmVjb3JkU3RhdHVzLmFkZF06IHN0cmluZztcbiAgW1JlY29yZFN0YXR1cy51cGRhdGVdOiBzdHJpbmc7XG4gIFtSZWNvcmRTdGF0dXMuZGVsZXRlXTogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgcmVuZGVyRW1wdHlIYW5kbGVyID0gKGNvbXBvbmVudE5hbWU/OiBzdHJpbmcpID0+IFJlYWN0Tm9kZTtcblxuZXhwb3J0IHR5cGUgRm9ybWF0dGVyID0ge1xuICBqc29uRGF0ZT86IHN0cmluZyB8IG51bGw7XG4gIGRhdGU/OiBzdHJpbmc7XG4gIGRhdGVUaW1lPzogc3RyaW5nO1xuICB0aW1lPzogc3RyaW5nO1xuICB5ZWFyPzogc3RyaW5nO1xuICBtb250aD86IHN0cmluZztcbiAgd2Vlaz86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZyA9IHtcbiAgcHJlZml4Q2xzPzogc3RyaW5nO1xuICBwcm9QcmVmaXhDbHM/OiBzdHJpbmc7XG4gIGljb25mb250UHJlZml4Pzogc3RyaW5nO1xuICByaXBwbGU/OiBib29sZWFuO1xuICBsb29rdXBDYWNoZT86IENhY2hlT3B0aW9uczxzdHJpbmcsIEF4aW9zUHJvbWlzZT47XG4gIGxvb2t1cFVybD86IHN0cmluZyB8ICgoY29kZTogc3RyaW5nKSA9PiBzdHJpbmcpO1xuICBsb29rdXBBeGlvc01ldGhvZD86IHN0cmluZztcbiAgbG9va3VwQXhpb3NDb25maWc/OlxuICAgIHwgQXhpb3NSZXF1ZXN0Q29uZmlnXG4gICAgfCAoKHByb3BzOiB7XG4gICAgcGFyYW1zPzogYW55O1xuICAgIGRhdGFTZXQ/OiBEYXRhU2V0O1xuICAgIHJlY29yZD86IFJlY29yZDtcbiAgICBsb29rdXBDb2RlPzogc3RyaW5nO1xuICB9KSA9PiBBeGlvc1JlcXVlc3RDb25maWcpO1xuICBsb29rdXBCYXRjaEF4aW9zQ29uZmlnPzogKGNvZGVzOiBzdHJpbmdbXSkgPT4gQXhpb3NSZXF1ZXN0Q29uZmlnO1xuICBsb3ZEZWZpbmVVcmw/OiBzdHJpbmcgfCAoKGNvZGU6IHN0cmluZykgPT4gc3RyaW5nKTtcbiAgbG92RGVmaW5lQXhpb3NDb25maWc/OiBBeGlvc1JlcXVlc3RDb25maWcgfCAoKGNvZGU6IHN0cmluZykgPT4gQXhpb3NSZXF1ZXN0Q29uZmlnKTtcbiAgbG92UXVlcnlVcmw/OlxuICAgIHwgc3RyaW5nXG4gICAgfCAoKGNvZGU6IHN0cmluZywgbG92Q29uZmlnOiBMb3ZDb25maWcgfCB1bmRlZmluZWQsIHByb3BzOiBUcmFuc3BvcnRIb29rUHJvcHMpID0+IHN0cmluZyk7XG4gIGxvdlF1ZXJ5QXhpb3NDb25maWc/OlxuICAgIHwgQXhpb3NSZXF1ZXN0Q29uZmlnXG4gICAgfCAoKFxuICAgIGNvZGU6IHN0cmluZyxcbiAgICBsb3ZDb25maWc6IExvdkNvbmZpZyB8IHVuZGVmaW5lZCxcbiAgICBwcm9wczogVHJhbnNwb3J0SG9va1Byb3BzLFxuICApID0+IEF4aW9zUmVxdWVzdENvbmZpZyk7XG4gIGxvdlRyaWdnZXJNb2RlPzogVHJpZ2dlck1vZGU7XG4gIGF4aW9zPzogQXhpb3NJbnN0YW5jZTtcbiAgZmVlZGJhY2s/OiBGZWVkQmFjaztcbiAgZGF0YUtleT86IHN0cmluZztcbiAgdG90YWxLZXk/OiBzdHJpbmc7XG4gIHN0YXR1c0tleT86IHN0cmluZztcbiAgdGxzS2V5Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBTdGF0dXM7XG4gIGxhYmVsTGF5b3V0PzogTGFiZWxMYXlvdXQ7XG4gIHF1ZXJ5QmFyPzogVGFibGVRdWVyeUJhclR5cGUgfCBUYWJsZVF1ZXJ5QmFySG9vaztcbiAgdGFibGVCb3JkZXI/OiBib29sZWFuO1xuICB0YWJsZUhpZ2hMaWdodFJvdz86IGJvb2xlYW47XG4gIHRhYmxlU2VsZWN0ZWRIaWdoTGlnaHRSb3c/OiBib29sZWFuO1xuICB0YWJsZVJvd0hlaWdodD86ICdhdXRvJyB8IG51bWJlcjtcbiAgdGFibGVDb2x1bW5SZXNpemFibGU/OiBib29sZWFuO1xuICB0YWJsZUV4cGFuZEljb24/OiAocHJvcHM6IGV4cGFuZEljb25Qcm9wcykgPT4gUmVhY3ROb2RlO1xuICB0YWJsZVNwaW5Qcm9wcz86IFNwaW5Qcm9wcztcbiAgdGFibGVCdXR0b25Qcm9wcz86IEJ1dHRvblByb3BzO1xuICB0YWJsZUNvbW1hbmRQcm9wcz86IEJ1dHRvblByb3BzO1xuICBwYWdpbmF0aW9uPzogVGFibGVQYWdpbmF0aW9uQ29uZmlnIHwgZmFsc2U7XG4gIG1vZGFsU2VjdGlvbkJvcmRlcj86IGJvb2xlYW47XG4gIG1vZGFsT2tGaXJzdD86IGJvb2xlYW47XG4gIG1vZGFsQnV0dG9uUHJvcHM/OiBCdXR0b25Qcm9wcztcbiAgYnV0dG9uRnVuY1R5cGU/OiBGdW5jVHlwZTtcbiAgYnV0dG9uQ29sb3I/OiBCdXR0b25Db2xvcjtcbiAgcmVuZGVyRW1wdHk/OiByZW5kZXJFbXB0eUhhbmRsZXI7XG4gIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXM/OiBWYWxpZGF0aW9uTWVzc2FnZXM7XG4gIHRyYW5zcG9ydD86IFRyYW5zcG9ydFByb3BzO1xuICBpY29ucz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW10gfSB8IHN0cmluZ1tdO1xuICBnZW5lcmF0ZVBhZ2VRdWVyeT86IChwYWdlUGFyYW1zOiB7XG4gICAgcGFnZT86IG51bWJlcjtcbiAgICBwYWdlU2l6ZT86IG51bWJlcjtcbiAgICBzb3J0TmFtZT86IHN0cmluZztcbiAgICBzb3J0T3JkZXI/OiBzdHJpbmc7XG4gIH0pID0+IG9iamVjdDtcbiAgZm9ybWF0dGVyPzogRm9ybWF0dGVyO1xuICBkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGg/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgQ29uZmlnS2V5cyA9IGtleW9mIENvbmZpZztcblxuY29uc3QgZGVmYXVsdFJlbmRlckVtcHR5OiByZW5kZXJFbXB0eUhhbmRsZXIgPSAoY29tcG9uZW50TmFtZT86IHN0cmluZyk6IFJlYWN0Tm9kZSA9PiB7XG4gIHN3aXRjaCAoY29tcG9uZW50TmFtZSkge1xuICAgIGNhc2UgJ1RhYmxlJzpcbiAgICAgIHJldHVybiAkbCgnVGFibGUnLCAnZW1wdHlfZGF0YScpO1xuICAgIGNhc2UgJ1NlbGVjdCc6XG4gICAgICByZXR1cm4gJGwoJ1NlbGVjdCcsICdub19tYXRjaGluZ19yZXN1bHRzJyk7XG4gICAgZGVmYXVsdDpcbiAgfVxufTtcblxuY29uc3QgZGVmYXVsdEJ1dHRvblByb3BzID0geyBjb2xvcjogQnV0dG9uQ29sb3IucHJpbWFyeSwgZnVuY1R5cGU6IEZ1bmNUeXBlLmZsYXQgfTtcblxuY29uc3QgZGVmYXVsdFNwaW5Qcm9wcyA9IHsgc2l6ZTogU2l6ZS5kZWZhdWx0LCB3cmFwcGVyQ2xhc3NOYW1lOiAnJyB9O1xuXG5jb25zdCBnbG9iYWxDb25maWc6IE9ic2VydmFibGVNYXA8Q29uZmlnS2V5cywgQ29uZmlnW0NvbmZpZ0tleXNdPiA9IG9ic2VydmFibGUubWFwPFxuICBDb25maWdLZXlzLFxuICBDb25maWdbQ29uZmlnS2V5c11cbj4oW1xuICBbJ3ByZWZpeENscycsICdjN24nXSxcbiAgWydwcm9QcmVmaXhDbHMnLCAnYzduLXBybyddLFxuICBbJ2ljb25mb250UHJlZml4JywgJ2ljb24nXSxcbiAgWydyaXBwbGUnLCB0cnVlXSxcbiAgWydsb29rdXBDYWNoZScsIHsgbWF4QWdlOiAxMDAwICogNjAgKiAxMCwgbWF4OiAxMDAgfV0sXG4gIFsnbG9va3VwVXJsJywgY29kZSA9PiBgL2NvbW1vbi9jb2RlLyR7Y29kZX0vYF0sXG4gIFsnbG9va3VwQXhpb3NNZXRob2QnLCAncG9zdCddLFxuICAvLyBbXG4gIC8vICAgJ2xvb2t1cEJhdGNoQXhpb3NDb25maWcnLFxuICAvLyAgIGNvZGVzID0+ICh7XG4gIC8vICAgICB1cmw6ICcvY29tbW9uL2JhdGNoJyxcbiAgLy8gICAgIHBhcmFtczogY29kZXMucmVkdWNlKChvYmosIGNvZGUpID0+IHtcbiAgLy8gICAgICAgb2JqW2NvZGVdID0gY29kZTtcbiAgLy8gICAgICAgcmV0dXJuIG9iajtcbiAgLy8gICAgIH0sIHt9KSxcbiAgLy8gICB9KSxcbiAgLy8gXSxcbiAgWydsb3ZEZWZpbmVVcmwnLCBjb2RlID0+IGAvc3lzL2xvdi9sb3ZfZGVmaW5lP2NvZGU9JHtjb2RlfWBdLFxuICBbJ2xvdlF1ZXJ5VXJsJywgY29kZSA9PiBgL2NvbW1vbi9sb3YvZGF0YXNldC8ke2NvZGV9YF0sXG4gIFsnbG92VHJpZ2dlck1vZGUnLCBUcmlnZ2VyTW9kZS5pY29uXSxcbiAgWydkYXRhS2V5JywgJ3Jvd3MnXSxcbiAgWyd0b3RhbEtleScsICd0b3RhbCddLFxuICBbJ3N0YXR1c0tleScsICdfX3N0YXR1cyddLFxuICBbJ3Rsc0tleScsICdfX3RscyddLFxuICBbXG4gICAgJ3N0YXR1cycsXG4gICAgeyBbUmVjb3JkU3RhdHVzLmFkZF06ICdhZGQnLCBbUmVjb3JkU3RhdHVzLnVwZGF0ZV06ICd1cGRhdGUnLCBbUmVjb3JkU3RhdHVzLmRlbGV0ZV06ICdkZWxldGUnIH0sXG4gIF0sXG4gIFsnbGFiZWxMYXlvdXQnLCBMYWJlbExheW91dC5ob3Jpem9udGFsXSxcbiAgWydxdWVyeUJhcicsIFRhYmxlUXVlcnlCYXJUeXBlLm5vcm1hbF0sXG4gIFsndGFibGVCb3JkZXInLCB0cnVlXSxcbiAgWyd0YWJsZUhpZ2hMaWdodFJvdycsIHRydWVdLFxuICBbJ3RhYmxlU2VsZWN0ZWRIaWdoTGlnaHRSb3cnLCBmYWxzZV0sXG4gIFsndGFibGVSb3dIZWlnaHQnLCAzMF0sXG4gIFsndGFibGVDb2x1bW5SZXNpemFibGUnLCB0cnVlXSxcbiAgWyd0YWJsZVNwaW5Qcm9wcycsIGRlZmF1bHRTcGluUHJvcHNdLFxuICBbJ3RhYmxlQnV0dG9uUHJvcHMnLCBkZWZhdWx0QnV0dG9uUHJvcHNdLFxuICBbJ3RhYmxlQ29tbWFuZFByb3BzJywgZGVmYXVsdEJ1dHRvblByb3BzXSxcbiAgWydtb2RhbFNlY3Rpb25Cb3JkZXInLCB0cnVlXSxcbiAgWydtb2RhbE9rRmlyc3QnLCB0cnVlXSxcbiAgWydidXR0b25Db2xvcicsIEJ1dHRvbkNvbG9yLmRlZmF1bHRdLFxuICBbJ2J1dHRvbkZ1bmNUeXBlJywgRnVuY1R5cGUucmFpc2VkXSxcbiAgWydmZWVkYmFjaycsIGRlZmF1bHRGZWVkYmFja10sXG4gIFsncmVuZGVyRW1wdHknLCBkZWZhdWx0UmVuZGVyRW1wdHldLFxuICBbJ2ljb25zJywgY2F0ZWdvcmllc10sXG4gIFtcbiAgICAnZm9ybWF0dGVyJyxcbiAgICB7XG4gICAgICBqc29uRGF0ZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgZGF0ZTogJ1lZWVktTU0tREQnLFxuICAgICAgZGF0ZVRpbWU6ICdZWVlZLU1NLUREIEhIOm1tOnNzJyxcbiAgICAgIHRpbWU6ICdISDptbTpzcycsXG4gICAgICB5ZWFyOiAnWVlZWScsXG4gICAgICBtb250aDogJ1lZWVktTU0nLFxuICAgICAgd2VlazogJ0dHR0ctV28nLFxuICAgIH0sXG4gIF0sXG4gIFsnZHJvcGRvd25NYXRjaFNlbGVjdFdpZHRoJywgdHJ1ZV0sXG5dKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZyhrZXk6IENvbmZpZ0tleXMpOiBhbnkge1xuICAvLyBGSVhNRTogb2JzZXJ2YWJsZS5tYXDmiormnoTlu7ptYXDml7bkvKDlhaXnmoRrZXnnsbvlnovlkox2YWx1Zeexu+Wei+WIhuWIq+WBmuS6hnVuaW9u77yMXG4gIC8vIOS4ouWkseS6huS4gOS4gOWvueW6lOeahOaYoOWwhOWFs+ezu++8jOWvvOiHtOWHveaVsOiwg+eUqOiAheaXoOazleS9v+eUqHVuaW9u5ZCO55qE6L+U5Zue5YC857G75Z6L77yM5Zug5q2k6ZyA6KaB5oyH5a6a5pys5Ye95pWw6L+U5Zue5YC85Li6YW55XG4gIHJldHVybiBnbG9iYWxDb25maWcuZ2V0KGtleSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmVmaXhDbHMoc3VmZml4Q2xzOiBzdHJpbmcsIGN1c3RvbWl6ZVByZWZpeENscz86IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICByZXR1cm4gY3VzdG9taXplUHJlZml4Q2xzO1xuICB9XG4gIHJldHVybiBgJHtnZXRDb25maWcoJ3ByZWZpeENscycpfS0ke3N1ZmZpeENsc31gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJvUHJlZml4Q2xzKHN1ZmZpeENsczogc3RyaW5nLCBjdXN0b21pemVQcmVmaXhDbHM/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgcmV0dXJuIGN1c3RvbWl6ZVByZWZpeENscztcbiAgfVxuICByZXR1cm4gYCR7Z2V0Q29uZmlnKCdwcm9QcmVmaXhDbHMnKX0tJHtzdWZmaXhDbHN9YDtcbn1cblxuY29uc3QgbWVyZ2VQcm9wcyA9IFsndHJhbnNwb3J0JywgJ2ZlZWRiYWNrJywgJ2Zvcm1hdHRlciddO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnOiBDb25maWcpIHtcbiAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgIE9iamVjdC5rZXlzKGNvbmZpZykuZm9yRWFjaCgoa2V5OiBDb25maWdLZXlzKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNvbmZpZ1trZXldO1xuICAgICAgaWYgKG1lcmdlUHJvcHMuaW5jbHVkZXMoa2V5KSAmJiBpc09iamVjdCh2YWx1ZSkpIHtcbiAgICAgICAgZ2xvYmFsQ29uZmlnLnNldChrZXksIHtcbiAgICAgICAgICAuLi50b0pTPGFueT4oZ2xvYmFsQ29uZmlnLmdldChrZXkpKSxcbiAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnbG9iYWxDb25maWcuc2V0KGtleSwgY29uZmlnW2tleV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbiJdfQ==