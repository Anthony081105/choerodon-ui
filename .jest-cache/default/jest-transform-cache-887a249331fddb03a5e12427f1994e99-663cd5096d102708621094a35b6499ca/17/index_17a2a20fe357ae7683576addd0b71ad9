88f5bae0e329d973beb025cbfdc8ea9d
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("choerodon-ui/pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("choerodon-ui/pro/lib/data-set/FeedBack"));

var _utils = require("choerodon-ui/pro/lib/form/utils");

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};
var defaultSpinProps = {
  size: "default"
  /* default */
  ,
  wrapperClassName: ''
};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['collapseExpandIconPosition', 'left'], ['collapseTrigger', 'header'], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['lovTriggerMode', "icon"
/* icon */
], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableSelectedHighLightRow', false], ['tableRowHeight', 30], ['tableDefaultRenderer', ''], ['tableColumnResizable', true], ['tableSpinProps', defaultSpinProps], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['tableAlwaysShowRowBox', false], ['tableUseMouseBatchChoose', false], ['tableEditorNextKeyEnterDown', true], ['modalSectionBorder', true], ['modalOkFirst', true], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}], ['dropdownMatchSelectWidth', true], ['useColon', false], ['excludeUseColonTagList', _utils.defaultExcludeUseColonTag], ['lovTableProps', {}], ['textFieldAutoComplete', undefined], ['tableDragRow', false], ['tableDragColumn', false], ['numberFieldNonStrictStep', false]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzL2NvbmZpZ3VyZS9pbmRleC50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUdBOztBQUNBOztBQUdBOztBQWdCQTs7QUFLQTs7OztBQTJHQSxJQUFNLGtCQUFrQixHQUF1QixTQUF6QyxrQkFBeUMsQ0FBQyxhQUFELEVBQXNDO0FBQ25GLFVBQVEsYUFBUjtBQUNFLFNBQUssT0FBTDtBQUNFLGFBQU8sdUJBQUcsT0FBSCxFQUFZLFlBQVosQ0FBUDs7QUFDRixTQUFLLFFBQUw7QUFDRSxhQUFPLHVCQUFHLFFBQUgsRUFBYSxxQkFBYixDQUFQOztBQUNGO0FBTEY7QUFPRCxDQVJEOztBQVVBLElBQU0sa0JBQWtCLEdBQUc7QUFBRSxFQUFBLEtBQUssRUFBQTtBQUFBO0FBQVA7QUFBOEIsRUFBQSxRQUFRLEVBQUE7QUFBQTs7QUFBdEMsQ0FBM0I7QUFFQSxJQUFNLGdCQUFnQixHQUFHO0FBQUUsRUFBQSxJQUFJLEVBQUE7QUFBQTtBQUFOO0FBQXNCLEVBQUEsZ0JBQWdCLEVBQUU7QUFBeEMsQ0FBekI7O0FBRUEsSUFBTSxZQUFZLEdBQWtELGlCQUFXLEdBQVgsQ0FHbEUsQ0FDQSxDQUFDLFdBQUQsRUFBYyxLQUFkLENBREEsRUFFQSxDQUFDLGNBQUQsRUFBaUIsU0FBakIsQ0FGQSxFQUdBLENBQUMsZ0JBQUQsRUFBbUIsTUFBbkIsQ0FIQSxFQUlBLENBQUMsUUFBRCxFQUFXLElBQVgsQ0FKQSxFQUtBLENBQUMsNEJBQUQsRUFBK0IsTUFBL0IsQ0FMQSxFQU1BLENBQUMsaUJBQUQsRUFBb0IsUUFBcEIsQ0FOQSxFQU9BLENBQUMsYUFBRCxFQUFnQjtBQUFFLEVBQUEsTUFBTSxFQUFFLE9BQU8sRUFBUCxHQUFZLEVBQXRCO0FBQTBCLEVBQUEsR0FBRyxFQUFFO0FBQS9CLENBQWhCLENBUEEsRUFRQSxDQUFDLFdBQUQsRUFB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bGVNYXAsIHJ1bkluQWN0aW9uLCB0b0pTIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgeyBBeGlvc0luc3RhbmNlLCBBeGlvc1Byb21pc2UsIEF4aW9zUmVxdWVzdENvbmZpZyB9IGZyb20gJ2F4aW9zJztcbmltcG9ydCB7IFJlYWN0Tm9kZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBpc09iamVjdCBmcm9tICdsb2Rhc2gvaXNPYmplY3QnO1xuaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS1mb250JztcbmltcG9ydCB7IExvdkNvbmZpZyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvdi9Mb3YnO1xuaW1wb3J0IHsgUmVjb3JkU3RhdHVzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvZW51bSc7XG5pbXBvcnQgeyAkbCB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2xvY2FsZS1jb250ZXh0JztcbmltcG9ydCB7XG4gIGV4cGFuZEljb25Qcm9wcyxcbiAgVGFibGVQYWdpbmF0aW9uQ29uZmlnLFxuICBUYWJsZVF1ZXJ5QmFySG9vayxcbiAgVGFibGVQcm9wcyxcbn0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvdGFibGUvVGFibGUnO1xuaW1wb3J0IHsgVmFsaWRhdGlvbk1lc3NhZ2VzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvdmFsaWRhdG9yL1ZhbGlkYXRvcic7XG5pbXBvcnQgeyBCdXR0b25Qcm9wcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2J1dHRvbi9CdXR0b24nO1xuaW1wb3J0IHsgU3BpblByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL2xpYi9zcGluJztcbmltcG9ydCB7IFBhbmVsUHJvcHMgfSBmcm9tICdjaG9lcm9kb24tdWkvbGliL2NvbGxhcHNlJztcbmltcG9ydCB7IFNpemUgfSBmcm9tICdjaG9lcm9kb24tdWkvbGliL191dGlsL2VudW0nO1xuaW1wb3J0IHsgVGFibGVRdWVyeUJhclR5cGUsIERyYWdDb2x1bW5BbGlnbiB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL3RhYmxlL2VudW0nO1xuaW1wb3J0IHsgVHJpZ2dlck1vZGUgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9sb3YvZW51bSc7XG5pbXBvcnQgeyBUcmFuc3BvcnRIb29rUHJvcHMsIFRyYW5zcG9ydFByb3BzIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvVHJhbnNwb3J0JztcbmltcG9ydCBEYXRhU2V0IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0RhdGFTZXQnO1xuaW1wb3J0IGRlZmF1bHRGZWVkYmFjaywgeyBGZWVkQmFjayB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2RhdGEtc2V0L0ZlZWRCYWNrJztcbmltcG9ydCBSZWNvcmQgZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZGF0YS1zZXQvUmVjb3JkJztcbmltcG9ydCB7IENhY2hlT3B0aW9ucyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL191dGlsL0NhY2hlJztcbmltcG9ydCB7IExhYmVsTGF5b3V0IH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZm9ybS9lbnVtJztcbmltcG9ydCB7IEJ1dHRvbkNvbG9yLCBGdW5jVHlwZSB9IGZyb20gJ2Nob2Vyb2Rvbi11aS9wcm8vbGliL2J1dHRvbi9lbnVtJztcbmltcG9ydCB7IGRlZmF1bHRFeGNsdWRlVXNlQ29sb25UYWcgfSBmcm9tICdjaG9lcm9kb24tdWkvcHJvL2xpYi9mb3JtL3V0aWxzJztcbmltcG9ydCB7IFJlbmRlcmVyIH0gZnJvbSAnY2hvZXJvZG9uLXVpL3Byby9saWIvZmllbGQvRm9ybUZpZWxkJztcblxuZXhwb3J0IHR5cGUgU3RhdHVzID0ge1xuICBbUmVjb3JkU3RhdHVzLmFkZF06IHN0cmluZztcbiAgW1JlY29yZFN0YXR1cy51cGRhdGVdOiBzdHJpbmc7XG4gIFtSZWNvcmRTdGF0dXMuZGVsZXRlXTogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgcmVuZGVyRW1wdHlIYW5kbGVyID0gKGNvbXBvbmVudE5hbWU/OiBzdHJpbmcpID0+IFJlYWN0Tm9kZTtcblxuZXhwb3J0IHR5cGUgRm9ybWF0dGVyID0ge1xuICBqc29uRGF0ZT86IHN0cmluZyB8IG51bGw7XG4gIGRhdGU/OiBzdHJpbmc7XG4gIGRhdGVUaW1lPzogc3RyaW5nO1xuICB0aW1lPzogc3RyaW5nO1xuICB5ZWFyPzogc3RyaW5nO1xuICBtb250aD86IHN0cmluZztcbiAgd2Vlaz86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZyA9IHtcbiAgcHJlZml4Q2xzPzogc3RyaW5nO1xuICBwcm9QcmVmaXhDbHM/OiBzdHJpbmc7XG4gIGljb25mb250UHJlZml4Pzogc3RyaW5nO1xuICByaXBwbGU/OiBib29sZWFuO1xuICBjb2xsYXBzZUV4cGFuZEljb25Qb3NpdGlvbj86IHN0cmluZztcbiAgY29sbGFwc2VFeHBhbmRJY29uPzogKHBhbmVsUHJvcHM6IFBhbmVsUHJvcHMpID0+IFJlYWN0Tm9kZSB8ICd0ZXh0JztcbiAgY29sbGFwc2VUcmlnZ2VyPzogc3RyaW5nO1xuICBsb29rdXBDYWNoZT86IENhY2hlT3B0aW9uczxzdHJpbmcsIEF4aW9zUHJvbWlzZT47XG4gIGxvb2t1cFVybD86IHN0cmluZyB8ICgoY29kZTogc3RyaW5nKSA9PiBzdHJpbmcpO1xuICBsb29rdXBBeGlvc01ldGhvZD86IHN0cmluZztcbiAgbG9va3VwQXhpb3NDb25maWc/OlxuICB8IEF4aW9zUmVxdWVzdENvbmZpZ1xuICB8ICgocHJvcHM6IHtcbiAgICBwYXJhbXM/OiBhbnk7XG4gICAgZGF0YVNldD86IERhdGFTZXQ7XG4gICAgcmVjb3JkPzogUmVjb3JkO1xuICAgIGxvb2t1cENvZGU/OiBzdHJpbmc7XG4gIH0pID0+IEF4aW9zUmVxdWVzdENvbmZpZyk7XG4gIGxvb2t1cEJhdGNoQXhpb3NDb25maWc/OiAoY29kZXM6IHN0cmluZ1tdKSA9PiBBeGlvc1JlcXVlc3RDb25maWc7XG4gIGxvdkRlZmluZVVybD86IHN0cmluZyB8ICgoY29kZTogc3RyaW5nKSA9PiBzdHJpbmcpO1xuICBsb3ZEZWZpbmVBeGlvc0NvbmZpZz86IEF4aW9zUmVxdWVzdENvbmZpZyB8ICgoY29kZTogc3RyaW5nKSA9PiBBeGlvc1JlcXVlc3RDb25maWcpO1xuICBsb3ZRdWVyeVVybD86XG4gIHwgc3RyaW5nXG4gIHwgKChjb2RlOiBzdHJpbmcsIGxvdkNvbmZpZzogTG92Q29uZmlnIHwgdW5kZWZpbmVkLCBwcm9wczogVHJhbnNwb3J0SG9va1Byb3BzKSA9PiBzdHJpbmcpO1xuICBsb3ZRdWVyeUF4aW9zQ29uZmlnPzpcbiAgfCBBeGlvc1JlcXVlc3RDb25maWdcbiAgfCAoKFxuICAgIGNvZGU6IHN0cmluZyxcbiAgICBsb3ZDb25maWc6IExvdkNvbmZpZyB8IHVuZGVmaW5lZCxcbiAgICBwcm9wczogVHJhbnNwb3J0SG9va1Byb3BzLFxuICApID0+IEF4aW9zUmVxdWVzdENvbmZpZyk7XG4gIGxvdlRyaWdnZXJNb2RlPzogVHJpZ2dlck1vZGU7XG4gIGF4aW9zPzogQXhpb3NJbnN0YW5jZTtcbiAgZmVlZGJhY2s/OiBGZWVkQmFjaztcbiAgZGF0YUtleT86IHN0cmluZztcbiAgdG90YWxLZXk/OiBzdHJpbmc7XG4gIHN0YXR1c0tleT86IHN0cmluZztcbiAgdGxzS2V5Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBTdGF0dXM7XG4gIGxhYmVsTGF5b3V0PzogTGFiZWxMYXlvdXQ7XG4gIHF1ZXJ5QmFyPzogVGFibGVRdWVyeUJhclR5cGUgfCBUYWJsZVF1ZXJ5QmFySG9vaztcbiAgdGFibGVCb3JkZXI/OiBib29sZWFuO1xuICB0YWJsZUhpZ2hMaWdodFJvdz86IGJvb2xlYW47XG4gIHRhYmxlU2VsZWN0ZWRIaWdoTGlnaHRSb3c/OiBib29sZWFuO1xuICB0YWJsZVJvd0hlaWdodD86ICdhdXRvJyB8IG51bWJlcjtcbiAgdGFibGVDb2x1bW5SZXNpemFibGU/OiBib29sZWFuO1xuICB0YWJsZUV4cGFuZEljb24/OiAocHJvcHM6IGV4cGFuZEljb25Qcm9wcykgPT4gUmVhY3ROb2RlO1xuICB0YWJsZVNwaW5Qcm9wcz86IFNwaW5Qcm9wcztcbiAgdGFibGVCdXR0b25Qcm9wcz86IEJ1dHRvblByb3BzO1xuICB0YWJsZUNvbW1hbmRQcm9wcz86IEJ1dHRvblByb3BzO1xuICB0YWJsZURlZmF1bHRSZW5kZXJlcj86IFJlbmRlcmVyO1xuICB0YWJsZUFsd2F5c1Nob3dSb3dCb3g/OiBib29sZWFuO1xuICB0YWJsZVVzZU1vdXNlQmF0Y2hDaG9vc2U/OiBib29sZWFuO1xuICB0YWJsZUVkaXRvck5leHRLZXlFbnRlckRvd24/OiBib29sZWFuO1xuICBwYWdpbmF0aW9uPzogVGFibGVQYWdpbmF0aW9uQ29uZmlnIHwgZmFsc2U7XG4gIG1vZGFsU2VjdGlvbkJvcmRlcj86IGJvb2xlYW47XG4gIG1vZGFsT2tGaXJzdD86IGJvb2xlYW47XG4gIG1vZGFsQnV0dG9uUHJvcHM/OiBCdXR0b25Qcm9wcztcbiAgYnV0dG9uRnVuY1R5cGU/OiBGdW5jVHlwZTtcbiAgYnV0dG9uQ29sb3I/OiBCdXR0b25Db2xvcjtcbiAgcmVuZGVyRW1wdHk/OiByZW5kZXJFbXB0eUhhbmRsZXI7XG4gIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXM/OiBWYWxpZGF0aW9uTWVzc2FnZXM7XG4gIHRyYW5zcG9ydD86IFRyYW5zcG9ydFByb3BzO1xuICBpY29ucz86IHsgW2tleTogc3RyaW5nXTogc3RyaW5nW107IH0gfCBzdHJpbmdbXTtcbiAgZ2VuZXJhdGVQYWdlUXVlcnk/OiAocGFnZVBhcmFtczoge1xuICAgIHBhZ2U/OiBudW1iZXI7XG4gICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgc29ydE5hbWU/OiBzdHJpbmc7XG4gICAgc29ydE9yZGVyPzogc3RyaW5nO1xuICB9KSA9PiBvYmplY3Q7XG4gIGZvcm1hdHRlcj86IEZvcm1hdHRlcjtcbiAgZHJvcGRvd25NYXRjaFNlbGVjdFdpZHRoPzogYm9vbGVhbjtcbiAgdXNlQ29sb24/OiBib29sZWFuO1xuICBleGNsdWRlVXNlQ29sb25UYWdMaXN0Pzogc3RyaW5nW107XG4gIGxvdlRhYmxlUHJvcHM/OiBUYWJsZVByb3BzO1xuICB0ZXh0RmllbGRBdXRvQ29tcGxldGU/OiAnb24nIHwgJ29mZic7XG4gIHJlc3VsdFN0YXR1c1JlbmRlcmVyPzogb2JqZWN0O1xuICB0YWJsZURyYWdDb2x1bW5BbGlnbj86IERyYWdDb2x1bW5BbGlnbjtcbiAgdGFibGVEcmFnQ29sdW1uPzogYm9vbGVhbjtcbiAgdGFibGVEcmFnUm93PzogYm9vbGVhbjtcbiAgbnVtYmVyRmllbGROb25TdHJpY3RTdGVwPzogYm9vbGVhbixcbn07XG5cbmV4cG9ydCB0eXBlIENvbmZpZ0tleXMgPSBrZXlvZiBDb25maWc7XG5cbmNvbnN0IGRlZmF1bHRSZW5kZXJFbXB0eTogcmVuZGVyRW1wdHlIYW5kbGVyID0gKGNvbXBvbmVudE5hbWU/OiBzdHJpbmcpOiBSZWFjdE5vZGUgPT4ge1xuICBzd2l0Y2ggKGNvbXBvbmVudE5hbWUpIHtcbiAgICBjYXNlICdUYWJsZSc6XG4gICAgICByZXR1cm4gJGwoJ1RhYmxlJywgJ2VtcHR5X2RhdGEnKTtcbiAgICBjYXNlICdTZWxlY3QnOlxuICAgICAgcmV0dXJuICRsKCdTZWxlY3QnLCAnbm9fbWF0Y2hpbmdfcmVzdWx0cycpO1xuICAgIGRlZmF1bHQ6XG4gIH1cbn07XG5cbmNvbnN0IGRlZmF1bHRCdXR0b25Qcm9wcyA9IHsgY29sb3I6IEJ1dHRvbkNvbG9yLnByaW1hcnksIGZ1bmNUeXBlOiBGdW5jVHlwZS5mbGF0IH07XG5cbmNvbnN0IGRlZmF1bHRTcGluUHJvcHMgPSB7IHNpemU6IFNpemUuZGVmYXVsdCwgd3JhcHBlckNsYXNzTmFtZTogJycgfTtcblxuY29uc3QgZ2xvYmFsQ29uZmlnOiBPYnNlcnZhYmxlTWFwPENvbmZpZ0tleXMsIENvbmZpZ1tDb25maWdLZXlzXT4gPSBvYnNlcnZhYmxlLm1hcDxcbiAgQ29uZmlnS2V5cyxcbiAgQ29uZmlnW0NvbmZpZ0tleXNdXG4+KFtcbiAgWydwcmVmaXhDbHMnLCAnYzduJ10sXG4gIFsncHJvUHJlZml4Q2xzJywgJ2M3bi1wcm8nXSxcbiAgWydpY29uZm9udFByZWZpeCcsICdpY29uJ10sXG4gIFsncmlwcGxlJywgdHJ1ZV0sXG4gIFsnY29sbGFwc2VFeHBhbmRJY29uUG9zaXRpb24nLCAnbGVmdCddLFxuICBbJ2NvbGxhcHNlVHJpZ2dlcicsICdoZWFkZXInXSxcbiAgWydsb29rdXBDYWNoZScsIHsgbWF4QWdlOiAxMDAwICogNjAgKiAxMCwgbWF4OiAxMDAgfV0sXG4gIFsnbG9va3VwVXJsJywgY29kZSA9PiBgL2NvbW1vbi9jb2RlLyR7Y29kZX0vYF0sXG4gIFsnbG9va3VwQXhpb3NNZXRob2QnLCAncG9zdCddLFxuICAvLyBbXG4gIC8vICAgJ2xvb2t1cEJhdGNoQXhpb3NDb25maWcnLFxuICAvLyAgIGNvZGVzID0+ICh7XG4gIC8vICAgICB1cmw6ICcvY29tbW9uL2JhdGNoJyxcbiAgLy8gICAgIHBhcmFtczogY29kZXMucmVkdWNlKChvYmosIGNvZGUpID0+IHtcbiAgLy8gICAgICAgb2JqW2NvZGVdID0gY29kZTtcbiAgLy8gICAgICAgcmV0dXJuIG9iajtcbiAgLy8gICAgIH0sIHt9KSxcbiAgLy8gICB9KSxcbiAgLy8gXSxcbiAgWydsb3ZEZWZpbmVVcmwnLCBjb2RlID0+IGAvc3lzL2xvdi9sb3ZfZGVmaW5lP2NvZGU9JHtjb2RlfWBdLFxuICBbJ2xvdlF1ZXJ5VXJsJywgY29kZSA9PiBgL2NvbW1vbi9sb3YvZGF0YXNldC8ke2NvZGV9YF0sXG4gIFsnbG92VHJpZ2dlck1vZGUnLCBUcmlnZ2VyTW9kZS5pY29uXSxcbiAgWydkYXRhS2V5JywgJ3Jvd3MnXSxcbiAgWyd0b3RhbEtleScsICd0b3RhbCddLFxuICBbJ3N0YXR1c0tleScsICdfX3N0YXR1cyddLFxuICBbJ3Rsc0tleScsICdfX3RscyddLFxuICBbXG4gICAgJ3N0YXR1cycsXG4gICAgeyBbUmVjb3JkU3RhdHVzLmFkZF06ICdhZGQnLCBbUmVjb3JkU3RhdHVzLnVwZGF0ZV06ICd1cGRhdGUnLCBbUmVjb3JkU3RhdHVzLmRlbGV0ZV06ICdkZWxldGUnIH0sXG4gIF0sXG4gIFsnbGFiZWxMYXlvdXQnLCBMYWJlbExheW91dC5ob3Jpem9udGFsXSxcbiAgWydxdWVyeUJhcicsIFRhYmxlUXVlcnlCYXJUeXBlLm5vcm1hbF0sXG4gIFsndGFibGVCb3JkZXInLCB0cnVlXSxcbiAgWyd0YWJsZUhpZ2hMaWdodFJvdycsIHRydWVdLFxuICBbJ3RhYmxlU2VsZWN0ZWRIaWdoTGlnaHRSb3cnLCBmYWxzZV0sXG4gIFsndGFibGVSb3dIZWlnaHQnLCAzMF0sXG4gIFsndGFibGVEZWZhdWx0UmVuZGVyZXInLCAnJ10sXG4gIFsndGFibGVDb2x1bW5SZXNpemFibGUnLCB0cnVlXSxcbiAgWyd0YWJsZVNwaW5Qcm9wcycsIGRlZmF1bHRTcGluUHJvcHNdLFxuICBbJ3RhYmxlQnV0dG9uUHJvcHMnLCBkZWZhdWx0QnV0dG9uUHJvcHNdLFxuICBbJ3RhYmxlQ29tbWFuZFByb3BzJywgZGVmYXVsdEJ1dHRvblByb3BzXSxcbiAgWyd0YWJsZUFsd2F5c1Nob3dSb3dCb3gnLCBmYWxzZV0sXG4gIFsndGFibGVVc2VNb3VzZUJhdGNoQ2hvb3NlJywgZmFsc2VdLFxuICBbJ3RhYmxlRWRpdG9yTmV4dEtleUVudGVyRG93bicsIHRydWVdLFxuICBbJ21vZGFsU2VjdGlvbkJvcmRlcicsIHRydWVdLFxuICBbJ21vZGFsT2tGaXJzdCcsIHRydWVdLFxuICBbJ2J1dHRvbkNvbG9yJywgQnV0dG9uQ29sb3IuZGVmYXVsdF0sXG4gIFsnYnV0dG9uRnVuY1R5cGUnLCBGdW5jVHlwZS5yYWlzZWRdLFxuICBbJ2ZlZWRiYWNrJywgZGVmYXVsdEZlZWRiYWNrXSxcbiAgWydyZW5kZXJFbXB0eScsIGRlZmF1bHRSZW5kZXJFbXB0eV0sXG4gIFsnaWNvbnMnLCBjYXRlZ29yaWVzXSxcbiAgW1xuICAgICdmb3JtYXR0ZXInLFxuICAgIHtcbiAgICAgIGpzb25EYXRlOiAnWVlZWS1NTS1ERCBISDptbTpzcycsXG4gICAgICBkYXRlOiAnWVlZWS1NTS1ERCcsXG4gICAgICBkYXRlVGltZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgdGltZTogJ0hIOm1tOnNzJyxcbiAgICAgIHllYXI6ICdZWVlZJyxcbiAgICAgIG1vbnRoOiAnWVlZWS1NTScsXG4gICAgICB3ZWVrOiAnR0dHRy1XbycsXG4gICAgfSxcbiAgXSxcbiAgWydkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGgnLCB0cnVlXSxcbiAgWyd1c2VDb2xvbicsIGZhbHNlXSxcbiAgWydleGNsdWRlVXNlQ29sb25UYWdMaXN0JywgZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZ10sXG4gIFsnbG92VGFibGVQcm9wcycsIHt9XSxcbiAgWyd0ZXh0RmllbGRBdXRvQ29tcGxldGUnLCB1bmRlZmluZWRdLFxuICBbJ3RhYmxlRHJhZ1JvdycsIGZhbHNlXSxcbiAgWyd0YWJsZURyYWdDb2x1bW4nLCBmYWxzZV0sXG4gIFsnbnVtYmVyRmllbGROb25TdHJpY3RTdGVwJywgZmFsc2VdLFxuXSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWcoa2V5OiBDb25maWdLZXlzKTogYW55IHtcbiAgLy8gRklYTUU6IG9ic2VydmFibGUubWFw5oqK5p6E5bu6bWFw5pe25Lyg5YWl55qEa2V557G75Z6L5ZKMdmFsdWXnsbvlnovliIbliKvlgZrkuoZ1bmlvbu+8jFxuICAvLyDkuKLlpLHkuobkuIDkuIDlr7nlupTnmoTmmKDlsITlhbPns7vvvIzlr7zoh7Tlh73mlbDosIPnlKjogIXml6Dms5Xkvb/nlKh1bmlvbuWQjueahOi/lOWbnuWAvOexu+Wei++8jOWboOatpOmcgOimgeaMh+WumuacrOWHveaVsOi/lOWbnuWAvOS4umFueVxuICByZXR1cm4gZ2xvYmFsQ29uZmlnLmdldChrZXkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJlZml4Q2xzKHN1ZmZpeENsczogc3RyaW5nLCBjdXN0b21pemVQcmVmaXhDbHM/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgcmV0dXJuIGN1c3RvbWl6ZVByZWZpeENscztcbiAgfVxuICByZXR1cm4gYCR7Z2V0Q29uZmlnKCdwcmVmaXhDbHMnKX0tJHtzdWZmaXhDbHN9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb1ByZWZpeENscyhzdWZmaXhDbHM6IHN0cmluZywgY3VzdG9taXplUHJlZml4Q2xzPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgIHJldHVybiBjdXN0b21pemVQcmVmaXhDbHM7XG4gIH1cbiAgcmV0dXJuIGAke2dldENvbmZpZygncHJvUHJlZml4Q2xzJyl9LSR7c3VmZml4Q2xzfWA7XG59XG5cbmNvbnN0IG1lcmdlUHJvcHMgPSBbJ3RyYW5zcG9ydCcsICdmZWVkYmFjaycsICdmb3JtYXR0ZXInXTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlndXJlKGNvbmZpZzogQ29uZmlnKSB7XG4gIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleTogQ29uZmlnS2V5cykgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcbiAgICAgIGlmIChtZXJnZVByb3BzLmluY2x1ZGVzKGtleSkgJiYgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgIGdsb2JhbENvbmZpZy5zZXQoa2V5LCB7XG4gICAgICAgICAgLi4udG9KUzxhbnk+KGdsb2JhbENvbmZpZy5nZXQoa2V5KSksXG4gICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2xvYmFsQ29uZmlnLnNldChrZXksIGNvbmZpZ1trZXldKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG4iXX0=