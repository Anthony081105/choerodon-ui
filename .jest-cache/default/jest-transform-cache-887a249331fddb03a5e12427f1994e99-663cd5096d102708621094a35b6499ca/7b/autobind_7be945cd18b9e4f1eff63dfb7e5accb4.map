{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/_util/autobind.tsx"],"names":[],"mappings":";;;;;;;;;AAAA;;AACA;;AAEA,IAAI,QAAJ;;AAEA,SAAS,IAAT,CAAc,EAAd,EAAkB,OAAlB,EAAyB;AACvB,MAAI,EAAE,CAAC,IAAP,EAAa;AACX,WAAO,EAAE,CAAC,IAAH,CAAQ,OAAR,CAAP;AACD;;AACD,SAAO,SAAS,YAAT,GAA6B;AAAA,sCAAJ,IAAI;AAAJ,MAAA,IAAI;AAAA;;AAClC,WAAO,EAAE,CAAC,KAAH,CAAS,OAAT,EAAkB,IAAlB,CAAP;AACD,GAFD;AAGD;;AAED,SAAS,aAAT,CAAuB,GAAvB,EAA4B,EAA5B,EAA8B;AAC5B,MAAI,OAAO,mBAAP,KAAmB,WAAvB,EAAoC;AAClC,UAAM,IAAI,KAAJ,8BACkB,EAAE,CAAC,IADrB,iEACgF,EAAE,CAAC,IADnF,6EAAN;AAID;;AAED,MAAI,CAAC,QAAL,EAAe;AACb,IAAA,QAAQ,GAAG,IAAI,mBAAJ,EAAX;AACD;;AAED,MAAI,QAAQ,CAAC,GAAT,CAAa,GAAb,MAAsB,KAA1B,EAAiC;AAC/B,IAAA,QAAQ,CAAC,GAAT,CAAa,GAAb,EAAkB,IAAI,mBAAJ,EAAlB;AACD;;AAED,MAAM,UAAU,GAAG,QAAQ,CAAC,GAAT,CAAa,GAAb,CAAnB;;AAEA,MAAI,UAAU,CAAC,GAAX,CAAe,EAAf,MAAuB,KAA3B,EAAkC;AAChC,IAAA,UAAU,CAAC,GAAX,CAAe,EAAf,EAAmB,IAAI,CAAC,EAAD,EAAK,GAAL,CAAvB;AACD;;AAED,SAAO,UAAU,CAAC,GAAX,CAAe,EAAf,CAAP;AACD;AAED;;;;;;;;;;;AASc,SAAU,QAAV,CAAmB,MAAnB,EAA2B,GAA3B,EAAgC,UAAhC,EAA0C;AAAA,MAC9C,WAD8C,GAC9B,MAD8B,CAC9C,WAD8C;AAAA,MAEvC,EAFuC,GAEN,UAFM,CAE9C,KAF8C;AAAA,MAEnC,YAFmC,GAEN,UAFM,CAEnC,YAFmC;AAAA,MAErB,UAFqB,GAEN,UAFM,CAErB,UAFqB;AAGtD,SAAO;AACL,IAAA,YAAY,EAAZ,YADK;AAEL,IAAA,UAAU,EAAV,UAFK;AAGL,IAAA,GAHK,iBAGF;AACD;AACA;AACA;AACA,UAAI,SAAS,MAAb,EAAqB;AACnB,eAAO,EAAP;AACD,OANA,CAQD;AACA;AACA;AACA;;;AACA,UACE,KAAK,WAAL,KAAqB,WAArB,IACA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,WAA5B,KAA4C,WAF9C,EAGE;AACA,eAAO,EAAP;AACD,OAjBA,CAmBD;;;AACA,UAAI,KAAK,WAAL,KAAqB,WAArB,IAAoC,GAAG,IAAI,KAAK,WAAL,CAAiB,SAAhE,EAA2E;AACzE,eAAO,aAAa,CAAC,IAAD,EAAO,EAAP,CAApB;AACD;;AAED,UAAM,OAAO,GAAG,IAAI,CAAC,EAAD,EAAK,IAAL,CAApB;AACA,MAAA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,GAA5B,EAAiC;AAC/B,QAAA,YAAY,EAAE,IADiB;AAE/B,QAAA,QAAQ,EAAE,IAFqB;AAG/B;AACA,QAAA,UAAU,EAAE,KAJmB;AAK/B,QAAA,KAAK,EAAE;AALwB,OAAjC;AAOA,aAAO,OAAP;AACD,KApCI;AAqCL,IAAA,GAAG,EAAE,qCAAoB,GAApB;AArCA,GAAP;AAuCD","sourcesContent":["import WeakMap from 'core-js/library/fn/weak-map';\nimport createDefaultSetter from './createDefaultSetter';\n\nlet mapStore;\n\nfunction bind(fn, context) {\n  if (fn.bind) {\n    return fn.bind(context);\n  }\n  return function __autobind__(...args) {\n    return fn.apply(context, args);\n  };\n}\n\nfunction getBoundSuper(obj, fn) {\n  if (typeof WeakMap === 'undefined') {\n    throw new Error(\n      `Using @autobind on ${fn.name}() requires WeakMap support due to its use of super.${fn.name}()\n      See https://github.com/jayphelps/core-decorators.js/issues/20`,\n    );\n  }\n\n  if (!mapStore) {\n    mapStore = new WeakMap();\n  }\n\n  if (mapStore.has(obj) === false) {\n    mapStore.set(obj, new WeakMap());\n  }\n\n  const superStore = mapStore.get(obj);\n\n  if (superStore.has(fn) === false) {\n    superStore.set(fn, bind(fn, obj));\n  }\n\n  return superStore.get(fn);\n}\n\n/**\n * 绑定方法的this指向当前对象实例.\n *\n * @private\n * @param {Function} target 方法对象\n * @param {string} key 方法名.\n * @param {Object} descriptor 方法描述对象.\n * @returns {Object} 方法描述对象.\n */\nexport default function autobind(target, key, descriptor) {\n  const { constructor } = target;\n  const { value: fn, configurable, enumerable } = descriptor;\n  return {\n    configurable,\n    enumerable,\n    get() {\n      // Class.prototype.key lookup\n      // Someone accesses the property directly on the prototype on which it is\n      // actually defined on, i.e. Class.prototype.hasOwnProperty(key)\n      if (this === target) {\n        return fn;\n      }\n\n      // Class.prototype.key lookup\n      // Someone accesses the property directly on a prototype but it was found\n      // up the chain, not defined directly on it\n      // i.e. Class.prototype.hasOwnProperty(key) == false && key in Class.prototype\n      if (\n        this.constructor !== constructor &&\n        Object.getPrototypeOf(this).constructor === constructor\n      ) {\n        return fn;\n      }\n\n      // Autobound method calling super.sameMethod() which is also autobound and so on.\n      if (this.constructor !== constructor && key in this.constructor.prototype) {\n        return getBoundSuper(this, fn);\n      }\n\n      const boundFn = bind(fn, this);\n      Object.defineProperty(this, key, {\n        configurable: true,\n        writable: true,\n        // NOT enumerable when it's a bound method\n        enumerable: false,\n        value: boundFn,\n      });\n      return boundFn;\n    },\n    set: createDefaultSetter(key),\n  };\n}\n"]}