{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/performance-table/utils/requestAnimationTimeout.ts"],"names":[],"mappings":";;;;;;;;;AAAA;;AACA;;AAEO,IAAM,sBAAsB,GAAG,SAAzB,sBAAyB,CAAC,KAAD;AAAA,SACpC,8CAA6B,KAAK,CAAC,EAAnC,CADoC;AAAA,CAA/B;AAGP;;;;;;;;;;AAMO,IAAM,uBAAuB,GAAG,SAA1B,uBAA0B,CACrC,QADqC,EAErC,KAFqC,EAGT;AAC5B,MAAI,KAAJ,CAD4B,CAE5B;;AACA,EAAA,OAAO,CAAC,OAAR,GAAkB,IAAlB,CAAuB,YAAK;AAC1B,IAAA,KAAK,GAAG,IAAI,CAAC,GAAL,EAAR;AACD,GAFD;AAIA,MAAI,KAAK,GAAG,IAAZ;;AAEA,MAAM,OAAO,GAAG,SAAV,OAAU,GAAK;AACnB,QAAI,IAAI,CAAC,GAAL,KAAa,KAAb,IAAsB,KAA1B,EAAiC;AAC/B,MAAA,QAAQ,CAAC,IAAT,CAAc,IAAd;AACD,KAFD,MAEO;AACL;AACA,MAAA,KAAK,CAAC,EAAN,GAAW,+CAA8B,OAA9B,CAAX;AACD;AACF,GAPD,CAT4B,CAkB5B;;;AACA,EAAA,KAAK,GAAG;AACN,IAAA,EAAE,EAAE,+CAA8B,OAA9B;AADE,GAAR,CAnB4B,CAuB5B;;AACA,SAAO,KAAP;AACD,CA5BM","sourcesContent":["import requestAnimationFramePolyfill from 'dom-lib/lib/animation/requestAnimationFramePolyfill';\nimport cancelAnimationFramePolyfill from 'dom-lib/lib/animation/cancelAnimationFramePolyfill';\n\nexport const cancelAnimationTimeout = (frame: KeyframeAnimationOptions) =>\n  cancelAnimationFramePolyfill(frame.id);\n\n/**\n * Recursively calls requestAnimationFrame until a specified delay has been met or exceeded.\n * When the delay time has been reached the function you're timing out will be called.\n *\n * Credit: Joe Lambert (https://gist.github.com/joelambert/1002116#file-requesttimeout-js)\n */\nexport const requestAnimationTimeout = (\n  callback: Function,\n  delay: number,\n): KeyframeAnimationOptions => {\n  let start;\n  // wait for end of processing current event handler, because event handler may be long\n  Promise.resolve().then(() => {\n    start = Date.now();\n  });\n\n  let frame = null;\n\n  const timeout = () => {\n    if (Date.now() - start >= delay) {\n      callback.call(null);\n    } else {\n      // @ts-ignore\n      frame.id = requestAnimationFramePolyfill(timeout);\n    }\n  };\n\n  // @ts-ignore\n  frame = {\n    id: requestAnimationFramePolyfill(timeout),\n  };\n\n  // @ts-ignore\n  return frame;\n};\n"]}