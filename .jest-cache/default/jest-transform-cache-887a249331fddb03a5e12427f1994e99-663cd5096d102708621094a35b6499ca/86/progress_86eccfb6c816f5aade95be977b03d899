26be5cc40f2808c7eaebe4915335ee92
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _classnames = _interopRequireDefault(require("classnames"));

var _icon = _interopRequireDefault(require("../icon"));

var _progress = require("../rc-components/progress");

var _Loading = _interopRequireDefault(require("./Loading"));

var _configure = require("../configure");

var Progress =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Progress, _Component);

  function Progress() {
    (0, _classCallCheck2["default"])(this, Progress);
    return (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(Progress).apply(this, arguments));
  }

  (0, _createClass2["default"])(Progress, [{
    key: "render",
    value: function render() {
      var _classNames;

      var props = this.props;
      var customizePrefixCls = props.prefixCls,
          className = props.className,
          _props$percent = props.percent,
          percent = _props$percent === void 0 ? 0 : _props$percent,
          status = props.status,
          format = props.format,
          trailColor = props.trailColor,
          size = props.size,
          successPercent = props.successPercent,
          type = props.type,
          strokeWidth = props.strokeWidth,
          width = props.width,
          showInfo = props.showInfo,
          _props$gapDegree = props.gapDegree,
          gapDegree = _props$gapDegree === void 0 ? 0 : _props$gapDegree,
          gapPosition = props.gapPosition,
          restProps = (0, _objectWithoutProperties2["default"])(props, ["prefixCls", "className", "percent", "status", "format", "trailColor", "size", "successPercent", "type", "strokeWidth", "width", "showInfo", "gapDegree", "gapPosition"]);
      var prefixCls = (0, _configure.getPrefixCls)('progress', customizePrefixCls);
      var progressStatus = parseInt(successPercent ? successPercent.toString() : percent.toString(), 10) >= 100 && !('status' in props) ? "success"
      /* success */
      : status || "normal"
      /* normal */
      ;
      var progressInfo;
      var progress;

      var textFormatter = format || function (percentNumber) {
        return "".concat(percentNumber, "%");
      };

      if (showInfo) {
        var text;
        var circleType = type === "circle"
        /* circle */
        || type === "dashboard"
        /* dashboard */
        ;

        if (progressStatus === "exception"
        /* exception */
        ) {
            text = format ? textFormatter(percent) : _react["default"].createElement(_icon["default"], {
              type: circleType ? 'close' : 'cancel'
            });
          } else if (progressStatus === "success"
        /* success */
        ) {
            text = format ? textFormatter(percent) : _react["default"].createElement(_icon["default"], {
              type: circleType ? 'check' : 'check_circle'
            });
          } else {
          text = textFormatter(percent);
        }

        progressInfo = _react["default"].createElement("span", {
          className: "".concat(prefixCls, "-text")
        }, text);
      }

      if (type === "line"
      /* line */
      ) {
          var percentStyle = {
            width: "".concat(percent, "%"),
            height: strokeWidth || (size === "small"
            /* small */
            ? 6 : 8)
          };
          var successPercentStyle = {
            width: "".concat(successPercent, "%"),
            height: strokeWidth || (size === "small"
            /* small */
            ? 6 : 8)
          };
          var successSegment = successPercent !== undefined ? _react["default"].createElement("div", {
            className: "".concat(prefixCls, "-success-bg"),
            style: successPercentStyle
          }) : null;
          progress = _react["default"].createElement("div", null, _react["default"].createElement("div", {
            className: "".concat(prefixCls, "-outer")
          }, _react["default"].createElement("div", {
            className: "".concat(prefixCls, "-inner")
          }, _react["default"].createElement("div", {
            className: "".concat(prefixCls, "-bg"),
            style: percentStyle
          }), successSegment)), progressInfo);
        } else if (type === "circle"
      /* circle */
      || type === "dashboard"
      /* dashboard */
      ) {
          var circleSize = width || 120;
          var circleStyle = {
            width: circleSize,
            height: circleSize,
            fontSize: circleSize * 0.15 + 6
          };
          var circleWidth = strokeWidth || 6;
          var gapPos = gapPosition || type === "dashboard"
          /* dashboard */
          && "bottom"
          /* bottom */
          || "top"
          /* top */
          ;
          var gapDeg = gapDegree || type === "dashboard"
          /* dashboard */
          && 75;
          progress = _react["default"].createElement("div", {
            className: "".concat(prefixCls, "-inner"),
            style: circleStyle
          }, _react["default"].createElement(_progress.Circle, {
            percent: percent,
            strokeWidth: circleWidth,
            trailWidth: circleWidth,
            trailColor: trailColor,
            prefixCls: prefixCls,
            gapDegree: gapDeg,
            gapPosition: gapPos
          }), progressInfo);
        } else if (type === "loading"
      /* loading */
      ) {
          progress = _react["default"].createElement("div", {
            className: "".concat(prefixCls, "-inner")
          }, _react["default"].createElement(_Loading["default"], null));
        }

      var classString = (0, _classnames["default"])(prefixCls, (_classNames = {}, (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-").concat(type === "dashboard"
      /* dashboard */
      && "circle"
      /* circle */
      || type), true), (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-status-").concat(progressStatus), true), (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-show-info"), showInfo), (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-").concat(size), size), _classNames), className);
      return _react["default"].createElement("div", (0, _extends2["default"])({}, restProps, {
        className: classString
      }), progress);
    }
  }]);
  return Progress;
}(_react.Component);

exports["default"] = Progress;
Progress.displayName = 'Progress';
Progress.defaultProps = {
  type: "line"
  /* line */
  ,
  percent: 0,
  showInfo: true,
  trailColor: '#f3f3f3',
  size: "default"
  /* default */

};
Progress.propTypes = {
  status: _propTypes["default"].oneOf(["normal"
  /* normal */
  , "exception"
  /* exception */
  , "active"
  /* active */
  , "success"
  /* success */
  ]),
  type: _propTypes["default"].oneOf(["line"
  /* line */
  , "circle"
  /* circle */
  , "dashboard"
  /* dashboard */
  , "loading"
  /* loading */
  ]),
  showInfo: _propTypes["default"].bool,
  percent: _propTypes["default"].number,
  width: _propTypes["default"].number,
  strokeWidth: _propTypes["default"].number,
  trailColor: _propTypes["default"].string,
  format: _propTypes["default"].func,
  gapDegree: _propTypes["default"].number,
  size: _propTypes["default"].oneOf(["default"
  /* default */
  , "small"
  /* small */
  , "large"
  /* large */
  ])
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2dyZXNzL3Byb2dyZXNzLmpzIl0sIm5hbWVzIjpbIlByb2dyZXNzIiwiQ29tcG9uZW50IiwicHJvcHMiLCJjdXN0b21pemVQcmVmaXhDbHMiLCJjbGFzc05hbWUiLCJwZXJjZW50Iiwic3RhdHVzIiwiZm9ybWF0IiwidHJhaWxDb2xvciIsInNpemUiLCJzdWNjZXNzUGVyY2VudCIsInR5cGUiLCJzdHJva2VXaWR0aCIsIndpZHRoIiwic2hvd0luZm8iLCJnYXBEZWdyZWUiLCJnYXBQb3NpdGlvbiIsInJlc3RQcm9wcyIsInByZWZpeENscyIsInByb2dyZXNzU3RhdHVzIiwidGV4dEZvcm1hdHRlciIsImNpcmNsZVR5cGUiLCJ0ZXh0IiwiSWNvbiIsInByb2dyZXNzSW5mbyIsInBlcmNlbnRTdHlsZSIsImhlaWdodCIsInN1Y2Nlc3NQZXJjZW50U3R5bGUiLCJzdWNjZXNzU2VnbWVudCIsInN0eWxlIiwicHJvZ3Jlc3MiLCJSZWFjdCIsImNpcmNsZVNpemUiLCJjaXJjbGVTdHlsZSIsImZvbnRTaXplIiwiY2lyY2xlV2lkdGgiLCJnYXBQb3MiLCJnYXBEZWciLCJDaXJjbGUiLCJ0cmFpbFdpZHRoIiwiTG9hZGluZyIsImNsYXNzU3RyaW5nIiwiUHJvcFR5cGVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLE1BQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFdBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLEtBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFNBQUEsR0FBQSxPQUFBLENBQUEsMkJBQUEsQ0FBQTs7QUFDQSxJQUFBLFFBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztJQUNxQkEsUTs7Ozs7Ozs7Ozs7OzZCQUNSO0FBQUEsVUFBQSxXQUFBOztBQUNMLFVBQU1FLEtBQUssR0FBRyxLQUFkLEtBQUE7QUFESyxVQUVjQyxrQkFGZCxHQUU2TEQsS0FGN0wsQ0FBQSxTQUFBO0FBQUEsVUFFa0NFLFNBRmxDLEdBRTZMRixLQUY3TCxDQUFBLFNBQUE7QUFBQSxVQUFBLGNBQUEsR0FFNkxBLEtBRjdMLENBQUEsT0FBQTtBQUFBLFVBRTZDRyxPQUY3QyxHQUFBLGNBQUEsS0FBQSxLQUFBLENBQUEsR0FBQSxDQUFBLEdBQUEsY0FBQTtBQUFBLFVBRTBEQyxNQUYxRCxHQUU2TEosS0FGN0wsQ0FBQSxNQUFBO0FBQUEsVUFFa0VLLE1BRmxFLEdBRTZMTCxLQUY3TCxDQUFBLE1BQUE7QUFBQSxVQUUwRU0sVUFGMUUsR0FFNkxOLEtBRjdMLENBQUEsVUFBQTtBQUFBLFVBRXNGTyxJQUZ0RixHQUU2TFAsS0FGN0wsQ0FBQSxJQUFBO0FBQUEsVUFFNEZRLGNBRjVGLEdBRTZMUixLQUY3TCxDQUFBLGNBQUE7QUFBQSxVQUU0R1MsSUFGNUcsR0FFNkxULEtBRjdMLENBQUEsSUFBQTtBQUFBLFVBRWtIVSxXQUZsSCxHQUU2TFYsS0FGN0wsQ0FBQSxXQUFBO0FBQUEsVUFFK0hXLEtBRi9ILEdBRTZMWCxLQUY3TCxDQUFBLEtBQUE7QUFBQSxVQUVzSVksUUFGdEksR0FFNkxaLEtBRjdMLENBQUEsUUFBQTtBQUFBLFVBQUEsZ0JBQUEsR0FFNkxBLEtBRjdMLENBQUEsU0FBQTtBQUFBLFVBRWdKYSxTQUZoSixHQUFBLGdCQUFBLEtBQUEsS0FBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLGdCQUFBO0FBQUEsVUFFK0pDLFdBRi9KLEdBRTZMZCxLQUY3TCxDQUFBLFdBQUE7QUFBQSxVQUUrS2UsU0FGL0ssR0FBQSxDQUFBLEdBQUEseUJBQUEsQ0FBQSxTQUFBLENBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxXQUFBLEVBQUEsV0FBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLFlBQUEsRUFBQSxNQUFBLEVBQUEsZ0JBQUEsRUFBQSxNQUFBLEVBQUEsYUFBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsV0FBQSxFQUFBLGFBQUEsQ0FBQSxDQUFBO0FBR0wsVUFBTUMsU0FBUyxHQUFHLENBQUEsR0FBQSxVQUFBLENBQUEsWUFBQSxFQUFBLFVBQUEsRUFBbEIsa0JBQWtCLENBQWxCO0FBQ0EsVUFBTUMsY0FBYyxHQUFHLFFBQVEsQ0FBQ1QsY0FBYyxHQUFHQSxjQUFjLENBQWpCLFFBQUdBLEVBQUgsR0FBK0JMLE9BQU8sQ0FBckQsUUFBOENBLEVBQTlDLEVBQVIsRUFBUSxDQUFSLElBQUEsR0FBQSxJQUNuQixFQUFFLFlBRGlCLEtBQ25CLENBRG1CLEdBRWpCO0FBQVU7QUFGTyxRQUdqQkMsTUFBTSxJQUFJO0FBQVM7QUFIekI7QUFJQSxVQUFBLFlBQUE7QUFDQSxVQUFBLFFBQUE7O0FBQ0EsVUFBTWMsYUFBYSxHQUFHYixNQUFNLElBQUssVUFBQSxhQUFBLEVBQWE7QUFBQSxlQUFBLEdBQUEsTUFBQSxDQUFBLGFBQUEsRUFBQSxHQUFBLENBQUE7QUFBOUMsT0FBQTs7QUFDQSxVQUFBLFFBQUEsRUFBYztBQUNWLFlBQUEsSUFBQTtBQUNBLFlBQU1jLFVBQVUsR0FBRyxJQUFJLEtBQUs7QUFBUztBQUFsQixXQUFrQ1YsSUFBSSxLQUFLO0FBQVk7QUFBMUU7O0FBQ0EsWUFBSVEsY0FBYyxLQUFLO0FBQVk7QUFBbkMsVUFBb0Q7QUFDaERHLFlBQUFBLElBQUksR0FBR2YsTUFBTSxHQUFHYSxhQUFhLENBQWhCLE9BQWdCLENBQWhCLEdBQTRCLE1BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxhQUFBLENBQW9CRyxLQUFBQSxDQUFwQixTQUFvQkEsQ0FBcEIsRUFBMEI7QUFBRVosY0FBQUEsSUFBSSxFQUFFVSxVQUFVLEdBQUEsT0FBQSxHQUFhO0FBQS9CLGFBQTFCLENBQXpDQztBQURKLFdBQUEsTUFHSyxJQUFJSCxjQUFjLEtBQUs7QUFBVTtBQUFqQyxVQUFnRDtBQUNqREcsWUFBQUEsSUFBSSxHQUFHZixNQUFNLEdBQUlhLGFBQWEsQ0FBakIsT0FBaUIsQ0FBakIsR0FBK0IsTUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBb0JHLEtBQUFBLENBQXBCLFNBQW9CQSxDQUFwQixFQUEwQjtBQUFFWixjQUFBQSxJQUFJLEVBQUVVLFVBQVUsR0FBQSxPQUFBLEdBQWE7QUFBL0IsYUFBMUIsQ0FBNUNDO0FBREMsV0FBQSxNQUdBO0FBQ0RBLFVBQUFBLElBQUksR0FBR0YsYUFBYSxDQUFwQkUsT0FBb0IsQ0FBcEJBO0FBQ0g7O0FBQ0RFLFFBQUFBLFlBQVksR0FBRyxNQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsYUFBQSxDQUFBLE1BQUEsRUFBNEI7QUFBRXBCLFVBQUFBLFNBQVMsRUFBQSxHQUFBLE1BQUEsQ0FBQSxTQUFBLEVBQUEsT0FBQTtBQUFYLFNBQTVCLEVBQWZvQixJQUFlLENBQWZBO0FBQ0g7O0FBQ0QsVUFBSWIsSUFBSSxLQUFLO0FBQU87QUFBcEIsUUFBZ0M7QUFDNUIsY0FBTWMsWUFBWSxHQUFHO0FBQ2pCWixZQUFBQSxLQUFLLEVBQUEsR0FBQSxNQUFBLENBQUEsT0FBQSxFQURZLEdBQ1osQ0FEWTtBQUVqQmEsWUFBQUEsTUFBTSxFQUFFZCxXQUFXLEtBQUssSUFBSSxLQUFLO0FBQVE7QUFBakIsY0FBQSxDQUFBLEdBQUwsQ0FBQTtBQUZGLFdBQXJCO0FBSUEsY0FBTWUsbUJBQW1CLEdBQUc7QUFDeEJkLFlBQUFBLEtBQUssRUFBQSxHQUFBLE1BQUEsQ0FBQSxjQUFBLEVBRG1CLEdBQ25CLENBRG1CO0FBRXhCYSxZQUFBQSxNQUFNLEVBQUVkLFdBQVcsS0FBSyxJQUFJLEtBQUs7QUFBUTtBQUFqQixjQUFBLENBQUEsR0FBTCxDQUFBO0FBRkssV0FBNUI7QUFJQSxjQUFNZ0IsY0FBYyxHQUFHLGNBQWMsS0FBZCxTQUFBLEdBQWdDLE1BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsS0FBQSxFQUEyQjtBQUFFeEIsWUFBQUEsU0FBUyxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBWCxhQUFXLENBQVg7QUFBd0N5QixZQUFBQSxLQUFLLEVBQUVGO0FBQS9DLFdBQTNCLENBQWhDLEdBQXZCLElBQUE7QUFDQUcsVUFBQUEsUUFBUSxHQUFJQyxNQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQUFBQSxhQUFBQSxDQUFBQSxLQUFBQSxFQUFBQSxJQUFBQSxFQUNSLE1BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsS0FBQSxFQUEyQjtBQUFFM0IsWUFBQUEsU0FBUyxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxRQUFBO0FBQVgsV0FBM0IsRUFDSSxNQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsYUFBQSxDQUFBLEtBQUEsRUFBMkI7QUFBRUEsWUFBQUEsU0FBUyxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxRQUFBO0FBQVgsV0FBM0IsRUFDSSxNQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsYUFBQSxDQUFBLEtBQUEsRUFBMkI7QUFBRUEsWUFBQUEsU0FBUyxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBWCxLQUFXLENBQVg7QUFBZ0N5QixZQUFBQSxLQUFLLEVBQUVKO0FBQXZDLFdBQTNCLENBREosRUFGSU0sY0FFSixDQURKLENBRFFBLEVBQVpELFlBQVlDLENBQVpEO0FBVkosU0FBQSxNQWlCSyxJQUFJLElBQUksS0FBSztBQUFTO0FBQWxCLFNBQWtDbkIsSUFBSSxLQUFLO0FBQVk7QUFBM0QsUUFBNEU7QUFDN0UsY0FBTXFCLFVBQVUsR0FBR25CLEtBQUssSUFBeEIsR0FBQTtBQUNBLGNBQU1vQixXQUFXLEdBQUc7QUFDaEJwQixZQUFBQSxLQUFLLEVBRFcsVUFBQTtBQUVoQmEsWUFBQUEsTUFBTSxFQUZVLFVBQUE7QUFHaEJRLFlBQUFBLFFBQVEsRUFBRUYsVUFBVSxHQUFWQSxJQUFBQSxHQUFvQjtBQUhkLFdBQXBCO0FBS0EsY0FBTUcsV0FBVyxHQUFHdkIsV0FBVyxJQUEvQixDQUFBO0FBQ0EsY0FBTXdCLE1BQU0sR0FBRyxXQUFXLElBQ3JCLElBQUksS0FBSztBQUFZO0FBQXJCLGFBQXdDO0FBQVM7QUFEdkMsYUFFWDtBQUFNO0FBRlY7QUFHQSxjQUFNQyxNQUFNLEdBQUd0QixTQUFTLElBQUssSUFBSSxLQUFLO0FBQVk7QUFBckIsYUFBN0IsRUFBQTtBQUNBZSxVQUFBQSxRQUFRLEdBQUksTUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxLQUFBLEVBQTJCO0FBQUUxQixZQUFBQSxTQUFTLEVBQUEsR0FBQSxNQUFBLENBQUEsU0FBQSxFQUFYLFFBQVcsQ0FBWDtBQUFtQ3lCLFlBQUFBLEtBQUssRUFBRUk7QUFBMUMsV0FBM0IsRUFDUixNQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsYUFBQSxDQUFvQkssU0FBQUEsQ0FBcEIsTUFBQSxFQUE0QjtBQUFFakMsWUFBQUEsT0FBTyxFQUFULE9BQUE7QUFBb0JPLFlBQUFBLFdBQVcsRUFBL0IsV0FBQTtBQUE4QzJCLFlBQUFBLFVBQVUsRUFBeEQsV0FBQTtBQUF1RS9CLFlBQUFBLFVBQVUsRUFBakYsVUFBQTtBQUErRlUsWUFBQUEsU0FBUyxFQUF4RyxTQUFBO0FBQXFISCxZQUFBQSxTQUFTLEVBQTlILE1BQUE7QUFBd0lDLFlBQUFBLFdBQVcsRUFBRW9CO0FBQXJKLFdBQTVCLENBRFEsRUFBWk4sWUFBWSxDQUFaQTtBQVpDLFNBQUEsTUFnQkEsSUFBSW5CLElBQUksS0FBSztBQUFVO0FBQXZCLFFBQXNDO0FBQ3ZDbUIsVUFBQUEsUUFBUSxHQUFJLE1BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxhQUFBLENBQUEsS0FBQSxFQUEyQjtBQUFFMUIsWUFBQUEsU0FBUyxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxRQUFBO0FBQVgsV0FBM0IsRUFDUjJCLE1BQUFBLENBQUFBLFNBQUFBLENBQUFBLENBQUFBLGFBQUFBLENBQW9CUyxRQUFBQSxDQUFwQlQsU0FBb0JTLENBQXBCVCxFQURKRCxJQUNJQyxDQURRLENBQVpEO0FBRUg7O0FBQ0QsVUFBTVcsV0FBVyxHQUFHLENBQUEsR0FBQSxXQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsU0FBQSxHQUFBLFdBQUEsR0FBQSxFQUFBLEVBQUEsQ0FBQSxHQUFBLGdCQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsV0FBQSxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxDQUNFLElBQUksS0FBSztBQUFZO0FBQXJCLFNBQXdDO0FBQVM7QUFBakQsU0FERixJQUFBLENBQUEsRUFBQSxJQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsZ0JBQUEsQ0FBQSxTQUFBLENBQUEsRUFBQSxXQUFBLEVBQUEsR0FBQSxNQUFBLENBQUEsU0FBQSxFQUFBLFVBQUEsRUFBQSxNQUFBLENBQUEsY0FBQSxDQUFBLEVBQUEsSUFBQSxDQUFBLEVBQUEsQ0FBQSxHQUFBLGdCQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsV0FBQSxFQUFBLEdBQUEsTUFBQSxDQUFBLFNBQUEsRUFBQSxZQUFBLENBQUEsRUFBQSxRQUFBLENBQUEsRUFBQSxDQUFBLEdBQUEsZ0JBQUEsQ0FBQSxTQUFBLENBQUEsRUFBQSxXQUFBLEVBQUEsR0FBQSxNQUFBLENBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLENBQUEsSUFBQSxDQUFBLEVBQUEsSUFBQSxDQUFBLEVBQUEsV0FBQSxHQUFwQixTQUFvQixDQUFwQjtBQU1BLGFBQVEsTUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxLQUFBLEVBQTJCLENBQUEsR0FBQSxTQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsRUFBNkI7QUFBRXJDLFFBQUFBLFNBQVMsRUFBRXFDO0FBQWIsT0FBN0IsQ0FBM0IsRUFBUixRQUFRLENBQVI7QUFDSDs7O0VBdEVpQ3hDLE1BQUFBLENBQUFBLFM7OztBQXdFdENELFFBQVEsQ0FBUkEsV0FBQUEsR0FBQUEsVUFBQUE7QUFDQUEsUUFBUSxDQUFSQSxZQUFBQSxHQUF3QjtBQUNwQlcsRUFBQUEsSUFBSSxFQUFFO0FBQU87QUFETztBQUVwQk4sRUFBQUEsT0FBTyxFQUZhLENBQUE7QUFHcEJTLEVBQUFBLFFBQVEsRUFIWSxJQUFBO0FBSXBCTixFQUFBQSxVQUFVLEVBSlUsU0FBQTtBQUtwQkMsRUFBQUEsSUFBSSxFQUFFO0FBQVU7O0FBTEksQ0FBeEJUO0FBT0FBLFFBQVEsQ0FBUkEsU0FBQUEsR0FBcUI7QUFDakJNLEVBQUFBLE1BQU0sRUFBRSxVQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsS0FBQSxDQUFnQixDQUNwQjtBQUFTO0FBRFcsSUFFcEI7QUFBWTtBQUZRLElBR3BCO0FBQVM7QUFIVyxJQUlwQjtBQUFVO0FBSlUsR0FBaEIsQ0FEUztBQU9qQkssRUFBQUEsSUFBSSxFQUFFLFVBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxLQUFBLENBQWdCLENBQ2xCO0FBQU87QUFEVyxJQUVsQjtBQUFTO0FBRlMsSUFHbEI7QUFBWTtBQUhNLElBSWxCO0FBQVU7QUFKUSxHQUFoQixDQVBXO0FBYWpCRyxFQUFBQSxRQUFRLEVBQUU0QixVQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQWJPLElBQUE7QUFjakJyQyxFQUFBQSxPQUFPLEVBQUVxQyxVQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQWRRLE1BQUE7QUFlakI3QixFQUFBQSxLQUFLLEVBQUU2QixVQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQWZVLE1BQUE7QUFnQmpCOUIsRUFBQUEsV0FBVyxFQUFFOEIsVUFBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsQ0FoQkksTUFBQTtBQWlCakJsQyxFQUFBQSxVQUFVLEVBQUVrQyxVQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQWpCSyxNQUFBO0FBa0JqQm5DLEVBQUFBLE1BQU0sRUFBRW1DLFVBQUFBLENBQUFBLFNBQUFBLENBQUFBLENBbEJTLElBQUE7QUFtQmpCM0IsRUFBQUEsU0FBUyxFQUFFMkIsVUFBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsQ0FuQk0sTUFBQTtBQW9CakJqQyxFQUFBQSxJQUFJLEVBQUUsVUFBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLEtBQUEsQ0FBZ0IsQ0FBQztBQUFVO0FBQVgsSUFBMEI7QUFBUTtBQUFsQyxJQUErQztBQUFRO0FBQXZELEdBQWhCO0FBcEJXLENBQXJCVCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgSWNvbiBmcm9tICcuLi9pY29uJztcbmltcG9ydCB7IENpcmNsZSB9IGZyb20gJy4uL3JjLWNvbXBvbmVudHMvcHJvZ3Jlc3MnO1xuaW1wb3J0IExvYWRpbmcgZnJvbSAnLi9Mb2FkaW5nJztcbmltcG9ydCB7IGdldFByZWZpeENscyB9IGZyb20gJy4uL2NvbmZpZ3VyZSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9ncmVzcyBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgIGNvbnN0IHsgcHJlZml4Q2xzOiBjdXN0b21pemVQcmVmaXhDbHMsIGNsYXNzTmFtZSwgcGVyY2VudCA9IDAsIHN0YXR1cywgZm9ybWF0LCB0cmFpbENvbG9yLCBzaXplLCBzdWNjZXNzUGVyY2VudCwgdHlwZSwgc3Ryb2tlV2lkdGgsIHdpZHRoLCBzaG93SW5mbywgZ2FwRGVncmVlID0gMCwgZ2FwUG9zaXRpb24sIC4uLnJlc3RQcm9wcyB9ID0gcHJvcHM7XG4gICAgICAgIGNvbnN0IHByZWZpeENscyA9IGdldFByZWZpeENscygncHJvZ3Jlc3MnLCBjdXN0b21pemVQcmVmaXhDbHMpO1xuICAgICAgICBjb25zdCBwcm9ncmVzc1N0YXR1cyA9IHBhcnNlSW50KHN1Y2Nlc3NQZXJjZW50ID8gc3VjY2Vzc1BlcmNlbnQudG9TdHJpbmcoKSA6IHBlcmNlbnQudG9TdHJpbmcoKSwgMTApID49IDEwMCAmJlxuICAgICAgICAgICAgISgnc3RhdHVzJyBpbiBwcm9wcylcbiAgICAgICAgICAgID8gXCJzdWNjZXNzXCIgLyogc3VjY2VzcyAqL1xuICAgICAgICAgICAgOiBzdGF0dXMgfHwgXCJub3JtYWxcIiAvKiBub3JtYWwgKi87XG4gICAgICAgIGxldCBwcm9ncmVzc0luZm87XG4gICAgICAgIGxldCBwcm9ncmVzcztcbiAgICAgICAgY29uc3QgdGV4dEZvcm1hdHRlciA9IGZvcm1hdCB8fCAocGVyY2VudE51bWJlciA9PiBgJHtwZXJjZW50TnVtYmVyfSVgKTtcbiAgICAgICAgaWYgKHNob3dJbmZvKSB7XG4gICAgICAgICAgICBsZXQgdGV4dDtcbiAgICAgICAgICAgIGNvbnN0IGNpcmNsZVR5cGUgPSB0eXBlID09PSBcImNpcmNsZVwiIC8qIGNpcmNsZSAqLyB8fCB0eXBlID09PSBcImRhc2hib2FyZFwiIC8qIGRhc2hib2FyZCAqLztcbiAgICAgICAgICAgIGlmIChwcm9ncmVzc1N0YXR1cyA9PT0gXCJleGNlcHRpb25cIiAvKiBleGNlcHRpb24gKi8pIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gZm9ybWF0ID8gdGV4dEZvcm1hdHRlcihwZXJjZW50KSA6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwgeyB0eXBlOiBjaXJjbGVUeXBlID8gJ2Nsb3NlJyA6ICdjYW5jZWwnIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocHJvZ3Jlc3NTdGF0dXMgPT09IFwic3VjY2Vzc1wiIC8qIHN1Y2Nlc3MgKi8pIHtcbiAgICAgICAgICAgICAgICB0ZXh0ID0gZm9ybWF0ID8gKHRleHRGb3JtYXR0ZXIocGVyY2VudCkpIDogKFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbiwgeyB0eXBlOiBjaXJjbGVUeXBlID8gJ2NoZWNrJyA6ICdjaGVja19jaXJjbGUnIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0Rm9ybWF0dGVyKHBlcmNlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvZ3Jlc3NJbmZvID0gUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgeyBjbGFzc05hbWU6IGAke3ByZWZpeENsc30tdGV4dGAgfSwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFwibGluZVwiIC8qIGxpbmUgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogYCR7cGVyY2VudH0lYCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHN0cm9rZVdpZHRoIHx8IChzaXplID09PSBcInNtYWxsXCIgLyogc21hbGwgKi8gPyA2IDogOCksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc1BlcmNlbnRTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogYCR7c3VjY2Vzc1BlcmNlbnR9JWAsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBzdHJva2VXaWR0aCB8fCAoc2l6ZSA9PT0gXCJzbWFsbFwiIC8qIHNtYWxsICovID8gNiA6IDgpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3NTZWdtZW50ID0gc3VjY2Vzc1BlcmNlbnQgIT09IHVuZGVmaW5lZCA/IChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgJHtwcmVmaXhDbHN9LXN1Y2Nlc3MtYmdgLCBzdHlsZTogc3VjY2Vzc1BlcmNlbnRTdHlsZSB9KSkgOiBudWxsO1xuICAgICAgICAgICAgcHJvZ3Jlc3MgPSAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGAke3ByZWZpeENsc30tb3V0ZXJgIH0sXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IGAke3ByZWZpeENsc30taW5uZXJgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgJHtwcmVmaXhDbHN9LWJnYCwgc3R5bGU6IHBlcmNlbnRTdHlsZSB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NTZWdtZW50KSksXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NJbmZvKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjaXJjbGVcIiAvKiBjaXJjbGUgKi8gfHwgdHlwZSA9PT0gXCJkYXNoYm9hcmRcIiAvKiBkYXNoYm9hcmQgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IGNpcmNsZVNpemUgPSB3aWR0aCB8fCAxMjA7XG4gICAgICAgICAgICBjb25zdCBjaXJjbGVTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogY2lyY2xlU2l6ZSxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNpcmNsZVNpemUsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6IGNpcmNsZVNpemUgKiAwLjE1ICsgNixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjaXJjbGVXaWR0aCA9IHN0cm9rZVdpZHRoIHx8IDY7XG4gICAgICAgICAgICBjb25zdCBnYXBQb3MgPSBnYXBQb3NpdGlvbiB8fFxuICAgICAgICAgICAgICAgICh0eXBlID09PSBcImRhc2hib2FyZFwiIC8qIGRhc2hib2FyZCAqLyAmJiBcImJvdHRvbVwiIC8qIGJvdHRvbSAqLykgfHxcbiAgICAgICAgICAgICAgICBcInRvcFwiIC8qIHRvcCAqLztcbiAgICAgICAgICAgIGNvbnN0IGdhcERlZyA9IGdhcERlZ3JlZSB8fCAodHlwZSA9PT0gXCJkYXNoYm9hcmRcIiAvKiBkYXNoYm9hcmQgKi8gJiYgNzUpO1xuICAgICAgICAgICAgcHJvZ3Jlc3MgPSAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogYCR7cHJlZml4Q2xzfS1pbm5lcmAsIHN0eWxlOiBjaXJjbGVTdHlsZSB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ2lyY2xlLCB7IHBlcmNlbnQ6IHBlcmNlbnQsIHN0cm9rZVdpZHRoOiBjaXJjbGVXaWR0aCwgdHJhaWxXaWR0aDogY2lyY2xlV2lkdGgsIHRyYWlsQ29sb3I6IHRyYWlsQ29sb3IsIHByZWZpeENsczogcHJlZml4Q2xzLCBnYXBEZWdyZWU6IGdhcERlZywgZ2FwUG9zaXRpb246IGdhcFBvcyB9KSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0luZm8pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImxvYWRpbmdcIiAvKiBsb2FkaW5nICovKSB7XG4gICAgICAgICAgICBwcm9ncmVzcyA9IChSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBgJHtwcmVmaXhDbHN9LWlubmVyYCB9LFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9hZGluZywgbnVsbCkpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGFzc1N0cmluZyA9IGNsYXNzTmFtZXMocHJlZml4Q2xzLCB7XG4gICAgICAgICAgICBbYCR7cHJlZml4Q2xzfS0keyh0eXBlID09PSBcImRhc2hib2FyZFwiIC8qIGRhc2hib2FyZCAqLyAmJiBcImNpcmNsZVwiIC8qIGNpcmNsZSAqLykgfHwgdHlwZX1gXTogdHJ1ZSxcbiAgICAgICAgICAgIFtgJHtwcmVmaXhDbHN9LXN0YXR1cy0ke3Byb2dyZXNzU3RhdHVzfWBdOiB0cnVlLFxuICAgICAgICAgICAgW2Ake3ByZWZpeENsc30tc2hvdy1pbmZvYF06IHNob3dJbmZvLFxuICAgICAgICAgICAgW2Ake3ByZWZpeENsc30tJHtzaXplfWBdOiBzaXplLFxuICAgICAgICB9LCBjbGFzc05hbWUpO1xuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgT2JqZWN0LmFzc2lnbih7fSwgcmVzdFByb3BzLCB7IGNsYXNzTmFtZTogY2xhc3NTdHJpbmcgfSksIHByb2dyZXNzKSk7XG4gICAgfVxufVxuUHJvZ3Jlc3MuZGlzcGxheU5hbWUgPSAnUHJvZ3Jlc3MnO1xuUHJvZ3Jlc3MuZGVmYXVsdFByb3BzID0ge1xuICAgIHR5cGU6IFwibGluZVwiIC8qIGxpbmUgKi8sXG4gICAgcGVyY2VudDogMCxcbiAgICBzaG93SW5mbzogdHJ1ZSxcbiAgICB0cmFpbENvbG9yOiAnI2YzZjNmMycsXG4gICAgc2l6ZTogXCJkZWZhdWx0XCIgLyogZGVmYXVsdCAqLyxcbn07XG5Qcm9ncmVzcy5wcm9wVHlwZXMgPSB7XG4gICAgc3RhdHVzOiBQcm9wVHlwZXMub25lT2YoW1xuICAgICAgICBcIm5vcm1hbFwiIC8qIG5vcm1hbCAqLyxcbiAgICAgICAgXCJleGNlcHRpb25cIiAvKiBleGNlcHRpb24gKi8sXG4gICAgICAgIFwiYWN0aXZlXCIgLyogYWN0aXZlICovLFxuICAgICAgICBcInN1Y2Nlc3NcIiAvKiBzdWNjZXNzICovLFxuICAgIF0pLFxuICAgIHR5cGU6IFByb3BUeXBlcy5vbmVPZihbXG4gICAgICAgIFwibGluZVwiIC8qIGxpbmUgKi8sXG4gICAgICAgIFwiY2lyY2xlXCIgLyogY2lyY2xlICovLFxuICAgICAgICBcImRhc2hib2FyZFwiIC8qIGRhc2hib2FyZCAqLyxcbiAgICAgICAgXCJsb2FkaW5nXCIgLyogbG9hZGluZyAqLyxcbiAgICBdKSxcbiAgICBzaG93SW5mbzogUHJvcFR5cGVzLmJvb2wsXG4gICAgcGVyY2VudDogUHJvcFR5cGVzLm51bWJlcixcbiAgICB3aWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBzdHJva2VXaWR0aDogUHJvcFR5cGVzLm51bWJlcixcbiAgICB0cmFpbENvbG9yOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGZvcm1hdDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZ2FwRGVncmVlOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHNpemU6IFByb3BUeXBlcy5vbmVPZihbXCJkZWZhdWx0XCIgLyogZGVmYXVsdCAqLywgXCJzbWFsbFwiIC8qIHNtYWxsICovLCBcImxhcmdlXCIgLyogbGFyZ2UgKi9dKSxcbn07XG4iXX0=