{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/code-area/lint/yaml.tsx"],"names":[],"mappings":";;;;AAEA;;AAEA,IAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AACjC,EAAA,OAAO,CAAC,gCAAD,CAAP;;AACA,EAAA,OAAO,CAAC,4BAAD,CAAP;;AACA,MAAM,UAAU,GAAG,OAAO,CAAC,YAAD,CAA1B;;AAEA,EAAA,UAAU,CAAC,cAAX,CAA0B,MAA1B,EAAkC,MAAlC,EAA0C,UAAS,IAAT,EAAa;AACrD,QAAM,KAAK,GAAiB,EAA5B;;AACA,QAAI;AACF,yBAAO,OAAP,CAAe,IAAf;AACD,KAFD,CAEE,OAAO,CAAP,EAAU;AAAA,UACI,GADJ,GACqB,CADrB,CACF,IADE;AAAA,UACS,OADT,GACqB,CADrB,CACS,OADT,EAEV;AACA;AACA;AACA;AACA;;AACA,UAAM,IAAI,GAAG,GAAG,GAAG,UAAU,CAAC,GAAX,CAAe,GAAG,CAAC,IAAnB,EAAyB,GAAG,CAAC,MAA7B,CAAH,GAA0C,UAAU,CAAC,GAAX,CAAe,CAAf,EAAkB,CAAlB,CAA1D;AACA,UAAM,EAAE,GAAG,IAAX;AACA,MAAA,KAAK,CAAC,IAAN,CAAW;AACT,QAAA,IAAI,EAAJ,IADS;AAET,QAAA,EAAE,EAAF,EAFS;AAGT,QAAA,OAAO,EAAP;AAHS,OAAX;AAKD;;AACD,WAAO,KAAP;AACD,GApBD;AAqBD","sourcesContent":["/* eslint-disable global-require */\nimport { Annotation } from 'codemirror';\nimport jsyaml from 'js-yaml';\n\nif (typeof window !== 'undefined') {\n  require('codemirror/addon/lint/lint.css');\n  require('codemirror/addon/lint/lint');\n  const CodeMirror = require('codemirror');\n\n  CodeMirror.registerHelper('lint', 'yaml', function(text) {\n    const found: Annotation[] = [];\n    try {\n      jsyaml.loadAll(text);\n    } catch (e) {\n      const { mark: loc, message } = e;\n      // js-yaml YAMLException doesn't always provide an accurate lineno\n      // e.g., when there are multiple yaml docs\n      // ---\n      // ---\n      // foo:bar\n      const from = loc ? CodeMirror.Pos(loc.line, loc.column) : CodeMirror.Pos(0, 0);\n      const to = from;\n      found.push({\n        from,\n        to,\n        message,\n      });\n    }\n    return found;\n  });\n}\n"]}