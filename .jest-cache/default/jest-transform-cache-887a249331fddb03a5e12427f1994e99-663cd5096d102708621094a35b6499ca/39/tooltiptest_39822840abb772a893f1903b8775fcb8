3447086e8db586d4c7f4b64aa6e79774
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _ = _interopRequireDefault(require(".."));

var _button = _interopRequireDefault(require("../../button"));

describe('Tooltip', function () {
  it('check `onVisibleChange` arguments', function () {
    var onVisibleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      title: "",
      mouseEnterDelay: 0,
      mouseLeaveDelay: 0,
      onVisibleChange: onVisibleChange
    }, _react["default"].createElement("div", {
      id: "hello"
    }, "Hello world!"))); // `title` is empty.

    var div = wrapper.find('#hello').at(0);
    div.simulate('mouseenter');
    expect(onVisibleChange).not.toHaveBeenCalled();
    expect(wrapper.instance().tooltip.props.visible).toBe(false);
    div.simulate('mouseleave');
    expect(onVisibleChange).not.toHaveBeenCalled();
    expect(wrapper.instance().tooltip.props.visible).toBe(false); // update `title` value.

    wrapper.setProps({
      title: 'Have a nice day!'
    });
    wrapper.find('#hello').simulate('mouseenter');
    expect(onVisibleChange).toHaveBeenLastCalledWith(true);
    expect(wrapper.instance().tooltip.props.visible).toBe(true);
    wrapper.find('#hello').simulate('mouseleave');
    expect(onVisibleChange).toHaveBeenLastCalledWith(false);
    expect(wrapper.instance().tooltip.props.visible).toBe(false); // add `visible` props.

    wrapper.setProps({
      visible: false
    });
    wrapper.find('#hello').simulate('mouseenter');
    expect(onVisibleChange).toHaveBeenLastCalledWith(true);
    var lastCount = onVisibleChange.mock.calls.length;
    expect(wrapper.instance().tooltip.props.visible).toBe(false); // always trigger onVisibleChange

    wrapper.simulate('mouseleave');
    expect(onVisibleChange.mock.calls.length).toBe(lastCount); // no change with lastCount

    expect(wrapper.instance().tooltip.props.visible).toBe(false);
  });
  it('should hide when mouse leave native disabled button', function () {
    var onVisibleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      title: "xxxxx",
      mouseEnterDelay: 0,
      mouseLeaveDelay: 0,
      onVisibleChange: onVisibleChange
    }, _react["default"].createElement("button", {
      type: "button",
      disabled: true
    }, "Hello world!")));
    expect(wrapper.find('span')).toHaveLength(1);
    var button = wrapper.find('span').at(0);
    button.simulate('mouseenter');
    expect(onVisibleChange).toHaveBeenCalledWith(true);
    expect(wrapper.instance().tooltip.props.visible).toBe(true);
    button.simulate('mouseleave');
    expect(onVisibleChange).toHaveBeenCalledWith(false);
    expect(wrapper.instance().tooltip.props.visible).toBe(false);
  });
  it('should hide when mouse leave choerodon-ui disabled Button', function () {
    var onVisibleChange = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      title: "xxxxx",
      mouseEnterDelay: 0,
      mouseLeaveDelay: 0,
      onVisibleChange: onVisibleChange
    }, _react["default"].createElement(_button["default"], {
      disabled: true
    }, "Hello world!")));
    expect(wrapper.render()).toMatchSnapshot();
    var button = wrapper.find('span').at(0);
    button.simulate('mouseenter');
    expect(onVisibleChange).toHaveBeenCalledWith(true);
    expect(wrapper.instance().tooltip.props.visible).toBe(true);
    button.simulate('mouseleave');
    expect(onVisibleChange).toHaveBeenCalledWith(false);
    expect(wrapper.instance().tooltip.props.visible).toBe(false);
  });
  it('should render disabled Button style properly', function () {
    var wrapper1 = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      title: "xxxxx"
    }, _react["default"].createElement(_button["default"], {
      disabled: true
    }, "Hello world!")));
    var wrapper2 = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      title: "xxxxx"
    }, _react["default"].createElement(_button["default"], {
      disabled: true,
      style: {
        display: 'block'
      }
    }, "Hello world!")));
    expect(wrapper1.find('span').first().getDOMNode().style.display).toBe('inline-block');
    expect(wrapper2.find('span').first().getDOMNode().style.display).toBe('block');
  });
  it('should not wrap span when trigger is not hover', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      title: "xxxxx",
      trigger: "click",
      mouseEnterDelay: 0,
      mouseLeaveDelay: 0
    }, _react["default"].createElement("button", {
      type: "button",
      disabled: true
    }, "Hello world!")));
    expect(wrapper.find('span')).toHaveLength(0);
  });
  it('should works for arrowPointAtCenter', function () {
    var arrowWidth = 5;
    var horizontalArrowShift = 16;
    var triggerWidth = 200;

    var suit = function suit() {
      var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
        title: "xxxxx",
        trigger: "click",
        mouseEnterDelay: 0,
        mouseLeaveDelay: 0,
        placement: "bottomLeft"
      }, _react["default"].createElement("button", {
        type: "button",
        style: {
          width: triggerWidth
        }
      }, "Hello world!")));
      wrapper.find('button').at(0).simulate('click');
      var popupLeftDefault = parseInt(wrapper.instance().getPopupDomNode().style.left, 10);
      var wrapper2 = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
        title: "xxxxx",
        trigger: "click",
        mouseEnterDelay: 0,
        mouseLeaveDelay: 0,
        placement: "bottomLeft",
        arrowPointAtCenter: true
      }, _react["default"].createElement("button", {
        type: "button",
        style: {
          width: triggerWidth
        }
      }, "Hello world!")));
      wrapper2.find('button').at(0).simulate('click');
      var popupLeftArrowPointAtCenter = parseInt(wrapper2.instance().getPopupDomNode().style.left, 10);
      expect(popupLeftArrowPointAtCenter - popupLeftDefault).toBe(triggerWidth / 2 - horizontalArrowShift - arrowWidth);
    };

    jest.dontMock('rc-trigger', suit);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvb2x0aXAudGVzdC5qcyJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0Iiwib25WaXNpYmxlQ2hhbmdlIiwiamVzdCIsImZuIiwid3JhcHBlciIsImRpdiIsImZpbmQiLCJhdCIsInNpbXVsYXRlIiwiZXhwZWN0Iiwibm90IiwidG9IYXZlQmVlbkNhbGxlZCIsImluc3RhbmNlIiwidG9vbHRpcCIsInByb3BzIiwidmlzaWJsZSIsInRvQmUiLCJzZXRQcm9wcyIsInRpdGxlIiwidG9IYXZlQmVlbkxhc3RDYWxsZWRXaXRoIiwibGFzdENvdW50IiwibW9jayIsImNhbGxzIiwibGVuZ3RoIiwidG9IYXZlTGVuZ3RoIiwiYnV0dG9uIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJyZW5kZXIiLCJ0b01hdGNoU25hcHNob3QiLCJ3cmFwcGVyMSIsIndyYXBwZXIyIiwiZGlzcGxheSIsImZpcnN0IiwiZ2V0RE9NTm9kZSIsInN0eWxlIiwiYXJyb3dXaWR0aCIsImhvcml6b250YWxBcnJvd1NoaWZ0IiwidHJpZ2dlcldpZHRoIiwic3VpdCIsIndpZHRoIiwicG9wdXBMZWZ0RGVmYXVsdCIsInBhcnNlSW50IiwiZ2V0UG9wdXBEb21Ob2RlIiwibGVmdCIsInBvcHVwTGVmdEFycm93UG9pbnRBdENlbnRlciIsImRvbnRNb2NrIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUFBLFFBQVEsQ0FBQyxTQUFELEVBQVksWUFBTTtBQUN4QkMsRUFBQUEsRUFBRSxDQUFDLG1DQUFELEVBQXNDLFlBQU07QUFDNUMsUUFBTUMsZUFBZSxHQUFHQyxJQUFJLENBQUNDLEVBQUwsRUFBeEI7QUFFQSxRQUFNQyxPQUFPLEdBQUcsbUJBQ2QsZ0NBQUMsWUFBRDtBQUFTLE1BQUEsS0FBSyxFQUFDLEVBQWY7QUFBa0IsTUFBQSxlQUFlLEVBQUUsQ0FBbkM7QUFBc0MsTUFBQSxlQUFlLEVBQUUsQ0FBdkQ7QUFBMEQsTUFBQSxlQUFlLEVBQUVIO0FBQTNFLE9B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UCxNQUFBQSxRQUFRLENBQ0x4QixJQURILENBQ1EsUUFEUixFQUVHQyxFQUZILENBRU0sQ0FGTixFQUdHQyxRQUhILENBR1ksT0FIWjtBQUlBLFVBQU1vQywyQkFBMkIsR0FBR0gsUUFBUSxDQUMxQ1gsUUFBUSxDQUFDbEIsUUFBVCxHQUFvQjhCLGVBQXBCLEdBQXNDUixLQUF0QyxDQUE0Q1MsSUFERixFQUUxQyxFQUYwQyxDQUE1QztBQUlBbEMsTUFBQUEsTUFBTSxDQUFDbUMsMkJBQTJCLEdBQUdKLGdCQUEvQixDQUFOLENBQXVEeEIsSUFBdkQsQ0FDRXFCLFlBQVksR0FBRyxDQUFmLEdBQW1CRCxvQkFBbkIsR0FBMENELFVBRDVDO0FBR0QsS0E3Q0Q7O0FBK0NBakMsSUFBQUEsSUFBSSxDQUFDMkMsUUFBTCxDQUFjLFlBQWQsRUFBNEJQLElBQTVCO0FBQ0QsR0FyREMsQ0FBRjtBQXNERCxDQTFMTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IG1vdW50IH0gZnJvbSAnZW56eW1lJztcbmltcG9ydCBUb29sdGlwIGZyb20gJy4uJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vYnV0dG9uJztcblxuZGVzY3JpYmUoJ1Rvb2x0aXAnLCAoKSA9PiB7XG4gIGl0KCdjaGVjayBgb25WaXNpYmxlQ2hhbmdlYCBhcmd1bWVudHMnLCAoKSA9PiB7XG4gICAgY29uc3Qgb25WaXNpYmxlQ2hhbmdlID0gamVzdC5mbigpO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPFRvb2x0aXAgdGl0bGU9XCJcIiBtb3VzZUVudGVyRGVsYXk9ezB9IG1vdXNlTGVhdmVEZWxheT17MH0gb25WaXNpYmxlQ2hhbmdlPXtvblZpc2libGVDaGFuZ2V9PlxuICAgICAgICA8ZGl2IGlkPVwiaGVsbG9cIj5IZWxsbyB3b3JsZCE8L2Rpdj5cbiAgICAgIDwvVG9vbHRpcD4sXG4gICAgKTtcblxuICAgIC8vIGB0aXRsZWAgaXMgZW1wdHkuXG4gICAgY29uc3QgZGl2ID0gd3JhcHBlci5maW5kKCcjaGVsbG8nKS5hdCgwKTtcbiAgICBkaXYuc2ltdWxhdGUoJ21vdXNlZW50ZXInKTtcbiAgICBleHBlY3Qob25WaXNpYmxlQ2hhbmdlKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmluc3RhbmNlKCkudG9vbHRpcC5wcm9wcy52aXNpYmxlKS50b0JlKGZhbHNlKTtcblxuICAgIGRpdi5zaW11bGF0ZSgnbW91c2VsZWF2ZScpO1xuICAgIGV4cGVjdChvblZpc2libGVDaGFuZ2UpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KHdyYXBwZXIuaW5zdGFuY2UoKS50b29sdGlwLnByb3BzLnZpc2libGUpLnRvQmUoZmFsc2UpO1xuXG4gICAgLy8gdXBkYXRlIGB0aXRsZWAgdmFsdWUuXG4gICAgd3JhcHBlci5zZXRQcm9wcyh7IHRpdGxlOiAnSGF2ZSBhIG5pY2UgZGF5IScgfSk7XG4gICAgd3JhcHBlci5maW5kKCcjaGVsbG8nKS5zaW11bGF0ZSgnbW91c2VlbnRlcicpO1xuICAgIGV4cGVjdChvblZpc2libGVDaGFuZ2UpLnRvSGF2ZUJlZW5MYXN0Q2FsbGVkV2l0aCh0cnVlKTtcbiAgICBleHBlY3Qod3JhcHBlci5pbnN0YW5jZSgpLnRvb2x0aXAucHJvcHMudmlzaWJsZSkudG9CZSh0cnVlKTtcblxuICAgIHdyYXBwZXIuZmluZCgnI2hlbGxvJykuc2ltdWxhdGUoJ21vdXNlbGVhdmUnKTtcbiAgICBleHBlY3Qob25WaXNpYmxlQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgoZmFsc2UpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmluc3RhbmNlKCkudG9vbHRpcC5wcm9wcy52aXNpYmxlKS50b0JlKGZhbHNlKTtcblxuICAgIC8vIGFkZCBgdmlzaWJsZWAgcHJvcHMuXG4gICAgd3JhcHBlci5zZXRQcm9wcyh7IHZpc2libGU6IGZhbHNlIH0pO1xuICAgIHdyYXBwZXIuZmluZCgnI2hlbGxvJykuc2ltdWxhdGUoJ21vdXNlZW50ZXInKTtcbiAgICBleHBlY3Qob25WaXNpYmxlQ2hhbmdlKS50b0hhdmVCZWVuTGFzdENhbGxlZFdpdGgodHJ1ZSk7XG4gICAgY29uc3QgbGFzdENvdW50ID0gb25WaXNpYmxlQ2hhbmdlLm1vY2suY2FsbHMubGVuZ3RoO1xuICAgIGV4cGVjdCh3cmFwcGVyLmluc3RhbmNlKCkudG9vbHRpcC5wcm9wcy52aXNpYmxlKS50b0JlKGZhbHNlKTtcblxuICAgIC8vIGFsd2F5cyB0cmlnZ2VyIG9uVmlzaWJsZUNoYW5nZVxuICAgIHdyYXBwZXIuc2ltdWxhdGUoJ21vdXNlbGVhdmUnKTtcbiAgICBleHBlY3Qob25WaXNpYmxlQ2hhbmdlLm1vY2suY2FsbHMubGVuZ3RoKS50b0JlKGxhc3RDb3VudCk7IC8vIG5vIGNoYW5nZSB3aXRoIGxhc3RDb3VudFxuICAgIGV4cGVjdCh3cmFwcGVyLmluc3RhbmNlKCkudG9vbHRpcC5wcm9wcy52aXNpYmxlKS50b0JlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoaWRlIHdoZW4gbW91c2UgbGVhdmUgbmF0aXZlIGRpc2FibGVkIGJ1dHRvbicsICgpID0+IHtcbiAgICBjb25zdCBvblZpc2libGVDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPFRvb2x0aXBcbiAgICAgICAgdGl0bGU9XCJ4eHh4eFwiXG4gICAgICAgIG1vdXNlRW50ZXJEZWxheT17MH1cbiAgICAgICAgbW91c2VMZWF2ZURlbGF5PXswfVxuICAgICAgICBvblZpc2libGVDaGFuZ2U9e29uVmlzaWJsZUNoYW5nZX1cbiAgICAgID5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGlzYWJsZWQ+XG4gICAgICAgICAgSGVsbG8gd29ybGQhXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9Ub29sdGlwPixcbiAgICApO1xuXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnc3BhbicpKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgY29uc3QgYnV0dG9uID0gd3JhcHBlci5maW5kKCdzcGFuJykuYXQoMCk7XG4gICAgYnV0dG9uLnNpbXVsYXRlKCdtb3VzZWVudGVyJyk7XG4gICAgZXhwZWN0KG9uVmlzaWJsZUNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgodHJ1ZSk7XG4gICAgZXhwZWN0KHdyYXBwZXIuaW5zdGFuY2UoKS50b29sdGlwLnByb3BzLnZpc2libGUpLnRvQmUodHJ1ZSk7XG5cbiAgICBidXR0b24uc2ltdWxhdGUoJ21vdXNlbGVhdmUnKTtcbiAgICBleHBlY3Qob25WaXNpYmxlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChmYWxzZSk7XG4gICAgZXhwZWN0KHdyYXBwZXIuaW5zdGFuY2UoKS50b29sdGlwLnByb3BzLnZpc2libGUpLnRvQmUoZmFsc2UpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhpZGUgd2hlbiBtb3VzZSBsZWF2ZSBjaG9lcm9kb24tdWkgZGlzYWJsZWQgQnV0dG9uJywgKCkgPT4ge1xuICAgIGNvbnN0IG9uVmlzaWJsZUNoYW5nZSA9IGplc3QuZm4oKTtcbiAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoXG4gICAgICA8VG9vbHRpcFxuICAgICAgICB0aXRsZT1cInh4eHh4XCJcbiAgICAgICAgbW91c2VFbnRlckRlbGF5PXswfVxuICAgICAgICBtb3VzZUxlYXZlRGVsYXk9ezB9XG4gICAgICAgIG9uVmlzaWJsZUNoYW5nZT17b25WaXNpYmxlQ2hhbmdlfVxuICAgICAgPlxuICAgICAgICA8QnV0dG9uIGRpc2FibGVkPkhlbGxvIHdvcmxkITwvQnV0dG9uPlxuICAgICAgPC9Ub29sdGlwPixcbiAgICApO1xuXG4gICAgZXhwZWN0KHdyYXBwZXIucmVuZGVyKCkpLnRvTWF0Y2hTbmFwc2hvdCgpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IHdyYXBwZXIuZmluZCgnc3BhbicpLmF0KDApO1xuICAgIGJ1dHRvbi5zaW11bGF0ZSgnbW91c2VlbnRlcicpO1xuICAgIGV4cGVjdChvblZpc2libGVDaGFuZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHRydWUpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmluc3RhbmNlKCkudG9vbHRpcC5wcm9wcy52aXNpYmxlKS50b0JlKHRydWUpO1xuXG4gICAgYnV0dG9uLnNpbXVsYXRlKCdtb3VzZWxlYXZlJyk7XG4gICAgZXhwZWN0KG9uVmlzaWJsZUNoYW5nZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZmFsc2UpO1xuICAgIGV4cGVjdCh3cmFwcGVyLmluc3RhbmNlKCkudG9vbHRpcC5wcm9wcy52aXNpYmxlKS50b0JlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgZGlzYWJsZWQgQnV0dG9uIHN0eWxlIHByb3Blcmx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIxID0gbW91bnQoXG4gICAgICA8VG9vbHRpcCB0aXRsZT1cInh4eHh4XCI+XG4gICAgICAgIDxCdXR0b24gZGlzYWJsZWQ+SGVsbG8gd29ybGQhPC9CdXR0b24+XG4gICAgICA8L1Rvb2x0aXA+LFxuICAgICk7XG4gICAgY29uc3Qgd3JhcHBlcjIgPSBtb3VudChcbiAgICAgIDxUb29sdGlwIHRpdGxlPVwieHh4eHhcIj5cbiAgICAgICAgPEJ1dHRvbiBkaXNhYmxlZCBzdHlsZT17eyBkaXNwbGF5OiAnYmxvY2snIH19PlxuICAgICAgICAgIEhlbGxvIHdvcmxkIVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvVG9vbHRpcD4sXG4gICAgKTtcbiAgICBleHBlY3QoXG4gICAgICB3cmFwcGVyMVxuICAgICAgICAuZmluZCgnc3BhbicpXG4gICAgICAgIC5maXJzdCgpXG4gICAgICAgIC5nZXRET01Ob2RlKCkuc3R5bGUuZGlzcGxheSxcbiAgICApLnRvQmUoJ2lubGluZS1ibG9jaycpO1xuICAgIGV4cGVjdChcbiAgICAgIHdyYXBwZXIyXG4gICAgICAgIC5maW5kKCdzcGFuJylcbiAgICAgICAgLmZpcnN0KClcbiAgICAgICAgLmdldERPTU5vZGUoKS5zdHlsZS5kaXNwbGF5LFxuICAgICkudG9CZSgnYmxvY2snKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3Qgd3JhcCBzcGFuIHdoZW4gdHJpZ2dlciBpcyBub3QgaG92ZXInLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPFRvb2x0aXAgdGl0bGU9XCJ4eHh4eFwiIHRyaWdnZXI9XCJjbGlja1wiIG1vdXNlRW50ZXJEZWxheT17MH0gbW91c2VMZWF2ZURlbGF5PXswfT5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgZGlzYWJsZWQ+XG4gICAgICAgICAgSGVsbG8gd29ybGQhXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9Ub29sdGlwPixcbiAgICApO1xuXG4gICAgZXhwZWN0KHdyYXBwZXIuZmluZCgnc3BhbicpKS50b0hhdmVMZW5ndGgoMCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgd29ya3MgZm9yIGFycm93UG9pbnRBdENlbnRlcicsICgpID0+IHtcbiAgICBjb25zdCBhcnJvd1dpZHRoID0gNTtcbiAgICBjb25zdCBob3Jpem9udGFsQXJyb3dTaGlmdCA9IDE2O1xuICAgIGNvbnN0IHRyaWdnZXJXaWR0aCA9IDIwMDtcblxuICAgIGNvbnN0IHN1aXQgPSAoKSA9PiB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoXG4gICAgICAgIDxUb29sdGlwXG4gICAgICAgICAgdGl0bGU9XCJ4eHh4eFwiXG4gICAgICAgICAgdHJpZ2dlcj1cImNsaWNrXCJcbiAgICAgICAgICBtb3VzZUVudGVyRGVsYXk9ezB9XG4gICAgICAgICAgbW91c2VMZWF2ZURlbGF5PXswfVxuICAgICAgICAgIHBsYWNlbWVudD1cImJvdHRvbUxlZnRcIlxuICAgICAgICA+XG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgc3R5bGU9e3sgd2lkdGg6IHRyaWdnZXJXaWR0aCB9fT5cbiAgICAgICAgICAgIEhlbGxvIHdvcmxkIVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L1Rvb2x0aXA+LFxuICAgICAgKTtcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ2J1dHRvbicpXG4gICAgICAgIC5hdCgwKVxuICAgICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgICBjb25zdCBwb3B1cExlZnREZWZhdWx0ID0gcGFyc2VJbnQod3JhcHBlci5pbnN0YW5jZSgpLmdldFBvcHVwRG9tTm9kZSgpLnN0eWxlLmxlZnQsIDEwKTtcblxuICAgICAgY29uc3Qgd3JhcHBlcjIgPSBtb3VudChcbiAgICAgICAgPFRvb2x0aXBcbiAgICAgICAgICB0aXRsZT1cInh4eHh4XCJcbiAgICAgICAgICB0cmlnZ2VyPVwiY2xpY2tcIlxuICAgICAgICAgIG1vdXNlRW50ZXJEZWxheT17MH1cbiAgICAgICAgICBtb3VzZUxlYXZlRGVsYXk9ezB9XG4gICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tTGVmdFwiXG4gICAgICAgICAgYXJyb3dQb2ludEF0Q2VudGVyXG4gICAgICAgID5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBzdHlsZT17eyB3aWR0aDogdHJpZ2dlcldpZHRoIH19PlxuICAgICAgICAgICAgSGVsbG8gd29ybGQhXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvVG9vbHRpcD4sXG4gICAgICApO1xuICAgICAgd3JhcHBlcjJcbiAgICAgICAgLmZpbmQoJ2J1dHRvbicpXG4gICAgICAgIC5hdCgwKVxuICAgICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgICBjb25zdCBwb3B1cExlZnRBcnJvd1BvaW50QXRDZW50ZXIgPSBwYXJzZUludChcbiAgICAgICAgd3JhcHBlcjIuaW5zdGFuY2UoKS5nZXRQb3B1cERvbU5vZGUoKS5zdHlsZS5sZWZ0LFxuICAgICAgICAxMCxcbiAgICAgICk7XG4gICAgICBleHBlY3QocG9wdXBMZWZ0QXJyb3dQb2ludEF0Q2VudGVyIC0gcG9wdXBMZWZ0RGVmYXVsdCkudG9CZShcbiAgICAgICAgdHJpZ2dlcldpZHRoIC8gMiAtIGhvcml6b250YWxBcnJvd1NoaWZ0IC0gYXJyb3dXaWR0aCxcbiAgICAgICk7XG4gICAgfTtcblxuICAgIGplc3QuZG9udE1vY2soJ3JjLXRyaWdnZXInLCBzdWl0KTtcbiAgfSk7XG59KTtcbiJdfQ==