{"version":3,"sources":["Table.pagination.test.js"],"names":["describe","columns","title","dataIndex","data","key","name","pagination","className","pageSize","createTable","props","renderedNames","wrapper","find","map","row","record","it","expect","toMatchSnapshot","hideOnSinglePage","toHaveLength","setProps","toEqual","simulate","handleChange","jest","fn","handlePaginationChange","onChange","onShowSizeChange","noop","toHaveBeenCalledWith","current","size","undefined","at","text","update","dataSource","position","children","childAt"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEAA,QAAQ,CAAC,kBAAD,EAAqB,YAAM;AACjC,MAAMC,OAAO,GAAG,CACd;AACEC,IAAAA,KAAK,EAAE,MADT;AAEEC,IAAAA,SAAS,EAAE;AAFb,GADc,CAAhB;AAOA,MAAMC,IAAI,GAAG,CACX;AAAEC,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE;AAAhB,GADW,EAEX;AAAED,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE;AAAhB,GAFW,EAGX;AAAED,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE;AAAhB,GAHW,EAIX;AAAED,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE;AAAhB,GAJW,CAAb;AAOA,MAAMC,UAAU,GAAG;AAAEC,IAAAA,SAAS,EAAE,SAAb;AAAwBC,IAAAA,QAAQ,EAAE;AAAlC,GAAnB;;AAEA,WAASC,WAAT,CAAqBC,KAArB,EAA4B;AAC1B,WAAO,gCAAC,YAAD;AAAO,MAAA,OAAO,EAAEV,OAAhB;AAAyB,MAAA,UAAU,EAAEG,IAArC;AAA2C,MAAA,UAAU,EAAEG;AAAvD,OAAuEI,KAAvE,EAAP;AACD;;AAED,WAASC,aAAT,CAAuBC,OAAvB,EAAgC;AAC9B,WAAOA,OAAO,CAACC,IAAR,CAAa,UAAb,EAAyBC,GAAzB,CAA6B,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACL,KAAJ,GAAYM,MAAZ,CAAmBX,IAAvB;AAAA,KAAhC,CAAP;AACD;;AAEDY,EAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAM;AACvC,QAAML,OAAO,GAAG,oBAAOH,WAAW,EAAlB,CAAhB;AACAS,IAAAA,MAAM,CAACN,OAAD,CAAN,CAAgBO,eAAhB;AACD,GAHC,CAAF;AAKAF,EAAAA,EAAE,CAAC,8EAAD,EAAiF,YAAM;AACvF,QAAML,OAAO,GAAG,mBAAMH,WAAW,CAAC;AAAEH,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE,CAAZ;AAAeY,QAAAA,gBAAgB,EAAE;AAAjC;AAAd,KAAD,CAAjB,CAAhB;AACAF,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE,CAAZ;AAAeY,QAAAA,gBAAgB,EAAE;AAAjC;AAAd,KAAjB;AACAF,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE,CAAZ;AAAeY,QAAAA,gBAAgB,EAAE;AAAjC;AAAd,KAAjB;AACAF,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE,CAAZ;AAAeY,QAAAA,gBAAgB,EAAE;AAAjC;AAAd,KAAjB;AACAF,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE,CAAZ;AAAeY,QAAAA,gBAAgB,EAAE;AAAjC;AAAd,KAAjB;AACAF,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE,CAAZ;AAAeY,QAAAA,gBAAgB,EAAE;AAAjC;AAAd,KAAjB;AACAF,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACD,GAbC,CAAF;AAeAJ,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAM;AACxB,QAAML,OAAO,GAAG,mBAAMH,WAAW,EAAjB,CAAhB;AAEAS,IAAAA,MAAM,CAACP,aAAa,CAACC,OAAD,CAAd,CAAN,CAA+BW,OAA/B,CAAuC,CAAC,MAAD,EAAS,MAAT,CAAvC;AACAX,IAAAA,OAAO,CAACC,IAAR,CAAa,sBAAb,EAAqCW,QAArC,CAA8C,OAA9C;AACAN,IAAAA,MAAM,CAACP,aAAa,CAACC,OAAD,CAAd,CAAN,CAA+BW,OAA/B,CAAuC,CAAC,KAAD,EAAQ,OAAR,CAAvC;AACD,GANC,CAAF;AAQAN,EAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAM;AAC3C,QAAML,OAAO,GAAG,mBAAMH,WAAW,EAAjB,CAAhB;AAEAG,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE;AAAZ;AAAd,KAAjB;AACAU,IAAAA,MAAM,CAACP,aAAa,CAACC,OAAD,CAAd,CAAN,CAA+BW,OAA/B,CAAuC,CAAC,MAAD,CAAvC;AACD,GALC,CAAF;AAOAN,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAM;AAC7B,QAAMQ,YAAY,GAAGC,IAAI,CAACC,EAAL,EAArB;AACA,QAAMC,sBAAsB,GAAGF,IAAI,CAACC,EAAL,EAA/B;AACA,QAAMf,OAAO,GAAG,mBACdH,WAAW,CAAC;AACVH,MAAAA,UAAU,qCAAOA,UAAP;AAAmBuB,QAAAA,QAAQ,EAAED,sBAA7B;AAAqDE,QAAAA,gBAAgB,EAAEC;AAAvE,QADA;AAEVF,MAAAA,QAAQ,EAAEJ;AAFA,KAAD,CADG,CAAhB;AAOAb,IAAAA,OAAO,CAACC,IAAR,CAAa,sBAAb,EAAqCW,QAArC,CAA8C,OAA9C;AAEAN,IAAAA,MAAM,CAACO,YAAD,CAAN,CAAqBO,oBAArB,CACE;AACEzB,MAAAA,SAAS,EAAE,SADb;AAEE0B,MAAAA,OAAO,EAAE,CAFX;AAGEzB,MAAAA,QAAQ,EAAE,CAHZ;AAIE0B,MAAAA,IAAI,EAAE;AAJR,KADF,EAOE,EAPF,EAQE,EARF,EASE,EATF;AAYAhB,IAAAA,MAAM,CAACU,sBAAD,CAAN,CAA+BI,oBAA/B,CAAoD,CAApD,EAAuD,CAAvD;AACD,GAzBC,CAAF,CA5DiC,CAuFjC;;AACAf,EAAAA,EAAE,CAAC,kEAAD,EAAqE,YAAM;AAC3E,QAAML,OAAO,GAAG,mBAAMH,WAAW,CAAC;AAAEH,MAAAA,UAAU,EAAE;AAAd,KAAD,CAAjB,CAAhB;AACAY,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE6B;AAAd,KAAjB;AACAjB,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,4BADR,EAEGuB,EAFH,CAEM,CAFN,EAGGC,IAHH,EADI,CAAN,CAKEd,OALF,CAKU,WALV;AAMD,GAXC,CAAF,CAxFiC,CAqGjC;;AACAN,EAAAA,EAAE,CAAC,4EAAD,EAA+E,YAAM;AACrF,QAAML,OAAO,GAAG,mBAAMH,WAAW,EAAjB,CAAhB;AACAS,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,4BADR,EAEGuB,EAFH,CAEM,CAFN,EAGGC,IAHH,EADI,CAAN,CAKEd,OALF,CAKU,WALV;AAMAX,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAd,KAAjB;AACAY,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAVA;AAAF,KAAjB;AACAM,IAAAA,OAAO,CAAC0B,MAAR;AACApB,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,4BADR,EAEGuB,EAFH,CAEM,CAFN,EAGGC,IAHH,EADI,CAAN,CAKEd,OALF,CAKU,WALV;AAMAX,IAAAA,OAAO,CAACC,IAAR,CAAa,sBAAb,EAAqCW,QAArC,CAA8C,OAA9C;AACAN,IAAAA,MAAM,CAACP,aAAa,CAACC,OAAD,CAAd,CAAN,CAA+BW,OAA/B,CAAuC,CAAC,KAAD,EAAQ,OAAR,CAAvC;AACAX,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAd,KAAjB;AACAY,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAd,KAAjB;AACAY,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,iBAAb,CAAD,CAAN,CAAwCQ,YAAxC,CAAqD,CAArD;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,4BADR,EAEGuB,EAFH,CAEM,CAFN,EAGGC,IAHH,EADI,CAAN,CAKEd,OALF,CAKU,WALV,EA1BqF,CA+B7D;;AACxBL,IAAAA,MAAM,CAACP,aAAa,CAACC,OAAD,CAAd,CAAN,CAA+BW,OAA/B,CAAuC,CAAC,MAAD,EAAS,MAAT,EAAiB,KAAjB,EAAwB,OAAxB,CAAvC;AACD,GAjCC,CAAF;AAmCAN,EAAAA,EAAE,CAAC,iDAAD,EAAoD,YAAM;AAC1D,QAAML,OAAO,GAAG,mBAAMH,WAAW,CAAC;AAAEH,MAAAA,UAAU,EAAE;AAAEE,QAAAA,QAAQ,EAAE;AAAZ;AAAd,KAAD,CAAjB,CAAhB;AACAI,IAAAA,OAAO,CAACC,IAAR,CAAa,sBAAb,EAAqCW,QAArC,CAA8C,OAA9C;AACAZ,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEiB,MAAAA,UAAU,EAAE,CAACpC,IAAI,CAAC,CAAD,CAAL;AAAd,KAAjB;AACAe,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,4BADR,EAEGuB,EAFH,CAEM,CAFN,EAGGC,IAHH,EADI,CAAN,CAKEd,OALF,CAKU,WALV;AAMD,GAVC,CAAF;AAYAN,EAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC7C,QAAML,OAAO,GAAG,mBAAMH,WAAW,CAAC;AAAEH,MAAAA,UAAU,EAAE;AAAEkC,QAAAA,QAAQ,EAAE;AAAZ;AAAd,KAAD,CAAjB,CAAhB;AACAtB,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,qBAAb,EAAoC4B,QAApC,EAAD,CAAN,CAAuDpB,YAAvD,CAAoE,CAApE;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,qBADR,EAEG6B,OAFH,CAEW,CAFX,EAGG7B,IAHH,CAGQ,iBAHR,CADI,CAAN,CAKEQ,YALF,CAKe,CALf;AAMAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEkC,QAAAA,QAAQ,EAAE;AAAZ;AAAd,KAAjB;AACAtB,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,qBAAb,EAAoC4B,QAApC,EAAD,CAAN,CAAuDpB,YAAvD,CAAoE,CAApE;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,qBADR,EAEG6B,OAFH,CAEW,CAFX,EAGG7B,IAHH,CAGQ,iBAHR,CADI,CAAN,CAKEQ,YALF,CAKe,CALf;AAMAT,IAAAA,OAAO,CAACU,QAAR,CAAiB;AAAEhB,MAAAA,UAAU,EAAE;AAAEkC,QAAAA,QAAQ,EAAE;AAAZ;AAAd,KAAjB;AACAtB,IAAAA,MAAM,CAACN,OAAO,CAACC,IAAR,CAAa,qBAAb,EAAoC4B,QAApC,EAAD,CAAN,CAAuDpB,YAAvD,CAAoE,CAApE;AACAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,qBADR,EAEG6B,OAFH,CAEW,CAFX,EAGG7B,IAHH,CAGQ,iBAHR,CADI,CAAN,CAKEQ,YALF,CAKe,CALf;AAMAH,IAAAA,MAAM,CACJN,OAAO,CACJC,IADH,CACQ,qBADR,EAEG6B,OAFH,CAEW,CAFX,EAGG7B,IAHH,CAGQ,iBAHR,CADI,CAAN,CAKEQ,YALF,CAKe,CALf;AAMD,GA/BC,CAAF;AAgCD,CArLO,CAAR","sourcesContent":["import React from 'react';\nimport { mount, render } from 'enzyme';\nimport noop from 'lodash/noop';\nimport Table from '..';\n\ndescribe('Table.pagination', () => {\n  const columns = [\n    {\n      title: 'Name',\n      dataIndex: 'name',\n    },\n  ];\n\n  const data = [\n    { key: 0, name: 'Jack' },\n    { key: 1, name: 'Lucy' },\n    { key: 2, name: 'Tom' },\n    { key: 3, name: 'Jerry' },\n  ];\n\n  const pagination = { className: 'my-page', pageSize: 2 };\n\n  function createTable(props) {\n    return <Table columns={columns} dataSource={data} pagination={pagination} {...props} />;\n  }\n\n  function renderedNames(wrapper) {\n    return wrapper.find('TableRow').map(row => row.props().record.name);\n  }\n\n  it('renders pagination correctly', () => {\n    const wrapper = render(createTable());\n    expect(wrapper).toMatchSnapshot();\n  });\n\n  it('should not show pager if pagination.hideOnSinglePage is true and only 1 page', () => {\n    const wrapper = mount(createTable({ pagination: { pageSize: 3, hideOnSinglePage: true } }));\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    wrapper.setProps({ pagination: { pageSize: 3, hideOnSinglePage: false } });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    wrapper.setProps({ pagination: { pageSize: 4, hideOnSinglePage: true } });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(0);\n    wrapper.setProps({ pagination: { pageSize: 4, hideOnSinglePage: false } });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    wrapper.setProps({ pagination: { pageSize: 5, hideOnSinglePage: true } });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(0);\n    wrapper.setProps({ pagination: { pageSize: 5, hideOnSinglePage: false } });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n  });\n\n  it('paginate data', () => {\n    const wrapper = mount(createTable());\n\n    expect(renderedNames(wrapper)).toEqual(['Jack', 'Lucy']);\n    wrapper.find('.c7n-pagination-next').simulate('click');\n    expect(renderedNames(wrapper)).toEqual(['Tom', 'Jerry']);\n  });\n\n  it('repaginates when pageSize change', () => {\n    const wrapper = mount(createTable());\n\n    wrapper.setProps({ pagination: { pageSize: 1 } });\n    expect(renderedNames(wrapper)).toEqual(['Jack']);\n  });\n\n  it('fires change event', () => {\n    const handleChange = jest.fn();\n    const handlePaginationChange = jest.fn();\n    const wrapper = mount(\n      createTable({\n        pagination: { ...pagination, onChange: handlePaginationChange, onShowSizeChange: noop },\n        onChange: handleChange,\n      }),\n    );\n\n    wrapper.find('.c7n-pagination-next').simulate('click');\n\n    expect(handleChange).toHaveBeenCalledWith(\n      {\n        className: 'my-page',\n        current: 2,\n        pageSize: 2,\n        size: 'default',\n      },\n      {},\n      {},\n      [],\n    );\n\n    expect(handlePaginationChange).toHaveBeenCalledWith(2, 2);\n  });\n\n  // https://codepen.io/afc163/pen/dVeNoP?editors=001\n  it('should have pager when change pagination from false to undefined', () => {\n    const wrapper = mount(createTable({ pagination: false }));\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(0);\n    wrapper.setProps({ pagination: undefined });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    expect(\n      wrapper\n        .find('.c7n-pagination-total-text')\n        .at(0)\n        .text(),\n    ).toEqual('1 - 4 / 4');\n  });\n\n  // https://codepen.io/afc163/pen/pWVRJV?editors=001\n  it('should display pagination as prop pagination change between true and false', () => {\n    const wrapper = mount(createTable());\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    expect(\n      wrapper\n        .find('.c7n-pagination-total-text')\n        .at(0)\n        .text(),\n    ).toEqual('1 - 2 / 4');\n    wrapper.setProps({ pagination: false });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(0);\n    wrapper.setProps({ pagination });\n    wrapper.update();\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    expect(\n      wrapper\n        .find('.c7n-pagination-total-text')\n        .at(0)\n        .text(),\n    ).toEqual('1 - 2 / 4');\n    wrapper.find('.c7n-pagination-next').simulate('click');\n    expect(renderedNames(wrapper)).toEqual(['Tom', 'Jerry']);\n    wrapper.setProps({ pagination: false });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(0);\n    wrapper.setProps({ pagination: true });\n    expect(wrapper.find('.c7n-pagination')).toHaveLength(1);\n    expect(\n      wrapper\n        .find('.c7n-pagination-total-text')\n        .at(0)\n        .text(),\n    ).toEqual('1 - 4 / 4'); // pageSize will be 10\n    expect(renderedNames(wrapper)).toEqual(['Jack', 'Lucy', 'Tom', 'Jerry']);\n  });\n\n  it('change to correct page when data source changes', () => {\n    const wrapper = mount(createTable({ pagination: { pageSize: 1 } }));\n    wrapper.find('.c7n-pagination-next').simulate('click');\n    wrapper.setProps({ dataSource: [data[0]] });\n    expect(\n      wrapper\n        .find('.c7n-pagination-total-text')\n        .at(0)\n        .text(),\n    ).toEqual('1 - 1 / 1');\n  });\n\n  it('specify the position of pagination', () => {\n    const wrapper = mount(createTable({ pagination: { position: 'top' } }));\n    expect(wrapper.find('.c7n-spin-container').children()).toHaveLength(2);\n    expect(\n      wrapper\n        .find('.c7n-spin-container')\n        .childAt(0)\n        .find('.c7n-pagination'),\n    ).toHaveLength(1);\n    wrapper.setProps({ pagination: { position: 'bottom' } });\n    expect(wrapper.find('.c7n-spin-container').children()).toHaveLength(2);\n    expect(\n      wrapper\n        .find('.c7n-spin-container')\n        .childAt(1)\n        .find('.c7n-pagination'),\n    ).toHaveLength(1);\n    wrapper.setProps({ pagination: { position: 'both' } });\n    expect(wrapper.find('.c7n-spin-container').children()).toHaveLength(3);\n    expect(\n      wrapper\n        .find('.c7n-spin-container')\n        .childAt(0)\n        .find('.c7n-pagination'),\n    ).toHaveLength(1);\n    expect(\n      wrapper\n        .find('.c7n-spin-container')\n        .childAt(2)\n        .find('.c7n-pagination'),\n    ).toHaveLength(1);\n  });\n});\n"]}