3b9e3b4b61e52222c004a6f315cbe12f
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _react = _interopRequireWildcard(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _Input = _interopRequireDefault(require("./Input"));

var _button = _interopRequireDefault(require("../button"));

var _configure = require("../configure");

function _createSuper(Derived) {
  function isNativeReflectConstruct() {
    if (typeof Reflect === "undefined" || !Reflect.construct) return false;
    if (Reflect.construct.sham) return false;
    if (typeof Proxy === "function") return true;

    try {
      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));
      return true;
    } catch (e) {
      return false;
    }
  }

  return function () {
    var Super = (0, _getPrototypeOf2["default"])(Derived),
        result;

    if (isNativeReflectConstruct()) {
      var NewTarget = (0, _getPrototypeOf2["default"])(this).constructor;
      result = Reflect.construct(Super, arguments, NewTarget);
    } else {
      result = Super.apply(this, arguments);
    }

    return (0, _possibleConstructorReturn2["default"])(this, result);
  };
}

var Search =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Search, _Component);

  var _super = _createSuper(Search);

  function Search() {
    var _this;

    (0, _classCallCheck2["default"])(this, Search);
    _this = _super.apply(this, arguments);

    _this.onSearch = function () {
      var onSearch = _this.props.onSearch;

      if (onSearch) {
        onSearch(_this.input.input.value);
      }

      _this.input.focus();
    };

    _this.saveInput = function (node) {
      _this.input = node;
    };

    return _this;
  }

  (0, _createClass2["default"])(Search, [{
    key: "focus",
    value: function focus() {
      this.input.focus();
    }
  }, {
    key: "blur",
    value: function blur() {
      this.input.blur();
    }
  }, {
    key: "getPrefixCls",
    value: function getPrefixCls() {
      var prefixCls = this.props.prefixCls;
      return (0, _configure.getPrefixCls)('input-search', prefixCls);
    }
  }, {
    key: "getButtonOrIcon",
    value: function getButtonOrIcon() {
      var _this$props = this.props,
          enterButton = _this$props.enterButton,
          size = _this$props.size;

      if (!enterButton) {
        return _react["default"].createElement(_button["default"], {
          type: "primary",
          size: size,
          shape: "circle",
          icon: "search"
        });
      }

      var enterButtonAsElement = enterButton;

      if (enterButtonAsElement.type === _button["default"] || enterButtonAsElement.type === 'button') {
        return (0, _react.cloneElement)(enterButtonAsElement, enterButtonAsElement.type === _button["default"] ? {
          className: "".concat(this.getPrefixCls(), "-button"),
          size: size,
          onClick: this.onSearch
        } : {
          onClick: this.onSearch
        });
      }

      if (enterButton === true) {
        return _react["default"].createElement(_button["default"], {
          type: "primary",
          size: size,
          shape: "circle",
          onClick: this.onSearch,
          icon: "search"
        });
      }

      return _react["default"].createElement(_button["default"], {
        type: "primary",
        size: size,
        onClick: this.onSearch,
        key: "enterButton"
      }, enterButton);
    }
  }, {
    key: "render",
    value: function render() {
      var _classNames;

      var _this$props2 = this.props,
          className = _this$props2.className,
          inputPrefixCls = _this$props2.inputPrefixCls,
          size = _this$props2.size,
          suffix = _this$props2.suffix,
          enterButton = _this$props2.enterButton,
          others = (0, _objectWithoutProperties2["default"])(_this$props2, ["className", "inputPrefixCls", "size", "suffix", "enterButton"]);
      var prefixCls = this.getPrefixCls();
      delete others.onSearch;
      delete others.prefixCls;
      var buttonOrIcon = this.getButtonOrIcon();
      var searchSuffix = suffix ? [suffix, buttonOrIcon] : buttonOrIcon;
      var inputClassName = (0, _classnames["default"])(prefixCls, className, (_classNames = {}, (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-enter-button"), !!enterButton), (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-").concat(size), !!size), _classNames));
      return _react["default"].createElement(_Input["default"], (0, _extends2["default"])({
        onPressEnter: this.onSearch
      }, others, {
        size: size,
        className: inputClassName,
        prefixCls: (0, _configure.getPrefixCls)('input', inputPrefixCls),
        suffix: searchSuffix,
        ref: this.saveInput
      }));
    }
  }]);
  return Search;
}(_react.Component);

exports["default"] = Search;
Search.displayName = 'Search';
Search.defaultProps = {
  enterButton: false,
  size: "small"
  /* small */

};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0L1NlYXJjaC5qcyJdLCJuYW1lcyI6WyJTZWFyY2giLCJDb21wb25lbnQiLCJvblNlYXJjaCIsInByZWZpeENscyIsImVudGVyQnV0dG9uIiwic2l6ZSIsIkJ1dHRvbiIsInR5cGUiLCJzaGFwZSIsImljb24iLCJlbnRlckJ1dHRvbkFzRWxlbWVudCIsImNsYXNzTmFtZSIsIm9uQ2xpY2siLCJrZXkiLCJpbnB1dFByZWZpeENscyIsInN1ZmZpeCIsIm90aGVycyIsImJ1dHRvbk9ySWNvbiIsInNlYXJjaFN1ZmZpeCIsImlucHV0Q2xhc3NOYW1lIiwiSW5wdXQiLCJvblByZXNzRW50ZXIiLCJyZWYiLCJzYXZlSW5wdXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUEsTUFBQSxHQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsV0FBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsTUFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsT0FBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsVUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFDcUJBLE07Ozs7Ozs7QUFDakIsV0FBQSxNQUFBLEdBQWM7QUFBQSxRQUFBLEtBQUE7O0FBQUEsS0FBQSxHQUFBLGdCQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUE7QUFDVixJQUFBLEtBQUEsR0FBQSxNQUFBLENBQUEsS0FBQSxDQUFBLElBQUEsRUFBQSxTQUFBLENBQUE7O0FBQ0EsSUFBQSxLQUFBLENBQUEsUUFBQSxHQUFnQixZQUFNO0FBQUEsVUFDVkUsUUFEVSxHQUNHLEtBQUEsQ0FESCxLQUNH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Q0FBb0JDLE1BQUFBLENBQXBCLFNBQW9CQSxDQUFwQixFQUEyQixDQUFBLEdBQUEsU0FBQSxDQUFBLFNBQUEsQ0FBQSxFQUFjO0FBQUVDLFFBQUFBLFlBQVksRUFBRSxLQUFLbkI7QUFBckIsT0FBZCxFQUFBLE1BQUEsRUFBdUQ7QUFBRUcsUUFBQUEsSUFBSSxFQUFOLElBQUE7QUFBY00sUUFBQUEsU0FBUyxFQUF2QixjQUFBO0FBQXlDUixRQUFBQSxTQUFTLEVBQUUsQ0FBQSxHQUFBLFVBQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxFQUFwRCxjQUFvRCxDQUFwRDtBQUEyRlksUUFBQUEsTUFBTSxFQUFqRyxZQUFBO0FBQWlITyxRQUFBQSxHQUFHLEVBQUUsS0FBS0M7QUFBM0gsT0FBdkQsQ0FBM0IsQ0FBUjtBQUNIOzs7RUExRCtCdEIsTUFBQUEsQ0FBQUEsUzs7O0FBNERwQ0QsTUFBTSxDQUFOQSxXQUFBQSxHQUFBQSxRQUFBQTtBQUNBQSxNQUFNLENBQU5BLFlBQUFBLEdBQXNCO0FBQ2xCSSxFQUFBQSxXQUFXLEVBRE8sS0FBQTtBQUVsQkMsRUFBQUEsSUFBSSxFQUFFO0FBQVE7O0FBRkksQ0FBdEJMIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IGNsb25lRWxlbWVudCwgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgSW5wdXQgZnJvbSAnLi9JbnB1dCc7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4uL2J1dHRvbic7XG5pbXBvcnQgeyBnZXRQcmVmaXhDbHMgfSBmcm9tICcuLi9jb25maWd1cmUnO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VhcmNoIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5vblNlYXJjaCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgb25TZWFyY2ggfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgICBpZiAob25TZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBvblNlYXJjaCh0aGlzLmlucHV0LmlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zYXZlSW5wdXQgPSAobm9kZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbnB1dCA9IG5vZGU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvY3VzKCkge1xuICAgICAgICB0aGlzLmlucHV0LmZvY3VzKCk7XG4gICAgfVxuICAgIGJsdXIoKSB7XG4gICAgICAgIHRoaXMuaW5wdXQuYmx1cigpO1xuICAgIH1cbiAgICBnZXRQcmVmaXhDbHMoKSB7XG4gICAgICAgIGNvbnN0IHsgcHJlZml4Q2xzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICByZXR1cm4gZ2V0UHJlZml4Q2xzKCdpbnB1dC1zZWFyY2gnLCBwcmVmaXhDbHMpO1xuICAgIH1cbiAgICBnZXRCdXR0b25Pckljb24oKSB7XG4gICAgICAgIGNvbnN0IHsgZW50ZXJCdXR0b24sIHNpemUgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmICghZW50ZXJCdXR0b24pIHtcbiAgICAgICAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgeyB0eXBlOiBcInByaW1hcnlcIiwgc2l6ZTogc2l6ZSwgc2hhcGU6IFwiY2lyY2xlXCIsIGljb246IFwic2VhcmNoXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW50ZXJCdXR0b25Bc0VsZW1lbnQgPSBlbnRlckJ1dHRvbjtcbiAgICAgICAgaWYgKGVudGVyQnV0dG9uQXNFbGVtZW50LnR5cGUgPT09IEJ1dHRvbiB8fCBlbnRlckJ1dHRvbkFzRWxlbWVudC50eXBlID09PSAnYnV0dG9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudChlbnRlckJ1dHRvbkFzRWxlbWVudCwgZW50ZXJCdXR0b25Bc0VsZW1lbnQudHlwZSA9PT0gQnV0dG9uXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYCR7dGhpcy5nZXRQcmVmaXhDbHMoKX0tYnV0dG9uYCxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5vblNlYXJjaCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s6IHRoaXMub25TZWFyY2gsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVudGVyQnV0dG9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IHR5cGU6IFwicHJpbWFyeVwiLCBzaXplOiBzaXplLCBzaGFwZTogXCJjaXJjbGVcIiwgb25DbGljazogdGhpcy5vblNlYXJjaCwgaWNvbjogXCJzZWFyY2hcIiB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEJ1dHRvbiwgeyB0eXBlOiBcInByaW1hcnlcIiwgc2l6ZTogc2l6ZSwgb25DbGljazogdGhpcy5vblNlYXJjaCwga2V5OiBcImVudGVyQnV0dG9uXCIgfSwgZW50ZXJCdXR0b24pKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBjb25zdCB7IGNsYXNzTmFtZSwgaW5wdXRQcmVmaXhDbHMsIHNpemUsIHN1ZmZpeCwgZW50ZXJCdXR0b24sIC4uLm90aGVycyB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgcHJlZml4Q2xzID0gdGhpcy5nZXRQcmVmaXhDbHMoKTtcbiAgICAgICAgZGVsZXRlIG90aGVycy5vblNlYXJjaDtcbiAgICAgICAgZGVsZXRlIG90aGVycy5wcmVmaXhDbHM7XG4gICAgICAgIGNvbnN0IGJ1dHRvbk9ySWNvbiA9IHRoaXMuZ2V0QnV0dG9uT3JJY29uKCk7XG4gICAgICAgIGNvbnN0IHNlYXJjaFN1ZmZpeCA9IHN1ZmZpeCA/IFtzdWZmaXgsIGJ1dHRvbk9ySWNvbl0gOiBidXR0b25Pckljb247XG4gICAgICAgIGNvbnN0IGlucHV0Q2xhc3NOYW1lID0gY2xhc3NOYW1lcyhwcmVmaXhDbHMsIGNsYXNzTmFtZSwge1xuICAgICAgICAgICAgW2Ake3ByZWZpeENsc30tZW50ZXItYnV0dG9uYF06ICEhZW50ZXJCdXR0b24sXG4gICAgICAgICAgICBbYCR7cHJlZml4Q2xzfS0ke3NpemV9YF06ICEhc2l6ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChJbnB1dCwgT2JqZWN0LmFzc2lnbih7IG9uUHJlc3NFbnRlcjogdGhpcy5vblNlYXJjaCB9LCBvdGhlcnMsIHsgc2l6ZTogc2l6ZSwgY2xhc3NOYW1lOiBpbnB1dENsYXNzTmFtZSwgcHJlZml4Q2xzOiBnZXRQcmVmaXhDbHMoJ2lucHV0JywgaW5wdXRQcmVmaXhDbHMpLCBzdWZmaXg6IHNlYXJjaFN1ZmZpeCwgcmVmOiB0aGlzLnNhdmVJbnB1dCB9KSkpO1xuICAgIH1cbn1cblNlYXJjaC5kaXNwbGF5TmFtZSA9ICdTZWFyY2gnO1xuU2VhcmNoLmRlZmF1bHRQcm9wcyA9IHtcbiAgICBlbnRlckJ1dHRvbjogZmFsc2UsXG4gICAgc2l6ZTogXCJzbWFsbFwiIC8qIHNtYWxsICovLFxufTtcbiJdfQ==