f906908b9e03ec2d310bb74d8d9d5ebf
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _react = require("react");

var _propTypes = _interopRequireDefault(require("prop-types"));

function wrapEvent(element, eventName, callback) {
  return function (e) {
    var originalEvent = element.props[eventName];

    if (originalEvent) {
      originalEvent(e);
    }

    callback(e);
  };
}

var MouseDown =
/*#__PURE__*/
function (_PureComponent) {
  (0, _inherits2["default"])(MouseDown, _PureComponent);

  function MouseDown() {
    var _this;

    (0, _classCallCheck2["default"])(this, MouseDown);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(MouseDown).apply(this, arguments));
    _this.state = {};

    _this.show = function (e) {
      var currentTarget = e.currentTarget;
      var pos = currentTarget.getBoundingClientRect();

      _this.setState({
        size: {
          x: e.clientX - pos.left,
          y: e.clientY - pos.top,
          width: currentTarget.clientWidth,
          height: currentTarget.clientHeight,
          position: document.defaultView && document.defaultView.getComputedStyle(currentTarget).position
        }
      });
    };

    _this.hide = function () {
      _this.setState({
        size: undefined
      });
    };

    return _this;
  }

  (0, _createClass2["default"])(MouseDown, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          children = _this$props.children,
          rippleChild = _this$props.rippleChild;
      var size = this.state.size;
      var element = children(rippleChild, size);
      var newProps = {
        onMouseDown: wrapEvent(element, 'onMouseDown', this.show)
      };

      if (size) {
        (0, _extends2["default"])(newProps, {
          onMouseUp: wrapEvent(element, 'onMouseUp', this.hide),
          onMouseLeave: wrapEvent(element, 'onMouseLeave', this.hide),
          onDragEnd: wrapEvent(element, 'onDragEnd', this.hide)
        });
      }

      return (0, _react.cloneElement)(element, newProps);
    }
  }]);
  return MouseDown;
}(_react.PureComponent);

exports["default"] = MouseDown;
MouseDown.displayName = 'MouseDown';
MouseDown.propTypes = {
  rippleChild: _propTypes["default"].node
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJpcHBsZS9Nb3VzZURvd24uanMiXSwibmFtZXMiOlsib3JpZ2luYWxFdmVudCIsImVsZW1lbnQiLCJjYWxsYmFjayIsIk1vdXNlRG93biIsIlB1cmVDb21wb25lbnQiLCJjdXJyZW50VGFyZ2V0IiwiZSIsInBvcyIsInNpemUiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwicG9zaXRpb24iLCJkb2N1bWVudCIsInVuZGVmaW5lZCIsImNoaWxkcmVuIiwicmlwcGxlQ2hpbGQiLCJuZXdQcm9wcyIsIm9uTW91c2VEb3duIiwid3JhcEV2ZW50Iiwib25Nb3VzZVVwIiwib25Nb3VzZUxlYXZlIiwib25EcmFnRW5kIiwiUHJvcFR5cGVzIiwibm9kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxNQUFBLEdBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQTs7QUFDQSxTQUFBLFNBQUEsQ0FBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFBaUQ7QUFDN0MsU0FBTyxVQUFBLENBQUEsRUFBSztBQUNSLFFBQU1BLGFBQWEsR0FBR0MsT0FBTyxDQUFQQSxLQUFBQSxDQUF0QixTQUFzQkEsQ0FBdEI7O0FBQ0EsUUFBQSxhQUFBLEVBQW1CO0FBQ2ZELE1BQUFBLGFBQWEsQ0FBYkEsQ0FBYSxDQUFiQTtBQUNIOztBQUNERSxJQUFBQSxRQUFRLENBQVJBLENBQVEsQ0FBUkE7QUFMSixHQUFBO0FBT0g7O0lBQ29CQyxTOzs7OztBQUNqQixXQUFBLFNBQUEsR0FBYztBQUFBLFFBQUEsS0FBQTs7QUFBQSxLQUFBLEdBQUEsZ0JBQUEsQ0FBQSxTQUFBLENBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQTtBQUNWLElBQUEsS0FBQSxHQUFBLENBQUEsR0FBQSwyQkFBQSxDQUFBLFNBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxDQUFBLEdBQUEsZ0JBQUEsQ0FBQSxTQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsS0FBQSxDQUFBLElBQUEsRUFBQSxTQUFBLENBQUEsQ0FBQTtBQUNBLElBQUEsS0FBQSxDQUFBLEtBQUEsR0FBQSxFQUFBOztBQUNBLElBQUEsS0FBQSxDQUFBLElBQUEsR0FBWSxVQUFBLENBQUEsRUFBSztBQUFBLFVBQ0xFLGFBREssR0FDYUMsQ0FEYixDQUFBLGFBQUE7QUFFYixVQUFNQyxHQUFHLEdBQUdGLGFBQWEsQ0FBekIscUJBQVlBLEVBQVo7O0FBQ0EsTUFBQSxLQUFBLENBQUEsUUFBQSxDQUFjO0FBQ1ZHLFFBQUFBLElBQUksRUFBRTtBQUNGQyxVQUFBQSxDQUFDLEVBQUVILENBQUMsQ0FBREEsT0FBQUEsR0FBWUMsR0FBRyxDQURoQixJQUFBO0FBRUZHLFVBQUFBLENBQUMsRUFBRUosQ0FBQyxDQUFEQSxPQUFBQSxHQUFZQyxHQUFHLENBRmhCLEdBQUE7QUFHRkksVUFBQUEsS0FBSyxFQUFFTixhQUFhLENBSGxCLFdBQUE7QUFJRk8sVUFBQUEsTUFBTSxFQUFFUCxhQUFhLENBSm5CLFlBQUE7QUFLRlEsVUFBQUEsUUFBUSxFQUFFQyxRQUFRLENBQVJBLFdBQUFBLElBQXdCQSxRQUFRLENBQVJBLFdBQUFBLENBQUFBLGdCQUFBQSxDQUFBQSxhQUFBQSxFQUFxREQ7QUFMckY7QUFESSxPQUFkO0FBSEosS0FBQTs7QUFhQSxJQUFBLEtBQUEsQ0FBQSxJQUFBLEdBQVksWUFBTTtBQUNkLE1BQUEsS0FBQSxDQUFBLFFBQUEsQ0FBYztBQUNWTCxRQUFBQSxJQUFJLEVBQUVPO0FBREksT0FBZDtBQURKLEtBQUE7O0FBaEJVLFdBQUEsS0FBQTtBQXFCYjs7Ozs2QkFDUTtBQUFBLFVBQUEsV0FBQSxHQUM2QixLQUQ3QixLQUFBO0FBQUEsVUFDR0MsUUFESCxHQUFBLFdBQUEsQ0FBQSxRQUFBO0FBQUEsVUFDYUMsV0FEYixHQUFBLFdBQUEsQ0FBQSxXQUFBO0FBQUEsVUFFR1QsSUFGSCxHQUVZLEtBRlosS0FFWSxDQUZaLElBQUE7QUFHTCxVQUFNUCxPQUFPLEdBQUdlLFFBQVEsQ0FBQSxXQUFBLEVBQXhCLElBQXdCLENBQXhCO0FBQ0EsVUFBTUUsUUFBUSxHQUFHO0FBQ2JDLFFBQUFBLFdBQVcsRUFBRUMsU0FBUyxDQUFBLE9BQUEsRUFBQSxhQUFBLEVBQXlCLEtBQXpCLElBQUE7QUFEVCxPQUFqQjs7QUFHQSxVQUFBLElBQUEsRUFBVTtBQUNOLFNBQUEsR0FBQSxTQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsUUFBQSxFQUF3QjtBQUNwQkMsVUFBQUEsU0FBUyxFQUFFRCxTQUFTLENBQUEsT0FBQSxFQUFBLFdBQUEsRUFBdUIsS0FEdkIsSUFDQSxDQURBO0FBRXBCRSxVQUFBQSxZQUFZLEVBQUVGLFNBQVMsQ0FBQSxPQUFBLEVBQUEsY0FBQSxFQUEwQixLQUY3QixJQUVHLENBRkg7QUFHcEJHLFVBQUFBLFNBQVMsRUFBRUgsU0FBUyxDQUFBLE9BQUEsRUFBQSxXQUFBLEVBQXVCLEtBQXZCLElBQUE7QUFIQSxTQUF4QjtBQUtIOztBQUNELGFBQU8sQ0FBQSxHQUFBLE1BQUEsQ0FBQSxZQUFBLEVBQUEsT0FBQSxFQUFQLFFBQU8sQ0FBUDtBQUNIOzs7RUF0Q2tDaEIsTUFBQUEsQ0FBQUEsYTs7O0FBd0N2Q0QsU0FBUyxDQUFUQSxXQUFBQSxHQUFBQSxXQUFBQTtBQUNBQSxTQUFTLENBQVRBLFNBQUFBLEdBQXNCO0FBQUVjLEVBQUFBLFdBQVcsRUFBRU8sVUFBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsQ0FBVUM7QUFBekIsQ0FBdEJ0QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNsb25lRWxlbWVudCwgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5mdW5jdGlvbiB3cmFwRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxFdmVudCA9IGVsZW1lbnQucHJvcHNbZXZlbnROYW1lXTtcbiAgICAgICAgaWYgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQoZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soZSk7XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vdXNlRG93biBleHRlbmRzIFB1cmVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge307XG4gICAgICAgIHRoaXMuc2hvdyA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBjdXJyZW50VGFyZ2V0IH0gPSBlO1xuICAgICAgICAgICAgY29uc3QgcG9zID0gY3VycmVudFRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgICAgICAgICAgeDogZS5jbGllbnRYIC0gcG9zLmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHk6IGUuY2xpZW50WSAtIHBvcy50b3AsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBjdXJyZW50VGFyZ2V0LmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGN1cnJlbnRUYXJnZXQuY2xpZW50SGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZG9jdW1lbnQuZGVmYXVsdFZpZXcgJiYgZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjdXJyZW50VGFyZ2V0KS5wb3NpdGlvbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGlkZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHNpemU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgY2hpbGRyZW4sIHJpcHBsZUNoaWxkIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7IHNpemUgfSA9IHRoaXMuc3RhdGU7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjaGlsZHJlbihyaXBwbGVDaGlsZCwgc2l6ZSk7XG4gICAgICAgIGNvbnN0IG5ld1Byb3BzID0ge1xuICAgICAgICAgICAgb25Nb3VzZURvd246IHdyYXBFdmVudChlbGVtZW50LCAnb25Nb3VzZURvd24nLCB0aGlzLnNob3cpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoc2l6ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihuZXdQcm9wcywge1xuICAgICAgICAgICAgICAgIG9uTW91c2VVcDogd3JhcEV2ZW50KGVsZW1lbnQsICdvbk1vdXNlVXAnLCB0aGlzLmhpZGUpLFxuICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZTogd3JhcEV2ZW50KGVsZW1lbnQsICdvbk1vdXNlTGVhdmUnLCB0aGlzLmhpZGUpLFxuICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogd3JhcEV2ZW50KGVsZW1lbnQsICdvbkRyYWdFbmQnLCB0aGlzLmhpZGUpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb25lRWxlbWVudChlbGVtZW50LCBuZXdQcm9wcyk7XG4gICAgfVxufVxuTW91c2VEb3duLmRpc3BsYXlOYW1lID0gJ01vdXNlRG93bic7XG5Nb3VzZURvd24ucHJvcFR5cGVzID0geyByaXBwbGVDaGlsZDogUHJvcFR5cGVzLm5vZGUgfTtcbiJdfQ==