8d7f5365bcdd786fc4a200b4aabe3bdd
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _cssAnimation = _interopRequireDefault(require("css-animation"));

var _raf = _interopRequireDefault(require("raf"));

function animate(node, show, done) {
  var height;
  var requestAnimationFrameId;
  return (0, _cssAnimation["default"])(node, 'c7n-motion-collapse', {
    start: function start() {
      if (!show) {
        node.style.height = "".concat(node.offsetHeight, "px");
        node.style.opacity = '1';
      } else {
        height = node.offsetHeight;
        node.style.height = '0px';
        node.style.opacity = '0';
      }
    },
    active: function active() {
      if (requestAnimationFrameId) {
        _raf["default"].cancel(requestAnimationFrameId);
      }

      requestAnimationFrameId = (0, _raf["default"])(function () {
        node.style.height = "".concat(show ? height : 0, "px");
        node.style.opacity = show ? '1' : '0';
      });
    },
    end: function end() {
      if (requestAnimationFrameId) {
        _raf["default"].cancel(requestAnimationFrameId);
      }

      node.style.height = '';
      node.style.opacity = '';
      done();
    }
  });
}

var animation = {
  enter: function enter(node, done) {
    return animate(node, true, done);
  },
  leave: function leave(node, done) {
    return animate(node, false, done);
  },
  appear: function appear(node, done) {
    return animate(node, true, done);
  }
};
var _default = animation;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl91dGlsL29wZW5BbmltYXRpb24uanMiXSwibmFtZXMiOlsic3RhcnQiLCJub2RlIiwiaGVpZ2h0IiwiYWN0aXZlIiwicmFmIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQiLCJzaG93IiwiZW5kIiwiZG9uZSIsImFuaW1hdGlvbiIsImVudGVyIiwiYW5pbWF0ZSIsImxlYXZlIiwiYXBwZWFyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFBLGFBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxlQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLElBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxLQUFBLENBQUEsQ0FBQTs7QUFDQSxTQUFBLE9BQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBbUM7QUFDL0IsTUFBQSxNQUFBO0FBQ0EsTUFBQSx1QkFBQTtBQUNBLFNBQU8sQ0FBQSxHQUFBLGFBQUEsQ0FBQSxTQUFBLENBQUEsRUFBQSxJQUFBLEVBQUEscUJBQUEsRUFBMEM7QUFDN0NBLElBQUFBLEtBRDZDLEVBQUEsU0FBQSxLQUFBLEdBQ3JDO0FBQ0osVUFBSSxDQUFKLElBQUEsRUFBVztBQUNQQyxRQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE1BQUFBLEdBQUFBLEdBQUFBLE1BQUFBLENBQXVCQSxJQUFJLENBQTNCQSxZQUFBQSxFQUFBQSxJQUFBQSxDQUFBQTtBQUNBQSxRQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE9BQUFBLEdBQUFBLEdBQUFBO0FBRkosT0FBQSxNQUlLO0FBQ0RDLFFBQUFBLE1BQU0sR0FBR0QsSUFBSSxDQUFiQyxZQUFBQTtBQUNBRCxRQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE1BQUFBLEdBQUFBLEtBQUFBO0FBQ0FBLFFBQUFBLElBQUksQ0FBSkEsS0FBQUEsQ0FBQUEsT0FBQUEsR0FBQUEsR0FBQUE7QUFDSDtBQVZ3QyxLQUFBO0FBWTdDRSxJQUFBQSxNQVo2QyxFQUFBLFNBQUEsTUFBQSxHQVlwQztBQUNMLFVBQUEsdUJBQUEsRUFBNkI7QUFDekJDLFFBQUFBLElBQUFBLENBQUFBLFNBQUFBLENBQUFBLENBQUFBLE1BQUFBLENBQUFBLHVCQUFBQTtBQUNIOztBQUNEQyxNQUFBQSx1QkFBdUIsR0FBRyxDQUFBLEdBQUEsSUFBQSxDQUFBLFNBQUEsQ0FBQSxFQUFJLFlBQU07QUFDaENKLFFBQUFBLElBQUksQ0FBSkEsS0FBQUEsQ0FBQUEsTUFBQUEsR0FBQUEsR0FBQUEsTUFBQUEsQ0FBdUJLLElBQUksR0FBQSxNQUFBLEdBQTNCTCxDQUFBQSxFQUFBQSxJQUFBQSxDQUFBQTtBQUNBQSxRQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE9BQUFBLEdBQXFCSyxJQUFJLEdBQUEsR0FBQSxHQUF6QkwsR0FBQUE7QUFGSkksT0FBMEIsQ0FBMUJBO0FBaEJ5QyxLQUFBO0FBcUI3Q0UsSUFBQUEsR0FyQjZDLEVBQUEsU0FBQSxHQUFBLEdBcUJ2QztBQUNGLFVBQUEsdUJBQUEsRUFBNkI7QUFDekJILFFBQUFBLElBQUFBLENBQUFBLFNBQUFBLENBQUFBLENBQUFBLE1BQUFBLENBQUFBLHVCQUFBQTtBQUNIOztBQUNESCxNQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE1BQUFBLEdBQUFBLEVBQUFBO0FBQ0FBLE1BQUFBLElBQUksQ0FBSkEsS0FBQUEsQ0FBQUEsT0FBQUEsR0FBQUEsRUFBQUE7QUFDQU8sTUFBQUEsSUFBSTtBQUNQO0FBNUI0QyxHQUExQyxDQUFQO0FBOEJIOztBQUNELElBQU1DLFNBQVMsR0FBRztBQUNkQyxFQUFBQSxLQURjLEVBQUEsU0FBQSxLQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsRUFDSTtBQUNkLFdBQU9DLE9BQU8sQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFkLElBQWMsQ0FBZDtBQUZVLEdBQUE7QUFJZEMsRUFBQUEsS0FKYyxFQUFBLFNBQUEsS0FBQSxDQUFBLElBQUEsRUFBQSxJQUFBLEVBSUk7QUFDZCxXQUFPRCxPQUFPLENBQUEsSUFBQSxFQUFBLEtBQUEsRUFBZCxJQUFjLENBQWQ7QUFMVSxHQUFBO0FBT2RFLEVBQUFBLE1BUGMsRUFBQSxTQUFBLE1BQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQU9LO0FBQ2YsV0FBT0YsT0FBTyxDQUFBLElBQUEsRUFBQSxJQUFBLEVBQWQsSUFBYyxDQUFkO0FBQ0g7QUFUYSxDQUFsQjtlQVdlRixTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNzc0FuaW1hdGlvbiBmcm9tICdjc3MtYW5pbWF0aW9uJztcbmltcG9ydCByYWYgZnJvbSAncmFmJztcbmZ1bmN0aW9uIGFuaW1hdGUobm9kZSwgc2hvdywgZG9uZSkge1xuICAgIGxldCBoZWlnaHQ7XG4gICAgbGV0IHJlcXVlc3RBbmltYXRpb25GcmFtZUlkO1xuICAgIHJldHVybiBjc3NBbmltYXRpb24obm9kZSwgJ2M3bi1tb3Rpb24tY29sbGFwc2UnLCB7XG4gICAgICAgIHN0YXJ0KCkge1xuICAgICAgICAgICAgaWYgKCFzaG93KSB7XG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBgJHtub2RlLm9mZnNldEhlaWdodH1weGA7XG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gbm9kZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSAnMHB4JztcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2ZSgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCkge1xuICAgICAgICAgICAgICAgIHJhZi5jYW5jZWwocmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgPSByYWYoKCkgPT4ge1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gYCR7c2hvdyA/IGhlaWdodCA6IDB9cHhgO1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUub3BhY2l0eSA9IHNob3cgPyAnMScgOiAnMCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZW5kKCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RBbmltYXRpb25GcmFtZUlkKSB7XG4gICAgICAgICAgICAgICAgcmFmLmNhbmNlbChyZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgbm9kZS5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59XG5jb25zdCBhbmltYXRpb24gPSB7XG4gICAgZW50ZXIobm9kZSwgZG9uZSkge1xuICAgICAgICByZXR1cm4gYW5pbWF0ZShub2RlLCB0cnVlLCBkb25lKTtcbiAgICB9LFxuICAgIGxlYXZlKG5vZGUsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGUobm9kZSwgZmFsc2UsIGRvbmUpO1xuICAgIH0sXG4gICAgYXBwZWFyKG5vZGUsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGUobm9kZSwgdHJ1ZSwgZG9uZSk7XG4gICAgfSxcbn07XG5leHBvcnQgZGVmYXVsdCBhbmltYXRpb247XG4iXX0=