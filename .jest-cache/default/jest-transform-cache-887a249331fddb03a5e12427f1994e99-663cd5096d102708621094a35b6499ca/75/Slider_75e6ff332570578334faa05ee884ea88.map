{"version":3,"sources":["Slider.jsx"],"names":["Slider","props","setState","dragging","removeDocumentEvents","onAfterChange","getValue","defaultValue","undefined","min","value","state","trimAlignValue","process","env","NODE_ENV","autoFocus","disabled","focus","nextProps","prevValue","nextValue","utils","isValueOutOfRange","onChange","isNotControlled","changedValue","position","onBeforeChange","calcValueByPos","startValue","startPosition","prevMovedHandleIndex","e","pauseEvent","oldValue","valueMutator","getKeyboardValueMutator","mutatedValue","v","mergedProps","val","ensureValueInRange","ensureValuePrecision","prefixCls","vertical","included","minimumTrackStyle","trackStyle","handleStyle","tabIndex","max","handleGenerator","handle","offset","calcOffset","className","index","style","ref","h","saveHandle","_trackStyle","track","tracks","handles","Component","PropTypes","number","bool"],"mappings":"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","sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport warning from '../../_util/warning';\nimport Track from './common/Track';\nimport createSlider from './common/createSlider';\nimport * as utils from './utils';\n\nclass Slider extends Component {\n  static propTypes = {\n    defaultValue: PropTypes.number,\n    value: PropTypes.number,\n    disabled: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    tabIndex: PropTypes.number,\n  };\n\n  constructor(props) {\n    super(props);\n\n    const defaultValue = props.defaultValue !== undefined ?\n            props.defaultValue : props.min;\n    const value = props.value !== undefined ?\n            props.value : defaultValue;\n\n    this.state = {\n      value: this.trimAlignValue(value),\n      dragging: false,\n    };\n    if (process.env.NODE_ENV !== 'production') {\n      warning(\n        !('minimumTrackStyle' in props),\n        'minimumTrackStyle will be deprecate, please use trackStyle instead.'\n      );\n      warning(\n        !('maximumTrackStyle' in props),\n        'maximumTrackStyle will be deprecate, please use railStyle instead.'\n      );\n    }\n  }\n\n  componentDidMount() {\n    const { autoFocus, disabled } = this.props;\n    if (autoFocus && !disabled) {\n      this.focus();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!('value' in nextProps || 'min' in nextProps || 'max' in nextProps)) return;\n\n    const prevValue = this.state.value;\n    const value = nextProps.value !== undefined ?\n            nextProps.value : prevValue;\n    const nextValue = this.trimAlignValue(value, nextProps);\n    if (nextValue === prevValue) return;\n\n    this.setState({ value: nextValue });\n    if (utils.isValueOutOfRange(value, nextProps)) {\n      this.props.onChange(nextValue);\n    }\n  }\n\n  onChange(state) {\n    const props = this.props;\n    const isNotControlled = !('value' in props);\n    if (isNotControlled) {\n      this.setState(state);\n    }\n\n    const changedValue = state.value;\n    props.onChange(changedValue);\n  }\n\n  onStart(position) {\n    this.setState({ dragging: true });\n    const props = this.props;\n    const prevValue = this.getValue();\n    props.onBeforeChange(prevValue);\n\n    const value = this.calcValueByPos(position);\n    this.startValue = value;\n    this.startPosition = position;\n\n    if (value === prevValue) return;\n\n    this.prevMovedHandleIndex = 0;\n\n    this.onChange({ value });\n  }\n\n  onEnd = () => {\n    this.setState({ dragging: false });\n    this.removeDocumentEvents();\n    this.props.onAfterChange(this.getValue());\n  }\n\n  onMove(e, position) {\n    utils.pauseEvent(e);\n    const { value: oldValue } = this.state;\n    const value = this.calcValueByPos(position);\n    if (value === oldValue) return;\n\n    this.onChange({ value });\n  }\n\n  onKeyboard(e) {\n    const valueMutator = utils.getKeyboardValueMutator(e);\n\n    if (valueMutator) {\n      utils.pauseEvent(e);\n      const state = this.state;\n      const oldValue = state.value;\n      const mutatedValue = valueMutator(oldValue, this.props);\n      const value = this.trimAlignValue(mutatedValue);\n      if (value === oldValue) return;\n\n      this.onChange({ value });\n    }\n  }\n\n  getValue() {\n    return this.state.value;\n  }\n\n  getLowerBound() {\n    return this.props.min;\n  }\n\n  getUpperBound() {\n    return this.state.value;\n  }\n\n  trimAlignValue(v, nextProps = {}) {\n    const mergedProps = { ...this.props, ...nextProps };\n    const val = utils.ensureValueInRange(v, mergedProps);\n    return utils.ensureValuePrecision(val, mergedProps);\n  }\n\n  render() {\n    const {\n      prefixCls,\n      vertical,\n      included,\n      disabled,\n      minimumTrackStyle,\n      trackStyle,\n      handleStyle,\n      tabIndex,\n      min,\n      max,\n      handle: handleGenerator,\n    } = this.props;\n    const { value, dragging } = this.state;\n    const offset = this.calcOffset(value);\n    const handle = handleGenerator({\n      className: `${prefixCls}-handle`,\n      prefixCls,\n      vertical,\n      offset,\n      value,\n      dragging,\n      disabled,\n      min,\n      max,\n      index: 0,\n      tabIndex,\n      style: handleStyle[0] || handleStyle,\n      ref: h => this.saveHandle(0, h),\n    });\n\n    const _trackStyle = trackStyle[0] || trackStyle;\n    const track = (\n      <Track\n        className={`${prefixCls}-track`}\n        vertical={vertical}\n        included={included}\n        offset={0}\n        length={offset}\n        style={{\n          ...minimumTrackStyle,\n          ..._trackStyle,\n        }}\n      />\n    );\n\n    return { tracks: track, handles: handle };\n  }\n}\n\nexport default createSlider(Slider);\n"]}