dde9f9dd8d8e61604cc296ed198ada50
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("../../pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("../../pro/lib/data-set/FeedBack"));

var _utils = require("../../pro/lib/form/utils");

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};
var defaultSpinProps = {
  size: "default"
  /* default */
  ,
  wrapperClassName: ''
};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['collapseExpandIconPosition', 'left'], ['collapseTrigger', 'header'], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['lovTriggerMode', "icon"
/* icon */
], ['lovTableProps', {}], ['lovModalProps', {}], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableSelectedHighLightRow', false], ['tableRowHeight', 30], ['tableDefaultRenderer', ''], ['tableColumnResizable', true], ['tableSpinProps', defaultSpinProps], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['tableAlwaysShowRowBox', false], ['tableUseMouseBatchChoose', false], ['tableEditorNextKeyEnterDown', true], ['modalSectionBorder', true], ['modalOkFirst', true], ['drawerOkFirst', undefined], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}], ['dropdownMatchSelectWidth', true], ['useColon', false], ['excludeUseColonTagList', _utils.defaultExcludeUseColonTag], ['textFieldAutoComplete', undefined], ['tableDragRow', false], ['tableDragColumn', false], ['numberFieldNonStrictStep', false], ['numberFieldFormatter', undefined], ['numberFieldFormatterOptions', undefined]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZ3VyZS9pbmRleC5qcyJdLCJuYW1lcyI6WyJkZWZhdWx0UmVuZGVyRW1wdHkiLCJkZWZhdWx0QnV0dG9uUHJvcHMiLCJjb2xvciIsImZ1bmNUeXBlIiwiZGVmYXVsdFNwaW5Qcm9wcyIsInNpemUiLCJ3cmFwcGVyQ2xhc3NOYW1lIiwiZ2xvYmFsQ29uZmlnIiwib2JzZXJ2YWJsZSIsIm1heEFnZSIsIm1heCIsImRlZmF1bHRGZWVkYmFjayIsImNhdGVnb3JpZXMiLCJqc29uRGF0ZSIsImRhdGUiLCJkYXRlVGltZSIsInRpbWUiLCJ5ZWFyIiwibW9udGgiLCJ3ZWVrIiwiZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZyIsImdldENvbmZpZyIsIm1lcmdlUHJvcHMiLCJPYmplY3QiLCJ2YWx1ZSIsImNvbmZpZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUE7O0FBQ0EsSUFBQSxTQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsaUJBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsZ0JBQUEsR0FBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQTs7QUFDQSxJQUFBLGNBQUEsR0FBQSxPQUFBLENBQUEsOEJBQUEsQ0FBQTs7QUFDQSxJQUFBLFNBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxpQ0FBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxNQUFBLEdBQUEsT0FBQSxDQUFBLDBCQUFBLENBQUE7Ozs7QUFDQSxJQUFNQSxrQkFBa0IsR0FBRyxTQUFyQkEsa0JBQXFCLENBQUEsYUFBQSxFQUFtQjtBQUMxQyxVQUFBLGFBQUE7QUFDSSxTQUFBLE9BQUE7QUFDSSxhQUFPLENBQUEsR0FBQSxjQUFBLENBQUEsRUFBQSxFQUFBLE9BQUEsRUFBUCxZQUFPLENBQVA7O0FBQ0osU0FBQSxRQUFBO0FBQ0ksYUFBTyxDQUFBLEdBQUEsY0FBQSxDQUFBLEVBQUEsRUFBQSxRQUFBLEVBQVAscUJB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LElBQUFBLE1BQU0sQ0FBTkEsSUFBQUEsQ0FBQUEsTUFBQUEsRUFBQUEsT0FBQUEsQ0FBNEIsVUFBQSxHQUFBLEVBQVM7QUFDakMsVUFBTUMsS0FBSyxHQUFHQyxNQUFNLENBQXBCLEdBQW9CLENBQXBCOztBQUNBLFVBQUlILFVBQVUsQ0FBVkEsUUFBQUEsQ0FBQUEsR0FBQUEsS0FBNEIsQ0FBQSxHQUFBLFNBQUEsQ0FBQSxTQUFBLENBQUEsRUFBaEMsS0FBZ0MsQ0FBaEMsRUFBaUQ7QUFDN0NmLFFBQUFBLFlBQVksQ0FBWkEsR0FBQUEsQ0FBQUEsR0FBQUEsRUFBQUEsQ0FBQUEsR0FBQUEsY0FBQUEsQ0FBQUEsU0FBQUEsQ0FBQUEsRUFBQUEsRUFBQUEsRUFDTyxDQUFBLEdBQUEsS0FBQSxDQUFBLElBQUEsRUFBS0EsWUFBWSxDQUFaQSxHQUFBQSxDQURaQSxHQUNZQSxDQUFMLENBRFBBLEVBQUFBLEVBQUFBLEVBQUFBLEtBQUFBLENBQUFBO0FBREosT0FBQSxNQU1LO0FBQ0RBLFFBQUFBLFlBQVksQ0FBWkEsR0FBQUEsQ0FBQUEsR0FBQUEsRUFBc0JrQixNQUFNLENBQTVCbEIsR0FBNEIsQ0FBNUJBO0FBQ0g7QUFWTGdCLEtBQUFBO0FBREosR0FBQTtBQWNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb2JzZXJ2YWJsZSwgcnVuSW5BY3Rpb24sIHRvSlMgfSBmcm9tICdtb2J4JztcbmltcG9ydCBpc09iamVjdCBmcm9tICdsb2Rhc2gvaXNPYmplY3QnO1xuaW1wb3J0IHsgY2F0ZWdvcmllcyB9IGZyb20gJ2Nob2Vyb2Rvbi11aS1mb250JztcbmltcG9ydCB7ICRsIH0gZnJvbSAnLi4vLi4vcHJvL2xpYi9sb2NhbGUtY29udGV4dCc7XG5pbXBvcnQgZGVmYXVsdEZlZWRiYWNrIGZyb20gJy4uLy4uL3Byby9saWIvZGF0YS1zZXQvRmVlZEJhY2snO1xuaW1wb3J0IHsgZGVmYXVsdEV4Y2x1ZGVVc2VDb2xvblRhZyB9IGZyb20gJy4uLy4uL3Byby9saWIvZm9ybS91dGlscyc7XG5jb25zdCBkZWZhdWx0UmVuZGVyRW1wdHkgPSAoY29tcG9uZW50TmFtZSkgPT4ge1xuICAgIHN3aXRjaCAoY29tcG9uZW50TmFtZSkge1xuICAgICAgICBjYXNlICdUYWJsZSc6XG4gICAgICAgICAgICByZXR1cm4gJGwoJ1RhYmxlJywgJ2VtcHR5X2RhdGEnKTtcbiAgICAgICAgY2FzZSAnU2VsZWN0JzpcbiAgICAgICAgICAgIHJldHVybiAkbCgnU2VsZWN0JywgJ25vX21hdGNoaW5nX3Jlc3VsdHMnKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICB9XG59O1xuY29uc3QgZGVmYXVsdEJ1dHRvblByb3BzID0geyBjb2xvcjogXCJwcmltYXJ5XCIgLyogcHJpbWFyeSAqLywgZnVuY1R5cGU6IFwiZmxhdFwiIC8qIGZsYXQgKi8gfTtcbmNvbnN0IGRlZmF1bHRTcGluUHJvcHMgPSB7IHNpemU6IFwiZGVmYXVsdFwiIC8qIGRlZmF1bHQgKi8sIHdyYXBwZXJDbGFzc05hbWU6ICcnIH07XG5jb25zdCBnbG9iYWxDb25maWcgPSBvYnNlcnZhYmxlLm1hcChbXG4gICAgWydwcmVmaXhDbHMnLCAnYzduJ10sXG4gICAgWydwcm9QcmVmaXhDbHMnLCAnYzduLXBybyddLFxuICAgIFsnaWNvbmZvbnRQcmVmaXgnLCAnaWNvbiddLFxuICAgIFsncmlwcGxlJywgdHJ1ZV0sXG4gICAgWydjb2xsYXBzZUV4cGFuZEljb25Qb3NpdGlvbicsICdsZWZ0J10sXG4gICAgWydjb2xsYXBzZVRyaWdnZXInLCAnaGVhZGVyJ10sXG4gICAgWydsb29rdXBDYWNoZScsIHsgbWF4QWdlOiAxMDAwICogNjAgKiAxMCwgbWF4OiAxMDAgfV0sXG4gICAgWydsb29rdXBVcmwnLCBjb2RlID0+IGAvY29tbW9uL2NvZGUvJHtjb2RlfS9gXSxcbiAgICBbJ2xvb2t1cEF4aW9zTWV0aG9kJywgJ3Bvc3QnXSxcbiAgICAvLyBbXG4gICAgLy8gICAnbG9va3VwQmF0Y2hBeGlvc0NvbmZpZycsXG4gICAgLy8gICBjb2RlcyA9PiAoe1xuICAgIC8vICAgICB1cmw6ICcvY29tbW9uL2JhdGNoJyxcbiAgICAvLyAgICAgcGFyYW1zOiBjb2Rlcy5yZWR1Y2UoKG9iaiwgY29kZSkgPT4ge1xuICAgIC8vICAgICAgIG9ialtjb2RlXSA9IGNvZGU7XG4gICAgLy8gICAgICAgcmV0dXJuIG9iajtcbiAgICAvLyAgICAgfSwge30pLFxuICAgIC8vICAgfSksXG4gICAgLy8gXSxcbiAgICBbJ2xvdkRlZmluZVVybCcsIGNvZGUgPT4gYC9zeXMvbG92L2xvdl9kZWZpbmU/Y29kZT0ke2NvZGV9YF0sXG4gICAgWydsb3ZRdWVyeVVybCcsIGNvZGUgPT4gYC9jb21tb24vbG92L2RhdGFzZXQvJHtjb2RlfWBdLFxuICAgIFsnbG92VHJpZ2dlck1vZGUnLCBcImljb25cIiAvKiBpY29uICovXSxcbiAgICBbJ2xvdlRhYmxlUHJvcHMnLCB7fV0sXG4gICAgWydsb3ZNb2RhbFByb3BzJywge31dLFxuICAgIFsnZGF0YUtleScsICdyb3dzJ10sXG4gICAgWyd0b3RhbEtleScsICd0b3RhbCddLFxuICAgIFsnc3RhdHVzS2V5JywgJ19fc3RhdHVzJ10sXG4gICAgWyd0bHNLZXknLCAnX190bHMnXSxcbiAgICBbXG4gICAgICAgICdzdGF0dXMnLFxuICAgICAgICB7IFtcImFkZFwiIC8qIGFkZCAqL106ICdhZGQnLCBbXCJ1cGRhdGVcIiAvKiB1cGRhdGUgKi9dOiAndXBkYXRlJywgW1wiZGVsZXRlXCIgLyogZGVsZXRlICovXTogJ2RlbGV0ZScgfSxcbiAgICBdLFxuICAgIFsnbGFiZWxMYXlvdXQnLCBcImhvcml6b250YWxcIiAvKiBob3Jpem9udGFsICovXSxcbiAgICBbJ3F1ZXJ5QmFyJywgXCJub3JtYWxcIiAvKiBub3JtYWwgKi9dLFxuICAgIFsndGFibGVCb3JkZXInLCB0cnVlXSxcbiAgICBbJ3RhYmxlSGlnaExpZ2h0Um93JywgdHJ1ZV0sXG4gICAgWyd0YWJsZVNlbGVjdGVkSGlnaExpZ2h0Um93JywgZmFsc2VdLFxuICAgIFsndGFibGVSb3dIZWlnaHQnLCAzMF0sXG4gICAgWyd0YWJsZURlZmF1bHRSZW5kZXJlcicsICcnXSxcbiAgICBbJ3RhYmxlQ29sdW1uUmVzaXphYmxlJywgdHJ1ZV0sXG4gICAgWyd0YWJsZVNwaW5Qcm9wcycsIGRlZmF1bHRTcGluUHJvcHNdLFxuICAgIFsndGFibGVCdXR0b25Qcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gICAgWyd0YWJsZUNvbW1hbmRQcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gICAgWyd0YWJsZUFsd2F5c1Nob3dSb3dCb3gnLCBmYWxzZV0sXG4gICAgWyd0YWJsZVVzZU1vdXNlQmF0Y2hDaG9vc2UnLCBmYWxzZV0sXG4gICAgWyd0YWJsZUVkaXRvck5leHRLZXlFbnRlckRvd24nLCB0cnVlXSxcbiAgICBbJ21vZGFsU2VjdGlvbkJvcmRlcicsIHRydWVdLFxuICAgIFsnbW9kYWxPa0ZpcnN0JywgdHJ1ZV0sXG4gICAgWydkcmF3ZXJPa0ZpcnN0JywgdW5kZWZpbmVkXSxcbiAgICBbJ2J1dHRvbkNvbG9yJywgXCJkZWZhdWx0XCIgLyogZGVmYXVsdCAqL10sXG4gICAgWydidXR0b25GdW5jVHlwZScsIFwicmFpc2VkXCIgLyogcmFpc2VkICovXSxcbiAgICBbJ2ZlZWRiYWNrJywgZGVmYXVsdEZlZWRiYWNrXSxcbiAgICBbJ3JlbmRlckVtcHR5JywgZGVmYXVsdFJlbmRlckVtcHR5XSxcbiAgICBbJ2ljb25zJywgY2F0ZWdvcmllc10sXG4gICAgW1xuICAgICAgICAnZm9ybWF0dGVyJyxcbiAgICAgICAge1xuICAgICAgICAgICAganNvbkRhdGU6ICdZWVlZLU1NLUREIEhIOm1tOnNzJyxcbiAgICAgICAgICAgIGRhdGU6ICdZWVlZLU1NLUREJyxcbiAgICAgICAgICAgIGRhdGVUaW1lOiAnWVlZWS1NTS1ERCBISDptbTpzcycsXG4gICAgICAgICAgICB0aW1lOiAnSEg6bW06c3MnLFxuICAgICAgICAgICAgeWVhcjogJ1lZWVknLFxuICAgICAgICAgICAgbW9udGg6ICdZWVlZLU1NJyxcbiAgICAgICAgICAgIHdlZWs6ICdHR0dHLVdvJyxcbiAgICAgICAgfSxcbiAgICBdLFxuICAgIFsnZHJvcGRvd25NYXRjaFNlbGVjdFdpZHRoJywgdHJ1ZV0sXG4gICAgWyd1c2VDb2xvbicsIGZhbHNlXSxcbiAgICBbJ2V4Y2x1ZGVVc2VDb2xvblRhZ0xpc3QnLCBkZWZhdWx0RXhjbHVkZVVzZUNvbG9uVGFnXSxcbiAgICBbJ3RleHRGaWVsZEF1dG9Db21wbGV0ZScsIHVuZGVmaW5lZF0sXG4gICAgWyd0YWJsZURyYWdSb3cnLCBmYWxzZV0sXG4gICAgWyd0YWJsZURyYWdDb2x1bW4nLCBmYWxzZV0sXG4gICAgWydudW1iZXJGaWVsZE5vblN0cmljdFN0ZXAnLCBmYWxzZV0sXG4gICAgWydudW1iZXJGaWVsZEZvcm1hdHRlcicsIHVuZGVmaW5lZF0sXG4gICAgWydudW1iZXJGaWVsZEZvcm1hdHRlck9wdGlvbnMnLCB1bmRlZmluZWRdLFxuXSk7XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlnKGtleSkge1xuICAgIC8vIEZJWE1FOiBvYnNlcnZhYmxlLm1hcOaKiuaehOW7um1hcOaXtuS8oOWFpeeahGtleeexu+Wei+WSjHZhbHVl57G75Z6L5YiG5Yir5YGa5LqGdW5pb27vvIxcbiAgICAvLyDkuKLlpLHkuobkuIDkuIDlr7nlupTnmoTmmKDlsITlhbPns7vvvIzlr7zoh7Tlh73mlbDosIPnlKjogIXml6Dms5Xkvb/nlKh1bmlvbuWQjueahOi/lOWbnuWAvOexu+Wei++8jOWboOatpOmcgOimgeaMh+WumuacrOWHveaVsOi/lOWbnuWAvOS4umFueVxuICAgIHJldHVybiBnbG9iYWxDb25maWcuZ2V0KGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJlZml4Q2xzKHN1ZmZpeENscywgY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgaWYgKGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgICAgICByZXR1cm4gY3VzdG9taXplUHJlZml4Q2xzO1xuICAgIH1cbiAgICByZXR1cm4gYCR7Z2V0Q29uZmlnKCdwcmVmaXhDbHMnKX0tJHtzdWZmaXhDbHN9YDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9QcmVmaXhDbHMoc3VmZml4Q2xzLCBjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICBpZiAoY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgICAgIHJldHVybiBjdXN0b21pemVQcmVmaXhDbHM7XG4gICAgfVxuICAgIHJldHVybiBgJHtnZXRDb25maWcoJ3Byb1ByZWZpeENscycpfS0ke3N1ZmZpeENsc31gO1xufVxuY29uc3QgbWVyZ2VQcm9wcyA9IFsndHJhbnNwb3J0JywgJ2ZlZWRiYWNrJywgJ2Zvcm1hdHRlciddO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29uZmlndXJlKGNvbmZpZykge1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29uZmlnW2tleV07XG4gICAgICAgICAgICBpZiAobWVyZ2VQcm9wcy5pbmNsdWRlcyhrZXkpICYmIGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGdsb2JhbENvbmZpZy5zZXQoa2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRvSlMoZ2xvYmFsQ29uZmlnLmdldChrZXkpKSxcbiAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxDb25maWcuc2V0KGtleSwgY29uZmlnW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbiJdfQ==