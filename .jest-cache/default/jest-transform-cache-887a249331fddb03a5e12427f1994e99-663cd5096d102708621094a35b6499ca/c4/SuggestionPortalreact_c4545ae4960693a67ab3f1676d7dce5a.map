{"version":3,"sources":["SuggestionPortal.react.jsx"],"names":["SuggestionPortal","props","callbacks","suggestionRegex","decoratedText","matches","exec","trigger","updatePortalPosition","setEditorState","getEditorState","matchDecorates","nextProps","offsetKey","mentionStore","inActiveSuggestion","updateSuggestion","position","element","searchPortal","rect","left","top","width","offsetWidth","height","offsetHeight","node","style","children","Component","PropTypes","any","object","string"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;IAEqBA,gB;;;;;;;;;;;;;;;;;uGAqBF,UAACC,KAAD,EAAW;AAAA,UAClBC,SADkB,GAC4BD,KAD5B,CAClBC,SADkB;AAAA,UACPC,eADO,GAC4BF,KAD5B,CACPE,eADO;AAAA,UACUC,aADV,GAC4BH,KAD5B,CACUG,aADV;AAE1B,UAAMC,OAAO,GAAGF,eAAe,CAACG,IAAhB,CAAqBF,aAArB,CAAhB;AACA,YAAKG,OAAL,GAAeF,OAAO,CAAC,CAAD,CAAtB;;AACA,YAAKG,oBAAL,CAA0B,MAAKP,KAA/B;;AACAC,MAAAA,SAAS,CAACO,cAAV,CAAyBP,SAAS,CAACQ,cAAV,EAAzB;AACD,K;;;;;;yCAjBoB;AACnB,WAAKC,cAAL,CAAoB,KAAKV,KAAzB;AACD;;;8CAEyBW,S,EAAW;AACnC,UAAIA,SAAS,CAACR,aAAV,KAA4B,KAAKH,KAAL,CAAWG,aAA3C,EAA0D;AACxD,aAAKO,cAAL,CAAoBC,SAApB;AACD;;AACD,WAAKJ,oBAAL,CAA0BI,SAA1B;AACD;;;2CAUsB;AAAA,wBACe,KAAKX,KADpB;AAAA,UACbY,SADa,eACbA,SADa;AAAA,UACFC,YADE,eACFA,YADE;AAErBA,MAAAA,YAAY,CAACC,kBAAb,CAAgC;AAAEF,QAAAA,SAAS,EAATA;AAAF,OAAhC;AACD;;;yCAEoBZ,K,EAAO;AAAA;;AAAA,UAClBY,SADkB,GACUZ,KADV,CAClBY,SADkB;AAAA,UACPC,YADO,GACUb,KADV,CACPa,YADO;AAE1BA,MAAAA,YAAY,CAACE,gBAAb,CAA8B;AAC5BH,QAAAA,SAAS,EAATA,SAD4B;AAE5BN,QAAAA,OAAO,EAAE,KAAKA,OAFc;AAG5BU,QAAAA,QAAQ,EAAE,oBAAM;AACd,cAAMC,OAAO,GAAG,MAAI,CAACC,YAArB;AACA,cAAMC,IAAI,GAAG,2BAAUF,OAAV,CAAb;AACA,iBAAO;AACLG,YAAAA,IAAI,EAAED,IAAI,CAACC,IADN;AAELC,YAAAA,GAAG,EAAEF,IAAI,CAACE,GAFL;AAGLC,YAAAA,KAAK,EAAEL,OAAO,CAACM,WAHV;AAILC,YAAAA,MAAM,EAAEP,OAAO,CAACQ;AAJX,WAAP;AAMD;AAZ2B,OAA9B;AAcD;;;6BAEQ;AAAA;;AACP,aACE;AAAM,QAAA,GAAG,EAAE,aAACC,IAAD,EAAU;AACnB,UAAA,MAAI,CAACR,YAAL,GAAoBQ,IAApB;AACD,SAFD;AAEG,QAAA,KAAK,EAAE,KAAK1B,KAAL,CAAW2B;AAFrB,SAGG,KAAK3B,KAAL,CAAW4B,QAHd,CADF;AAOD;;;EA5D2CC,gB;;;iCAAzB9B,gB,eACA;AACjBa,EAAAA,SAAS,EAAEkB,sBAAUC,GADJ;AAEjBlB,EAAAA,YAAY,EAAEiB,sBAAUE,MAFP;AAGjB7B,EAAAA,aAAa,EAAE2B,sBAAUG,MAHR;AAIjBL,EAAAA,QAAQ,EAAEE,sBAAUC,GAJH;AAKjB9B,EAAAA,SAAS,EAAE6B,sBAAUC,GALJ;AAMjB7B,EAAAA,eAAe,EAAE4B,sBAAUC;AANV,C","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport getOffset from '../utils/getOffset';\n\nexport default class SuggestionPortal extends Component {\n  static propTypes = {\n    offsetKey: PropTypes.any,\n    mentionStore: PropTypes.object,\n    decoratedText: PropTypes.string,\n    children: PropTypes.any,\n    callbacks: PropTypes.any,\n    suggestionRegex: PropTypes.any,\n  };\n\n  componentWillMount() {\n    this.matchDecorates(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.decoratedText !== this.props.decoratedText) {\n      this.matchDecorates(nextProps);\n    }\n    this.updatePortalPosition(nextProps);\n  }\n\n  matchDecorates = (props) => {\n    const { callbacks, suggestionRegex, decoratedText } = props;\n    const matches = suggestionRegex.exec(decoratedText);\n    this.trigger = matches[2];\n    this.updatePortalPosition(this.props);\n    callbacks.setEditorState(callbacks.getEditorState());\n  };\n\n  componentWillUnmount() {\n    const { offsetKey, mentionStore } = this.props;\n    mentionStore.inActiveSuggestion({ offsetKey });\n  }\n\n  updatePortalPosition(props) {\n    const { offsetKey, mentionStore } = props;\n    mentionStore.updateSuggestion({\n      offsetKey,\n      trigger: this.trigger,\n      position: () => {\n        const element = this.searchPortal;\n        const rect = getOffset(element);\n        return {\n          left: rect.left,\n          top: rect.top,\n          width: element.offsetWidth,\n          height: element.offsetHeight,\n        };\n      },\n    });\n  }\n\n  render() {\n    return (\n      <span ref={(node) => {\n        this.searchPortal = node;\n      }} style={this.props.style}>\n        {this.props.children}\n      </span>\n    );\n  }\n}\n"]}