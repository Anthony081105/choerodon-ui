{"version":3,"sources":["util/ContainerRender.jsx"],"names":["ContainerRender","Component","autoMount","PropTypes","autoDestroy","visible","forceRender","parent","getComponent","getContainer","children","isRequired","ReactDOM","ready","renderComponent","removeContainer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,IAAA,SAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;AACA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,CAAA;;IAEqBA,e;;;;;;;;;;;;;;;;;wGAoCD,YAAM;AACtB,UAAI,KAAA,CAAJ,SAAA,EAAoB;AAClBY,QAAAA,SAAAA,CAAAA,SAAAA,CAAAA,CAAAA,sBAAAA,CAAgC,KAAA,CAAhCA,SAAAA;;AACA,QAAA,KAAA,CAAA,SAAA,CAAA,UAAA,CAAA,WAAA,CAAsC,KAAA,CAAtC,SAAA;;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AACD;;wGAGe,UAAA,KAAA,EAAA,KAAA,EAAkB;AAAA,UAAA,WAAA,GACmC,KAAA,CADnC,KAAA;AAAA,UAC1BP,OAD0B,GAAA,WAAA,CAAA,OAAA;AAAA,UACjBG,YADiB,GAAA,WAAA,CAAA,YAAA;AAAA,UACHF,WADG,GAAA,WAAA,CAAA,WAAA;AAAA,UACUG,YADV,GAAA,WAAA,CAAA,YAAA;AAAA,UACwBF,MADxB,GAAA,WAAA,CAAA,MAAA;;AAElC,UAAIF,OAAO,IAAIE,MAAM,CAAjBF,UAAAA,IAAJ,WAAA,EAAiD;AAC/C,YAAI,CAAC,KAAA,CAAL,SAAA,EAAqB;AACnB,UAAA,KAAA,CAAA,SAAA,GAAiBI,YAAjB,EAAA;AACD;;AACDG,QAAAA,SAAAA,CAAAA,SAAAA,CAAAA,CAAAA,mCAAAA,CAAAA,MAAAA,EAEEJ,YAAY,CAFdI,KAEc,CAFdA,EAGE,KAAA,CAHFA,SAAAA,EAIE,SAAA,QAAA,GAAoB;AAClB,cAAA,KAAA,EAAW;AACTC,YAAAA,KAAK,CAALA,IAAAA,CAAAA,IAAAA;AACD;AAPLD,SAAAA;AAUD;;;;;;;wCA1CiB;AAClB,UAAI,KAAA,KAAA,CAAJ,SAAA,EAA0B;AACxB,aAAA,eAAA;AACD;AACF;;;yCAEoB;AACnB,UAAI,KAAA,KAAA,CAAJ,SAAA,EAA0B;AACxB,aAAA,eAAA;AACD;AACF;;;2CAEsB;AACrB,UAAI,KAAA,KAAA,CAAJ,WAAA,EAA4B;AAC1B,aAAA,eAAA;AACD;AACF;;;6BA6BQ;AACP,aAAO,KAAA,KAAA,CAAA,QAAA,CAAoB;AACzBE,QAAAA,eAAe,EAAE,KADQ,eAAA;AAEzBC,QAAAA,eAAe,EAAE,KAAKA;AAFG,OAApB,CAAP;AAID;;;EApE0Cd,MAAAA,CAAAA,S;;;iCAAxBD,e,eACA;AACjBE,EAAAA,SAAS,EAAEC,UAAAA,CAAAA,SAAAA,CAAAA,CADM,IAAA;AAEjBC,EAAAA,WAAW,EAAED,UAAAA,CAAAA,SAAAA,CAAAA,CAFI,IAAA;AAGjBE,EAAAA,OAAO,EAAEF,UAAAA,CAAAA,SAAAA,CAAAA,CAHQ,IAAA;AAIjBG,EAAAA,WAAW,EAAEH,UAAAA,CAAAA,SAAAA,CAAAA,CAJI,IAAA;AAKjBI,EAAAA,MAAM,EAAEJ,UAAAA,CAAAA,SAAAA,CAAAA,CALS,GAAA;AAMjBK,EAAAA,YAAY,EAAEL,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,IAAAA,CANG,UAAA;AAOjBM,EAAAA,YAAY,EAAEN,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,IAAAA,CAPG,UAAA;AAQjBO,EAAAA,QAAQ,EAAEP,UAAAA,CAAAA,SAAAA,CAAAA,CAAAA,IAAAA,CAAeQ;AARR,C;iCADAX,e,kBAYG;AACpBE,EAAAA,SAAS,EADW,IAAA;AAEpBE,EAAAA,WAAW,EAFS,IAAA;AAGpBE,EAAAA,WAAW,EAAE;AAHO,C","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class ContainerRender extends Component {\n  static propTypes = {\n    autoMount: PropTypes.bool,\n    autoDestroy: PropTypes.bool,\n    visible: PropTypes.bool,\n    forceRender: PropTypes.bool,\n    parent: PropTypes.any,\n    getComponent: PropTypes.func.isRequired,\n    getContainer: PropTypes.func.isRequired,\n    children: PropTypes.func.isRequired,\n  }\n\n  static defaultProps = {\n    autoMount: true,\n    autoDestroy: true,\n    forceRender: false,\n  }\n\n  componentDidMount() {\n    if (this.props.autoMount) {\n      this.renderComponent();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.autoMount) {\n      this.renderComponent();\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.props.autoDestroy) {\n      this.removeContainer();\n    }\n  }\n\n  removeContainer = () => {\n    if (this.container) {\n      ReactDOM.unmountComponentAtNode(this.container);\n      this.container.parentNode.removeChild(this.container);\n      this.container = null;\n    }\n  }\n\n  renderComponent = (props, ready) => {\n    const { visible, getComponent, forceRender, getContainer, parent } = this.props;\n    if (visible || parent._component || forceRender) {\n      if (!this.container) {\n        this.container = getContainer();\n      }\n      ReactDOM.unstable_renderSubtreeIntoContainer(\n        parent,\n        getComponent(props),\n        this.container,\n        function callback() {\n          if (ready) {\n            ready.call(this);\n          }\n        }\n      );\n    }\n  }\n\n  render() {\n    return this.props.children({\n      renderComponent: this.renderComponent,\n      removeContainer: this.removeContainer,\n    });\n  }\n}\n"]}