64718c7725ddecedd249a69e999442af
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _table = _interopRequireDefault(require("../../../components/table"));

var _button = _interopRequireDefault(require("../../../components/button"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _icon = _interopRequireDefault(require("../../../components/icon"));

var _divider = _interopRequireDefault(require("../../../components/divider"));

var _react = _interopRequireWildcard(require("react"));

var _axios = _interopRequireDefault(require("axios"));

var columns = [{
  title: 'Name',
  dataIndex: 'name',
  key: 'name1',
  render: function render(text) {
    return _react["default"].createElement("a", {
      href: "#"
    }, text);
  }
}, {
  title: 'Age',
  dataIndex: 'age',
  key: 'age1'
}, {
  title: 'Address',
  dataIndex: 'address',
  key: 'address1'
}, {
  title: '',
  key: 'action1',
  render: function render(text, record) {
    return _react["default"].createElement("span", null, _react["default"].createElement("a", {
      href: "#"
    }, "Action \u4E00 ", record.name), _react["default"].createElement(_divider["default"], {
      type: "vertical"
    }), _react["default"].createElement("a", {
      href: "#"
    }, "Delete"), _react["default"].createElement(_divider["default"], {
      type: "vertical"
    }), _react["default"].createElement("a", {
      href: "#",
      className: "c7n-dropdown-link"
    }, "More actions ", _react["default"].createElement(_icon["default"], {
      type: "down"
    })));
  }
}];
var data = [{
  key: '11',
  name: 'John Brown',
  age: 32,
  address: 'New York No. 1 Lake Park'
}, {
  key: '12',
  name: 'Jim Green',
  age: 42,
  address: 'London No. 1 Lake Park'
}, {
  key: '13',
  name: 'Joe Black',
  age: 32,
  address: 'Sidney No. 1 Lake Park'
}];

var App = function App() {
  var _useState = (0, _react.useState)(false),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      exported = _useState2[0],
      setExported = _useState2[1];

  var basicUrl = "";
  var token = "";
  var filename = "";
  var dataParam = {};
  var iframe; // eslint-disable-next-line no-unused-vars

  var handleExportPost = function handleExportPost() {
    setExported(true);

    _axios["default"].post("".concat(basicUrl, "/v1/export"), {
      _token: token,
      filename: filename
    }).then(function (res) {
      setExported(false);
      var aLink = document.createElement("a");
      var blob = new Blob([res.data], {
        type: "application/vnd.ms-excel"
      });
      aLink.href = URL.createObjectURL(blob);
      aLink.download = filename;
      aLink.click();
      document.body.appendChild(aLink);
    })["catch"](function (err) {
      setExported(false);
      console.log(err);
    });
  };

  var handleExportGet = function handleExportGet() {
    if (!iframe) {
      iframe = document.createElement('iframe');
      iframe.id = '_export_window';
      iframe.name = '_export_window';
      iframe.style.cssText = 'position:absolute;left:-10000px;top:-10000px;width:1px;height:1px;display:none';
      document.body.appendChild(iframe);
    }

    setExported(true);
    var form = document.createElement('form');
    form.target = '_export_window';
    form.method = 'get';
    form.action = 'http://gitee.com/xurime/excelize/raw/master/test/SharedStrings.xlsx';
    var s = document.createElement('input');
    s.id = '_request_data';
    s.type = 'hidden';
    s.name = '_request_data';
    s.value = JSON.stringify(dataParam);
    form.appendChild(s);
    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);
    setExported(false);
  };

  return _react["default"].createElement(_react["default"].Fragment, null, _react["default"].createElement(_button["default"], {
    type: "primary",
    onClick: handleExportGet,
    disabled: exported
  }, "\u5BFC\u51FA\u8868\u5355"), _react["default"].createElement(_table["default"], {
    columns: columns,
    dataSource: data,
    filterBarPlaceholder: "\u8FC7\u6EE4\u8868",
    onColumnFilterChange: function onColumnFilterChange(item) {
      return console.log(item);
    }
  }));
};

var __Demo = _react["default"].createElement(App, null);

var _default = __Demo;
exports["default"] = _default;