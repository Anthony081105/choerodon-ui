{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/trigger/TriggerChild.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkBqB,Y;;;;;;;AAiBnB,wBAAY,KAAZ,EAAmB,OAAnB,EAA0B;AAAA;;AAAA;AACxB,8BAAM,KAAN,EAAa,OAAb;;AACA,QAAM,YAAY,GAAG,SAAf,YAAe,CAAA,SAAS;AAAA,aAAI,UAAA,CAAC,EAAG;AACpC,YAAI,SAAS,KAAK,MAAlB,EAA0B;AAAA,4BACkB,MAAK,KADvB;AAAA,cAChB,gBADgB,eAChB,gBADgB;AAAA,cACE,WADF,eACE,WADF,EAExB;;AACA,cAAI,WAAJ,EAAiB;AACf,YAAA,gBAAgB,CAAC,KAAjB,GAAyB,KAAzB;AACD;;AALuB,cAMhB,KANgB,GAMN,gBANM,CAMhB,KANgB;;AAOxB,cAAI,KAAJ,EAAW;AACT,YAAA,CAAC,CAAC,MAAF,CAAS,KAAT;AACA;AACD;AACF;;AAZmC,2BAaa,MAAK,KAblB;AAAA,YAaR,MAbQ,4BAatB,SAbsB;AAAA,YAaA,QAbA,gBAaA,QAbA;;AAcpC,YAAM,KAAK,GAAG,gBAAS,IAAT,CAAc,QAAd,CAAd;;AACA,YAAI,MAAJ,EAAY;AACV,UAAA,MAAM,CAAC,SAAD,EAAY,KAAZ,EAAmB,CAAnB,CAAN;AACD,SAFD,MAEO,IAAI,KAAJ,EAAW;AAAA,cACY,WADZ,GAC4B,KAAK,CAAC,KADlC,aACF,SADE;;AAEhB,cAAI,WAAJ,EAAiB;AACf,YAAA,WAAW,CAAC,CAAD,CAAX;AACD;AACF;AACF,OAvB6B;AAAA,KAA9B;;AAyBA,UAAK,iBAAL,GAAyB,YAAY,CAAC,aAAD,CAArC;AACA,UAAK,WAAL,GAAmB,YAAY,CAAC,OAAD,CAA/B;AACA,UAAK,eAAL,GAAuB,YAAY,CAAC,WAAD,CAAnC;AACA,UAAK,gBAAL,GAAwB,YAAY,CAAC,YAAD,CAApC;AACA,UAAK,gBAAL,GAAwB,YAAY,CAAC,YAAD,CAApC;AACA,UAAK,WAAL,GAAmB,YAAY,CAAC,OAAD,CAA/B;AACA,UAAK,UAAL,GAAkB,YAAY,CAAC,MAAD,CAA9B;AAjCwB;AAkCzB;;;;6BAEK;AAAA,UACI,QADJ,GACiB,KAAK,KADtB,CACI,QADJ;AAEJ,aAAO,yBAAa,gBAAS,IAAT,CAAc,QAAd,CAAb,EAAsD;AAC3D,QAAA,aAAa,EAAE,KAAK,iBADuC;AAE3D,QAAA,OAAO,EAAE,KAAK,WAF6C;AAG3D,QAAA,WAAW,EAAE,KAAK,eAHyC;AAI3D,QAAA,YAAY,EAAE,KAAK,gBAJwC;AAK3D,QAAA,YAAY,EAAE,KAAK,gBALwC;AAM3D,QAAA,OAAO,EAAE,KAAK,WAN6C;AAO3D,QAAA,MAAM,EAAE,KAAK;AAP8C,OAAtD,CAAP;AASD;;;EAhEuC,oB;;;AACjC,YAAA,CAAA,WAAA,GAAc,cAAd","sourcesContent":["import { Children, cloneElement, PureComponent, ReactElement } from 'react';\n\nexport type hook = (eventName: string, child: ReactElement<any>, e) => void;\n\nexport interface TriggerChildProps {\n  onContextMenu?: hook;\n  onClick?: hook;\n  onMouseDown?: hook;\n  onMouseEnter?: hook;\n  onMouseLeave?: hook;\n  onFocus?: hook;\n  onBlur?: hook;\n  isClickScrollbar: {\n    value: boolean | undefined\n  };\n  popupHidden?: boolean,\n}\n\nexport default class TriggerChild extends PureComponent<TriggerChildProps> {\n  static displayName = 'TriggerChild';\n\n  handleContextMenu;\n\n  handleClick;\n\n  handleMouseDown;\n\n  handleMouseEnter;\n\n  handleMouseLeave;\n\n  handleFocus;\n\n  handleBlur;\n\n  constructor(props, context) {\n    super(props, context);\n    const createChains = eventName => e => {\n      if (eventName === 'Blur') {\n        const { isClickScrollbar, popupHidden } = this.props;\n        // 判断是否已经关闭\n        if (popupHidden) {\n          isClickScrollbar.value = false;\n        }\n        const { value } = isClickScrollbar;\n        if (value) {\n          e.target.focus();\n          return;\n        }\n      }\n      const { [`on${eventName}`]: handle, children } = this.props as { [key: string]: any };\n      const child = Children.only(children);\n      if (handle) {\n        handle(eventName, child, e);\n      } else if (child) {\n        const { [`on${eventName}`]: childHandle } = child.props;\n        if (childHandle) {\n          childHandle(e);\n        }\n      }\n    };\n\n    this.handleContextMenu = createChains('ContextMenu');\n    this.handleClick = createChains('Click');\n    this.handleMouseDown = createChains('MouseDown');\n    this.handleMouseEnter = createChains('MouseEnter');\n    this.handleMouseLeave = createChains('MouseLeave');\n    this.handleFocus = createChains('Focus');\n    this.handleBlur = createChains('Blur');\n  }\n\n  render() {\n    const { children } = this.props;\n    return cloneElement(Children.only(children as ReactElement), {\n      onContextMenu: this.handleContextMenu,\n      onClick: this.handleClick,\n      onMouseDown: this.handleMouseDown,\n      onMouseEnter: this.handleMouseEnter,\n      onMouseLeave: this.handleMouseLeave,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur,\n    });\n  }\n}\n"]}