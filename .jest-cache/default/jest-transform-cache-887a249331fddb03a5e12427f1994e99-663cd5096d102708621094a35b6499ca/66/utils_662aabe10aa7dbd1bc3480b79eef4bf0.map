{"version":3,"sources":["utils.jsx"],"names":["toArray","children","c","Children","forEach","child","push","generateKey","key","index","String","getActiveIndex","activeKey","findIndex","getActiveKey","setTransform","style","v","transform","webkitTransform","mozTransform","isTransformSupported","setTransition","transition","webkitTransition","MozTransition","getTransformPropValue","WebkitTransform","MozTransform","isVertical","tabBarPosition","getTransformByIndex","translate","getMarginStyle","marginDirection","getStyle","el","property","getComputedStyle","getPropertyValue","replace","setPxStyle","value","vertical","getDataAttr","props","Object","keys","reduce","prev","substr","toNum","getTypeValue","start","current","end","tabNode","wrapperNode","total","childNodes","parentNode","Array","prototype","some","call","node","className","includes","boxSizing","getLeft","getTop","top","height"],"mappings":"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","sourcesContent":["import { Children } from 'react';\nimport isNil from 'lodash/isNil';\n\nexport function toArray (children) {\n  const c = [];\n  Children.forEach(children, child => {\n    if (child) {\n      c.push(child);\n    }\n  });\n  return c;\n}\n\nexport function generateKey (key, index) {\n  return String(isNil(key) ? index : key);\n}\n\nexport function getActiveIndex (children, activeKey) {\n  const c = toArray(children);\n  return c.findIndex((child, index) => generateKey(child.key, index) === activeKey);\n}\n\nexport function getActiveKey (children, index) {\n  const c = toArray(children);\n  return generateKey(c[index].key, index);\n}\n\nexport function setTransform (style, v) {\n  style.transform = v;\n  style.webkitTransform = v;\n  style.mozTransform = v;\n}\n\nexport function isTransformSupported (style) {\n  return 'transform' in style ||\n    'webkitTransform' in style ||\n    'MozTransform' in style;\n}\n\nexport function setTransition (style, v) {\n  style.transition = v;\n  style.webkitTransition = v;\n  style.MozTransition = v;\n}\n\nexport function getTransformPropValue (v) {\n  return {\n    transform: v,\n    WebkitTransform: v,\n    MozTransform: v,\n  };\n}\n\nexport function isVertical (tabBarPosition) {\n  return tabBarPosition === 'left' || tabBarPosition === 'right';\n}\n\nexport function getTransformByIndex (index, tabBarPosition) {\n  const translate = isVertical(tabBarPosition) ? 'translateY' : 'translateX';\n  return `${translate}(${-index * 100}%) translateZ(0)`;\n}\n\nexport function getMarginStyle (index, tabBarPosition) {\n  const marginDirection = isVertical(tabBarPosition) ? 'marginTop' : 'marginLeft';\n  return {\n    [marginDirection]: `${-index * 100}%`,\n  };\n}\n\nexport function getStyle (el, property) {\n  return +getComputedStyle(el).getPropertyValue(property).replace('px', '');\n}\n\nexport function setPxStyle (el, value, vertical) {\n  value = vertical ? `0px, ${value}px, 0px` : `${value}px, 0px, 0px`;\n  setTransform(el.style, `translate3d(${value})`);\n}\n\nexport function getDataAttr (props) {\n  return Object.keys(props).reduce((prev, key) => {\n    if (key.substr(0, 5) === 'aria-' || key.substr(0, 5) === 'data-' || key === 'role') {\n      prev[key] = props[key];\n    }\n    return prev;\n  }, {});\n}\n\nfunction toNum (style, property) {\n  return +style.getPropertyValue(property).replace('px', '');\n}\n\nfunction getTypeValue (start, current, end, tabNode, wrapperNode) {\n  let total = getStyle(wrapperNode, `padding-${start}`);\n  const { childNodes } = tabNode.parentNode;\n  Array.prototype.some.call(childNodes, (node) => {\n    if (node !== tabNode) {\n      // 此处对代码进行了修改 取自rc-tabs@9.4.2 这版本进行了计算方式的调整,避免了在类似modal等有动画的内容中使用的时候，计算出现错误的问题，因为在动画过程中的计算，会有一次Height width为0的情况\n      // 在 9.4.2版本中 因为前几个版本的修改 refactor: rm mixin and react-create-class \n      // 对dom结构进行了调整 bar不与item在一个父元素中,因此有如下代码，在c7n中暂时不进行dom结构调整\n      if (node.className.includes('ink-bar')) {\n        return false;\n      }\n      const style = getComputedStyle(node);\n      total += toNum(style, `margin-${start}`);\n      total += toNum(style, `margin-${end}`);\n      total += toNum(style, current);\n\n      if (style.boxSizing === 'content-box') {\n        total += toNum(style, `border-${start}-width`) + toNum(style, `padding-${start}`) +\n          toNum(style, `border-${end}-width`) + toNum(style, `padding-${end}`);\n      }\n      return false;\n    }\n    return true;\n  });\n\n  return total;\n}\n\nexport function getLeft (tabNode, wrapperNode) {\n  return getTypeValue('left', 'width', 'right', tabNode, wrapperNode);\n}\n\nexport function getTop (tabNode, wrapperNode) {\n  const top = getTypeValue('top', 'height', 'bottom', tabNode, wrapperNode);\n  const height = getStyle(tabNode.parentNode, 'height');\n  return top - height;\n}\n"]}