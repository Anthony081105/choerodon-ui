ded74f25632840e69141ce039524def8
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));

var _createReactClass = _interopRequireDefault(require("create-react-class"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _KeyCode = _interopRequireDefault(require("../../_util/KeyCode"));

var _CalendarHeader = _interopRequireDefault(require("./calendar/CalendarHeader"));

var _CalendarFooter = _interopRequireDefault(require("./calendar/CalendarFooter"));

var _CalendarMixin = _interopRequireDefault(require("./mixin/CalendarMixin"));

var _CommonMixin = _interopRequireDefault(require("./mixin/CommonMixin"));

var MonthCalendar = (0, _createReactClass["default"])({
  displayName: "MonthCalendar",
  propTypes: {
    monthCellRender: _propTypes["default"].func,
    dateCellRender: _propTypes["default"].func
  },
  mixins: [_CommonMixin["default"], _CalendarMixin["default"]],
  getInitialState: function getInitialState() {
    return {
      mode: 'month'
    };
  },
  onKeyDown: function onKeyDown(event) {
    var keyCode = event.keyCode;
    var ctrlKey = event.ctrlKey || event.metaKey;
    var stateValue = this.state.value;
    var disabledDate = this.props.disabledDate;
    var value = stateValue;

    switch (keyCode) {
      case _KeyCode["default"].DOWN:
        value = stateValue.clone();
        value.add(3, 'months');
        break;

      case _KeyCode["default"].UP:
        value = stateValue.clone();
        value.add(-3, 'months');
        break;

      case _KeyCode["default"].LEFT:
        value = stateValue.clone();

        if (ctrlKey) {
          value.add(-1, 'years');
        } else {
          value.add(-1, 'months');
        }

        break;

      case _KeyCode["default"].RIGHT:
        value = stateValue.clone();

        if (ctrlKey) {
          value.add(1, 'years');
        } else {
          value.add(1, 'months');
        }

        break;

      case _KeyCode["default"].ENTER:
        if (!disabledDate || !disabledDate(stateValue)) {
          this.onSelect(stateValue);
        }

        event.preventDefault();
        return 1;

      default:
        return undefined;
    }

    if (value !== stateValue) {
      this.setValue(value);
      event.preventDefault();
      return 1;
    }
  },
  handlePanelChange: function handlePanelChange(_, mode) {
    if (mode !== 'date') {
      this.setState({
        mode: mode
      });
    }
  },
  render: function render() {
    var props = this.props,
        state = this.state;
    var mode = state.mode,
        value = state.value;

    var children = _react["default"].createElement("div", {
      className: "".concat(props.prefixCls, "-month-calendar-content")
    }, _react["default"].createElement("div", {
      className: "".concat(props.prefixCls, "-month-header-wrap")
    }, _react["default"].createElement(_CalendarHeader["default"], {
      prefixCls: props.prefixCls,
      mode: mode,
      value: value,
      locale: props.locale,
      disabledMonth: props.disabledDate,
      monthCellRender: props.monthCellRender,
      monthCellContentRender: props.monthCellContentRender,
      onMonthSelect: this.onSelect,
      onValueChange: this.setValue,
      onPanelChange: this.handlePanelChange
    })), _react["default"].createElement(_CalendarFooter["default"], {
      prefixCls: props.prefixCls,
      renderFooter: props.renderFooter
    }));

    return this.renderRoot({
      className: "".concat(props.prefixCls, "-month-calendar"),
      children: children
    });
  }
});
var _default = MonthCalendar;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1vbnRoQ2FsZW5kYXIuanN4Il0sIm5hbWVzIjpbIk1vbnRoQ2FsZW5kYXIiLCJwcm9wVHlwZXMiLCJtb250aENlbGxSZW5kZXIiLCJQcm9wVHlwZXMiLCJmdW5jIiwiZGF0ZUNlbGxSZW5kZXIiLCJtaXhpbnMiLCJDb21tb25NaXhpbiIsIkNhbGVuZGFyTWl4aW4iLCJnZXRJbml0aWFsU3RhdGUiLCJtb2RlIiwib25LZXlEb3duIiwiZXZlbnQiLCJrZXlDb2RlIiwiY3RybEtleSIsIm1ldGFLZXkiLCJzdGF0ZVZhbHVlIiwic3RhdGUiLCJ2YWx1ZSIsImRpc2FibGVkRGF0ZSIsInByb3BzIiwiS2V5Q29kZSIsIkRPV04iLCJjbG9uZSIsImFkZCIsIlVQIiwiTEVGVCIsIlJJR0hUIiwiRU5URVIiLCJvblNlbGVjdCIsInByZXZlbnREZWZhdWx0IiwidW5kZWZpbmVkIiwic2V0VmFsdWUiLCJoYW5kbGVQYW5lbENoYW5nZSIsIl8iLCJzZXRTdGF0ZSIsInJlbmRlciIsImNoaWxkcmVuIiwicHJlZml4Q2xzIiwibG9jYWxlIiwibW9udGhDZWxsQ29udGVudFJlbmRlciIsInJlbmRlckZvb3RlciIsInJlbmRlclJvb3QiLCJjbGFzc05hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLGFBQWEsR0FBRyxrQ0FBaUI7QUFBQTtBQUNyQ0MsRUFBQUEsU0FBUyxFQUFFO0FBQ1RDLElBQUFBLGVBQWUsRUFBRUMsc0JBQVVDLElBRGxCO0FBRVRDLElBQUFBLGNBQWMsRUFBRUYsc0JBQVVDO0FBRmpCLEdBRDBCO0FBS3JDRSxFQUFBQSxNQUFNLEVBQUUsQ0FBQ0MsdUJBQUQsRUFBY0MseUJBQWQsQ0FMNkI7QUFPckNDLEVBQUFBLGVBUHFDLDZCQU9uQjtBQUNoQixXQUFPO0FBQUVDLE1BQUFBLElBQUksRUFBRTtBQUFSLEtBQVA7QUFDRCxHQVRvQztBQVdyQ0MsRUFBQUEsU0FYcUMscUJBVzNCQyxLQVgyQixFQVdwQjtBQUNmLFFBQU1DLE9BQU8sR0FBR0QsS0FBSyxDQUFDQyxPQUF0QjtBQUNBLFFBQU1DLE9BQU8sR0FBR0YsS0FBSyxDQUFDRSxPQUFOLElBQWlCRixLQUFLLENBQUNHLE9BQXZDO0FBQ0EsUUFBTUMsVUFBVSxHQUFHLEtBQUtDLEtBQUwsQ0FBV0MsS0FBOUI7QUFIZSxRQUlQQyxZQUpPLEdBSVUsS0FBS0MsS0FKZixDQUlQRCxZQUpPO0FBS2YsUUFBSUQsS0FBSyxHQUFHRixVQUFaOztBQUNBLFlBQVFILE9BQVI7QUFDRSxXQUFLUSxvQkFBUUMsSUFBYjtBQUNFSixRQUFBQSxLQUFLLEdBQUdGLFVBQVUsQ0FBQ08sS0FBWCxFQUFSO0FBQ0FMLFFBQUFBLEtBQUssQ0FBQ00sR0FBTixDQUFVLENBQVYsRUFBYSxRQUFiO0FBQ0E7O0FBQ0YsV0FBS0gsb0JBQVFJLEVBQWI7QUFDRVAsUUFBQUEsS0FBSyxHQUFHRixVQUFVLENBQUNPLEtBQVgsRUFBUjtBQUNBTCxRQUFBQSxLQUFLLENBQUNNLEdBQU4sQ0FBVSxDQUFDLENBQVgsRUFBYyxRQUFkO0FBQ0E7O0FBQ0YsV0FBS0gsb0JBQVFLLElBQWI7QUFDRVIsUUFBQUEsS0FBSyxHQUFHRixVQUFVLENBQUNPLEtBQVgsRUFBUjs7QUFDQSxZQUFJVCxPQUFKLEVBQWE7QUFDWEksVUFBQUEsS0FBSyxDQUFDTSxHQUFOLENBQVUsQ0FBQyxDQUFYLEVBQWMsT0FBZDtBQUNELFNBRkQsTUFFTztBQUNMTixVQUFBQSxLQUFLLENBQUNNLEdBQU4sQ0FBVSxDQUFDLENBQVgsRUFBYyxRQUFkO0FBQ0Q7O0FBQ0Q7O0FBQ0YsV0FBS0gsb0JBQVFNLEtBQWI7QUFDRVQsUUFBQUEsS0FBSyxHQUFHRixVQUFVLENBQUNPLEtBQVgsRUFBUjs7QUFDQSxZQUFJVCxPQUFKLEVBQWE7QUFDWEksVUFBQUEsS0FBSyxDQUFDTSxHQUFOLENBQVUsQ0FBVixFQUFhLE9BQWI7QUFDRCxTQUZELE1BRU87QUFDTE4sVUFBQUEsS0FBSyxDQUFDTSxHQUFOLENBQVUsQ0FBVixFQUFhLFFBQWI7QUFDRDs7QUFDRDs7QUFDRixXQUFLSCxvQkFBUU8sS0FBYjtBQUNFLFlBQUksQ0FBQ1QsWUFBRCxJQUFpQixDQUFDQSxZQUFZLENBQUNILFVBQUQsQ0FBbEMsRUFBZ0Q7QUFDOUMsZUFBS2EsUUFBTCxDQUFjYixVQUFkO0FBQ0Q7O0FBQ0RKLFFBQUFBLEtBQUssQ0FBQ2tCLGNBQU47QUFDQSxlQUFPLENBQVA7O0FBQ0Y7QUFDRSxlQUFPQyxTQUFQO0FBaENKOztBQWtDQSxRQUFJYixLQUFLLEtBQUtGLFVBQWQsRUFBMEI7QUFDeEIsV0FBS2dCLFFBQUwsQ0FBY2QsS0FBZDtBQUNBTixNQUFBQSxLQUFLLENBQUNrQixjQUFOO0FBQ0EsYUFBTyxDQUFQO0FBQ0Q7QUFDRixHQXhEb0M7QUEwRHJDRyxFQUFBQSxpQkExRHFDLDZCQTBEbkJDLENBMURtQixFQTBEaEJ4QixJQTFEZ0IsRUEwRFY7QUFDekIsUUFBSUEsSUFBSSxLQUFLLE1BQWIsRUFBcUI7QUFDbkIsV0FBS3lCLFFBQUwsQ0FBYztBQUFFekIsUUFBQUEsSUFBSSxFQUFKQTtBQUFGLE9BQWQ7QUFDRDtBQUNGLEdBOURvQztBQWdFckMwQixFQUFBQSxNQWhFcUMsb0JBZ0U1QjtBQUFBLFFBQ0NoQixLQURELEdBQ2tCLElBRGxCLENBQ0NBLEtBREQ7QUFBQSxRQUNRSCxLQURSLEdBQ2tCLElBRGxCLENBQ1FBLEtBRFI7QUFBQSxRQUVDUCxJQUZELEdBRWlCTyxLQUZqQixDQUVDUCxJQUZEO0FBQUEsUUFFT1EsS0FGUCxHQUVpQkQsS0FGakIsQ0FFT0MsS0FGUDs7QUFHUCxRQUFNbUIsUUFBUSxHQUNaO0FBQUssTUFBQSxTQUFTLFlBQUtqQixLQUFLLENBQUNrQixTQUFYO0FBQWQsT0FDRTtBQUFLLE1BQUEsU0FBUyxZQUFLbEIsS0FBSyxDQUFDa0IsU0FBWDtBQUFkLE9BQ0UsZ0NBQUMsMEJBQUQ7QUFDRSxNQUFBLFNBQVMsRUFBRWxCLEtBQUssQ0FBQ2tCLFNBRG5CO0FBRUUsTUFBQSxJQUFJLEVBQUU1QixJQUZSO0FBR0UsTUFBQSxLQUFLLEVBQUVRLEtBSFQ7QUFJRSxNQUFBLE1BQU0sRUFBRUUsS0FBSyxDQUFDbUIsTUFKaEI7QUFLRSxNQUFBLGFBQWEsRUFBRW5CLEtBQUssQ0FBQ0QsWUFMdkI7QUFNRSxNQUFBLGVBQWUsRUFBRUMsS0FBSyxDQUFDbEIsZUFOekI7QUFPRSxNQUFBLHNCQUFzQixFQUFFa0IsS0FBSyxDQUFDb0Isc0JBUGhDO0FBUUUsTUFBQSxhQUFhLEVBQUUsS0FBS1gsUUFSdEI7QUFTRSxNQUFBLGFBQWEsRUFBRSxLQUFLRyxRQVR0QjtBQVVFLE1BQUEsYUFBYSxFQUFFLEtBQUtDO0FBVnRCLE1BREYsQ0FERixFQWVFLGdDQUFDLDBCQUFEO0FBQ0UsTUFBQSxTQUFTLEVBQUViLEtBQUssQ0FBQ2tCLFNBRG5CO0FBRUUsTUFBQSxZQUFZLEVBQUVsQixLQUFLLENBQUNxQjtBQUZ0QixNQWZGLENBREY7O0FBc0JBLFdBQU8sS0FBS0MsVUFBTCxDQUFnQjtBQUNyQkMsTUFBQUEsU0FBUyxZQUFLdkIsS0FBSyxDQUFDa0IsU0FBWCxvQkFEWTtBQUVyQkQsTUFBQUEsUUFBUSxFQUFSQTtBQUZxQixLQUFoQixDQUFQO0FBSUQ7QUE3Rm9DLENBQWpCLENBQXRCO2VBZ0dlckMsYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3JlYXRlUmVhY3RDbGFzcyBmcm9tICdjcmVhdGUtcmVhY3QtY2xhc3MnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBLZXlDb2RlIGZyb20gJy4uLy4uL191dGlsL0tleUNvZGUnO1xuaW1wb3J0IENhbGVuZGFySGVhZGVyIGZyb20gJy4vY2FsZW5kYXIvQ2FsZW5kYXJIZWFkZXInO1xuaW1wb3J0IENhbGVuZGFyRm9vdGVyIGZyb20gJy4vY2FsZW5kYXIvQ2FsZW5kYXJGb290ZXInO1xuaW1wb3J0IENhbGVuZGFyTWl4aW4gZnJvbSAnLi9taXhpbi9DYWxlbmRhck1peGluJztcbmltcG9ydCBDb21tb25NaXhpbiBmcm9tICcuL21peGluL0NvbW1vbk1peGluJztcblxuY29uc3QgTW9udGhDYWxlbmRhciA9IGNyZWF0ZVJlYWN0Q2xhc3Moe1xuICBwcm9wVHlwZXM6IHtcbiAgICBtb250aENlbGxSZW5kZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGRhdGVDZWxsUmVuZGVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgfSxcbiAgbWl4aW5zOiBbQ29tbW9uTWl4aW4sIENhbGVuZGFyTWl4aW5dLFxuXG4gIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4geyBtb2RlOiAnbW9udGgnIH07XG4gIH0sXG5cbiAgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgY29uc3Qga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgY29uc3QgY3RybEtleSA9IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleTtcbiAgICBjb25zdCBzdGF0ZVZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZTtcbiAgICBjb25zdCB7IGRpc2FibGVkRGF0ZSB9ID0gdGhpcy5wcm9wcztcbiAgICBsZXQgdmFsdWUgPSBzdGF0ZVZhbHVlO1xuICAgIHN3aXRjaCAoa2V5Q29kZSkge1xuICAgICAgY2FzZSBLZXlDb2RlLkRPV046XG4gICAgICAgIHZhbHVlID0gc3RhdGVWYWx1ZS5jbG9uZSgpO1xuICAgICAgICB2YWx1ZS5hZGQoMywgJ21vbnRocycpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgS2V5Q29kZS5VUDpcbiAgICAgICAgdmFsdWUgPSBzdGF0ZVZhbHVlLmNsb25lKCk7XG4gICAgICAgIHZhbHVlLmFkZCgtMywgJ21vbnRocycpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgS2V5Q29kZS5MRUZUOlxuICAgICAgICB2YWx1ZSA9IHN0YXRlVmFsdWUuY2xvbmUoKTtcbiAgICAgICAgaWYgKGN0cmxLZXkpIHtcbiAgICAgICAgICB2YWx1ZS5hZGQoLTEsICd5ZWFycycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlLmFkZCgtMSwgJ21vbnRocycpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLZXlDb2RlLlJJR0hUOlxuICAgICAgICB2YWx1ZSA9IHN0YXRlVmFsdWUuY2xvbmUoKTtcbiAgICAgICAgaWYgKGN0cmxLZXkpIHtcbiAgICAgICAgICB2YWx1ZS5hZGQoMSwgJ3llYXJzJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUuYWRkKDEsICdtb250aHMnKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgS2V5Q29kZS5FTlRFUjpcbiAgICAgICAgaWYgKCFkaXNhYmxlZERhdGUgfHwgIWRpc2FibGVkRGF0ZShzdGF0ZVZhbHVlKSkge1xuICAgICAgICAgIHRoaXMub25TZWxlY3Qoc3RhdGVWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IHN0YXRlVmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0VmFsdWUodmFsdWUpO1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgfSxcblxuICBoYW5kbGVQYW5lbENoYW5nZShfLCBtb2RlKSB7XG4gICAgaWYgKG1vZGUgIT09ICdkYXRlJykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1vZGUgfSk7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHByb3BzLCBzdGF0ZSB9ID0gdGhpcztcbiAgICBjb25zdCB7IG1vZGUsIHZhbHVlIH0gPSBzdGF0ZTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcm9wcy5wcmVmaXhDbHN9LW1vbnRoLWNhbGVuZGFyLWNvbnRlbnRgfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3Byb3BzLnByZWZpeENsc30tbW9udGgtaGVhZGVyLXdyYXBgfT5cbiAgICAgICAgICA8Q2FsZW5kYXJIZWFkZXJcbiAgICAgICAgICAgIHByZWZpeENscz17cHJvcHMucHJlZml4Q2xzfVxuICAgICAgICAgICAgbW9kZT17bW9kZX1cbiAgICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgIGxvY2FsZT17cHJvcHMubG9jYWxlfVxuICAgICAgICAgICAgZGlzYWJsZWRNb250aD17cHJvcHMuZGlzYWJsZWREYXRlfVxuICAgICAgICAgICAgbW9udGhDZWxsUmVuZGVyPXtwcm9wcy5tb250aENlbGxSZW5kZXJ9XG4gICAgICAgICAgICBtb250aENlbGxDb250ZW50UmVuZGVyPXtwcm9wcy5tb250aENlbGxDb250ZW50UmVuZGVyfVxuICAgICAgICAgICAgb25Nb250aFNlbGVjdD17dGhpcy5vblNlbGVjdH1cbiAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9e3RoaXMuc2V0VmFsdWV9XG4gICAgICAgICAgICBvblBhbmVsQ2hhbmdlPXt0aGlzLmhhbmRsZVBhbmVsQ2hhbmdlfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8Q2FsZW5kYXJGb290ZXJcbiAgICAgICAgICBwcmVmaXhDbHM9e3Byb3BzLnByZWZpeENsc31cbiAgICAgICAgICByZW5kZXJGb290ZXI9e3Byb3BzLnJlbmRlckZvb3Rlcn1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyUm9vdCh7XG4gICAgICBjbGFzc05hbWU6IGAke3Byb3BzLnByZWZpeENsc30tbW9udGgtY2FsZW5kYXJgLFxuICAgICAgY2hpbGRyZW4sXG4gICAgfSk7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgTW9udGhDYWxlbmRhcjtcbiJdfQ==