{"version":3,"sources":["util.jsx"],"names":["getValuePropValue","child","props","value","key","type","isSelectOptGroup","label","Error","getPropValue","prop","isMultiple","multiple","isTags","tags","isCombobox","combobox","isMultipleOrTags","isMultipleOrTagsOrCombobox","isSingleMode","toArray","ret","undefined","Array","isArray","getMapKey","preventDefaultEvent","e","preventDefault","findIndexInValueBySingleValue","singleValue","index","i","length","getLabelFromPropsValue","getSelectKeys","menuItems","selectedKeys","Children","forEach","item","isMenuItemGroup","concat","children","itemValue","itemKey","push","UNSELECTABLE_STYLE","userSelect","WebkitUserSelect","UNSELECTABLE_ATTRIBUTE","unselectable","findFirstMenuItem","found","disabled","includesSeparators","string","separators","lastIndexOf","splitBySeparators","reg","RegExp","join","split","filter","token","defaultFilterFn","input","optionFilterProp","toLowerCase","indexOf","validateOptionValue","saveRef","instance","name","node"],"mappings":"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","sourcesContent":["import { Children } from 'react';\n\nexport function getValuePropValue(child) {\n  const props = child.props;\n  if ('value' in props) {\n    return props.value;\n  }\n  if (child.key) {\n    return child.key;\n  }\n  if (child.type && child.type.isSelectOptGroup && props.label) {\n    return props.label;\n  }\n  throw new Error(\n    `Need at least a key or a value or a label (only for OptGroup) for ${child}`,\n  );\n}\n\nexport function getPropValue(child, prop) {\n  if (prop === 'value') {\n    return getValuePropValue(child);\n  }\n  return child.props[prop];\n}\n\nexport function isMultiple(props) {\n  return props.multiple;\n}\n\nexport function isTags(props) {\n  return props.tags;\n}\n\nexport function isCombobox(props) {\n  return props.combobox;\n}\n\nexport function isMultipleOrTags(props) {\n  return props.multiple || props.tags;\n}\n\nexport function isMultipleOrTagsOrCombobox(props) {\n  return isMultipleOrTags(props) || isCombobox(props);\n}\n\nexport function isSingleMode(props) {\n  return !isMultipleOrTagsOrCombobox(props);\n}\n\nexport function toArray(value) {\n  let ret = value;\n  if (value === undefined) {\n    ret = [];\n  } else if (!Array.isArray(value)) {\n    ret = [value];\n  }\n  return ret;\n}\n\nexport function getMapKey(value) {\n  return `${typeof value}-${value}`;\n}\n\nexport function preventDefaultEvent(e) {\n  e.preventDefault();\n}\n\nexport function findIndexInValueBySingleValue(value, singleValue) {\n  let index = -1;\n  for (let i = 0; i < value.length; i++) {\n    if (value[i] === singleValue) {\n      index = i;\n      break;\n    }\n  }\n  return index;\n}\n\nexport function getLabelFromPropsValue(value, key) {\n  let label;\n  value = toArray(value);\n  for (let i = 0; i < value.length; i++) {\n    if (value[i].key === key) {\n      label = value[i].label;\n      break;\n    }\n  }\n  return label;\n}\n\nexport function getSelectKeys(menuItems, value) {\n  if (value === null || value === undefined) {\n    return [];\n  }\n  let selectedKeys = [];\n  Children.forEach(menuItems, item => {\n    if (item.type.isMenuItemGroup) {\n      selectedKeys = selectedKeys.concat(\n        getSelectKeys(item.props.children, value),\n      );\n    } else {\n      const itemValue = getValuePropValue(item);\n      const itemKey = item.key;\n      if (findIndexInValueBySingleValue(value, itemValue) !== -1 && itemKey) {\n        selectedKeys.push(itemKey);\n      }\n    }\n  });\n  return selectedKeys;\n}\n\nexport const UNSELECTABLE_STYLE = {\n  userSelect: 'none',\n  WebkitUserSelect: 'none',\n};\n\nexport const UNSELECTABLE_ATTRIBUTE = {\n  unselectable: 'unselectable',\n};\n\nexport function findFirstMenuItem(children) {\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (child.type.isMenuItemGroup) {\n      const found = findFirstMenuItem(child.props.children);\n      if (found) {\n        return found;\n      }\n    } else if (!child.props.disabled) {\n      return child;\n    }\n  }\n  return null;\n}\n\nexport function includesSeparators(string, separators) {\n  for (let i = 0; i < separators.length; ++i) {\n    if (string.lastIndexOf(separators[i]) > 0) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function splitBySeparators(string, separators) {\n  const reg = new RegExp(`[${separators.join()}]`);\n  return string.split(reg).filter(token => token);\n}\n\nexport function defaultFilterFn(input, child) {\n  if (child.props.disabled) {\n    return false;\n  }\n  const value = toArray(getPropValue(child, this.props.optionFilterProp)).join('');\n  return (\n    value.toLowerCase().indexOf(input.toLowerCase()) > -1\n  );\n}\n\nexport function validateOptionValue(value, props) {\n  if (isSingleMode(props) || isMultiple(props)) {\n    return;\n  }\n  if (typeof value !== 'string') {\n    throw new Error(\n      `Invalid \\`value\\` of type \\`${typeof value}\\` supplied to Option, ` +\n      `expected \\`string\\` when \\`tags/combobox\\` is \\`true\\`.`,\n    );\n  }\n}\n\nexport function saveRef(instance, name) {\n  return (node) => {\n    instance[name] = node;\n  };\n}\n"]}