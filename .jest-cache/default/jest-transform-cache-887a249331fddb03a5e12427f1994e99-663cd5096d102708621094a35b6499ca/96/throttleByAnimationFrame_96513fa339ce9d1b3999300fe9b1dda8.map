{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/_util/throttleByAnimationFrame.tsx"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEc,SAAU,wBAAV,CAAmC,EAAnC,EAA+D;AAC3E,MAAI,SAAJ;;AAEA,MAAM,KAAK,GAAG,SAAR,KAAQ,CAAC,IAAD;AAAA,WAAiB,YAAK;AAClC,MAAA,SAAS,GAAG,IAAZ;AACA,MAAA,EAAE,MAAF,6CAAM,IAAN;AACD,KAHa;AAAA,GAAd;;AAKA,MAAM,SAAS,GAAG,SAAZ,SAAY,GAAmB;AACnC,QAAI,SAAS,IAAI,IAAjB,EAAuB;AAAA,wCADH,IACG;AADH,QAAA,IACG;AAAA;;AACrB,MAAA,SAAS,GAAG,qBAAI,KAAK,CAAC,IAAD,CAAT,CAAZ;AACD;AACF,GAJD;;AAMC,EAAA,SAAiB,CAAC,MAAlB,GAA2B;AAAA,WAAM,gBAAI,MAAJ,CAAW,SAAX,CAAN;AAAA,GAA3B;;AAED,SAAO,SAAP;AACD;;AAEK,SAAU,iCAAV,GAA2C;AAC/C,SAAO,UAAS,MAAT,EAAsB,GAAtB,EAAmC,UAAnC,EAAkD;AACvD,QAAM,EAAE,GAAG,UAAU,CAAC,KAAtB;AACA,QAAI,gBAAgB,GAAG,KAAvB;AACA,WAAO;AACL,MAAA,YAAY,EAAE,IADT;AAEL,MAAA,GAFK,iBAEF;AACD,YAAI,gBAAgB,IAAI,SAAS,MAAM,CAAC,SAApC,IAAiD,GAAG,cAAH,CAAkB,IAAlB,CAAuB,IAAvB,EAA6B,GAA7B,CAArD,EAAwF;AACtF,iBAAO,EAAP;AACD;;AAED,YAAM,OAAO,GAAG,wBAAwB,CAAC,EAAE,CAAC,IAAH,CAAQ,IAAR,CAAD,CAAxC;AACA,QAAA,gBAAgB,GAAG,IAAnB;AACA,QAAA,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA4B,GAA5B,EAAiC;AAC/B,UAAA,KAAK,EAAE,OADwB;AAE/B,UAAA,YAAY,EAAE,IAFiB;AAG/B,UAAA,QAAQ,EAAE;AAHqB,SAAjC;AAKA,QAAA,gBAAgB,GAAG,KAAnB;AACA,eAAO,OAAP;AACD;AAhBI,KAAP;AAkBD,GArBD;AAsBD","sourcesContent":["import raf from 'raf';\n\nexport default function throttleByAnimationFrame(fn: (...args: any[]) => void) {\n  let requestId: number | null;\n\n  const later = (args: any[]) => () => {\n    requestId = null;\n    fn(...args);\n  };\n\n  const throttled = (...args: any[]) => {\n    if (requestId == null) {\n      requestId = raf(later(args));\n    }\n  };\n\n  (throttled as any).cancel = () => raf.cancel(requestId!);\n\n  return throttled;\n}\n\nexport function throttleByAnimationFrameDecorator() {\n  return function(target: any, key: string, descriptor: any) {\n    const fn = descriptor.value;\n    let definingProperty = false;\n    return {\n      configurable: true,\n      get() {\n        if (definingProperty || this === target.prototype || {}.hasOwnProperty.call(this, key)) {\n          return fn;\n        }\n\n        const boundFn = throttleByAnimationFrame(fn.bind(this));\n        definingProperty = true;\n        Object.defineProperty(this, key, {\n          value: boundFn,\n          configurable: true,\n          writable: true,\n        });\n        definingProperty = false;\n        return boundFn;\n      },\n    };\n  };\n}\n"]}