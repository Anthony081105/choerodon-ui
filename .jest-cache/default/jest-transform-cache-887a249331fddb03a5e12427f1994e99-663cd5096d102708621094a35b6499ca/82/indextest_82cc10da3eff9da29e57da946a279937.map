{"version":3,"sources":["index.test.js"],"names":["describe","beforeEach","jest","useFakeTimers","afterEach","message","destroy","useRealTimers","it","config","top","info","undefined","expect","document","querySelectorAll","style","toBe","getContainer","div","createElement","className","body","appendChild","length","hide1","hide2","runAllTimers","done","defaultDuration","now","Date","aboutDuration","parseInt","hide","Test","loading","React","Component","setTimeout"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { mount } from 'enzyme';\nimport message from '..';\n\ndescribe('message', () => {\n  beforeEach(() => {\n    jest.useFakeTimers();\n  });\n\n  afterEach(() => {\n    message.destroy();\n    jest.useRealTimers();\n  });\n\n  it('should be able to config top', () => {\n    message.config({\n      top: 100,\n    });\n    message.info('whatever', undefined, undefined, 'top');\n    expect(document.querySelectorAll('.c7n-message')[0].style.top).toBe('100px');\n  });\n\n  it('should be able to config getContainer', () => {\n    message.config({\n      getContainer: () => {\n        const div = document.createElement('div');\n        div.className = 'custom-container';\n        document.body.appendChild(div);\n        return div;\n      },\n    });\n    message.info('whatever');\n    expect(document.querySelectorAll('.custom-container').length).toBe(1);\n  });\n\n  it('should be able to hide manually', () => {\n    const hide1 = message.info('whatever', 0);\n    const hide2 = message.info('whatever', 0);\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(2);\n    hide1();\n    jest.runAllTimers();\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(1);\n    hide2();\n    jest.runAllTimers();\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(0);\n  });\n\n  it('should be able to destroy globally', () => {\n    message.info('whatever', 0);\n    message.info('whatever', 0);\n    expect(document.querySelectorAll('.c7n-message').length).toBe(1);\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(2);\n    message.destroy();\n    expect(document.querySelectorAll('.c7n-message').length).toBe(0);\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(0);\n  });\n\n  it('should not need to use duration argument when using the onClose arguments', () => {\n    message.info('whatever', () => {});\n  });\n\n  it('should have the default duration when using the onClose arguments', (done) => {\n    jest.useRealTimers();\n    const defaultDuration = 3;\n    const now = Date.now();\n    message.info('whatever', () => {\n      // calculate the approximately duration value\n      const aboutDuration = parseInt((Date.now() - now) / 1000, 10);\n      expect(aboutDuration).toBe(defaultDuration);\n      done();\n    });\n  });\n\n  it('should hide message correctly', () => {\n    let hide;\n    class Test extends React.Component {\n      componentDidMount() {\n        hide = message.loading('Action in progress..', 0);\n      }\n\n      render() {\n        return <div>test</div>;\n      }\n    }\n    mount(<Test />);\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(1);\n    hide();\n    jest.runAllTimers();\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(0);\n  });\n\n  it('should destroy messages correctly', () => {\n    // eslint-disable-next-line\n    class Test extends React.Component {\n      componentDidMount() {\n        message.loading('Action in progress1..', 0);\n        message.loading('Action in progress2..', 0);\n        setTimeout(() => message.destroy(), 1000);\n      }\n\n      render() {\n        return <div>test</div>;\n      }\n    }\n    mount(<Test />);\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(2);\n    jest.runAllTimers();\n    expect(document.querySelectorAll('.c7n-message-notice').length).toBe(0);\n  });\n});\n"]}