7902149d3e719c2918b192f29525be2b
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getOverflowOptions = getOverflowOptions;
exports["default"] = getPlacements;
exports.rcPlacements = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var rcAutoAdjustOverflow = {
  adjustX: 1,
  adjustY: 1
};
var targetOffset = [0, 0];
var OFFSET_UNIT = 10;
var rcPlacements = {
  left: {
    points: ['cr', 'cl'],
    overflow: rcAutoAdjustOverflow,
    offset: [-OFFSET_UNIT, 0],
    targetOffset: targetOffset
  },
  right: {
    points: ['cl', 'cr'],
    overflow: rcAutoAdjustOverflow,
    offset: [OFFSET_UNIT, 0],
    targetOffset: targetOffset
  },
  top: {
    points: ['bc', 'tc'],
    overflow: rcAutoAdjustOverflow,
    offset: [0, -OFFSET_UNIT],
    targetOffset: targetOffset
  },
  bottom: {
    points: ['tc', 'bc'],
    overflow: rcAutoAdjustOverflow,
    offset: [0, OFFSET_UNIT],
    targetOffset: targetOffset
  },
  topLeft: {
    points: ['bl', 'tl'],
    overflow: rcAutoAdjustOverflow,
    offset: [0, -OFFSET_UNIT],
    targetOffset: targetOffset
  },
  leftTop: {
    points: ['tr', 'tl'],
    overflow: rcAutoAdjustOverflow,
    offset: [-OFFSET_UNIT, 0],
    targetOffset: targetOffset
  },
  topRight: {
    points: ['br', 'tr'],
    overflow: rcAutoAdjustOverflow,
    offset: [0, -OFFSET_UNIT],
    targetOffset: targetOffset
  },
  rightTop: {
    points: ['tl', 'tr'],
    overflow: rcAutoAdjustOverflow,
    offset: [OFFSET_UNIT, 0],
    targetOffset: targetOffset
  },
  bottomRight: {
    points: ['tr', 'br'],
    overflow: rcAutoAdjustOverflow,
    offset: [0, OFFSET_UNIT],
    targetOffset: targetOffset
  },
  rightBottom: {
    points: ['bl', 'br'],
    overflow: rcAutoAdjustOverflow,
    offset: [OFFSET_UNIT, 0],
    targetOffset: targetOffset
  },
  bottomLeft: {
    points: ['tl', 'bl'],
    overflow: rcAutoAdjustOverflow,
    offset: [0, OFFSET_UNIT],
    targetOffset: targetOffset
  },
  leftBottom: {
    points: ['br', 'bl'],
    overflow: rcAutoAdjustOverflow,
    offset: [-OFFSET_UNIT, 0],
    targetOffset: targetOffset
  }
};
exports.rcPlacements = rcPlacements;
var autoAdjustOverflowEnabled = {
  adjustX: 1,
  adjustY: 1
};
var autoAdjustOverflowDisabled = {
  adjustX: 0,
  adjustY: 0
};

function getOverflowOptions(autoAdjustOverflow) {
  if (typeof autoAdjustOverflow === 'boolean') {
    return autoAdjustOverflow ? autoAdjustOverflowEnabled : autoAdjustOverflowDisabled;
  }

  return (0, _objectSpread2["default"])({}, autoAdjustOverflowDisabled, {}, autoAdjustOverflow);
}

function getPlacements() {
  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var _config$arrowWidth = config.arrowWidth,
      arrowWidth = _config$arrowWidth === void 0 ? 5 : _config$arrowWidth,
      _config$horizontalArr = config.horizontalArrowShift,
      horizontalArrowShift = _config$horizontalArr === void 0 ? 16 : _config$horizontalArr,
      _config$verticalArrow = config.verticalArrowShift,
      verticalArrowShift = _config$verticalArrow === void 0 ? 12 : _config$verticalArrow,
      _config$autoAdjustOve = config.autoAdjustOverflow,
      autoAdjustOverflow = _config$autoAdjustOve === void 0 ? true : _config$autoAdjustOve;
  var placementMap = {
    left: {
      points: ['cr', 'cl'],
      offset: [-4, 0]
    },
    right: {
      points: ['cl', 'cr'],
      offset: [4, 0]
    },
    top: {
      points: ['bc', 'tc'],
      offset: [0, -4]
    },
    bottom: {
      points: ['tc', 'bc'],
      offset: [0, 4]
    },
    topLeft: {
      points: ['bl', 'tc'],
      offset: [-(horizontalArrowShift + arrowWidth), -4]
    },
    leftTop: {
      points: ['tr', 'cl'],
      offset: [-4, -(verticalArrowShift + arrowWidth)]
    },
    topRight: {
      points: ['br', 'tc'],
      offset: [horizontalArrowShift + arrowWidth, -4]
    },
    rightTop: {
      points: ['tl', 'cr'],
      offset: [4, -(verticalArrowShift + arrowWidth)]
    },
    bottomRight: {
      points: ['tr', 'bc'],
      offset: [horizontalArrowShift + arrowWidth, 4]
    },
    rightBottom: {
      points: ['bl', 'cr'],
      offset: [4, verticalArrowShift + arrowWidth]
    },
    bottomLeft: {
      points: ['tl', 'bc'],
      offset: [-(horizontalArrowShift + arrowWidth), 4]
    },
    leftBottom: {
      points: ['br', 'cl'],
      offset: [-4, verticalArrowShift + arrowWidth]
    }
  };
  Object.keys(placementMap).forEach(function (key) {
    placementMap[key] = config.arrowPointAtCenter ? (0, _objectSpread2["default"])({}, placementMap[key], {
      overflow: getOverflowOptions(autoAdjustOverflow),
      targetOffset: targetOffset
    }) : (0, _objectSpread2["default"])({}, rcPlacements[key], {
      overflow: getOverflowOptions(autoAdjustOverflow)
    });
  });
  return placementMap;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzLXByby90b29sdGlwL3BsYWNlbWVudHMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNLG9CQUFvQixHQUFHO0FBQzNCLEVBQUEsT0FBTyxFQUFFLENBRGtCO0FBRTNCLEVBQUEsT0FBTyxFQUFFO0FBRmtCLENBQTdCO0FBSUEsSUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFELEVBQUksQ0FBSixDQUFyQjtBQUNBLElBQU0sV0FBVyxHQUFHLEVBQXBCO0FBRU8sSUFBTSxZQUFZLEdBQUc7QUFDMUIsRUFBQSxJQUFJLEVBQUU7QUFDSixJQUFBLE1BQU0sRUFBRSxDQUFDLElBQUQsRUFBTyxJQUFQLENBREo7QUFFSixJQUFBLFFBQVEsRUFBRSxvQkFGTjtBQUdKLElBQUEsTUFBTSxFQUFFLENBQUMsQ0FBQyxXQUFGLEVBQWUsQ0FBZixDQUhKO0FBSUosSUFBQSxZQUFZLEVBQVo7QUFKSSxHQURvQjtBQU8xQixFQUFBLEtBQUssRUFBRTtBQUNMLElBQUEsTUFBTSxFQUFFLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FESDtBQUVMLElBQUEsUUFBUSxFQUFFLG9CQUZMO0FBR0wsSUFBQSxNQUFNLEVBQUUsQ0FBQyxXQUFELEVBQWMsQ0FBZCxDQUhIO0FBSUwsSUFBQSxZQUFZLEVBQVo7QUFKSyxHQVBtQjtBQWExQixFQUFBLEdBQUcsRUFBRTtBQUNILElBQUEsTUFBTSxFQUFFLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FETDtBQUVILElBQUEsUUFBUSxFQUFFLG9CQUZQO0FBR0gsSUFBQSxNQUFNLEVBQUUsQ0FBQyxDQUFELEVBQUksQ0FBQyxXQUFMLENBSEw7QUFJSCxJQUFBLFlBQVksRUFBWjtBQUpHLEdBYnFCO0FBbUIxQixFQUFBLE1BQU0sRUFBRTtBQUNOLElBQUEsTUFBTSxFQUFFLENBQUMsSUFBRCxFQUFPLElBQVAsQ0FERjtB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TUFBQSxNQUFNLEVBQUUsQ0FBQyxJQUFELEVBQU8sSUFBUCxDQURFO0FBRVYsTUFBQSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUYsRUFBSyxrQkFBa0IsR0FBRyxVQUExQjtBQUZFO0FBN0NZLEdBQTFCO0FBa0RBLEVBQUEsTUFBTSxDQUFDLElBQVAsQ0FBWSxZQUFaLEVBQTBCLE9BQTFCLENBQWtDLFVBQUEsR0FBRyxFQUFHO0FBQ3RDLElBQUEsWUFBWSxDQUFDLEdBQUQsQ0FBWixHQUFvQixNQUFNLENBQUMsa0JBQVAsc0NBQ2YsWUFBWSxDQUFDLEdBQUQsQ0FERztBQUVsQixNQUFBLFFBQVEsRUFBRSxrQkFBa0IsQ0FBQyxrQkFBRCxDQUZWO0FBR2xCLE1BQUEsWUFBWSxFQUFaO0FBSGtCLDRDQUtmLFlBQVksQ0FBQyxHQUFELENBTEc7QUFNbEIsTUFBQSxRQUFRLEVBQUUsa0JBQWtCLENBQUMsa0JBQUQ7QUFOVixNQUFwQjtBQVFELEdBVEQ7QUFVQSxTQUFPLFlBQVA7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJjQXV0b0FkanVzdE92ZXJmbG93ID0ge1xuICBhZGp1c3RYOiAxLFxuICBhZGp1c3RZOiAxLFxufTtcbmNvbnN0IHRhcmdldE9mZnNldCA9IFswLCAwXTtcbmNvbnN0IE9GRlNFVF9VTklUID0gMTA7XG5cbmV4cG9ydCBjb25zdCByY1BsYWNlbWVudHMgPSB7XG4gIGxlZnQ6IHtcbiAgICBwb2ludHM6IFsnY3InLCAnY2wnXSxcbiAgICBvdmVyZmxvdzogcmNBdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbLU9GRlNFVF9VTklULCAwXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG4gIHJpZ2h0OiB7XG4gICAgcG9pbnRzOiBbJ2NsJywgJ2NyJ10sXG4gICAgb3ZlcmZsb3c6IHJjQXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogW09GRlNFVF9VTklULCAwXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG4gIHRvcDoge1xuICAgIHBvaW50czogWydiYycsICd0YyddLFxuICAgIG92ZXJmbG93OiByY0F1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCAtT0ZGU0VUX1VOSVRdLFxuICAgIHRhcmdldE9mZnNldCxcbiAgfSxcbiAgYm90dG9tOiB7XG4gICAgcG9pbnRzOiBbJ3RjJywgJ2JjJ10sXG4gICAgb3ZlcmZsb3c6IHJjQXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIE9GRlNFVF9VTklUXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG4gIHRvcExlZnQ6IHtcbiAgICBwb2ludHM6IFsnYmwnLCAndGwnXSxcbiAgICBvdmVyZmxvdzogcmNBdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbMCwgLU9GRlNFVF9VTklUXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG4gIGxlZnRUb3A6IHtcbiAgICBwb2ludHM6IFsndHInLCAndGwnXSxcbiAgICBvdmVyZmxvdzogcmNBdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbLU9GRlNFVF9VTklULCAwXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG4gIHRvcFJpZ2h0OiB7XG4gICAgcG9pbnRzOiBbJ2JyJywgJ3RyJ10sXG4gICAgb3ZlcmZsb3c6IHJjQXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIC1PRkZTRVRfVU5JVF0sXG4gICAgdGFyZ2V0T2Zmc2V0LFxuICB9LFxuICByaWdodFRvcDoge1xuICAgIHBvaW50czogWyd0bCcsICd0ciddLFxuICAgIG92ZXJmbG93OiByY0F1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFtPRkZTRVRfVU5JVCwgMF0sXG4gICAgdGFyZ2V0T2Zmc2V0LFxuICB9LFxuICBib3R0b21SaWdodDoge1xuICAgIHBvaW50czogWyd0cicsICdiciddLFxuICAgIG92ZXJmbG93OiByY0F1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFswLCBPRkZTRVRfVU5JVF0sXG4gICAgdGFyZ2V0T2Zmc2V0LFxuICB9LFxuICByaWdodEJvdHRvbToge1xuICAgIHBvaW50czogWydibCcsICdiciddLFxuICAgIG92ZXJmbG93OiByY0F1dG9BZGp1c3RPdmVyZmxvdyxcbiAgICBvZmZzZXQ6IFtPRkZTRVRfVU5JVCwgMF0sXG4gICAgdGFyZ2V0T2Zmc2V0LFxuICB9LFxuICBib3R0b21MZWZ0OiB7XG4gICAgcG9pbnRzOiBbJ3RsJywgJ2JsJ10sXG4gICAgb3ZlcmZsb3c6IHJjQXV0b0FkanVzdE92ZXJmbG93LFxuICAgIG9mZnNldDogWzAsIE9GRlNFVF9VTklUXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG4gIGxlZnRCb3R0b206IHtcbiAgICBwb2ludHM6IFsnYnInLCAnYmwnXSxcbiAgICBvdmVyZmxvdzogcmNBdXRvQWRqdXN0T3ZlcmZsb3csXG4gICAgb2Zmc2V0OiBbLU9GRlNFVF9VTklULCAwXSxcbiAgICB0YXJnZXRPZmZzZXQsXG4gIH0sXG59O1xuXG5jb25zdCBhdXRvQWRqdXN0T3ZlcmZsb3dFbmFibGVkID0ge1xuICBhZGp1c3RYOiAxLFxuICBhZGp1c3RZOiAxLFxufTtcblxuY29uc3QgYXV0b0FkanVzdE92ZXJmbG93RGlzYWJsZWQgPSB7XG4gIGFkanVzdFg6IDAsXG4gIGFkanVzdFk6IDAsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkanVzdE92ZXJmbG93IHtcbiAgYWRqdXN0WD86IDAgfCAxO1xuICBhZGp1c3RZPzogMCB8IDE7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhY2VtZW50c0NvbmZpZyB7XG4gIGFycm93V2lkdGg/OiBudW1iZXI7XG4gIGhvcml6b250YWxBcnJvd1NoaWZ0PzogbnVtYmVyO1xuICB2ZXJ0aWNhbEFycm93U2hpZnQ/OiBudW1iZXI7XG4gIGFycm93UG9pbnRBdENlbnRlcj86IGJvb2xlYW47XG4gIGF1dG9BZGp1c3RPdmVyZmxvdz86IGFueTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE92ZXJmbG93T3B0aW9ucyhhdXRvQWRqdXN0T3ZlcmZsb3c6IGFueSkge1xuICBpZiAodHlwZW9mIGF1dG9BZGp1c3RPdmVyZmxvdyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIGF1dG9BZGp1c3RPdmVyZmxvdyA/IGF1dG9BZGp1c3RPdmVyZmxvd0VuYWJsZWQgOiBhdXRvQWRqdXN0T3ZlcmZsb3dEaXNhYmxlZDtcbiAgfVxuICByZXR1cm4ge1xuICAgIC4uLmF1dG9BZGp1c3RPdmVyZmxvd0Rpc2FibGVkLFxuICAgIC4uLmF1dG9BZGp1c3RPdmVyZmxvdyxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0UGxhY2VtZW50cyhjb25maWc6IFBsYWNlbWVudHNDb25maWcgPSB7fSkge1xuICBjb25zdCB7IGFycm93V2lkdGggPSA1LCBob3Jpem9udGFsQXJyb3dTaGlmdCA9IDE2LCB2ZXJ0aWNhbEFycm93U2hpZnQgPSAxMiwgYXV0b0FkanVzdE92ZXJmbG93ID0gdHJ1ZSB9ID0gY29uZmlnO1xuICBjb25zdCBwbGFjZW1lbnRNYXA6IGFueSA9IHtcbiAgICBsZWZ0OiB7XG4gICAgICBwb2ludHM6IFsnY3InLCAnY2wnXSxcbiAgICAgIG9mZnNldDogWy00LCAwXSxcbiAgICB9LFxuICAgIHJpZ2h0OiB7XG4gICAgICBwb2ludHM6IFsnY2wnLCAnY3InXSxcbiAgICAgIG9mZnNldDogWzQsIDBdLFxuICAgIH0sXG4gICAgdG9wOiB7XG4gICAgICBwb2ludHM6IFsnYmMnLCAndGMnXSxcbiAgICAgIG9mZnNldDogWzAsIC00XSxcbiAgICB9LFxuICAgIGJvdHRvbToge1xuICAgICAgcG9pbnRzOiBbJ3RjJywgJ2JjJ10sXG4gICAgICBvZmZzZXQ6IFswLCA0XSxcbiAgICB9LFxuICAgIHRvcExlZnQ6IHtcbiAgICAgIHBvaW50czogWydibCcsICd0YyddLFxuICAgICAgb2Zmc2V0OiBbLShob3Jpem9udGFsQXJyb3dTaGlmdCArIGFycm93V2lkdGgpLCAtNF0sXG4gICAgfSxcbiAgICBsZWZ0VG9wOiB7XG4gICAgICBwb2ludHM6IFsndHInLCAnY2wnXSxcbiAgICAgIG9mZnNldDogWy00LCAtKHZlcnRpY2FsQXJyb3dTaGlmdCArIGFycm93V2lkdGgpXSxcbiAgICB9LFxuICAgIHRvcFJpZ2h0OiB7XG4gICAgICBwb2ludHM6IFsnYnInLCAndGMnXSxcbiAgICAgIG9mZnNldDogW2hvcml6b250YWxBcnJvd1NoaWZ0ICsgYXJyb3dXaWR0aCwgLTRdLFxuICAgIH0sXG4gICAgcmlnaHRUb3A6IHtcbiAgICAgIHBvaW50czogWyd0bCcsICdjciddLFxuICAgICAgb2Zmc2V0OiBbNCwgLSh2ZXJ0aWNhbEFycm93U2hpZnQgKyBhcnJvd1dpZHRoKV0sXG4gICAgfSxcbiAgICBib3R0b21SaWdodDoge1xuICAgICAgcG9pbnRzOiBbJ3RyJywgJ2JjJ10sXG4gICAgICBvZmZzZXQ6IFtob3Jpem9udGFsQXJyb3dTaGlmdCArIGFycm93V2lkdGgsIDRdLFxuICAgIH0sXG4gICAgcmlnaHRCb3R0b206IHtcbiAgICAgIHBvaW50czogWydibCcsICdjciddLFxuICAgICAgb2Zmc2V0OiBbNCwgdmVydGljYWxBcnJvd1NoaWZ0ICsgYXJyb3dXaWR0aF0sXG4gICAgfSxcbiAgICBib3R0b21MZWZ0OiB7XG4gICAgICBwb2ludHM6IFsndGwnLCAnYmMnXSxcbiAgICAgIG9mZnNldDogWy0oaG9yaXpvbnRhbEFycm93U2hpZnQgKyBhcnJvd1dpZHRoKSwgNF0sXG4gICAgfSxcbiAgICBsZWZ0Qm90dG9tOiB7XG4gICAgICBwb2ludHM6IFsnYnInLCAnY2wnXSxcbiAgICAgIG9mZnNldDogWy00LCB2ZXJ0aWNhbEFycm93U2hpZnQgKyBhcnJvd1dpZHRoXSxcbiAgICB9LFxuICB9O1xuICBPYmplY3Qua2V5cyhwbGFjZW1lbnRNYXApLmZvckVhY2goa2V5ID0+IHtcbiAgICBwbGFjZW1lbnRNYXBba2V5XSA9IGNvbmZpZy5hcnJvd1BvaW50QXRDZW50ZXIgPyB7XG4gICAgICAuLi5wbGFjZW1lbnRNYXBba2V5XSxcbiAgICAgIG92ZXJmbG93OiBnZXRPdmVyZmxvd09wdGlvbnMoYXV0b0FkanVzdE92ZXJmbG93KSxcbiAgICAgIHRhcmdldE9mZnNldCxcbiAgICB9IDoge1xuICAgICAgLi4ucmNQbGFjZW1lbnRzW2tleV0sXG4gICAgICBvdmVyZmxvdzogZ2V0T3ZlcmZsb3dPcHRpb25zKGF1dG9BZGp1c3RPdmVyZmxvdyksXG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiBwbGFjZW1lbnRNYXA7XG59XG4iXX0=