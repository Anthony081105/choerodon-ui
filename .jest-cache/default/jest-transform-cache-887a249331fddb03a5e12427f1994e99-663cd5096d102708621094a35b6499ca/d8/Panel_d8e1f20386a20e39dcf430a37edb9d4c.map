{"version":3,"sources":["Panel.jsx"],"names":["generateOptions","length","disabledOptions","hideDisabledOptions","step","arr","value","indexOf","push","Panel","props","newValue","setState","onChange","currentSelectPanel","use12Hours","disabledHours","Array","isArray","isAM","filter","h","map","state","selectionRange","nextProps","onEsc","defaultOpenValue","hour","prefixCls","className","placeholder","disabledMinutes","disabledSeconds","allowEmpty","showHour","showMinute","showSecond","format","clearText","addon","onClear","focusOnOpen","onKeyDown","hourStep","minuteStep","secondStep","inputReadOnly","disabledHourOptions","disabledMinuteOptions","disabledSecondOptions","minute","hourOptions","minuteOptions","secondOptions","onCurrentSelectPanelChange","Component","PropTypes","string","object","bool","func","number","noop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classNames from 'classnames';\nimport noop from 'lodash/noop';\nimport Header from './Header';\nimport Combobox from './Combobox';\n\nfunction generateOptions(length, disabledOptions, hideDisabledOptions, step = 1) {\n  const arr = [];\n  for (let value = 0; value < length; value += step) {\n    if (!disabledOptions || disabledOptions.indexOf(value) < 0 || !hideDisabledOptions) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\n\nclass Panel extends Component {\n  static propTypes = {\n    clearText: PropTypes.string,\n    prefixCls: PropTypes.string,\n    className: PropTypes.string,\n    defaultOpenValue: PropTypes.object,\n    value: PropTypes.object,\n    placeholder: PropTypes.string,\n    format: PropTypes.string,\n    inputReadOnly: PropTypes.bool,\n    disabledHours: PropTypes.func,\n    disabledMinutes: PropTypes.func,\n    disabledSeconds: PropTypes.func,\n    hideDisabledOptions: PropTypes.bool,\n    onChange: PropTypes.func,\n    onEsc: PropTypes.func,\n    allowEmpty: PropTypes.bool,\n    showHour: PropTypes.bool,\n    showMinute: PropTypes.bool,\n    showSecond: PropTypes.bool,\n    onClear: PropTypes.func,\n    use12Hours: PropTypes.bool,\n    hourStep: PropTypes.number,\n    minuteStep: PropTypes.number,\n    secondStep: PropTypes.number,\n    addon: PropTypes.func,\n    focusOnOpen: PropTypes.bool,\n    onKeyDown: PropTypes.func,\n  };\n\n  static defaultProps = {\n    prefixCls: 'rc-time-picker-panel',\n    onChange: noop,\n    onClear: noop,\n    disabledHours: noop,\n    disabledMinutes: noop,\n    disabledSeconds: noop,\n    defaultOpenValue: moment(),\n    use12Hours: false,\n    addon: noop,\n    onKeyDown: noop,\n    inputReadOnly: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: props.value,\n      selectionRange: [],\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const value = nextProps.value;\n    if (value) {\n      this.setState({\n        value,\n      });\n    }\n  }\n\n  onChange = (newValue) => {\n    this.setState({ value: newValue });\n    this.props.onChange(newValue);\n  };\n\n  onCurrentSelectPanelChange = (currentSelectPanel) => {\n    this.setState({ currentSelectPanel });\n  };\n\n  close() {\n    this.props.onEsc();\n  }\n\n  disabledHours = () => {\n    const { use12Hours, disabledHours } = this.props;\n    let disabledOptions = disabledHours();\n    if (use12Hours && Array.isArray(disabledOptions)) {\n      if (this.isAM()) {\n        disabledOptions = disabledOptions.filter(h => h < 12).map(h => (h === 0 ? 12 : h));\n      } else {\n        disabledOptions = disabledOptions.map(h => (h === 12 ? 12 : h - 12));\n      }\n    }\n    return disabledOptions;\n  };\n\n  isAM() {\n    const value = (this.state.value || this.props.defaultOpenValue);\n    return value.hour() >= 0 && value.hour() < 12;\n  }\n\n  render() {\n    const {\n      prefixCls, className, placeholder, disabledMinutes,\n      disabledSeconds, hideDisabledOptions, allowEmpty, showHour, showMinute, showSecond,\n      format, defaultOpenValue, clearText, onEsc, addon, use12Hours, onClear,\n      focusOnOpen, onKeyDown, hourStep, minuteStep, secondStep, inputReadOnly,\n    } = this.props;\n    const {\n      value, currentSelectPanel,\n    } = this.state;\n    const disabledHourOptions = this.disabledHours();\n    const disabledMinuteOptions = disabledMinutes(value ? value.hour() : null);\n    const disabledSecondOptions = disabledSeconds(value ? value.hour() : null,\n      value ? value.minute() : null);\n    const hourOptions = generateOptions(\n      24, disabledHourOptions, hideDisabledOptions, hourStep,\n    );\n    const minuteOptions = generateOptions(\n      60, disabledMinuteOptions, hideDisabledOptions, minuteStep,\n    );\n    const secondOptions = generateOptions(\n      60, disabledSecondOptions, hideDisabledOptions, secondStep,\n    );\n\n    return (\n      <div className={classNames({ [`${prefixCls}-inner`]: true, [className]: !!className })}>\n        <Header\n          clearText={clearText}\n          prefixCls={prefixCls}\n          defaultOpenValue={defaultOpenValue}\n          value={value}\n          currentSelectPanel={currentSelectPanel}\n          onEsc={onEsc}\n          format={format}\n          placeholder={placeholder}\n          hourOptions={hourOptions}\n          minuteOptions={minuteOptions}\n          secondOptions={secondOptions}\n          disabledHours={this.disabledHours}\n          disabledMinutes={disabledMinutes}\n          disabledSeconds={disabledSeconds}\n          onChange={this.onChange}\n          onClear={onClear}\n          allowEmpty={allowEmpty}\n          focusOnOpen={focusOnOpen}\n          onKeyDown={onKeyDown}\n          inputReadOnly={inputReadOnly}\n        />\n        <Combobox\n          prefixCls={prefixCls}\n          value={value}\n          defaultOpenValue={defaultOpenValue}\n          format={format}\n          onChange={this.onChange}\n          showHour={showHour}\n          showMinute={showMinute}\n          showSecond={showSecond}\n          hourOptions={hourOptions}\n          minuteOptions={minuteOptions}\n          secondOptions={secondOptions}\n          disabledHours={this.disabledHours}\n          disabledMinutes={disabledMinutes}\n          disabledSeconds={disabledSeconds}\n          onCurrentSelectPanelChange={this.onCurrentSelectPanelChange}\n          use12Hours={use12Hours}\n          isAM={this.isAM()}\n        />\n        {addon(this)}\n      </div>\n    );\n  }\n}\n\nexport default Panel;\n"]}