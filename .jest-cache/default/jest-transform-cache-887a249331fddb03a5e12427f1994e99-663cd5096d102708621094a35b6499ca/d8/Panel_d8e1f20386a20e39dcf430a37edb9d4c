ff4d33545539f2e238ea5780c5ca1595
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _moment = _interopRequireDefault(require("moment"));

var _classnames = _interopRequireDefault(require("classnames"));

var _noop = _interopRequireDefault(require("lodash/noop"));

var _Header = _interopRequireDefault(require("./Header"));

var _Combobox = _interopRequireDefault(require("./Combobox"));

function generateOptions(length, disabledOptions, hideDisabledOptions) {
  var step = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;
  var arr = [];

  for (var value = 0; value < length; value += step) {
    if (!disabledOptions || disabledOptions.indexOf(value) < 0 || !hideDisabledOptions) {
      arr.push(value);
    }
  }

  return arr;
}

var Panel =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Panel, _Component);

  function Panel(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, Panel);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(Panel).call(this, props));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onChange", function (newValue) {
      _this.setState({
        value: newValue
      });

      _this.props.onChange(newValue);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onCurrentSelectPanelChange", function (currentSelectPanel) {
      _this.setState({
        currentSelectPanel: currentSelectPanel
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "disabledHours", function () {
      var _this$props = _this.props,
          use12Hours = _this$props.use12Hours,
          disabledHours = _this$props.disabledHours;
      var disabledOptions = disabledHours();

      if (use12Hours && Array.isArray(disabledOptions)) {
        if (_this.isAM()) {
          disabledOptions = disabledOptions.filter(function (h) {
            return h < 12;
          }).map(function (h) {
            return h === 0 ? 12 : h;
          });
        } else {
          disabledOptions = disabledOptions.map(function (h) {
            return h === 12 ? 12 : h - 12;
          });
        }
      }

      return disabledOptions;
    });
    _this.state = {
      value: props.value,
      selectionRange: []
    };
    return _this;
  }

  (0, _createClass2["default"])(Panel, [{
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      var value = nextProps.value;

      if (value) {
        this.setState({
          value: value
        });
      }
    }
  }, {
    key: "close",
    value: function close() {
      this.props.onEsc();
    }
  }, {
    key: "isAM",
    value: function isAM() {
      var value = this.state.value || this.props.defaultOpenValue;
      return value.hour() >= 0 && value.hour() < 12;
    }
  }, {
    key: "render",
    value: function render() {
      var _classNames;

      var _this$props2 = this.props,
          prefixCls = _this$props2.prefixCls,
          className = _this$props2.className,
          placeholder = _this$props2.placeholder,
          disabledMinutes = _this$props2.disabledMinutes,
          disabledSeconds = _this$props2.disabledSeconds,
          hideDisabledOptions = _this$props2.hideDisabledOptions,
          allowEmpty = _this$props2.allowEmpty,
          showHour = _this$props2.showHour,
          showMinute = _this$props2.showMinute,
          showSecond = _this$props2.showSecond,
          format = _this$props2.format,
          defaultOpenValue = _this$props2.defaultOpenValue,
          clearText = _this$props2.clearText,
          onEsc = _this$props2.onEsc,
          addon = _this$props2.addon,
          use12Hours = _this$props2.use12Hours,
          onClear = _this$props2.onClear,
          focusOnOpen = _this$props2.focusOnOpen,
          onKeyDown = _this$props2.onKeyDown,
          hourStep = _this$props2.hourStep,
          minuteStep = _this$props2.minuteStep,
          secondStep = _this$props2.secondStep,
          inputReadOnly = _this$props2.inputReadOnly;
      var _this$state = this.state,
          value = _this$state.value,
          currentSelectPanel = _this$state.currentSelectPanel;
      var disabledHourOptions = this.disabledHours();
      var disabledMinuteOptions = disabledMinutes(value ? value.hour() : null);
      var disabledSecondOptions = disabledSeconds(value ? value.hour() : null, value ? value.minute() : null);
      var hourOptions = generateOptions(24, disabledHourOptions, hideDisabledOptions, hourStep);
      var minuteOptions = generateOptions(60, disabledMinuteOptions, hideDisabledOptions, minuteStep);
      var secondOptions = generateOptions(60, disabledSecondOptions, hideDisabledOptions, secondStep);
      return _react["default"].createElement("div", {
        className: (0, _classnames["default"])((_classNames = {}, (0, _defineProperty2["default"])(_classNames, "".concat(prefixCls, "-inner"), true), (0, _defineProperty2["default"])(_classNames, className, !!className), _classNames))
      }, _react["default"].createElement(_Header["default"], {
        clearText: clearText,
        prefixCls: prefixCls,
        defaultOpenValue: defaultOpenValue,
        value: value,
        currentSelectPanel: currentSelectPanel,
        onEsc: onEsc,
        format: format,
        placeholder: placeholder,
        hourOptions: hourOptions,
        minuteOptions: minuteOptions,
        secondOptions: secondOptions,
        disabledHours: this.disabledHours,
        disabledMinutes: disabledMinutes,
        disabledSeconds: disabledSeconds,
        onChange: this.onChange,
        onClear: onClear,
        allowEmpty: allowEmpty,
        focusOnOpen: focusOnOpen,
        onKeyDown: onKeyDown,
        inputReadOnly: inputReadOnly
      }), _react["default"].createElement(_Combobox["default"], {
        prefixCls: prefixCls,
        value: value,
        defaultOpenValue: defaultOpenValue,
        format: format,
        onChange: this.onChange,
        showHour: showHour,
        showMinute: showMinute,
        showSecond: showSecond,
        hourOptions: hourOptions,
        minuteOptions: minuteOptions,
        secondOptions: secondOptions,
        disabledHours: this.disabledHours,
        disabledMinutes: disabledMinutes,
        disabledSeconds: disabledSeconds,
        onCurrentSelectPanelChange: this.onCurrentSelectPanelChange,
        use12Hours: use12Hours,
        isAM: this.isAM()
      }), addon(this));
    }
  }]);
  return Panel;
}(_react.Component);

(0, _defineProperty2["default"])(Panel, "propTypes", {
  clearText: _propTypes["default"].string,
  prefixCls: _propTypes["default"].string,
  className: _propTypes["default"].string,
  defaultOpenValue: _propTypes["default"].object,
  value: _propTypes["default"].object,
  placeholder: _propTypes["default"].string,
  format: _propTypes["default"].string,
  inputReadOnly: _propTypes["default"].bool,
  disabledHours: _propTypes["default"].func,
  disabledMinutes: _propTypes["default"].func,
  disabledSeconds: _propTypes["default"].func,
  hideDisabledOptions: _propTypes["default"].bool,
  onChange: _propTypes["default"].func,
  onEsc: _propTypes["default"].func,
  allowEmpty: _propTypes["default"].bool,
  showHour: _propTypes["default"].bool,
  showMinute: _propTypes["default"].bool,
  showSecond: _propTypes["default"].bool,
  onClear: _propTypes["default"].func,
  use12Hours: _propTypes["default"].bool,
  hourStep: _propTypes["default"].number,
  minuteStep: _propTypes["default"].number,
  secondStep: _propTypes["default"].number,
  addon: _propTypes["default"].func,
  focusOnOpen: _propTypes["default"].bool,
  onKeyDown: _propTypes["default"].func
});
(0, _defineProperty2["default"])(Panel, "defaultProps", {
  prefixCls: 'rc-time-picker-panel',
  onChange: _noop["default"],
  onClear: _noop["default"],
  disabledHours: _noop["default"],
  disabledMinutes: _noop["default"],
  disabledSeconds: _noop["default"],
  defaultOpenValue: (0, _moment["default"])(),
  use12Hours: false,
  addon: _noop["default"],
  onKeyDown: _noop["default"],
  inputReadOnly: false
});
var _default = Panel;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBhbmVsLmpzeCJdLCJuYW1lcyI6WyJnZW5lcmF0ZU9wdGlvbnMiLCJsZW5ndGgiLCJkaXNhYmxlZE9wdGlvbnMiLCJoaWRlRGlzYWJsZWRPcHRpb25zIiwic3RlcCIsImFyciIsInZhbHVlIiwiaW5kZXhPZiIsInB1c2giLCJQYW5lbCIsInByb3BzIiwibmV3VmFsdWUiLCJzZXRTdGF0ZSIsIm9uQ2hhbmdlIiwiY3VycmVudFNlbGVjdFBhbmVsIiwidXNlMTJIb3VycyIsImRpc2FibGVkSG91cnMiLCJBcnJheSIsImlzQXJyYXkiLCJpc0FNIiwiZmlsdGVyIiwiaCIsIm1hcCIsInN0YXRlIiwic2VsZWN0aW9uUmFuZ2UiLCJuZXh0UHJvcHMiLCJvbkVzYyIsImRlZmF1bHRPcGVuVmFsdWUiLCJob3VyIiwicHJlZml4Q2xzIiwiY2xhc3NOYW1lIiwicGxhY2Vob2xkZXIiLCJkaXNhYmxlZE1pbnV0ZXMiLCJkaXNhYmxlZFNlY29uZHMiLCJhbGxvd0VtcHR5Iiwic2hvd0hvdXIiLCJzaG93TWludXRlIiwic2hvd1NlY29uZCIsImZvcm1hdCIsImNsZWFyVGV4dCIsImFkZG9uIiwib25DbGVhciIsImZvY3VzT25PcGVuIiwib25LZXlEb3duIiwiaG91clN0ZXAiLCJtaW51dGVTdGVwIiwic2Vjb25kU3RlcCIsImlucHV0UmVhZE9ubHkiLCJkaXNhYmxlZEhvdXJPcHRpb25zIiwiZGlzYWJsZWRNaW51dGVPcHRpb25zIiwiZGlzYWJsZWRTZWNvbmRPcHRpb25zIiwibWludXRlIiwiaG91ck9wdGlvbnMiLCJtaW51dGVPcHRpb25zIiwic2Vjb25kT3B0aW9ucyIsIm9uQ3VycmVudFNlbGVjdFBhbmVsQ2hhbmdlIiwiQ29tcG9uZW50IiwiUHJvcFR5cGVzIiwic3RyaW5nIiwib2JqZWN0IiwiYm9vbCIsImZ1bmMiLCJudW1iZXIiLCJub29wIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7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O2lDQURmcEQsSyxrQkE4QmtCO0FBQ3BCb0IsRUFBQUEsU0FBUyxFQUFFLHNCQURTO0FBRXBCaEIsRUFBQUEsUUFBUSxFQUFFa0QsZ0JBRlU7QUFHcEJ0QixFQUFBQSxPQUFPLEVBQUVzQixnQkFIVztBQUlwQi9DLEVBQUFBLGFBQWEsRUFBRStDLGdCQUpLO0FBS3BCL0IsRUFBQUEsZUFBZSxFQUFFK0IsZ0JBTEc7QUFNcEI5QixFQUFBQSxlQUFlLEVBQUU4QixnQkFORztBQU9wQnBDLEVBQUFBLGdCQUFnQixFQUFFLHlCQVBFO0FBUXBCWixFQUFBQSxVQUFVLEVBQUUsS0FSUTtBQVNwQnlCLEVBQUFBLEtBQUssRUFBRXVCLGdCQVRhO0FBVXBCcEIsRUFBQUEsU0FBUyxFQUFFb0IsZ0JBVlM7QUFXcEJoQixFQUFBQSxhQUFhLEVBQUU7QUFYSyxDO2VBdUlUdEMsSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgbm9vcCBmcm9tICdsb2Rhc2gvbm9vcCc7XG5pbXBvcnQgSGVhZGVyIGZyb20gJy4vSGVhZGVyJztcbmltcG9ydCBDb21ib2JveCBmcm9tICcuL0NvbWJvYm94JztcblxuZnVuY3Rpb24gZ2VuZXJhdGVPcHRpb25zKGxlbmd0aCwgZGlzYWJsZWRPcHRpb25zLCBoaWRlRGlzYWJsZWRPcHRpb25zLCBzdGVwID0gMSkge1xuICBjb25zdCBhcnIgPSBbXTtcbiAgZm9yIChsZXQgdmFsdWUgPSAwOyB2YWx1ZSA8IGxlbmd0aDsgdmFsdWUgKz0gc3RlcCkge1xuICAgIGlmICghZGlzYWJsZWRPcHRpb25zIHx8IGRpc2FibGVkT3B0aW9ucy5pbmRleE9mKHZhbHVlKSA8IDAgfHwgIWhpZGVEaXNhYmxlZE9wdGlvbnMpIHtcbiAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFycjtcbn1cblxuY2xhc3MgUGFuZWwgZXh0ZW5kcyBDb21wb25lbnQge1xuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xuICAgIGNsZWFyVGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBwcmVmaXhDbHM6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGRlZmF1bHRPcGVuVmFsdWU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgdmFsdWU6IFByb3BUeXBlcy5vYmplY3QsXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZm9ybWF0OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGlucHV0UmVhZE9ubHk6IFByb3BUeXBlcy5ib29sLFxuICAgIGRpc2FibGVkSG91cnM6IFByb3BUeXBlcy5mdW5jLFxuICAgIGRpc2FibGVkTWludXRlczogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZGlzYWJsZWRTZWNvbmRzOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBoaWRlRGlzYWJsZWRPcHRpb25zOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Fc2M6IFByb3BUeXBlcy5mdW5jLFxuICAgIGFsbG93RW1wdHk6IFByb3BUeXBlcy5ib29sLFxuICAgIHNob3dIb3VyOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzaG93TWludXRlOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBzaG93U2Vjb25kOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbkNsZWFyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICB1c2UxMkhvdXJzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBob3VyU3RlcDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBtaW51dGVTdGVwOiBQcm9wVHlwZXMubnVtYmVyLFxuICAgIHNlY29uZFN0ZXA6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgYWRkb246IFByb3BUeXBlcy5mdW5jLFxuICAgIGZvY3VzT25PcGVuOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvbktleURvd246IFByb3BUeXBlcy5mdW5jLFxuICB9O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgcHJlZml4Q2xzOiAncmMtdGltZS1waWNrZXItcGFuZWwnLFxuICAgIG9uQ2hhbmdlOiBub29wLFxuICAgIG9uQ2xlYXI6IG5vb3AsXG4gICAgZGlzYWJsZWRIb3Vyczogbm9vcCxcbiAgICBkaXNhYmxlZE1pbnV0ZXM6IG5vb3AsXG4gICAgZGlzYWJsZWRTZWNvbmRzOiBub29wLFxuICAgIGRlZmF1bHRPcGVuVmFsdWU6IG1vbWVudCgpLFxuICAgIHVzZTEySG91cnM6IGZhbHNlLFxuICAgIGFkZG9uOiBub29wLFxuICAgIG9uS2V5RG93bjogbm9vcCxcbiAgICBpbnB1dFJlYWRPbmx5OiBmYWxzZSxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgc2VsZWN0aW9uUmFuZ2U6IFtdLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgIGNvbnN0IHZhbHVlID0gbmV4dFByb3BzLnZhbHVlO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgb25DaGFuZ2UgPSAobmV3VmFsdWUpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgdmFsdWU6IG5ld1ZhbHVlIH0pO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UobmV3VmFsdWUpO1xuICB9O1xuXG4gIG9uQ3VycmVudFNlbGVjdFBhbmVsQ2hhbmdlID0gKGN1cnJlbnRTZWxlY3RQYW5lbCkgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBjdXJyZW50U2VsZWN0UGFuZWwgfSk7XG4gIH07XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5wcm9wcy5vbkVzYygpO1xuICB9XG5cbiAgZGlzYWJsZWRIb3VycyA9ICgpID0+IHtcbiAgICBjb25zdCB7IHVzZTEySG91cnMsIGRpc2FibGVkSG91cnMgfSA9IHRoaXMucHJvcHM7XG4gICAgbGV0IGRpc2FibGVkT3B0aW9ucyA9IGRpc2FibGVkSG91cnMoKTtcbiAgICBpZiAodXNlMTJIb3VycyAmJiBBcnJheS5pc0FycmF5KGRpc2FibGVkT3B0aW9ucykpIHtcbiAgICAgIGlmICh0aGlzLmlzQU0oKSkge1xuICAgICAgICBkaXNhYmxlZE9wdGlvbnMgPSBkaXNhYmxlZE9wdGlvbnMuZmlsdGVyKGggPT4gaCA8IDEyKS5tYXAoaCA9PiAoaCA9PT0gMCA/IDEyIDogaCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGlzYWJsZWRPcHRpb25zID0gZGlzYWJsZWRPcHRpb25zLm1hcChoID0+IChoID09PSAxMiA/IDEyIDogaCAtIDEyKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkaXNhYmxlZE9wdGlvbnM7XG4gIH07XG5cbiAgaXNBTSgpIHtcbiAgICBjb25zdCB2YWx1ZSA9ICh0aGlzLnN0YXRlLnZhbHVlIHx8IHRoaXMucHJvcHMuZGVmYXVsdE9wZW5WYWx1ZSk7XG4gICAgcmV0dXJuIHZhbHVlLmhvdXIoKSA+PSAwICYmIHZhbHVlLmhvdXIoKSA8IDEyO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHByZWZpeENscywgY2xhc3NOYW1lLCBwbGFjZWhvbGRlciwgZGlzYWJsZWRNaW51dGVzLFxuICAgICAgZGlzYWJsZWRTZWNvbmRzLCBoaWRlRGlzYWJsZWRPcHRpb25zLCBhbGxvd0VtcHR5LCBzaG93SG91ciwgc2hvd01pbnV0ZSwgc2hvd1NlY29uZCxcbiAgICAgIGZvcm1hdCwgZGVmYXVsdE9wZW5WYWx1ZSwgY2xlYXJUZXh0LCBvbkVzYywgYWRkb24sIHVzZTEySG91cnMsIG9uQ2xlYXIsXG4gICAgICBmb2N1c09uT3Blbiwgb25LZXlEb3duLCBob3VyU3RlcCwgbWludXRlU3RlcCwgc2Vjb25kU3RlcCwgaW5wdXRSZWFkT25seSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7XG4gICAgICB2YWx1ZSwgY3VycmVudFNlbGVjdFBhbmVsLFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGRpc2FibGVkSG91ck9wdGlvbnMgPSB0aGlzLmRpc2FibGVkSG91cnMoKTtcbiAgICBjb25zdCBkaXNhYmxlZE1pbnV0ZU9wdGlvbnMgPSBkaXNhYmxlZE1pbnV0ZXModmFsdWUgPyB2YWx1ZS5ob3VyKCkgOiBudWxsKTtcbiAgICBjb25zdCBkaXNhYmxlZFNlY29uZE9wdGlvbnMgPSBkaXNhYmxlZFNlY29uZHModmFsdWUgPyB2YWx1ZS5ob3VyKCkgOiBudWxsLFxuICAgICAgdmFsdWUgPyB2YWx1ZS5taW51dGUoKSA6IG51bGwpO1xuICAgIGNvbnN0IGhvdXJPcHRpb25zID0gZ2VuZXJhdGVPcHRpb25zKFxuICAgICAgMjQsIGRpc2FibGVkSG91ck9wdGlvbnMsIGhpZGVEaXNhYmxlZE9wdGlvbnMsIGhvdXJTdGVwLFxuICAgICk7XG4gICAgY29uc3QgbWludXRlT3B0aW9ucyA9IGdlbmVyYXRlT3B0aW9ucyhcbiAgICAgIDYwLCBkaXNhYmxlZE1pbnV0ZU9wdGlvbnMsIGhpZGVEaXNhYmxlZE9wdGlvbnMsIG1pbnV0ZVN0ZXAsXG4gICAgKTtcbiAgICBjb25zdCBzZWNvbmRPcHRpb25zID0gZ2VuZXJhdGVPcHRpb25zKFxuICAgICAgNjAsIGRpc2FibGVkU2Vjb25kT3B0aW9ucywgaGlkZURpc2FibGVkT3B0aW9ucywgc2Vjb25kU3RlcCxcbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHsgW2Ake3ByZWZpeENsc30taW5uZXJgXTogdHJ1ZSwgW2NsYXNzTmFtZV06ICEhY2xhc3NOYW1lIH0pfT5cbiAgICAgICAgPEhlYWRlclxuICAgICAgICAgIGNsZWFyVGV4dD17Y2xlYXJUZXh0fVxuICAgICAgICAgIHByZWZpeENscz17cHJlZml4Q2xzfVxuICAgICAgICAgIGRlZmF1bHRPcGVuVmFsdWU9e2RlZmF1bHRPcGVuVmFsdWV9XG4gICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgIGN1cnJlbnRTZWxlY3RQYW5lbD17Y3VycmVudFNlbGVjdFBhbmVsfVxuICAgICAgICAgIG9uRXNjPXtvbkVzY31cbiAgICAgICAgICBmb3JtYXQ9e2Zvcm1hdH1cbiAgICAgICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgaG91ck9wdGlvbnM9e2hvdXJPcHRpb25zfVxuICAgICAgICAgIG1pbnV0ZU9wdGlvbnM9e21pbnV0ZU9wdGlvbnN9XG4gICAgICAgICAgc2Vjb25kT3B0aW9ucz17c2Vjb25kT3B0aW9uc31cbiAgICAgICAgICBkaXNhYmxlZEhvdXJzPXt0aGlzLmRpc2FibGVkSG91cnN9XG4gICAgICAgICAgZGlzYWJsZWRNaW51dGVzPXtkaXNhYmxlZE1pbnV0ZXN9XG4gICAgICAgICAgZGlzYWJsZWRTZWNvbmRzPXtkaXNhYmxlZFNlY29uZHN9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2V9XG4gICAgICAgICAgb25DbGVhcj17b25DbGVhcn1cbiAgICAgICAgICBhbGxvd0VtcHR5PXthbGxvd0VtcHR5fVxuICAgICAgICAgIGZvY3VzT25PcGVuPXtmb2N1c09uT3Blbn1cbiAgICAgICAgICBvbktleURvd249e29uS2V5RG93bn1cbiAgICAgICAgICBpbnB1dFJlYWRPbmx5PXtpbnB1dFJlYWRPbmx5fVxuICAgICAgICAvPlxuICAgICAgICA8Q29tYm9ib3hcbiAgICAgICAgICBwcmVmaXhDbHM9e3ByZWZpeENsc31cbiAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgZGVmYXVsdE9wZW5WYWx1ZT17ZGVmYXVsdE9wZW5WYWx1ZX1cbiAgICAgICAgICBmb3JtYXQ9e2Zvcm1hdH1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5vbkNoYW5nZX1cbiAgICAgICAgICBzaG93SG91cj17c2hvd0hvdXJ9XG4gICAgICAgICAgc2hvd01pbnV0ZT17c2hvd01pbnV0ZX1cbiAgICAgICAgICBzaG93U2Vjb25kPXtzaG93U2Vjb25kfVxuICAgICAgICAgIGhvdXJPcHRpb25zPXtob3VyT3B0aW9uc31cbiAgICAgICAgICBtaW51dGVPcHRpb25zPXttaW51dGVPcHRpb25zfVxuICAgICAgICAgIHNlY29uZE9wdGlvbnM9e3NlY29uZE9wdGlvbnN9XG4gICAgICAgICAgZGlzYWJsZWRIb3Vycz17dGhpcy5kaXNhYmxlZEhvdXJzfVxuICAgICAgICAgIGRpc2FibGVkTWludXRlcz17ZGlzYWJsZWRNaW51dGVzfVxuICAgICAgICAgIGRpc2FibGVkU2Vjb25kcz17ZGlzYWJsZWRTZWNvbmRzfVxuICAgICAgICAgIG9uQ3VycmVudFNlbGVjdFBhbmVsQ2hhbmdlPXt0aGlzLm9uQ3VycmVudFNlbGVjdFBhbmVsQ2hhbmdlfVxuICAgICAgICAgIHVzZTEySG91cnM9e3VzZTEySG91cnN9XG4gICAgICAgICAgaXNBTT17dGhpcy5pc0FNKCl9XG4gICAgICAgIC8+XG4gICAgICAgIHthZGRvbih0aGlzKX1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGFuZWw7XG4iXX0=