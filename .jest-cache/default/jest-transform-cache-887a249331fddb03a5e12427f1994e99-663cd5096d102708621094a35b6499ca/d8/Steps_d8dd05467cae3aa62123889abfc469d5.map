{"version":3,"sources":["Steps.jsx"],"names":["Steps","props","domNode","children","length","calcTimeout","clearTimeout","setTimeout","lastStepOffsetWidth","lastChild","offsetWidth","state","Math","abs","setState","flexSupported","calcStepOffsetWidth","cancel","prefixCls","style","className","direction","labelPlacement","iconPrefix","status","size","current","progressDot","restProps","filteredChildren","Children","toArray","filter","c","lastIndex","adjustedlabelPlacement","classString","map","child","index","childProps","stepNumber","wrapperStyle","itemWidth","adjustMarginRight","round","Component","PropTypes","string","any","oneOfType","bool","func","object","number"],"mappings":"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","sourcesContent":["/* eslint react/no-did-mount-set-state: 0 */\nimport React, { Children, cloneElement, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { findDOMNode } from 'react-dom';\nimport classNames from 'classnames';\nimport debounce from 'lodash/debounce';\nimport { isFlexSupported } from './utils';\n\nexport default class Steps extends Component {\n  static propTypes = {\n    prefixCls: PropTypes.string,\n    className: PropTypes.string,\n    iconPrefix: PropTypes.string,\n    direction: PropTypes.string,\n    labelPlacement: PropTypes.string,\n    children: PropTypes.any,\n    status: PropTypes.string,\n    size: PropTypes.string,\n    progressDot: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n    style: PropTypes.object,\n    current: PropTypes.number,\n  };\n  static defaultProps = {\n    prefixCls: 'rc-steps',\n    iconPrefix: 'rc',\n    direction: 'horizontal',\n    labelPlacement: 'horizontal',\n    current: 0,\n    status: 'process',\n    size: '',\n    progressDot: false,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      flexSupported: true,\n      lastStepOffsetWidth: 0,\n    };\n    this.calcStepOffsetWidth = debounce(this.calcStepOffsetWidth, 150);\n  }\n\n  componentDidMount() {\n    this.calcStepOffsetWidth();\n    if (!isFlexSupported()) {\n      this.setState({\n        flexSupported: false,\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    this.calcStepOffsetWidth();\n  }\n\n  componentWillUnmount() {\n    if (this.calcTimeout) {\n      clearTimeout(this.calcTimeout);\n    }\n    if (this.calcStepOffsetWidth && this.calcStepOffsetWidth.cancel) {\n      this.calcStepOffsetWidth.cancel();\n    }\n  }\n\n  calcStepOffsetWidth = () => {\n    if (isFlexSupported()) {\n      return;\n    }\n    // Just for IE9\n    const domNode = findDOMNode(this);\n    if (domNode.children.length > 0) {\n      if (this.calcTimeout) {\n        clearTimeout(this.calcTimeout);\n      }\n      this.calcTimeout = setTimeout(() => {\n        // +1 for fit edge bug of digit width, like 35.4px\n        const lastStepOffsetWidth = (domNode.lastChild.offsetWidth || 0) + 1;\n        // Reduce shake bug\n        if (\n          this.state.lastStepOffsetWidth === lastStepOffsetWidth ||\n          Math.abs(this.state.lastStepOffsetWidth - lastStepOffsetWidth) <= 3\n        ) {\n          return;\n        }\n        this.setState({ lastStepOffsetWidth });\n      });\n    }\n  };\n\n  render() {\n    const {\n      prefixCls,\n      style = {},\n      className,\n      children,\n      direction,\n      labelPlacement,\n      iconPrefix,\n      status,\n      size,\n      current,\n      progressDot,\n      ...restProps\n    } = this.props;\n    const { lastStepOffsetWidth, flexSupported } = this.state;\n    const filteredChildren = Children.toArray(children).filter(c => !!c);\n    const lastIndex = filteredChildren.length - 1;\n    const adjustedlabelPlacement = !!progressDot ? 'vertical' : labelPlacement;\n    const classString = classNames(prefixCls, `${prefixCls}-${direction}`, className, {\n      [`${prefixCls}-${size}`]: size,\n      [`${prefixCls}-label-${adjustedlabelPlacement}`]: direction === 'horizontal',\n      [`${prefixCls}-dot`]: !!progressDot,\n    });\n\n    return (\n      <div className={classString} style={style} {...restProps}>\n        {Children.map(filteredChildren, (child, index) => {\n          if (!child) {\n            return null;\n          }\n          const childProps = {\n            stepNumber: `${index + 1}`,\n            prefixCls,\n            iconPrefix,\n            wrapperStyle: style,\n            progressDot,\n            ...child.props,\n          };\n          if (!flexSupported && direction !== 'vertical' && index !== lastIndex) {\n            childProps.itemWidth = `${100 / lastIndex}%`;\n            childProps.adjustMarginRight = -Math.round(lastStepOffsetWidth / lastIndex + 1);\n          }\n          // fix tail color\n          if (status === 'error' && index === current - 1) {\n            childProps.className = `${prefixCls}-next-error`;\n          }\n          if (!child.props.status) {\n            if (index === current) {\n              childProps.status = status;\n            } else if (index < current) {\n              childProps.status = 'finish';\n            } else {\n              childProps.status = 'wait';\n            }\n          }\n          return cloneElement(child, childProps);\n        })}\n      </div>\n    );\n  }\n}\n"]}