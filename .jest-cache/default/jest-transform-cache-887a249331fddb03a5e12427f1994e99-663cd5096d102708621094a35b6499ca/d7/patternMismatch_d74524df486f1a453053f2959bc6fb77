efc8c1fe73d8b2972a0525e2a2d0daa7
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = patternMismatch;

var _isEmpty = _interopRequireDefault(require("../../_util/isEmpty"));

var _ValidationResult = _interopRequireDefault(require("../ValidationResult"));

var _localeContext = require("../../locale-context");

function generatePattern(pattern) {
  if (pattern instanceof RegExp) {
    return pattern;
  }

  var begin = pattern.startsWith('^') ? '' : '^';
  var end = pattern.endsWith('$') ? '' : '$';
  return new RegExp("".concat(begin).concat(pattern).concat(end));
}

function patternMismatch(value, props) {
  var pattern = props.pattern,
      defaultValidationMessages = props.defaultValidationMessages;

  if (!(0, _isEmpty["default"])(value) && !!pattern && !generatePattern(pattern).test(value)) {
    var ruleName = 'patternMismatch';
    var _defaultValidationMes = defaultValidationMessages[ruleName],
        validationMessage = _defaultValidationMes === void 0 ? (0, _localeContext.$l)('Validator', 'pattern_mismatch') : _defaultValidationMes;
    return new _ValidationResult["default"]({
      validationMessage: validationMessage,
      value: value,
      ruleName: ruleName
    });
  }

  return true;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzLXByby92YWxpZGF0b3IvcnVsZXMvcGF0dGVybk1pc21hdGNoLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFHQSxTQUFTLGVBQVQsQ0FBeUIsT0FBekIsRUFBaUQ7QUFDL0MsTUFBSSxPQUFPLFlBQVksTUFBdkIsRUFBK0I7QUFDN0IsV0FBTyxPQUFQO0FBQ0Q7O0FBQ0QsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLFVBQVIsQ0FBbUIsR0FBbkIsSUFBMEIsRUFBMUIsR0FBK0IsR0FBN0M7QUFDQSxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsUUFBUixDQUFpQixHQUFqQixJQUF3QixFQUF4QixHQUE2QixHQUF6QztBQUNBLFNBQU8sSUFBSSxNQUFKLFdBQWMsS0FBZCxTQUFzQixPQUF0QixTQUFnQyxHQUFoQyxFQUFQO0FBQ0Q7O0FBRWEsU0FBVSxlQUFWLENBQTBCLEtBQTFCLEVBQXNDLEtBQXRDLEVBQTJEO0FBQUEsTUFDL0QsT0FEK0QsR0FDeEIsS0FEd0IsQ0FDL0QsT0FEK0Q7QUFBQSxNQUN0RCx5QkFEc0QsR0FDeEIsS0FEd0IsQ0FDdEQseUJBRHNEOztBQUV2RSxNQUFJLENBQUMseUJBQVEsS0FBUixDQUFELElBQW1CLENBQUMsQ0FBQyxPQUFyQixJQUFnQyxDQUFDLGVBQWUsQ0FBQyxPQUFELENBQWYsQ0FBeUIsSUFBekIsQ0FBOEIsS0FBOUIsQ0FBckMsRUFBMkU7QUFDekUsUUFBTSxRQUFRLEdBQUcsaUJBQWpCO0FBRHlFLGdDQUlyRSx5QkFKcUUsQ0FHdEUsUUFIc0U7QUFBQSxRQUczRCxpQkFIMkQsc0NBR3ZDLHVCQUFHLFdBQUgsRUFBZ0Isa0JBQWhCLENBSHVDO0FBS3pFLFdBQU8sSUFBSSw0QkFBSixDQUFxQjtBQUMxQixNQUFBLGlCQUFpQixFQUFqQixpQkFEMEI7QUFFMUIsTUFBQSxLQUFLLEVBQUwsS0FGMEI7QUFHMUIsTUFBQSxRQUFRLEVBQVI7QUFIMEIsS0FBckIsQ0FBUDtBQUtEOztBQUNELFNBQU8sSUFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGlzRW1wdHkgZnJvbSAnLi4vLi4vX3V0aWwvaXNFbXB0eSc7XG5pbXBvcnQgVmFsaWRhdGlvblJlc3VsdCBmcm9tICcuLi9WYWxpZGF0aW9uUmVzdWx0JztcbmltcG9ydCB7ICRsIH0gZnJvbSAnLi4vLi4vbG9jYWxlLWNvbnRleHQnO1xuaW1wb3J0IHsgbWV0aG9kUmV0dXJuLCBWYWxpZGF0b3JQcm9wcyB9IGZyb20gJy4nO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZVBhdHRlcm4ocGF0dGVybjogc3RyaW5nIHwgUmVnRXhwKTogUmVnRXhwIHtcbiAgaWYgKHBhdHRlcm4gaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfVxuICBjb25zdCBiZWdpbiA9IHBhdHRlcm4uc3RhcnRzV2l0aCgnXicpID8gJycgOiAnXic7XG4gIGNvbnN0IGVuZCA9IHBhdHRlcm4uZW5kc1dpdGgoJyQnKSA/ICcnIDogJyQnO1xuICByZXR1cm4gbmV3IFJlZ0V4cChgJHtiZWdpbn0ke3BhdHRlcm59JHtlbmR9YCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhdHRlcm5NaXNtYXRjaCh2YWx1ZTogYW55LCBwcm9wczogVmFsaWRhdG9yUHJvcHMpOiBtZXRob2RSZXR1cm4ge1xuICBjb25zdCB7IHBhdHRlcm4sIGRlZmF1bHRWYWxpZGF0aW9uTWVzc2FnZXMgfSA9IHByb3BzO1xuICBpZiAoIWlzRW1wdHkodmFsdWUpICYmICEhcGF0dGVybiAmJiAhZ2VuZXJhdGVQYXR0ZXJuKHBhdHRlcm4pLnRlc3QodmFsdWUpKSB7XG4gICAgY29uc3QgcnVsZU5hbWUgPSAncGF0dGVybk1pc21hdGNoJztcbiAgICBjb25zdCB7XG4gICAgICBbcnVsZU5hbWVdOiB2YWxpZGF0aW9uTWVzc2FnZSA9ICRsKCdWYWxpZGF0b3InLCAncGF0dGVybl9taXNtYXRjaCcpLFxuICAgIH0gPSBkZWZhdWx0VmFsaWRhdGlvbk1lc3NhZ2VzO1xuICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdCh7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIHZhbHVlLFxuICAgICAgcnVsZU5hbWUsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG4iXX0=