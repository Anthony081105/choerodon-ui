2f16811050ee18a59299414ff2e988a9
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = customError;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _isString = _interopRequireDefault(require("lodash/isString"));

var _ValidationResult = _interopRequireDefault(require("../ValidationResult"));

var _localeContext = require("../../locale-context");

function customError(_x, _x2) {
  return _customError.apply(this, arguments);
}

function _customError() {
  _customError = (0, _asyncToGenerator2["default"])(
  /*#__PURE__*/
  _regenerator["default"].mark(function _callee(value, props) {
    var customValidator, name, record, form, result;
    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            customValidator = props.customValidator, name = props.name, record = props.record, form = props.form;

            if (!(typeof customValidator === 'function')) {
              _context.next = 7;
              break;
            }

            _context.next = 4;
            return customValidator(value, name, record || form);

          case 4:
            result = _context.sent;

            if (!((0, _isString["default"])(result) || result === false)) {
              _context.next = 7;
              break;
            }

            return _context.abrupt("return", new _ValidationResult["default"]({
              validationMessage: result || (0, _localeContext.$l)('Validator', 'unknown'),
              value: value,
              ruleName: 'customError'
            }));

          case 7:
            return _context.abrupt("return", true);

          case 8:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  }));
  return _customError.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9odWlodWF3ay9Eb2N1bWVudHMvb3B0L2Nob2Vyb2Rvbi11aS9jb21wb25lbnRzLXByby92YWxpZGF0b3IvcnVsZXMvY3VzdG9tRXJyb3IudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7U0FHOEIsVzs7Ozs7OzsrQkFBZixpQkFDYixLQURhLEVBRWIsS0FGYTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJTCxZQUFBLGVBSkssR0FJbUMsS0FKbkMsQ0FJTCxlQUpLLEVBSVksSUFKWixHQUltQyxLQUpuQyxDQUlZLElBSlosRUFJa0IsTUFKbEIsR0FJbUMsS0FKbkMsQ0FJa0IsTUFKbEIsRUFJMEIsSUFKMUIsR0FJbUMsS0FKbkMsQ0FJMEIsSUFKMUI7O0FBQUEsa0JBS1QsT0FBTyxlQUFQLEtBQTJCLFVBTGxCO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUEsbUJBTVUsZUFBZSxDQUFDLEtBQUQsRUFBUSxJQUFSLEVBQWMsTUFBTSxJQUFJLElBQXhCLENBTnpCOztBQUFBO0FBTUwsWUFBQSxNQU5LOztBQUFBLGtCQU9QLDBCQUFTLE1BQVQsS0FBb0IsTUFBTSxLQUFLLEtBUHhCO0FBQUE7QUFBQTtBQUFBOztBQUFBLDZDQVFGLElBQUksNEJBQUosQ0FBcUI7QUFDMUIsY0FBQSxpQkFBaUIsRUFBRSxNQUFNLElBQUksdUJBQUcsV0FBSCxFQUFnQixTQUFoQixDQURIO0FBRTFCLGNBQUEsS0FBSyxFQUFMLEtBRjBCO0FBRzFCLGNBQUEsUUFBUSxFQUFFO0FBSGdCLGFBQXJCLENBUkU7O0FBQUE7QUFBQSw2Q0FlTixJQWZNOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaXNTdHJpbmcgZnJvbSAnbG9kYXNoL2lzU3RyaW5nJztcbmltcG9ydCBWYWxpZGF0aW9uUmVzdWx0IGZyb20gJy4uL1ZhbGlkYXRpb25SZXN1bHQnO1xuaW1wb3J0IHsgJGwgfSBmcm9tICcuLi8uLi9sb2NhbGUtY29udGV4dCc7XG5pbXBvcnQgeyBtZXRob2RSZXR1cm4sIFZhbGlkYXRvclByb3BzIH0gZnJvbSAnLic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGN1c3RvbUVycm9yKFxuICB2YWx1ZTogYW55LFxuICBwcm9wczogVmFsaWRhdG9yUHJvcHMsXG4pOiBQcm9taXNlPG1ldGhvZFJldHVybj4ge1xuICBjb25zdCB7IGN1c3RvbVZhbGlkYXRvciwgbmFtZSwgcmVjb3JkLCBmb3JtIH0gPSBwcm9wcztcbiAgaWYgKHR5cGVvZiBjdXN0b21WYWxpZGF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjdXN0b21WYWxpZGF0b3IodmFsdWUsIG5hbWUsIHJlY29yZCB8fCBmb3JtKTtcbiAgICBpZiAoaXNTdHJpbmcocmVzdWx0KSB8fCByZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoe1xuICAgICAgICB2YWxpZGF0aW9uTWVzc2FnZTogcmVzdWx0IHx8ICRsKCdWYWxpZGF0b3InLCAndW5rbm93bicpLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgcnVsZU5hbWU6ICdjdXN0b21FcnJvcicsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG4iXX0=