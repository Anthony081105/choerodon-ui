{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/radio/group.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Children, Component, ReactNode } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqual from 'lodash/isEqual';\nimport Radio from './radio';\nimport { RadioChangeEvent, RadioGroupProps, RadioGroupState } from './interface';\nimport { getPrefixCls } from '../configure';\n\nfunction getCheckedValue(children: ReactNode) {\n  let value = null;\n  let matched = false;\n  Children.forEach(children, (radio: any) => {\n    if (radio && radio.props && radio.props.checked) {\n      value = radio.props.value;\n      matched = true;\n    }\n  });\n  return matched ? { value } : undefined;\n}\n\nexport default class RadioGroup extends Component<RadioGroupProps, RadioGroupState> {\n  static displayName = 'RadioGroup';\n\n  static defaultProps = {\n    disabled: false,\n  };\n\n  static childContextTypes = {\n    radioGroup: PropTypes.any,\n  };\n\n  constructor(props: RadioGroupProps) {\n    super(props);\n    let value;\n    if ('value' in props) {\n      value = props.value;\n    } else if ('defaultValue' in props) {\n      value = props.defaultValue;\n    } else {\n      const checkedValue = getCheckedValue(props.children);\n      value = checkedValue && checkedValue.value;\n    }\n    this.state = {\n      value,\n    };\n  }\n\n  getChildContext() {\n    const { disabled, name } = this.props;\n    const { value } = this.state;\n    return {\n      radioGroup: {\n        onChange: this.onRadioChange,\n        value,\n        disabled,\n        name,\n      },\n    };\n  }\n\n  componentWillReceiveProps(nextProps: RadioGroupProps) {\n    if ('value' in nextProps) {\n      this.setState({\n        value: nextProps.value,\n      });\n    } else {\n      const checkedValue = getCheckedValue(nextProps.children);\n      if (checkedValue) {\n        this.setState({\n          value: checkedValue.value,\n        });\n      }\n    }\n  }\n\n  shouldComponentUpdate(nextProps: RadioGroupProps, nextState: RadioGroupState) {\n    return !shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState);\n  }\n\n  onRadioChange = (ev: RadioChangeEvent) => {\n    const { value: lastValue } = this.state;\n    const { value } = ev.target;\n    if (!('value' in this.props)) {\n      this.setState({\n        value,\n      });\n    }\n\n    const { onChange } = this.props;\n    if (onChange && value !== lastValue) {\n      onChange(ev);\n    }\n  };\n\n  render() {\n    const { props } = this;\n    const { prefixCls: customizePrefixCls, className = '', options, size, label, disabled } = props;\n    const { value } = this.state;\n    const prefixCls = getPrefixCls('radio-group', customizePrefixCls);\n    const classString = classNames(\n      prefixCls,\n      {\n        [`${prefixCls}-${size}`]: size,\n      },\n      className,\n    );\n    const wrapperClassString = classNames({\n      [`${prefixCls}-wrapper`]: true,\n      [`${prefixCls}-has-label`]: label,\n    });\n    const labelClassString = classNames(`${prefixCls}-label`, {\n      'label-disabled': disabled,\n    });\n    let { children } = props;\n\n    // 如果存在 options, 优先使用\n    if (options && options.length > 0) {\n      children = options.map((option, index) => {\n        if (typeof option === 'string') {\n          // 此处类型自动推导为 string\n          return (\n            <Radio\n              key={String(index)}\n              disabled={disabled}\n              value={option}\n              checked={value === option}\n            >\n              {option}\n            </Radio>\n          );\n        }\n        // 此处类型自动推导为 { label: string value: string }\n        return (\n          <Radio\n            key={String(index)}\n            disabled={option.disabled || disabled}\n            value={option.value}\n            checked={value === option.value}\n          >\n            {option.label}\n          </Radio>\n        );\n      });\n    }\n\n    return (\n      <div className={wrapperClassString}>\n        {props.label ? <span className={labelClassString}>{props.label}</span> : null}\n        <div\n          className={classString}\n          style={props.style}\n          onMouseEnter={props.onMouseEnter}\n          onMouseLeave={props.onMouseLeave}\n          id={props.id}\n        >\n          {children}\n        </div>\n      </div>\n    );\n  }\n}\n"]}