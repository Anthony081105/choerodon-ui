{"version":3,"sources":["SubPopupMenu.jsx"],"names":["allDisabled","arr","length","every","c","props","disabled","updateActiveKey","store","menuId","activeKey","state","getState","setState","getEventKey","eventKey","getActiveKey","originalActiveKey","children","found","i","defaultActiveFirst","saveRef","index","instanceArray","indexOf","push","SubPopupMenu","e","callback","keyCode","handled","getFlatInstanceArray","forEach","obj","active","onKeyDown","activeItem","KeyCode","UP","DOWN","step","preventDefault","key","hover","selectInfo","onDeselect","onSelect","onClick","onOpenChange","onDestroy","openTransitionName","direction","len","concat","reverse","activeIndex","ci","slice","undefined","start","child","extraProps","childProps","isActive","newChildProps","mode","level","inlineIndent","renderMenuItem","rootPrefixCls","prefixCls","parentMenu","manualRef","ref","bind","multiple","noop","onItemHover","getOpenTransitionName","openAnimation","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","builtinPlacements","itemIcon","expandIcon","triggerSubMenuAction","subMenuKey","openKeys","selectedKeys","renderCommonMenuItem","nextProps","hidden","className","haveRendered","haveOpened","domProps","role","id","focusable","tabIndex","overflowedIndicator","theme","menuAllProps","transitionAppear","animProps","transitionName","animation","appear","Children","map","Component","PropTypes","func","string","oneOfType","object","arrayOf","bool","any","shape","style","defaultSelectedKeys","defaultOpenKeys","number","oneOf","node","connected"],"mappings":"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","sourcesContent":["import React, { Children, cloneElement, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport noop from 'lodash/noop';\nimport { connect } from 'mini-store';\nimport KeyCode from '../../_util/KeyCode';\nimport createChainedFunction from '../util/createChainedFunction';\nimport { getKeyFromChildrenIndex, loopMenuItem, menuAllProps } from './util';\nimport DOMWrap from './DOMWrap';\n\nfunction allDisabled(arr) {\n  if (!arr.length) {\n    return true;\n  }\n  return arr.every(c => !!c.props.disabled);\n}\n\nfunction updateActiveKey(store, menuId, activeKey) {\n  const state = store.getState();\n  store.setState({\n    activeKey: {\n      ...state.activeKey,\n      [menuId]: activeKey,\n    },\n  });\n}\n\nfunction getEventKey(props) {\n  // when eventKey not available ,it's menu and return menu id '0-menu-'\n  return props.eventKey || '0-menu-';\n}\n\nexport function getActiveKey(props, originalActiveKey) {\n  let activeKey = originalActiveKey;\n  const { children, eventKey } = props;\n  if (activeKey) {\n    let found;\n    loopMenuItem(children, (c, i) => {\n      if (c && !c.props.disabled && activeKey === getKeyFromChildrenIndex(c, eventKey, i)) {\n        found = true;\n      }\n    });\n    if (found) {\n      return activeKey;\n    }\n  }\n  activeKey = null;\n  if (props.defaultActiveFirst) {\n    loopMenuItem(children, (c, i) => {\n      if (!activeKey && c && !c.props.disabled) {\n        activeKey = getKeyFromChildrenIndex(c, eventKey, i);\n      }\n    });\n    return activeKey;\n  }\n  return activeKey;\n}\n\nexport function saveRef(c) {\n  if (c) {\n    const index = this.instanceArray.indexOf(c);\n    if (index !== -1) {\n      // update component if it's already inside instanceArray\n      this.instanceArray[index] = c;\n    } else {\n      // add component if it's not in instanceArray yet;\n      this.instanceArray.push(c);\n    }\n  }\n}\n\nexport class SubPopupMenu extends Component {\n  static propTypes = {\n    onSelect: PropTypes.func,\n    onClick: PropTypes.func,\n    onDeselect: PropTypes.func,\n    onOpenChange: PropTypes.func,\n    onDestroy: PropTypes.func,\n    openTransitionName: PropTypes.string,\n    openAnimation: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    openKeys: PropTypes.arrayOf(PropTypes.string),\n    hidden: PropTypes.bool,\n    children: PropTypes.any,\n    parentMenu: PropTypes.object,\n    eventKey: PropTypes.string,\n    store: PropTypes.shape({\n      getState: PropTypes.func,\n      setState: PropTypes.func,\n    }),\n\n    // adding in refactor\n    focusable: PropTypes.bool,\n    multiple: PropTypes.bool,\n    style: PropTypes.object,\n    defaultActiveFirst: PropTypes.bool,\n    activeKey: PropTypes.string,\n    selectedKeys: PropTypes.arrayOf(PropTypes.string),\n    defaultSelectedKeys: PropTypes.arrayOf(PropTypes.string),\n    defaultOpenKeys: PropTypes.arrayOf(PropTypes.string),\n    level: PropTypes.number,\n    mode: PropTypes.oneOf(['horizontal', 'vertical', 'vertical-left', 'vertical-right', 'inline']),\n    triggerSubMenuAction: PropTypes.oneOf(['click', 'hover']),\n    inlineIndent: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    manualRef: PropTypes.func,\n    itemIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n    expandIcon: PropTypes.oneOfType([PropTypes.func, PropTypes.node]),\n  };\n\n  static defaultProps = {\n    prefixCls: 'rc-menu',\n    className: '',\n    mode: 'vertical',\n    level: 1,\n    inlineIndent: 24,\n    hidden: false,\n    focusable: true,\n    style: {},\n    manualRef: noop,\n  };\n\n  constructor(props) {\n    super(props);\n\n    props.store.setState({\n      activeKey: {\n        ...props.store.getState().activeKey,\n        [props.eventKey]: getActiveKey(props, props.activeKey),\n      },\n    });\n\n    this.instanceArray = [];\n  }\n\n  componentDidMount() {\n    // invoke customized ref to expose component to mixin\n    if (this.props.manualRef) {\n      this.props.manualRef(this);\n    }\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !this.props.hidden || !nextProps.hidden;\n  }\n\n  componentDidUpdate() {\n    const props = this.props;\n    const originalActiveKey = 'activeKey' in props ? props.activeKey : props.store.getState().activeKey[getEventKey(props)];\n    const activeKey = getActiveKey(props, originalActiveKey);\n    if (activeKey !== originalActiveKey) {\n      updateActiveKey(props.store, getEventKey(props), activeKey);\n    }\n  }\n\n  // all keyboard events callbacks run from here at first\n  onKeyDown = (e, callback) => {\n    const keyCode = e.keyCode;\n    let handled;\n    this.getFlatInstanceArray().forEach((obj) => {\n      if (obj && obj.props.active && obj.onKeyDown) {\n        handled = obj.onKeyDown(e);\n      }\n    });\n    if (handled) {\n      return 1;\n    }\n    let activeItem = null;\n    if (keyCode === KeyCode.UP || keyCode === KeyCode.DOWN) {\n      activeItem = this.step(keyCode === KeyCode.UP ? -1 : 1);\n    }\n    if (activeItem) {\n      e.preventDefault();\n      updateActiveKey(this.props.store, getEventKey(this.props), activeItem.props.eventKey);\n\n      if (typeof callback === 'function') {\n        callback(activeItem);\n      }\n\n      return 1;\n    }\n  };\n\n  onItemHover = (e) => {\n    const { key, hover } = e;\n    updateActiveKey(this.props.store, getEventKey(this.props), hover ? key : null);\n  };\n\n  onDeselect = (selectInfo) => {\n    this.props.onDeselect(selectInfo);\n  };\n\n  onSelect = (selectInfo) => {\n    this.props.onSelect(selectInfo);\n  };\n\n  onClick = (e) => {\n    this.props.onClick(e);\n  };\n\n  onOpenChange = (e) => {\n    this.props.onOpenChange(e);\n  };\n\n  onDestroy = (key) => {\n    /* istanbul ignore next */\n    this.props.onDestroy(key);\n  };\n\n  getFlatInstanceArray = () => {\n    return this.instanceArray;\n  };\n\n  getOpenTransitionName = () => {\n    return this.props.openTransitionName;\n  };\n\n  step = (direction) => {\n    let children = this.getFlatInstanceArray();\n    const activeKey = this.props.store.getState().activeKey[getEventKey(this.props)];\n    const len = children.length;\n    if (!len) {\n      return null;\n    }\n    if (direction < 0) {\n      children = children.concat().reverse();\n    }\n    // find current activeIndex\n    let activeIndex = -1;\n    children.every((c, ci) => {\n      if (c && c.props.eventKey === activeKey) {\n        activeIndex = ci;\n        return false;\n      }\n      return true;\n    });\n    if (\n      !this.props.defaultActiveFirst && activeIndex !== -1\n      &&\n      allDisabled(children.slice(activeIndex, len - 1))\n    ) {\n      return undefined;\n    }\n    const start = (activeIndex + 1) % len;\n    let i = start;\n\n    do {\n      const child = children[i];\n      if (!child || child.props.disabled) {\n        i = (i + 1) % len;\n      } else {\n        return child;\n      }\n    } while (i !== start);\n\n    return null;\n  };\n\n  renderCommonMenuItem = (child, i, extraProps) => {\n    const state = this.props.store.getState();\n    const props = this.props;\n    const key = getKeyFromChildrenIndex(child, props.eventKey, i);\n    const childProps = child.props;\n    const isActive = key === state.activeKey;\n    const newChildProps = {\n      mode: childProps.mode || props.mode,\n      level: props.level,\n      inlineIndent: props.inlineIndent,\n      renderMenuItem: this.renderMenuItem,\n      rootPrefixCls: props.prefixCls,\n      index: i,\n      parentMenu: props.parentMenu,\n      // customized ref function, need to be invoked manually in child's componentDidMount\n      manualRef: childProps.disabled ? undefined : createChainedFunction(child.ref, saveRef.bind(this)),\n      eventKey: key,\n      active: !childProps.disabled && isActive,\n      multiple: props.multiple,\n      onClick: (e) => {\n        (childProps.onClick || noop)(e);\n        this.onClick(e);\n      },\n      onItemHover: this.onItemHover,\n      openTransitionName: this.getOpenTransitionName(),\n      openAnimation: props.openAnimation,\n      subMenuOpenDelay: props.subMenuOpenDelay,\n      subMenuCloseDelay: props.subMenuCloseDelay,\n      forceSubMenuRender: props.forceSubMenuRender,\n      onOpenChange: this.onOpenChange,\n      onDeselect: this.onDeselect,\n      onSelect: this.onSelect,\n      builtinPlacements: props.builtinPlacements,\n      itemIcon: childProps.itemIcon || this.props.itemIcon,\n      expandIcon: childProps.expandIcon || this.props.expandIcon,\n      ...extraProps,\n    };\n    if (props.mode === 'inline') {\n      newChildProps.triggerSubMenuAction = 'click';\n    }\n    return cloneElement(child, newChildProps);\n  };\n\n  renderMenuItem = (c, i, subMenuKey) => {\n    /* istanbul ignore if */\n    if (!c) {\n      return null;\n    }\n    const props = this.props;\n    const extraProps = {\n      openKeys: props.openKeys,\n      selectedKeys: props.selectedKeys,\n      triggerSubMenuAction: props.triggerSubMenuAction,\n      subMenuKey,\n    };\n    return this.renderCommonMenuItem(c, i, extraProps);\n  };\n\n  render() {\n    const { ...props } = this.props;\n\n    this.instanceArray = [];\n    const className = classNames(\n      props.prefixCls,\n      props.className,\n      `${props.prefixCls}-${props.mode}`,\n    );\n    const haveRendered = this.haveRendered;\n    this.haveRendered = true;\n    this.haveOpened = this.haveOpened || !props.hidden || props.forceSubMenuRender;\n    if (!this.haveOpened) {\n      return null;\n    }\n    const domProps = {\n      className,\n      // role could be 'select' and by default set to menu\n      role: props.role || 'menu',\n    };\n    if (props.id) {\n      domProps.id = props.id;\n    }\n    if (props.focusable) {\n      domProps.tabIndex = '0';\n      domProps.onKeyDown = this.onKeyDown;\n    }\n    const { prefixCls, eventKey, hidden, level, mode, overflowedIndicator, theme } = props;\n    menuAllProps.forEach(key => delete props[key]);\n\n    const transitionAppear = !(!haveRendered && !props.hidden && props.mode === 'inline');\n\n    props.className += ` ${props.prefixCls}-sub`;\n    delete props.onClick;\n    const animProps = {};\n    if (props.openTransitionName) {\n      animProps.transitionName = props.openTransitionName;\n    } else if (typeof props.openAnimation === 'object') {\n      animProps.animation = { ...props.openAnimation };\n      if (!transitionAppear) {\n        delete animProps.animation.appear;\n      }\n    }\n    return (\n      /* eslint-disable */\n      <DOMWrap\n        {...props}\n        prefixCls={prefixCls}\n        mode={mode}\n        tag=\"ul\"\n        level={level}\n        theme={theme}\n        hiddenClassName={`${prefixCls}-hidden`}\n        hidden={hidden}\n        overflowedIndicator={overflowedIndicator}\n        {...domProps}\n      >\n        {Children.map(\n          props.children,\n          (c, i) => this.renderMenuItem(c, i, eventKey || '0-menu-'),\n        )}\n      </DOMWrap>\n      /*eslint-enable */\n    );\n  }\n}\n\nconst connected = connect()(SubPopupMenu);\n\nexport default connected;\n"]}