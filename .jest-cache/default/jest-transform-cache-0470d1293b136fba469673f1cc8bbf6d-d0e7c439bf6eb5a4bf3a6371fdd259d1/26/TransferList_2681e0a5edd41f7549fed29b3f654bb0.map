{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components-pro/transfer/TransferList.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { ReactNode } from 'react';\nimport { computed } from 'mobx';\nimport { observer } from 'mobx-react';\nimport classNames from 'classnames';\nimport omit from 'lodash/omit';\nimport ObserverCheckBox from '../check-box/CheckBox';\nimport { $l } from '../locale-context';\nimport Record from '../data-set/Record';\nimport ObserverTextField from '../text-field/TextField';\nimport Icon from '../icon';\nimport { getItemKey, Select, SelectProps } from '../select/Select';\nimport autobind from '../_util/autobind';\nimport { stopPropagation } from '../_util/EventManager';\nimport ViewComponent from '../core/ViewComponent';\n\nexport interface TransferListProps extends SelectProps {\n  header?: ReactNode;\n  selected: Record[];\n  footer?: (options: Record[]) => ReactNode;\n  onSelect: (e) => void;\n  onSelectAll: (value: any) => void;\n}\n\n@observer\nexport default class TransferList extends Select<TransferListProps> {\n  @computed\n  get popup() {\n    return true;\n  }\n\n  @computed\n  get header(): ReactNode {\n    const {\n      prefixCls,\n      multiple,\n      observableProps: { header },\n    } = this;\n    if (multiple || header) {\n      return (\n        <div className={`${prefixCls}-header`}>\n          {this.getHeaderSelected()}\n          {header && <span className={`${prefixCls}-header-title`}>{header}</span>}\n        </div>\n      );\n    }\n    return undefined;\n  }\n\n  @computed\n  get footer(): ReactNode {\n    const {\n      prefixCls,\n      filteredOptions,\n      observableProps: { footer },\n    } = this;\n    if (footer) {\n      return <div className={`${prefixCls}-footer`}>{footer(filteredOptions)}</div>;\n    }\n    return undefined;\n  }\n\n  getOtherProps() {\n    return omit(super.getOtherProps(), [\n      'type',\n      'autoComplete',\n      'ref',\n      'body',\n      'footer',\n      'header',\n      'selected',\n      'onChange',\n      'onSelect',\n      'onSelectAll',\n      'onKeyDown',\n    ]);\n  }\n\n  getObservableProps(props, context) {\n    return {\n      ...super.getObservableProps(props, context),\n      header: props.header,\n      footer: props.footer,\n    };\n  }\n\n  getMenuPrefixCls() {\n    return `${this.prefixCls}-content`;\n  }\n\n  @autobind\n  handleSelectAllChange(value) {\n    const { onSelectAll } = this.props;\n    if (onSelectAll) {\n      onSelectAll(value ? this.filteredOptions : []);\n    }\n  }\n\n  @autobind\n  handleClear() {\n    this.setText(undefined);\n  }\n\n  getHeaderSelected() {\n    const {\n      filteredOptions: { length },\n      multiple,\n      prefixCls,\n      props: {\n        selected: { length: selectedLength },\n      },\n    } = this;\n    const selectedText = selectedLength ? `${selectedLength}/` : '';\n    if (multiple) {\n      return (\n        <ObserverCheckBox\n          disabled={this.isDisabled()}\n          onChange={this.handleSelectAllChange}\n          onFocus={stopPropagation}\n          checked={!!length && length === selectedLength}\n          indeterminate={!!selectedLength && length !== selectedLength}\n        >\n          <span className={`${prefixCls}-header-selected`}>\n            {`${selectedText}${length}${$l('Transfer', 'items')}`}\n          </span>\n        </ObserverCheckBox>\n      );\n    }\n  }\n\n  getSearchField(): ReactNode {\n    const { prefixCls } = this;\n    return (\n      <div className={`${prefixCls}-body-search-wrapper`}>\n        <ObserverTextField\n          ref={this.elementReference}\n          onInput={this.handleChange}\n          onClear={this.handleClear}\n          onKeyDown={this.handleKeyDown}\n          suffix={<Icon type=\"search\" />}\n          clearButton\n        />\n      </div>\n    );\n  }\n\n  renderBody(): ReactNode {\n    const {\n      prefixCls,\n      searchable,\n      textField,\n      valueField,\n      props: { selected, onSelect },\n    } = this;\n    const searchField = searchable && this.getSearchField();\n    const classString = classNames(`${prefixCls}-body`, {\n      [`${prefixCls}-body-with-search`]: searchable,\n    });\n    const selectedKeys = selected.map(record =>\n      getItemKey(record, record.get(textField), record.get(valueField)),\n    );\n    return (\n      <div className={classString}>\n        {searchField}\n        <div\n          className={`${prefixCls}-content-wrapper`}\n          onFocus={searchable ? stopPropagation : undefined}\n        >\n          {this.getMenu({ selectedKeys, onClick: onSelect, focusable: !this.searchable })}\n        </div>\n      </div>\n    );\n  }\n\n  getClassName() {\n    const { prefixCls, header, footer } = this;\n    return super.getClassName({\n      [`${prefixCls}-with-header`]: header,\n      [`${prefixCls}-with-footer`]: footer,\n    });\n  }\n\n  removeLastValue() {}\n\n  @autobind\n  handleBlur(e) {\n    ViewComponent.prototype.handleBlur.call(this, e);\n  }\n\n  render() {\n    const { header, footer } = this;\n    return (\n      <div {...this.getOtherProps()}>\n        {header}\n        {this.renderBody()}\n        {footer}\n      </div>\n    );\n  }\n}\n"]}