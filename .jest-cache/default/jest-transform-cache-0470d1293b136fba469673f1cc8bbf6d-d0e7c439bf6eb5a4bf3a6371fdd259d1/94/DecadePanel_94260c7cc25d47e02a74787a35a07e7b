4f984cb15b105cd0ad1f36b393259531
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _classnames = _interopRequireDefault(require("classnames"));

var ROW = 4;
var COL = 3;

function goYear(direction) {
  var next = this.state.value.clone();
  next.add(direction, 'years');
  this.setState({
    value: next
  });
}

function chooseDecade(year, event) {
  var next = this.state.value.clone();
  next.year(year);
  next.month(this.state.value.month());
  this.props.onSelect(next);
  event.preventDefault();
}

var DecadePanel =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(DecadePanel, _Component);

  function DecadePanel(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, DecadePanel);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(DecadePanel).call(this, props));
    _this.state = {
      value: props.value || props.defaultValue
    }; // bind methods

    _this.prefixCls = "".concat(props.rootPrefixCls, "-decade-panel");
    _this.nextCentury = goYear.bind((0, _assertThisInitialized2["default"])(_this), 100);
    _this.previousCentury = goYear.bind((0, _assertThisInitialized2["default"])(_this), -100);
    return _this;
  }

  (0, _createClass2["default"])(DecadePanel, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var value = this.state.value;
      var locale = this.props.locale;
      var currentYear = value.year();
      var startYear = parseInt(currentYear / 100, 10) * 100;
      var preYear = startYear - 10;
      var endYear = startYear + 99;
      var decades = [];
      var index = 0;
      var prefixCls = this.prefixCls;

      for (var rowIndex = 0; rowIndex < ROW; rowIndex++) {
        decades[rowIndex] = [];

        for (var colIndex = 0; colIndex < COL; colIndex++) {
          var startDecade = preYear + index * 10;
          var endDecade = preYear + index * 10 + 9;
          decades[rowIndex][colIndex] = {
            startDecade: startDecade,
            endDecade: endDecade
          };
          index++;
        }
      }

      var decadesEls = decades.map(function (row, decadeIndex) {
        var tds = row.map(function (decadeData) {
          var _classNameMap;

          var dStartDecade = decadeData.startDecade;
          var dEndDecade = decadeData.endDecade;
          var isLast = dStartDecade < startYear;
          var isNext = dEndDecade > endYear;
          var classNameMap = (_classNameMap = {}, (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-cell"), 1), (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-selected-cell"), dStartDecade <= currentYear && currentYear <= dEndDecade), (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-last-century-cell"), isLast), (0, _defineProperty2["default"])(_classNameMap, "".concat(prefixCls, "-next-century-cell"), isNext), _classNameMap);
          var content = "".concat(dStartDecade, "-").concat(dEndDecade);
          var clickHandler;

          if (isLast) {
            clickHandler = _this2.previousCentury;
          } else if (isNext) {
            clickHandler = _this2.nextCentury;
          } else {
            clickHandler = chooseDecade.bind(_this2, dStartDecade);
          }

          return _react["default"].createElement("td", {
            key: dStartDecade,
            onClick: clickHandler,
            role: "gridcell",
            className: (0, _classnames["default"])(classNameMap)
          }, _react["default"].createElement("a", {
            className: "".concat(prefixCls, "-decade")
          }, content));
        });
        return _react["default"].createElement("tr", {
          key: decadeIndex,
          role: "row"
        }, tds);
      });
      return _react["default"].createElement("div", {
        className: this.prefixCls
      }, _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-header")
      }, _react["default"].createElement("a", {
        className: "".concat(prefixCls, "-prev-century-btn"),
        role: "button",
        onClick: this.previousCentury,
        title: locale.previousCentury
      }), _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-century")
      }, startYear, "-", endYear), _react["default"].createElement("a", {
        className: "".concat(prefixCls, "-next-century-btn"),
        role: "button",
        onClick: this.nextCentury,
        title: locale.nextCentury
      })), _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-body")
      }, _react["default"].createElement("table", {
        className: "".concat(prefixCls, "-table"),
        cellSpacing: "0",
        role: "grid"
      }, _react["default"].createElement("tbody", {
        className: "".concat(prefixCls, "-tbody")
      }, decadesEls))));
    }
  }]);
  return DecadePanel;
}(_react.Component);

exports["default"] = DecadePanel;
(0, _defineProperty2["default"])(DecadePanel, "propTypes", {
  locale: _propTypes["default"].object,
  value: _propTypes["default"].object,
  defaultValue: _propTypes["default"].object,
  rootPrefixCls: _propTypes["default"].string
});
(0, _defineProperty2["default"])(DecadePanel, "defaultProps", {
  onSelect: function onSelect() {}
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRlY2FkZVBhbmVsLmpzeCJdLCJuYW1lcyI6WyJST1ciLCJDT0wiLCJnb1llYXIiLCJkaXJlY3Rpb24iLCJuZXh0Iiwic3RhdGUiLCJ2YWx1ZSIsImNsb25lIiwiYWRkIiwic2V0U3RhdGUiLCJjaG9vc2VEZWNhZGUiLCJ5ZWFyIiwiZXZlbnQiLCJtb250aCIsInByb3BzIiwib25TZWxlY3QiLCJwcmV2ZW50RGVmYXVsdCIsIkRlY2FkZVBhbmVsIiwiZGVmYXVsdFZhbHVlIiwicHJlZml4Q2xzIiwicm9vdFByZWZpeENscyIsIm5leHRDZW50dXJ5IiwiYmluZCIsInByZXZpb3VzQ2VudHVyeSIsImxvY2FsZSIsImN1cnJlbnRZZWFyIiwic3RhcnRZZWFyIiwicGFyc2VJbnQiLCJwcmVZZWFyIiwiZW5kWWVhciIsImRlY2FkZXMiLCJpbmRleCIsInJvd0luZGV4IiwiY29sSW5kZXgiLCJzdGFydERlY2FkZSIsImVuZERlY2FkZSIsImRlY2FkZXNFbHMiLCJtYXAiLCJyb3ciLCJkZWNhZGVJbmRleCIsInRkcyIsImRlY2FkZURhdGEiLCJkU3RhcnREZWNhZGUiLCJkRW5kRGVjYWRlIiwiaXNMYXN0IiwiaXNOZXh0IiwiY2xhc3NOYW1lTWFwIiwiY29udGVudCIsImNsaWNrSGFuZGxlciIsIkNvbXBvbmVudCIsIlByb3BUeXBlcyIsIm9iamVjdCIsInN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLEdBQUcsR0FBRyxDQUFaO0FBQ0EsSUFBTUMsR0FBRyxHQUFHLENBQVo7O0FBRUEsU0FBU0MsTUFBVCxDQUFnQkMsU0FBaEIsRUFBMkI7QUFDekIsTUFBTUMsSUFBSSxHQUFHLEtBQUtDLEtBQUwsQ0FBV0MsS0FBWCxDQUFpQkMsS0FBakIsRUFBYjtBQUNBSCxFQUFBQSxJQUFJLENBQUNJLEdBQUwsQ0FBU0wsU0FBVCxFQUFvQixPQUFwQjtBQUNBLE9BQUtNLFFBQUwsQ0FBYztBQUNaSCxJQUFBQSxLQUFLLEVBQUVGO0FBREssR0FBZDtBQUdEOztBQUVELFNBQVNNLFlBQVQsQ0FBc0JDLElBQXRCLEVBQTRCQyxLQUE1QixFQUFtQztBQUNqQyxNQUFNUixJQUFJLEdBQUcsS0FBS0MsS0FBTCxDQUFXQyxLQUFYLENBQWlCQyxLQUFqQixFQUFiO0FBQ0FILEVBQUFBLElBQUksQ0FBQ08sSUFBTCxDQUFVQSxJQUFWO0FBQ0FQLEVBQUFBLElBQUksQ0FBQ1MsS0FBTCxDQUFXLEtBQUtSLEtBQUwsQ0FBV0MsS0FBWCxDQUFpQk8sS0FBakIsRUFBWDtBQUNBLE9BQUtDLEtBQUwsQ0FBV0MsUUFBWCxDQUFvQlgsSUFBcEI7QUFDQVEsRUFBQUEsS0FBSyxDQUFDSSxjQUFOO0FBQ0Q7O0lBRW9CQyxXOzs7OztBQWFuQix1QkFBWUgsS0FBWixFQUFtQjtBQUFBOztBQUFBO0FBQ2pCLHVIQUFNQSxLQUFOO0FBQ0EsVUFBS1QsS0FBTCxHQUFhO0FBQ1hDLE1BQUFBLEtBQUssRUFBRVEsS0FBSyxDQUFDUixLQUFOLElBQWVRLEtBQUssQ0FBQ0k7QUFEakIsS0FBYixDQUZpQixDQU1qQjs7QUFDQSxVQUFLQyxTQUFMLGFBQW9CTCxLQUFLLENBQUNNLGFBQTFCO0FBQ0EsVUFBS0MsV0FBTCxHQUFtQm5CLE1BQU0sQ0FBQ29CLElBQVAsaURBQWtCLEdBQWxCLENBQW5CO0FBQ0EsVUFBS0MsZUFBTCxHQUF1QnJCLE1BQU0sQ0FBQ29CLElBQVAsaURBQWtCLENBQUMsR0FBbkIsQ0FBdkI7QUFUaUI7QUFVbEI7Ozs7NkJBRVE7QUFBQTs7QUFDUCxVQUFNaEIsS0FBSyxHQUFHLEtBQUtELEtBQUwsQ0FBV0MsS0FBekI7QUFDQSxVQUFNa0IsTUFBTSxHQUFHLEtBQUtWLEtBQUwsQ0FBV1UsTUFBMUI7QUFDQSxVQUFNQyxXQUFXLEdBQUduQixLQUFLLENBQUNLLElBQU4sRUFBcEI7QUFDQSxVQUFNZSxTQUFTLEdBQUdDLFFBQVEsQ0FBQ0YsV0FBVyxHQUFHLEdBQWYsRUFBb0IsRUFBcEIsQ0FBUixHQUFrQyxHQUFwRDtBQUNBLFVBQU1HLE9BQU8sR0FBR0YsU0FBUyxHQUFHLEVBQTVCO0FBQ0EsVUFBTUcsT0FBTyxHQUFHSCxTQUFTLEdBQUcsRUFBNUI7QUFDQSxVQUFNSSxPQUFPLEdBQUcsRUFBaEI7QUFDQSxVQUFJQyxLQUFLLEdBQUcsQ0FBWjtBQUNBLFVBQU1aLFNBQVMsR0FBRyxLQUFLQSxTQUF2Qjs7QUFFQSxXQUFLLElBQUlhLFFBQVEsR0FBRyxDQUFwQixFQUF1QkEsUUFBUSxHQUFHaEMsR0FBbEMsRUFBdUNnQyxRQUFRLEVBQS9DLEVBQW1EO0FBQ2pERixRQUFBQSxPQUFPLENBQUNFLFFBQUQsQ0FBUCxHQUFvQixFQUFwQjs7QUFDQSxhQUFLLElBQUlDLFFBQVEsR0FBRyxDQUFwQixFQUF1QkEsUUFBUSxHQUFHaEMsR0FBbEMsRUFBdUNnQyxRQUFRLEVBQS9DLEVBQW1EO0FBQ2pELGNBQU1DLFdBQVcsR0FBR04sT0FBTyxHQUFHRyxLQUFLLEdBQUcsRUFBdEM7QUFDQSxjQUFNSSxTQUFTLEdBQUdQLE9BQU8sR0FBR0csS0FBSyxHQUFHLEVBQWxCLEdBQXVCLENBQXpDO0FBQ0FELFVBQUFBLE9BQU8sQ0FBQ0UsUUFBRCxDQUFQLENBQWtCQyxRQUFsQixJQUE4QjtBQUM1QkMsWUFBQUEsV0FBVyxFQUFYQSxXQUQ0QjtBQUU1QkMsWUFBQUEsU0FBUyxFQUFUQTtBQUY0QixXQUE5QjtBQUlBSixVQUFBQSxLQUFLO0FBQ047QUFDRjs7QUFFRCxVQUFNSyxVQUFVLEdBQUdOLE9BQU8sQ0FBQ08sR0FBUixDQUFZLFVBQUNDLEdBQUQsRUFBTUMsV0FBTixFQUFzQjtBQUNuRCxZQUFNQyxHQUFHLEdBQUdGLEdBQUcsQ0FBQ0QsR0FBSixDQUFRLFVBQUFJLFVBQVUsRUFBSTtBQUFBOztBQUNoQyxjQUFNQyxZQUFZLEdBQUdELFVBQVUsQ0FBQ1AsV0FBaEM7QUFDQSxjQUFNUyxVQUFVLEdBQUdGLFVBQVUsQ0FBQ04sU0FBOUI7QUFDQSxjQUFNUyxNQUFNLEdBQUdGLFlBQVksR0FBR2hCLFNBQTlCO0FBQ0EsY0FBTW1CLE1BQU0sR0FBR0YsVUFBVSxHQUFHZCxPQUE1QjtBQUNBLGNBQU1pQixZQUFZLGtGQUNaM0IsU0FEWSxZQUNPLENBRFAsNkRBRVpBLFNBRlkscUJBRWdCdUIsWUFBWSxJQUFJakIsV0FBaEIsSUFBK0JBLFdBQVcsSUFBSWtCLFVBRjlELDZEQUdaeEIsU0FIWSx5QkFHb0J5QixNQUhwQiw2REFJWnpCLFNBSlkseUJBSW9CMEIsTUFKcEIsaUJBQWxCO0FBTUEsY0FBTUUsT0FBTyxhQUFNTCxZQUFOLGNBQXNCQyxVQUF0QixDQUFiO0FBQ0EsY0FBSUssWUFBSjs7QUFDQSxjQUFJSixNQUFKLEVBQVk7QUFDVkksWUFBQUEsWUFBWSxHQUFHLE1BQUksQ0FBQ3pCLGVBQXBCO0FBQ0QsV0FGRCxNQUVPLElBQUlzQixNQUFKLEVBQVk7QUFDakJHLFlBQUFBLFlBQVksR0FBRyxNQUFJLENBQUMzQixXQUFwQjtBQUNELFdBRk0sTUFFQTtBQUNMMkIsWUFBQUEsWUFBWSxHQUFHdEMsWUFBWSxDQUFDWSxJQUFiLENBQWtCLE1BQWxCLEVBQXdCb0IsWUFBeEIsQ0FBZjtBQUNEOztBQUNELGlCQUFRO0FBQ04sWUFBQSxHQUFHLEVBQUVBLFlBREM7QUFFTixZQUFBLE9BQU8sRUFBRU0sWUFGSDtBQUdOLFlBQUEsSUFBSSxFQUFDLFVBSEM7QUFJTixZQUFBLFNBQVMsRUFBRSw0QkFBV0YsWUFBWDtBQUpMLGFBTU47QUFDRSxZQUFBLFNBQVMsWUFBSzNCLFNBQUw7QUFEWCxhQUdHNEIsT0FISCxDQU5NLENBQVI7QUFZRCxTQWhDVyxDQUFaO0FBaUNBLGVBQVE7QUFBSSxVQUFBLEdBQUcsRUFBRVIsV0FBVDtBQUFzQixVQUFBLElBQUksRUFBQztBQUEzQixXQUFrQ0MsR0FBbEMsQ0FBUjtBQUNELE9BbkNrQixDQUFuQjtBQXFDQSxhQUNFO0FBQUssUUFBQSxTQUFTLEVBQUUsS0FBS3JCO0FBQXJCLFNBQ0U7QUFBSyxRQUFBLFNBQVMsWUFBS0EsU0FBTDtBQUFkLFNBQ0U7QUFDRSxRQUFBLFNBQVMsWUFBS0EsU0FBTCxzQkFEWDtBQUVFLFFBQUEsSUFBSSxFQUFDLFFBRlA7QUFHRSxRQUFBLE9BQU8sRUFBRSxLQUFLSSxlQUhoQjtBQUlFLFFBQUEsS0FBSyxFQUFFQyxNQUFNLENBQUNEO0FBSmhCLFFBREYsRUFRRTtBQUFLLFFBQUEsU0FBUyxZQUFLSixTQUFMO0FBQWQsU0FDR08sU0FESCxPQUNlRyxPQURmLENBUkYsRUFXRTtBQUNFLFFBQUEsU0FBUyxZQUFLVixTQUFMLHNCQURYO0FBRUUsUUFBQSxJQUFJLEVBQUMsUUFGUDtBQUdFLFFBQUEsT0FBTyxFQUFFLEtBQUtFLFdBSGhCO0FBSUUsUUFBQSxLQUFLLEVBQUVHLE1BQU0sQ0FBQ0g7QUFKaEIsUUFYRixDQURGLEVBbUJFO0FBQUssUUFBQSxTQUFTLFlBQUtGLFNBQUw7QUFBZCxTQUNFO0FBQU8sUUFBQSxTQUFTLFlBQUtBLFNBQUwsV0FBaEI7QUFBd0MsUUFBQSxXQUFXLEVBQUMsR0FBcEQ7QUFBd0QsUUFBQSxJQUFJLEVBQUM7QUFBN0QsU0FDRTtBQUFPLFFBQUEsU0FBUyxZQUFLQSxTQUFMO0FBQWhCLFNBQ0NpQixVQURELENBREYsQ0FERixDQW5CRixDQURGO0FBNEJEOzs7RUFsSHNDYSxnQjs7O2lDQUFwQmhDLFcsZUFDQTtBQUNqQk8sRUFBQUEsTUFBTSxFQUFFMEIsc0JBQVVDLE1BREQ7QUFFakI3QyxFQUFBQSxLQUFLLEVBQUU0QyxzQkFBVUMsTUFGQTtBQUdqQmpDLEVBQUFBLFlBQVksRUFBRWdDLHNCQUFVQyxNQUhQO0FBSWpCL0IsRUFBQUEsYUFBYSxFQUFFOEIsc0JBQVVFO0FBSlIsQztpQ0FEQW5DLFcsa0JBUUc7QUFDcEJGLEVBQUFBLFFBRG9CLHNCQUNULENBQ1Y7QUFGbUIsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmNvbnN0IFJPVyA9IDQ7XG5jb25zdCBDT0wgPSAzO1xuXG5mdW5jdGlvbiBnb1llYXIoZGlyZWN0aW9uKSB7XG4gIGNvbnN0IG5leHQgPSB0aGlzLnN0YXRlLnZhbHVlLmNsb25lKCk7XG4gIG5leHQuYWRkKGRpcmVjdGlvbiwgJ3llYXJzJyk7XG4gIHRoaXMuc2V0U3RhdGUoe1xuICAgIHZhbHVlOiBuZXh0LFxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2hvb3NlRGVjYWRlKHllYXIsIGV2ZW50KSB7XG4gIGNvbnN0IG5leHQgPSB0aGlzLnN0YXRlLnZhbHVlLmNsb25lKCk7XG4gIG5leHQueWVhcih5ZWFyKTtcbiAgbmV4dC5tb250aCh0aGlzLnN0YXRlLnZhbHVlLm1vbnRoKCkpO1xuICB0aGlzLnByb3BzLm9uU2VsZWN0KG5leHQpO1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZWNhZGVQYW5lbCBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgbG9jYWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIHZhbHVlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGRlZmF1bHRWYWx1ZTogUHJvcFR5cGVzLm9iamVjdCxcbiAgICByb290UHJlZml4Q2xzOiBQcm9wVHlwZXMuc3RyaW5nLFxuICB9O1xuXG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgb25TZWxlY3QoKSB7XG4gICAgfSxcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWU6IHByb3BzLnZhbHVlIHx8IHByb3BzLmRlZmF1bHRWYWx1ZSxcbiAgICB9O1xuXG4gICAgLy8gYmluZCBtZXRob2RzXG4gICAgdGhpcy5wcmVmaXhDbHMgPSBgJHtwcm9wcy5yb290UHJlZml4Q2xzfS1kZWNhZGUtcGFuZWxgO1xuICAgIHRoaXMubmV4dENlbnR1cnkgPSBnb1llYXIuYmluZCh0aGlzLCAxMDApO1xuICAgIHRoaXMucHJldmlvdXNDZW50dXJ5ID0gZ29ZZWFyLmJpbmQodGhpcywgLTEwMCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnN0YXRlLnZhbHVlO1xuICAgIGNvbnN0IGxvY2FsZSA9IHRoaXMucHJvcHMubG9jYWxlO1xuICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gdmFsdWUueWVhcigpO1xuICAgIGNvbnN0IHN0YXJ0WWVhciA9IHBhcnNlSW50KGN1cnJlbnRZZWFyIC8gMTAwLCAxMCkgKiAxMDA7XG4gICAgY29uc3QgcHJlWWVhciA9IHN0YXJ0WWVhciAtIDEwO1xuICAgIGNvbnN0IGVuZFllYXIgPSBzdGFydFllYXIgKyA5OTtcbiAgICBjb25zdCBkZWNhZGVzID0gW107XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBjb25zdCBwcmVmaXhDbHMgPSB0aGlzLnByZWZpeENscztcblxuICAgIGZvciAobGV0IHJvd0luZGV4ID0gMDsgcm93SW5kZXggPCBST1c7IHJvd0luZGV4KyspIHtcbiAgICAgIGRlY2FkZXNbcm93SW5kZXhdID0gW107XG4gICAgICBmb3IgKGxldCBjb2xJbmRleCA9IDA7IGNvbEluZGV4IDwgQ09MOyBjb2xJbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGVjYWRlID0gcHJlWWVhciArIGluZGV4ICogMTA7XG4gICAgICAgIGNvbnN0IGVuZERlY2FkZSA9IHByZVllYXIgKyBpbmRleCAqIDEwICsgOTtcbiAgICAgICAgZGVjYWRlc1tyb3dJbmRleF1bY29sSW5kZXhdID0ge1xuICAgICAgICAgIHN0YXJ0RGVjYWRlLFxuICAgICAgICAgIGVuZERlY2FkZSxcbiAgICAgICAgfTtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkZWNhZGVzRWxzID0gZGVjYWRlcy5tYXAoKHJvdywgZGVjYWRlSW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHRkcyA9IHJvdy5tYXAoZGVjYWRlRGF0YSA9PiB7XG4gICAgICAgIGNvbnN0IGRTdGFydERlY2FkZSA9IGRlY2FkZURhdGEuc3RhcnREZWNhZGU7XG4gICAgICAgIGNvbnN0IGRFbmREZWNhZGUgPSBkZWNhZGVEYXRhLmVuZERlY2FkZTtcbiAgICAgICAgY29uc3QgaXNMYXN0ID0gZFN0YXJ0RGVjYWRlIDwgc3RhcnRZZWFyO1xuICAgICAgICBjb25zdCBpc05leHQgPSBkRW5kRGVjYWRlID4gZW5kWWVhcjtcbiAgICAgICAgY29uc3QgY2xhc3NOYW1lTWFwID0ge1xuICAgICAgICAgIFtgJHtwcmVmaXhDbHN9LWNlbGxgXTogMSxcbiAgICAgICAgICBbYCR7cHJlZml4Q2xzfS1zZWxlY3RlZC1jZWxsYF06IGRTdGFydERlY2FkZSA8PSBjdXJyZW50WWVhciAmJiBjdXJyZW50WWVhciA8PSBkRW5kRGVjYWRlLFxuICAgICAgICAgIFtgJHtwcmVmaXhDbHN9LWxhc3QtY2VudHVyeS1jZWxsYF06IGlzTGFzdCxcbiAgICAgICAgICBbYCR7cHJlZml4Q2xzfS1uZXh0LWNlbnR1cnktY2VsbGBdOiBpc05leHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgJHtkU3RhcnREZWNhZGV9LSR7ZEVuZERlY2FkZX1gO1xuICAgICAgICBsZXQgY2xpY2tIYW5kbGVyO1xuICAgICAgICBpZiAoaXNMYXN0KSB7XG4gICAgICAgICAgY2xpY2tIYW5kbGVyID0gdGhpcy5wcmV2aW91c0NlbnR1cnk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNOZXh0KSB7XG4gICAgICAgICAgY2xpY2tIYW5kbGVyID0gdGhpcy5uZXh0Q2VudHVyeTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGlja0hhbmRsZXIgPSBjaG9vc2VEZWNhZGUuYmluZCh0aGlzLCBkU3RhcnREZWNhZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoPHRkXG4gICAgICAgICAga2V5PXtkU3RhcnREZWNhZGV9XG4gICAgICAgICAgb25DbGljaz17Y2xpY2tIYW5kbGVyfVxuICAgICAgICAgIHJvbGU9XCJncmlkY2VsbFwiXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc25hbWVzKGNsYXNzTmFtZU1hcCl9XG4gICAgICAgID5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWRlY2FkZWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2NvbnRlbnR9XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L3RkPik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAoPHRyIGtleT17ZGVjYWRlSW5kZXh9IHJvbGU9XCJyb3dcIj57dGRzfTwvdHI+KTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcmVmaXhDbHN9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1oZWFkZXJgfT5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXByZXYtY2VudHVyeS1idG5gfVxuICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLnByZXZpb3VzQ2VudHVyeX1cbiAgICAgICAgICAgIHRpdGxlPXtsb2NhbGUucHJldmlvdXNDZW50dXJ5fVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1jZW50dXJ5YH0+XG4gICAgICAgICAgICB7c3RhcnRZZWFyfS17ZW5kWWVhcn1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8YVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LW5leHQtY2VudHVyeS1idG5gfVxuICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm5leHRDZW50dXJ5fVxuICAgICAgICAgICAgdGl0bGU9e2xvY2FsZS5uZXh0Q2VudHVyeX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tYm9keWB9PlxuICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tdGFibGVgfSBjZWxsU3BhY2luZz1cIjBcIiByb2xlPVwiZ3JpZFwiPlxuICAgICAgICAgICAgPHRib2R5IGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS10Ym9keWB9PlxuICAgICAgICAgICAge2RlY2FkZXNFbHN9XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+KTtcbiAgfVxufVxuIl19