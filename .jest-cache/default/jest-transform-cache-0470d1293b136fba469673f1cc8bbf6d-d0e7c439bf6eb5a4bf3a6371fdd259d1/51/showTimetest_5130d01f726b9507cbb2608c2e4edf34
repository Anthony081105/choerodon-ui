2822b55f7962e35c29c59fd0118a73b9
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _react = _interopRequireDefault(require("react"));

var _enzyme = require("enzyme");

var _ = _interopRequireDefault(require(".."));

var RangePicker = _["default"].RangePicker;
describe('DatePicker with showTime', function () {
  it('should trigger onChange when select value', function () {
    var onChangeFn = jest.fn();
    var onOpenChangeFn = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      showTime: true,
      open: true,
      onChange: onChangeFn,
      onOpenChange: onOpenChangeFn
    }));
    var calendarWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    calendarWrapper.find('.c7n-calendar-date').at(0).simulate('click');
    expect(onChangeFn).toHaveBeenCalled();
    expect(onOpenChangeFn).not.toHaveBeenCalled();
  });
  it('should trigger onOk when press ok button', function () {
    var onOkFn = jest.fn();
    var onOpenChangeFn = jest.fn();
    var onChangeFn = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      showTime: true,
      open: true,
      onChange: onChangeFn,
      onOk: onOkFn,
      onOpenChange: onOpenChangeFn
    }));
    var calendarWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    calendarWrapper.find('.c7n-calendar-ok-btn').simulate('click');
    expect(onOkFn).toHaveBeenCalled();
    expect(onOpenChangeFn).toHaveBeenCalledWith(false);
    expect(onChangeFn).not.toHaveBeenCalled();
  });
  it('should trigger onChange when click Now link', function () {
    var onOpenChangeFn = jest.fn();
    var onChangeFn = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      showTime: true,
      open: true,
      onChange: onChangeFn,
      onOpenChange: onOpenChangeFn
    }));
    var calendarWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    calendarWrapper.find('.c7n-calendar-today-btn').simulate('click');
    expect(onOpenChangeFn).toHaveBeenCalledWith(false);
    expect(onChangeFn).toHaveBeenCalled();
  });
  it('should have correct className when use12Hours is true', function () {
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(_["default"], {
      showTime: {
        use12Hours: true
      },
      open: true
    }));
    var calendarWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    expect(calendarWrapper.find('.c7n-calendar-time-picker-column-4').length).toBe(0);
    calendarWrapper.find('.c7n-calendar-time-picker-btn').at(0).simulate('click');
    expect(calendarWrapper.find('.c7n-calendar-time-picker-column-4').hostNodes().length).toBe(1);
  });
});
describe('RangePicker with showTime', function () {
  it('should trigger onChange when select value', function () {
    var onChangeFn = jest.fn();
    var onOpenChangeFn = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(RangePicker, {
      showTime: true,
      open: true,
      onChange: onChangeFn,
      onOpenChange: onOpenChangeFn
    }));
    var calendarWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    expect(calendarWrapper.find('.c7n-calendar-time-picker-btn').hasClass('c7n-calendar-time-picker-btn-disabled')).toBe(true);
    expect(calendarWrapper.find('.c7n-calendar-ok-btn').hasClass('c7n-calendar-ok-btn-disabled')).toBe(true);
    calendarWrapper.find('.c7n-calendar-date').at(10).simulate('click');
    calendarWrapper.find('.c7n-calendar-date').at(11).simulate('click');
    expect(calendarWrapper.find('.c7n-calendar-time-picker-btn').hasClass('c7n-calendar-time-picker-btn-disabled')).toBe(false);
    expect(calendarWrapper.find('.c7n-calendar-ok-btn').hasClass('c7n-calendar-ok-btn-disabled')).toBe(false);
    expect(onChangeFn).toHaveBeenCalled();
    expect(onOpenChangeFn).not.toHaveBeenCalled();
  });
  it('hould trigger onOk when press ok button', function () {
    var onOkFn = jest.fn();
    var onChangeFn = jest.fn();
    var onOpenChangeFn = jest.fn();
    var wrapper = (0, _enzyme.mount)(_react["default"].createElement(RangePicker, {
      showTime: true,
      open: true,
      onOk: onOkFn,
      onChange: onChangeFn,
      onOpenChange: onOpenChangeFn
    }));
    var calendarWrapper = (0, _enzyme.mount)(wrapper.find('Trigger').instance().getComponent());
    calendarWrapper.find('.c7n-calendar-date').at(10).simulate('click');
    calendarWrapper.find('.c7n-calendar-date').at(11).simulate('click');
    onChangeFn.mockClear();
    calendarWrapper.find('.c7n-calendar-ok-btn').simulate('click');
    expect(onOkFn).toHaveBeenCalled();
    expect(onOpenChangeFn).toHaveBeenCalledWith(false);
    expect(onChangeFn).not.toHaveBeenCalled();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNob3dUaW1lLnRlc3QuanMiXSwibmFtZXMiOlsiUmFuZ2VQaWNrZXIiLCJEYXRlUGlja2VyIiwiZGVzY3JpYmUiLCJpdCIsIm9uQ2hhbmdlRm4iLCJqZXN0IiwiZm4iLCJvbk9wZW5DaGFuZ2VGbiIsIndyYXBwZXIiLCJjYWxlbmRhcldyYXBwZXIiLCJmaW5kIiwiaW5zdGFuY2UiLCJnZXRDb21wb25lbnQiLCJhdCIsInNpbXVsYXRlIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZCIsIm5vdCIsIm9uT2tGbiIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwidXNlMTJIb3VycyIsImxlbmd0aCIsInRvQmUiLCJob3N0Tm9kZXMiLCJoYXNDbGFzcyIsIm1vY2tDbGVhciJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOztBQUNBOztJQUVRQSxXLEdBQWdCQyxZLENBQWhCRCxXO0FBRVJFLFFBQVEsQ0FBQywwQkFBRCxFQUE2QixZQUFNO0FBQ3pDQyxFQUFBQSxFQUFFLENBQUMsMkNBQUQsRUFBOEMsWUFBTTtBQUNwRCxRQUFNQyxVQUFVLEdBQUdDLElBQUksQ0FBQ0MsRUFBTCxFQUFuQjtBQUNBLFFBQU1DLGNBQWMsR0FBR0YsSUFBSSxDQUFDQyxFQUFMLEVBQXZCO0FBQ0EsUUFBTUUsT0FBTyxHQUFHLG1CQUNkLGdDQUFDLFlBQUQ7QUFBWSxNQUFBLFFBQVEsTUFBcEI7QUFBcUIsTUFBQSxJQUFJLE1BQXpCO0FBQTBCLE1BQUEsUUFBUSxFQUFFSixVQUFwQztBQUFnRCxNQUFBLFlBQVksRUFBRUc7QUFBOUQsTUFEYyxDQUFoQjtBQUlBLFFBQU1FLGVBQWUsR0FBRyxtQkFDdEJELE9BQU8sQ0FDSkUsSUFESCxDQUNRLFNBRFIsRUFFR0MsUUFGSCxHQUdHQyxZQUhILEVBRHNCLENBQXhCO0FBTUFILElBQUFBLGVBQWUsQ0FDWkMsSUFESCxDQUNRLG9CQURSLEVBRUdHLEVBRkgsQ0FFTSxDQUZOLEVBR0dDLFFBSEgsQ0FHWSxPQUhaO0FBSUFDLElBQUFBLE1B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QUhILENBR1ksT0FIWjtBQUlBVixJQUFBQSxVQUFVLENBQUNxQixTQUFYO0FBQ0FoQixJQUFBQSxlQUFlLENBQUNDLElBQWhCLENBQXFCLHNCQUFyQixFQUE2Q0ksUUFBN0MsQ0FBc0QsT0FBdEQ7QUFDQUMsSUFBQUEsTUFBTSxDQUFDRyxNQUFELENBQU4sQ0FBZUYsZ0JBQWY7QUFDQUQsSUFBQUEsTUFBTSxDQUFDUixjQUFELENBQU4sQ0FBdUJZLG9CQUF2QixDQUE0QyxLQUE1QztBQUNBSixJQUFBQSxNQUFNLENBQUNYLFVBQUQsQ0FBTixDQUFtQmEsR0FBbkIsQ0FBdUJELGdCQUF2QjtBQUNELEdBakNDLENBQUY7QUFrQ0QsQ0E1RU8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtb3VudCB9IGZyb20gJ2VuenltZSc7XG5pbXBvcnQgRGF0ZVBpY2tlciBmcm9tICcuLic7XG5cbmNvbnN0IHsgUmFuZ2VQaWNrZXIgfSA9IERhdGVQaWNrZXI7XG5cbmRlc2NyaWJlKCdEYXRlUGlja2VyIHdpdGggc2hvd1RpbWUnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgdHJpZ2dlciBvbkNoYW5nZSB3aGVuIHNlbGVjdCB2YWx1ZScsICgpID0+IHtcbiAgICBjb25zdCBvbkNoYW5nZUZuID0gamVzdC5mbigpO1xuICAgIGNvbnN0IG9uT3BlbkNoYW5nZUZuID0gamVzdC5mbigpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxEYXRlUGlja2VyIHNob3dUaW1lIG9wZW4gb25DaGFuZ2U9e29uQ2hhbmdlRm59IG9uT3BlbkNoYW5nZT17b25PcGVuQ2hhbmdlRm59IC8+LFxuICAgICk7XG5cbiAgICBjb25zdCBjYWxlbmRhcldyYXBwZXIgPSBtb3VudChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAuaW5zdGFuY2UoKVxuICAgICAgICAuZ2V0Q29tcG9uZW50KCksXG4gICAgKTtcbiAgICBjYWxlbmRhcldyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLWNhbGVuZGFyLWRhdGUnKVxuICAgICAgLmF0KDApXG4gICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgZXhwZWN0KG9uQ2hhbmdlRm4pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBleHBlY3Qob25PcGVuQ2hhbmdlRm4pLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgdHJpZ2dlciBvbk9rIHdoZW4gcHJlc3Mgb2sgYnV0dG9uJywgKCkgPT4ge1xuICAgIGNvbnN0IG9uT2tGbiA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBvbk9wZW5DaGFuZ2VGbiA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBvbkNoYW5nZUZuID0gamVzdC5mbigpO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFxuICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgc2hvd1RpbWVcbiAgICAgICAgb3BlblxuICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2VGbn1cbiAgICAgICAgb25Paz17b25Pa0ZufVxuICAgICAgICBvbk9wZW5DaGFuZ2U9e29uT3BlbkNoYW5nZUZufVxuICAgICAgLz4sXG4gICAgKTtcblxuICAgIGNvbnN0IGNhbGVuZGFyV3JhcHBlciA9IG1vdW50KFxuICAgICAgd3JhcHBlclxuICAgICAgICAuZmluZCgnVHJpZ2dlcicpXG4gICAgICAgIC5pbnN0YW5jZSgpXG4gICAgICAgIC5nZXRDb21wb25lbnQoKSxcbiAgICApO1xuICAgIGNhbGVuZGFyV3JhcHBlci5maW5kKCcuYzduLWNhbGVuZGFyLW9rLWJ0bicpLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGV4cGVjdChvbk9rRm4pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBleHBlY3Qob25PcGVuQ2hhbmdlRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGZhbHNlKTtcbiAgICBleHBlY3Qob25DaGFuZ2VGbikubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB0cmlnZ2VyIG9uQ2hhbmdlIHdoZW4gY2xpY2sgTm93IGxpbmsnLCAoKSA9PiB7XG4gICAgY29uc3Qgb25PcGVuQ2hhbmdlRm4gPSBqZXN0LmZuKCk7XG4gICAgY29uc3Qgb25DaGFuZ2VGbiA9IGplc3QuZm4oKTtcblxuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxEYXRlUGlja2VyIHNob3dUaW1lIG9wZW4gb25DaGFuZ2U9e29uQ2hhbmdlRm59IG9uT3BlbkNoYW5nZT17b25PcGVuQ2hhbmdlRm59IC8+LFxuICAgICk7XG5cbiAgICBjb25zdCBjYWxlbmRhcldyYXBwZXIgPSBtb3VudChcbiAgICAgIHdyYXBwZXJcbiAgICAgICAgLmZpbmQoJ1RyaWdnZXInKVxuICAgICAgICAuaW5zdGFuY2UoKVxuICAgICAgICAuZ2V0Q29tcG9uZW50KCksXG4gICAgKTtcbiAgICBjYWxlbmRhcldyYXBwZXIuZmluZCgnLmM3bi1jYWxlbmRhci10b2RheS1idG4nKS5zaW11bGF0ZSgnY2xpY2snKTtcbiAgICBleHBlY3Qob25PcGVuQ2hhbmdlRm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGZhbHNlKTtcbiAgICBleHBlY3Qob25DaGFuZ2VGbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGhhdmUgY29ycmVjdCBjbGFzc05hbWUgd2hlbiB1c2UxMkhvdXJzIGlzIHRydWUnLCAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KDxEYXRlUGlja2VyIHNob3dUaW1lPXt7IHVzZTEySG91cnM6IHRydWUgfX0gb3BlbiAvPik7XG4gICAgY29uc3QgY2FsZW5kYXJXcmFwcGVyID0gbW91bnQoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCdUcmlnZ2VyJylcbiAgICAgICAgLmluc3RhbmNlKClcbiAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICk7XG4gICAgZXhwZWN0KGNhbGVuZGFyV3JhcHBlci5maW5kKCcuYzduLWNhbGVuZGFyLXRpbWUtcGlja2VyLWNvbHVtbi00JykubGVuZ3RoKS50b0JlKDApO1xuICAgIGNhbGVuZGFyV3JhcHBlclxuICAgICAgLmZpbmQoJy5jN24tY2FsZW5kYXItdGltZS1waWNrZXItYnRuJylcbiAgICAgIC5hdCgwKVxuICAgICAgLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGV4cGVjdChjYWxlbmRhcldyYXBwZXIuZmluZCgnLmM3bi1jYWxlbmRhci10aW1lLXBpY2tlci1jb2x1bW4tNCcpLmhvc3ROb2RlcygpLmxlbmd0aCkudG9CZSgxKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1JhbmdlUGlja2VyIHdpdGggc2hvd1RpbWUnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgdHJpZ2dlciBvbkNoYW5nZSB3aGVuIHNlbGVjdCB2YWx1ZScsICgpID0+IHtcbiAgICBjb25zdCBvbkNoYW5nZUZuID0gamVzdC5mbigpO1xuICAgIGNvbnN0IG9uT3BlbkNoYW5nZUZuID0gamVzdC5mbigpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxSYW5nZVBpY2tlciBzaG93VGltZSBvcGVuIG9uQ2hhbmdlPXtvbkNoYW5nZUZufSBvbk9wZW5DaGFuZ2U9e29uT3BlbkNoYW5nZUZufSAvPixcbiAgICApO1xuXG4gICAgY29uc3QgY2FsZW5kYXJXcmFwcGVyID0gbW91bnQoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCdUcmlnZ2VyJylcbiAgICAgICAgLmluc3RhbmNlKClcbiAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICk7XG4gICAgZXhwZWN0KFxuICAgICAgY2FsZW5kYXJXcmFwcGVyXG4gICAgICAgIC5maW5kKCcuYzduLWNhbGVuZGFyLXRpbWUtcGlja2VyLWJ0bicpXG4gICAgICAgIC5oYXNDbGFzcygnYzduLWNhbGVuZGFyLXRpbWUtcGlja2VyLWJ0bi1kaXNhYmxlZCcpLFxuICAgICkudG9CZSh0cnVlKTtcbiAgICBleHBlY3QoXG4gICAgICBjYWxlbmRhcldyYXBwZXIuZmluZCgnLmM3bi1jYWxlbmRhci1vay1idG4nKS5oYXNDbGFzcygnYzduLWNhbGVuZGFyLW9rLWJ0bi1kaXNhYmxlZCcpLFxuICAgICkudG9CZSh0cnVlKTtcbiAgICBjYWxlbmRhcldyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLWNhbGVuZGFyLWRhdGUnKVxuICAgICAgLmF0KDEwKVxuICAgICAgLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIGNhbGVuZGFyV3JhcHBlclxuICAgICAgLmZpbmQoJy5jN24tY2FsZW5kYXItZGF0ZScpXG4gICAgICAuYXQoMTEpXG4gICAgICAuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgZXhwZWN0KFxuICAgICAgY2FsZW5kYXJXcmFwcGVyXG4gICAgICAgIC5maW5kKCcuYzduLWNhbGVuZGFyLXRpbWUtcGlja2VyLWJ0bicpXG4gICAgICAgIC5oYXNDbGFzcygnYzduLWNhbGVuZGFyLXRpbWUtcGlja2VyLWJ0bi1kaXNhYmxlZCcpLFxuICAgICkudG9CZShmYWxzZSk7XG4gICAgZXhwZWN0KFxuICAgICAgY2FsZW5kYXJXcmFwcGVyLmZpbmQoJy5jN24tY2FsZW5kYXItb2stYnRuJykuaGFzQ2xhc3MoJ2M3bi1jYWxlbmRhci1vay1idG4tZGlzYWJsZWQnKSxcbiAgICApLnRvQmUoZmFsc2UpO1xuICAgIGV4cGVjdChvbkNoYW5nZUZuKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgZXhwZWN0KG9uT3BlbkNoYW5nZUZuKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcblxuICBpdCgnaG91bGQgdHJpZ2dlciBvbk9rIHdoZW4gcHJlc3Mgb2sgYnV0dG9uJywgKCkgPT4ge1xuICAgIGNvbnN0IG9uT2tGbiA9IGplc3QuZm4oKTtcbiAgICBjb25zdCBvbkNoYW5nZUZuID0gamVzdC5mbigpO1xuICAgIGNvbnN0IG9uT3BlbkNoYW5nZUZuID0gamVzdC5mbigpO1xuICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChcbiAgICAgIDxSYW5nZVBpY2tlclxuICAgICAgICBzaG93VGltZVxuICAgICAgICBvcGVuXG4gICAgICAgIG9uT2s9e29uT2tGbn1cbiAgICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlRm59XG4gICAgICAgIG9uT3BlbkNoYW5nZT17b25PcGVuQ2hhbmdlRm59XG4gICAgICAvPixcbiAgICApO1xuXG4gICAgY29uc3QgY2FsZW5kYXJXcmFwcGVyID0gbW91bnQoXG4gICAgICB3cmFwcGVyXG4gICAgICAgIC5maW5kKCdUcmlnZ2VyJylcbiAgICAgICAgLmluc3RhbmNlKClcbiAgICAgICAgLmdldENvbXBvbmVudCgpLFxuICAgICk7XG4gICAgY2FsZW5kYXJXcmFwcGVyXG4gICAgICAuZmluZCgnLmM3bi1jYWxlbmRhci1kYXRlJylcbiAgICAgIC5hdCgxMClcbiAgICAgIC5zaW11bGF0ZSgnY2xpY2snKTtcbiAgICBjYWxlbmRhcldyYXBwZXJcbiAgICAgIC5maW5kKCcuYzduLWNhbGVuZGFyLWRhdGUnKVxuICAgICAgLmF0KDExKVxuICAgICAgLnNpbXVsYXRlKCdjbGljaycpO1xuICAgIG9uQ2hhbmdlRm4ubW9ja0NsZWFyKCk7XG4gICAgY2FsZW5kYXJXcmFwcGVyLmZpbmQoJy5jN24tY2FsZW5kYXItb2stYnRuJykuc2ltdWxhdGUoJ2NsaWNrJyk7XG4gICAgZXhwZWN0KG9uT2tGbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChvbk9wZW5DaGFuZ2VGbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoZmFsc2UpO1xuICAgIGV4cGVjdChvbkNoYW5nZUZuKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcbn0pO1xuIl19