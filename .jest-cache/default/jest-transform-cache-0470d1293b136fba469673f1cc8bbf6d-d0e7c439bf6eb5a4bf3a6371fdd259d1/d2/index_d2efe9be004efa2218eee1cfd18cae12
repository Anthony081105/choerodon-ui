7dae36c1255774384db43ef255d91fde
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getConfig = getConfig;
exports.getPrefixCls = getPrefixCls;
exports.getProPrefixCls = getProPrefixCls;
exports["default"] = configure;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _mobx = require("mobx");

var _isObject = _interopRequireDefault(require("lodash/isObject"));

var _choerodonUiFont = require("choerodon-ui-font");

var _localeContext = require("../../pro/lib/locale-context");

var _FeedBack = _interopRequireDefault(require("../../pro/lib/data-set/FeedBack"));

var _ref;

var defaultRenderEmpty = function defaultRenderEmpty(componentName) {
  switch (componentName) {
    case 'Table':
      return (0, _localeContext.$l)('Table', 'empty_data');

    case 'Select':
      return (0, _localeContext.$l)('Select', 'no_matching_results');

    default:
  }
};

var defaultButtonProps = {
  color: "primary"
  /* primary */
  ,
  funcType: "flat"
  /* flat */

};

var globalConfig = _mobx.observable.map([['prefixCls', 'c7n'], ['proPrefixCls', 'c7n-pro'], ['iconfontPrefix', 'icon'], ['ripple', true], ['lookupCache', {
  maxAge: 1000 * 60 * 10,
  max: 100
}], ['lookupUrl', function (code) {
  return "/common/code/".concat(code, "/");
}], ['lookupAxiosMethod', 'post'], // [
//   'lookupBatchAxiosConfig',
//   codes => ({
//     url: '/common/batch',
//     params: codes.reduce((obj, code) => {
//       obj[code] = code;
//       return obj;
//     }, {}),
//   }),
// ],
['lovDefineUrl', function (code) {
  return "/sys/lov/lov_define?code=".concat(code);
}], ['lovQueryUrl', function (code) {
  return "/common/lov/dataset/".concat(code);
}], ['dataKey', 'rows'], ['totalKey', 'total'], ['statusKey', '__status'], ['tlsKey', '__tls'], ['status', (_ref = {}, (0, _defineProperty2["default"])(_ref, "add"
/* add */
, 'add'), (0, _defineProperty2["default"])(_ref, "update"
/* update */
, 'update'), (0, _defineProperty2["default"])(_ref, "delete"
/* delete */
, 'delete'), _ref)], ['labelLayout', "horizontal"
/* horizontal */
], ['queryBar', "normal"
/* normal */
], ['tableBorder', true], ['tableHighLightRow', true], ['tableRowHeight', 30], ['tableColumnResizable', true], ['tableButtonProps', defaultButtonProps], ['tableCommandProps', defaultButtonProps], ['modalSectionBorder', true], ['modalOkFirst', true], ['buttonColor', "default"
/* default */
], ['buttonFuncType', "raised"
/* raised */
], ['feedback', _FeedBack["default"]], ['renderEmpty', defaultRenderEmpty], ['icons', _choerodonUiFont.categories], ['formatter', {
  jsonDate: 'YYYY-MM-DD HH:mm:ss',
  date: 'YYYY-MM-DD',
  dateTime: 'YYYY-MM-DD HH:mm:ss',
  time: 'HH:mm:ss',
  year: 'YYYY',
  month: 'YYYY-MM',
  week: 'GGGG-Wo'
}]]);

function getConfig(key) {
  // FIXME: observable.map把构建map时传入的key类型和value类型分别做了union，
  // 丢失了一一对应的映射关系，导致函数调用者无法使用union后的返回值类型，因此需要指定本函数返回值为any
  return globalConfig.get(key);
}

function getPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('prefixCls'), "-").concat(suffixCls);
}

function getProPrefixCls(suffixCls, customizePrefixCls) {
  if (customizePrefixCls) {
    return customizePrefixCls;
  }

  return "".concat(getConfig('proPrefixCls'), "-").concat(suffixCls);
}

var mergeProps = ['transport', 'feedback', 'formatter'];

function configure(config) {
  (0, _mobx.runInAction)(function () {
    Object.keys(config).forEach(function (key) {
      var value = config[key];

      if (mergeProps.includes(key) && (0, _isObject["default"])(value)) {
        globalConfig.set(key, (0, _objectSpread2["default"])({}, (0, _mobx.toJS)(globalConfig.get(key)), {}, value));
      } else {
        globalConfig.set(key, config[key]);
      }
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZ3VyZS9pbmRleC5qc3giXSwibmFtZXMiOlsiZGVmYXVsdFJlbmRlckVtcHR5IiwiZGVmYXVsdEJ1dHRvblByb3BzIiwiY29sb3IiLCJmdW5jVHlwZSIsImdsb2JhbENvbmZpZyIsIm1heEFnZSIsIm1heCIsImRlZmF1bHRGZWVkYmFjayIsImNhdGVnb3JpZXMiLCJqc29uRGF0ZSIsImRhdGUiLCJkYXRlVGltZSIsInRpbWUiLCJ5ZWFyIiwibW9udGgiLCJ3ZWVrIiwiZ2V0Q29uZmlnIiwibWVyZ2VQcm9wcyIsIk9iamVjdCIsInZhbHVlIiwiY29uZmlnIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxLQUFBLEdBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQTs7QUFDQSxJQUFBLFNBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxpQkFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxnQkFBQSxHQUFBLE9BQUEsQ0FBQSxtQkFBQSxDQUFBOztBQUNBLElBQUEsY0FBQSxHQUFBLE9BQUEsQ0FBQSw4QkFBQSxDQUFBOztBQUNBLElBQUEsU0FBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLGlDQUFBLENBQUEsQ0FBQTs7OztBQUNBLElBQU1BLGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBcUIsQ0FBQSxhQUFBLEVBQW1CO0FBQzFDLFVBQUEsYUFBQTtBQUNJLFNBQUEsT0FBQTtBQUNJLGFBQU8sQ0FBQSxHQUFBLGNBQUEsQ0FBQSxFQUFBLEVBQUEsT0FBQSxFQUFQLFlBQU8sQ0FBUDs7QUFDSixTQUFBLFFBQUE7QUFDSSxhQUFPLENBQUEsR0FBQSxjQUFBLENBQUEsRUFBQSxFQUFBLFFBQUEsRUFBUCxxQkFBTyxDQUFQOztBQUNKO0FBTEo7QUFESixDQUFBOztBQVNBLElBQU1DLGtCQUFrQixHQUFHO0FBQUVDLEVBQUFBLEtBQUssRUFBRTtBQUFVO0FBQW5CO0FBQWtDQyxFQUFBQSxRQUFRLEVBQUU7QUFBTzs7QUFBbkQsQ0FBM0I7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QSxHQUFBQSxLQUE0QixDQUFBLEdBQUEsU0FBQSxDQUFBLFNBQUEsQ0FBQSxFQUFoQyxLQUFnQyxDQUFoQyxFQUFpRDtBQUM3Q2IsUUFBQUEsWUFBWSxDQUFaQSxHQUFBQSxDQUFBQSxHQUFBQSxFQUFBQSxDQUFBQSxHQUFBQSxjQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxFQUFBQSxFQUFBQSxFQUNPLENBQUEsR0FBQSxLQUFBLENBQUEsSUFBQSxFQUFLQSxZQUFZLENBQVpBLEdBQUFBLENBRFpBLEdBQ1lBLENBQUwsQ0FEUEEsRUFBQUEsRUFBQUEsRUFBQUEsS0FBQUEsQ0FBQUE7QUFESixPQUFBLE1BTUs7QUFDREEsUUFBQUEsWUFBWSxDQUFaQSxHQUFBQSxDQUFBQSxHQUFBQSxFQUFzQmdCLE1BQU0sQ0FBNUJoQixHQUE0QixDQUE1QkE7QUFDSDtBQVZMYyxLQUFBQTtBQURKLEdBQUE7QUFjSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9ic2VydmFibGUsIHJ1bkluQWN0aW9uLCB0b0pTIH0gZnJvbSAnbW9ieCc7XG5pbXBvcnQgaXNPYmplY3QgZnJvbSAnbG9kYXNoL2lzT2JqZWN0JztcbmltcG9ydCB7IGNhdGVnb3JpZXMgfSBmcm9tICdjaG9lcm9kb24tdWktZm9udCc7XG5pbXBvcnQgeyAkbCB9IGZyb20gJy4uLy4uL3Byby9saWIvbG9jYWxlLWNvbnRleHQnO1xuaW1wb3J0IGRlZmF1bHRGZWVkYmFjayBmcm9tICcuLi8uLi9wcm8vbGliL2RhdGEtc2V0L0ZlZWRCYWNrJztcbmNvbnN0IGRlZmF1bHRSZW5kZXJFbXB0eSA9IChjb21wb25lbnROYW1lKSA9PiB7XG4gICAgc3dpdGNoIChjb21wb25lbnROYW1lKSB7XG4gICAgICAgIGNhc2UgJ1RhYmxlJzpcbiAgICAgICAgICAgIHJldHVybiAkbCgnVGFibGUnLCAnZW1wdHlfZGF0YScpO1xuICAgICAgICBjYXNlICdTZWxlY3QnOlxuICAgICAgICAgICAgcmV0dXJuICRsKCdTZWxlY3QnLCAnbm9fbWF0Y2hpbmdfcmVzdWx0cycpO1xuICAgICAgICBkZWZhdWx0OlxuICAgIH1cbn07XG5jb25zdCBkZWZhdWx0QnV0dG9uUHJvcHMgPSB7IGNvbG9yOiBcInByaW1hcnlcIiAvKiBwcmltYXJ5ICovLCBmdW5jVHlwZTogXCJmbGF0XCIgLyogZmxhdCAqLyB9O1xuY29uc3QgZ2xvYmFsQ29uZmlnID0gb2JzZXJ2YWJsZS5tYXAoW1xuICAgIFsncHJlZml4Q2xzJywgJ2M3biddLFxuICAgIFsncHJvUHJlZml4Q2xzJywgJ2M3bi1wcm8nXSxcbiAgICBbJ2ljb25mb250UHJlZml4JywgJ2ljb24nXSxcbiAgICBbJ3JpcHBsZScsIHRydWVdLFxuICAgIFsnbG9va3VwQ2FjaGUnLCB7IG1heEFnZTogMTAwMCAqIDYwICogMTAsIG1heDogMTAwIH1dLFxuICAgIFsnbG9va3VwVXJsJywgY29kZSA9PiBgL2NvbW1vbi9jb2RlLyR7Y29kZX0vYF0sXG4gICAgWydsb29rdXBBeGlvc01ldGhvZCcsICdwb3N0J10sXG4gICAgLy8gW1xuICAgIC8vICAgJ2xvb2t1cEJhdGNoQXhpb3NDb25maWcnLFxuICAgIC8vICAgY29kZXMgPT4gKHtcbiAgICAvLyAgICAgdXJsOiAnL2NvbW1vbi9iYXRjaCcsXG4gICAgLy8gICAgIHBhcmFtczogY29kZXMucmVkdWNlKChvYmosIGNvZGUpID0+IHtcbiAgICAvLyAgICAgICBvYmpbY29kZV0gPSBjb2RlO1xuICAgIC8vICAgICAgIHJldHVybiBvYmo7XG4gICAgLy8gICAgIH0sIHt9KSxcbiAgICAvLyAgIH0pLFxuICAgIC8vIF0sXG4gICAgWydsb3ZEZWZpbmVVcmwnLCBjb2RlID0+IGAvc3lzL2xvdi9sb3ZfZGVmaW5lP2NvZGU9JHtjb2RlfWBdLFxuICAgIFsnbG92UXVlcnlVcmwnLCBjb2RlID0+IGAvY29tbW9uL2xvdi9kYXRhc2V0LyR7Y29kZX1gXSxcbiAgICBbJ2RhdGFLZXknLCAncm93cyddLFxuICAgIFsndG90YWxLZXknLCAndG90YWwnXSxcbiAgICBbJ3N0YXR1c0tleScsICdfX3N0YXR1cyddLFxuICAgIFsndGxzS2V5JywgJ19fdGxzJ10sXG4gICAgW1xuICAgICAgICAnc3RhdHVzJyxcbiAgICAgICAgeyBbXCJhZGRcIiAvKiBhZGQgKi9dOiAnYWRkJywgW1widXBkYXRlXCIgLyogdXBkYXRlICovXTogJ3VwZGF0ZScsIFtcImRlbGV0ZVwiIC8qIGRlbGV0ZSAqL106ICdkZWxldGUnIH0sXG4gICAgXSxcbiAgICBbJ2xhYmVsTGF5b3V0JywgXCJob3Jpem9udGFsXCIgLyogaG9yaXpvbnRhbCAqL10sXG4gICAgWydxdWVyeUJhcicsIFwibm9ybWFsXCIgLyogbm9ybWFsICovXSxcbiAgICBbJ3RhYmxlQm9yZGVyJywgdHJ1ZV0sXG4gICAgWyd0YWJsZUhpZ2hMaWdodFJvdycsIHRydWVdLFxuICAgIFsndGFibGVSb3dIZWlnaHQnLCAzMF0sXG4gICAgWyd0YWJsZUNvbHVtblJlc2l6YWJsZScsIHRydWVdLFxuICAgIFsndGFibGVCdXR0b25Qcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gICAgWyd0YWJsZUNvbW1hbmRQcm9wcycsIGRlZmF1bHRCdXR0b25Qcm9wc10sXG4gICAgWydtb2RhbFNlY3Rpb25Cb3JkZXInLCB0cnVlXSxcbiAgICBbJ21vZGFsT2tGaXJzdCcsIHRydWVdLFxuICAgIFsnYnV0dG9uQ29sb3InLCBcImRlZmF1bHRcIiAvKiBkZWZhdWx0ICovXSxcbiAgICBbJ2J1dHRvbkZ1bmNUeXBlJywgXCJyYWlzZWRcIiAvKiByYWlzZWQgKi9dLFxuICAgIFsnZmVlZGJhY2snLCBkZWZhdWx0RmVlZGJhY2tdLFxuICAgIFsncmVuZGVyRW1wdHknLCBkZWZhdWx0UmVuZGVyRW1wdHldLFxuICAgIFsnaWNvbnMnLCBjYXRlZ29yaWVzXSxcbiAgICBbXG4gICAgICAgICdmb3JtYXR0ZXInLFxuICAgICAgICB7XG4gICAgICAgICAgICBqc29uRGF0ZTogJ1lZWVktTU0tREQgSEg6bW06c3MnLFxuICAgICAgICAgICAgZGF0ZTogJ1lZWVktTU0tREQnLFxuICAgICAgICAgICAgZGF0ZVRpbWU6ICdZWVlZLU1NLUREIEhIOm1tOnNzJyxcbiAgICAgICAgICAgIHRpbWU6ICdISDptbTpzcycsXG4gICAgICAgICAgICB5ZWFyOiAnWVlZWScsXG4gICAgICAgICAgICBtb250aDogJ1lZWVktTU0nLFxuICAgICAgICAgICAgd2VlazogJ0dHR0ctV28nLFxuICAgICAgICB9LFxuICAgIF0sXG5dKTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb25maWcoa2V5KSB7XG4gICAgLy8gRklYTUU6IG9ic2VydmFibGUubWFw5oqK5p6E5bu6bWFw5pe25Lyg5YWl55qEa2V557G75Z6L5ZKMdmFsdWXnsbvlnovliIbliKvlgZrkuoZ1bmlvbu+8jFxuICAgIC8vIOS4ouWkseS6huS4gOS4gOWvueW6lOeahOaYoOWwhOWFs+ezu++8jOWvvOiHtOWHveaVsOiwg+eUqOiAheaXoOazleS9v+eUqHVuaW9u5ZCO55qE6L+U5Zue5YC857G75Z6L77yM5Zug5q2k6ZyA6KaB5oyH5a6a5pys5Ye95pWw6L+U5Zue5YC85Li6YW55XG4gICAgcmV0dXJuIGdsb2JhbENvbmZpZy5nZXQoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmVmaXhDbHMoc3VmZml4Q2xzLCBjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICBpZiAoY3VzdG9taXplUHJlZml4Q2xzKSB7XG4gICAgICAgIHJldHVybiBjdXN0b21pemVQcmVmaXhDbHM7XG4gICAgfVxuICAgIHJldHVybiBgJHtnZXRDb25maWcoJ3ByZWZpeENscycpfS0ke3N1ZmZpeENsc31gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb1ByZWZpeENscyhzdWZmaXhDbHMsIGN1c3RvbWl6ZVByZWZpeENscykge1xuICAgIGlmIChjdXN0b21pemVQcmVmaXhDbHMpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbWl6ZVByZWZpeENscztcbiAgICB9XG4gICAgcmV0dXJuIGAke2dldENvbmZpZygncHJvUHJlZml4Q2xzJyl9LSR7c3VmZml4Q2xzfWA7XG59XG5jb25zdCBtZXJnZVByb3BzID0gWyd0cmFuc3BvcnQnLCAnZmVlZGJhY2snLCAnZm9ybWF0dGVyJ107XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjb25maWd1cmUoY29uZmlnKSB7XG4gICAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgICAgICBPYmplY3Qua2V5cyhjb25maWcpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjb25maWdba2V5XTtcbiAgICAgICAgICAgIGlmIChtZXJnZVByb3BzLmluY2x1ZGVzKGtleSkgJiYgaXNPYmplY3QodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsQ29uZmlnLnNldChrZXksIHtcbiAgICAgICAgICAgICAgICAgICAgLi4udG9KUyhnbG9iYWxDb25maWcuZ2V0KGtleSkpLFxuICAgICAgICAgICAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdsb2JhbENvbmZpZy5zZXQoa2V5LCBjb25maWdba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuIl19