{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/message/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { ReactNode } from 'react';\nimport noop from 'lodash/noop';\nimport isString from 'lodash/isString';\nimport Icon from '../icon';\nimport Notification from '../rc-components/notification';\nimport { getPlacementStyle, getPlacementTransitionName } from './util';\nimport { getPrefixCls } from '../configure';\n\nlet defaultDuration = 3;\nlet defaultTop: number = 24;\nlet defaultBottom: number = 24;\nlet messageInstance: any;\nlet key = 1;\nlet customizePrefixCls;\nlet transitionName = 'move-up';\nlet defaultPlacement: Placement = 'leftBottom';\nlet getContainer: () => HTMLElement;\n\ntype NoticeType = 'info' | 'success' | 'error' | 'warning' | 'loading';\ntype Placement =\n  | 'top'\n  | 'left'\n  | 'right'\n  | 'bottom'\n  | 'topRight'\n  | 'topLeft'\n  | 'bottomRight'\n  | 'bottomLeft'\n  | 'rightTop'\n  | 'leftTop'\n  | 'rightBottom'\n  | 'leftBottom';\n\ntype ConfigContent = ReactNode;\ntype ConfigDuration = number | Placement | (() => void);\nexport type ConfigOnClose = (() => void) | Placement;\n\nfunction getCustomizePrefixCls() {\n  return getPrefixCls('message', customizePrefixCls);\n}\n\nfunction getMessageInstance(placement: Placement, callback: (i: any) => void) {\n  if (messageInstance) {\n    callback(messageInstance);\n    return;\n  }\n  Notification.newInstance(\n    {\n      prefixCls: getCustomizePrefixCls(),\n      style: getPlacementStyle(placement, defaultTop, defaultBottom),\n      transitionName: getPlacementTransitionName(placement, transitionName),\n      getContainer,\n    },\n    (instance: any) => {\n      if (messageInstance) {\n        callback(messageInstance);\n        return;\n      }\n      messageInstance = instance;\n      callback(instance);\n    },\n  );\n}\n\nfunction notice(\n  content: ReactNode,\n  duration: ConfigDuration = defaultDuration,\n  type: NoticeType,\n  onClose?: ConfigOnClose,\n  placement?: Placement,\n) {\n  const iconType = {\n    info: 'info',\n    success: 'check_circle',\n    error: 'error',\n    warning: 'warning',\n    loading: 'loading',\n  }[type];\n\n  if (isString(onClose)) {\n    placement = onClose;\n    onClose = noop;\n  }\n\n  if (typeof duration === 'function') {\n    onClose = duration;\n    duration = defaultDuration;\n  } else if (isString(duration)) {\n    placement = duration;\n  }\n\n  const target = key++;\n  const prefixCls = getCustomizePrefixCls();\n  getMessageInstance(placement || defaultPlacement, instance => {\n    instance.notice({\n      key: target,\n      duration,\n      style: {},\n      content: (\n        <div className={`${prefixCls}-custom-content ${prefixCls}-${type}`}>\n          <Icon type={iconType} />\n          <span>{content}</span>\n        </div>\n      ),\n      onClose,\n    });\n  });\n  return () => {\n    if (messageInstance) {\n      messageInstance.removeNotice(target);\n    }\n  };\n}\n\nexport interface ConfigOptions {\n  top?: number;\n  duration?: number;\n  prefixCls?: string;\n  getContainer?: () => HTMLElement;\n  transitionName?: string;\n  /**\n   * 消息距离视窗位置\n   */\n  bottom?: number;\n  placement?: Placement;\n}\n\nexport default {\n  info(\n    content: ConfigContent,\n    duration?: ConfigDuration,\n    onClose?: ConfigOnClose,\n    placement?: Placement,\n  ) {\n    return notice(content, duration, 'info', onClose, placement);\n  },\n  success(\n    content: ConfigContent,\n    duration?: ConfigDuration,\n    onClose?: ConfigOnClose,\n    placement?: Placement,\n  ) {\n    return notice(content, duration, 'success', onClose, placement);\n  },\n  error(\n    content: ConfigContent,\n    duration?: ConfigDuration,\n    onClose?: ConfigOnClose,\n    placement?: Placement,\n  ) {\n    return notice(content, duration, 'error', onClose, placement);\n  },\n  // Departed usage, please use warning()\n  warn(\n    content: ConfigContent,\n    duration?: ConfigDuration,\n    onClose?: ConfigOnClose,\n    placement?: Placement,\n  ) {\n    return notice(content, duration, 'warning', onClose, placement);\n  },\n  warning(\n    content: ConfigContent,\n    duration?: ConfigDuration,\n    onClose?: ConfigOnClose,\n    placement?: Placement,\n  ) {\n    return notice(content, duration, 'warning', onClose, placement);\n  },\n  loading(\n    content: ConfigContent,\n    duration?: ConfigDuration,\n    onClose?: ConfigOnClose,\n    placement?: Placement,\n  ) {\n    return notice(content, duration, 'loading', onClose, placement);\n  },\n  config(options: ConfigOptions) {\n    if (options.top !== undefined) {\n      defaultTop = options.top;\n      messageInstance = null; // delete messageInstance for new defaultTop\n    }\n    if (options.bottom !== undefined) {\n      defaultBottom = options.bottom;\n      messageInstance = null; // delete messageInstance for new defaultBottom\n    }\n    if (options.duration !== undefined) {\n      defaultDuration = options.duration;\n    }\n    if (options.prefixCls !== undefined) {\n      customizePrefixCls = options.prefixCls;\n    }\n    if (options.getContainer !== undefined) {\n      getContainer = options.getContainer;\n    }\n    if (options.transitionName !== undefined) {\n      transitionName = options.transitionName;\n      messageInstance = null; // delete messageInstance for new transitionName\n    }\n    if (options.placement !== undefined) {\n      defaultPlacement = options.placement;\n    }\n  },\n  destroy() {\n    if (messageInstance) {\n      messageInstance.destroy();\n      messageInstance = null;\n    }\n  },\n};\n"]}