{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/upload/Upload.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component, DragEvent } from 'react';\nimport classNames from 'classnames';\nimport uniqBy from 'lodash/uniqBy';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale-provider/default';\nimport Dragger from './Dragger';\nimport UploadList from './UploadList';\nimport { UploadChangeParam, UploadFile, UploadLocale, UploadProps, UploadState } from './interface';\nimport { fileToObject, genPercentAdd, getFileItem, removeFileItem, T } from './utils';\nimport RcUpload from '../rc-components/upload';\nimport { getPrefixCls } from '../configure';\n\nexport { UploadProps };\n\nexport default class Upload extends Component<UploadProps, UploadState> {\n  static displayName = 'Upload';\n\n  static Dragger: typeof Dragger;\n\n  static defaultProps = {\n    type: 'select',\n    multiple: false,\n    action: '',\n    data: {},\n    accept: '',\n    beforeUpload: T,\n    showUploadList: true,\n    listType: 'text', // or pictrue\n    className: '',\n    disabled: false,\n    supportServerRender: true,\n  };\n\n  recentUploadStatus: boolean | PromiseLike<any>;\n\n  progressTimer: any;\n\n  private upload: any;\n\n  constructor(props: UploadProps) {\n    super(props);\n\n    this.state = {\n      fileList: props.fileList || props.defaultFileList || [],\n      dragState: 'drop',\n    };\n  }\n\n  componentWillUnmount() {\n    this.clearProgressTimer();\n  }\n\n  onStart = (file: UploadFile) => {\n    const { fileList } = this.state;\n    const nextFileList = [...fileList];\n    const targetItem = fileToObject(file);\n    targetItem.status = 'uploading';\n    nextFileList.push(targetItem);\n    this.onChange({\n      file: targetItem,\n      fileList: nextFileList,\n    });\n    // fix ie progress\n    if (!(window as any).FormData) {\n      this.autoUpdateProgress(0, targetItem);\n    }\n    const { onStart } = this.props;\n    if (onStart) {\n      onStart(file);\n    }\n  };\n\n  autoUpdateProgress(_: any, file: UploadFile) {\n    const getPercent = genPercentAdd();\n    let curPercent = 0;\n    this.clearProgressTimer();\n    this.progressTimer = setInterval(() => {\n      curPercent = getPercent(curPercent);\n      this.onProgress(\n        {\n          percent: curPercent,\n        },\n        file,\n      );\n    }, 200);\n  }\n\n  onSuccess = (response: any, file: UploadFile) => {\n    this.clearProgressTimer();\n    try {\n      if (typeof response === 'string') {\n        response = JSON.parse(response);\n      }\n    } catch (e) {\n      /* do nothing */\n    }\n    const { fileList } = this.state;\n    const targetItem = getFileItem(file, fileList);\n    // removed\n    if (targetItem) {\n      targetItem.status = 'done';\n      targetItem.response = response;\n      this.onChange({\n        file: { ...targetItem },\n        fileList,\n      });\n    }\n    const { onSuccess } = this.props;\n    if (onSuccess) {\n      onSuccess(response, file);\n    }\n  };\n\n  onProgress = (e: { percent: number }, file: UploadFile) => {\n    const { fileList } = this.state;\n    const targetItem = getFileItem(file, fileList);\n    // removed\n    if (targetItem) {\n      targetItem.percent = e.percent;\n      this.onChange({\n        event: e,\n        file: { ...targetItem },\n        fileList,\n      });\n    }\n    const { onProgress } = this.props;\n    if (onProgress) {\n      onProgress(e, file);\n    }\n  };\n\n  onError = (error: Error, response: any, file: UploadFile) => {\n    this.clearProgressTimer();\n    const { fileList } = this.state;\n    const targetItem = getFileItem(file, fileList);\n    // removed\n    if (!targetItem) {\n      return;\n    }\n    targetItem.error = error;\n    targetItem.response = response;\n    targetItem.status = 'error';\n    this.onChange({\n      file: { ...targetItem },\n      fileList,\n    });\n    const { onError } = this.props;\n    if (onError) {\n      onError(error, response, file);\n    }\n  };\n\n  handleRemove(file: UploadFile) {\n    const { onRemove } = this.props;\n\n    Promise.resolve(typeof onRemove === 'function' ? onRemove(file) : onRemove).then(ret => {\n      // Prevent removing file\n      if (ret === false) {\n        return;\n      }\n      const { fileList } = this.state;\n      const removedFileList = removeFileItem(file, fileList);\n      if (removedFileList) {\n        this.onChange({\n          file,\n          fileList: removedFileList,\n        });\n      }\n    });\n  }\n\n  handleManualRemove = (file: UploadFile) => {\n    this.upload.abort(file);\n    file.status = 'removed'; // eslint-disable-line\n    this.handleRemove(file);\n  };\n\n  onChange = (info: UploadChangeParam) => {\n    if (!('fileList' in this.props)) {\n      this.setState({ fileList: info.fileList });\n    }\n\n    const { onChange } = this.props;\n    if (onChange) {\n      onChange(info);\n    }\n  };\n\n  componentWillReceiveProps(nextProps: UploadProps) {\n    if ('fileList' in nextProps) {\n      this.setState({\n        fileList: nextProps.fileList || [],\n      });\n    }\n  }\n\n  onFileDrop = (e: DragEvent<HTMLDivElement>) => {\n    this.setState({\n      dragState: e.type,\n    });\n  };\n\n  beforeUpload = (file: UploadFile, uploadFiles: UploadFile[]) => {\n    const { beforeUpload } = this.props;\n    if (beforeUpload) {\n      const result = beforeUpload(file, uploadFiles);\n      if (result === false) {\n        const { fileList } = this.state;\n        this.onChange({\n          file,\n          fileList: uniqBy(uploadFiles.concat(fileList), (item: any) => item.uid),\n        });\n        return false;\n      }\n      if (result && (result as PromiseLike<any>).then) {\n        return result;\n      }\n    }\n    return true;\n  };\n\n  clearProgressTimer() {\n    clearInterval(this.progressTimer);\n  }\n\n  saveUpload = (node: RcUpload | null) => {\n    this.upload = node;\n  };\n\n  renderUploadList = (uploadLocale: UploadLocale) => {\n    const { showUploadList, listType, onPreview, locale } = this.props;\n    const { fileList } = this.state;\n    const { showRemoveIcon, showPreviewIcon } = showUploadList as any;\n    return (\n      <UploadList\n        listType={listType}\n        items={fileList}\n        onPreview={onPreview}\n        onRemove={this.handleManualRemove}\n        showRemoveIcon={showRemoveIcon}\n        showPreviewIcon={showPreviewIcon}\n        locale={{ ...uploadLocale, ...locale }}\n      />\n    );\n  };\n\n  render() {\n    const {\n      prefixCls: customizePrefixCls,\n      className,\n      showUploadList,\n      listType,\n      type,\n      disabled,\n      children,\n    } = this.props;\n    const { fileList, dragState } = this.state;\n\n    const prefixCls = getPrefixCls('upload', customizePrefixCls);\n\n    const rcUploadProps = {\n      ...this.props,\n      onStart: this.onStart,\n      onError: this.onError,\n      onProgress: this.onProgress,\n      onSuccess: this.onSuccess,\n      beforeUpload: this.beforeUpload,\n      prefixCls,\n    };\n\n    delete rcUploadProps.className;\n\n    const uploadList = showUploadList ? (\n      <LocaleReceiver componentName=\"Upload\" defaultLocale={defaultLocale.Upload}>\n        {this.renderUploadList}\n      </LocaleReceiver>\n    ) : null;\n\n    if (type === 'drag') {\n      const dragCls = classNames(prefixCls, {\n        [`${prefixCls}-drag`]: true,\n        [`${prefixCls}-drag-uploading`]: fileList.some(file => file.status === 'uploading'),\n        [`${prefixCls}-drag-hover`]: dragState === 'dragover',\n        [`${prefixCls}-disabled`]: disabled,\n      });\n      return (\n        <span className={className}>\n          <div\n            className={dragCls}\n            onDrop={this.onFileDrop}\n            onDragOver={this.onFileDrop}\n            onDragLeave={this.onFileDrop}\n          >\n            <RcUpload {...rcUploadProps} ref={this.saveUpload} className={`${prefixCls}-btn`}>\n              <div className={`${prefixCls}-drag-container`}>{children}</div>\n            </RcUpload>\n          </div>\n          {uploadList}\n        </span>\n      );\n    }\n\n    const uploadButtonCls = classNames(prefixCls, {\n      [`${prefixCls}-select`]: true,\n      [`${prefixCls}-select-${listType}`]: true,\n      [`${prefixCls}-disabled`]: disabled,\n    });\n\n    const uploadButton = (\n      <div className={uploadButtonCls} style={{ display: children ? '' : 'none' }}>\n        <RcUpload {...rcUploadProps} ref={this.saveUpload} />\n      </div>\n    );\n\n    if (listType === 'picture-card') {\n      return (\n        <span className={className}>\n          {uploadList}\n          {uploadButton}\n        </span>\n      );\n    }\n    return (\n      <span className={className}>\n        {uploadButton}\n        {uploadList}\n      </span>\n    );\n  }\n}\n"]}