6907dccb83d9e8e70fa718d33cfd8f4a
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _reactDom = require("react-dom");

var _classnames = _interopRequireDefault(require("classnames"));

var _noop = _interopRequireDefault(require("lodash/noop"));

var _KeyCode = _interopRequireDefault(require("../../_util/KeyCode"));

var _animate = _interopRequireDefault(require("../../animate"));

var _util = require("./util");

var _SelectTrigger = _interopRequireDefault(require("./SelectTrigger"));

var _TreeNode2 = _interopRequireDefault(require("./TreeNode"));

var _strategies = require("./strategies");

var _PropTypes = require("./PropTypes");

var _Button = _interopRequireDefault(require("../../button/Button"));

function filterFn(input, child) {
  return String((0, _util.getPropValue)(child, (0, _util.labelCompatible)(this.props.treeNodeFilterProp))).indexOf(input) > -1;
}

function loopTreeData(data) {
  var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  var treeCheckable = arguments.length > 2 ? arguments[2] : undefined;
  return data.map(function (item, index) {
    var pos = "".concat(level, "-").concat(index);
    var label = item.label,
        value = item.value,
        disabled = item.disabled,
        key = item.key,
        hasOwnProperty = item.hasOwnProperty,
        selectable = item.selectable,
        children = item.children,
        isLeaf = item.isLeaf,
        otherProps = (0, _objectWithoutProperties2["default"])(item, ["label", "value", "disabled", "key", "hasOwnProperty", "selectable", "children", "isLeaf"]);
    var props = (0, _objectSpread2["default"])({
      value: value,
      title: label,
      // value: value || String(key || label), // cause onChange callback error
      key: key || value || pos,
      disabled: disabled || false,
      selectable: selectable === false ? selectable : !treeCheckable
    }, otherProps);
    var ret;

    if (children && children.length) {
      ret = _react["default"].createElement(_TreeNode2["default"], props, loopTreeData(children, pos, treeCheckable));
    } else {
      ret = _react["default"].createElement(_TreeNode2["default"], (0, _extends2["default"])({}, props, {
        isLeaf: isLeaf
      }));
    }

    return ret;
  });
}

var Select =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(Select, _Component);

  function Select(_props2) {
    var _this;

    (0, _classCallCheck2["default"])(this, Select);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(Select).call(this, _props2));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onInputChange", function (event) {
      var val = event.target.value;

      var _assertThisInitialize = (0, _assertThisInitialized2["default"])(_this),
          props = _assertThisInitialize.props;

      _this.setState({
        inputValue: val,
        open: true
      });

      if (props.treeCheckable && !val) {
        _this.setState({
          value: _this.getValue(props, (0, _toConsumableArray2["default"])(_this.state.value), false)
        });
      }

      props.onSearch(val);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onDropdownVisibleChange", function (open) {
      // selection inside combobox cause click
      if (!open && document.activeElement === _this.getInputDOMNode()) {} // return;
      // this.setOpenState(open);
      // setTimeout, then have animation. why?


      setTimeout(function () {
        _this.setOpenState(open, undefined, !open);
      }, 10);
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onKeyDown", function (event) {
      var props = _this.props;

      if (props.disabled) {
        return;
      }

      var keyCode = event.keyCode;

      if (_this.state.open && !_this.getInputDOMNode()) {
        _this.onInputKeyDown(event);
      } else if (keyCode === _KeyCode["default"].ENTER || keyCode === _KeyCode["default"].DOWN) {
        _this.setOpenState(true);

        event.preventDefault();
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onInputKeyDown", function (event) {
      var props = _this.props;

      if (props.disabled) {
        return;
      }

      var state = _this.state;
      var keyCode = event.keyCode;

      if ((0, _util.isMultiple)(props) && !event.target.value && keyCode === _KeyCode["default"].BACKSPACE) {
        var value = state.value.concat();

        if (value.length) {
          var popValue = value.pop();

          _this.removeSelected(_this.isLabelInValue() ? popValue : popValue.value);
        }

        return;
      }

      if (keyCode === _KeyCode["default"].DOWN) {
        if (!state.open) {
          _this.openIfHasChildren();

          event.preventDefault();
          event.stopPropagation();
          return;
        }
      } else if (keyCode === _KeyCode["default"].ESC) {
        if (state.open) {
          _this.setOpenState(false);

          event.preventDefault();
          event.stopPropagation();
        }

        return;
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onSelect", function (selectedKeys, info) {
      var item = info.node;
      var value = _this.state.value;
      var props = _this.props;
      var selectedValue = (0, _util.getValuePropValue)(item);

      var selectedLabel = _this.getLabelFromNode(item);

      var checkableSelect = props.treeCheckable && info.event === 'select';
      var event = selectedValue;

      if (_this.isLabelInValue()) {
        event = {
          value: event,
          label: selectedLabel
        };
      }

      if (info.selected === false) {
        _this.onDeselect(info);

        if (!checkableSelect) return;
      }

      props.onSelect(event, item, info);
      var checkEvt = info.event === 'check';

      if ((0, _util.isMultiple)(props)) {
        _this.clearSearchInput();

        if (checkEvt) {
          value = _this.getCheckedNodes(info, props).map(function (n) {
            return {
              value: (0, _util.getValuePropValue)(n),
              label: _this.getLabelFromNode(n)
            };
          });
        } else {
          if (value.some(function (i) {
            return i.value === selectedValue;
          })) {
            return;
          }

          value = value.concat([{
            value: selectedValue,
            label: selectedLabel
          }]);
        }
      } else {
        if (value.length && value[0].value === selectedValue) {
          _this.setOpenState(false);

          return;
        }

        value = [{
          value: selectedValue,
          label: selectedLabel
        }];

        _this.setOpenState(false);
      }

      var extraInfo = {
        triggerValue: selectedValue,
        triggerNode: item
      };

      if (checkEvt) {
        extraInfo.checked = info.checked; // if inputValue existing, tree is checkStrictly

        extraInfo.allCheckedNodes = props.treeCheckStrictly || _this.state.inputValue ? info.checkedNodes : (0, _util.flatToHierarchy)(info.checkedNodesPositions);
        _this._checkedNodes = info.checkedNodesPositions;
        var _tree = _this.trigger.popupEle;
        _this._treeNodesStates = _tree.checkKeys;
      } else {
        extraInfo.selected = info.selected;
      }

      _this.fireChange(value, extraInfo);

      if (props.inputValue === null) {
        _this.setState({
          inputValue: ''
        });
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onDeselect", function (info) {
      _this.removeSelected((0, _util.getValuePropValue)(info.node));

      if (!(0, _util.isMultiple)(_this.props)) {
        _this.setOpenState(false);
      } else {
        _this.clearSearchInput();
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onPlaceholderClick", function () {
      _this.getInputDOMNode().focus();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onClearSelection", function (event) {
      var props = _this.props;
      var state = _this.state;

      if (props.disabled) {
        return;
      }

      event.stopPropagation();
      _this._cacheTreeNodesStates = 'no';
      _this._checkedNodes = [];

      if (state.inputValue || state.value.length) {
        _this.setOpenState(false);

        if (typeof props.inputValue === 'undefined') {
          _this.setState({
            inputValue: ''
          }, function () {
            _this.fireChange([]);
          });
        } else {
          _this.fireChange([]);
        }
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onChoiceAnimationLeave", function () {
      _this.trigger.trigger.forcePopupAlign();
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "onArrowClick", function (e) {
      e.stopPropagation();
      e.preventDefault();

      if (!_this.props.disabled) {
        _this.onDropdownVisibleChange(!_this.state.open);
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getPlaceholderElement", function () {
      var _assertThisInitialize2 = (0, _assertThisInitialized2["default"])(_this),
          props = _assertThisInitialize2.props,
          state = _assertThisInitialize2.state;

      var placeholder = props.placeholder;

      if (placeholder) {
        return _react["default"].createElement("div", {
          className: "".concat(props.prefixCls, "-selection__placeholder")
        }, placeholder);
      }

      return null;
    });
    var _value = [];

    if ('value' in _props2) {
      _value = (0, _util.toArray)(_props2.value);
    } else {
      _value = (0, _util.toArray)(_props2.defaultValue);
    } // save parsed treeData, for performance (treeData may be very big)


    _this.renderedTreeData = _this.renderTreeData();
    _value = _this.addLabelToValue(_props2, _value);
    _value = _this.getValue(_props2, _value, _props2.inputValue ? '__strict' : true);
    var inputValue = _props2.inputValue || ''; // if (props.combobox) {
    //   inputValue = value.length ? String(value[0].value) : '';
    // }

    _this.state = {
      value: _value,
      inputValue: inputValue,
      open: _props2.open || _props2.defaultOpen,
      focused: false
    };
    return _this;
  }

  (0, _createClass2["default"])(Select, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this$props = this.props,
          autoFocus = _this$props.autoFocus,
          disabled = _this$props.disabled;

      if ((0, _util.isMultiple)(this.props)) {
        var inputNode = this.getInputDOMNode();

        if (inputNode.value) {
          inputNode.style.width = '';
          inputNode.style.width = "".concat(this.inputMirrorInstance.clientWidth, "px");
        } else {
          inputNode.style.width = '';
        }
      }

      if (autoFocus && !disabled) {
        this.focus();
      }
    }
  }, {
    key: "componentWillReceiveProps",
    value: function componentWillReceiveProps(nextProps) {
      // save parsed treeData, for performance (treeData may be very big)
      this.renderedTreeData = this.renderTreeData(nextProps); // Detecting whether the object of `onChange`'s argument  is old ref.
      // Better to do a deep equal later.

      this._cacheTreeNodesStates = this._cacheTreeNodesStates !== 'no' && this._savedValue && nextProps.value === this._savedValue;

      if (this.props.treeData !== nextProps.treeData || this.props.children !== nextProps.children) {
        // refresh this._treeNodesStates cache
        this._treeNodesStates = (0, _util.getTreeNodesStates)(this.renderedTreeData || nextProps.children, this.state.value.map(function (item) {
          return item.value;
        }));
      }

      if ('value' in nextProps) {
        var value = (0, _util.toArray)(nextProps.value);
        value = this.addLabelToValue(nextProps, value);
        value = this.getValue(nextProps, value);
        this.setState({
          value: value
        }); // if (nextProps.combobox) {
        //   this.setState({
        //     inputValue: value.length ? String(value[0].key) : '',
        //   });
        // }
      }

      if (nextProps.inputValue !== this.props.inputValue) {
        this.setState({
          inputValue: nextProps.inputValue
        });
      }

      if ('open' in nextProps) {
        this.setState({
          open: nextProps.open
        });
      }
    }
  }, {
    key: "componentWillUpdate",
    value: function componentWillUpdate(nextProps) {
      if (this._savedValue && nextProps.value && nextProps.value !== this._savedValue && nextProps.value === this.props.value) {
        this._cacheTreeNodesStates = false;
        this.getValue(nextProps, this.addLabelToValue(nextProps, (0, _util.toArray)(nextProps.value)));
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate() {
      var state = this.state;
      var props = this.props;

      if (state.open && (0, _util.isMultiple)(props)) {
        var inputNode = this.getInputDOMNode();

        if (inputNode.value) {
          inputNode.style.width = '';
          inputNode.style.width = "".concat(this.inputMirrorInstance.clientWidth, "px");
        } else {
          inputNode.style.width = '';
        }
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.clearDelayTimer();

      if (this.dropdownContainer) {
        (0, _reactDom.unmountComponentAtNode)(this.dropdownContainer);
        document.body.removeChild(this.dropdownContainer);
        this.dropdownContainer = null;
      }
    }
  }, {
    key: "getLabelFromNode",
    value: function getLabelFromNode(child) {
      return (0, _util.getPropValue)(child, this.props.treeNodeLabelProp);
    }
  }, {
    key: "getLabelFromProps",
    value: function getLabelFromProps(props, value) {
      var _this2 = this;

      if (value === undefined) {
        return null;
      }

      var label = null;
      (0, _util.loopAllChildren)(this.renderedTreeData || props.children, function (item) {
        if ((0, _util.getValuePropValue)(item) === value) {
          label = _this2.getLabelFromNode(item);
        }
      });

      if (label === null) {
        return value;
      }

      return label;
    }
  }, {
    key: "getDropdownContainer",
    value: function getDropdownContainer() {
      if (!this.dropdownContainer) {
        this.dropdownContainer = document.createElement('div');
        document.body.appendChild(this.dropdownContainer);
      }

      return this.dropdownContainer;
    }
  }, {
    key: "getSearchPlaceholderElement",
    value: function getSearchPlaceholderElement(hidden) {
      var props = this.props;
      var placeholder;

      if ((0, _util.isMultiple)(props)) {
        placeholder = props.placeholder || props.searchPlaceholder;
      } else {
        placeholder = props.searchPlaceholder;
      }

      if (placeholder) {
        return _react["default"].createElement("span", {
          style: {
            display: hidden ? 'none' : 'block'
          },
          onClick: this.onPlaceholderClick,
          className: "".concat(props.prefixCls, "-search__field__placeholder")
        }, placeholder);
      }

      return null;
    }
  }, {
    key: "getInputElement",
    value: function getInputElement() {
      var inputValue = this.state.inputValue;
      var _this$props2 = this.props,
          prefixCls = _this$props2.prefixCls,
          disabled = _this$props2.disabled;
      return _react["default"].createElement("span", {
        className: "".concat(prefixCls, "-search__field__wrap")
      }, _react["default"].createElement("input", {
        ref: (0, _util.saveRef)(this, 'inputInstance'),
        onChange: this.onInputChange,
        onKeyDown: this.onInputKeyDown,
        value: inputValue,
        disabled: disabled,
        className: "".concat(prefixCls, "-search__field"),
        role: "textbox"
      }), _react["default"].createElement("span", {
        ref: (0, _util.saveRef)(this, 'inputMirrorInstance'),
        className: "".concat(prefixCls, "-search__field__mirror")
      }, inputValue, "\xA0"), (0, _util.isMultiple)(this.props) ? null : this.getSearchPlaceholderElement(!!inputValue));
    }
  }, {
    key: "getInputDOMNode",
    value: function getInputDOMNode() {
      return this.inputInstance;
    }
  }, {
    key: "getPopupDOMNode",
    value: function getPopupDOMNode() {
      return this.trigger.getPopupDOMNode();
    }
  }, {
    key: "getPopupComponentRefs",
    value: function getPopupComponentRefs() {
      return this.trigger.getPopupEleRefs();
    }
  }, {
    key: "getValue",
    value: function getValue(_props, val) {
      var _this3 = this;

      var init = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      var value = val; // if inputValue existing, tree is checkStrictly

      var _strict = init === '__strict' || init && (this.state && this.state.inputValue || this.props.inputValue !== _props.inputValue);

      if (_props.treeCheckable && (_props.treeCheckStrictly || _strict)) {
        this.halfCheckedValues = [];
        value = [];
        val.forEach(function (i) {
          if (!i.halfChecked) {
            value.push(i);
          } else {
            _this3.halfCheckedValues.push(i);
          }
        });
      } // if (!(_props.treeCheckable && !_props.treeCheckStrictly)) {


      if (!!!_props.treeCheckable || _props.treeCheckable && (_props.treeCheckStrictly || _strict)) {
        return value;
      }

      var checkedTreeNodes;

      if (this._cachetreeData && this._cacheTreeNodesStates && this._checkedNodes && this.state && !this.state.inputValue) {
        this.checkedTreeNodes = checkedTreeNodes = this._checkedNodes;
      } else {
        /**
         * Note: `this._treeNodesStates`'s treeNodesStates must correspond to nodes of the
         * final tree (`processTreeNode` function from SelectTrigger.jsx produce the final tree).
         *
         * And, `this._treeNodesStates` from `onSelect` is previous value,
         * so it perhaps only have a few nodes, but the newly filtered tree can have many nodes,
         * thus, you cannot use previous _treeNodesStates.
         */
        // getTreeNodesStates is not effective.
        this._treeNodesStates = (0, _util.getTreeNodesStates)(this.renderedTreeData || _props.children, value.map(function (item) {
          return item.value;
        }));
        this.checkedTreeNodes = checkedTreeNodes = this._treeNodesStates.checkedNodes;
      }

      var mapLabVal = function mapLabVal(arr) {
        return arr.map(function (itemObj) {
          return {
            value: (0, _util.getValuePropValue)(itemObj.node),
            label: (0, _util.getPropValue)(itemObj.node, _props.treeNodeLabelProp)
          };
        });
      };

      var props = this.props;
      var checkedValues = [];

      if (props.showCheckedStrategy === _strategies.SHOW_ALL) {
        checkedValues = mapLabVal(checkedTreeNodes);
      } else if (props.showCheckedStrategy === _strategies.SHOW_PARENT) {
        var posArr = (0, _util.filterParentPosition)(checkedTreeNodes.map(function (itemObj) {
          return itemObj.pos;
        }));
        checkedValues = mapLabVal(checkedTreeNodes.filter(function (itemObj) {
          return posArr.indexOf(itemObj.pos) !== -1;
        }));
      } else {
        checkedValues = mapLabVal(checkedTreeNodes.filter(function (itemObj) {
          return !itemObj.node.props.children;
        }));
      }

      return checkedValues;
    }
  }, {
    key: "getCheckedNodes",
    value: function getCheckedNodes(info, props) {
      // TODO treeCheckable does not support tags/dynamic
      var checkedNodes = info.checkedNodes; // if inputValue existing, tree is checkStrictly

      if (props.treeCheckStrictly || this.state.inputValue) {
        return checkedNodes;
      }

      var checkedNodesPositions = info.checkedNodesPositions;

      if (props.showCheckedStrategy === _strategies.SHOW_ALL) {
        checkedNodes = checkedNodes;
      } else if (props.showCheckedStrategy === _strategies.SHOW_PARENT) {
        var posArr = (0, _util.filterParentPosition)(checkedNodesPositions.map(function (itemObj) {
          return itemObj.pos;
        }));
        checkedNodes = checkedNodesPositions.filter(function (itemObj) {
          return posArr.indexOf(itemObj.pos) !== -1;
        }).map(function (itemObj) {
          return itemObj.node;
        });
      } else {
        checkedNodes = checkedNodes.filter(function (n) {
          return !n.props.children;
        });
      }

      return checkedNodes;
    }
  }, {
    key: "getDeselectedValue",
    value: function getDeselectedValue(selectedValue) {
      var checkedTreeNodes = this.checkedTreeNodes;
      var unCheckPos;
      checkedTreeNodes.forEach(function (itemObj) {
        if (itemObj.node.props.value === selectedValue) {
          unCheckPos = itemObj.pos;
        }
      });
      var newVals = [];
      var newCkTns = [];
      checkedTreeNodes.forEach(function (itemObj) {
        if ((0, _util.isPositionPrefix)(itemObj.pos, unCheckPos) || (0, _util.isPositionPrefix)(unCheckPos, itemObj.pos)) {
          // Filter ancestral and children nodes when uncheck a node.
          return;
        }

        newCkTns.push(itemObj);
        newVals.push(itemObj.node.props.value);
      });
      this.checkedTreeNodes = this._checkedNodes = newCkTns;
      var nv = this.state.value.filter(function (val) {
        return newVals.indexOf(val.value) !== -1;
      });
      this.fireChange(nv, {
        triggerValue: selectedValue,
        clear: true
      });
    }
  }, {
    key: "setOpenState",
    value: function setOpenState(open, needFocus) {
      var _this4 = this;

      var documentClickClose = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      this.clearDelayTimer();
      var props = this.props; // can not optimize, if children is empty
      // if (this.state.open === open) {
      //   return;
      // }

      if (!this.props.onDropdownVisibleChange(open, {
        documentClickClose: documentClickClose
      })) {
        return;
      }

      this.setState({
        open: open
      }, function () {
        if (needFocus || open) {
          // Input dom init after first time component render
          // Add delay for this to get focus
          Promise.resolve().then(function () {
            if (open || (0, _util.isMultiple)(props)) {
              var input = _this4.getInputDOMNode();

              if (input && document.activeElement !== input) {
                input.focus();
              }
            } else if (_this4.selection) {
              _this4.selection.focus();
            }
          });
        }
      });
    }
  }, {
    key: "clearSearchInput",
    value: function clearSearchInput() {
      this.getInputDOMNode().focus();

      if (!('inputValue' in this.props)) {
        this.setState({
          inputValue: ''
        });
      }
    }
  }, {
    key: "addLabelToValue",
    value: function addLabelToValue(props, value_) {
      var _this5 = this;

      var value = value_;

      if (this.isLabelInValue()) {
        value.forEach(function (v, i) {
          if (Object.prototype.toString.call(value[i]) !== '[object Object]') {
            value[i] = {
              value: '',
              label: ''
            };
            return;
          }

          v.label = v.label || _this5.getLabelFromProps(props, v.value);
        });
      } else {
        value = value.map(function (v) {
          return {
            value: v,
            label: _this5.getLabelFromProps(props, v)
          };
        });
      }

      return value;
    }
  }, {
    key: "clearDelayTimer",
    value: function clearDelayTimer() {
      if (this.delayTimer) {
        clearTimeout(this.delayTimer);
        this.delayTimer = null;
      }
    }
  }, {
    key: "removeSelected",
    value: function removeSelected(selectedVal) {
      var props = this.props;

      if (props.disabled) {
        return;
      }

      this._cacheTreeNodesStates = 'no';

      if (props.treeCheckable && (props.showCheckedStrategy === _strategies.SHOW_ALL || props.showCheckedStrategy === _strategies.SHOW_PARENT) && !(props.treeCheckStrictly || this.state.inputValue)) {
        this.getDeselectedValue(selectedVal);
        return;
      } // click the node's `x`(in select box), likely trigger the TreeNode's `unCheck` event,
      // cautiously, they are completely different, think about it, the tree may not render at first,
      // but the nodes in select box are ready.


      var label;
      var value = this.state.value.filter(function (singleValue) {
        if (singleValue.value === selectedVal) {
          label = singleValue.label;
        }

        return singleValue.value !== selectedVal;
      });
      var canMultiple = (0, _util.isMultiple)(props);

      if (canMultiple) {
        var event = selectedVal;

        if (this.isLabelInValue()) {
          event = {
            value: selectedVal,
            label: label
          };
        }

        props.onDeselect(event);
      }

      if (props.treeCheckable) {
        if (this.checkedTreeNodes && this.checkedTreeNodes.length) {
          this.checkedTreeNodes = this._checkedNodes = this.checkedTreeNodes.filter(function (item) {
            return value.some(function (i) {
              return i.value === item.node.props.value;
            });
          });
        }
      }

      this.fireChange(value, {
        triggerValue: selectedVal,
        clear: true
      });
    }
  }, {
    key: "openIfHasChildren",
    value: function openIfHasChildren() {
      var props = this.props;

      if (_react.Children.count(props.children) || !(0, _util.isMultiple)(props)) {
        this.setOpenState(true);
      }
    }
  }, {
    key: "fireChange",
    value: function fireChange(value) {
      var _this6 = this;

      var extraInfo = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var props = this.props;
      var vals = value.map(function (i) {
        return i.value;
      });
      var sv = this.state.value.map(function (i) {
        return i.value;
      });

      if (vals.length !== sv.length || !vals.every(function (val, index) {
        return sv[index] === val;
      })) {
        var ex = (0, _objectSpread2["default"])({
          preValue: (0, _toConsumableArray2["default"])(this.state.value)
        }, extraInfo);
        var labs = null;
        var vls = value;

        if (!this.isLabelInValue()) {
          labs = value.map(function (i) {
            return i.label;
          });
          vls = vls.map(function (v) {
            return v.value;
          });
        } else if (this.halfCheckedValues && this.halfCheckedValues.length) {
          this.halfCheckedValues.forEach(function (i) {
            if (!vls.some(function (v) {
              return v.value === i.value;
            })) {
              vls.push(i);
            }
          });
        }

        if (props.treeCheckable && ex.clear) {
          var treeData = this.renderedTreeData || props.children;
          ex.allCheckedNodes = (0, _util.flatToHierarchy)((0, _util.filterAllCheckedData)(vals, treeData));
        }

        if (props.treeCheckable && this.state.inputValue) {
          var _vls = (0, _toConsumableArray2["default"])(this.state.value);

          if (ex.checked) {
            value.forEach(function (i) {
              if (_vls.every(function (ii) {
                return ii.value !== i.value;
              })) {
                _vls.push((0, _objectSpread2["default"])({}, i));
              }
            });
          } else {
            var index;

            var includeVal = _vls.some(function (i, ind) {
              if (i.value === ex.triggerValue) {
                index = ind;
                return true;
              }
            });

            if (includeVal) {
              _vls.splice(index, 1);
            }
          }

          vls = _vls;

          if (!this.isLabelInValue()) {
            labs = _vls.map(function (v) {
              return v.label;
            });
            vls = _vls.map(function (v) {
              return v.value;
            });
          }
        }

        this._savedValue = (0, _util.isMultiple)(props) ? vls : vls[0];
        props.onChange(this._savedValue, labs, ex);

        if (!('value' in props)) {
          this._cacheTreeNodesStates = false;
          this.setState({
            value: this.getValue(props, (0, _util.toArray)(this._savedValue).map(function (v, i) {
              return _this6.isLabelInValue() ? v : {
                value: v,
                label: labs && labs[i]
              };
            }))
          });
        }
      }
    }
  }, {
    key: "isLabelInValue",
    value: function isLabelInValue() {
      var _this$props3 = this.props,
          treeCheckable = _this$props3.treeCheckable,
          treeCheckStrictly = _this$props3.treeCheckStrictly,
          labelInValue = _this$props3.labelInValue;

      if (treeCheckable && treeCheckStrictly) {
        return true;
      }

      return labelInValue || false;
    }
  }, {
    key: "focus",
    value: function focus() {
      if (!(0, _util.isMultiple)(this.props)) {
        this.selection.focus();
      } else {
        this.getInputDOMNode().focus();
      }
    }
  }, {
    key: "blur",
    value: function blur() {
      if (!(0, _util.isMultiple)(this.props)) {
        this.selection.blur();
      } else {
        this.getInputDOMNode().blur();
      }
    }
  }, {
    key: "renderClear",
    value: function renderClear() {
      var _this$props4 = this.props,
          prefixCls = _this$props4.prefixCls,
          allowClear = _this$props4.allowClear;
      var _this$state = this.state,
          value = _this$state.value,
          inputValue = _this$state.inputValue;

      var clear = _react["default"].createElement(_Button["default"], (0, _extends2["default"])({
        key: "clear",
        className: "".concat(prefixCls, "-clear"),
        style: _util.UNSELECTABLE_STYLE
      }, _util.UNSELECTABLE_ATTRIBUTE, {
        shape: "circle",
        icon: "close",
        size: "small",
        onClick: this.onClearSelection,
        onMouseDown: _util.preventDefaultEvent
      }));

      if (!allowClear) {
        return null;
      }

      if (inputValue || value.length) {
        return clear;
      }

      return null;
    }
  }, {
    key: "renderTopControlNode",
    value: function renderTopControlNode() {
      var _this7 = this;

      var value = this.state.value;
      var props = this.props;
      var choiceTransitionName = props.choiceTransitionName,
          prefixCls = props.prefixCls,
          maxTagTextLength = props.maxTagTextLength,
          choiceRender = props.choiceRender;
      var multiple = (0, _util.isMultiple)(props); // single and not combobox, input is inside dropdown

      if (!multiple) {
        var singleValue = value && value[0];

        var _ref = singleValue || {},
            label = _ref.label;

        var innerNode = _react["default"].createElement("span", {
          key: "value",
          title: label,
          className: "".concat(prefixCls, "-selection-selected-value")
        }, choiceRender ? choiceRender(label) : label);

        return _react["default"].createElement("div", {
          className: "".concat(prefixCls, "-selection__rendered")
        }, this.getPlaceholderElement(), innerNode, this.renderClear(), multiple || !props.showArrow ? null : _react["default"].createElement("span", (0, _extends2["default"])({
          key: "arrow",
          className: "".concat(prefixCls, "-arrow"),
          style: _util.UNSELECTABLE_STYLE
        }, _util.UNSELECTABLE_ATTRIBUTE, {
          onClick: this.onArrowClick
        }), _react["default"].createElement("i", {
          className: "icon icon-arrow_drop_down"
        }), _react["default"].createElement("b", null)));
      }

      var selectedValueNodes = value.map(function (singleValue) {
        var content = singleValue.label;
        var title = content;

        if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {
          content = "".concat(content.slice(0, maxTagTextLength), "...");
        }

        return _react["default"].createElement("li", (0, _extends2["default"])({
          style: _util.UNSELECTABLE_STYLE
        }, _util.UNSELECTABLE_ATTRIBUTE, {
          onMouseDown: _util.preventDefaultEvent,
          className: "".concat(prefixCls, "-selection__choice"),
          key: singleValue.value,
          title: title
        }), _react["default"].createElement("span", {
          className: "".concat(prefixCls, "-selection__choice__remove"),
          onClick: _this7.removeSelected.bind(_this7, singleValue.value)
        }), _react["default"].createElement("span", {
          className: "".concat(prefixCls, "-selection__choice__content")
        }, content));
      });
      selectedValueNodes.push(_react["default"].createElement("li", {
        className: "".concat(prefixCls, "-search ").concat(prefixCls, "-search--inline"),
        key: "__input"
      }, this.getInputElement()));
      var className = "".concat(prefixCls, "-selection__rendered");

      if (choiceTransitionName) {
        return _react["default"].createElement(_animate["default"], {
          className: className,
          component: "ul",
          transitionName: choiceTransitionName,
          onLeave: this.onChoiceAnimationLeave
        }, selectedValueNodes);
      }

      return _react["default"].createElement("ul", {
        className: className
      }, selectedValueNodes);
    }
  }, {
    key: "renderTreeData",
    value: function renderTreeData(props) {
      var validProps = props || this.props;

      if (validProps.treeData) {
        if (props && props.treeData === this.props.treeData && this.renderedTreeData) {
          // cache and use pre data.
          this._cachetreeData = true;
          return this.renderedTreeData;
        }

        this._cachetreeData = false;
        var treeData = (0, _toConsumableArray2["default"])(validProps.treeData); // process treeDataSimpleMode

        if (validProps.treeDataSimpleMode) {
          var simpleFormat = {
            id: 'id',
            pId: 'pId',
            rootPId: null
          };

          if (Object.prototype.toString.call(validProps.treeDataSimpleMode) === '[object Object]') {
            simpleFormat = (0, _objectSpread2["default"])({}, simpleFormat, {}, validProps.treeDataSimpleMode);
          }

          treeData = (0, _util.processSimpleTreeData)(treeData, simpleFormat);
        }

        return loopTreeData(treeData, undefined, this.props.treeCheckable);
      }
    }
  }, {
    key: "getUnderLine",
    value: function getUnderLine() {
      var _this$props5 = this.props,
          prefixCls = _this$props5.prefixCls,
          className = _this$props5.className;

      if (className && className.includes("".concat(prefixCls, "-auto-complete"))) {
        return null;
      }

      return _react["default"].createElement("div", {
        className: "".concat(prefixCls, "-underline")
      }, _react["default"].createElement("span", {
        className: "".concat(prefixCls, "-ripple")
      }));
    }
  }, {
    key: "render",
    value: function render() {
      var _rootCls;

      var props = this.props;
      var multiple = (0, _util.isMultiple)(props);
      var _this$state2 = this.state,
          open = _this$state2.open,
          focused = _this$state2.focused,
          inputValue = _this$state2.inputValue,
          value = _this$state2.value;
      var className = props.className,
          disabled = props.disabled,
          label = props.label,
          prefixCls = props.prefixCls;
      var ctrlNode = this.renderTopControlNode();
      var extraSelectionProps = {};

      if (!multiple) {
        extraSelectionProps = {
          onKeyDown: this.onKeyDown,
          tabIndex: 0
        };
      }

      var rootCls = (_rootCls = {}, (0, _defineProperty2["default"])(_rootCls, className, !!className), (0, _defineProperty2["default"])(_rootCls, prefixCls, 1), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-open"), open), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-focused"), open || focused), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-has-value"), inputValue || value.length && value[0]), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-has-label"), label), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-disabled"), disabled), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-enabled"), !disabled), (0, _defineProperty2["default"])(_rootCls, "".concat(prefixCls, "-allow-clear"), !!props.allowClear), _rootCls);
      return _react["default"].createElement(_SelectTrigger["default"], (0, _extends2["default"])({}, props, {
        treeNodes: props.children,
        treeData: this.renderedTreeData,
        _cachetreeData: this._cachetreeData,
        _treeNodesStates: this._treeNodesStates,
        halfCheckedValues: this.halfCheckedValues,
        multiple: multiple,
        disabled: disabled,
        visible: open,
        inputValue: inputValue,
        inputElement: this.getInputElement(),
        value: value,
        onDropdownVisibleChange: this.onDropdownVisibleChange,
        getPopupContainer: props.getPopupContainer,
        onSelect: this.onSelect,
        ref: (0, _util.saveRef)(this, 'trigger')
      }), _react["default"].createElement("div", {
        style: props.style,
        onClick: props.onClick,
        className: (0, _classnames["default"])(rootCls),
        onBlur: props.onBlur,
        onFocus: props.onFocus
      }, _react["default"].createElement("div", (0, _extends2["default"])({
        ref: (0, _util.saveRef)(this, 'selection'),
        key: "selection",
        className: "".concat(prefixCls, "-selection\n            ").concat(prefixCls, "-selection--").concat(multiple ? 'multiple' : 'single'),
        role: "combobox",
        "aria-autocomplete": "list",
        "aria-haspopup": "true",
        "aria-expanded": open
      }, extraSelectionProps), ctrlNode, multiple ? this.getSearchPlaceholderElement(!!inputValue || value.length) : null), this.getUnderLine()));
    }
  }]);
  return Select;
}(_react.Component);

exports["default"] = Select;
(0, _defineProperty2["default"])(Select, "propTypes", _PropTypes.SelectPropTypes);
(0, _defineProperty2["default"])(Select, "defaultProps", {
  prefixCls: 'rc-tree-select',
  filterTreeNode: filterFn,
  showSearch: true,
  allowClear: false,
  placeholder: '',
  searchPlaceholder: '',
  labelInValue: false,
  onClick: _noop["default"],
  onChange: _noop["default"],
  onSelect: _noop["default"],
  onDeselect: _noop["default"],
  onSearch: _noop["default"],
  showArrow: true,
  dropdownMatchSelectWidth: true,
  dropdownStyle: {},
  onDropdownVisibleChange: function onDropdownVisibleChange() {
    return true;
  },
  optionLabelProp: 'value',
  notFoundContent: 'Not Found',
  showCheckedStrategy: _strategies.SHOW_CHILD,
  // skipHandleInitValue: false, // Deprecated (use treeCheckStrictly)
  treeCheckStrictly: false,
  treeIcon: false,
  treeLine: false,
  treeDataSimpleMode: false,
  treeDefaultExpandAll: false,
  treeCheckable: false,
  treeNodeFilterProp: 'value',
  treeNodeLabelProp: 'title'
});
(0, _defineProperty2["default"])(Select, "SHOW_ALL", _strategies.SHOW_ALL);
(0, _defineProperty2["default"])(Select, "SHOW_PARENT", _strategies.SHOW_PARENT);
(0, _defineProperty2["default"])(Select, "SHOW_CHILD", _strategies.SHOW_CHILD);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlbGVjdC5qc3giXSwibmFtZXMiOlsiZmlsdGVyRm4iLCJpbnB1dCIsImNoaWxkIiwiU3RyaW5nIiwicHJvcHMiLCJ0cmVlTm9kZUZpbHRlclByb3AiLCJpbmRleE9mIiwibG9vcFRyZWVEYXRhIiwiZGF0YSIsImxldmVsIiwidHJlZUNoZWNrYWJsZSIsIm1hcCIsIml0ZW0iLCJpbmRleCIsInBvcyIsImxhYmVsIiwidmFsdWUiLCJkaXNhYmxlZCIsImtleSIsImhhc093blByb3BlcnR5Iiwic2VsZWN0YWJsZSIsImNoaWxkcmVuIiwiaXNMZWFmIiwib3RoZXJQcm9wcyIsInRpdGxlIiwicmV0IiwibGVuZ3RoIiwiU2VsZWN0IiwiZXZlbnQiLCJ2YWwiLCJ0YXJnZXQiLCJzZXRTdGF0ZSIsImlucHV0VmFsdWUiLCJvcGVuIiwiZ2V0VmFsdWUiLCJzdGF0ZSIsIm9uU2VhcmNoIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiZ2V0SW5wdXRET01Ob2RlIiwic2V0VGltZW91dCIsInNldE9wZW5TdGF0ZSIsInVuZGVmaW5lZCIsImtleUNvZGUiLCJvbklucHV0S2V5RG93biIsIktleUNvZGUiLCJFTlRFUiIsIkRPV04iLCJwcmV2ZW50RGVmYXVsdCIsIkJBQ0tTUEFDRSIsImNvbmNhdCIsInBvcFZhbHVlIiwicG9wIiwicmVtb3ZlU2VsZWN0ZWQiLCJpc0xhYmVsSW5WYWx1ZSIsIm9wZW5JZkhhc0NoaWxkcmVuIiwic3RvcFByb3BhZ2F0aW9uIiwiRVNDIiwic2VsZWN0ZWRLZXlzIiwiaW5mbyIsIm5vZGUiLCJzZWxlY3RlZFZhbHVlIiwic2VsZWN0ZWRMYWJlbCIsImdldExhYmVsRnJvbU5vZGUiLCJjaGVja2FibGVTZWxlY3QiLCJzZWxlY3RlZCIsIm9uRGVzZWxlY3QiLCJvblNlbGVjdCIsImNoZWNrRXZ0IiwiY2xlYXJTZWFyY2hJbnB1dCIsImdldENoZWNrZWROb2RlcyIsIm4iLCJzb21lIiwiaSIsImV4dHJhSW5mbyIsInRyaWdnZXJWYWx1ZSIsInRyaWdnZXJOb2RlIiwiY2hlY2tlZCIsImFsbENoZWNrZWROb2RlcyIsInRyZWVDaGVja1N0cmljdGx5IiwiY2hlY2tlZE5vZGVzIiwiY2hlY2tlZE5vZGVzUG9zaXRpb25zIiwiX2NoZWNrZWROb2RlcyIsIl90cmVlIiwidHJpZ2dlciIsInBvcHVwRWxlIiwiX3RyZWVOb2Rlc1N0YXRlcyIsImNoZWNrS2V5cyIsImZpcmVDaGFuZ2UiLCJmb2N1cyIsIl9jYWNoZVRyZWVOb2Rlc1N0YXRlcyIsImZvcmNlUG9wdXBBbGlnbiIsImUiLCJvbkRyb3Bkb3duVmlzaWJsZUNoYW5nZSIsInBsYWNlaG9sZGVyIiwicHJlZml4Q2xzIiwiZGVmYXVsdFZhbHVlIiwicmVuZGVyZWRUcmVlRGF0YSIsInJlbmRlclRyZWVEYXRhIiwiYWRkTGFiZWxUb1ZhbHVlIiwiZGVmYXVsdE9wZW4iLCJmb2N1c2VkIiwiYXV0b0ZvY3VzIiwiaW5wdXROb2RlIiwic3R5bGUiLCJ3aWR0aCIsImlucHV0TWlycm9ySW5zdGFuY2UiLCJjbGllbnRXaWR0aCIsIm5leHRQcm9wcyIsIl9zYXZlZFZhbHVlIiwidHJlZURhdGEiLCJjbGVhckRlbGF5VGltZXIiLCJkcm9wZG93bkNvbnRhaW5lciIsImJvZHkiLCJyZW1vdmVDaGlsZCIsInRyZWVOb2RlTGFiZWxQcm9wIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiaGlkZGVuIiwic2VhcmNoUGxhY2Vob2xkZXIiLCJkaXNwbGF5Iiwib25QbGFjZWhvbGRlckNsaWNrIiwib25JbnB1dENoYW5nZSIsImdldFNlYXJjaFBsYWNlaG9sZGVyRWxlbWVudCIsImlucHV0SW5zdGFuY2UiLCJnZXRQb3B1cERPTU5vZGUiLCJnZXRQb3B1cEVsZVJlZnMiLCJfcHJvcHMiLCJpbml0IiwiX3N0cmljdCIsImhhbGZDaGVja2VkVmFsdWVzIiwiZm9yRWFjaCIsImhhbGZDaGVja2VkIiwicHVzaCIsImNoZWNrZWRUcmVlTm9kZXMiLCJfY2FjaGV0cmVlRGF0YSIsIm1hcExhYlZhbCIsImFyciIsIml0ZW1PYmoiLCJjaGVja2VkVmFsdWVzIiwic2hvd0NoZWNrZWRTdHJhdGVneSIsIlNIT1dfQUxMIiwiU0hPV19QQVJFTlQiLCJwb3NBcnIiLCJmaWx0ZXIiLCJ1bkNoZWNrUG9zIiwibmV3VmFscyIsIm5ld0NrVG5zIiwibnYiLCJjbGVhciIsIm5lZWRGb2N1cyIsImRvY3VtZW50Q2xpY2tDbG9zZSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsInNlbGVjdGlvbiIsInZhbHVlXyIsInYiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJnZXRMYWJlbEZyb21Qcm9wcyIsImRlbGF5VGltZXIiLCJjbGVhclRpbWVvdXQiLCJzZWxlY3RlZFZhbCIsImdldERlc2VsZWN0ZWRWYWx1ZSIsInNpbmdsZVZhbHVlIiwiY2FuTXVsdGlwbGUiLCJDaGlsZHJlbiIsImNvdW50IiwidmFscyIsInN2IiwiZXZlcnkiLCJleCIsInByZVZhbHVlIiwibGFicyIsInZscyIsIl92bHMiLCJpaSIsImluY2x1ZGVWYWwiLCJpbmQiLCJzcGxpY2UiLCJvbkNoYW5nZSIsImxhYmVsSW5WYWx1ZSIsImJsdXIiLCJhbGxvd0NsZWFyIiwiVU5TRUxFQ1RBQkxFX1NUWUxFIiwiVU5TRUxFQ1RBQkxFX0FUVFJJQlVURSIsIm9uQ2xlYXJTZWxlY3Rpb24iLCJwcmV2ZW50RGVmYXVsdEV2ZW50IiwiY2hvaWNlVHJhbnNpdGlvbk5hbWUiLCJtYXhUYWdUZXh0TGVuZ3RoIiwiY2hvaWNlUmVuZGVyIiwibXVsdGlwbGUiLCJpbm5lck5vZGUiLCJnZXRQbGFjZWhvbGRlckVsZW1lbnQiLCJyZW5kZXJDbGVhciIsInNob3dBcnJvdyIsIm9uQXJyb3dDbGljayIsInNlbGVjdGVkVmFsdWVOb2RlcyIsImNvbnRlbnQiLCJzbGljZSIsImJpbmQiLCJnZXRJbnB1dEVsZW1lbnQiLCJjbGFzc05hbWUiLCJvbkNob2ljZUFuaW1hdGlvbkxlYXZlIiwidmFsaWRQcm9wcyIsInRyZWVEYXRhU2ltcGxlTW9kZSIsInNpbXBsZUZvcm1hdCIsImlkIiwicElkIiwicm9vdFBJZCIsImluY2x1ZGVzIiwiY3RybE5vZGUiLCJyZW5kZXJUb3BDb250cm9sTm9kZSIsImV4dHJhU2VsZWN0aW9uUHJvcHMiLCJvbktleURvd24iLCJ0YWJJbmRleCIsInJvb3RDbHMiLCJnZXRQb3B1cENvbnRhaW5lciIsIm9uQ2xpY2siLCJvbkJsdXIiLCJvbkZvY3VzIiwiZ2V0VW5kZXJMaW5lIiwiQ29tcG9uZW50IiwiU2VsZWN0UHJvcFR5cGVzIiwiZmlsdGVyVHJlZU5vZGUiLCJzaG93U2VhcmNoIiwibm9vcCIsImRyb3Bkb3duTWF0Y2hTZWxlY3RXaWR0aCIsImRyb3Bkb3duU3R5bGUiLCJvcHRpb25MYWJlbFByb3AiLCJub3RGb3VuZENvbnRlbnQiLCJTSE9XX0NISUxEIiwidHJlZUljb24iLCJ0cmVlTGluZSIsInRyZWVEZWZhdWx0RXhwYW5kQWxsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFrQkE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0EsU0FBU0EsUUFBVCxDQUFrQkMsS0FBbEIsRUFBeUJDLEtBQXpCLEVBQWdDO0FBQzlCLFNBQ0VDLE1BQU0sQ0FBQyx3QkFBYUQsS0FBYixFQUFvQiwyQkFBZ0IsS0FBS0UsS0FBTCxDQUFXQyxrQkFBM0IsQ0FBcEIsQ0FBRCxDQUFOLENBQTRFQyxPQUE1RSxDQUFvRkwsS0FBcEYsSUFBNkYsQ0FBQyxDQURoRztBQUdEOztBQUVELFNBQVNNLFlBQVQsQ0FBc0JDLElBQXRCLEVBQXNEO0FBQUEsTUFBMUJDLEtBQTBCLHVFQUFsQixDQUFrQjtBQUFBLE1BQWZDLGFBQWU7QUFDcEQsU0FBT0YsSUFBSSxDQUFDRyxHQUFMLENBQVMsVUFBQ0MsSUFBRCxFQUFPQyxLQUFQLEVBQWlCO0FBQy9CLFFBQU1DLEdBQUcsYUFBTUwsS0FBTixjQUFlSSxLQUFmLENBQVQ7QUFEK0IsUUFHN0JF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QUEsZUFBZSxFQUFFLE9BbkJHO0FBb0JwQkMsRUFBQUEsZUFBZSxFQUFFLFdBcEJHO0FBcUJwQjdGLEVBQUFBLG1CQUFtQixFQUFFOEYsc0JBckJEO0FBc0JwQjtBQUNBM0osRUFBQUEsaUJBQWlCLEVBQUUsS0F2QkM7QUF3QnBCNEosRUFBQUEsUUFBUSxFQUFFLEtBeEJVO0FBeUJwQkMsRUFBQUEsUUFBUSxFQUFFLEtBekJVO0FBMEJwQjVCLEVBQUFBLGtCQUFrQixFQUFFLEtBMUJBO0FBMkJwQjZCLEVBQUFBLG9CQUFvQixFQUFFLEtBM0JGO0FBNEJwQm5PLEVBQUFBLGFBQWEsRUFBRSxLQTVCSztBQTZCcEJMLEVBQUFBLGtCQUFrQixFQUFFLE9BN0JBO0FBOEJwQjhHLEVBQUFBLGlCQUFpQixFQUFFO0FBOUJDLEM7aUNBSEh4RixNLGNBb0NEa0gsb0I7aUNBcENDbEgsTSxpQkFxQ0VtSCx1QjtpQ0FyQ0ZuSCxNLGdCQXNDQytNLHNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENoaWxkcmVuLCBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1bm1vdW50Q29tcG9uZW50QXROb2RlIH0gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG5vb3AgZnJvbSAnbG9kYXNoL25vb3AnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vLi4vX3V0aWwvS2V5Q29kZSc7XG5pbXBvcnQgQW5pbWF0ZSBmcm9tICcuLi8uLi9hbmltYXRlJztcbmltcG9ydCB7XG4gIGZpbHRlckFsbENoZWNrZWREYXRhLFxuICBmaWx0ZXJQYXJlbnRQb3NpdGlvbixcbiAgZmxhdFRvSGllcmFyY2h5LFxuICBnZXRQcm9wVmFsdWUsXG4gIGdldFRyZWVOb2Rlc1N0YXRlcyxcbiAgZ2V0VmFsdWVQcm9wVmFsdWUsXG4gIGlzTXVsdGlwbGUsXG4gIGlzUG9zaXRpb25QcmVmaXgsXG4gIGxhYmVsQ29tcGF0aWJsZSxcbiAgbG9vcEFsbENoaWxkcmVuLFxuICBwcmV2ZW50RGVmYXVsdEV2ZW50LFxuICBwcm9jZXNzU2ltcGxlVHJlZURhdGEsXG4gIHNhdmVSZWYsXG4gIHRvQXJyYXksXG4gIFVOU0VMRUNUQUJMRV9BVFRSSUJVVEUsXG4gIFVOU0VMRUNUQUJMRV9TVFlMRSxcbn0gZnJvbSAnLi91dGlsJztcbmltcG9ydCBTZWxlY3RUcmlnZ2VyIGZyb20gJy4vU2VsZWN0VHJpZ2dlcic7XG5pbXBvcnQgX1RyZWVOb2RlIGZyb20gJy4vVHJlZU5vZGUnO1xuaW1wb3J0IHsgU0hPV19BTEwsIFNIT1dfQ0hJTEQsIFNIT1dfUEFSRU5UIH0gZnJvbSAnLi9zdHJhdGVnaWVzJztcbmltcG9ydCB7IFNlbGVjdFByb3BUeXBlcyB9IGZyb20gJy4vUHJvcFR5cGVzJztcbmltcG9ydCBCdXR0b24gZnJvbSAnLi4vLi4vYnV0dG9uL0J1dHRvbic7XG5pbXBvcnQgeyBnZXRMYWJlbEZyb21Qcm9wc1ZhbHVlLCBnZXRNYXBLZXkgfSBmcm9tICcuLi9zZWxlY3QvdXRpbCc7XG5cbmZ1bmN0aW9uIGZpbHRlckZuKGlucHV0LCBjaGlsZCkge1xuICByZXR1cm4gKFxuICAgIFN0cmluZyhnZXRQcm9wVmFsdWUoY2hpbGQsIGxhYmVsQ29tcGF0aWJsZSh0aGlzLnByb3BzLnRyZWVOb2RlRmlsdGVyUHJvcCkpKS5pbmRleE9mKGlucHV0KSA+IC0xXG4gICk7XG59XG5cbmZ1bmN0aW9uIGxvb3BUcmVlRGF0YShkYXRhLCBsZXZlbCA9IDAsIHRyZWVDaGVja2FibGUpIHtcbiAgcmV0dXJuIGRhdGEubWFwKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IHBvcyA9IGAke2xldmVsfS0ke2luZGV4fWA7XG4gICAgY29uc3Qge1xuICAgICAgbGFiZWwsXG4gICAgICB2YWx1ZSxcbiAgICAgIGRpc2FibGVkLFxuICAgICAga2V5LFxuICAgICAgaGFzT3duUHJvcGVydHksXG4gICAgICBzZWxlY3RhYmxlLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICBpc0xlYWYsXG4gICAgICAuLi5vdGhlclByb3BzXG4gICAgfSA9IGl0ZW07XG4gICAgY29uc3QgcHJvcHMgPSB7XG4gICAgICB2YWx1ZSxcbiAgICAgIHRpdGxlOiBsYWJlbCxcbiAgICAgIC8vIHZhbHVlOiB2YWx1ZSB8fCBTdHJpbmcoa2V5IHx8IGxhYmVsKSwgLy8gY2F1c2Ugb25DaGFuZ2UgY2FsbGJhY2sgZXJyb3JcbiAgICAgIGtleToga2V5IHx8IHZhbHVlIHx8IHBvcyxcbiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCB8fCBmYWxzZSxcbiAgICAgIHNlbGVjdGFibGU6IHNlbGVjdGFibGUgPT09IGZhbHNlID8gc2VsZWN0YWJsZSA6ICF0cmVlQ2hlY2thYmxlLFxuICAgICAgLi4ub3RoZXJQcm9wcyxcbiAgICB9O1xuICAgIGxldCByZXQ7XG4gICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgcmV0ID0gPF9UcmVlTm9kZSB7Li4ucHJvcHN9Pntsb29wVHJlZURhdGEoY2hpbGRyZW4sIHBvcywgdHJlZUNoZWNrYWJsZSl9PC9fVHJlZU5vZGU+O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXQgPSA8X1RyZWVOb2RlIHsuLi5wcm9wc30gaXNMZWFmPXtpc0xlYWZ9IC8+O1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VsZWN0IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IFNlbGVjdFByb3BUeXBlcztcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIHByZWZpeENsczogJ3JjLXRyZWUtc2VsZWN0JyxcbiAgICBmaWx0ZXJUcmVlTm9kZTogZmlsdGVyRm4sXG4gICAgc2hvd1NlYXJjaDogdHJ1ZSxcbiAgICBhbGxvd0NsZWFyOiBmYWxzZSxcbiAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgc2VhcmNoUGxhY2Vob2xkZXI6ICcnLFxuICAgIGxhYmVsSW5WYWx1ZTogZmFsc2UsXG4gICAgb25DbGljazogbm9vcCxcbiAgICBvbkNoYW5nZTogbm9vcCxcbiAgICBvblNlbGVjdDogbm9vcCxcbiAgICBvbkRlc2VsZWN0OiBub29wLFxuICAgIG9uU2VhcmNoOiBub29wLFxuICAgIHNob3dBcnJvdzogdHJ1ZSxcbiAgICBkcm9wZG93bk1hdGNoU2VsZWN0V2lkdGg6IHRydWUsXG4gICAgZHJvcGRvd25TdHlsZToge30sXG4gICAgb25Ecm9wZG93blZpc2libGVDaGFuZ2U6ICgpID0+IHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgb3B0aW9uTGFiZWxQcm9wOiAndmFsdWUnLFxuICAgIG5vdEZvdW5kQ29udGVudDogJ05vdCBGb3VuZCcsXG4gICAgc2hvd0NoZWNrZWRTdHJhdGVneTogU0hPV19DSElMRCxcbiAgICAvLyBza2lwSGFuZGxlSW5pdFZhbHVlOiBmYWxzZSwgLy8gRGVwcmVjYXRlZCAodXNlIHRyZWVDaGVja1N0cmljdGx5KVxuICAgIHRyZWVDaGVja1N0cmljdGx5OiBmYWxzZSxcbiAgICB0cmVlSWNvbjogZmFsc2UsXG4gICAgdHJlZUxpbmU6IGZhbHNlLFxuICAgIHRyZWVEYXRhU2ltcGxlTW9kZTogZmFsc2UsXG4gICAgdHJlZURlZmF1bHRFeHBhbmRBbGw6IGZhbHNlLFxuICAgIHRyZWVDaGVja2FibGU6IGZhbHNlLFxuICAgIHRyZWVOb2RlRmlsdGVyUHJvcDogJ3ZhbHVlJyxcbiAgICB0cmVlTm9kZUxhYmVsUHJvcDogJ3RpdGxlJyxcbiAgfTtcblxuICBzdGF0aWMgU0hPV19BTEwgPSBTSE9XX0FMTDtcbiAgc3RhdGljIFNIT1dfUEFSRU5UID0gU0hPV19QQVJFTlQ7XG4gIHN0YXRpYyBTSE9XX0NISUxEID0gU0hPV19DSElMRDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBsZXQgdmFsdWUgPSBbXTtcbiAgICBpZiAoJ3ZhbHVlJyBpbiBwcm9wcykge1xuICAgICAgdmFsdWUgPSB0b0FycmF5KHByb3BzLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSB0b0FycmF5KHByb3BzLmRlZmF1bHRWYWx1ZSk7XG4gICAgfVxuICAgIC8vIHNhdmUgcGFyc2VkIHRyZWVEYXRhLCBmb3IgcGVyZm9ybWFuY2UgKHRyZWVEYXRhIG1heSBiZSB2ZXJ5IGJpZylcbiAgICB0aGlzLnJlbmRlcmVkVHJlZURhdGEgPSB0aGlzLnJlbmRlclRyZWVEYXRhKCk7XG4gICAgdmFsdWUgPSB0aGlzLmFkZExhYmVsVG9WYWx1ZShwcm9wcywgdmFsdWUpO1xuICAgIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShwcm9wcywgdmFsdWUsIHByb3BzLmlucHV0VmFsdWUgPyAnX19zdHJpY3QnIDogdHJ1ZSk7XG4gICAgY29uc3QgaW5wdXRWYWx1ZSA9IHByb3BzLmlucHV0VmFsdWUgfHwgJyc7XG4gICAgLy8gaWYgKHByb3BzLmNvbWJvYm94KSB7XG4gICAgLy8gICBpbnB1dFZhbHVlID0gdmFsdWUubGVuZ3RoID8gU3RyaW5nKHZhbHVlWzBdLnZhbHVlKSA6ICcnO1xuICAgIC8vIH1cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdmFsdWUsXG4gICAgICBpbnB1dFZhbHVlLFxuICAgICAgb3BlbjogcHJvcHMub3BlbiB8fCBwcm9wcy5kZWZhdWx0T3BlbixcbiAgICAgIGZvY3VzZWQ6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCB7IGF1dG9Gb2N1cywgZGlzYWJsZWQgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGlzTXVsdGlwbGUodGhpcy5wcm9wcykpIHtcbiAgICAgIGNvbnN0IGlucHV0Tm9kZSA9IHRoaXMuZ2V0SW5wdXRET01Ob2RlKCk7XG4gICAgICBpZiAoaW5wdXROb2RlLnZhbHVlKSB7XG4gICAgICAgIGlucHV0Tm9kZS5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICBpbnB1dE5vZGUuc3R5bGUud2lkdGggPSBgJHt0aGlzLmlucHV0TWlycm9ySW5zdGFuY2UuY2xpZW50V2lkdGh9cHhgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5wdXROb2RlLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhdXRvRm9jdXMgJiYgIWRpc2FibGVkKSB7XG4gICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMpIHtcbiAgICAvLyBzYXZlIHBhcnNlZCB0cmVlRGF0YSwgZm9yIHBlcmZvcm1hbmNlICh0cmVlRGF0YSBtYXkgYmUgdmVyeSBiaWcpXG4gICAgdGhpcy5yZW5kZXJlZFRyZWVEYXRhID0gdGhpcy5yZW5kZXJUcmVlRGF0YShuZXh0UHJvcHMpO1xuICAgIC8vIERldGVjdGluZyB3aGV0aGVyIHRoZSBvYmplY3Qgb2YgYG9uQ2hhbmdlYCdzIGFyZ3VtZW50ICBpcyBvbGQgcmVmLlxuICAgIC8vIEJldHRlciB0byBkbyBhIGRlZXAgZXF1YWwgbGF0ZXIuXG4gICAgdGhpcy5fY2FjaGVUcmVlTm9kZXNTdGF0ZXMgPVxuICAgICAgdGhpcy5fY2FjaGVUcmVlTm9kZXNTdGF0ZXMgIT09ICdubycgJiZcbiAgICAgIHRoaXMuX3NhdmVkVmFsdWUgJiZcbiAgICAgIG5leHRQcm9wcy52YWx1ZSA9PT0gdGhpcy5fc2F2ZWRWYWx1ZTtcbiAgICBpZiAodGhpcy5wcm9wcy50cmVlRGF0YSAhPT0gbmV4dFByb3BzLnRyZWVEYXRhIHx8IHRoaXMucHJvcHMuY2hpbGRyZW4gIT09IG5leHRQcm9wcy5jaGlsZHJlbikge1xuICAgICAgLy8gcmVmcmVzaCB0aGlzLl90cmVlTm9kZXNTdGF0ZXMgY2FjaGVcbiAgICAgIHRoaXMuX3RyZWVOb2Rlc1N0YXRlcyA9IGdldFRyZWVOb2Rlc1N0YXRlcyhcbiAgICAgICAgdGhpcy5yZW5kZXJlZFRyZWVEYXRhIHx8IG5leHRQcm9wcy5jaGlsZHJlbixcbiAgICAgICAgdGhpcy5zdGF0ZS52YWx1ZS5tYXAoaXRlbSA9PiBpdGVtLnZhbHVlKSxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICgndmFsdWUnIGluIG5leHRQcm9wcykge1xuICAgICAgbGV0IHZhbHVlID0gdG9BcnJheShuZXh0UHJvcHMudmFsdWUpO1xuICAgICAgdmFsdWUgPSB0aGlzLmFkZExhYmVsVG9WYWx1ZShuZXh0UHJvcHMsIHZhbHVlKTtcbiAgICAgIHZhbHVlID0gdGhpcy5nZXRWYWx1ZShuZXh0UHJvcHMsIHZhbHVlKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB2YWx1ZSxcbiAgICAgIH0pO1xuICAgICAgLy8gaWYgKG5leHRQcm9wcy5jb21ib2JveCkge1xuICAgICAgLy8gICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIC8vICAgICBpbnB1dFZhbHVlOiB2YWx1ZS5sZW5ndGggPyBTdHJpbmcodmFsdWVbMF0ua2V5KSA6ICcnLFxuICAgICAgLy8gICB9KTtcbiAgICAgIC8vIH1cbiAgICB9XG4gICAgaWYgKG5leHRQcm9wcy5pbnB1dFZhbHVlICE9PSB0aGlzLnByb3BzLmlucHV0VmFsdWUpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBpbnB1dFZhbHVlOiBuZXh0UHJvcHMuaW5wdXRWYWx1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoJ29wZW4nIGluIG5leHRQcm9wcykge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIG9wZW46IG5leHRQcm9wcy5vcGVuLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVwZGF0ZShuZXh0UHJvcHMpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLl9zYXZlZFZhbHVlICYmXG4gICAgICBuZXh0UHJvcHMudmFsdWUgJiZcbiAgICAgIG5leHRQcm9wcy52YWx1ZSAhPT0gdGhpcy5fc2F2ZWRWYWx1ZSAmJlxuICAgICAgbmV4dFByb3BzLnZhbHVlID09PSB0aGlzLnByb3BzLnZhbHVlXG4gICAgKSB7XG4gICAgICB0aGlzLl9jYWNoZVRyZWVOb2Rlc1N0YXRlcyA9IGZhbHNlO1xuICAgICAgdGhpcy5nZXRWYWx1ZShuZXh0UHJvcHMsIHRoaXMuYWRkTGFiZWxUb1ZhbHVlKG5leHRQcm9wcywgdG9BcnJheShuZXh0UHJvcHMudmFsdWUpKSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHN0YXRlLm9wZW4gJiYgaXNNdWx0aXBsZShwcm9wcykpIHtcbiAgICAgIGNvbnN0IGlucHV0Tm9kZSA9IHRoaXMuZ2V0SW5wdXRET01Ob2RlKCk7XG4gICAgICBpZiAoaW5wdXROb2RlLnZhbHVlKSB7XG4gICAgICAgIGlucHV0Tm9kZS5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICBpbnB1dE5vZGUuc3R5bGUud2lkdGggPSBgJHt0aGlzLmlucHV0TWlycm9ySW5zdGFuY2UuY2xpZW50V2lkdGh9cHhgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5wdXROb2RlLnN0eWxlLndpZHRoID0gJyc7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jbGVhckRlbGF5VGltZXIoKTtcbiAgICBpZiAodGhpcy5kcm9wZG93bkNvbnRhaW5lcikge1xuICAgICAgdW5tb3VudENvbXBvbmVudEF0Tm9kZSh0aGlzLmRyb3Bkb3duQ29udGFpbmVyKTtcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5kcm9wZG93bkNvbnRhaW5lcik7XG4gICAgICB0aGlzLmRyb3Bkb3duQ29udGFpbmVyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBvbklucHV0Q2hhbmdlID0gZXZlbnQgPT4ge1xuICAgIGNvbnN0IHZhbCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgaW5wdXRWYWx1ZTogdmFsLFxuICAgICAgb3BlbjogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAocHJvcHMudHJlZUNoZWNrYWJsZSAmJiAhdmFsKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZ2V0VmFsdWUocHJvcHMsIFsuLi50aGlzLnN0YXRlLnZhbHVlXSwgZmFsc2UpLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHByb3BzLm9uU2VhcmNoKHZhbCk7XG4gIH07XG5cbiAgb25Ecm9wZG93blZpc2libGVDaGFuZ2UgPSBvcGVuID0+IHtcbiAgICAvLyBzZWxlY3Rpb24gaW5zaWRlIGNvbWJvYm94IGNhdXNlIGNsaWNrXG4gICAgaWYgKCFvcGVuICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IHRoaXMuZ2V0SW5wdXRET01Ob2RlKCkpIHtcbiAgICAgIC8vIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhpcy5zZXRPcGVuU3RhdGUob3Blbik7XG4gICAgLy8gc2V0VGltZW91dCwgdGhlbiBoYXZlIGFuaW1hdGlvbi4gd2h5P1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5zZXRPcGVuU3RhdGUob3BlbiwgdW5kZWZpbmVkLCAhb3Blbik7XG4gICAgfSwgMTApO1xuICB9O1xuXG4gIC8vIGNvbWJvYm94IGlnbm9yZVxuICBvbktleURvd24gPSBldmVudCA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGlmIChwcm9wcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICBpZiAodGhpcy5zdGF0ZS5vcGVuICYmICF0aGlzLmdldElucHV0RE9NTm9kZSgpKSB7XG4gICAgICB0aGlzLm9uSW5wdXRLZXlEb3duKGV2ZW50KTtcbiAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IEtleUNvZGUuRU5URVIgfHwga2V5Q29kZSA9PT0gS2V5Q29kZS5ET1dOKSB7XG4gICAgICB0aGlzLnNldE9wZW5TdGF0ZSh0cnVlKTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9O1xuXG4gIG9uSW5wdXRLZXlEb3duID0gZXZlbnQgPT4ge1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBpZiAocHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgIGlmIChpc011bHRpcGxlKHByb3BzKSAmJiAhZXZlbnQudGFyZ2V0LnZhbHVlICYmIGtleUNvZGUgPT09IEtleUNvZGUuQkFDS1NQQUNFKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHN0YXRlLnZhbHVlLmNvbmNhdCgpO1xuICAgICAgaWYgKHZhbHVlLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwb3BWYWx1ZSA9IHZhbHVlLnBvcCgpO1xuICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkKHRoaXMuaXNMYWJlbEluVmFsdWUoKSA/IHBvcFZhbHVlIDogcG9wVmFsdWUudmFsdWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5ET1dOKSB7XG4gICAgICBpZiAoIXN0YXRlLm9wZW4pIHtcbiAgICAgICAgdGhpcy5vcGVuSWZIYXNDaGlsZHJlbigpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gS2V5Q29kZS5FU0MpIHtcbiAgICAgIGlmIChzdGF0ZS5vcGVuKSB7XG4gICAgICAgIHRoaXMuc2V0T3BlblN0YXRlKGZhbHNlKTtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIG9uU2VsZWN0ID0gKHNlbGVjdGVkS2V5cywgaW5mbykgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBpbmZvLm5vZGU7XG4gICAgbGV0IHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZTtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgc2VsZWN0ZWRWYWx1ZSA9IGdldFZhbHVlUHJvcFZhbHVlKGl0ZW0pO1xuICAgIGNvbnN0IHNlbGVjdGVkTGFiZWwgPSB0aGlzLmdldExhYmVsRnJvbU5vZGUoaXRlbSk7XG4gICAgY29uc3QgY2hlY2thYmxlU2VsZWN0ID0gcHJvcHMudHJlZUNoZWNrYWJsZSAmJiBpbmZvLmV2ZW50ID09PSAnc2VsZWN0JztcbiAgICBsZXQgZXZlbnQgPSBzZWxlY3RlZFZhbHVlO1xuICAgIGlmICh0aGlzLmlzTGFiZWxJblZhbHVlKCkpIHtcbiAgICAgIGV2ZW50ID0ge1xuICAgICAgICB2YWx1ZTogZXZlbnQsXG4gICAgICAgIGxhYmVsOiBzZWxlY3RlZExhYmVsLFxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGluZm8uc2VsZWN0ZWQgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLm9uRGVzZWxlY3QoaW5mbyk7XG4gICAgICBpZiAoIWNoZWNrYWJsZVNlbGVjdCkgcmV0dXJuO1xuICAgIH1cbiAgICBwcm9wcy5vblNlbGVjdChldmVudCwgaXRlbSwgaW5mbyk7XG5cbiAgICBjb25zdCBjaGVja0V2dCA9IGluZm8uZXZlbnQgPT09ICdjaGVjayc7XG4gICAgaWYgKGlzTXVsdGlwbGUocHJvcHMpKSB7XG4gICAgICB0aGlzLmNsZWFyU2VhcmNoSW5wdXQoKTtcbiAgICAgIGlmIChjaGVja0V2dCkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0Q2hlY2tlZE5vZGVzKGluZm8sIHByb3BzKS5tYXAobiA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZVByb3BWYWx1ZShuKSxcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmdldExhYmVsRnJvbU5vZGUobiksXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodmFsdWUuc29tZShpID0+IGkudmFsdWUgPT09IHNlbGVjdGVkVmFsdWUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdmFsdWUuY29uY2F0KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZTogc2VsZWN0ZWRWYWx1ZSxcbiAgICAgICAgICAgIGxhYmVsOiBzZWxlY3RlZExhYmVsLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodmFsdWUubGVuZ3RoICYmIHZhbHVlWzBdLnZhbHVlID09PSBzZWxlY3RlZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0T3BlblN0YXRlKGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB2YWx1ZTogc2VsZWN0ZWRWYWx1ZSxcbiAgICAgICAgICBsYWJlbDogc2VsZWN0ZWRMYWJlbCxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgICB0aGlzLnNldE9wZW5TdGF0ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXh0cmFJbmZvID0ge1xuICAgICAgdHJpZ2dlclZhbHVlOiBzZWxlY3RlZFZhbHVlLFxuICAgICAgdHJpZ2dlck5vZGU6IGl0ZW0sXG4gICAgfTtcbiAgICBpZiAoY2hlY2tFdnQpIHtcbiAgICAgIGV4dHJhSW5mby5jaGVja2VkID0gaW5mby5jaGVja2VkO1xuICAgICAgLy8gaWYgaW5wdXRWYWx1ZSBleGlzdGluZywgdHJlZSBpcyBjaGVja1N0cmljdGx5XG4gICAgICBleHRyYUluZm8uYWxsQ2hlY2tlZE5vZGVzID1cbiAgICAgICAgcHJvcHMudHJlZUNoZWNrU3RyaWN0bHkgfHwgdGhpcy5zdGF0ZS5pbnB1dFZhbHVlXG4gICAgICAgICAgPyBpbmZvLmNoZWNrZWROb2Rlc1xuICAgICAgICAgIDogZmxhdFRvSGllcmFyY2h5KGluZm8uY2hlY2tlZE5vZGVzUG9zaXRpb25zKTtcbiAgICAgIHRoaXMuX2NoZWNrZWROb2RlcyA9IGluZm8uY2hlY2tlZE5vZGVzUG9zaXRpb25zO1xuICAgICAgY29uc3QgX3RyZWUgPSB0aGlzLnRyaWdnZXIucG9wdXBFbGU7XG4gICAgICB0aGlzLl90cmVlTm9kZXNTdGF0ZXMgPSBfdHJlZS5jaGVja0tleXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4dHJhSW5mby5zZWxlY3RlZCA9IGluZm8uc2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5maXJlQ2hhbmdlKHZhbHVlLCBleHRyYUluZm8pO1xuICAgIGlmIChwcm9wcy5pbnB1dFZhbHVlID09PSBudWxsKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgaW5wdXRWYWx1ZTogJycsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgb25EZXNlbGVjdCA9IGluZm8gPT4ge1xuICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWQoZ2V0VmFsdWVQcm9wVmFsdWUoaW5mby5ub2RlKSk7XG4gICAgaWYgKCFpc011bHRpcGxlKHRoaXMucHJvcHMpKSB7XG4gICAgICB0aGlzLnNldE9wZW5TdGF0ZShmYWxzZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2xlYXJTZWFyY2hJbnB1dCgpO1xuICAgIH1cbiAgfTtcblxuICBvblBsYWNlaG9sZGVyQ2xpY2sgPSAoKSA9PiB7XG4gICAgdGhpcy5nZXRJbnB1dERPTU5vZGUoKS5mb2N1cygpO1xuICB9O1xuXG4gIG9uQ2xlYXJTZWxlY3Rpb24gPSBldmVudCA9PiB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAocHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5fY2FjaGVUcmVlTm9kZXNTdGF0ZXMgPSAnbm8nO1xuICAgIHRoaXMuX2NoZWNrZWROb2RlcyA9IFtdO1xuICAgIGlmIChzdGF0ZS5pbnB1dFZhbHVlIHx8IHN0YXRlLnZhbHVlLmxlbmd0aCkge1xuICAgICAgdGhpcy5zZXRPcGVuU3RhdGUoZmFsc2UpO1xuICAgICAgaWYgKHR5cGVvZiBwcm9wcy5pbnB1dFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlucHV0VmFsdWU6ICcnLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5maXJlQ2hhbmdlKFtdKTtcbiAgICAgICAgICB9LFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5maXJlQ2hhbmdlKFtdKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgb25DaG9pY2VBbmltYXRpb25MZWF2ZSA9ICgpID0+IHtcbiAgICB0aGlzLnRyaWdnZXIudHJpZ2dlci5mb3JjZVBvcHVwQWxpZ24oKTtcbiAgfTtcblxuICBnZXRMYWJlbEZyb21Ob2RlKGNoaWxkKSB7XG4gICAgcmV0dXJuIGdldFByb3BWYWx1ZShjaGlsZCwgdGhpcy5wcm9wcy50cmVlTm9kZUxhYmVsUHJvcCk7XG4gIH1cblxuICBnZXRMYWJlbEZyb21Qcm9wcyhwcm9wcywgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBsYWJlbCA9IG51bGw7XG4gICAgbG9vcEFsbENoaWxkcmVuKHRoaXMucmVuZGVyZWRUcmVlRGF0YSB8fCBwcm9wcy5jaGlsZHJlbiwgaXRlbSA9PiB7XG4gICAgICBpZiAoZ2V0VmFsdWVQcm9wVmFsdWUoaXRlbSkgPT09IHZhbHVlKSB7XG4gICAgICAgIGxhYmVsID0gdGhpcy5nZXRMYWJlbEZyb21Ob2RlKGl0ZW0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChsYWJlbCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbGFiZWw7XG4gIH1cblxuICBnZXREcm9wZG93bkNvbnRhaW5lcigpIHtcbiAgICBpZiAoIXRoaXMuZHJvcGRvd25Db250YWluZXIpIHtcbiAgICAgIHRoaXMuZHJvcGRvd25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kcm9wZG93bkNvbnRhaW5lcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duQ29udGFpbmVyO1xuICB9XG5cbiAgZ2V0U2VhcmNoUGxhY2Vob2xkZXJFbGVtZW50KGhpZGRlbikge1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBsZXQgcGxhY2Vob2xkZXI7XG4gICAgaWYgKGlzTXVsdGlwbGUocHJvcHMpKSB7XG4gICAgICBwbGFjZWhvbGRlciA9IHByb3BzLnBsYWNlaG9sZGVyIHx8IHByb3BzLnNlYXJjaFBsYWNlaG9sZGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGFjZWhvbGRlciA9IHByb3BzLnNlYXJjaFBsYWNlaG9sZGVyO1xuICAgIH1cbiAgICBpZiAocGxhY2Vob2xkZXIpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogaGlkZGVuID8gJ25vbmUnIDogJ2Jsb2NrJyB9fVxuICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25QbGFjZWhvbGRlckNsaWNrfVxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJvcHMucHJlZml4Q2xzfS1zZWFyY2hfX2ZpZWxkX19wbGFjZWhvbGRlcmB9XG4gICAgICAgID5cbiAgICAgICAgICB7cGxhY2Vob2xkZXJ9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZ2V0SW5wdXRFbGVtZW50KCkge1xuICAgIGNvbnN0IHsgaW5wdXRWYWx1ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IHByZWZpeENscywgZGlzYWJsZWQgfSA9IHRoaXMucHJvcHM7XG4gICAgcmV0dXJuIChcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1zZWFyY2hfX2ZpZWxkX193cmFwYH0+XG4gICAgICAgIDxpbnB1dFxuICAgICAgICAgIHJlZj17c2F2ZVJlZih0aGlzLCAnaW5wdXRJbnN0YW5jZScpfVxuICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uSW5wdXRDaGFuZ2V9XG4gICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uSW5wdXRLZXlEb3dufVxuICAgICAgICAgIHZhbHVlPXtpbnB1dFZhbHVlfVxuICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VhcmNoX19maWVsZGB9XG4gICAgICAgICAgcm9sZT1cInRleHRib3hcIlxuICAgICAgICAvPlxuICAgICAgICA8c3BhblxuICAgICAgICAgIHJlZj17c2F2ZVJlZih0aGlzLCAnaW5wdXRNaXJyb3JJbnN0YW5jZScpfVxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1zZWFyY2hfX2ZpZWxkX19taXJyb3JgfVxuICAgICAgICA+XG4gICAgICAgICAge2lucHV0VmFsdWV9Jm5ic3A7XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAge2lzTXVsdGlwbGUodGhpcy5wcm9wcykgPyBudWxsIDogdGhpcy5nZXRTZWFyY2hQbGFjZWhvbGRlckVsZW1lbnQoISFpbnB1dFZhbHVlKX1cbiAgICAgIDwvc3Bhbj5cbiAgICApO1xuICB9XG5cbiAgZ2V0SW5wdXRET01Ob2RlKCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0SW5zdGFuY2U7XG4gIH1cblxuICBnZXRQb3B1cERPTU5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpZ2dlci5nZXRQb3B1cERPTU5vZGUoKTtcbiAgfVxuXG4gIGdldFBvcHVwQ29tcG9uZW50UmVmcygpIHtcbiAgICByZXR1cm4gdGhpcy50cmlnZ2VyLmdldFBvcHVwRWxlUmVmcygpO1xuICB9XG5cbiAgZ2V0VmFsdWUoX3Byb3BzLCB2YWwsIGluaXQgPSB0cnVlKSB7XG4gICAgbGV0IHZhbHVlID0gdmFsO1xuICAgIC8vIGlmIGlucHV0VmFsdWUgZXhpc3RpbmcsIHRyZWUgaXMgY2hlY2tTdHJpY3RseVxuICAgIGNvbnN0IF9zdHJpY3QgPVxuICAgICAgaW5pdCA9PT0gJ19fc3RyaWN0JyB8fFxuICAgICAgKGluaXQgJiZcbiAgICAgICAgKCh0aGlzLnN0YXRlICYmIHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSkgfHwgdGhpcy5wcm9wcy5pbnB1dFZhbHVlICE9PSBfcHJvcHMuaW5wdXRWYWx1ZSkpO1xuICAgIGlmIChfcHJvcHMudHJlZUNoZWNrYWJsZSAmJiAoX3Byb3BzLnRyZWVDaGVja1N0cmljdGx5IHx8IF9zdHJpY3QpKSB7XG4gICAgICB0aGlzLmhhbGZDaGVja2VkVmFsdWVzID0gW107XG4gICAgICB2YWx1ZSA9IFtdO1xuICAgICAgdmFsLmZvckVhY2goaSA9PiB7XG4gICAgICAgIGlmICghaS5oYWxmQ2hlY2tlZCkge1xuICAgICAgICAgIHZhbHVlLnB1c2goaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oYWxmQ2hlY2tlZFZhbHVlcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gaWYgKCEoX3Byb3BzLnRyZWVDaGVja2FibGUgJiYgIV9wcm9wcy50cmVlQ2hlY2tTdHJpY3RseSkpIHtcbiAgICBpZiAoXG4gICAgICAhISFfcHJvcHMudHJlZUNoZWNrYWJsZSB8fFxuICAgICAgKF9wcm9wcy50cmVlQ2hlY2thYmxlICYmIChfcHJvcHMudHJlZUNoZWNrU3RyaWN0bHkgfHwgX3N0cmljdCkpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGxldCBjaGVja2VkVHJlZU5vZGVzO1xuICAgIGlmIChcbiAgICAgIHRoaXMuX2NhY2hldHJlZURhdGEgJiZcbiAgICAgIHRoaXMuX2NhY2hlVHJlZU5vZGVzU3RhdGVzICYmXG4gICAgICB0aGlzLl9jaGVja2VkTm9kZXMgJiZcbiAgICAgIHRoaXMuc3RhdGUgJiZcbiAgICAgICF0aGlzLnN0YXRlLmlucHV0VmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuY2hlY2tlZFRyZWVOb2RlcyA9IGNoZWNrZWRUcmVlTm9kZXMgPSB0aGlzLl9jaGVja2VkTm9kZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qKlxuICAgICAgICogTm90ZTogYHRoaXMuX3RyZWVOb2Rlc1N0YXRlc2AncyB0cmVlTm9kZXNTdGF0ZXMgbXVzdCBjb3JyZXNwb25kIHRvIG5vZGVzIG9mIHRoZVxuICAgICAgICogZmluYWwgdHJlZSAoYHByb2Nlc3NUcmVlTm9kZWAgZnVuY3Rpb24gZnJvbSBTZWxlY3RUcmlnZ2VyLmpzeCBwcm9kdWNlIHRoZSBmaW5hbCB0cmVlKS5cbiAgICAgICAqXG4gICAgICAgKiBBbmQsIGB0aGlzLl90cmVlTm9kZXNTdGF0ZXNgIGZyb20gYG9uU2VsZWN0YCBpcyBwcmV2aW91cyB2YWx1ZSxcbiAgICAgICAqIHNvIGl0IHBlcmhhcHMgb25seSBoYXZlIGEgZmV3IG5vZGVzLCBidXQgdGhlIG5ld2x5IGZpbHRlcmVkIHRyZWUgY2FuIGhhdmUgbWFueSBub2RlcyxcbiAgICAgICAqIHRodXMsIHlvdSBjYW5ub3QgdXNlIHByZXZpb3VzIF90cmVlTm9kZXNTdGF0ZXMuXG4gICAgICAgKi9cbiAgICAgIC8vIGdldFRyZWVOb2Rlc1N0YXRlcyBpcyBub3QgZWZmZWN0aXZlLlxuICAgICAgdGhpcy5fdHJlZU5vZGVzU3RhdGVzID0gZ2V0VHJlZU5vZGVzU3RhdGVzKFxuICAgICAgICB0aGlzLnJlbmRlcmVkVHJlZURhdGEgfHwgX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICB2YWx1ZS5tYXAoaXRlbSA9PiBpdGVtLnZhbHVlKSxcbiAgICAgICk7XG4gICAgICB0aGlzLmNoZWNrZWRUcmVlTm9kZXMgPSBjaGVja2VkVHJlZU5vZGVzID0gdGhpcy5fdHJlZU5vZGVzU3RhdGVzLmNoZWNrZWROb2RlcztcbiAgICB9XG4gICAgY29uc3QgbWFwTGFiVmFsID0gYXJyID0+XG4gICAgICBhcnIubWFwKGl0ZW1PYmogPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiBnZXRWYWx1ZVByb3BWYWx1ZShpdGVtT2JqLm5vZGUpLFxuICAgICAgICAgIGxhYmVsOiBnZXRQcm9wVmFsdWUoaXRlbU9iai5ub2RlLCBfcHJvcHMudHJlZU5vZGVMYWJlbFByb3ApLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGxldCBjaGVja2VkVmFsdWVzID0gW107XG4gICAgaWYgKHByb3BzLnNob3dDaGVja2VkU3RyYXRlZ3kgPT09IFNIT1dfQUxMKSB7XG4gICAgICBjaGVja2VkVmFsdWVzID0gbWFwTGFiVmFsKGNoZWNrZWRUcmVlTm9kZXMpO1xuICAgIH0gZWxzZSBpZiAocHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19QQVJFTlQpIHtcbiAgICAgIGNvbnN0IHBvc0FyciA9IGZpbHRlclBhcmVudFBvc2l0aW9uKGNoZWNrZWRUcmVlTm9kZXMubWFwKGl0ZW1PYmogPT4gaXRlbU9iai5wb3MpKTtcbiAgICAgIGNoZWNrZWRWYWx1ZXMgPSBtYXBMYWJWYWwoXG4gICAgICAgIGNoZWNrZWRUcmVlTm9kZXMuZmlsdGVyKGl0ZW1PYmogPT4gcG9zQXJyLmluZGV4T2YoaXRlbU9iai5wb3MpICE9PSAtMSksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGVja2VkVmFsdWVzID0gbWFwTGFiVmFsKGNoZWNrZWRUcmVlTm9kZXMuZmlsdGVyKGl0ZW1PYmogPT4gIWl0ZW1PYmoubm9kZS5wcm9wcy5jaGlsZHJlbikpO1xuICAgIH1cbiAgICByZXR1cm4gY2hlY2tlZFZhbHVlcztcbiAgfVxuXG4gIGdldENoZWNrZWROb2RlcyhpbmZvLCBwcm9wcykge1xuICAgIC8vIFRPRE8gdHJlZUNoZWNrYWJsZSBkb2VzIG5vdCBzdXBwb3J0IHRhZ3MvZHluYW1pY1xuICAgIGxldCB7IGNoZWNrZWROb2RlcyB9ID0gaW5mbztcbiAgICAvLyBpZiBpbnB1dFZhbHVlIGV4aXN0aW5nLCB0cmVlIGlzIGNoZWNrU3RyaWN0bHlcbiAgICBpZiAocHJvcHMudHJlZUNoZWNrU3RyaWN0bHkgfHwgdGhpcy5zdGF0ZS5pbnB1dFZhbHVlKSB7XG4gICAgICByZXR1cm4gY2hlY2tlZE5vZGVzO1xuICAgIH1cbiAgICBjb25zdCBjaGVja2VkTm9kZXNQb3NpdGlvbnMgPSBpbmZvLmNoZWNrZWROb2Rlc1Bvc2l0aW9ucztcbiAgICBpZiAocHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19BTEwpIHtcbiAgICAgIGNoZWNrZWROb2RlcyA9IGNoZWNrZWROb2RlcztcbiAgICB9IGVsc2UgaWYgKHByb3BzLnNob3dDaGVja2VkU3RyYXRlZ3kgPT09IFNIT1dfUEFSRU5UKSB7XG4gICAgICBjb25zdCBwb3NBcnIgPSBmaWx0ZXJQYXJlbnRQb3NpdGlvbihjaGVja2VkTm9kZXNQb3NpdGlvbnMubWFwKGl0ZW1PYmogPT4gaXRlbU9iai5wb3MpKTtcbiAgICAgIGNoZWNrZWROb2RlcyA9IGNoZWNrZWROb2Rlc1Bvc2l0aW9uc1xuICAgICAgICAuZmlsdGVyKGl0ZW1PYmogPT4gcG9zQXJyLmluZGV4T2YoaXRlbU9iai5wb3MpICE9PSAtMSlcbiAgICAgICAgLm1hcChpdGVtT2JqID0+IGl0ZW1PYmoubm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoZWNrZWROb2RlcyA9IGNoZWNrZWROb2Rlcy5maWx0ZXIobiA9PiAhbi5wcm9wcy5jaGlsZHJlbik7XG4gICAgfVxuICAgIHJldHVybiBjaGVja2VkTm9kZXM7XG4gIH1cblxuICBnZXREZXNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSkge1xuICAgIGNvbnN0IGNoZWNrZWRUcmVlTm9kZXMgPSB0aGlzLmNoZWNrZWRUcmVlTm9kZXM7XG4gICAgbGV0IHVuQ2hlY2tQb3M7XG4gICAgY2hlY2tlZFRyZWVOb2Rlcy5mb3JFYWNoKGl0ZW1PYmogPT4ge1xuICAgICAgaWYgKGl0ZW1PYmoubm9kZS5wcm9wcy52YWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZSkge1xuICAgICAgICB1bkNoZWNrUG9zID0gaXRlbU9iai5wb3M7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc3QgbmV3VmFscyA9IFtdO1xuICAgIGNvbnN0IG5ld0NrVG5zID0gW107XG4gICAgY2hlY2tlZFRyZWVOb2Rlcy5mb3JFYWNoKGl0ZW1PYmogPT4ge1xuICAgICAgaWYgKGlzUG9zaXRpb25QcmVmaXgoaXRlbU9iai5wb3MsIHVuQ2hlY2tQb3MpIHx8IGlzUG9zaXRpb25QcmVmaXgodW5DaGVja1BvcywgaXRlbU9iai5wb3MpKSB7XG4gICAgICAgIC8vIEZpbHRlciBhbmNlc3RyYWwgYW5kIGNoaWxkcmVuIG5vZGVzIHdoZW4gdW5jaGVjayBhIG5vZGUuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG5ld0NrVG5zLnB1c2goaXRlbU9iaik7XG4gICAgICBuZXdWYWxzLnB1c2goaXRlbU9iai5ub2RlLnByb3BzLnZhbHVlKTtcbiAgICB9KTtcbiAgICB0aGlzLmNoZWNrZWRUcmVlTm9kZXMgPSB0aGlzLl9jaGVja2VkTm9kZXMgPSBuZXdDa1RucztcbiAgICBjb25zdCBudiA9IHRoaXMuc3RhdGUudmFsdWUuZmlsdGVyKHZhbCA9PiBuZXdWYWxzLmluZGV4T2YodmFsLnZhbHVlKSAhPT0gLTEpO1xuICAgIHRoaXMuZmlyZUNoYW5nZShudiwgeyB0cmlnZ2VyVmFsdWU6IHNlbGVjdGVkVmFsdWUsIGNsZWFyOiB0cnVlIH0pO1xuICB9XG5cbiAgc2V0T3BlblN0YXRlKG9wZW4sIG5lZWRGb2N1cywgZG9jdW1lbnRDbGlja0Nsb3NlID0gZmFsc2UpIHtcbiAgICB0aGlzLmNsZWFyRGVsYXlUaW1lcigpO1xuICAgIGNvbnN0IHsgcHJvcHMgfSA9IHRoaXM7XG4gICAgLy8gY2FuIG5vdCBvcHRpbWl6ZSwgaWYgY2hpbGRyZW4gaXMgZW1wdHlcbiAgICAvLyBpZiAodGhpcy5zdGF0ZS5vcGVuID09PSBvcGVuKSB7XG4gICAgLy8gICByZXR1cm47XG4gICAgLy8gfVxuICAgIGlmICghdGhpcy5wcm9wcy5vbkRyb3Bkb3duVmlzaWJsZUNoYW5nZShvcGVuLCB7IGRvY3VtZW50Q2xpY2tDbG9zZSB9KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKFxuICAgICAge1xuICAgICAgICBvcGVuLFxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgaWYgKG5lZWRGb2N1cyB8fCBvcGVuKSB7XG4gICAgICAgICAgLy8gSW5wdXQgZG9tIGluaXQgYWZ0ZXIgZmlyc3QgdGltZSBjb21wb25lbnQgcmVuZGVyXG4gICAgICAgICAgLy8gQWRkIGRlbGF5IGZvciB0aGlzIHRvIGdldCBmb2N1c1xuICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG9wZW4gfHwgaXNNdWx0aXBsZShwcm9wcykpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLmdldElucHV0RE9NTm9kZSgpO1xuICAgICAgICAgICAgICBpZiAoaW5wdXQgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgKTtcbiAgfVxuXG4gIGNsZWFyU2VhcmNoSW5wdXQoKSB7XG4gICAgdGhpcy5nZXRJbnB1dERPTU5vZGUoKS5mb2N1cygpO1xuICAgIGlmICghKCdpbnB1dFZhbHVlJyBpbiB0aGlzLnByb3BzKSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGlucHV0VmFsdWU6ICcnIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFkZExhYmVsVG9WYWx1ZShwcm9wcywgdmFsdWVfKSB7XG4gICAgbGV0IHZhbHVlID0gdmFsdWVfO1xuICAgIGlmICh0aGlzLmlzTGFiZWxJblZhbHVlKCkpIHtcbiAgICAgIHZhbHVlLmZvckVhY2goKHYsIGkpID0+IHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZVtpXSkgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgdmFsdWVbaV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAgICBsYWJlbDogJycsXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdi5sYWJlbCA9IHYubGFiZWwgfHwgdGhpcy5nZXRMYWJlbEZyb21Qcm9wcyhwcm9wcywgdi52YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5tYXAodiA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsdWU6IHYsXG4gICAgICAgICAgbGFiZWw6IHRoaXMuZ2V0TGFiZWxGcm9tUHJvcHMocHJvcHMsIHYpLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGNsZWFyRGVsYXlUaW1lcigpIHtcbiAgICBpZiAodGhpcy5kZWxheVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5kZWxheVRpbWVyKTtcbiAgICAgIHRoaXMuZGVsYXlUaW1lciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlU2VsZWN0ZWQoc2VsZWN0ZWRWYWwpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHByb3BzLmRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NhY2hlVHJlZU5vZGVzU3RhdGVzID0gJ25vJztcbiAgICBpZiAoXG4gICAgICBwcm9wcy50cmVlQ2hlY2thYmxlICYmXG4gICAgICAocHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19BTEwgfHwgcHJvcHMuc2hvd0NoZWNrZWRTdHJhdGVneSA9PT0gU0hPV19QQVJFTlQpICYmXG4gICAgICAhKHByb3BzLnRyZWVDaGVja1N0cmljdGx5IHx8IHRoaXMuc3RhdGUuaW5wdXRWYWx1ZSlcbiAgICApIHtcbiAgICAgIHRoaXMuZ2V0RGVzZWxlY3RlZFZhbHVlKHNlbGVjdGVkVmFsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gY2xpY2sgdGhlIG5vZGUncyBgeGAoaW4gc2VsZWN0IGJveCksIGxpa2VseSB0cmlnZ2VyIHRoZSBUcmVlTm9kZSdzIGB1bkNoZWNrYCBldmVudCxcbiAgICAvLyBjYXV0aW91c2x5LCB0aGV5IGFyZSBjb21wbGV0ZWx5IGRpZmZlcmVudCwgdGhpbmsgYWJvdXQgaXQsIHRoZSB0cmVlIG1heSBub3QgcmVuZGVyIGF0IGZpcnN0LFxuICAgIC8vIGJ1dCB0aGUgbm9kZXMgaW4gc2VsZWN0IGJveCBhcmUgcmVhZHkuXG4gICAgbGV0IGxhYmVsO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdGF0ZS52YWx1ZS5maWx0ZXIoc2luZ2xlVmFsdWUgPT4ge1xuICAgICAgaWYgKHNpbmdsZVZhbHVlLnZhbHVlID09PSBzZWxlY3RlZFZhbCkge1xuICAgICAgICBsYWJlbCA9IHNpbmdsZVZhbHVlLmxhYmVsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNpbmdsZVZhbHVlLnZhbHVlICE9PSBzZWxlY3RlZFZhbDtcbiAgICB9KTtcbiAgICBjb25zdCBjYW5NdWx0aXBsZSA9IGlzTXVsdGlwbGUocHJvcHMpO1xuXG4gICAgaWYgKGNhbk11bHRpcGxlKSB7XG4gICAgICBsZXQgZXZlbnQgPSBzZWxlY3RlZFZhbDtcbiAgICAgIGlmICh0aGlzLmlzTGFiZWxJblZhbHVlKCkpIHtcbiAgICAgICAgZXZlbnQgPSB7XG4gICAgICAgICAgdmFsdWU6IHNlbGVjdGVkVmFsLFxuICAgICAgICAgIGxhYmVsLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcHJvcHMub25EZXNlbGVjdChldmVudCk7XG4gICAgfVxuICAgIGlmIChwcm9wcy50cmVlQ2hlY2thYmxlKSB7XG4gICAgICBpZiAodGhpcy5jaGVja2VkVHJlZU5vZGVzICYmIHRoaXMuY2hlY2tlZFRyZWVOb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jaGVja2VkVHJlZU5vZGVzID0gdGhpcy5fY2hlY2tlZE5vZGVzID0gdGhpcy5jaGVja2VkVHJlZU5vZGVzLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuc29tZShpID0+IGkudmFsdWUgPT09IGl0ZW0ubm9kZS5wcm9wcy52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmZpcmVDaGFuZ2UodmFsdWUsIHsgdHJpZ2dlclZhbHVlOiBzZWxlY3RlZFZhbCwgY2xlYXI6IHRydWUgfSk7XG4gIH1cblxuICBvcGVuSWZIYXNDaGlsZHJlbigpIHtcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgaWYgKENoaWxkcmVuLmNvdW50KHByb3BzLmNoaWxkcmVuKSB8fCAhaXNNdWx0aXBsZShwcm9wcykpIHtcbiAgICAgIHRoaXMuc2V0T3BlblN0YXRlKHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIGZpcmVDaGFuZ2UodmFsdWUsIGV4dHJhSW5mbyA9IHt9KSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHZhbHMgPSB2YWx1ZS5tYXAoaSA9PiBpLnZhbHVlKTtcbiAgICBjb25zdCBzdiA9IHRoaXMuc3RhdGUudmFsdWUubWFwKGkgPT4gaS52YWx1ZSk7XG4gICAgaWYgKHZhbHMubGVuZ3RoICE9PSBzdi5sZW5ndGggfHwgIXZhbHMuZXZlcnkoKHZhbCwgaW5kZXgpID0+IHN2W2luZGV4XSA9PT0gdmFsKSkge1xuICAgICAgY29uc3QgZXggPSB7XG4gICAgICAgIHByZVZhbHVlOiBbLi4udGhpcy5zdGF0ZS52YWx1ZV0sXG4gICAgICAgIC4uLmV4dHJhSW5mbyxcbiAgICAgIH07XG4gICAgICBsZXQgbGFicyA9IG51bGw7XG4gICAgICBsZXQgdmxzID0gdmFsdWU7XG4gICAgICBpZiAoIXRoaXMuaXNMYWJlbEluVmFsdWUoKSkge1xuICAgICAgICBsYWJzID0gdmFsdWUubWFwKGkgPT4gaS5sYWJlbCk7XG4gICAgICAgIHZscyA9IHZscy5tYXAodiA9PiB2LnZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYWxmQ2hlY2tlZFZhbHVlcyAmJiB0aGlzLmhhbGZDaGVja2VkVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmhhbGZDaGVja2VkVmFsdWVzLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgaWYgKCF2bHMuc29tZSh2ID0+IHYudmFsdWUgPT09IGkudmFsdWUpKSB7XG4gICAgICAgICAgICB2bHMucHVzaChpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BzLnRyZWVDaGVja2FibGUgJiYgZXguY2xlYXIpIHtcbiAgICAgICAgY29uc3QgdHJlZURhdGEgPSB0aGlzLnJlbmRlcmVkVHJlZURhdGEgfHwgcHJvcHMuY2hpbGRyZW47XG4gICAgICAgIGV4LmFsbENoZWNrZWROb2RlcyA9IGZsYXRUb0hpZXJhcmNoeShmaWx0ZXJBbGxDaGVja2VkRGF0YSh2YWxzLCB0cmVlRGF0YSkpO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BzLnRyZWVDaGVja2FibGUgJiYgdGhpcy5zdGF0ZS5pbnB1dFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IF92bHMgPSBbLi4udGhpcy5zdGF0ZS52YWx1ZV07XG4gICAgICAgIGlmIChleC5jaGVja2VkKSB7XG4gICAgICAgICAgdmFsdWUuZm9yRWFjaChpID0+IHtcbiAgICAgICAgICAgIGlmIChfdmxzLmV2ZXJ5KGlpID0+IGlpLnZhbHVlICE9PSBpLnZhbHVlKSkge1xuICAgICAgICAgICAgICBfdmxzLnB1c2goeyAuLi5pIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBpbmRleDtcbiAgICAgICAgICBjb25zdCBpbmNsdWRlVmFsID0gX3Zscy5zb21lKChpLCBpbmQpID0+IHtcbiAgICAgICAgICAgIGlmIChpLnZhbHVlID09PSBleC50cmlnZ2VyVmFsdWUpIHtcbiAgICAgICAgICAgICAgaW5kZXggPSBpbmQ7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChpbmNsdWRlVmFsKSB7XG4gICAgICAgICAgICBfdmxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZscyA9IF92bHM7XG4gICAgICAgIGlmICghdGhpcy5pc0xhYmVsSW5WYWx1ZSgpKSB7XG4gICAgICAgICAgbGFicyA9IF92bHMubWFwKHYgPT4gdi5sYWJlbCk7XG4gICAgICAgICAgdmxzID0gX3Zscy5tYXAodiA9PiB2LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fc2F2ZWRWYWx1ZSA9IGlzTXVsdGlwbGUocHJvcHMpID8gdmxzIDogdmxzWzBdO1xuICAgICAgcHJvcHMub25DaGFuZ2UodGhpcy5fc2F2ZWRWYWx1ZSwgbGFicywgZXgpO1xuICAgICAgaWYgKCEoJ3ZhbHVlJyBpbiBwcm9wcykpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVUcmVlTm9kZXNTdGF0ZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgdmFsdWU6IHRoaXMuZ2V0VmFsdWUoXG4gICAgICAgICAgICBwcm9wcyxcbiAgICAgICAgICAgIHRvQXJyYXkodGhpcy5fc2F2ZWRWYWx1ZSkubWFwKCh2LCBpKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzTGFiZWxJblZhbHVlKClcbiAgICAgICAgICAgICAgICA/IHZcbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHYsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJzICYmIGxhYnNbaV0sXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgKSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNMYWJlbEluVmFsdWUoKSB7XG4gICAgY29uc3QgeyB0cmVlQ2hlY2thYmxlLCB0cmVlQ2hlY2tTdHJpY3RseSwgbGFiZWxJblZhbHVlIH0gPSB0aGlzLnByb3BzO1xuICAgIGlmICh0cmVlQ2hlY2thYmxlICYmIHRyZWVDaGVja1N0cmljdGx5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGxhYmVsSW5WYWx1ZSB8fCBmYWxzZTtcbiAgfVxuXG4gIGZvY3VzKCkge1xuICAgIGlmICghaXNNdWx0aXBsZSh0aGlzLnByb3BzKSkge1xuICAgICAgdGhpcy5zZWxlY3Rpb24uZm9jdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nZXRJbnB1dERPTU5vZGUoKS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIGJsdXIoKSB7XG4gICAgaWYgKCFpc011bHRpcGxlKHRoaXMucHJvcHMpKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvbi5ibHVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2V0SW5wdXRET01Ob2RlKCkuYmx1cigpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlckNsZWFyKCkge1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzLCBhbGxvd0NsZWFyIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgdmFsdWUsIGlucHV0VmFsdWUgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgY2xlYXIgPSAoXG4gICAgICA8QnV0dG9uXG4gICAgICAgIGtleT1cImNsZWFyXCJcbiAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LWNsZWFyYH1cbiAgICAgICAgc3R5bGU9e1VOU0VMRUNUQUJMRV9TVFlMRX1cbiAgICAgICAgey4uLlVOU0VMRUNUQUJMRV9BVFRSSUJVVEV9XG4gICAgICAgIHNoYXBlPVwiY2lyY2xlXCJcbiAgICAgICAgaWNvbj1cImNsb3NlXCJcbiAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgb25DbGljaz17dGhpcy5vbkNsZWFyU2VsZWN0aW9ufVxuICAgICAgICBvbk1vdXNlRG93bj17cHJldmVudERlZmF1bHRFdmVudH1cbiAgICAgIC8+XG4gICAgKTtcbiAgICBpZiAoIWFsbG93Q2xlYXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoaW5wdXRWYWx1ZSB8fCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBjbGVhcjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBvbkFycm93Q2xpY2sgPSBlID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoIXRoaXMucHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMub25Ecm9wZG93blZpc2libGVDaGFuZ2UoIXRoaXMuc3RhdGUub3Blbik7XG4gICAgfVxuICB9O1xuXG4gIGdldFBsYWNlaG9sZGVyRWxlbWVudCA9ICgpID0+IHtcbiAgICBjb25zdCB7IHByb3BzLCBzdGF0ZSB9ID0gdGhpcztcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IHByb3BzLnBsYWNlaG9sZGVyO1xuICAgIGlmIChwbGFjZWhvbGRlcikge1xuICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtgJHtwcm9wcy5wcmVmaXhDbHN9LXNlbGVjdGlvbl9fcGxhY2Vob2xkZXJgfT57cGxhY2Vob2xkZXJ9PC9kaXY+O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICByZW5kZXJUb3BDb250cm9sTm9kZSgpIHtcbiAgICBjb25zdCB7IHZhbHVlIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGNob2ljZVRyYW5zaXRpb25OYW1lLCBwcmVmaXhDbHMsIG1heFRhZ1RleHRMZW5ndGgsIGNob2ljZVJlbmRlciB9ID0gcHJvcHM7XG4gICAgY29uc3QgbXVsdGlwbGUgPSBpc011bHRpcGxlKHByb3BzKTtcblxuICAgIC8vIHNpbmdsZSBhbmQgbm90IGNvbWJvYm94LCBpbnB1dCBpcyBpbnNpZGUgZHJvcGRvd25cbiAgICBpZiAoIW11bHRpcGxlKSB7XG4gICAgICBjb25zdCBzaW5nbGVWYWx1ZSA9IHZhbHVlICYmIHZhbHVlWzBdO1xuICAgICAgY29uc3QgeyBsYWJlbCB9ID0gc2luZ2xlVmFsdWUgfHwge307XG4gICAgICBjb25zdCBpbm5lck5vZGUgPSAoXG4gICAgICAgIDxzcGFuIGtleT1cInZhbHVlXCIgdGl0bGU9e2xhYmVsfSBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uLXNlbGVjdGVkLXZhbHVlYH0+XG4gICAgICAgICAge2Nob2ljZVJlbmRlciA/IGNob2ljZVJlbmRlcihsYWJlbCkgOiBsYWJlbH1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlbGVjdGlvbl9fcmVuZGVyZWRgfT5cbiAgICAgICAgICB7dGhpcy5nZXRQbGFjZWhvbGRlckVsZW1lbnQoKX1cbiAgICAgICAgICB7aW5uZXJOb2RlfVxuICAgICAgICAgIHt0aGlzLnJlbmRlckNsZWFyKCl9XG4gICAgICAgICAge211bHRpcGxlIHx8ICFwcm9wcy5zaG93QXJyb3cgPyBudWxsIDogKFxuICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAga2V5PVwiYXJyb3dcIlxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tYXJyb3dgfVxuICAgICAgICAgICAgICBzdHlsZT17VU5TRUxFQ1RBQkxFX1NUWUxFfVxuICAgICAgICAgICAgICB7Li4uVU5TRUxFQ1RBQkxFX0FUVFJJQlVURX1cbiAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkFycm93Q2xpY2t9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImljb24gaWNvbi1hcnJvd19kcm9wX2Rvd25cIj48L2k+XG4gICAgICAgICAgICAgIDxiIC8+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHNlbGVjdGVkVmFsdWVOb2RlcyA9IHZhbHVlLm1hcChzaW5nbGVWYWx1ZSA9PiB7XG4gICAgICBsZXQgY29udGVudCA9IHNpbmdsZVZhbHVlLmxhYmVsO1xuICAgICAgY29uc3QgdGl0bGUgPSBjb250ZW50O1xuICAgICAgaWYgKG1heFRhZ1RleHRMZW5ndGggJiYgdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnICYmIGNvbnRlbnQubGVuZ3RoID4gbWF4VGFnVGV4dExlbmd0aCkge1xuICAgICAgICBjb250ZW50ID0gYCR7Y29udGVudC5zbGljZSgwLCBtYXhUYWdUZXh0TGVuZ3RoKX0uLi5gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGxpXG4gICAgICAgICAgc3R5bGU9e1VOU0VMRUNUQUJMRV9TVFlMRX1cbiAgICAgICAgICB7Li4uVU5TRUxFQ1RBQkxFX0FUVFJJQlVURX1cbiAgICAgICAgICBvbk1vdXNlRG93bj17cHJldmVudERlZmF1bHRFdmVudH1cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uX19jaG9pY2VgfVxuICAgICAgICAgIGtleT17c2luZ2xlVmFsdWUudmFsdWV9XG4gICAgICAgICAgdGl0bGU9e3RpdGxlfVxuICAgICAgICA+XG4gICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YCR7cHJlZml4Q2xzfS1zZWxlY3Rpb25fX2Nob2ljZV9fcmVtb3ZlYH1cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucmVtb3ZlU2VsZWN0ZWQuYmluZCh0aGlzLCBzaW5nbGVWYWx1ZS52YWx1ZSl9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tc2VsZWN0aW9uX19jaG9pY2VfX2NvbnRlbnRgfT57Y29udGVudH08L3NwYW4+XG4gICAgICAgIDwvbGk+XG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgc2VsZWN0ZWRWYWx1ZU5vZGVzLnB1c2goXG4gICAgICA8bGkgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlYXJjaCAke3ByZWZpeENsc30tc2VhcmNoLS1pbmxpbmVgfSBrZXk9XCJfX2lucHV0XCI+XG4gICAgICAgIHt0aGlzLmdldElucHV0RWxlbWVudCgpfVxuICAgICAgPC9saT4sXG4gICAgKTtcbiAgICBjb25zdCBjbGFzc05hbWUgPSBgJHtwcmVmaXhDbHN9LXNlbGVjdGlvbl9fcmVuZGVyZWRgO1xuICAgIGlmIChjaG9pY2VUcmFuc2l0aW9uTmFtZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEFuaW1hdGVcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgICAgICBjb21wb25lbnQ9XCJ1bFwiXG4gICAgICAgICAgdHJhbnNpdGlvbk5hbWU9e2Nob2ljZVRyYW5zaXRpb25OYW1lfVxuICAgICAgICAgIG9uTGVhdmU9e3RoaXMub25DaG9pY2VBbmltYXRpb25MZWF2ZX1cbiAgICAgICAgPlxuICAgICAgICAgIHtzZWxlY3RlZFZhbHVlTm9kZXN9XG4gICAgICAgIDwvQW5pbWF0ZT5cbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiA8dWwgY2xhc3NOYW1lPXtjbGFzc05hbWV9PntzZWxlY3RlZFZhbHVlTm9kZXN9PC91bD47XG4gIH1cblxuICByZW5kZXJUcmVlRGF0YShwcm9wcykge1xuICAgIGNvbnN0IHZhbGlkUHJvcHMgPSBwcm9wcyB8fCB0aGlzLnByb3BzO1xuICAgIGlmICh2YWxpZFByb3BzLnRyZWVEYXRhKSB7XG4gICAgICBpZiAocHJvcHMgJiYgcHJvcHMudHJlZURhdGEgPT09IHRoaXMucHJvcHMudHJlZURhdGEgJiYgdGhpcy5yZW5kZXJlZFRyZWVEYXRhKSB7XG4gICAgICAgIC8vIGNhY2hlIGFuZCB1c2UgcHJlIGRhdGEuXG4gICAgICAgIHRoaXMuX2NhY2hldHJlZURhdGEgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlZFRyZWVEYXRhO1xuICAgICAgfVxuICAgICAgdGhpcy5fY2FjaGV0cmVlRGF0YSA9IGZhbHNlO1xuICAgICAgbGV0IHRyZWVEYXRhID0gWy4uLnZhbGlkUHJvcHMudHJlZURhdGFdO1xuICAgICAgLy8gcHJvY2VzcyB0cmVlRGF0YVNpbXBsZU1vZGVcbiAgICAgIGlmICh2YWxpZFByb3BzLnRyZWVEYXRhU2ltcGxlTW9kZSkge1xuICAgICAgICBsZXQgc2ltcGxlRm9ybWF0ID0ge1xuICAgICAgICAgIGlkOiAnaWQnLFxuICAgICAgICAgIHBJZDogJ3BJZCcsXG4gICAgICAgICAgcm9vdFBJZDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWxpZFByb3BzLnRyZWVEYXRhU2ltcGxlTW9kZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgc2ltcGxlRm9ybWF0ID0geyAuLi5zaW1wbGVGb3JtYXQsIC4uLnZhbGlkUHJvcHMudHJlZURhdGFTaW1wbGVNb2RlIH07XG4gICAgICAgIH1cbiAgICAgICAgdHJlZURhdGEgPSBwcm9jZXNzU2ltcGxlVHJlZURhdGEodHJlZURhdGEsIHNpbXBsZUZvcm1hdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbG9vcFRyZWVEYXRhKHRyZWVEYXRhLCB1bmRlZmluZWQsIHRoaXMucHJvcHMudHJlZUNoZWNrYWJsZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0VW5kZXJMaW5lKCkge1xuICAgIGNvbnN0IHsgcHJlZml4Q2xzLCBjbGFzc05hbWUgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoY2xhc3NOYW1lICYmIGNsYXNzTmFtZS5pbmNsdWRlcyhgJHtwcmVmaXhDbHN9LWF1dG8tY29tcGxldGVgKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXVuZGVybGluZWB9PlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake3ByZWZpeENsc30tcmlwcGxlYH0gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IG11bHRpcGxlID0gaXNNdWx0aXBsZShwcm9wcyk7XG4gICAgY29uc3QgeyBvcGVuLCBmb2N1c2VkLCBpbnB1dFZhbHVlLCB2YWx1ZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgZGlzYWJsZWQsIGxhYmVsLCBwcmVmaXhDbHMgfSA9IHByb3BzO1xuICAgIGNvbnN0IGN0cmxOb2RlID0gdGhpcy5yZW5kZXJUb3BDb250cm9sTm9kZSgpO1xuICAgIGxldCBleHRyYVNlbGVjdGlvblByb3BzID0ge307XG4gICAgaWYgKCFtdWx0aXBsZSkge1xuICAgICAgZXh0cmFTZWxlY3Rpb25Qcm9wcyA9IHtcbiAgICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93bixcbiAgICAgICAgdGFiSW5kZXg6IDAsXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByb290Q2xzID0ge1xuICAgICAgW2NsYXNzTmFtZV06ICEhY2xhc3NOYW1lLFxuICAgICAgW3ByZWZpeENsc106IDEsXG4gICAgICBbYCR7cHJlZml4Q2xzfS1vcGVuYF06IG9wZW4sXG4gICAgICBbYCR7cHJlZml4Q2xzfS1mb2N1c2VkYF06IG9wZW4gfHwgZm9jdXNlZCxcbiAgICAgIFtgJHtwcmVmaXhDbHN9LWhhcy12YWx1ZWBdOiBpbnB1dFZhbHVlIHx8ICh2YWx1ZS5sZW5ndGggJiYgdmFsdWVbMF0pLFxuICAgICAgW2Ake3ByZWZpeENsc30taGFzLWxhYmVsYF06IGxhYmVsLFxuICAgICAgLy8gW2Ake3ByZWZpeENsc30tY29tYm9ib3hgXTogaXNDb21ib2JveChwcm9wcyksXG4gICAgICBbYCR7cHJlZml4Q2xzfS1kaXNhYmxlZGBdOiBkaXNhYmxlZCxcbiAgICAgIFtgJHtwcmVmaXhDbHN9LWVuYWJsZWRgXTogIWRpc2FibGVkLFxuICAgICAgW2Ake3ByZWZpeENsc30tYWxsb3ctY2xlYXJgXTogISFwcm9wcy5hbGxvd0NsZWFyLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNlbGVjdFRyaWdnZXJcbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgICB0cmVlTm9kZXM9e3Byb3BzLmNoaWxkcmVufVxuICAgICAgICB0cmVlRGF0YT17dGhpcy5yZW5kZXJlZFRyZWVEYXRhfVxuICAgICAgICBfY2FjaGV0cmVlRGF0YT17dGhpcy5fY2FjaGV0cmVlRGF0YX1cbiAgICAgICAgX3RyZWVOb2Rlc1N0YXRlcz17dGhpcy5fdHJlZU5vZGVzU3RhdGVzfVxuICAgICAgICBoYWxmQ2hlY2tlZFZhbHVlcz17dGhpcy5oYWxmQ2hlY2tlZFZhbHVlc31cbiAgICAgICAgbXVsdGlwbGU9e211bHRpcGxlfVxuICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICAgIHZpc2libGU9e29wZW59XG4gICAgICAgIGlucHV0VmFsdWU9e2lucHV0VmFsdWV9XG4gICAgICAgIGlucHV0RWxlbWVudD17dGhpcy5nZXRJbnB1dEVsZW1lbnQoKX1cbiAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICBvbkRyb3Bkb3duVmlzaWJsZUNoYW5nZT17dGhpcy5vbkRyb3Bkb3duVmlzaWJsZUNoYW5nZX1cbiAgICAgICAgZ2V0UG9wdXBDb250YWluZXI9e3Byb3BzLmdldFBvcHVwQ29udGFpbmVyfVxuICAgICAgICBvblNlbGVjdD17dGhpcy5vblNlbGVjdH1cbiAgICAgICAgcmVmPXtzYXZlUmVmKHRoaXMsICd0cmlnZ2VyJyl9XG4gICAgICA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBzdHlsZT17cHJvcHMuc3R5bGV9XG4gICAgICAgICAgb25DbGljaz17cHJvcHMub25DbGlja31cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzbmFtZXMocm9vdENscyl9XG4gICAgICAgICAgb25CbHVyPXtwcm9wcy5vbkJsdXJ9XG4gICAgICAgICAgb25Gb2N1cz17cHJvcHMub25Gb2N1c31cbiAgICAgICAgPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHJlZj17c2F2ZVJlZih0aGlzLCAnc2VsZWN0aW9uJyl9XG4gICAgICAgICAgICBrZXk9XCJzZWxlY3Rpb25cIlxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHtwcmVmaXhDbHN9LXNlbGVjdGlvblxuICAgICAgICAgICAgJHtwcmVmaXhDbHN9LXNlbGVjdGlvbi0tJHttdWx0aXBsZSA/ICdtdWx0aXBsZScgOiAnc2luZ2xlJ31gfVxuICAgICAgICAgICAgcm9sZT1cImNvbWJvYm94XCJcbiAgICAgICAgICAgIGFyaWEtYXV0b2NvbXBsZXRlPVwibGlzdFwiXG4gICAgICAgICAgICBhcmlhLWhhc3BvcHVwPVwidHJ1ZVwiXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPXtvcGVufVxuICAgICAgICAgICAgey4uLmV4dHJhU2VsZWN0aW9uUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2N0cmxOb2RlfVxuICAgICAgICAgICAge211bHRpcGxlID8gdGhpcy5nZXRTZWFyY2hQbGFjZWhvbGRlckVsZW1lbnQoISFpbnB1dFZhbHVlIHx8IHZhbHVlLmxlbmd0aCkgOiBudWxsfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHt0aGlzLmdldFVuZGVyTGluZSgpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvU2VsZWN0VHJpZ2dlcj5cbiAgICApO1xuICB9XG59XG4iXX0=