0313e5833f4fe2944ea367c3940fab4c
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _cssAnimation = _interopRequireDefault(require("css-animation"));

var _raf = _interopRequireDefault(require("raf"));

function animate(node, show, done) {
  var height;
  var requestAnimationFrameId;
  return (0, _cssAnimation["default"])(node, 'c7n-motion-collapse', {
    start: function start() {
      if (!show) {
        node.style.height = "".concat(node.offsetHeight, "px");
        node.style.opacity = '1';
      } else {
        height = node.offsetHeight;
        node.style.height = '0px';
        node.style.opacity = '0';
      }
    },
    active: function active() {
      if (requestAnimationFrameId) {
        _raf["default"].cancel(requestAnimationFrameId);
      }

      requestAnimationFrameId = (0, _raf["default"])(function () {
        node.style.height = "".concat(show ? height : 0, "px");
        node.style.opacity = show ? '1' : '0';
      });
    },
    end: function end() {
      if (requestAnimationFrameId) {
        _raf["default"].cancel(requestAnimationFrameId);
      }

      node.style.height = '';
      node.style.opacity = '';
      done();
    }
  });
}

var animation = {
  enter: function enter(node, done) {
    return animate(node, true, done);
  },
  leave: function leave(node, done) {
    return animate(node, false, done);
  },
  appear: function appear(node, done) {
    return animate(node, true, done);
  }
};
var _default = animation;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl91dGlsL29wZW5BbmltYXRpb24uanN4Il0sIm5hbWVzIjpbInN0YXJ0Iiwibm9kZSIsImhlaWdodCIsImFjdGl2ZSIsInJhZiIsInJlcXVlc3RBbmltYXRpb25GcmFtZUlkIiwic2hvdyIsImVuZCIsImRvbmUiLCJhbmltYXRpb24iLCJlbnRlciIsImFuaW1hdGUiLCJsZWF2ZSIsImFwcGVhciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsSUFBQSxhQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsZUFBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxJQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLENBQUEsS0FBQSxDQUFBLENBQUE7O0FBQ0EsU0FBQSxPQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQW1DO0FBQy9CLE1BQUEsTUFBQTtBQUNBLE1BQUEsdUJBQUE7QUFDQSxTQUFPLENBQUEsR0FBQSxhQUFBLENBQUEsU0FBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLHFCQUFBLEVBQTBDO0FBQzdDQSxJQUFBQSxLQUQ2QyxFQUFBLFNBQUEsS0FBQSxHQUNyQztBQUNKLFVBQUksQ0FBSixJQUFBLEVBQVc7QUFDUEMsUUFBQUEsSUFBSSxDQUFKQSxLQUFBQSxDQUFBQSxNQUFBQSxHQUFBQSxHQUFBQSxNQUFBQSxDQUF1QkEsSUFBSSxDQUEzQkEsWUFBQUEsRUFBQUEsSUFBQUEsQ0FBQUE7QUFDQUEsUUFBQUEsSUFBSSxDQUFKQSxLQUFBQSxDQUFBQSxPQUFBQSxHQUFBQSxHQUFBQTtBQUZKLE9BQUEsTUFJSztBQUNEQyxRQUFBQSxNQUFNLEdBQUdELElBQUksQ0FBYkMsWUFBQUE7QUFDQUQsUUFBQUEsSUFBSSxDQUFKQSxLQUFBQSxDQUFBQSxNQUFBQSxHQUFBQSxLQUFBQTtBQUNBQSxRQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE9BQUFBLEdBQUFBLEdBQUFBO0FBQ0g7QUFWd0MsS0FBQTtBQVk3Q0UsSUFBQUEsTUFaNkMsRUFBQSxTQUFBLE1BQUEsR0FZcEM7QUFDTCxVQUFBLHVCQUFBLEVBQTZCO0FBQ3pCQyxRQUFBQSxJQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQUFBQSxNQUFBQSxDQUFBQSx1QkFBQUE7QUFDSDs7QUFDREMsTUFBQUEsdUJBQXVCLEdBQUcsQ0FBQSxHQUFBLElBQUEsQ0FBQSxTQUFBLENBQUEsRUFBSSxZQUFNO0FBQ2hDSixRQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE1BQUFBLEdBQUFBLEdBQUFBLE1BQUFBLENBQXVCSyxJQUFJLEdBQUEsTUFBQSxHQUEzQkwsQ0FBQUEsRUFBQUEsSUFBQUEsQ0FBQUE7QUFDQUEsUUFBQUEsSUFBSSxDQUFKQSxLQUFBQSxDQUFBQSxPQUFBQSxHQUFxQkssSUFBSSxHQUFBLEdBQUEsR0FBekJMLEdBQUFBO0FBRkpJLE9BQTBCLENBQTFCQTtBQWhCeUMsS0FBQTtBQXFCN0NFLElBQUFBLEdBckI2QyxFQUFBLFNBQUEsR0FBQSxHQXFCdkM7QUFDRixVQUFBLHVCQUFBLEVBQTZCO0FBQ3pCSCxRQUFBQSxJQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSxDQUFBQSxNQUFBQSxDQUFBQSx1QkFBQUE7QUFDSDs7QUFDREgsTUFBQUEsSUFBSSxDQUFKQSxLQUFBQSxDQUFBQSxNQUFBQSxHQUFBQSxFQUFBQTtBQUNBQSxNQUFBQSxJQUFJLENBQUpBLEtBQUFBLENBQUFBLE9BQUFBLEdBQUFBLEVBQUFBO0FBQ0FPLE1BQUFBLElBQUk7QUFDUDtBQTVCNEMsR0FBMUMsQ0FBUDtBQThCSDs7QUFDRCxJQUFNQyxTQUFTLEdBQUc7QUFDZEMsRUFBQUEsS0FEYyxFQUFBLFNBQUEsS0FBQSxDQUFBLElBQUEsRUFBQSxJQUFBLEVBQ0k7QUFDZCxXQUFPQyxPQUFPLENBQUEsSUFBQSxFQUFBLElBQUEsRUFBZCxJQUFjLENBQWQ7QUFGVSxHQUFBO0FBSWRDLEVBQUFBLEtBSmMsRUFBQSxTQUFBLEtBQUEsQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQUlJO0FBQ2QsV0FBT0QsT0FBTyxDQUFBLElBQUEsRUFBQSxLQUFBLEVBQWQsSUFBYyxDQUFkO0FBTFUsR0FBQTtBQU9kRSxFQUFBQSxNQVBjLEVBQUEsU0FBQSxNQUFBLENBQUEsSUFBQSxFQUFBLElBQUEsRUFPSztBQUNmLFdBQU9GLE9BQU8sQ0FBQSxJQUFBLEVBQUEsSUFBQSxFQUFkLElBQWMsQ0FBZDtBQUNIO0FBVGEsQ0FBbEI7ZUFXZUYsUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjc3NBbmltYXRpb24gZnJvbSAnY3NzLWFuaW1hdGlvbic7XG5pbXBvcnQgcmFmIGZyb20gJ3JhZic7XG5mdW5jdGlvbiBhbmltYXRlKG5vZGUsIHNob3csIGRvbmUpIHtcbiAgICBsZXQgaGVpZ2h0O1xuICAgIGxldCByZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZDtcbiAgICByZXR1cm4gY3NzQW5pbWF0aW9uKG5vZGUsICdjN24tbW90aW9uLWNvbGxhcHNlJywge1xuICAgICAgICBzdGFydCgpIHtcbiAgICAgICAgICAgIGlmICghc2hvdykge1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gYCR7bm9kZS5vZmZzZXRIZWlnaHR9cHhgO1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IG5vZGUub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuaGVpZ2h0ID0gJzBweCc7XG4gICAgICAgICAgICAgICAgbm9kZS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBhY3RpdmUoKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQpIHtcbiAgICAgICAgICAgICAgICByYWYuY2FuY2VsKHJlcXVlc3RBbmltYXRpb25GcmFtZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZUlkID0gcmFmKCgpID0+IHtcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IGAke3Nob3cgPyBoZWlnaHQgOiAwfXB4YDtcbiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLm9wYWNpdHkgPSBzaG93ID8gJzEnIDogJzAnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVuZCgpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCkge1xuICAgICAgICAgICAgICAgIHJhZi5jYW5jZWwocmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgIG5vZGUuc3R5bGUub3BhY2l0eSA9ICcnO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuY29uc3QgYW5pbWF0aW9uID0ge1xuICAgIGVudGVyKG5vZGUsIGRvbmUpIHtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGUobm9kZSwgdHJ1ZSwgZG9uZSk7XG4gICAgfSxcbiAgICBsZWF2ZShub2RlLCBkb25lKSB7XG4gICAgICAgIHJldHVybiBhbmltYXRlKG5vZGUsIGZhbHNlLCBkb25lKTtcbiAgICB9LFxuICAgIGFwcGVhcihub2RlLCBkb25lKSB7XG4gICAgICAgIHJldHVybiBhbmltYXRlKG5vZGUsIHRydWUsIGRvbmUpO1xuICAgIH0sXG59O1xuZXhwb3J0IGRlZmF1bHQgYW5pbWF0aW9uO1xuIl19