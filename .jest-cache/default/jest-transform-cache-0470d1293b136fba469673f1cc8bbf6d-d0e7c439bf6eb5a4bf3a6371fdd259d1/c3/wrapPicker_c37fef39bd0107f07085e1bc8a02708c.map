{"version":3,"sources":["/Users/huihuawk/Documents/opt/choerodon-ui/components/date-picker/wrapPicker.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Component, ComponentClass, FocusEventHandler } from 'react';\nimport classNames from 'classnames';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport { generateShowHourMinuteSecond } from '../time-picker';\nimport enUS from './locale/en_US';\nimport TimePickerPanel from '../rc-components/time-picker/Panel';\nimport { Size } from '../_util/enum';\nimport { getPrefixCls } from '../configure';\n\nfunction getColumns({ showHour, showMinute, showSecond, use12Hours }: any) {\n  let column = 0;\n  if (showHour) {\n    column += 1;\n  }\n  if (showMinute) {\n    column += 1;\n  }\n  if (showSecond) {\n    column += 1;\n  }\n  if (use12Hours) {\n    column += 1;\n  }\n  return column;\n}\n\nexport default function wrapPicker(Picker: ComponentClass<any>, defaultFormat?: string): any {\n  return class PickerWrapper extends Component<any, any> {\n    static displayName = 'PickerWrapper';\n\n    static defaultProps = {\n      format: defaultFormat || 'YYYY-MM-DD',\n      transitionName: 'slide-up',\n      popupStyle: {},\n      onChange() {},\n      onOk() {},\n      onOpenChange() {},\n      locale: {},\n      prefixCls: getPrefixCls('calendar'),\n      inputPrefixCls: getPrefixCls('input'),\n      border: true,\n    };\n\n    private picker: any;\n\n    componentDidMount() {\n      const { autoFocus, disabled } = this.props;\n      if (autoFocus && !disabled) {\n        this.focus();\n      }\n    }\n\n    handleOpenChange = (open: boolean) => {\n      const { onOpenChange } = this.props;\n      onOpenChange(open);\n    };\n\n    handleFocus = (e: FocusEventHandler<HTMLInputElement>) => {\n      const { onFocus } = this.props;\n      if (onFocus) {\n        onFocus(e);\n      }\n    };\n\n    handleBlur = (e: FocusEventHandler<HTMLInputElement>) => {\n      const { onBlur } = this.props;\n      if (onBlur) {\n        onBlur(e);\n      }\n    };\n\n    focus() {\n      this.picker.focus();\n    }\n\n    blur() {\n      this.picker.blur();\n    }\n\n    savePicker = (node: any) => {\n      this.picker = node;\n    };\n\n    getDefaultLocale = () => {\n      const { locale } = this.props;\n      const result = {\n        ...enUS,\n        ...locale,\n      };\n      result.lang = {\n        ...result.lang,\n        ...(locale || {}).lang,\n      };\n      return result;\n    };\n\n    renderPicker = (locale: any, localeCode: string) => {\n      const props = this.props;\n      const { prefixCls, inputPrefixCls } = props;\n      const pickerClass = classNames(`${prefixCls}-picker`, {\n        [`${prefixCls}-picker-${props.size}`]: !!props.size,\n      });\n      const pickerInputClass = classNames(`${prefixCls}-picker-input`, inputPrefixCls, {\n        [`${inputPrefixCls}-lg`]: props.size === Size.large,\n        [`${inputPrefixCls}-sm`]: props.size === Size.small,\n        [`${inputPrefixCls}-disabled`]: props.disabled,\n      });\n      const pickerWrapperInputClass = classNames(`${inputPrefixCls}-wrapper`, {\n        [`${inputPrefixCls}-disabled`]: props.disabled,\n        [`${inputPrefixCls}-has-border`]: props.border,\n      });\n\n      const timeFormat = (props.showTime && props.showTime.format) || 'HH:mm:ss';\n      const rcTimePickerProps = {\n        ...generateShowHourMinuteSecond(timeFormat),\n        format: timeFormat,\n        use12Hours: props.showTime && props.showTime.use12Hours,\n      };\n      const columns = getColumns(rcTimePickerProps);\n      const timePickerCls = `${prefixCls}-time-picker-column-${columns}`;\n      const timePicker = props.showTime ? (\n        <TimePickerPanel\n          {...rcTimePickerProps}\n          {...props.showTime}\n          prefixCls={`${prefixCls}-time-picker`}\n          className={timePickerCls}\n          placeholder={locale.timePickerLocale.placeholder}\n          transitionName=\"slide-up\"\n        />\n      ) : null;\n\n      return (\n        <Picker\n          {...props}\n          ref={this.savePicker}\n          pickerClass={pickerClass}\n          pickerInputClass={pickerInputClass}\n          pickerWrapperInputClass={pickerWrapperInputClass}\n          locale={locale}\n          localeCode={localeCode}\n          timePicker={timePicker}\n          onOpenChange={this.handleOpenChange}\n          onFocus={this.handleFocus}\n          onBlur={this.handleBlur}\n        />\n      );\n    };\n\n    render() {\n      return (\n        <LocaleReceiver componentName=\"DatePicker\" defaultLocale={this.getDefaultLocale}>\n          {this.renderPicker}\n        </LocaleReceiver>\n      );\n    }\n  };\n}\n"]}